var wG=Object.defineProperty;var SG=(e,t,r)=>t in e?wG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var EG=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var hb=(e,t,r)=>(SG(e,typeof t!="symbol"?t+"":t,r),r);var b$e=EG((If,yc)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();var _S=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof{}<"u"?{}:typeof self<"u"?self:{};function Xs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Vy(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var l=Function.bind.apply(t,i);return new l}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var WN={exports:{}},bS={},ZN={exports:{}},qa={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fx=Symbol.for("react.element"),CG=Symbol.for("react.portal"),PG=Symbol.for("react.fragment"),TG=Symbol.for("react.strict_mode"),AG=Symbol.for("react.profiler"),kG=Symbol.for("react.provider"),IG=Symbol.for("react.context"),MG=Symbol.for("react.forward_ref"),OG=Symbol.for("react.suspense"),RG=Symbol.for("react.memo"),DG=Symbol.for("react.lazy"),_3=Symbol.iterator;function zG(e){return e===null||typeof e!="object"?null:(e=_3&&e[_3]||e["@@iterator"],typeof e=="function"?e:null)}var XN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},KN=Object.assign,YN={};function b0(e,t,r){this.props=e,this.context=t,this.refs=YN,this.updater=r||XN}b0.prototype.isReactComponent={};b0.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};b0.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function JN(){}JN.prototype=b0.prototype;function aI(e,t,r){this.props=e,this.context=t,this.refs=YN,this.updater=r||XN}var oI=aI.prototype=new JN;oI.constructor=aI;KN(oI,b0.prototype);oI.isPureReactComponent=!0;var b3=Array.isArray,QN=Object.prototype.hasOwnProperty,sI={current:null},e6={key:!0,ref:!0,__self:!0,__source:!0};function t6(e,t,r){var n,i={},l=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)QN.call(t,n)&&!e6.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var d=Array(s),v=0;v<s;v++)d[v]=arguments[v+2];i.children=d}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:Fx,type:e,key:l,ref:a,props:i,_owner:sI.current}}function LG(e,t){return{$$typeof:Fx,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function lI(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fx}function $G(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var x3=/\/+/g;function LC(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$G(""+e.key):t.toString(36)}function Mw(e,t,r,n,i){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Fx:case CG:a=!0}}if(a)return a=e,i=i(a),e=n===""?"."+LC(a,0):n,b3(i)?(r="",e!=null&&(r=e.replace(x3,"$&/")+"/"),Mw(i,t,r,"",function(v){return v})):i!=null&&(lI(i)&&(i=LG(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(x3,"$&/")+"/")+e)),t.push(i)),1;if(a=0,n=n===""?".":n+":",b3(e))for(var s=0;s<e.length;s++){l=e[s];var d=n+LC(l,s);a+=Mw(l,t,r,d,i)}else if(d=zG(e),typeof d=="function")for(e=d.call(e),s=0;!(l=e.next()).done;)l=l.value,d=n+LC(l,s++),a+=Mw(l,t,r,d,i);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function H1(e,t,r){if(e==null)return e;var n=[],i=0;return Mw(e,n,"","",function(l){return t.call(r,l,i++)}),n}function NG(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xc={current:null},Ow={transition:null},BG={ReactCurrentDispatcher:xc,ReactCurrentBatchConfig:Ow,ReactCurrentOwner:sI};qa.Children={map:H1,forEach:function(e,t,r){H1(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return H1(e,function(){t++}),t},toArray:function(e){return H1(e,function(t){return t})||[]},only:function(e){if(!lI(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};qa.Component=b0;qa.Fragment=PG;qa.Profiler=AG;qa.PureComponent=aI;qa.StrictMode=TG;qa.Suspense=OG;qa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BG;qa.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=KN({},e.props),i=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=sI.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(d in t)QN.call(t,d)&&!e6.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&s!==void 0?s[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){s=Array(d);for(var v=0;v<d;v++)s[v]=arguments[v+2];n.children=s}return{$$typeof:Fx,type:e.type,key:i,ref:l,props:n,_owner:a}};qa.createContext=function(e){return e={$$typeof:IG,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:kG,_context:e},e.Consumer=e};qa.createElement=t6;qa.createFactory=function(e){var t=t6.bind(null,e);return t.type=e,t};qa.createRef=function(){return{current:null}};qa.forwardRef=function(e){return{$$typeof:MG,render:e}};qa.isValidElement=lI;qa.lazy=function(e){return{$$typeof:DG,_payload:{_status:-1,_result:e},_init:NG}};qa.memo=function(e,t){return{$$typeof:RG,type:e,compare:t===void 0?null:t}};qa.startTransition=function(e){var t=Ow.transition;Ow.transition={};try{e()}finally{Ow.transition=t}};qa.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};qa.useCallback=function(e,t){return xc.current.useCallback(e,t)};qa.useContext=function(e){return xc.current.useContext(e)};qa.useDebugValue=function(){};qa.useDeferredValue=function(e){return xc.current.useDeferredValue(e)};qa.useEffect=function(e,t){return xc.current.useEffect(e,t)};qa.useId=function(){return xc.current.useId()};qa.useImperativeHandle=function(e,t,r){return xc.current.useImperativeHandle(e,t,r)};qa.useInsertionEffect=function(e,t){return xc.current.useInsertionEffect(e,t)};qa.useLayoutEffect=function(e,t){return xc.current.useLayoutEffect(e,t)};qa.useMemo=function(e,t){return xc.current.useMemo(e,t)};qa.useReducer=function(e,t,r){return xc.current.useReducer(e,t,r)};qa.useRef=function(e){return xc.current.useRef(e)};qa.useState=function(e){return xc.current.useState(e)};qa.useSyncExternalStore=function(e,t,r){return xc.current.useSyncExternalStore(e,t,r)};qa.useTransition=function(){return xc.current.useTransition()};qa.version="18.2.0";ZN.exports=qa;var Fe=ZN.exports;const Ee=Xs(Fe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FG=Fe,UG=Symbol.for("react.element"),jG=Symbol.for("react.fragment"),VG=Object.prototype.hasOwnProperty,qG=FG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GG={key:!0,ref:!0,__self:!0,__source:!0};function r6(e,t,r){var n,i={},l=null,a=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)VG.call(t,n)&&!GG.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:UG,type:e,key:l,ref:a,props:i,_owner:qG.current}}bS.Fragment=jG;bS.jsx=r6;bS.jsxs=r6;WN.exports=bS;var uI=WN.exports;const Pu=uI.Fragment,ae=uI.jsx,Ft=uI.jsxs;var n6={exports:{}},$f={},i6={exports:{}},a6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(St,Zt){var Kt=St.length;St.push(Zt);e:for(;0<Kt;){var Ge=Kt-1>>>1,Ye=St[Ge];if(0<i(Ye,Zt))St[Ge]=Zt,St[Kt]=Ye,Kt=Ge;else break e}}function r(St){return St.length===0?null:St[0]}function n(St){if(St.length===0)return null;var Zt=St[0],Kt=St.pop();if(Kt!==Zt){St[0]=Kt;e:for(var Ge=0,Ye=St.length,Dr=Ye>>>1;Ge<Dr;){var wr=2*(Ge+1)-1,tr=St[wr],br=wr+1,Bt=St[br];if(0>i(tr,Kt))br<Ye&&0>i(Bt,tr)?(St[Ge]=Bt,St[br]=Kt,Ge=br):(St[Ge]=tr,St[wr]=Kt,Ge=wr);else if(br<Ye&&0>i(Bt,Kt))St[Ge]=Bt,St[br]=Kt,Ge=br;else break e}}return Zt}function i(St,Zt){var Kt=St.sortIndex-Zt.sortIndex;return Kt!==0?Kt:St.id-Zt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var d=[],v=[],S=1,A=null,P=3,L=!1,F=!1,K=!1,re=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(St){for(var Zt=r(v);Zt!==null;){if(Zt.callback===null)n(v);else if(Zt.startTime<=St)n(v),Zt.sortIndex=Zt.expirationTime,t(d,Zt);else break;Zt=r(v)}}function $(St){if(K=!1,B(St),!F)if(r(d)!==null)F=!0,it(N);else{var Zt=r(v);Zt!==null&&Rt($,Zt.startTime-St)}}function N(St,Zt){F=!1,K&&(K=!1,G(te),te=-1),L=!0;var Kt=P;try{for(B(Zt),A=r(d);A!==null&&(!(A.expirationTime>Zt)||St&&!Pe());){var Ge=A.callback;if(typeof Ge=="function"){A.callback=null,P=A.priorityLevel;var Ye=Ge(A.expirationTime<=Zt);Zt=e.unstable_now(),typeof Ye=="function"?A.callback=Ye:A===r(d)&&n(d),B(Zt)}else n(d);A=r(d)}if(A!==null)var Dr=!0;else{var wr=r(v);wr!==null&&Rt($,wr.startTime-Zt),Dr=!1}return Dr}finally{A=null,P=Kt,L=!1}}var z=!1,X=null,te=-1,pe=5,ke=-1;function Pe(){return!(e.unstable_now()-ke<pe)}function ge(){if(X!==null){var St=e.unstable_now();ke=St;var Zt=!0;try{Zt=X(!0,St)}finally{Zt?Ie():(z=!1,X=null)}}else z=!1}var Ie;if(typeof H=="function")Ie=function(){H(ge)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,lt=Ne.port2;Ne.port1.onmessage=ge,Ie=function(){lt.postMessage(null)}}else Ie=function(){re(ge,0)};function it(St){X=St,z||(z=!0,Ie())}function Rt(St,Zt){te=re(function(){St(e.unstable_now())},Zt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(St){St.callback=null},e.unstable_continueExecution=function(){F||L||(F=!0,it(N))},e.unstable_forceFrameRate=function(St){0>St||125<St?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pe=0<St?Math.floor(1e3/St):5},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(St){switch(P){case 1:case 2:case 3:var Zt=3;break;default:Zt=P}var Kt=P;P=Zt;try{return St()}finally{P=Kt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(St,Zt){switch(St){case 1:case 2:case 3:case 4:case 5:break;default:St=3}var Kt=P;P=St;try{return Zt()}finally{P=Kt}},e.unstable_scheduleCallback=function(St,Zt,Kt){var Ge=e.unstable_now();switch(typeof Kt=="object"&&Kt!==null?(Kt=Kt.delay,Kt=typeof Kt=="number"&&0<Kt?Ge+Kt:Ge):Kt=Ge,St){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=Kt+Ye,St={id:S++,callback:Zt,priorityLevel:St,startTime:Kt,expirationTime:Ye,sortIndex:-1},Kt>Ge?(St.sortIndex=Kt,t(v,St),r(d)===null&&St===r(v)&&(K?(G(te),te=-1):K=!0,Rt($,Kt-Ge))):(St.sortIndex=Ye,t(d,St),F||L||(F=!0,it(N))),St},e.unstable_shouldYield=Pe,e.unstable_wrapCallback=function(St){var Zt=P;return function(){var Kt=P;P=Zt;try{return St.apply(this,arguments)}finally{P=Kt}}}})(a6);i6.exports=a6;var HG=i6.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o6=Fe,Of=HG;function dn(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s6=new Set,ox={};function qy(e,t){i0(e,t),i0(e+"Capture",t)}function i0(e,t){for(ox[e]=t,e=0;e<t.length;e++)s6.add(t[e])}var am=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rA=Object.prototype.hasOwnProperty,WG=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w3={},S3={};function ZG(e){return rA.call(S3,e)?!0:rA.call(w3,e)?!1:WG.test(e)?S3[e]=!0:(w3[e]=!0,!1)}function XG(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function KG(e,t,r,n){if(t===null||typeof t>"u"||XG(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function wc(e,t,r,n,i,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var Au={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Au[e]=new wc(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Au[t]=new wc(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Au[e]=new wc(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Au[e]=new wc(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Au[e]=new wc(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Au[e]=new wc(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Au[e]=new wc(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Au[e]=new wc(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Au[e]=new wc(e,5,!1,e.toLowerCase(),null,!1,!1)});var cI=/[\-:]([a-z])/g;function fI(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(cI,fI);Au[t]=new wc(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(cI,fI);Au[t]=new wc(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(cI,fI);Au[t]=new wc(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Au[e]=new wc(e,1,!1,e.toLowerCase(),null,!1,!1)});Au.xlinkHref=new wc("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Au[e]=new wc(e,1,!1,e.toLowerCase(),null,!0,!0)});function hI(e,t,r,n){var i=Au.hasOwnProperty(t)?Au[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(KG(t,r,i,n)&&(r=null),n||i===null?ZG(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var fm=o6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W1=Symbol.for("react.element"),A_=Symbol.for("react.portal"),k_=Symbol.for("react.fragment"),pI=Symbol.for("react.strict_mode"),nA=Symbol.for("react.profiler"),l6=Symbol.for("react.provider"),u6=Symbol.for("react.context"),dI=Symbol.for("react.forward_ref"),iA=Symbol.for("react.suspense"),aA=Symbol.for("react.suspense_list"),mI=Symbol.for("react.memo"),Xm=Symbol.for("react.lazy"),c6=Symbol.for("react.offscreen"),E3=Symbol.iterator;function pb(e){return e===null||typeof e!="object"?null:(e=E3&&e[E3]||e["@@iterator"],typeof e=="function"?e:null)}var Ns=Object.assign,$C;function Db(e){if($C===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);$C=t&&t[1]||""}return`
`+$C+e}var NC=!1;function BC(e,t){if(!e||NC)return"";NC=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(v){var n=v}Reflect.construct(e,[],t)}else{try{t.call()}catch(v){n=v}e.call(t.prototype)}else{try{throw Error()}catch(v){n=v}e()}}catch(v){if(v&&n&&typeof v.stack=="string"){for(var i=v.stack.split(`
`),l=n.stack.split(`
`),a=i.length-1,s=l.length-1;1<=a&&0<=s&&i[a]!==l[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==l[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==l[s]){var d=`
`+i[a].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=a&&0<=s);break}}}finally{NC=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Db(e):""}function YG(e){switch(e.tag){case 5:return Db(e.type);case 16:return Db("Lazy");case 13:return Db("Suspense");case 19:return Db("SuspenseList");case 0:case 2:case 15:return e=BC(e.type,!1),e;case 11:return e=BC(e.type.render,!1),e;case 1:return e=BC(e.type,!0),e;default:return""}}function oA(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case k_:return"Fragment";case A_:return"Portal";case nA:return"Profiler";case pI:return"StrictMode";case iA:return"Suspense";case aA:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case u6:return(e.displayName||"Context")+".Consumer";case l6:return(e._context.displayName||"Context")+".Provider";case dI:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case mI:return t=e.displayName||null,t!==null?t:oA(e.type)||"Memo";case Xm:t=e._payload,e=e._init;try{return oA(e(t))}catch{}}return null}function JG(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oA(t);case 8:return t===pI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function pg(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function f6(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function QG(e){var t=f6(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Z1(e){e._valueTracker||(e._valueTracker=QG(e))}function h6(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=f6(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function i2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function sA(e,t){var r=t.checked;return Ns({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function C3(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=pg(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function p6(e,t){t=t.checked,t!=null&&hI(e,"checked",t,!1)}function lA(e,t){p6(e,t);var r=pg(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?uA(e,t.type,r):t.hasOwnProperty("defaultValue")&&uA(e,t.type,pg(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function P3(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function uA(e,t,r){(t!=="number"||i2(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var zb=Array.isArray;function V_(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+pg(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function cA(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(dn(91));return Ns({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function T3(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(dn(92));if(zb(r)){if(1<r.length)throw Error(dn(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:pg(r)}}function d6(e,t){var r=pg(t.value),n=pg(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function A3(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function m6(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fA(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?m6(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var X1,g6=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(X1=X1||document.createElement("div"),X1.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=X1.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sx(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Hb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eH=["Webkit","ms","Moz","O"];Object.keys(Hb).forEach(function(e){eH.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hb[t]=Hb[e]})});function y6(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Hb.hasOwnProperty(e)&&Hb[e]?(""+t).trim():t+"px"}function v6(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=y6(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var tH=Ns({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hA(e,t){if(t){if(tH[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(dn(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(dn(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(dn(61))}if(t.style!=null&&typeof t.style!="object")throw Error(dn(62))}}function pA(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dA=null;function gI(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var mA=null,q_=null,G_=null;function k3(e){if(e=Vx(e)){if(typeof mA!="function")throw Error(dn(280));var t=e.stateNode;t&&(t=CS(t),mA(e.stateNode,e.type,t))}}function _6(e){q_?G_?G_.push(e):G_=[e]:q_=e}function b6(){if(q_){var e=q_,t=G_;if(G_=q_=null,k3(e),t)for(e=0;e<t.length;e++)k3(t[e])}}function x6(e,t){return e(t)}function w6(){}var FC=!1;function S6(e,t,r){if(FC)return e(t,r);FC=!0;try{return x6(e,t,r)}finally{FC=!1,(q_!==null||G_!==null)&&(w6(),b6())}}function lx(e,t){var r=e.stateNode;if(r===null)return null;var n=CS(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(dn(231,t,typeof r));return r}var gA=!1;if(am)try{var db={};Object.defineProperty(db,"passive",{get:function(){gA=!0}}),window.addEventListener("test",db,db),window.removeEventListener("test",db,db)}catch{gA=!1}function rH(e,t,r,n,i,l,a,s,d){var v=Array.prototype.slice.call(arguments,3);try{t.apply(r,v)}catch(S){this.onError(S)}}var Wb=!1,a2=null,o2=!1,yA=null,nH={onError:function(e){Wb=!0,a2=e}};function iH(e,t,r,n,i,l,a,s,d){Wb=!1,a2=null,rH.apply(nH,arguments)}function aH(e,t,r,n,i,l,a,s,d){if(iH.apply(this,arguments),Wb){if(Wb){var v=a2;Wb=!1,a2=null}else throw Error(dn(198));o2||(o2=!0,yA=v)}}function Gy(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function E6(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function I3(e){if(Gy(e)!==e)throw Error(dn(188))}function oH(e){var t=e.alternate;if(!t){if(t=Gy(e),t===null)throw Error(dn(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var l=i.alternate;if(l===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===r)return I3(i),e;if(l===n)return I3(i),t;l=l.sibling}throw Error(dn(188))}if(r.return!==n.return)r=i,n=l;else{for(var a=!1,s=i.child;s;){if(s===r){a=!0,r=i,n=l;break}if(s===n){a=!0,n=i,r=l;break}s=s.sibling}if(!a){for(s=l.child;s;){if(s===r){a=!0,r=l,n=i;break}if(s===n){a=!0,n=l,r=i;break}s=s.sibling}if(!a)throw Error(dn(189))}}if(r.alternate!==n)throw Error(dn(190))}if(r.tag!==3)throw Error(dn(188));return r.stateNode.current===r?e:t}function C6(e){return e=oH(e),e!==null?P6(e):null}function P6(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=P6(e);if(t!==null)return t;e=e.sibling}return null}var T6=Of.unstable_scheduleCallback,M3=Of.unstable_cancelCallback,sH=Of.unstable_shouldYield,lH=Of.unstable_requestPaint,al=Of.unstable_now,uH=Of.unstable_getCurrentPriorityLevel,yI=Of.unstable_ImmediatePriority,A6=Of.unstable_UserBlockingPriority,s2=Of.unstable_NormalPriority,cH=Of.unstable_LowPriority,k6=Of.unstable_IdlePriority,xS=null,Qp=null;function fH(e){if(Qp&&typeof Qp.onCommitFiberRoot=="function")try{Qp.onCommitFiberRoot(xS,e,void 0,(e.current.flags&128)===128)}catch{}}var gp=Math.clz32?Math.clz32:dH,hH=Math.log,pH=Math.LN2;function dH(e){return e>>>=0,e===0?32:31-(hH(e)/pH|0)|0}var K1=64,Y1=4194304;function Lb(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function l2(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,l=e.pingedLanes,a=r&268435455;if(a!==0){var s=a&~i;s!==0?n=Lb(s):(l&=a,l!==0&&(n=Lb(l)))}else a=r&~i,a!==0?n=Lb(a):l!==0&&(n=Lb(l));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,l=t&-t,i>=l||i===16&&(l&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-gp(t),i=1<<r,n|=e[r],t&=~i;return n}function mH(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gH(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-gp(l),s=1<<a,d=i[a];d===-1?(!(s&r)||s&n)&&(i[a]=mH(s,t)):d<=t&&(e.expiredLanes|=s),l&=~s}}function vA(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function I6(){var e=K1;return K1<<=1,!(K1&4194240)&&(K1=64),e}function UC(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ux(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-gp(t),e[t]=r}function yH(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-gp(r),l=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~l}}function vI(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-gp(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Ao=0;function M6(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var O6,_I,R6,D6,z6,_A=!1,J1=[],ng=null,ig=null,ag=null,ux=new Map,cx=new Map,Ym=[],vH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function O3(e,t){switch(e){case"focusin":case"focusout":ng=null;break;case"dragenter":case"dragleave":ig=null;break;case"mouseover":case"mouseout":ag=null;break;case"pointerover":case"pointerout":ux.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cx.delete(t.pointerId)}}function mb(e,t,r,n,i,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[i]},t!==null&&(t=Vx(t),t!==null&&_I(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function _H(e,t,r,n,i){switch(t){case"focusin":return ng=mb(ng,e,t,r,n,i),!0;case"dragenter":return ig=mb(ig,e,t,r,n,i),!0;case"mouseover":return ag=mb(ag,e,t,r,n,i),!0;case"pointerover":var l=i.pointerId;return ux.set(l,mb(ux.get(l)||null,e,t,r,n,i)),!0;case"gotpointercapture":return l=i.pointerId,cx.set(l,mb(cx.get(l)||null,e,t,r,n,i)),!0}return!1}function L6(e){var t=my(e.target);if(t!==null){var r=Gy(t);if(r!==null){if(t=r.tag,t===13){if(t=E6(r),t!==null){e.blockedOn=t,z6(e.priority,function(){R6(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Rw(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=bA(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);dA=n,r.target.dispatchEvent(n),dA=null}else return t=Vx(r),t!==null&&_I(t),e.blockedOn=r,!1;t.shift()}return!0}function R3(e,t,r){Rw(e)&&r.delete(t)}function bH(){_A=!1,ng!==null&&Rw(ng)&&(ng=null),ig!==null&&Rw(ig)&&(ig=null),ag!==null&&Rw(ag)&&(ag=null),ux.forEach(R3),cx.forEach(R3)}function gb(e,t){e.blockedOn===t&&(e.blockedOn=null,_A||(_A=!0,Of.unstable_scheduleCallback(Of.unstable_NormalPriority,bH)))}function fx(e){function t(i){return gb(i,e)}if(0<J1.length){gb(J1[0],e);for(var r=1;r<J1.length;r++){var n=J1[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ng!==null&&gb(ng,e),ig!==null&&gb(ig,e),ag!==null&&gb(ag,e),ux.forEach(t),cx.forEach(t),r=0;r<Ym.length;r++)n=Ym[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ym.length&&(r=Ym[0],r.blockedOn===null);)L6(r),r.blockedOn===null&&Ym.shift()}var H_=fm.ReactCurrentBatchConfig,u2=!0;function xH(e,t,r,n){var i=Ao,l=H_.transition;H_.transition=null;try{Ao=1,bI(e,t,r,n)}finally{Ao=i,H_.transition=l}}function wH(e,t,r,n){var i=Ao,l=H_.transition;H_.transition=null;try{Ao=4,bI(e,t,r,n)}finally{Ao=i,H_.transition=l}}function bI(e,t,r,n){if(u2){var i=bA(e,t,r,n);if(i===null)YC(e,t,n,c2,r),O3(e,n);else if(_H(i,e,t,r,n))n.stopPropagation();else if(O3(e,n),t&4&&-1<vH.indexOf(e)){for(;i!==null;){var l=Vx(i);if(l!==null&&O6(l),l=bA(e,t,r,n),l===null&&YC(e,t,n,c2,r),l===i)break;i=l}i!==null&&n.stopPropagation()}else YC(e,t,n,null,r)}}var c2=null;function bA(e,t,r,n){if(c2=null,e=gI(n),e=my(e),e!==null)if(t=Gy(e),t===null)e=null;else if(r=t.tag,r===13){if(e=E6(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return c2=e,null}function $6(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uH()){case yI:return 1;case A6:return 4;case s2:case cH:return 16;case k6:return 536870912;default:return 16}default:return 16}}var eg=null,xI=null,Dw=null;function N6(){if(Dw)return Dw;var e,t=xI,r=t.length,n,i="value"in eg?eg.value:eg.textContent,l=i.length;for(e=0;e<r&&t[e]===i[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===i[l-n];n++);return Dw=i.slice(e,1<n?1-n:void 0)}function zw(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Q1(){return!0}function D3(){return!1}function Nf(e){function t(r,n,i,l,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(l):l[s]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Q1:D3,this.isPropagationStopped=D3,this}return Ns(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Q1)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Q1)},persist:function(){},isPersistent:Q1}),t}var x0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wI=Nf(x0),jx=Ns({},x0,{view:0,detail:0}),SH=Nf(jx),jC,VC,yb,wS=Ns({},jx,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:SI,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yb&&(yb&&e.type==="mousemove"?(jC=e.screenX-yb.screenX,VC=e.screenY-yb.screenY):VC=jC=0,yb=e),jC)},movementY:function(e){return"movementY"in e?e.movementY:VC}}),z3=Nf(wS),EH=Ns({},wS,{dataTransfer:0}),CH=Nf(EH),PH=Ns({},jx,{relatedTarget:0}),qC=Nf(PH),TH=Ns({},x0,{animationName:0,elapsedTime:0,pseudoElement:0}),AH=Nf(TH),kH=Ns({},x0,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),IH=Nf(kH),MH=Ns({},x0,{data:0}),L3=Nf(MH),OH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zH(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=DH[e])?!!t[e]:!1}function SI(){return zH}var LH=Ns({},jx,{key:function(e){if(e.key){var t=OH[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zw(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?RH[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:SI,charCode:function(e){return e.type==="keypress"?zw(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zw(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$H=Nf(LH),NH=Ns({},wS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$3=Nf(NH),BH=Ns({},jx,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:SI}),FH=Nf(BH),UH=Ns({},x0,{propertyName:0,elapsedTime:0,pseudoElement:0}),jH=Nf(UH),VH=Ns({},wS,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qH=Nf(VH),GH=[9,13,27,32],EI=am&&"CompositionEvent"in window,Zb=null;am&&"documentMode"in document&&(Zb=document.documentMode);var HH=am&&"TextEvent"in window&&!Zb,B6=am&&(!EI||Zb&&8<Zb&&11>=Zb),N3=String.fromCharCode(32),B3=!1;function F6(e,t){switch(e){case"keyup":return GH.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U6(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var I_=!1;function WH(e,t){switch(e){case"compositionend":return U6(t);case"keypress":return t.which!==32?null:(B3=!0,N3);case"textInput":return e=t.data,e===N3&&B3?null:e;default:return null}}function ZH(e,t){if(I_)return e==="compositionend"||!EI&&F6(e,t)?(e=N6(),Dw=xI=eg=null,I_=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return B6&&t.locale!=="ko"?null:t.data;default:return null}}var XH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F3(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!XH[e.type]:t==="textarea"}function j6(e,t,r,n){_6(n),t=f2(t,"onChange"),0<t.length&&(r=new wI("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Xb=null,hx=null;function KH(e){Q6(e,0)}function SS(e){var t=R_(e);if(h6(t))return e}function YH(e,t){if(e==="change")return t}var V6=!1;if(am){var GC;if(am){var HC="oninput"in document;if(!HC){var U3=document.createElement("div");U3.setAttribute("oninput","return;"),HC=typeof U3.oninput=="function"}GC=HC}else GC=!1;V6=GC&&(!document.documentMode||9<document.documentMode)}function j3(){Xb&&(Xb.detachEvent("onpropertychange",q6),hx=Xb=null)}function q6(e){if(e.propertyName==="value"&&SS(hx)){var t=[];j6(t,hx,e,gI(e)),S6(KH,t)}}function JH(e,t,r){e==="focusin"?(j3(),Xb=t,hx=r,Xb.attachEvent("onpropertychange",q6)):e==="focusout"&&j3()}function QH(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return SS(hx)}function eW(e,t){if(e==="click")return SS(t)}function tW(e,t){if(e==="input"||e==="change")return SS(t)}function rW(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vp=typeof Object.is=="function"?Object.is:rW;function px(e,t){if(vp(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!rA.call(t,i)||!vp(e[i],t[i]))return!1}return!0}function V3(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function q3(e,t){var r=V3(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=V3(r)}}function G6(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?G6(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function H6(){for(var e=window,t=i2();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=i2(e.document)}return t}function CI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function nW(e){var t=H6(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&G6(r.ownerDocument.documentElement,r)){if(n!==null&&CI(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,l=Math.min(n.start,i);n=n.end===void 0?l:Math.min(n.end,i),!e.extend&&l>n&&(i=n,n=l,l=i),i=q3(r,l);var a=q3(r,n);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var iW=am&&"documentMode"in document&&11>=document.documentMode,M_=null,xA=null,Kb=null,wA=!1;function G3(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;wA||M_==null||M_!==i2(n)||(n=M_,"selectionStart"in n&&CI(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Kb&&px(Kb,n)||(Kb=n,n=f2(xA,"onSelect"),0<n.length&&(t=new wI("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=M_)))}function ew(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var O_={animationend:ew("Animation","AnimationEnd"),animationiteration:ew("Animation","AnimationIteration"),animationstart:ew("Animation","AnimationStart"),transitionend:ew("Transition","TransitionEnd")},WC={},W6={};am&&(W6=document.createElement("div").style,"AnimationEvent"in window||(delete O_.animationend.animation,delete O_.animationiteration.animation,delete O_.animationstart.animation),"TransitionEvent"in window||delete O_.transitionend.transition);function ES(e){if(WC[e])return WC[e];if(!O_[e])return e;var t=O_[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in W6)return WC[e]=t[r];return e}var Z6=ES("animationend"),X6=ES("animationiteration"),K6=ES("animationstart"),Y6=ES("transitionend"),J6=new Map,H3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xg(e,t){J6.set(e,t),qy(t,[e])}for(var ZC=0;ZC<H3.length;ZC++){var XC=H3[ZC],aW=XC.toLowerCase(),oW=XC[0].toUpperCase()+XC.slice(1);xg(aW,"on"+oW)}xg(Z6,"onAnimationEnd");xg(X6,"onAnimationIteration");xg(K6,"onAnimationStart");xg("dblclick","onDoubleClick");xg("focusin","onFocus");xg("focusout","onBlur");xg(Y6,"onTransitionEnd");i0("onMouseEnter",["mouseout","mouseover"]);i0("onMouseLeave",["mouseout","mouseover"]);i0("onPointerEnter",["pointerout","pointerover"]);i0("onPointerLeave",["pointerout","pointerover"]);qy("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qy("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qy("onBeforeInput",["compositionend","keypress","textInput","paste"]);qy("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qy("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qy("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $b="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sW=new Set("cancel close invalid load scroll toggle".split(" ").concat($b));function W3(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,aH(n,t,void 0,e),e.currentTarget=null}function Q6(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],d=s.instance,v=s.currentTarget;if(s=s.listener,d!==l&&i.isPropagationStopped())break e;W3(i,s,v),l=d}else for(a=0;a<n.length;a++){if(s=n[a],d=s.instance,v=s.currentTarget,s=s.listener,d!==l&&i.isPropagationStopped())break e;W3(i,s,v),l=d}}}if(o2)throw e=yA,o2=!1,yA=null,e}function os(e,t){var r=t[TA];r===void 0&&(r=t[TA]=new Set);var n=e+"__bubble";r.has(n)||(eB(t,e,2,!1),r.add(n))}function KC(e,t,r){var n=0;t&&(n|=4),eB(r,e,n,t)}var tw="_reactListening"+Math.random().toString(36).slice(2);function dx(e){if(!e[tw]){e[tw]=!0,s6.forEach(function(r){r!=="selectionchange"&&(sW.has(r)||KC(r,!1,e),KC(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[tw]||(t[tw]=!0,KC("selectionchange",!1,t))}}function eB(e,t,r,n){switch($6(t)){case 1:var i=xH;break;case 4:i=wH;break;default:i=bI}r=i.bind(null,t,r,e),i=void 0,!gA||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function YC(e,t,r,n,i){var l=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;a=a.return}for(;s!==null;){if(a=my(s),a===null)return;if(d=a.tag,d===5||d===6){n=l=a;continue e}s=s.parentNode}}n=n.return}S6(function(){var v=l,S=gI(r),A=[];e:{var P=J6.get(e);if(P!==void 0){var L=wI,F=e;switch(e){case"keypress":if(zw(r)===0)break e;case"keydown":case"keyup":L=$H;break;case"focusin":F="focus",L=qC;break;case"focusout":F="blur",L=qC;break;case"beforeblur":case"afterblur":L=qC;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=z3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=CH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=FH;break;case Z6:case X6:case K6:L=AH;break;case Y6:L=jH;break;case"scroll":L=SH;break;case"wheel":L=qH;break;case"copy":case"cut":case"paste":L=IH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=$3}var K=(t&4)!==0,re=!K&&e==="scroll",G=K?P!==null?P+"Capture":null:P;K=[];for(var H=v,B;H!==null;){B=H;var $=B.stateNode;if(B.tag===5&&$!==null&&(B=$,G!==null&&($=lx(H,G),$!=null&&K.push(mx(H,$,B)))),re)break;H=H.return}0<K.length&&(P=new L(P,F,null,r,S),A.push({event:P,listeners:K}))}}if(!(t&7)){e:{if(P=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",P&&r!==dA&&(F=r.relatedTarget||r.fromElement)&&(my(F)||F[om]))break e;if((L||P)&&(P=S.window===S?S:(P=S.ownerDocument)?P.defaultView||P.parentWindow:window,L?(F=r.relatedTarget||r.toElement,L=v,F=F?my(F):null,F!==null&&(re=Gy(F),F!==re||F.tag!==5&&F.tag!==6)&&(F=null)):(L=null,F=v),L!==F)){if(K=z3,$="onMouseLeave",G="onMouseEnter",H="mouse",(e==="pointerout"||e==="pointerover")&&(K=$3,$="onPointerLeave",G="onPointerEnter",H="pointer"),re=L==null?P:R_(L),B=F==null?P:R_(F),P=new K($,H+"leave",L,r,S),P.target=re,P.relatedTarget=B,$=null,my(S)===v&&(K=new K(G,H+"enter",F,r,S),K.target=B,K.relatedTarget=re,$=K),re=$,L&&F)t:{for(K=L,G=F,H=0,B=K;B;B=Yv(B))H++;for(B=0,$=G;$;$=Yv($))B++;for(;0<H-B;)K=Yv(K),H--;for(;0<B-H;)G=Yv(G),B--;for(;H--;){if(K===G||G!==null&&K===G.alternate)break t;K=Yv(K),G=Yv(G)}K=null}else K=null;L!==null&&Z3(A,P,L,K,!1),F!==null&&re!==null&&Z3(A,re,F,K,!0)}}e:{if(P=v?R_(v):window,L=P.nodeName&&P.nodeName.toLowerCase(),L==="select"||L==="input"&&P.type==="file")var N=YH;else if(F3(P))if(V6)N=tW;else{N=QH;var z=JH}else(L=P.nodeName)&&L.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(N=eW);if(N&&(N=N(e,v))){j6(A,N,r,S);break e}z&&z(e,P,v),e==="focusout"&&(z=P._wrapperState)&&z.controlled&&P.type==="number"&&uA(P,"number",P.value)}switch(z=v?R_(v):window,e){case"focusin":(F3(z)||z.contentEditable==="true")&&(M_=z,xA=v,Kb=null);break;case"focusout":Kb=xA=M_=null;break;case"mousedown":wA=!0;break;case"contextmenu":case"mouseup":case"dragend":wA=!1,G3(A,r,S);break;case"selectionchange":if(iW)break;case"keydown":case"keyup":G3(A,r,S)}var X;if(EI)e:{switch(e){case"compositionstart":var te="onCompositionStart";break e;case"compositionend":te="onCompositionEnd";break e;case"compositionupdate":te="onCompositionUpdate";break e}te=void 0}else I_?F6(e,r)&&(te="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(te="onCompositionStart");te&&(B6&&r.locale!=="ko"&&(I_||te!=="onCompositionStart"?te==="onCompositionEnd"&&I_&&(X=N6()):(eg=S,xI="value"in eg?eg.value:eg.textContent,I_=!0)),z=f2(v,te),0<z.length&&(te=new L3(te,e,null,r,S),A.push({event:te,listeners:z}),X?te.data=X:(X=U6(r),X!==null&&(te.data=X)))),(X=HH?WH(e,r):ZH(e,r))&&(v=f2(v,"onBeforeInput"),0<v.length&&(S=new L3("onBeforeInput","beforeinput",null,r,S),A.push({event:S,listeners:v}),S.data=X))}Q6(A,t)})}function mx(e,t,r){return{instance:e,listener:t,currentTarget:r}}function f2(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,l=i.stateNode;i.tag===5&&l!==null&&(i=l,l=lx(e,r),l!=null&&n.unshift(mx(e,l,i)),l=lx(e,t),l!=null&&n.push(mx(e,l,i))),e=e.return}return n}function Yv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Z3(e,t,r,n,i){for(var l=t._reactName,a=[];r!==null&&r!==n;){var s=r,d=s.alternate,v=s.stateNode;if(d!==null&&d===n)break;s.tag===5&&v!==null&&(s=v,i?(d=lx(r,l),d!=null&&a.unshift(mx(r,d,s))):i||(d=lx(r,l),d!=null&&a.push(mx(r,d,s)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var lW=/\r\n?/g,uW=/\u0000|\uFFFD/g;function X3(e){return(typeof e=="string"?e:""+e).replace(lW,`
`).replace(uW,"")}function rw(e,t,r){if(t=X3(t),X3(e)!==t&&r)throw Error(dn(425))}function h2(){}var SA=null,EA=null;function CA(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var PA=typeof setTimeout=="function"?setTimeout:void 0,cW=typeof clearTimeout=="function"?clearTimeout:void 0,K3=typeof Promise=="function"?Promise:void 0,fW=typeof queueMicrotask=="function"?queueMicrotask:typeof K3<"u"?function(e){return K3.resolve(null).then(e).catch(hW)}:PA;function hW(e){setTimeout(function(){throw e})}function JC(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),fx(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);fx(t)}function og(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Y3(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var w0=Math.random().toString(36).slice(2),Kp="__reactFiber$"+w0,gx="__reactProps$"+w0,om="__reactContainer$"+w0,TA="__reactEvents$"+w0,pW="__reactListeners$"+w0,dW="__reactHandles$"+w0;function my(e){var t=e[Kp];if(t)return t;for(var r=e.parentNode;r;){if(t=r[om]||r[Kp]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Y3(e);e!==null;){if(r=e[Kp])return r;e=Y3(e)}return t}e=r,r=e.parentNode}return null}function Vx(e){return e=e[Kp]||e[om],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function R_(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(dn(33))}function CS(e){return e[gx]||null}var AA=[],D_=-1;function wg(e){return{current:e}}function hs(e){0>D_||(e.current=AA[D_],AA[D_]=null,D_--)}function ts(e,t){D_++,AA[D_]=e.current,e.current=t}var dg={},tc=wg(dg),Hc=wg(!1),Ay=dg;function a0(e,t){var r=e.type.contextTypes;if(!r)return dg;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},l;for(l in r)i[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Wc(e){return e=e.childContextTypes,e!=null}function p2(){hs(Hc),hs(tc)}function J3(e,t,r){if(tc.current!==dg)throw Error(dn(168));ts(tc,t),ts(Hc,r)}function tB(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(dn(108,JG(e)||"Unknown",i));return Ns({},r,n)}function d2(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dg,Ay=tc.current,ts(tc,e),ts(Hc,Hc.current),!0}function Q3(e,t,r){var n=e.stateNode;if(!n)throw Error(dn(169));r?(e=tB(e,t,Ay),n.__reactInternalMemoizedMergedChildContext=e,hs(Hc),hs(tc),ts(tc,e)):hs(Hc),ts(Hc,r)}var Yd=null,PS=!1,QC=!1;function rB(e){Yd===null?Yd=[e]:Yd.push(e)}function mW(e){PS=!0,rB(e)}function Sg(){if(!QC&&Yd!==null){QC=!0;var e=0,t=Ao;try{var r=Yd;for(Ao=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Yd=null,PS=!1}catch(i){throw Yd!==null&&(Yd=Yd.slice(e+1)),T6(yI,Sg),i}finally{Ao=t,QC=!1}}return null}var z_=[],L_=0,m2=null,g2=0,yh=[],vh=0,ky=null,Jd=1,Qd="";function ly(e,t){z_[L_++]=g2,z_[L_++]=m2,m2=e,g2=t}function nB(e,t,r){yh[vh++]=Jd,yh[vh++]=Qd,yh[vh++]=ky,ky=e;var n=Jd;e=Qd;var i=32-gp(n)-1;n&=~(1<<i),r+=1;var l=32-gp(t)+i;if(30<l){var a=i-i%5;l=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Jd=1<<32-gp(t)+i|r<<i|n,Qd=l+e}else Jd=1<<l|r<<i|n,Qd=e}function PI(e){e.return!==null&&(ly(e,1),nB(e,1,0))}function TI(e){for(;e===m2;)m2=z_[--L_],z_[L_]=null,g2=z_[--L_],z_[L_]=null;for(;e===ky;)ky=yh[--vh],yh[vh]=null,Qd=yh[--vh],yh[vh]=null,Jd=yh[--vh],yh[vh]=null}var Mf=null,Af=null,Cs=!1,fp=null;function iB(e,t){var r=xh(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function e5(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mf=e,Af=og(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mf=e,Af=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ky!==null?{id:Jd,overflow:Qd}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=xh(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Mf=e,Af=null,!0):!1;default:return!1}}function kA(e){return(e.mode&1)!==0&&(e.flags&128)===0}function IA(e){if(Cs){var t=Af;if(t){var r=t;if(!e5(e,t)){if(kA(e))throw Error(dn(418));t=og(r.nextSibling);var n=Mf;t&&e5(e,t)?iB(n,r):(e.flags=e.flags&-4097|2,Cs=!1,Mf=e)}}else{if(kA(e))throw Error(dn(418));e.flags=e.flags&-4097|2,Cs=!1,Mf=e}}}function t5(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mf=e}function nw(e){if(e!==Mf)return!1;if(!Cs)return t5(e),Cs=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!CA(e.type,e.memoizedProps)),t&&(t=Af)){if(kA(e))throw aB(),Error(dn(418));for(;t;)iB(e,t),t=og(t.nextSibling)}if(t5(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(dn(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Af=og(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Af=null}}else Af=Mf?og(e.stateNode.nextSibling):null;return!0}function aB(){for(var e=Af;e;)e=og(e.nextSibling)}function o0(){Af=Mf=null,Cs=!1}function AI(e){fp===null?fp=[e]:fp.push(e)}var gW=fm.ReactCurrentBatchConfig;function sp(e,t){if(e&&e.defaultProps){t=Ns({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var y2=wg(null),v2=null,$_=null,kI=null;function II(){kI=$_=v2=null}function MI(e){var t=y2.current;hs(y2),e._currentValue=t}function MA(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function W_(e,t){v2=e,kI=$_=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Vc=!0),e.firstContext=null)}function Eh(e){var t=e._currentValue;if(kI!==e)if(e={context:e,memoizedValue:t,next:null},$_===null){if(v2===null)throw Error(dn(308));$_=e,v2.dependencies={lanes:0,firstContext:e}}else $_=$_.next=e;return t}var gy=null;function OI(e){gy===null?gy=[e]:gy.push(e)}function oB(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,OI(t)):(r.next=i.next,i.next=r),t.interleaved=r,sm(e,n)}function sm(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Km=!1;function RI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sB(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function tm(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sg(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ao&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,sm(e,r)}return i=n.interleaved,i===null?(t.next=t,OI(n)):(t.next=i.next,i.next=t),n.interleaved=t,sm(e,r)}function Lw(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,vI(e,r)}}function r5(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?i=l=a:l=l.next=a,r=r.next}while(r!==null);l===null?i=l=t:l=l.next=t}else i=l=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function _2(e,t,r,n){var i=e.updateQueue;Km=!1;var l=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var d=s,v=d.next;d.next=null,a===null?l=v:a.next=v,a=d;var S=e.alternate;S!==null&&(S=S.updateQueue,s=S.lastBaseUpdate,s!==a&&(s===null?S.firstBaseUpdate=v:s.next=v,S.lastBaseUpdate=d))}if(l!==null){var A=i.baseState;a=0,S=v=d=null,s=l;do{var P=s.lane,L=s.eventTime;if((n&P)===P){S!==null&&(S=S.next={eventTime:L,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var F=e,K=s;switch(P=t,L=r,K.tag){case 1:if(F=K.payload,typeof F=="function"){A=F.call(L,A,P);break e}A=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=K.payload,P=typeof F=="function"?F.call(L,A,P):F,P==null)break e;A=Ns({},A,P);break e;case 2:Km=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,P=i.effects,P===null?i.effects=[s]:P.push(s))}else L={eventTime:L,lane:P,tag:s.tag,payload:s.payload,callback:s.callback,next:null},S===null?(v=S=L,d=A):S=S.next=L,a|=P;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;P=s,s=P.next,P.next=null,i.lastBaseUpdate=P,i.shared.pending=null}}while(1);if(S===null&&(d=A),i.baseState=d,i.firstBaseUpdate=v,i.lastBaseUpdate=S,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else l===null&&(i.shared.lanes=0);My|=a,e.lanes=a,e.memoizedState=A}}function n5(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(dn(191,i));i.call(n)}}}var lB=new o6.Component().refs;function OA(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ns({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var TS={isMounted:function(e){return(e=e._reactInternals)?Gy(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=vc(),i=ug(e),l=tm(n,i);l.payload=t,r!=null&&(l.callback=r),t=sg(e,l,i),t!==null&&(yp(t,e,i,n),Lw(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=vc(),i=ug(e),l=tm(n,i);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=sg(e,l,i),t!==null&&(yp(t,e,i,n),Lw(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=vc(),n=ug(e),i=tm(r,n);i.tag=2,t!=null&&(i.callback=t),t=sg(e,i,n),t!==null&&(yp(t,e,n,r),Lw(t,e,n))}};function i5(e,t,r,n,i,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,a):t.prototype&&t.prototype.isPureReactComponent?!px(r,n)||!px(i,l):!0}function uB(e,t,r){var n=!1,i=dg,l=t.contextType;return typeof l=="object"&&l!==null?l=Eh(l):(i=Wc(t)?Ay:tc.current,n=t.contextTypes,l=(n=n!=null)?a0(e,i):dg),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=TS,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=l),t}function a5(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&TS.enqueueReplaceState(t,t.state,null)}function RA(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=lB,RI(e);var l=t.contextType;typeof l=="object"&&l!==null?i.context=Eh(l):(l=Wc(t)?Ay:tc.current,i.context=a0(e,l)),i.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(OA(e,t,l,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&TS.enqueueReplaceState(i,i.state,null),_2(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function vb(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(dn(309));var n=r.stateNode}if(!n)throw Error(dn(147,e));var i=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var s=i.refs;s===lB&&(s=i.refs={}),a===null?delete s[l]:s[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(dn(284));if(!r._owner)throw Error(dn(290,e))}return e}function iw(e,t){throw e=Object.prototype.toString.call(t),Error(dn(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function o5(e){var t=e._init;return t(e._payload)}function cB(e){function t(G,H){if(e){var B=G.deletions;B===null?(G.deletions=[H],G.flags|=16):B.push(H)}}function r(G,H){if(!e)return null;for(;H!==null;)t(G,H),H=H.sibling;return null}function n(G,H){for(G=new Map;H!==null;)H.key!==null?G.set(H.key,H):G.set(H.index,H),H=H.sibling;return G}function i(G,H){return G=cg(G,H),G.index=0,G.sibling=null,G}function l(G,H,B){return G.index=B,e?(B=G.alternate,B!==null?(B=B.index,B<H?(G.flags|=2,H):B):(G.flags|=2,H)):(G.flags|=1048576,H)}function a(G){return e&&G.alternate===null&&(G.flags|=2),G}function s(G,H,B,$){return H===null||H.tag!==6?(H=oP(B,G.mode,$),H.return=G,H):(H=i(H,B),H.return=G,H)}function d(G,H,B,$){var N=B.type;return N===k_?S(G,H,B.props.children,$,B.key):H!==null&&(H.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Xm&&o5(N)===H.type)?($=i(H,B.props),$.ref=vb(G,H,B),$.return=G,$):($=jw(B.type,B.key,B.props,null,G.mode,$),$.ref=vb(G,H,B),$.return=G,$)}function v(G,H,B,$){return H===null||H.tag!==4||H.stateNode.containerInfo!==B.containerInfo||H.stateNode.implementation!==B.implementation?(H=sP(B,G.mode,$),H.return=G,H):(H=i(H,B.children||[]),H.return=G,H)}function S(G,H,B,$,N){return H===null||H.tag!==7?(H=wy(B,G.mode,$,N),H.return=G,H):(H=i(H,B),H.return=G,H)}function A(G,H,B){if(typeof H=="string"&&H!==""||typeof H=="number")return H=oP(""+H,G.mode,B),H.return=G,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case W1:return B=jw(H.type,H.key,H.props,null,G.mode,B),B.ref=vb(G,null,H),B.return=G,B;case A_:return H=sP(H,G.mode,B),H.return=G,H;case Xm:var $=H._init;return A(G,$(H._payload),B)}if(zb(H)||pb(H))return H=wy(H,G.mode,B,null),H.return=G,H;iw(G,H)}return null}function P(G,H,B,$){var N=H!==null?H.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return N!==null?null:s(G,H,""+B,$);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case W1:return B.key===N?d(G,H,B,$):null;case A_:return B.key===N?v(G,H,B,$):null;case Xm:return N=B._init,P(G,H,N(B._payload),$)}if(zb(B)||pb(B))return N!==null?null:S(G,H,B,$,null);iw(G,B)}return null}function L(G,H,B,$,N){if(typeof $=="string"&&$!==""||typeof $=="number")return G=G.get(B)||null,s(H,G,""+$,N);if(typeof $=="object"&&$!==null){switch($.$$typeof){case W1:return G=G.get($.key===null?B:$.key)||null,d(H,G,$,N);case A_:return G=G.get($.key===null?B:$.key)||null,v(H,G,$,N);case Xm:var z=$._init;return L(G,H,B,z($._payload),N)}if(zb($)||pb($))return G=G.get(B)||null,S(H,G,$,N,null);iw(H,$)}return null}function F(G,H,B,$){for(var N=null,z=null,X=H,te=H=0,pe=null;X!==null&&te<B.length;te++){X.index>te?(pe=X,X=null):pe=X.sibling;var ke=P(G,X,B[te],$);if(ke===null){X===null&&(X=pe);break}e&&X&&ke.alternate===null&&t(G,X),H=l(ke,H,te),z===null?N=ke:z.sibling=ke,z=ke,X=pe}if(te===B.length)return r(G,X),Cs&&ly(G,te),N;if(X===null){for(;te<B.length;te++)X=A(G,B[te],$),X!==null&&(H=l(X,H,te),z===null?N=X:z.sibling=X,z=X);return Cs&&ly(G,te),N}for(X=n(G,X);te<B.length;te++)pe=L(X,G,te,B[te],$),pe!==null&&(e&&pe.alternate!==null&&X.delete(pe.key===null?te:pe.key),H=l(pe,H,te),z===null?N=pe:z.sibling=pe,z=pe);return e&&X.forEach(function(Pe){return t(G,Pe)}),Cs&&ly(G,te),N}function K(G,H,B,$){var N=pb(B);if(typeof N!="function")throw Error(dn(150));if(B=N.call(B),B==null)throw Error(dn(151));for(var z=N=null,X=H,te=H=0,pe=null,ke=B.next();X!==null&&!ke.done;te++,ke=B.next()){X.index>te?(pe=X,X=null):pe=X.sibling;var Pe=P(G,X,ke.value,$);if(Pe===null){X===null&&(X=pe);break}e&&X&&Pe.alternate===null&&t(G,X),H=l(Pe,H,te),z===null?N=Pe:z.sibling=Pe,z=Pe,X=pe}if(ke.done)return r(G,X),Cs&&ly(G,te),N;if(X===null){for(;!ke.done;te++,ke=B.next())ke=A(G,ke.value,$),ke!==null&&(H=l(ke,H,te),z===null?N=ke:z.sibling=ke,z=ke);return Cs&&ly(G,te),N}for(X=n(G,X);!ke.done;te++,ke=B.next())ke=L(X,G,te,ke.value,$),ke!==null&&(e&&ke.alternate!==null&&X.delete(ke.key===null?te:ke.key),H=l(ke,H,te),z===null?N=ke:z.sibling=ke,z=ke);return e&&X.forEach(function(ge){return t(G,ge)}),Cs&&ly(G,te),N}function re(G,H,B,$){if(typeof B=="object"&&B!==null&&B.type===k_&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case W1:e:{for(var N=B.key,z=H;z!==null;){if(z.key===N){if(N=B.type,N===k_){if(z.tag===7){r(G,z.sibling),H=i(z,B.props.children),H.return=G,G=H;break e}}else if(z.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Xm&&o5(N)===z.type){r(G,z.sibling),H=i(z,B.props),H.ref=vb(G,z,B),H.return=G,G=H;break e}r(G,z);break}else t(G,z);z=z.sibling}B.type===k_?(H=wy(B.props.children,G.mode,$,B.key),H.return=G,G=H):($=jw(B.type,B.key,B.props,null,G.mode,$),$.ref=vb(G,H,B),$.return=G,G=$)}return a(G);case A_:e:{for(z=B.key;H!==null;){if(H.key===z)if(H.tag===4&&H.stateNode.containerInfo===B.containerInfo&&H.stateNode.implementation===B.implementation){r(G,H.sibling),H=i(H,B.children||[]),H.return=G,G=H;break e}else{r(G,H);break}else t(G,H);H=H.sibling}H=sP(B,G.mode,$),H.return=G,G=H}return a(G);case Xm:return z=B._init,re(G,H,z(B._payload),$)}if(zb(B))return F(G,H,B,$);if(pb(B))return K(G,H,B,$);iw(G,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,H!==null&&H.tag===6?(r(G,H.sibling),H=i(H,B),H.return=G,G=H):(r(G,H),H=oP(B,G.mode,$),H.return=G,G=H),a(G)):r(G,H)}return re}var s0=cB(!0),fB=cB(!1),qx={},ed=wg(qx),yx=wg(qx),vx=wg(qx);function yy(e){if(e===qx)throw Error(dn(174));return e}function DI(e,t){switch(ts(vx,t),ts(yx,e),ts(ed,qx),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fA(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fA(t,e)}hs(ed),ts(ed,t)}function l0(){hs(ed),hs(yx),hs(vx)}function hB(e){yy(vx.current);var t=yy(ed.current),r=fA(t,e.type);t!==r&&(ts(yx,e),ts(ed,r))}function zI(e){yx.current===e&&(hs(ed),hs(yx))}var Ls=wg(0);function b2(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var eP=[];function LI(){for(var e=0;e<eP.length;e++)eP[e]._workInProgressVersionPrimary=null;eP.length=0}var $w=fm.ReactCurrentDispatcher,tP=fm.ReactCurrentBatchConfig,Iy=0,$s=null,jl=null,su=null,x2=!1,Yb=!1,_x=0,yW=0;function Zu(){throw Error(dn(321))}function $I(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!vp(e[r],t[r]))return!1;return!0}function NI(e,t,r,n,i,l){if(Iy=l,$s=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$w.current=e===null||e.memoizedState===null?xW:wW,e=r(n,i),Yb){l=0;do{if(Yb=!1,_x=0,25<=l)throw Error(dn(301));l+=1,su=jl=null,t.updateQueue=null,$w.current=SW,e=r(n,i)}while(Yb)}if($w.current=w2,t=jl!==null&&jl.next!==null,Iy=0,su=jl=$s=null,x2=!1,t)throw Error(dn(300));return e}function BI(){var e=_x!==0;return _x=0,e}function Wp(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return su===null?$s.memoizedState=su=e:su=su.next=e,su}function Ch(){if(jl===null){var e=$s.alternate;e=e!==null?e.memoizedState:null}else e=jl.next;var t=su===null?$s.memoizedState:su.next;if(t!==null)su=t,jl=e;else{if(e===null)throw Error(dn(310));jl=e,e={memoizedState:jl.memoizedState,baseState:jl.baseState,baseQueue:jl.baseQueue,queue:jl.queue,next:null},su===null?$s.memoizedState=su=e:su=su.next=e}return su}function bx(e,t){return typeof t=="function"?t(e):t}function rP(e){var t=Ch(),r=t.queue;if(r===null)throw Error(dn(311));r.lastRenderedReducer=e;var n=jl,i=n.baseQueue,l=r.pending;if(l!==null){if(i!==null){var a=i.next;i.next=l.next,l.next=a}n.baseQueue=i=l,r.pending=null}if(i!==null){l=i.next,n=n.baseState;var s=a=null,d=null,v=l;do{var S=v.lane;if((Iy&S)===S)d!==null&&(d=d.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),n=v.hasEagerState?v.eagerState:e(n,v.action);else{var A={lane:S,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};d===null?(s=d=A,a=n):d=d.next=A,$s.lanes|=S,My|=S}v=v.next}while(v!==null&&v!==l);d===null?a=n:d.next=s,vp(n,t.memoizedState)||(Vc=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=d,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do l=i.lane,$s.lanes|=l,My|=l,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function nP(e){var t=Ch(),r=t.queue;if(r===null)throw Error(dn(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,l=t.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do l=e(l,a.action),a=a.next;while(a!==i);vp(l,t.memoizedState)||(Vc=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,n]}function pB(){}function dB(e,t){var r=$s,n=Ch(),i=t(),l=!vp(n.memoizedState,i);if(l&&(n.memoizedState=i,Vc=!0),n=n.queue,FI(yB.bind(null,r,n,e),[e]),n.getSnapshot!==t||l||su!==null&&su.memoizedState.tag&1){if(r.flags|=2048,xx(9,gB.bind(null,r,n,i,t),void 0,null),lu===null)throw Error(dn(349));Iy&30||mB(r,t,i)}return i}function mB(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=$s.updateQueue,t===null?(t={lastEffect:null,stores:null},$s.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function gB(e,t,r,n){t.value=r,t.getSnapshot=n,vB(t)&&_B(e)}function yB(e,t,r){return r(function(){vB(t)&&_B(e)})}function vB(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!vp(e,r)}catch{return!0}}function _B(e){var t=sm(e,1);t!==null&&yp(t,e,1,-1)}function s5(e){var t=Wp();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bx,lastRenderedState:e},t.queue=e,e=e.dispatch=bW.bind(null,$s,e),[t.memoizedState,e]}function xx(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=$s.updateQueue,t===null?(t={lastEffect:null,stores:null},$s.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function bB(){return Ch().memoizedState}function Nw(e,t,r,n){var i=Wp();$s.flags|=e,i.memoizedState=xx(1|t,r,void 0,n===void 0?null:n)}function AS(e,t,r,n){var i=Ch();n=n===void 0?null:n;var l=void 0;if(jl!==null){var a=jl.memoizedState;if(l=a.destroy,n!==null&&$I(n,a.deps)){i.memoizedState=xx(t,r,l,n);return}}$s.flags|=e,i.memoizedState=xx(1|t,r,l,n)}function l5(e,t){return Nw(8390656,8,e,t)}function FI(e,t){return AS(2048,8,e,t)}function xB(e,t){return AS(4,2,e,t)}function wB(e,t){return AS(4,4,e,t)}function SB(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function EB(e,t,r){return r=r!=null?r.concat([e]):null,AS(4,4,SB.bind(null,t,e),r)}function UI(){}function CB(e,t){var r=Ch();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&$I(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function PB(e,t){var r=Ch();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&$I(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function TB(e,t,r){return Iy&21?(vp(r,t)||(r=I6(),$s.lanes|=r,My|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Vc=!0),e.memoizedState=r)}function vW(e,t){var r=Ao;Ao=r!==0&&4>r?r:4,e(!0);var n=tP.transition;tP.transition={};try{e(!1),t()}finally{Ao=r,tP.transition=n}}function AB(){return Ch().memoizedState}function _W(e,t,r){var n=ug(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},kB(e))IB(t,r);else if(r=oB(e,t,r,n),r!==null){var i=vc();yp(r,e,n,i),MB(r,t,n)}}function bW(e,t,r){var n=ug(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(kB(e))IB(t,i);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,s=l(a,r);if(i.hasEagerState=!0,i.eagerState=s,vp(s,a)){var d=t.interleaved;d===null?(i.next=i,OI(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}r=oB(e,t,i,n),r!==null&&(i=vc(),yp(r,e,n,i),MB(r,t,n))}}function kB(e){var t=e.alternate;return e===$s||t!==null&&t===$s}function IB(e,t){Yb=x2=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function MB(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,vI(e,r)}}var w2={readContext:Eh,useCallback:Zu,useContext:Zu,useEffect:Zu,useImperativeHandle:Zu,useInsertionEffect:Zu,useLayoutEffect:Zu,useMemo:Zu,useReducer:Zu,useRef:Zu,useState:Zu,useDebugValue:Zu,useDeferredValue:Zu,useTransition:Zu,useMutableSource:Zu,useSyncExternalStore:Zu,useId:Zu,unstable_isNewReconciler:!1},xW={readContext:Eh,useCallback:function(e,t){return Wp().memoizedState=[e,t===void 0?null:t],e},useContext:Eh,useEffect:l5,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Nw(4194308,4,SB.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Nw(4194308,4,e,t)},useInsertionEffect:function(e,t){return Nw(4,2,e,t)},useMemo:function(e,t){var r=Wp();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Wp();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=_W.bind(null,$s,e),[n.memoizedState,e]},useRef:function(e){var t=Wp();return e={current:e},t.memoizedState=e},useState:s5,useDebugValue:UI,useDeferredValue:function(e){return Wp().memoizedState=e},useTransition:function(){var e=s5(!1),t=e[0];return e=vW.bind(null,e[1]),Wp().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=$s,i=Wp();if(Cs){if(r===void 0)throw Error(dn(407));r=r()}else{if(r=t(),lu===null)throw Error(dn(349));Iy&30||mB(n,t,r)}i.memoizedState=r;var l={value:r,getSnapshot:t};return i.queue=l,l5(yB.bind(null,n,l,e),[e]),n.flags|=2048,xx(9,gB.bind(null,n,l,r,t),void 0,null),r},useId:function(){var e=Wp(),t=lu.identifierPrefix;if(Cs){var r=Qd,n=Jd;r=(n&~(1<<32-gp(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=_x++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=yW++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},wW={readContext:Eh,useCallback:CB,useContext:Eh,useEffect:FI,useImperativeHandle:EB,useInsertionEffect:xB,useLayoutEffect:wB,useMemo:PB,useReducer:rP,useRef:bB,useState:function(){return rP(bx)},useDebugValue:UI,useDeferredValue:function(e){var t=Ch();return TB(t,jl.memoizedState,e)},useTransition:function(){var e=rP(bx)[0],t=Ch().memoizedState;return[e,t]},useMutableSource:pB,useSyncExternalStore:dB,useId:AB,unstable_isNewReconciler:!1},SW={readContext:Eh,useCallback:CB,useContext:Eh,useEffect:FI,useImperativeHandle:EB,useInsertionEffect:xB,useLayoutEffect:wB,useMemo:PB,useReducer:nP,useRef:bB,useState:function(){return nP(bx)},useDebugValue:UI,useDeferredValue:function(e){var t=Ch();return jl===null?t.memoizedState=e:TB(t,jl.memoizedState,e)},useTransition:function(){var e=nP(bx)[0],t=Ch().memoizedState;return[e,t]},useMutableSource:pB,useSyncExternalStore:dB,useId:AB,unstable_isNewReconciler:!1};function u0(e,t){try{var r="",n=t;do r+=YG(n),n=n.return;while(n);var i=r}catch(l){i=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:i,digest:null}}function iP(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function DA(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var EW=typeof WeakMap=="function"?WeakMap:Map;function OB(e,t,r){r=tm(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){E2||(E2=!0,qA=n),DA(e,t)},r}function RB(e,t,r){r=tm(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){DA(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){DA(e,t),typeof n!="function"&&(lg===null?lg=new Set([this]):lg.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function u5(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new EW;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=NW.bind(null,e,t,r),t.then(e,e))}function c5(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function f5(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=tm(-1,1),t.tag=2,sg(r,t,1))),r.lanes|=1),e)}var CW=fm.ReactCurrentOwner,Vc=!1;function gc(e,t,r,n){t.child=e===null?fB(t,null,r,n):s0(t,e.child,r,n)}function h5(e,t,r,n,i){r=r.render;var l=t.ref;return W_(t,i),n=NI(e,t,r,n,l,i),r=BI(),e!==null&&!Vc?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,lm(e,t,i)):(Cs&&r&&PI(t),t.flags|=1,gc(e,t,n,i),t.child)}function p5(e,t,r,n,i){if(e===null){var l=r.type;return typeof l=="function"&&!XI(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,DB(e,t,l,n,i)):(e=jw(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&i)){var a=l.memoizedProps;if(r=r.compare,r=r!==null?r:px,r(a,n)&&e.ref===t.ref)return lm(e,t,i)}return t.flags|=1,e=cg(l,n),e.ref=t.ref,e.return=t,t.child=e}function DB(e,t,r,n,i){if(e!==null){var l=e.memoizedProps;if(px(l,n)&&e.ref===t.ref)if(Vc=!1,t.pendingProps=n=l,(e.lanes&i)!==0)e.flags&131072&&(Vc=!0);else return t.lanes=e.lanes,lm(e,t,i)}return zA(e,t,r,n,i)}function zB(e,t,r){var n=t.pendingProps,i=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ts(B_,Pf),Pf|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ts(B_,Pf),Pf|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,ts(B_,Pf),Pf|=n}else l!==null?(n=l.baseLanes|r,t.memoizedState=null):n=r,ts(B_,Pf),Pf|=n;return gc(e,t,i,r),t.child}function LB(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function zA(e,t,r,n,i){var l=Wc(r)?Ay:tc.current;return l=a0(t,l),W_(t,i),r=NI(e,t,r,n,l,i),n=BI(),e!==null&&!Vc?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,lm(e,t,i)):(Cs&&n&&PI(t),t.flags|=1,gc(e,t,r,i),t.child)}function d5(e,t,r,n,i){if(Wc(r)){var l=!0;d2(t)}else l=!1;if(W_(t,i),t.stateNode===null)Bw(e,t),uB(t,r,n),RA(t,r,n,i),n=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var d=a.context,v=r.contextType;typeof v=="object"&&v!==null?v=Eh(v):(v=Wc(r)?Ay:tc.current,v=a0(t,v));var S=r.getDerivedStateFromProps,A=typeof S=="function"||typeof a.getSnapshotBeforeUpdate=="function";A||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==n||d!==v)&&a5(t,a,n,v),Km=!1;var P=t.memoizedState;a.state=P,_2(t,n,a,i),d=t.memoizedState,s!==n||P!==d||Hc.current||Km?(typeof S=="function"&&(OA(t,r,S,n),d=t.memoizedState),(s=Km||i5(t,r,s,n,P,d,v))?(A||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),a.props=n,a.state=d,a.context=v,n=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,sB(e,t),s=t.memoizedProps,v=t.type===t.elementType?s:sp(t.type,s),a.props=v,A=t.pendingProps,P=a.context,d=r.contextType,typeof d=="object"&&d!==null?d=Eh(d):(d=Wc(r)?Ay:tc.current,d=a0(t,d));var L=r.getDerivedStateFromProps;(S=typeof L=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==A||P!==d)&&a5(t,a,n,d),Km=!1,P=t.memoizedState,a.state=P,_2(t,n,a,i);var F=t.memoizedState;s!==A||P!==F||Hc.current||Km?(typeof L=="function"&&(OA(t,r,L,n),F=t.memoizedState),(v=Km||i5(t,r,v,n,P,F,d)||!1)?(S||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,F,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,F,d)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=F),a.props=n,a.state=F,a.context=d,n=v):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),n=!1)}return LA(e,t,r,n,l,i)}function LA(e,t,r,n,i,l){LB(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return i&&Q3(t,r,!1),lm(e,t,l);n=t.stateNode,CW.current=t;var s=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=s0(t,e.child,null,l),t.child=s0(t,null,s,l)):gc(e,t,s,l),t.memoizedState=n.state,i&&Q3(t,r,!0),t.child}function $B(e){var t=e.stateNode;t.pendingContext?J3(e,t.pendingContext,t.pendingContext!==t.context):t.context&&J3(e,t.context,!1),DI(e,t.containerInfo)}function m5(e,t,r,n,i){return o0(),AI(i),t.flags|=256,gc(e,t,r,n),t.child}var $A={dehydrated:null,treeContext:null,retryLane:0};function NA(e){return{baseLanes:e,cachePool:null,transitions:null}}function NB(e,t,r){var n=t.pendingProps,i=Ls.current,l=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ts(Ls,i&1),e===null)return IA(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,l?(n=t.mode,l=t.child,a={mode:"hidden",children:a},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=MS(a,n,0,null),e=wy(e,n,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=NA(r),t.memoizedState=$A,e):jI(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return PW(e,t,a,n,s,i,r);if(l){l=n.fallback,a=t.mode,i=e.child,s=i.sibling;var d={mode:"hidden",children:n.children};return!(a&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=d,t.deletions=null):(n=cg(i,d),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?l=cg(s,l):(l=wy(l,a,r,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,a=e.child.memoizedState,a=a===null?NA(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~r,t.memoizedState=$A,n}return l=e.child,e=l.sibling,n=cg(l,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function jI(e,t){return t=MS({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function aw(e,t,r,n){return n!==null&&AI(n),s0(t,e.child,null,r),e=jI(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function PW(e,t,r,n,i,l,a){if(r)return t.flags&256?(t.flags&=-257,n=iP(Error(dn(422))),aw(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,i=t.mode,n=MS({mode:"visible",children:n.children},i,0,null),l=wy(l,i,a,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,t.mode&1&&s0(t,e.child,null,a),t.child.memoizedState=NA(a),t.memoizedState=$A,l);if(!(t.mode&1))return aw(e,t,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,l=Error(dn(419)),n=iP(l,n,void 0),aw(e,t,a,n)}if(s=(a&e.childLanes)!==0,Vc||s){if(n=lu,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==l.retryLane&&(l.retryLane=i,sm(e,i),yp(n,e,i,-1))}return ZI(),n=iP(Error(dn(421))),aw(e,t,a,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=BW.bind(null,e),i._reactRetry=t,null):(e=l.treeContext,Af=og(i.nextSibling),Mf=t,Cs=!0,fp=null,e!==null&&(yh[vh++]=Jd,yh[vh++]=Qd,yh[vh++]=ky,Jd=e.id,Qd=e.overflow,ky=t),t=jI(t,n.children),t.flags|=4096,t)}function g5(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),MA(e.return,t,r)}function aP(e,t,r,n,i){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=i)}function BB(e,t,r){var n=t.pendingProps,i=n.revealOrder,l=n.tail;if(gc(e,t,n.children,r),n=Ls.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&g5(e,r,t);else if(e.tag===19)g5(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ts(Ls,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&b2(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),aP(t,!1,i,r,l);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&b2(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}aP(t,!0,r,null,l);break;case"together":aP(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bw(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function lm(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),My|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(dn(153));if(t.child!==null){for(e=t.child,r=cg(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=cg(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function TW(e,t,r){switch(t.tag){case 3:$B(t),o0();break;case 5:hB(t);break;case 1:Wc(t.type)&&d2(t);break;case 4:DI(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;ts(y2,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ts(Ls,Ls.current&1),t.flags|=128,null):r&t.child.childLanes?NB(e,t,r):(ts(Ls,Ls.current&1),e=lm(e,t,r),e!==null?e.sibling:null);ts(Ls,Ls.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return BB(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ts(Ls,Ls.current),n)break;return null;case 22:case 23:return t.lanes=0,zB(e,t,r)}return lm(e,t,r)}var FB,BA,UB,jB;FB=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};BA=function(){};UB=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,yy(ed.current);var l=null;switch(r){case"input":i=sA(e,i),n=sA(e,n),l=[];break;case"select":i=Ns({},i,{value:void 0}),n=Ns({},n,{value:void 0}),l=[];break;case"textarea":i=cA(e,i),n=cA(e,n),l=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=h2)}hA(r,n);var a;r=null;for(v in i)if(!n.hasOwnProperty(v)&&i.hasOwnProperty(v)&&i[v]!=null)if(v==="style"){var s=i[v];for(a in s)s.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(ox.hasOwnProperty(v)?l||(l=[]):(l=l||[]).push(v,null));for(v in n){var d=n[v];if(s=i!=null?i[v]:void 0,n.hasOwnProperty(v)&&d!==s&&(d!=null||s!=null))if(v==="style")if(s){for(a in s)!s.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in d)d.hasOwnProperty(a)&&s[a]!==d[a]&&(r||(r={}),r[a]=d[a])}else r||(l||(l=[]),l.push(v,r)),r=d;else v==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,s=s?s.__html:void 0,d!=null&&s!==d&&(l=l||[]).push(v,d)):v==="children"?typeof d!="string"&&typeof d!="number"||(l=l||[]).push(v,""+d):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(ox.hasOwnProperty(v)?(d!=null&&v==="onScroll"&&os("scroll",e),l||s===d||(l=[])):(l=l||[]).push(v,d))}r&&(l=l||[]).push("style",r);var v=l;(t.updateQueue=v)&&(t.flags|=4)}};jB=function(e,t,r,n){r!==n&&(t.flags|=4)};function _b(e,t){if(!Cs)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Xu(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function AW(e,t,r){var n=t.pendingProps;switch(TI(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xu(t),null;case 1:return Wc(t.type)&&p2(),Xu(t),null;case 3:return n=t.stateNode,l0(),hs(Hc),hs(tc),LI(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(nw(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,fp!==null&&(WA(fp),fp=null))),BA(e,t),Xu(t),null;case 5:zI(t);var i=yy(vx.current);if(r=t.type,e!==null&&t.stateNode!=null)UB(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(dn(166));return Xu(t),null}if(e=yy(ed.current),nw(t)){n=t.stateNode,r=t.type;var l=t.memoizedProps;switch(n[Kp]=t,n[gx]=l,e=(t.mode&1)!==0,r){case"dialog":os("cancel",n),os("close",n);break;case"iframe":case"object":case"embed":os("load",n);break;case"video":case"audio":for(i=0;i<$b.length;i++)os($b[i],n);break;case"source":os("error",n);break;case"img":case"image":case"link":os("error",n),os("load",n);break;case"details":os("toggle",n);break;case"input":C3(n,l),os("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},os("invalid",n);break;case"textarea":T3(n,l),os("invalid",n)}hA(r,l),i=null;for(var a in l)if(l.hasOwnProperty(a)){var s=l[a];a==="children"?typeof s=="string"?n.textContent!==s&&(l.suppressHydrationWarning!==!0&&rw(n.textContent,s,e),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(l.suppressHydrationWarning!==!0&&rw(n.textContent,s,e),i=["children",""+s]):ox.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&os("scroll",n)}switch(r){case"input":Z1(n),P3(n,l,!0);break;case"textarea":Z1(n),A3(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=h2)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=m6(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[Kp]=t,e[gx]=n,FB(e,t,!1,!1),t.stateNode=e;e:{switch(a=pA(r,n),r){case"dialog":os("cancel",e),os("close",e),i=n;break;case"iframe":case"object":case"embed":os("load",e),i=n;break;case"video":case"audio":for(i=0;i<$b.length;i++)os($b[i],e);i=n;break;case"source":os("error",e),i=n;break;case"img":case"image":case"link":os("error",e),os("load",e),i=n;break;case"details":os("toggle",e),i=n;break;case"input":C3(e,n),i=sA(e,n),os("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Ns({},n,{value:void 0}),os("invalid",e);break;case"textarea":T3(e,n),i=cA(e,n),os("invalid",e);break;default:i=n}hA(r,i),s=i;for(l in s)if(s.hasOwnProperty(l)){var d=s[l];l==="style"?v6(e,d):l==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&g6(e,d)):l==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&sx(e,d):typeof d=="number"&&sx(e,""+d):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ox.hasOwnProperty(l)?d!=null&&l==="onScroll"&&os("scroll",e):d!=null&&hI(e,l,d,a))}switch(r){case"input":Z1(e),P3(e,n,!1);break;case"textarea":Z1(e),A3(e);break;case"option":n.value!=null&&e.setAttribute("value",""+pg(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?V_(e,!!n.multiple,l,!1):n.defaultValue!=null&&V_(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=h2)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xu(t),null;case 6:if(e&&t.stateNode!=null)jB(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(dn(166));if(r=yy(vx.current),yy(ed.current),nw(t)){if(n=t.stateNode,r=t.memoizedProps,n[Kp]=t,(l=n.nodeValue!==r)&&(e=Mf,e!==null))switch(e.tag){case 3:rw(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&rw(n.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Kp]=t,t.stateNode=n}return Xu(t),null;case 13:if(hs(Ls),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Cs&&Af!==null&&t.mode&1&&!(t.flags&128))aB(),o0(),t.flags|=98560,l=!1;else if(l=nw(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(dn(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(dn(317));l[Kp]=t}else o0(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xu(t),l=!1}else fp!==null&&(WA(fp),fp=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ls.current&1?ql===0&&(ql=3):ZI())),t.updateQueue!==null&&(t.flags|=4),Xu(t),null);case 4:return l0(),BA(e,t),e===null&&dx(t.stateNode.containerInfo),Xu(t),null;case 10:return MI(t.type._context),Xu(t),null;case 17:return Wc(t.type)&&p2(),Xu(t),null;case 19:if(hs(Ls),l=t.memoizedState,l===null)return Xu(t),null;if(n=(t.flags&128)!==0,a=l.rendering,a===null)if(n)_b(l,!1);else{if(ql!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=b2(e),a!==null){for(t.flags|=128,_b(l,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)l=r,e=n,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ts(Ls,Ls.current&1|2),t.child}e=e.sibling}l.tail!==null&&al()>c0&&(t.flags|=128,n=!0,_b(l,!1),t.lanes=4194304)}else{if(!n)if(e=b2(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),_b(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!Cs)return Xu(t),null}else 2*al()-l.renderingStartTime>c0&&r!==1073741824&&(t.flags|=128,n=!0,_b(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(r=l.last,r!==null?r.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=al(),t.sibling=null,r=Ls.current,ts(Ls,n?r&1|2:r&1),t):(Xu(t),null);case 22:case 23:return WI(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Pf&1073741824&&(Xu(t),t.subtreeFlags&6&&(t.flags|=8192)):Xu(t),null;case 24:return null;case 25:return null}throw Error(dn(156,t.tag))}function kW(e,t){switch(TI(t),t.tag){case 1:return Wc(t.type)&&p2(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return l0(),hs(Hc),hs(tc),LI(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return zI(t),null;case 13:if(hs(Ls),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(dn(340));o0()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return hs(Ls),null;case 4:return l0(),null;case 10:return MI(t.type._context),null;case 22:case 23:return WI(),null;case 24:return null;default:return null}}var ow=!1,ec=!1,IW=typeof WeakSet=="function"?WeakSet:Set,ui=null;function N_(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Zs(e,t,n)}else r.current=null}function FA(e,t,r){try{r()}catch(n){Zs(e,t,n)}}var y5=!1;function MW(e,t){if(SA=u2,e=H6(),CI(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var a=0,s=-1,d=-1,v=0,S=0,A=e,P=null;t:for(;;){for(var L;A!==r||i!==0&&A.nodeType!==3||(s=a+i),A!==l||n!==0&&A.nodeType!==3||(d=a+n),A.nodeType===3&&(a+=A.nodeValue.length),(L=A.firstChild)!==null;)P=A,A=L;for(;;){if(A===e)break t;if(P===r&&++v===i&&(s=a),P===l&&++S===n&&(d=a),(L=A.nextSibling)!==null)break;A=P,P=A.parentNode}A=L}r=s===-1||d===-1?null:{start:s,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(EA={focusedElem:e,selectionRange:r},u2=!1,ui=t;ui!==null;)if(t=ui,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ui=e;else for(;ui!==null;){t=ui;try{var F=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var K=F.memoizedProps,re=F.memoizedState,G=t.stateNode,H=G.getSnapshotBeforeUpdate(t.elementType===t.type?K:sp(t.type,K),re);G.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var B=t.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(dn(163))}}catch($){Zs(t,t.return,$)}if(e=t.sibling,e!==null){e.return=t.return,ui=e;break}ui=t.return}return F=y5,y5=!1,F}function Jb(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var l=i.destroy;i.destroy=void 0,l!==void 0&&FA(t,r,l)}i=i.next}while(i!==n)}}function kS(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function UA(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function VB(e){var t=e.alternate;t!==null&&(e.alternate=null,VB(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Kp],delete t[gx],delete t[TA],delete t[pW],delete t[dW])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qB(e){return e.tag===5||e.tag===3||e.tag===4}function v5(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qB(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jA(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=h2));else if(n!==4&&(e=e.child,e!==null))for(jA(e,t,r),e=e.sibling;e!==null;)jA(e,t,r),e=e.sibling}function VA(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(VA(e,t,r),e=e.sibling;e!==null;)VA(e,t,r),e=e.sibling}var Eu=null,cp=!1;function qm(e,t,r){for(r=r.child;r!==null;)GB(e,t,r),r=r.sibling}function GB(e,t,r){if(Qp&&typeof Qp.onCommitFiberUnmount=="function")try{Qp.onCommitFiberUnmount(xS,r)}catch{}switch(r.tag){case 5:ec||N_(r,t);case 6:var n=Eu,i=cp;Eu=null,qm(e,t,r),Eu=n,cp=i,Eu!==null&&(cp?(e=Eu,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Eu.removeChild(r.stateNode));break;case 18:Eu!==null&&(cp?(e=Eu,r=r.stateNode,e.nodeType===8?JC(e.parentNode,r):e.nodeType===1&&JC(e,r),fx(e)):JC(Eu,r.stateNode));break;case 4:n=Eu,i=cp,Eu=r.stateNode.containerInfo,cp=!0,qm(e,t,r),Eu=n,cp=i;break;case 0:case 11:case 14:case 15:if(!ec&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var l=i,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&FA(r,t,a),i=i.next}while(i!==n)}qm(e,t,r);break;case 1:if(!ec&&(N_(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){Zs(r,t,s)}qm(e,t,r);break;case 21:qm(e,t,r);break;case 22:r.mode&1?(ec=(n=ec)||r.memoizedState!==null,qm(e,t,r),ec=n):qm(e,t,r);break;default:qm(e,t,r)}}function _5(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new IW),t.forEach(function(n){var i=FW.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function ip(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var l=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Eu=s.stateNode,cp=!1;break e;case 3:Eu=s.stateNode.containerInfo,cp=!0;break e;case 4:Eu=s.stateNode.containerInfo,cp=!0;break e}s=s.return}if(Eu===null)throw Error(dn(160));GB(l,a,i),Eu=null,cp=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(v){Zs(i,t,v)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)HB(t,e),t=t.sibling}function HB(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ip(t,e),Vp(e),n&4){try{Jb(3,e,e.return),kS(3,e)}catch(K){Zs(e,e.return,K)}try{Jb(5,e,e.return)}catch(K){Zs(e,e.return,K)}}break;case 1:ip(t,e),Vp(e),n&512&&r!==null&&N_(r,r.return);break;case 5:if(ip(t,e),Vp(e),n&512&&r!==null&&N_(r,r.return),e.flags&32){var i=e.stateNode;try{sx(i,"")}catch(K){Zs(e,e.return,K)}}if(n&4&&(i=e.stateNode,i!=null)){var l=e.memoizedProps,a=r!==null?r.memoizedProps:l,s=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{s==="input"&&l.type==="radio"&&l.name!=null&&p6(i,l),pA(s,a);var v=pA(s,l);for(a=0;a<d.length;a+=2){var S=d[a],A=d[a+1];S==="style"?v6(i,A):S==="dangerouslySetInnerHTML"?g6(i,A):S==="children"?sx(i,A):hI(i,S,A,v)}switch(s){case"input":lA(i,l);break;case"textarea":d6(i,l);break;case"select":var P=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!l.multiple;var L=l.value;L!=null?V_(i,!!l.multiple,L,!1):P!==!!l.multiple&&(l.defaultValue!=null?V_(i,!!l.multiple,l.defaultValue,!0):V_(i,!!l.multiple,l.multiple?[]:"",!1))}i[gx]=l}catch(K){Zs(e,e.return,K)}}break;case 6:if(ip(t,e),Vp(e),n&4){if(e.stateNode===null)throw Error(dn(162));i=e.stateNode,l=e.memoizedProps;try{i.nodeValue=l}catch(K){Zs(e,e.return,K)}}break;case 3:if(ip(t,e),Vp(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{fx(t.containerInfo)}catch(K){Zs(e,e.return,K)}break;case 4:ip(t,e),Vp(e);break;case 13:ip(t,e),Vp(e),i=e.child,i.flags&8192&&(l=i.memoizedState!==null,i.stateNode.isHidden=l,!l||i.alternate!==null&&i.alternate.memoizedState!==null||(GI=al())),n&4&&_5(e);break;case 22:if(S=r!==null&&r.memoizedState!==null,e.mode&1?(ec=(v=ec)||S,ip(t,e),ec=v):ip(t,e),Vp(e),n&8192){if(v=e.memoizedState!==null,(e.stateNode.isHidden=v)&&!S&&e.mode&1)for(ui=e,S=e.child;S!==null;){for(A=ui=S;ui!==null;){switch(P=ui,L=P.child,P.tag){case 0:case 11:case 14:case 15:Jb(4,P,P.return);break;case 1:N_(P,P.return);var F=P.stateNode;if(typeof F.componentWillUnmount=="function"){n=P,r=P.return;try{t=n,F.props=t.memoizedProps,F.state=t.memoizedState,F.componentWillUnmount()}catch(K){Zs(n,r,K)}}break;case 5:N_(P,P.return);break;case 22:if(P.memoizedState!==null){x5(A);continue}}L!==null?(L.return=P,ui=L):x5(A)}S=S.sibling}e:for(S=null,A=e;;){if(A.tag===5){if(S===null){S=A;try{i=A.stateNode,v?(l=i.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(s=A.stateNode,d=A.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,s.style.display=y6("display",a))}catch(K){Zs(e,e.return,K)}}}else if(A.tag===6){if(S===null)try{A.stateNode.nodeValue=v?"":A.memoizedProps}catch(K){Zs(e,e.return,K)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===e)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;A.sibling===null;){if(A.return===null||A.return===e)break e;S===A&&(S=null),A=A.return}S===A&&(S=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:ip(t,e),Vp(e),n&4&&_5(e);break;case 21:break;default:ip(t,e),Vp(e)}}function Vp(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(qB(r)){var n=r;break e}r=r.return}throw Error(dn(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(sx(i,""),n.flags&=-33);var l=v5(e);VA(e,l,i);break;case 3:case 4:var a=n.stateNode.containerInfo,s=v5(e);jA(e,s,a);break;default:throw Error(dn(161))}}catch(d){Zs(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function OW(e,t,r){ui=e,WB(e)}function WB(e,t,r){for(var n=(e.mode&1)!==0;ui!==null;){var i=ui,l=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||ow;if(!a){var s=i.alternate,d=s!==null&&s.memoizedState!==null||ec;s=ow;var v=ec;if(ow=a,(ec=d)&&!v)for(ui=i;ui!==null;)a=ui,d=a.child,a.tag===22&&a.memoizedState!==null?w5(i):d!==null?(d.return=a,ui=d):w5(i);for(;l!==null;)ui=l,WB(l),l=l.sibling;ui=i,ow=s,ec=v}b5(e)}else i.subtreeFlags&8772&&l!==null?(l.return=i,ui=l):b5(e)}}function b5(e){for(;ui!==null;){var t=ui;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ec||kS(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ec)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:sp(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&n5(t,l,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}n5(t,a,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var v=t.alternate;if(v!==null){var S=v.memoizedState;if(S!==null){var A=S.dehydrated;A!==null&&fx(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(dn(163))}ec||t.flags&512&&UA(t)}catch(P){Zs(t,t.return,P)}}if(t===e){ui=null;break}if(r=t.sibling,r!==null){r.return=t.return,ui=r;break}ui=t.return}}function x5(e){for(;ui!==null;){var t=ui;if(t===e){ui=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ui=r;break}ui=t.return}}function w5(e){for(;ui!==null;){var t=ui;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{kS(4,t)}catch(d){Zs(t,r,d)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(d){Zs(t,i,d)}}var l=t.return;try{UA(t)}catch(d){Zs(t,l,d)}break;case 5:var a=t.return;try{UA(t)}catch(d){Zs(t,a,d)}}}catch(d){Zs(t,t.return,d)}if(t===e){ui=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ui=s;break}ui=t.return}}var RW=Math.ceil,S2=fm.ReactCurrentDispatcher,VI=fm.ReactCurrentOwner,wh=fm.ReactCurrentBatchConfig,ao=0,lu=null,Pl=null,Tu=0,Pf=0,B_=wg(0),ql=0,wx=null,My=0,IS=0,qI=0,Qb=null,Uc=null,GI=0,c0=1/0,Xd=null,E2=!1,qA=null,lg=null,sw=!1,tg=null,C2=0,ex=0,GA=null,Fw=-1,Uw=0;function vc(){return ao&6?al():Fw!==-1?Fw:Fw=al()}function ug(e){return e.mode&1?ao&2&&Tu!==0?Tu&-Tu:gW.transition!==null?(Uw===0&&(Uw=I6()),Uw):(e=Ao,e!==0||(e=window.event,e=e===void 0?16:$6(e.type)),e):1}function yp(e,t,r,n){if(50<ex)throw ex=0,GA=null,Error(dn(185));Ux(e,r,n),(!(ao&2)||e!==lu)&&(e===lu&&(!(ao&2)&&(IS|=r),ql===4&&Jm(e,Tu)),Zc(e,n),r===1&&ao===0&&!(t.mode&1)&&(c0=al()+500,PS&&Sg()))}function Zc(e,t){var r=e.callbackNode;gH(e,t);var n=l2(e,e===lu?Tu:0);if(n===0)r!==null&&M3(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&M3(r),t===1)e.tag===0?mW(S5.bind(null,e)):rB(S5.bind(null,e)),fW(function(){!(ao&6)&&Sg()}),r=null;else{switch(M6(n)){case 1:r=yI;break;case 4:r=A6;break;case 16:r=s2;break;case 536870912:r=k6;break;default:r=s2}r=tF(r,ZB.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ZB(e,t){if(Fw=-1,Uw=0,ao&6)throw Error(dn(327));var r=e.callbackNode;if(Z_()&&e.callbackNode!==r)return null;var n=l2(e,e===lu?Tu:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=P2(e,n);else{t=n;var i=ao;ao|=2;var l=KB();(lu!==e||Tu!==t)&&(Xd=null,c0=al()+500,xy(e,t));do try{LW();break}catch(s){XB(e,s)}while(1);II(),S2.current=l,ao=i,Pl!==null?t=0:(lu=null,Tu=0,t=ql)}if(t!==0){if(t===2&&(i=vA(e),i!==0&&(n=i,t=HA(e,i))),t===1)throw r=wx,xy(e,0),Jm(e,n),Zc(e,al()),r;if(t===6)Jm(e,n);else{if(i=e.current.alternate,!(n&30)&&!DW(i)&&(t=P2(e,n),t===2&&(l=vA(e),l!==0&&(n=l,t=HA(e,l))),t===1))throw r=wx,xy(e,0),Jm(e,n),Zc(e,al()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(dn(345));case 2:uy(e,Uc,Xd);break;case 3:if(Jm(e,n),(n&130023424)===n&&(t=GI+500-al(),10<t)){if(l2(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){vc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=PA(uy.bind(null,e,Uc,Xd),t);break}uy(e,Uc,Xd);break;case 4:if(Jm(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-gp(n);l=1<<a,a=t[a],a>i&&(i=a),n&=~l}if(n=i,n=al()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*RW(n/1960))-n,10<n){e.timeoutHandle=PA(uy.bind(null,e,Uc,Xd),n);break}uy(e,Uc,Xd);break;case 5:uy(e,Uc,Xd);break;default:throw Error(dn(329))}}}return Zc(e,al()),e.callbackNode===r?ZB.bind(null,e):null}function HA(e,t){var r=Qb;return e.current.memoizedState.isDehydrated&&(xy(e,t).flags|=256),e=P2(e,t),e!==2&&(t=Uc,Uc=r,t!==null&&WA(t)),e}function WA(e){Uc===null?Uc=e:Uc.push.apply(Uc,e)}function DW(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],l=i.getSnapshot;i=i.value;try{if(!vp(l(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jm(e,t){for(t&=~qI,t&=~IS,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-gp(t),n=1<<r;e[r]=-1,t&=~n}}function S5(e){if(ao&6)throw Error(dn(327));Z_();var t=l2(e,0);if(!(t&1))return Zc(e,al()),null;var r=P2(e,t);if(e.tag!==0&&r===2){var n=vA(e);n!==0&&(t=n,r=HA(e,n))}if(r===1)throw r=wx,xy(e,0),Jm(e,t),Zc(e,al()),r;if(r===6)throw Error(dn(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,uy(e,Uc,Xd),Zc(e,al()),null}function HI(e,t){var r=ao;ao|=1;try{return e(t)}finally{ao=r,ao===0&&(c0=al()+500,PS&&Sg())}}function Oy(e){tg!==null&&tg.tag===0&&!(ao&6)&&Z_();var t=ao;ao|=1;var r=wh.transition,n=Ao;try{if(wh.transition=null,Ao=1,e)return e()}finally{Ao=n,wh.transition=r,ao=t,!(ao&6)&&Sg()}}function WI(){Pf=B_.current,hs(B_)}function xy(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,cW(r)),Pl!==null)for(r=Pl.return;r!==null;){var n=r;switch(TI(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&p2();break;case 3:l0(),hs(Hc),hs(tc),LI();break;case 5:zI(n);break;case 4:l0();break;case 13:hs(Ls);break;case 19:hs(Ls);break;case 10:MI(n.type._context);break;case 22:case 23:WI()}r=r.return}if(lu=e,Pl=e=cg(e.current,null),Tu=Pf=t,ql=0,wx=null,qI=IS=My=0,Uc=Qb=null,gy!==null){for(t=0;t<gy.length;t++)if(r=gy[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,l=r.pending;if(l!==null){var a=l.next;l.next=i,n.next=a}r.pending=n}gy=null}return e}function XB(e,t){do{var r=Pl;try{if(II(),$w.current=w2,x2){for(var n=$s.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}x2=!1}if(Iy=0,su=jl=$s=null,Yb=!1,_x=0,VI.current=null,r===null||r.return===null){ql=1,wx=t,Pl=null;break}e:{var l=e,a=r.return,s=r,d=t;if(t=Tu,s.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var v=d,S=s,A=S.tag;if(!(S.mode&1)&&(A===0||A===11||A===15)){var P=S.alternate;P?(S.updateQueue=P.updateQueue,S.memoizedState=P.memoizedState,S.lanes=P.lanes):(S.updateQueue=null,S.memoizedState=null)}var L=c5(a);if(L!==null){L.flags&=-257,f5(L,a,s,l,t),L.mode&1&&u5(l,v,t),t=L,d=v;var F=t.updateQueue;if(F===null){var K=new Set;K.add(d),t.updateQueue=K}else F.add(d);break e}else{if(!(t&1)){u5(l,v,t),ZI();break e}d=Error(dn(426))}}else if(Cs&&s.mode&1){var re=c5(a);if(re!==null){!(re.flags&65536)&&(re.flags|=256),f5(re,a,s,l,t),AI(u0(d,s));break e}}l=d=u0(d,s),ql!==4&&(ql=2),Qb===null?Qb=[l]:Qb.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var G=OB(l,d,t);r5(l,G);break e;case 1:s=d;var H=l.type,B=l.stateNode;if(!(l.flags&128)&&(typeof H.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(lg===null||!lg.has(B)))){l.flags|=65536,t&=-t,l.lanes|=t;var $=RB(l,s,t);r5(l,$);break e}}l=l.return}while(l!==null)}JB(r)}catch(N){t=N,Pl===r&&r!==null&&(Pl=r=r.return);continue}break}while(1)}function KB(){var e=S2.current;return S2.current=w2,e===null?w2:e}function ZI(){(ql===0||ql===3||ql===2)&&(ql=4),lu===null||!(My&268435455)&&!(IS&268435455)||Jm(lu,Tu)}function P2(e,t){var r=ao;ao|=2;var n=KB();(lu!==e||Tu!==t)&&(Xd=null,xy(e,t));do try{zW();break}catch(i){XB(e,i)}while(1);if(II(),ao=r,S2.current=n,Pl!==null)throw Error(dn(261));return lu=null,Tu=0,ql}function zW(){for(;Pl!==null;)YB(Pl)}function LW(){for(;Pl!==null&&!sH();)YB(Pl)}function YB(e){var t=eF(e.alternate,e,Pf);e.memoizedProps=e.pendingProps,t===null?JB(e):Pl=t,VI.current=null}function JB(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=kW(r,t),r!==null){r.flags&=32767,Pl=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ql=6,Pl=null;return}}else if(r=AW(r,t,Pf),r!==null){Pl=r;return}if(t=t.sibling,t!==null){Pl=t;return}Pl=t=e}while(t!==null);ql===0&&(ql=5)}function uy(e,t,r){var n=Ao,i=wh.transition;try{wh.transition=null,Ao=1,$W(e,t,r,n)}finally{wh.transition=i,Ao=n}return null}function $W(e,t,r,n){do Z_();while(tg!==null);if(ao&6)throw Error(dn(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(dn(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(yH(e,l),e===lu&&(Pl=lu=null,Tu=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||sw||(sw=!0,tF(s2,function(){return Z_(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=wh.transition,wh.transition=null;var a=Ao;Ao=1;var s=ao;ao|=4,VI.current=null,MW(e,r),HB(r,e),nW(EA),u2=!!SA,EA=SA=null,e.current=r,OW(r),lH(),ao=s,Ao=a,wh.transition=l}else e.current=r;if(sw&&(sw=!1,tg=e,C2=i),l=e.pendingLanes,l===0&&(lg=null),fH(r.stateNode),Zc(e,al()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(E2)throw E2=!1,e=qA,qA=null,e;return C2&1&&e.tag!==0&&Z_(),l=e.pendingLanes,l&1?e===GA?ex++:(ex=0,GA=e):ex=0,Sg(),null}function Z_(){if(tg!==null){var e=M6(C2),t=wh.transition,r=Ao;try{if(wh.transition=null,Ao=16>e?16:e,tg===null)var n=!1;else{if(e=tg,tg=null,C2=0,ao&6)throw Error(dn(331));var i=ao;for(ao|=4,ui=e.current;ui!==null;){var l=ui,a=l.child;if(ui.flags&16){var s=l.deletions;if(s!==null){for(var d=0;d<s.length;d++){var v=s[d];for(ui=v;ui!==null;){var S=ui;switch(S.tag){case 0:case 11:case 15:Jb(8,S,l)}var A=S.child;if(A!==null)A.return=S,ui=A;else for(;ui!==null;){S=ui;var P=S.sibling,L=S.return;if(VB(S),S===v){ui=null;break}if(P!==null){P.return=L,ui=P;break}ui=L}}}var F=l.alternate;if(F!==null){var K=F.child;if(K!==null){F.child=null;do{var re=K.sibling;K.sibling=null,K=re}while(K!==null)}}ui=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,ui=a;else e:for(;ui!==null;){if(l=ui,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Jb(9,l,l.return)}var G=l.sibling;if(G!==null){G.return=l.return,ui=G;break e}ui=l.return}}var H=e.current;for(ui=H;ui!==null;){a=ui;var B=a.child;if(a.subtreeFlags&2064&&B!==null)B.return=a,ui=B;else e:for(a=H;ui!==null;){if(s=ui,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:kS(9,s)}}catch(N){Zs(s,s.return,N)}if(s===a){ui=null;break e}var $=s.sibling;if($!==null){$.return=s.return,ui=$;break e}ui=s.return}}if(ao=i,Sg(),Qp&&typeof Qp.onPostCommitFiberRoot=="function")try{Qp.onPostCommitFiberRoot(xS,e)}catch{}n=!0}return n}finally{Ao=r,wh.transition=t}}return!1}function E5(e,t,r){t=u0(r,t),t=OB(e,t,1),e=sg(e,t,1),t=vc(),e!==null&&(Ux(e,1,t),Zc(e,t))}function Zs(e,t,r){if(e.tag===3)E5(e,e,r);else for(;t!==null;){if(t.tag===3){E5(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(lg===null||!lg.has(n))){e=u0(r,e),e=RB(t,e,1),t=sg(t,e,1),e=vc(),t!==null&&(Ux(t,1,e),Zc(t,e));break}}t=t.return}}function NW(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=vc(),e.pingedLanes|=e.suspendedLanes&r,lu===e&&(Tu&r)===r&&(ql===4||ql===3&&(Tu&130023424)===Tu&&500>al()-GI?xy(e,0):qI|=r),Zc(e,t)}function QB(e,t){t===0&&(e.mode&1?(t=Y1,Y1<<=1,!(Y1&130023424)&&(Y1=4194304)):t=1);var r=vc();e=sm(e,t),e!==null&&(Ux(e,t,r),Zc(e,r))}function BW(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),QB(e,r)}function FW(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(dn(314))}n!==null&&n.delete(t),QB(e,r)}var eF;eF=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Hc.current)Vc=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Vc=!1,TW(e,t,r);Vc=!!(e.flags&131072)}else Vc=!1,Cs&&t.flags&1048576&&nB(t,g2,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Bw(e,t),e=t.pendingProps;var i=a0(t,tc.current);W_(t,r),i=NI(null,t,n,e,i,r);var l=BI();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wc(n)?(l=!0,d2(t)):l=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,RI(t),i.updater=TS,t.stateNode=i,i._reactInternals=t,RA(t,n,e,r),t=LA(null,t,n,!0,l,r)):(t.tag=0,Cs&&l&&PI(t),gc(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Bw(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=jW(n),e=sp(n,e),i){case 0:t=zA(null,t,n,e,r);break e;case 1:t=d5(null,t,n,e,r);break e;case 11:t=h5(null,t,n,e,r);break e;case 14:t=p5(null,t,n,sp(n.type,e),r);break e}throw Error(dn(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:sp(n,i),zA(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:sp(n,i),d5(e,t,n,i,r);case 3:e:{if($B(t),e===null)throw Error(dn(387));n=t.pendingProps,l=t.memoizedState,i=l.element,sB(e,t),_2(t,n,null,r);var a=t.memoizedState;if(n=a.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){i=u0(Error(dn(423)),t),t=m5(e,t,n,r,i);break e}else if(n!==i){i=u0(Error(dn(424)),t),t=m5(e,t,n,r,i);break e}else for(Af=og(t.stateNode.containerInfo.firstChild),Mf=t,Cs=!0,fp=null,r=fB(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(o0(),n===i){t=lm(e,t,r);break e}gc(e,t,n,r)}t=t.child}return t;case 5:return hB(t),e===null&&IA(t),n=t.type,i=t.pendingProps,l=e!==null?e.memoizedProps:null,a=i.children,CA(n,i)?a=null:l!==null&&CA(n,l)&&(t.flags|=32),LB(e,t),gc(e,t,a,r),t.child;case 6:return e===null&&IA(t),null;case 13:return NB(e,t,r);case 4:return DI(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=s0(t,null,n,r):gc(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:sp(n,i),h5(e,t,n,i,r);case 7:return gc(e,t,t.pendingProps,r),t.child;case 8:return gc(e,t,t.pendingProps.children,r),t.child;case 12:return gc(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,l=t.memoizedProps,a=i.value,ts(y2,n._currentValue),n._currentValue=a,l!==null)if(vp(l.value,a)){if(l.children===i.children&&!Hc.current){t=lm(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var s=l.dependencies;if(s!==null){a=l.child;for(var d=s.firstContext;d!==null;){if(d.context===n){if(l.tag===1){d=tm(-1,r&-r),d.tag=2;var v=l.updateQueue;if(v!==null){v=v.shared;var S=v.pending;S===null?d.next=d:(d.next=S.next,S.next=d),v.pending=d}}l.lanes|=r,d=l.alternate,d!==null&&(d.lanes|=r),MA(l.return,r,t),s.lanes|=r;break}d=d.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(dn(341));a.lanes|=r,s=a.alternate,s!==null&&(s.lanes|=r),MA(a,r,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}gc(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,W_(t,r),i=Eh(i),n=n(i),t.flags|=1,gc(e,t,n,r),t.child;case 14:return n=t.type,i=sp(n,t.pendingProps),i=sp(n.type,i),p5(e,t,n,i,r);case 15:return DB(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:sp(n,i),Bw(e,t),t.tag=1,Wc(n)?(e=!0,d2(t)):e=!1,W_(t,r),uB(t,n,i),RA(t,n,i,r),LA(null,t,n,!0,e,r);case 19:return BB(e,t,r);case 22:return zB(e,t,r)}throw Error(dn(156,t.tag))};function tF(e,t){return T6(e,t)}function UW(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xh(e,t,r,n){return new UW(e,t,r,n)}function XI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jW(e){if(typeof e=="function")return XI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===dI)return 11;if(e===mI)return 14}return 2}function cg(e,t){var r=e.alternate;return r===null?(r=xh(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function jw(e,t,r,n,i,l){var a=2;if(n=e,typeof e=="function")XI(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case k_:return wy(r.children,i,l,t);case pI:a=8,i|=8;break;case nA:return e=xh(12,r,t,i|2),e.elementType=nA,e.lanes=l,e;case iA:return e=xh(13,r,t,i),e.elementType=iA,e.lanes=l,e;case aA:return e=xh(19,r,t,i),e.elementType=aA,e.lanes=l,e;case c6:return MS(r,i,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case l6:a=10;break e;case u6:a=9;break e;case dI:a=11;break e;case mI:a=14;break e;case Xm:a=16,n=null;break e}throw Error(dn(130,e==null?e:typeof e,""))}return t=xh(a,r,t,i),t.elementType=e,t.type=n,t.lanes=l,t}function wy(e,t,r,n){return e=xh(7,e,n,t),e.lanes=r,e}function MS(e,t,r,n){return e=xh(22,e,n,t),e.elementType=c6,e.lanes=r,e.stateNode={isHidden:!1},e}function oP(e,t,r){return e=xh(6,e,null,t),e.lanes=r,e}function sP(e,t,r){return t=xh(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function VW(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=UC(0),this.expirationTimes=UC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=UC(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function KI(e,t,r,n,i,l,a,s,d){return e=new VW(e,t,r,s,d),t===1?(t=1,l===!0&&(t|=8)):t=0,l=xh(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},RI(l),e}function qW(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A_,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function rF(e){if(!e)return dg;e=e._reactInternals;e:{if(Gy(e)!==e||e.tag!==1)throw Error(dn(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wc(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(dn(171))}if(e.tag===1){var r=e.type;if(Wc(r))return tB(e,r,t)}return t}function nF(e,t,r,n,i,l,a,s,d){return e=KI(r,n,!0,e,i,l,a,s,d),e.context=rF(null),r=e.current,n=vc(),i=ug(r),l=tm(n,i),l.callback=t??null,sg(r,l,i),e.current.lanes=i,Ux(e,i,n),Zc(e,n),e}function OS(e,t,r,n){var i=t.current,l=vc(),a=ug(i);return r=rF(r),t.context===null?t.context=r:t.pendingContext=r,t=tm(l,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=sg(i,t,a),e!==null&&(yp(e,i,a,l),Lw(e,i,a)),a}function T2(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function C5(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function YI(e,t){C5(e,t),(e=e.alternate)&&C5(e,t)}function GW(){return null}var iF=typeof reportError=="function"?reportError:function(e){console.error(e)};function JI(e){this._internalRoot=e}RS.prototype.render=JI.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(dn(409));OS(e,t,null,null)};RS.prototype.unmount=JI.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Oy(function(){OS(null,e,null,null)}),t[om]=null}};function RS(e){this._internalRoot=e}RS.prototype.unstable_scheduleHydration=function(e){if(e){var t=D6();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ym.length&&t!==0&&t<Ym[r].priority;r++);Ym.splice(r,0,e),r===0&&L6(e)}};function QI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function DS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function P5(){}function HW(e,t,r,n,i){if(i){if(typeof n=="function"){var l=n;n=function(){var v=T2(a);l.call(v)}}var a=nF(t,n,e,0,null,!1,!1,"",P5);return e._reactRootContainer=a,e[om]=a.current,dx(e.nodeType===8?e.parentNode:e),Oy(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var v=T2(d);s.call(v)}}var d=KI(e,0,!1,null,null,!1,!1,"",P5);return e._reactRootContainer=d,e[om]=d.current,dx(e.nodeType===8?e.parentNode:e),Oy(function(){OS(t,d,r,n)}),d}function zS(e,t,r,n,i){var l=r._reactRootContainer;if(l){var a=l;if(typeof i=="function"){var s=i;i=function(){var d=T2(a);s.call(d)}}OS(t,a,e,i)}else a=HW(r,t,e,i,n);return T2(a)}O6=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Lb(t.pendingLanes);r!==0&&(vI(t,r|1),Zc(t,al()),!(ao&6)&&(c0=al()+500,Sg()))}break;case 13:Oy(function(){var n=sm(e,1);if(n!==null){var i=vc();yp(n,e,1,i)}}),YI(e,1)}};_I=function(e){if(e.tag===13){var t=sm(e,134217728);if(t!==null){var r=vc();yp(t,e,134217728,r)}YI(e,134217728)}};R6=function(e){if(e.tag===13){var t=ug(e),r=sm(e,t);if(r!==null){var n=vc();yp(r,e,t,n)}YI(e,t)}};D6=function(){return Ao};z6=function(e,t){var r=Ao;try{return Ao=e,t()}finally{Ao=r}};mA=function(e,t,r){switch(t){case"input":if(lA(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=CS(n);if(!i)throw Error(dn(90));h6(n),lA(n,i)}}}break;case"textarea":d6(e,r);break;case"select":t=r.value,t!=null&&V_(e,!!r.multiple,t,!1)}};x6=HI;w6=Oy;var WW={usingClientEntryPoint:!1,Events:[Vx,R_,CS,_6,b6,HI]},bb={findFiberByHostInstance:my,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ZW={bundleType:bb.bundleType,version:bb.version,rendererPackageName:bb.rendererPackageName,rendererConfig:bb.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fm.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=C6(e),e===null?null:e.stateNode},findFiberByHostInstance:bb.findFiberByHostInstance||GW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lw.isDisabled&&lw.supportsFiber)try{xS=lw.inject(ZW),Qp=lw}catch{}}$f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WW;$f.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!QI(t))throw Error(dn(200));return qW(e,t,null,r)};$f.createRoot=function(e,t){if(!QI(e))throw Error(dn(299));var r=!1,n="",i=iF;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=KI(e,1,!1,null,null,r,!1,n,i),e[om]=t.current,dx(e.nodeType===8?e.parentNode:e),new JI(t)};$f.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(dn(188)):(e=Object.keys(e).join(","),Error(dn(268,e)));return e=C6(t),e=e===null?null:e.stateNode,e};$f.flushSync=function(e){return Oy(e)};$f.hydrate=function(e,t,r){if(!DS(t))throw Error(dn(200));return zS(null,e,t,!0,r)};$f.hydrateRoot=function(e,t,r){if(!QI(e))throw Error(dn(405));var n=r!=null&&r.hydratedSources||null,i=!1,l="",a=iF;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=nF(t,null,e,1,r??null,i,!1,l,a),e[om]=t.current,dx(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new RS(t)};$f.render=function(e,t,r){if(!DS(t))throw Error(dn(200));return zS(null,e,t,!1,r)};$f.unmountComponentAtNode=function(e){if(!DS(e))throw Error(dn(40));return e._reactRootContainer?(Oy(function(){zS(null,null,e,!1,function(){e._reactRootContainer=null,e[om]=null})}),!0):!1};$f.unstable_batchedUpdates=HI;$f.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!DS(r))throw Error(dn(200));if(e==null||e._reactInternals===void 0)throw Error(dn(38));return zS(e,t,r,!1,n)};$f.version="18.2.0-next-9e3b772b8-20220608";function aF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aF)}catch(e){console.error(e)}}aF(),n6.exports=$f;var eM=n6.exports;const XW=Xs(eM);/**
 * @remix-run/router v1.6.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function io(){return io=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},io.apply(this,arguments)}var fs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(fs||(fs={}));const T5="popstate";function oF(e){e===void 0&&(e={});let{initialEntries:t=["/"],initialIndex:r,v5Compat:n=!1}=e,i;i=t.map((L,F)=>S(L,typeof L=="string"?null:L.state,F===0?"default":void 0));let l=d(r??i.length-1),a=fs.Pop,s=null;function d(L){return Math.min(Math.max(L,0),i.length-1)}function v(){return i[l]}function S(L,F,K){F===void 0&&(F=null);let re=Ry(i?v().pathname:"/",L,F,K);return um(re.pathname.charAt(0)==="/","relative pathnames are not supported in memory history: "+JSON.stringify(L)),re}function A(L){return typeof L=="string"?L:_p(L)}return{get index(){return l},get action(){return a},get location(){return v()},createHref:A,createURL(L){return new URL(A(L),"http://localhost")},encodeLocation(L){let F=typeof L=="string"?Ah(L):L;return{pathname:F.pathname||"",search:F.search||"",hash:F.hash||""}},push(L,F){a=fs.Push;let K=S(L,F);l+=1,i.splice(l,i.length,K),n&&s&&s({action:a,location:K,delta:1})},replace(L,F){a=fs.Replace;let K=S(L,F);i[l]=K,n&&s&&s({action:a,location:K,delta:0})},go(L){a=fs.Pop;let F=d(l+L),K=i[F];l=F,s&&s({action:a,location:K,delta:L})},listen(L){return s=L,()=>{s=null}}}}function sF(e){e===void 0&&(e={});function t(n,i){let{pathname:l,search:a,hash:s}=n.location;return Ry("",{pathname:l,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:_p(i)}return uF(t,r,null,e)}function lF(e){e===void 0&&(e={});function t(i,l){let{pathname:a="/",search:s="",hash:d=""}=Ah(i.location.hash.substr(1));return Ry("",{pathname:a,search:s,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(i,l){let a=i.document.querySelector("base"),s="";if(a&&a.getAttribute("href")){let d=i.location.href,v=d.indexOf("#");s=v===-1?d:d.slice(0,v)}return s+"#"+(typeof l=="string"?l:_p(l))}function n(i,l){um(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return uF(t,r,n,e)}function Di(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function um(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function KW(){return Math.random().toString(36).substr(2,8)}function A5(e,t){return{usr:e.state,key:e.key,idx:t}}function Ry(e,t,r,n){return r===void 0&&(r=null),io({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ah(t):t,{state:r,key:t&&t.key||n||KW()})}function _p(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ah(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function uF(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:l=!1}=n,a=i.history,s=fs.Pop,d=null,v=S();v==null&&(v=0,a.replaceState(io({},a.state,{idx:v}),""));function S(){return(a.state||{idx:null}).idx}function A(){s=fs.Pop;let re=S(),G=re==null?null:re-v;v=re,d&&d({action:s,location:K.location,delta:G})}function P(re,G){s=fs.Push;let H=Ry(K.location,re,G);r&&r(H,re),v=S()+1;let B=A5(H,v),$=K.createHref(H);try{a.pushState(B,"",$)}catch{i.location.assign($)}l&&d&&d({action:s,location:K.location,delta:1})}function L(re,G){s=fs.Replace;let H=Ry(K.location,re,G);r&&r(H,re),v=S();let B=A5(H,v),$=K.createHref(H);a.replaceState(B,"",$),l&&d&&d({action:s,location:K.location,delta:0})}function F(re){let G=i.location.origin!=="null"?i.location.origin:i.location.href,H=typeof re=="string"?re:_p(re);return Di(G,"No window.location.(origin|href) available to create URL for href: "+H),new URL(H,G)}let K={get action(){return s},get location(){return e(i,a)},listen(re){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(T5,A),d=re,()=>{i.removeEventListener(T5,A),d=null}},createHref(re){return t(i,re)},createURL:F,encodeLocation(re){let G=F(re);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:P,replace:L,go(re){return a.go(re)}};return K}var Ul;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ul||(Ul={}));const YW=new Set(["lazy","caseSensitive","path","id","index","children"]);function JW(e){return e.index===!0}function cF(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((i,l)=>{let a=[...r,l],s=typeof i.id=="string"?i.id:a.join("-");if(Di(i.index!==!0||!i.children,"Cannot specify children on an index route"),Di(!n[s],'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),JW(i)){let d=io({},i,t(i),{id:s});return n[s]=d,d}else{let d=io({},i,t(i),{id:s,children:void 0});return n[s]=d,i.children&&(d.children=cF(i.children,t,a,n)),d}})}function vy(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?Ah(t):t,i=mg(n.pathname||"/",r);if(i==null)return null;let l=fF(e);QW(l);let a=null;for(let s=0;a==null&&s<l.length;++s)a=lZ(l[s],fZ(i));return a}function fF(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(l,a,s)=>{let d={relativePath:s===void 0?l.path||"":s,caseSensitive:l.caseSensitive===!0,childrenIndex:a,route:l};d.relativePath.startsWith("/")&&(Di(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let v=td([n,d.relativePath]),S=r.concat(d);l.children&&l.children.length>0&&(Di(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),fF(l.children,t,S,v)),!(l.path==null&&!l.index)&&t.push({path:v,score:oZ(v,l.index),routesMeta:S})};return e.forEach((l,a)=>{var s;if(l.path===""||!((s=l.path)!=null&&s.includes("?")))i(l,a);else for(let d of hF(l.path))i(l,a,d)}),t}function hF(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return i?[l,""]:[l];let a=hF(n.join("/")),s=[];return s.push(...a.map(d=>d===""?l:[l,d].join("/"))),i&&s.push(...a),s.map(d=>e.startsWith("/")&&d===""?"/":d)}function QW(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:sZ(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const eZ=/^:\w+$/,tZ=3,rZ=2,nZ=1,iZ=10,aZ=-2,k5=e=>e==="*";function oZ(e,t){let r=e.split("/"),n=r.length;return r.some(k5)&&(n+=aZ),t&&(n+=rZ),r.filter(i=>!k5(i)).reduce((i,l)=>i+(eZ.test(l)?tZ:l===""?nZ:iZ),n)}function sZ(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function lZ(e,t){let{routesMeta:r}=e,n={},i="/",l=[];for(let a=0;a<r.length;++a){let s=r[a],d=a===r.length-1,v=i==="/"?t:t.slice(i.length)||"/",S=tM({path:s.relativePath,caseSensitive:s.caseSensitive,end:d},v);if(!S)return null;Object.assign(n,S.params);let A=s.route;l.push({params:n,pathname:td([i,S.pathname]),pathnameBase:dZ(td([i,S.pathnameBase])),route:A}),S.pathnameBase!=="/"&&(i=td([i,S.pathnameBase]))}return l}function uZ(e,t){t===void 0&&(t={});let r=e;r.endsWith("*")&&r!=="*"&&!r.endsWith("/*")&&(um(!1,'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".')),r=r.replace(/\*$/,"/*"));const n=r.startsWith("/")?"/":"",i=r.split(/\/+/).map((l,a,s)=>{if(a===s.length-1&&l==="*")return t["*"];const v=l.match(/^:(\w+)(\??)$/);if(v){const[,S,A]=v;let P=t[S];return A==="?"?P??"":(P==null&&Di(!1,'Missing ":'+S+'" param'),P)}return l.replace(/\?$/g,"")}).filter(l=>!!l);return n+i.join("/")}function tM(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=cZ(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let l=i[0],a=l.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((v,S,A)=>{if(S==="*"){let P=s[A]||"";a=l.slice(0,l.length-P.length).replace(/(.)\/+$/,"$1")}return v[S]=hZ(s[A]||"",S),v},{}),pathname:l,pathnameBase:a,pattern:e}}function cZ(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),um(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(a,s)=>(n.push(s),"/([^\\/]+)"));return e.endsWith("*")?(n.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function fZ(e){try{return decodeURI(e)}catch(t){return um(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function hZ(e,t){try{return decodeURIComponent(e)}catch(r){return um(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function mg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function pF(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Ah(e):e;return{pathname:r?r.startsWith("/")?r:pZ(r,t):t,search:mZ(n),hash:gZ(i)}}function pZ(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function lP(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Gx(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function LS(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=Ah(e):(i=io({},e),Di(!i.pathname||!i.pathname.includes("?"),lP("?","pathname","search",i)),Di(!i.pathname||!i.pathname.includes("#"),lP("#","pathname","hash",i)),Di(!i.search||!i.search.includes("#"),lP("#","search","hash",i)));let l=e===""||i.pathname==="",a=l?"/":i.pathname,s;if(n||a==null)s=r;else{let A=t.length-1;if(a.startsWith("..")){let P=a.split("/");for(;P[0]==="..";)P.shift(),A-=1;i.pathname=P.join("/")}s=A>=0?t[A]:"/"}let d=pF(i,s),v=a&&a!=="/"&&a.endsWith("/"),S=(l||a===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(v||S)&&(d.pathname+="/"),d}const td=e=>e.join("/").replace(/\/\/+/g,"/"),dZ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),mZ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,gZ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,yZ=function(t,r){r===void 0&&(r={});let n=typeof r=="number"?{status:r}:r,i=new Headers(n.headers);return i.has("Content-Type")||i.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(t),io({},n,{headers:i}))};class A2 extends Error{}class vZ{constructor(t,r){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],Di(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let n;this.abortPromise=new Promise((l,a)=>n=a),this.controller=new AbortController;let i=()=>n(new A2("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",i),this.controller.signal.addEventListener("abort",i),this.data=Object.entries(t).reduce((l,a)=>{let[s,d]=a;return Object.assign(l,{[s]:this.trackPromise(s,d)})},{}),this.done&&this.unlistenAbortSignal(),this.init=r}trackPromise(t,r){if(!(r instanceof Promise))return r;this.deferredKeys.push(t),this.pendingKeysSet.add(t);let n=Promise.race([r,this.abortPromise]).then(i=>this.onSettle(n,t,null,i),i=>this.onSettle(n,t,i));return n.catch(()=>{}),Object.defineProperty(n,"_tracked",{get:()=>!0}),n}onSettle(t,r,n,i){return this.controller.signal.aborted&&n instanceof A2?(this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>n}),Promise.reject(n)):(this.pendingKeysSet.delete(r),this.done&&this.unlistenAbortSignal(),n?(Object.defineProperty(t,"_error",{get:()=>n}),this.emit(!1,r),Promise.reject(n)):(Object.defineProperty(t,"_data",{get:()=>i}),this.emit(!1,r),i))}emit(t,r){this.subscribers.forEach(n=>n(t,r))}subscribe(t){return this.subscribers.add(t),()=>this.subscribers.delete(t)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((t,r)=>this.pendingKeysSet.delete(r)),this.emit(!0)}async resolveData(t){let r=!1;if(!this.done){let n=()=>this.cancel();t.addEventListener("abort",n),r=await new Promise(i=>{this.subscribe(l=>{t.removeEventListener("abort",n),(l||this.done)&&i(l)})})}return r}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return Di(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,r)=>{let[n,i]=r;return Object.assign(t,{[n]:bZ(i)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function _Z(e){return e instanceof Promise&&e._tracked===!0}function bZ(e){if(!_Z(e))return e;if(e._error)throw e._error;return e._data}const xZ=function(t,r){r===void 0&&(r={});let n=typeof r=="number"?{status:r}:r;return new vZ(t,n)},wZ=function(t,r){r===void 0&&(r=302);let n=r;typeof n=="number"?n={status:n}:typeof n.status>"u"&&(n.status=302);let i=new Headers(n.headers);return i.set("Location",t),new Response(null,io({},n,{headers:i}))};class rM{constructor(t,r,n,i){i===void 0&&(i=!1),this.status=t,this.statusText=r||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function nM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const dF=["post","put","patch","delete"],SZ=new Set(dF),EZ=["get",...dF],CZ=new Set(EZ),PZ=new Set([301,302,303,307,308]),TZ=new Set([307,308]),uP={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},AZ={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},I5={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},mF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kZ=!gF,IZ=e=>({hasErrorBoundary:!!e.hasErrorBoundary});function iM(e){Di(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let t;if(e.mapRouteProperties)t=e.mapRouteProperties;else if(e.detectErrorBoundary){let Xt=e.detectErrorBoundary;t=Yt=>({hasErrorBoundary:Xt(Yt)})}else t=IZ;let r={},n=cF(e.routes,t,void 0,r),i,l=e.basename||"/",a=io({v7_normalizeFormMethod:!1,v7_prependBasename:!1},e.future),s=null,d=new Set,v=null,S=null,A=null,P=e.hydrationData!=null,L=vy(n,e.history.location,l),F=null;if(L==null){let Xt=lp(404,{pathname:e.history.location.pathname}),{matches:Yt,route:lr}=$5(n);L=Yt,F={[lr.id]:Xt}}let K=!L.some(Xt=>Xt.route.lazy)&&(!L.some(Xt=>Xt.route.loader)||e.hydrationData!=null),re,G={historyAction:e.history.action,location:e.history.location,matches:L,initialized:K,navigation:uP,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||F,fetchers:new Map,blockers:new Map},H=fs.Pop,B=!1,$,N=!1,z=!1,X=[],te=[],pe=new Map,ke=0,Pe=-1,ge=new Map,Ie=new Set,Ne=new Map,lt=new Map,it=new Map,Rt=!1;function St(){return s=e.history.listen(Xt=>{let{action:Yt,location:lr,delta:Qr}=Xt;if(Rt){Rt=!1;return}um(it.size===0||Qr!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Xr=$a({currentLocation:G.location,nextLocation:lr,historyAction:Yt});if(Xr&&Qr!=null){Rt=!0,e.history.go(Qr*-1),Aa(Xr,{state:"blocked",location:lr,proceed(){Aa(Xr,{state:"proceeding",proceed:void 0,reset:void 0,location:lr}),e.history.go(Qr)},reset(){La(Xr),Ge({blockers:new Map(re.state.blockers)})}});return}return tr(Yt,lr)}),G.initialized||tr(fs.Pop,G.location),re}function Zt(){s&&s(),d.clear(),$&&$.abort(),G.fetchers.forEach((Xt,Yt)=>Li(Yt)),G.blockers.forEach((Xt,Yt)=>La(Yt))}function Kt(Xt){return d.add(Xt),()=>d.delete(Xt)}function Ge(Xt){G=io({},G,Xt),d.forEach(Yt=>Yt(G))}function Ye(Xt,Yt){var lr,Qr;let Xr=G.actionData!=null&&G.navigation.formMethod!=null&&Kd(G.navigation.formMethod)&&G.navigation.state==="loading"&&((lr=Xt.state)==null?void 0:lr._isRedirect)!==!0,En;Yt.actionData?Object.keys(Yt.actionData).length>0?En=Yt.actionData:En=null:Xr?En=G.actionData:En=null;let Rn=Yt.loaderData?L5(G.loaderData,Yt.loaderData,Yt.matches||[],Yt.errors):G.loaderData;for(let[Lr]of it)La(Lr);let rr=B===!0||G.navigation.formMethod!=null&&Kd(G.navigation.formMethod)&&((Qr=Xt.state)==null?void 0:Qr._isRedirect)!==!0;i&&(n=i,i=void 0),Ge(io({},Yt,{actionData:En,loaderData:Rn,historyAction:H,location:Xt,initialized:!0,navigation:uP,revalidation:"idle",restoreScrollPosition:Mt(Xt,Yt.matches||G.matches),preventScrollReset:rr,blockers:new Map(G.blockers)})),N||H===fs.Pop||(H===fs.Push?e.history.push(Xt,Xt.state):H===fs.Replace&&e.history.replace(Xt,Xt.state)),H=fs.Pop,B=!1,N=!1,z=!1,X=[],te=[]}async function Dr(Xt,Yt){if(typeof Xt=="number"){e.history.go(Xt);return}let lr=ZA(G.location,G.matches,l,a.v7_prependBasename,Xt,Yt==null?void 0:Yt.fromRouteId,Yt==null?void 0:Yt.relative),{path:Qr,submission:Xr,error:En}=M5(a.v7_normalizeFormMethod,!1,lr,Yt),Rn=G.location,rr=Ry(G.location,Qr,Yt&&Yt.state);rr=io({},rr,e.history.encodeLocation(rr));let Lr=Yt&&Yt.replace!=null?Yt.replace:void 0,ur=fs.Push;Lr===!0?ur=fs.Replace:Lr===!1||Xr!=null&&Kd(Xr.formMethod)&&Xr.formAction===G.location.pathname+G.location.search&&(ur=fs.Replace);let hn=Yt&&"preventScrollReset"in Yt?Yt.preventScrollReset===!0:void 0,ti=$a({currentLocation:Rn,nextLocation:rr,historyAction:ur});if(ti){Aa(ti,{state:"blocked",location:rr,proceed(){Aa(ti,{state:"proceeding",proceed:void 0,reset:void 0,location:rr}),Dr(Xt,Yt)},reset(){La(ti),Ge({blockers:new Map(G.blockers)})}});return}return await tr(ur,rr,{submission:Xr,pendingError:En,preventScrollReset:hn,replace:Yt&&Yt.replace})}function wr(){if(ki(),Ge({revalidation:"loading"}),G.navigation.state!=="submitting"){if(G.navigation.state==="idle"){tr(G.historyAction,G.location,{startUninterruptedRevalidation:!0});return}tr(H||G.historyAction,G.navigation.location,{overrideNavigation:G.navigation})}}async function tr(Xt,Yt,lr){$&&$.abort(),$=null,H=Xt,N=(lr&&lr.startUninterruptedRevalidation)===!0,dr(G.location,G.matches),B=(lr&&lr.preventScrollReset)===!0;let Qr=i||n,Xr=lr&&lr.overrideNavigation,En=vy(Qr,Yt,l);if(!En){let Hr=lp(404,{pathname:Yt.pathname}),{matches:fi,route:Ci}=$5(Qr);ka(),Ye(Yt,{matches:fi,loaderData:{},errors:{[Ci.id]:Hr}});return}if(zZ(G.location,Yt)&&!(lr&&lr.submission&&Kd(lr.submission.formMethod))){Ye(Yt,{matches:En});return}$=new AbortController;let Rn=wb(e.history,Yt,$.signal,lr&&lr.submission),rr,Lr;if(lr&&lr.pendingError)Lr={[F_(En).route.id]:lr.pendingError};else if(lr&&lr.submission&&Kd(lr.submission.formMethod)){let Hr=await br(Rn,Yt,lr.submission,En,{replace:lr.replace});if(Hr.shortCircuited)return;rr=Hr.pendingActionData,Lr=Hr.pendingActionError,Xr=io({state:"loading",location:Yt},lr.submission),Rn=new Request(Rn.url,{signal:Rn.signal})}let{shortCircuited:ur,loaderData:hn,errors:ti}=await Bt(Rn,Yt,En,Xr,lr&&lr.submission,lr&&lr.fetcherSubmission,lr&&lr.replace,rr,Lr);ur||($=null,Ye(Yt,io({matches:En},rr?{actionData:rr}:{},{loaderData:hn,errors:ti})))}async function br(Xt,Yt,lr,Qr,Xr){ki();let En=io({state:"submitting",location:Yt},lr);Ge({navigation:En});let Rn,rr=XA(Qr,Yt);if(!rr.route.action&&!rr.route.lazy)Rn={type:Ul.error,error:lp(405,{method:Xt.method,pathname:Yt.pathname,routeId:rr.route.id})};else if(Rn=await xb("action",Xt,rr,Qr,r,t,l),Xt.signal.aborted)return{shortCircuited:!0};if(X_(Rn)){let Lr;return Xr&&Xr.replace!=null?Lr=Xr.replace:Lr=Rn.location===G.location.pathname+G.location.search,await Qn(G,Rn,{submission:lr,replace:Lr}),{shortCircuited:!0}}if(tx(Rn)){let Lr=F_(Qr,rr.route.id);return(Xr&&Xr.replace)!==!0&&(H=fs.Push),{pendingActionData:{},pendingActionError:{[Lr.route.id]:Rn.error}}}if(_y(Rn))throw lp(400,{type:"defer-action"});return{pendingActionData:{[rr.route.id]:Rn.data}}}async function Bt(Xt,Yt,lr,Qr,Xr,En,Rn,rr,Lr){let ur=Qr;ur||(ur=io({state:"loading",location:Yt,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Xr));let hn=Xr||En?Xr||En:ur.formMethod&&ur.formAction&&ur.formData&&ur.formEncType?{formMethod:ur.formMethod,formAction:ur.formAction,formData:ur.formData,formEncType:ur.formEncType}:void 0,ti=i||n,[Hr,fi]=O5(e.history,G,lr,hn,Yt,z,X,te,Ne,ti,l,rr,Lr);if(ka(Je=>!(lr&&lr.some(ye=>ye.route.id===Je))||Hr&&Hr.some(ye=>ye.route.id===Je)),Hr.length===0&&fi.length===0){let Je=gi();return Ye(Yt,io({matches:lr,loaderData:{},errors:Lr||null},rr?{actionData:rr}:{},Je?{fetchers:new Map(G.fetchers)}:{})),{shortCircuited:!0}}if(!N){fi.forEach(ye=>{let fe=G.fetchers.get(ye.key),we={state:"loading",data:fe&&fe.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};G.fetchers.set(ye.key,we)});let Je=rr||G.actionData;Ge(io({navigation:ur},Je?Object.keys(Je).length===0?{actionData:null}:{actionData:Je}:{},fi.length>0?{fetchers:new Map(G.fetchers)}:{}))}Pe=++ke,fi.forEach(Je=>{Je.controller&&pe.set(Je.key,Je.controller)});let Ci=()=>fi.forEach(Je=>Pi(Je.key));$&&$.signal.addEventListener("abort",Ci);let{results:zi,loaderResults:Ae,fetcherResults:$e}=await an(G.matches,lr,Hr,fi,Xt);if(Xt.signal.aborted)return{shortCircuited:!0};$&&$.signal.removeEventListener("abort",Ci),fi.forEach(Je=>pe.delete(Je.key));let je=N5(zi);if(je)return await Qn(G,je,{replace:Rn}),{shortCircuited:!0};let{loaderData:et,errors:ht}=z5(G,lr,Hr,Ae,Lr,fi,$e,lt);lt.forEach((Je,ye)=>{Je.subscribe(fe=>{(fe||Je.done)&&lt.delete(ye)})});let Ct=gi(),Dt=ea(Pe),Et=Ct||Dt||fi.length>0;return io({loaderData:et,errors:ht},Et?{fetchers:new Map(G.fetchers)}:{})}function hr(Xt){return G.fetchers.get(Xt)||AZ}function cr(Xt,Yt,lr,Qr){if(kZ)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");pe.has(Xt)&&Pi(Xt);let Xr=i||n,En=ZA(G.location,G.matches,l,a.v7_prependBasename,lr,Yt,Qr==null?void 0:Qr.relative),Rn=vy(Xr,En,l);if(!Rn){Xn(Xt,Yt,lp(404,{pathname:En}));return}let{path:rr,submission:Lr}=M5(a.v7_normalizeFormMethod,!0,En,Qr),ur=XA(Rn,rr);if(B=(Qr&&Qr.preventScrollReset)===!0,Lr&&Kd(Lr.formMethod)){Mn(Xt,Yt,rr,ur,Rn,Lr);return}Ne.set(Xt,{routeId:Yt,path:rr}),Hn(Xt,Yt,rr,ur,Rn,Lr)}async function Mn(Xt,Yt,lr,Qr,Xr,En){if(ki(),Ne.delete(Xt),!Qr.route.action&&!Qr.route.lazy){let Ce=lp(405,{method:En.formMethod,pathname:lr,routeId:Yt});Xn(Xt,Yt,Ce);return}let Rn=G.fetchers.get(Xt),rr=io({state:"submitting"},En,{data:Rn&&Rn.data," _hasFetcherDoneAnything ":!0});G.fetchers.set(Xt,rr),Ge({fetchers:new Map(G.fetchers)});let Lr=new AbortController,ur=wb(e.history,lr,Lr.signal,En);pe.set(Xt,Lr);let hn=await xb("action",ur,Qr,Xr,r,t,l);if(ur.signal.aborted){pe.get(Xt)===Lr&&pe.delete(Xt);return}if(X_(hn)){pe.delete(Xt),Ie.add(Xt);let Ce=io({state:"loading"},En,{data:void 0," _hasFetcherDoneAnything ":!0});return G.fetchers.set(Xt,Ce),Ge({fetchers:new Map(G.fetchers)}),Qn(G,hn,{submission:En,isFetchActionRedirect:!0})}if(tx(hn)){Xn(Xt,Yt,hn.error);return}if(_y(hn))throw lp(400,{type:"defer-action"});let ti=G.navigation.location||G.location,Hr=wb(e.history,ti,Lr.signal),fi=i||n,Ci=G.navigation.state!=="idle"?vy(fi,G.navigation.location,l):G.matches;Di(Ci,"Didn't find any matches after fetcher action");let zi=++ke;ge.set(Xt,zi);let Ae=io({state:"loading",data:hn.data},En,{" _hasFetcherDoneAnything ":!0});G.fetchers.set(Xt,Ae);let[$e,je]=O5(e.history,G,Ci,En,ti,z,X,te,Ne,fi,l,{[Qr.route.id]:hn.data},void 0);je.filter(Ce=>Ce.key!==Xt).forEach(Ce=>{let Le=Ce.key,nt=G.fetchers.get(Le),dt={state:"loading",data:nt&&nt.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};G.fetchers.set(Le,dt),Ce.controller&&pe.set(Le,Ce.controller)}),Ge({fetchers:new Map(G.fetchers)});let et=()=>je.forEach(Ce=>Pi(Ce.key));Lr.signal.addEventListener("abort",et);let{results:ht,loaderResults:Ct,fetcherResults:Dt}=await an(G.matches,Ci,$e,je,Hr);if(Lr.signal.aborted)return;Lr.signal.removeEventListener("abort",et),ge.delete(Xt),pe.delete(Xt),je.forEach(Ce=>pe.delete(Ce.key));let Et=N5(ht);if(Et)return Qn(G,Et);let{loaderData:Je,errors:ye}=z5(G,G.matches,$e,Ct,void 0,je,Dt,lt),fe={state:"idle",data:hn.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};G.fetchers.set(Xt,fe);let we=ea(zi);G.navigation.state==="loading"&&zi>Pe?(Di(H,"Expected pending action"),$&&$.abort(),Ye(G.navigation.location,{matches:Ci,loaderData:Je,errors:ye,fetchers:new Map(G.fetchers)})):(Ge(io({errors:ye,loaderData:L5(G.loaderData,Je,Ci,ye)},we?{fetchers:new Map(G.fetchers)}:{})),z=!1)}async function Hn(Xt,Yt,lr,Qr,Xr,En){let Rn=G.fetchers.get(Xt),rr=io({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},En,{data:Rn&&Rn.data," _hasFetcherDoneAnything ":!0});G.fetchers.set(Xt,rr),Ge({fetchers:new Map(G.fetchers)});let Lr=new AbortController,ur=wb(e.history,lr,Lr.signal);pe.set(Xt,Lr);let hn=await xb("loader",ur,Qr,Xr,r,t,l);if(_y(hn)&&(hn=await bF(hn,ur.signal,!0)||hn),pe.get(Xt)===Lr&&pe.delete(Xt),ur.signal.aborted)return;if(X_(hn)){Ie.add(Xt),await Qn(G,hn);return}if(tx(hn)){let Hr=F_(G.matches,Yt);G.fetchers.delete(Xt),Ge({fetchers:new Map(G.fetchers),errors:{[Hr.route.id]:hn.error}});return}Di(!_y(hn),"Unhandled fetcher deferred data");let ti={state:"idle",data:hn.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};G.fetchers.set(Xt,ti),Ge({fetchers:new Map(G.fetchers)})}async function Qn(Xt,Yt,lr){var Qr;let{submission:Xr,replace:En,isFetchActionRedirect:Rn}=lr===void 0?{}:lr;Yt.revalidate&&(z=!0);let rr=Ry(Xt.location,Yt.location,io({_isRedirect:!0},Rn?{_isFetchActionRedirect:!0}:{}));if(Di(rr,"Expected a location on the redirect navigation"),mF.test(Yt.location)&&gF&&typeof((Qr=window)==null?void 0:Qr.location)<"u"){let fi=e.history.createURL(Yt.location),Ci=mg(fi.pathname,l)==null;if(window.location.origin!==fi.origin||Ci){En?window.location.replace(Yt.location):window.location.assign(Yt.location);return}}$=null;let Lr=En===!0?fs.Replace:fs.Push,{formMethod:ur,formAction:hn,formEncType:ti,formData:Hr}=Xt.navigation;!Xr&&ur&&hn&&Hr&&ti&&(Xr={formMethod:ur,formAction:hn,formEncType:ti,formData:Hr}),TZ.has(Yt.status)&&Xr&&Kd(Xr.formMethod)?await tr(Lr,rr,{submission:io({},Xr,{formAction:Yt.location}),preventScrollReset:B}):Rn?await tr(Lr,rr,{overrideNavigation:{state:"loading",location:rr,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},fetcherSubmission:Xr,preventScrollReset:B}):await tr(Lr,rr,{overrideNavigation:{state:"loading",location:rr,formMethod:Xr?Xr.formMethod:void 0,formAction:Xr?Xr.formAction:void 0,formEncType:Xr?Xr.formEncType:void 0,formData:Xr?Xr.formData:void 0},preventScrollReset:B})}async function an(Xt,Yt,lr,Qr,Xr){let En=await Promise.all([...lr.map(Lr=>xb("loader",Xr,Lr,Yt,r,t,l)),...Qr.map(Lr=>Lr.matches&&Lr.match&&Lr.controller?xb("loader",wb(e.history,Lr.path,Lr.controller.signal),Lr.match,Lr.matches,r,t,l):{type:Ul.error,error:lp(404,{pathname:Lr.path})})]),Rn=En.slice(0,lr.length),rr=En.slice(lr.length);return await Promise.all([B5(Xt,lr,Rn,Rn.map(()=>Xr.signal),!1,G.loaderData),B5(Xt,Qr.map(Lr=>Lr.match),rr,Qr.map(Lr=>Lr.controller?Lr.controller.signal:null),!0)]),{results:En,loaderResults:Rn,fetcherResults:rr}}function ki(){z=!0,X.push(...ka()),Ne.forEach((Xt,Yt)=>{pe.has(Yt)&&(te.push(Yt),Pi(Yt))})}function Xn(Xt,Yt,lr){let Qr=F_(G.matches,Yt);Li(Xt),Ge({errors:{[Qr.route.id]:lr},fetchers:new Map(G.fetchers)})}function Li(Xt){pe.has(Xt)&&Pi(Xt),Ne.delete(Xt),ge.delete(Xt),Ie.delete(Xt),G.fetchers.delete(Xt)}function Pi(Xt){let Yt=pe.get(Xt);Di(Yt,"Expected fetch controller: "+Xt),Yt.abort(),pe.delete(Xt)}function Yi(Xt){for(let Yt of Xt){let Qr={state:"idle",data:hr(Yt).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};G.fetchers.set(Yt,Qr)}}function gi(){let Xt=[],Yt=!1;for(let lr of Ie){let Qr=G.fetchers.get(lr);Di(Qr,"Expected fetcher: "+lr),Qr.state==="loading"&&(Ie.delete(lr),Xt.push(lr),Yt=!0)}return Yi(Xt),Yt}function ea(Xt){let Yt=[];for(let[lr,Qr]of ge)if(Qr<Xt){let Xr=G.fetchers.get(lr);Di(Xr,"Expected fetcher: "+lr),Xr.state==="loading"&&(Pi(lr),ge.delete(lr),Yt.push(lr))}return Yi(Yt),Yt.length>0}function ya(Xt,Yt){let lr=G.blockers.get(Xt)||I5;return it.get(Xt)!==Yt&&it.set(Xt,Yt),lr}function La(Xt){G.blockers.delete(Xt),it.delete(Xt)}function Aa(Xt,Yt){let lr=G.blockers.get(Xt)||I5;Di(lr.state==="unblocked"&&Yt.state==="blocked"||lr.state==="blocked"&&Yt.state==="blocked"||lr.state==="blocked"&&Yt.state==="proceeding"||lr.state==="blocked"&&Yt.state==="unblocked"||lr.state==="proceeding"&&Yt.state==="unblocked","Invalid blocker state transition: "+lr.state+" -> "+Yt.state),G.blockers.set(Xt,Yt),Ge({blockers:new Map(G.blockers)})}function $a(Xt){let{currentLocation:Yt,nextLocation:lr,historyAction:Qr}=Xt;if(it.size===0)return;it.size>1&&um(!1,"A router only supports one blocker at a time");let Xr=Array.from(it.entries()),[En,Rn]=Xr[Xr.length-1],rr=G.blockers.get(En);if(!(rr&&rr.state==="proceeding")&&Rn({currentLocation:Yt,nextLocation:lr,historyAction:Qr}))return En}function ka(Xt){let Yt=[];return lt.forEach((lr,Qr)=>{(!Xt||Xt(Qr))&&(lr.cancel(),Yt.push(Qr),lt.delete(Qr))}),Yt}function Ka(Xt,Yt,lr){if(v=Xt,A=Yt,S=lr||(Qr=>Qr.key),!P&&G.navigation===uP){P=!0;let Qr=Mt(G.location,G.matches);Qr!=null&&Ge({restoreScrollPosition:Qr})}return()=>{v=null,A=null,S=null}}function dr(Xt,Yt){if(v&&S&&A){let lr=Yt.map(Xr=>F5(Xr,G.loaderData)),Qr=S(Xt,lr)||Xt.key;v[Qr]=A()}}function Mt(Xt,Yt){if(v&&S&&A){let lr=Yt.map(En=>F5(En,G.loaderData)),Qr=S(Xt,lr)||Xt.key,Xr=v[Qr];if(typeof Xr=="number")return Xr}return null}function yr(Xt){i=Xt}return re={get basename(){return l},get state(){return G},get routes(){return n},initialize:St,subscribe:Kt,enableScrollRestoration:Ka,navigate:Dr,fetch:cr,revalidate:wr,createHref:Xt=>e.history.createHref(Xt),encodeLocation:Xt=>e.history.encodeLocation(Xt),getFetcher:hr,deleteFetcher:Li,dispose:Zt,getBlocker:ya,deleteBlocker:La,_internalFetchControllers:pe,_internalActiveDeferreds:lt,_internalSetRoutes:yr},re}function MZ(e){return e!=null&&"formData"in e}function ZA(e,t,r,n,i,l,a){let s,d;if(l!=null&&a!=="path"){s=[];for(let S of t)if(s.push(S),S.route.id===l){d=S;break}}else s=t,d=t[t.length-1];let v=LS(i||".",Gx(s).map(S=>S.pathnameBase),mg(e.pathname,r)||e.pathname,a==="path");return i==null&&(v.search=e.search,v.hash=e.hash),(i==null||i===""||i===".")&&d&&d.route.index&&!aM(v.search)&&(v.search=v.search?v.search.replace(/^\?/,"?index&"):"?index"),n&&r!=="/"&&(v.pathname=v.pathname==="/"?r:td([r,v.pathname])),_p(v)}function M5(e,t,r,n){if(!n||!MZ(n))return{path:r};if(n.formMethod&&!NZ(n.formMethod))return{path:r,error:lp(405,{method:n.formMethod})};let i;if(n.formData){let s=n.formMethod||"get";if(i={formMethod:e?s.toUpperCase():s.toLowerCase(),formAction:_F(r),formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:n.formData},Kd(i.formMethod))return{path:r,submission:i}}let l=Ah(r),a=vF(n.formData);return t&&l.search&&aM(l.search)&&a.append("index",""),l.search="?"+a,{path:_p(l),submission:i}}function OZ(e,t){let r=e;if(t){let n=e.findIndex(i=>i.route.id===t);n>=0&&(r=e.slice(0,n))}return r}function O5(e,t,r,n,i,l,a,s,d,v,S,A,P){let L=P?Object.values(P)[0]:A?Object.values(A)[0]:void 0,F=e.createURL(t.location),K=e.createURL(i),re=P?Object.keys(P)[0]:void 0,H=OZ(r,re).filter(($,N)=>{if($.route.lazy)return!0;if($.route.loader==null)return!1;if(RZ(t.loaderData,t.matches[N],$)||a.some(te=>te===$.route.id))return!0;let z=t.matches[N],X=$;return R5($,io({currentUrl:F,currentParams:z.params,nextUrl:K,nextParams:X.params},n,{actionResult:L,defaultShouldRevalidate:l||F.pathname+F.search===K.pathname+K.search||F.search!==K.search||yF(z,X)}))}),B=[];return d.forEach(($,N)=>{if(!r.some(pe=>pe.route.id===$.routeId))return;let z=vy(v,$.path,S);if(!z){B.push({key:N,routeId:$.routeId,path:$.path,matches:null,match:null,controller:null});return}let X=XA(z,$.path);if(s.includes(N)){B.push({key:N,routeId:$.routeId,path:$.path,matches:z,match:X,controller:new AbortController});return}R5(X,io({currentUrl:F,currentParams:t.matches[t.matches.length-1].params,nextUrl:K,nextParams:r[r.length-1].params},n,{actionResult:L,defaultShouldRevalidate:l}))&&B.push({key:N,routeId:$.routeId,path:$.path,matches:z,match:X,controller:new AbortController})}),[H,B]}function RZ(e,t,r){let n=!t||r.route.id!==t.route.id,i=e[r.route.id]===void 0;return n||i}function yF(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function R5(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function D5(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let i=r[e.id];Di(i,"No route found in manifest");let l={};for(let a in n){let d=i[a]!==void 0&&a!=="hasErrorBoundary";um(!d,'Route "'+i.id+'" has a static property "'+a+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+a+'" will be ignored.')),!d&&!YW.has(a)&&(l[a]=n[a])}Object.assign(i,l),Object.assign(i,io({},t(i),{lazy:void 0}))}async function xb(e,t,r,n,i,l,a,s,d,v){s===void 0&&(s=!1),d===void 0&&(d=!1);let S,A,P,L=re=>{let G,H=new Promise((B,$)=>G=$);return P=()=>G(),t.signal.addEventListener("abort",P),Promise.race([re({request:t,params:r.params,context:v}),H])};try{let re=r.route[e];if(r.route.lazy)if(re)A=(await Promise.all([L(re),D5(r.route,l,i)]))[0];else if(await D5(r.route,l,i),re=r.route[e],re)A=await L(re);else if(e==="action"){let G=new URL(t.url),H=G.pathname+G.search;throw lp(405,{method:t.method,pathname:H,routeId:r.route.id})}else return{type:Ul.data,data:void 0};else if(re)A=await L(re);else{let G=new URL(t.url),H=G.pathname+G.search;throw lp(404,{pathname:H})}Di(A!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(re){S=Ul.error,A=re}finally{P&&t.signal.removeEventListener("abort",P)}if($Z(A)){let re=A.status;if(PZ.has(re)){let B=A.headers.get("Location");if(Di(B,"Redirects returned/thrown from loaders/actions must have a Location header"),!mF.test(B))B=ZA(new URL(t.url),n.slice(0,n.indexOf(r)+1),a,!0,B);else if(!s){let $=new URL(t.url),N=B.startsWith("//")?new URL($.protocol+B):new URL(B),z=mg(N.pathname,a)!=null;N.origin===$.origin&&z&&(B=N.pathname+N.search+N.hash)}if(s)throw A.headers.set("Location",B),A;return{type:Ul.redirect,status:re,location:B,revalidate:A.headers.get("X-Remix-Revalidate")!==null}}if(d)throw{type:S||Ul.data,response:A};let G,H=A.headers.get("Content-Type");return H&&/\bapplication\/json\b/.test(H)?G=await A.json():G=await A.text(),S===Ul.error?{type:S,error:new rM(re,A.statusText,G),headers:A.headers}:{type:Ul.data,data:G,statusCode:A.status,headers:A.headers}}if(S===Ul.error)return{type:S,error:A};if(LZ(A)){var F,K;return{type:Ul.deferred,deferredData:A,statusCode:(F=A.init)==null?void 0:F.status,headers:((K=A.init)==null?void 0:K.headers)&&new Headers(A.init.headers)}}return{type:Ul.data,data:A}}function wb(e,t,r,n){let i=e.createURL(_F(t)).toString(),l={signal:r};if(n&&Kd(n.formMethod)){let{formMethod:a,formEncType:s,formData:d}=n;l.method=a.toUpperCase(),l.body=s==="application/x-www-form-urlencoded"?vF(d):d}return new Request(i,l)}function vF(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,n instanceof File?n.name:n);return t}function DZ(e,t,r,n,i){let l={},a=null,s,d=!1,v={};return r.forEach((S,A)=>{let P=t[A].route.id;if(Di(!X_(S),"Cannot handle redirect results in processLoaderData"),tx(S)){let L=F_(e,P),F=S.error;n&&(F=Object.values(n)[0],n=void 0),a=a||{},a[L.route.id]==null&&(a[L.route.id]=F),l[P]=void 0,d||(d=!0,s=nM(S.error)?S.error.status:500),S.headers&&(v[P]=S.headers)}else _y(S)?(i.set(P,S.deferredData),l[P]=S.deferredData.data):l[P]=S.data,S.statusCode!=null&&S.statusCode!==200&&!d&&(s=S.statusCode),S.headers&&(v[P]=S.headers)}),n&&(a=n,l[Object.keys(n)[0]]=void 0),{loaderData:l,errors:a,statusCode:s||200,loaderHeaders:v}}function z5(e,t,r,n,i,l,a,s){let{loaderData:d,errors:v}=DZ(t,r,n,i,s);for(let S=0;S<l.length;S++){let{key:A,match:P,controller:L}=l[S];Di(a!==void 0&&a[S]!==void 0,"Did not find corresponding fetcher result");let F=a[S];if(!(L&&L.signal.aborted))if(tx(F)){let K=F_(e.matches,P==null?void 0:P.route.id);v&&v[K.route.id]||(v=io({},v,{[K.route.id]:F.error})),e.fetchers.delete(A)}else if(X_(F))Di(!1,"Unhandled fetcher revalidation redirect");else if(_y(F))Di(!1,"Unhandled fetcher deferred data");else{let K={state:"idle",data:F.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};e.fetchers.set(A,K)}}return{loaderData:d,errors:v}}function L5(e,t,r,n){let i=io({},t);for(let l of r){let a=l.route.id;if(t.hasOwnProperty(a)?t[a]!==void 0&&(i[a]=t[a]):e[a]!==void 0&&l.route.loader&&(i[a]=e[a]),n&&n.hasOwnProperty(a))break}return i}function F_(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function $5(e){let t=e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function lp(e,t){let{pathname:r,routeId:n,method:i,type:l}=t===void 0?{}:t,a="Unknown Server Error",s="Unknown @remix-run/router error";return e===400?(a="Bad Request",i&&r&&n?s="You made a "+i+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":l==="defer-action"&&(s="defer() is not supported in actions")):e===403?(a="Forbidden",s='Route "'+n+'" does not match URL "'+r+'"'):e===404?(a="Not Found",s='No route matches URL "'+r+'"'):e===405&&(a="Method Not Allowed",i&&r&&n?s="You made a "+i.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":i&&(s='Invalid request method "'+i.toUpperCase()+'"')),new rM(e||500,a,new Error(s),!0)}function N5(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(X_(r))return r}}function _F(e){let t=typeof e=="string"?Ah(e):e;return _p(io({},t,{hash:""}))}function zZ(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function _y(e){return e.type===Ul.deferred}function tx(e){return e.type===Ul.error}function X_(e){return(e&&e.type)===Ul.redirect}function LZ(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function $Z(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function NZ(e){return CZ.has(e.toLowerCase())}function Kd(e){return SZ.has(e.toLowerCase())}async function B5(e,t,r,n,i,l){for(let a=0;a<r.length;a++){let s=r[a],d=t[a];if(!d)continue;let v=e.find(A=>A.route.id===d.route.id),S=v!=null&&!yF(v,d)&&(l&&l[d.route.id])!==void 0;if(_y(s)&&(i||S)){let A=n[a];Di(A,"Expected an AbortSignal for revalidating fetcher deferred result"),await bF(s,A,i).then(P=>{P&&(r[a]=P||r[a])})}}}async function bF(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:Ul.data,data:e.deferredData.unwrappedData}}catch(i){return{type:Ul.error,error:i}}return{type:Ul.data,data:e.deferredData.data}}}function aM(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function F5(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],handle:r.handle}}function XA(e,t){let r=typeof t=="string"?Ah(t).search:t.search;if(e[e.length-1].route.index&&aM(r||""))return e[e.length-1];let n=Gx(e);return n[n.length-1]}/**
 * React Router v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sx(){return Sx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sx.apply(this,arguments)}const Hx=Fe.createContext(null),Wx=Fe.createContext(null),k2=Fe.createContext(null),ld=Fe.createContext(null),S0=Fe.createContext(null),Kc=Fe.createContext({outlet:null,matches:[],isDataRoute:!1}),xF=Fe.createContext(null);function wF(e,t){let{relative:r}=t===void 0?{}:t;Eg()||Di(!1);let{basename:n,navigator:i}=Fe.useContext(ld),{hash:l,pathname:a,search:s}=Zx(e,{relative:r}),d=a;return n!=="/"&&(d=a==="/"?n:td([n,a])),i.createHref({pathname:d,search:s,hash:l})}function Eg(){return Fe.useContext(S0)!=null}function bp(){return Eg()||Di(!1),Fe.useContext(S0).location}function BZ(){return Fe.useContext(S0).navigationType}function SF(e){Eg()||Di(!1);let{pathname:t}=bp();return Fe.useMemo(()=>tM(e,t),[t,e])}function EF(e){Fe.useContext(ld).static||Fe.useLayoutEffect(e)}function Yc(){let{isDataRoute:e}=Fe.useContext(Kc);return e?QZ():FZ()}function FZ(){Eg()||Di(!1);let{basename:e,navigator:t}=Fe.useContext(ld),{matches:r}=Fe.useContext(Kc),{pathname:n}=bp(),i=JSON.stringify(Gx(r).map(s=>s.pathnameBase)),l=Fe.useRef(!1);return EF(()=>{l.current=!0}),Fe.useCallback(function(s,d){if(d===void 0&&(d={}),!l.current)return;if(typeof s=="number"){t.go(s);return}let v=LS(s,JSON.parse(i),n,d.relative==="path");e!=="/"&&(v.pathname=v.pathname==="/"?e:td([e,v.pathname])),(d.replace?t.replace:t.push)(v,d.state,d)},[e,t,i,n])}const CF=Fe.createContext(null);function UZ(){return Fe.useContext(CF)}function PF(e){let t=Fe.useContext(Kc).outlet;return t&&Fe.createElement(CF.Provider,{value:e},t)}function rc(){let{matches:e}=Fe.useContext(Kc),t=e[e.length-1];return t?t.params:{}}function Zx(e,t){let{relative:r}=t===void 0?{}:t,{matches:n}=Fe.useContext(Kc),{pathname:i}=bp(),l=JSON.stringify(Gx(n).map(a=>a.pathnameBase));return Fe.useMemo(()=>LS(e,JSON.parse(l),i,r==="path"),[e,l,i,r])}function TF(e,t){return AF(e,t)}function AF(e,t,r){Eg()||Di(!1);let{navigator:n}=Fe.useContext(ld),{matches:i}=Fe.useContext(Kc),l=i[i.length-1],a=l?l.params:{};l&&l.pathname;let s=l?l.pathnameBase:"/";l&&l.route;let d=bp(),v;if(t){var S;let K=typeof t=="string"?Ah(t):t;s==="/"||(S=K.pathname)!=null&&S.startsWith(s)||Di(!1),v=K}else v=d;let A=v.pathname||"/",P=s==="/"?A:A.slice(s.length)||"/",L=vy(e,{pathname:P}),F=kF(L&&L.map(K=>Object.assign({},K,{params:Object.assign({},a,K.params),pathname:td([s,n.encodeLocation?n.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?s:td([s,n.encodeLocation?n.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),i,r);return t&&F?Fe.createElement(S0.Provider,{value:{location:Sx({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:fs.Pop}},F):F}function jZ(){let e=RF(),t=nM(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},l=null;return Fe.createElement(Fe.Fragment,null,Fe.createElement("h2",null,"Unexpected Application Error!"),Fe.createElement("h3",{style:{fontStyle:"italic"}},t),r?Fe.createElement("pre",{style:i},r):null,l)}const VZ=Fe.createElement(jZ,null);class qZ extends Fe.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error?Fe.createElement(Kc.Provider,{value:this.props.routeContext},Fe.createElement(xF.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GZ(e){let{routeContext:t,match:r,children:n}=e,i=Fe.useContext(Hx);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),Fe.createElement(Kc.Provider,{value:t},n)}function kF(e,t,r){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),e==null){var i;if((i=r)!=null&&i.errors)e=r.matches;else return null}let l=e,a=(n=r)==null?void 0:n.errors;if(a!=null){let s=l.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));s>=0||Di(!1),l=l.slice(0,Math.min(l.length,s+1))}return l.reduceRight((s,d,v)=>{let S=d.route.id?a==null?void 0:a[d.route.id]:null,A=null;r&&(A=d.route.errorElement||VZ);let P=t.concat(l.slice(0,v+1)),L=()=>{let F;return S?F=A:d.route.Component?F=Fe.createElement(d.route.Component,null):d.route.element?F=d.route.element:F=s,Fe.createElement(GZ,{match:d,routeContext:{outlet:s,matches:P,isDataRoute:r!=null},children:F})};return r&&(d.route.ErrorBoundary||d.route.errorElement||v===0)?Fe.createElement(qZ,{location:r.location,revalidation:r.revalidation,component:A,error:S,children:L(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):L()},null)}var Ex;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(Ex||(Ex={}));var Xc;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(Xc||(Xc={}));function oM(e){let t=Fe.useContext(Hx);return t||Di(!1),t}function Cg(e){let t=Fe.useContext(Wx);return t||Di(!1),t}function HZ(e){let t=Fe.useContext(Kc);return t||Di(!1),t}function $S(e){let t=HZ(),r=t.matches[t.matches.length-1];return r.route.id||Di(!1),r.route.id}function IF(){return $S(Xc.UseRouteId)}function MF(){return Cg(Xc.UseNavigation).navigation}function WZ(){let e=oM(Ex.UseRevalidator),t=Cg(Xc.UseRevalidator);return{revalidate:e.router.revalidate,state:t.revalidation}}function OF(){let{matches:e,loaderData:t}=Cg(Xc.UseMatches);return Fe.useMemo(()=>e.map(r=>{let{pathname:n,params:i}=r;return{id:r.route.id,pathname:n,params:i,data:t[r.route.id],handle:r.route.handle}}),[e,t])}function ZZ(){let e=Cg(Xc.UseLoaderData),t=$S(Xc.UseLoaderData);if(e.errors&&e.errors[t]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+t+")");return}return e.loaderData[t]}function XZ(e){return Cg(Xc.UseRouteLoaderData).loaderData[e]}function KZ(){let e=Cg(Xc.UseActionData);return Fe.useContext(Kc)||Di(!1),Object.values((e==null?void 0:e.actionData)||{})[0]}function RF(){var e;let t=Fe.useContext(xF),r=Cg(Xc.UseRouteError),n=$S(Xc.UseRouteError);return t||((e=r.errors)==null?void 0:e[n])}function DF(){let e=Fe.useContext(k2);return e==null?void 0:e._data}function YZ(){let e=Fe.useContext(k2);return e==null?void 0:e._error}let JZ=0;function zF(e){let{router:t}=oM(Ex.UseBlocker),r=Cg(Xc.UseBlocker),[n]=Fe.useState(()=>String(++JZ)),i=Fe.useCallback(a=>typeof e=="function"?!!e(a):!!e,[e]),l=t.getBlocker(n,i);return Fe.useEffect(()=>()=>t.deleteBlocker(n),[t,n]),r.blockers.get(n)||l}function QZ(){let{router:e}=oM(Ex.UseNavigateStable),t=$S(Xc.UseNavigateStable),r=Fe.useRef(!1);return EF(()=>{r.current=!0}),Fe.useCallback(function(i,l){l===void 0&&(l={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Sx({fromRouteId:t},l)))},[e,t])}function LF(e){let{fallbackElement:t,router:r}=e,[n,i]=Fe.useState(r.state);Fe.useLayoutEffect(()=>r.subscribe(i),[r,i]);let l=Fe.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:d=>r.navigate(d),push:(d,v,S)=>r.navigate(d,{state:v,preventScrollReset:S==null?void 0:S.preventScrollReset}),replace:(d,v,S)=>r.navigate(d,{replace:!0,state:v,preventScrollReset:S==null?void 0:S.preventScrollReset})}),[r]),a=r.basename||"/",s=Fe.useMemo(()=>({router:r,navigator:l,static:!1,basename:a}),[r,l,a]);return Fe.createElement(Fe.Fragment,null,Fe.createElement(Hx.Provider,{value:s},Fe.createElement(Wx.Provider,{value:n},Fe.createElement(E0,{basename:r.basename,location:r.state.location,navigationType:r.state.historyAction,navigator:l},r.state.initialized?Fe.createElement(eX,{routes:r.routes,state:n}):t))),null)}function eX(e){let{routes:t,state:r}=e;return AF(t,void 0,r)}function tX(e){let{basename:t,children:r,initialEntries:n,initialIndex:i}=e,l=Fe.useRef();l.current==null&&(l.current=oF({initialEntries:n,initialIndex:i,v5Compat:!0}));let a=l.current,[s,d]=Fe.useState({action:a.action,location:a.location});return Fe.useLayoutEffect(()=>a.listen(d),[a]),Fe.createElement(E0,{basename:t,children:r,location:s.location,navigationType:s.action,navigator:a})}function rX(e){let{to:t,replace:r,state:n,relative:i}=e;Eg()||Di(!1);let{matches:l}=Fe.useContext(Kc),{pathname:a}=bp(),s=Yc(),d=LS(t,Gx(l).map(S=>S.pathnameBase),a,i==="path"),v=JSON.stringify(d);return Fe.useEffect(()=>s(JSON.parse(v),{replace:r,state:n,relative:i}),[s,v,i,r,n]),null}function nX(e){return PF(e.context)}function $F(e){Di(!1)}function E0(e){let{basename:t="/",children:r=null,location:n,navigationType:i=fs.Pop,navigator:l,static:a=!1}=e;Eg()&&Di(!1);let s=t.replace(/^\/*/,"/"),d=Fe.useMemo(()=>({basename:s,navigator:l,static:a}),[s,l,a]);typeof n=="string"&&(n=Ah(n));let{pathname:v="/",search:S="",hash:A="",state:P=null,key:L="default"}=n,F=Fe.useMemo(()=>{let K=mg(v,s);return K==null?null:{location:{pathname:K,search:S,hash:A,state:P,key:L},navigationType:i}},[s,v,S,A,P,L,i]);return F==null?null:Fe.createElement(ld.Provider,{value:d},Fe.createElement(S0.Provider,{children:r,value:F}))}function iX(e){let{children:t,location:r}=e;return TF(Cx(t),r)}function aX(e){let{children:t,errorElement:r,resolve:n}=e;return Fe.createElement(sX,{resolve:n,errorElement:r},Fe.createElement(lX,null,t))}var Cf;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(Cf||(Cf={}));const oX=new Promise(()=>{});class sX extends Fe.Component{constructor(t){super(t),this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,r){console.error("<Await> caught the following error during render",t,r)}render(){let{children:t,errorElement:r,resolve:n}=this.props,i=null,l=Cf.pending;if(!(n instanceof Promise))l=Cf.success,i=Promise.resolve(),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_data",{get:()=>n});else if(this.state.error){l=Cf.error;let a=this.state.error;i=Promise.reject().catch(()=>{}),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_error",{get:()=>a})}else n._tracked?(i=n,l=i._error!==void 0?Cf.error:i._data!==void 0?Cf.success:Cf.pending):(l=Cf.pending,Object.defineProperty(n,"_tracked",{get:()=>!0}),i=n.then(a=>Object.defineProperty(n,"_data",{get:()=>a}),a=>Object.defineProperty(n,"_error",{get:()=>a})));if(l===Cf.error&&i._error instanceof A2)throw oX;if(l===Cf.error&&!r)throw i._error;if(l===Cf.error)return Fe.createElement(k2.Provider,{value:i,children:r});if(l===Cf.success)return Fe.createElement(k2.Provider,{value:i,children:t});throw i}}function lX(e){let{children:t}=e,r=DF(),n=typeof t=="function"?t(r):t;return Fe.createElement(Fe.Fragment,null,n)}function Cx(e,t){t===void 0&&(t=[]);let r=[];return Fe.Children.forEach(e,(n,i)=>{if(!Fe.isValidElement(n))return;let l=[...t,i];if(n.type===Fe.Fragment){r.push.apply(r,Cx(n.props.children,l));return}n.type!==$F&&Di(!1),!n.props.index||!n.props.children||Di(!1);let a={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Cx(n.props.children,l)),r.push(a)}),r}function uX(e){return kF(e)}function sM(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:Fe.createElement(e.Component),Component:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:Fe.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}function cX(e,t){return iM({basename:t==null?void 0:t.basename,future:Sx({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:oF({initialEntries:t==null?void 0:t.initialEntries,initialIndex:t==null?void 0:t.initialIndex}),hydrationData:t==null?void 0:t.hydrationData,routes:e,mapRouteProperties:sM}).initialize()}/**
 * React Router DOM v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rf(){return Rf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rf.apply(this,arguments)}function lM(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,l;for(l=0;l<n.length;l++)i=n[l],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}const Vw="get",cP="application/x-www-form-urlencoded";function NS(e){return e!=null&&typeof e.tagName=="string"}function fX(e){return NS(e)&&e.tagName.toLowerCase()==="button"}function hX(e){return NS(e)&&e.tagName.toLowerCase()==="form"}function pX(e){return NS(e)&&e.tagName.toLowerCase()==="input"}function dX(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function mX(e,t){return e.button===0&&(!t||t==="_self")&&!dX(e)}function I2(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function gX(e,t){let r=I2(e);if(t)for(let n of t.keys())r.has(n)||t.getAll(n).forEach(i=>{r.append(n,i)});return r}function yX(e,t,r){let n,i=null,l,a;if(hX(e)){let s=t.submissionTrigger;if(t.action)i=t.action;else{let d=e.getAttribute("action");i=d?mg(d,r):null}n=t.method||e.getAttribute("method")||Vw,l=t.encType||e.getAttribute("enctype")||cP,a=new FormData(e),s&&s.name&&a.append(s.name,s.value)}else if(fX(e)||pX(e)&&(e.type==="submit"||e.type==="image")){let s=e.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');if(t.action)i=t.action;else{let d=e.getAttribute("formaction")||s.getAttribute("action");i=d?mg(d,r):null}n=t.method||e.getAttribute("formmethod")||s.getAttribute("method")||Vw,l=t.encType||e.getAttribute("formenctype")||s.getAttribute("enctype")||cP,a=new FormData(s),e.name&&a.append(e.name,e.value)}else{if(NS(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');if(n=t.method||Vw,i=t.action||null,l=t.encType||cP,e instanceof FormData)a=e;else if(a=new FormData,e instanceof URLSearchParams)for(let[s,d]of e)a.append(s,d);else if(e!=null)for(let s of Object.keys(e))a.append(s,e[s])}return{action:i,method:n.toLowerCase(),encType:l,formData:a}}const vX=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],_X=["aria-current","caseSensitive","className","end","style","to","children"],bX=["reloadDocument","replace","method","action","onSubmit","fetcherKey","routeId","relative","preventScrollReset"];function NF(e,t){return iM({basename:t==null?void 0:t.basename,future:Rf({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:sF({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||BF(),routes:e,mapRouteProperties:sM}).initialize()}function xX(e,t){return iM({basename:t==null?void 0:t.basename,future:Rf({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:lF({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||BF(),routes:e,mapRouteProperties:sM}).initialize()}function BF(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Rf({},t,{errors:wX(t.errors)})),t}function wX(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&i.__type==="RouteErrorResponse")r[n]=new rM(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){let l=new Error(i.message);l.stack="",r[n]=l}else r[n]=i;return r}function SX(e){let{basename:t,children:r,window:n}=e,i=Fe.useRef();i.current==null&&(i.current=sF({window:n,v5Compat:!0}));let l=i.current,[a,s]=Fe.useState({action:l.action,location:l.location});return Fe.useLayoutEffect(()=>l.listen(s),[l]),Fe.createElement(E0,{basename:t,children:r,location:a.location,navigationType:a.action,navigator:l})}function EX(e){let{basename:t,children:r,window:n}=e,i=Fe.useRef();i.current==null&&(i.current=lF({window:n,v5Compat:!0}));let l=i.current,[a,s]=Fe.useState({action:l.action,location:l.location});return Fe.useLayoutEffect(()=>l.listen(s),[l]),Fe.createElement(E0,{basename:t,children:r,location:a.location,navigationType:a.action,navigator:l})}function CX(e){let{basename:t,children:r,history:n}=e;const[i,l]=Fe.useState({action:n.action,location:n.location});return Fe.useLayoutEffect(()=>n.listen(l),[n]),Fe.createElement(E0,{basename:t,children:r,location:i.location,navigationType:i.action,navigator:n})}const PX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,po=Fe.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:l,replace:a,state:s,target:d,to:v,preventScrollReset:S}=t,A=lM(t,vX),{basename:P}=Fe.useContext(ld),L,F=!1;if(typeof v=="string"&&TX.test(v)&&(L=v,PX))try{let H=new URL(window.location.href),B=v.startsWith("//")?new URL(H.protocol+v):new URL(v),$=mg(B.pathname,P);B.origin===H.origin&&$!=null?v=$+B.search+B.hash:F=!0}catch{}let K=wF(v,{relative:i}),re=jF(v,{replace:a,state:s,target:d,preventScrollReset:S,relative:i});function G(H){n&&n(H),H.defaultPrevented||re(H)}return Fe.createElement("a",Rf({},A,{href:L||K,onClick:F||l?n:G,ref:r,target:d}))}),AX=Fe.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:i=!1,className:l="",end:a=!1,style:s,to:d,children:v}=t,S=lM(t,_X),A=Zx(d,{relative:S.relative}),P=bp(),L=Fe.useContext(Wx),{navigator:F}=Fe.useContext(ld),K=F.encodeLocation?F.encodeLocation(A).pathname:A.pathname,re=P.pathname,G=L&&L.navigation&&L.navigation.location?L.navigation.location.pathname:null;i||(re=re.toLowerCase(),G=G?G.toLowerCase():null,K=K.toLowerCase());let H=re===K||!a&&re.startsWith(K)&&re.charAt(K.length)==="/",B=G!=null&&(G===K||!a&&G.startsWith(K)&&G.charAt(K.length)==="/"),$=H?n:void 0,N;typeof l=="function"?N=l({isActive:H,isPending:B}):N=[l,H?"active":null,B?"pending":null].filter(Boolean).join(" ");let z=typeof s=="function"?s({isActive:H,isPending:B}):s;return Fe.createElement(po,Rf({},S,{"aria-current":$,className:N,ref:r,style:z,to:d}),typeof v=="function"?v({isActive:H,isPending:B}):v)}),kX=Fe.forwardRef((e,t)=>Fe.createElement(FF,Rf({},e,{ref:t}))),FF=Fe.forwardRef((e,t)=>{let{reloadDocument:r,replace:n,method:i=Vw,action:l,onSubmit:a,fetcherKey:s,routeId:d,relative:v,preventScrollReset:S}=e,A=lM(e,bX),P=cM(s,d),L=i.toLowerCase()==="get"?"get":"post",F=VF(l,{relative:v}),K=re=>{if(a&&a(re),re.defaultPrevented)return;re.preventDefault();let G=re.nativeEvent.submitter,H=(G==null?void 0:G.getAttribute("formmethod"))||i;P(G||re.currentTarget,{method:H,replace:n,relative:v,preventScrollReset:S})};return Fe.createElement("form",Rf({ref:t,method:L,action:F,onSubmit:r?a:K},A))});function IX(e){let{getKey:t,storageKey:r}=e;return qF({getKey:t,storageKey:r}),null}var Px;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Px||(Px={}));var M2;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(M2||(M2={}));function uM(e){let t=Fe.useContext(Hx);return t||Di(!1),t}function UF(e){let t=Fe.useContext(Wx);return t||Di(!1),t}function jF(e,t){let{target:r,replace:n,state:i,preventScrollReset:l,relative:a}=t===void 0?{}:t,s=Yc(),d=bp(),v=Zx(e,{relative:a});return Fe.useCallback(S=>{if(mX(S,r)){S.preventDefault();let A=n!==void 0?n:_p(d)===_p(v);s(e,{replace:A,state:i,preventScrollReset:l,relative:a})}},[d,s,v,n,i,r,e,l,a])}function MX(e){let t=Fe.useRef(I2(e)),r=Fe.useRef(!1),n=bp(),i=Fe.useMemo(()=>gX(n.search,r.current?null:t.current),[n.search]),l=Yc(),a=Fe.useCallback((s,d)=>{const v=I2(typeof s=="function"?s(i):s);r.current=!0,l("?"+v,d)},[l,i]);return[i,a]}function OX(){return cM()}function cM(e,t){let{router:r}=uM(Px.UseSubmitImpl),{basename:n}=Fe.useContext(ld),i=IF();return Fe.useCallback(function(l,a){if(a===void 0&&(a={}),typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.");let{action:s,method:d,encType:v,formData:S}=yX(l,a,n),A={preventScrollReset:a.preventScrollReset,formData:S,formMethod:d,formEncType:v};e?(t==null&&Di(!1),r.fetch(e,t,s,A)):r.navigate(s,Rf({},A,{replace:a.replace,fromRouteId:i}))},[r,n,e,t,i])}function VF(e,t){let{relative:r}=t===void 0?{}:t,{basename:n}=Fe.useContext(ld),i=Fe.useContext(Kc);i||Di(!1);let[l]=i.matches.slice(-1),a=Rf({},Zx(e||".",{relative:r})),s=bp();if(e==null&&(a.search=s.search,a.hash=s.hash,l.route.index)){let d=new URLSearchParams(a.search);d.delete("index"),a.search=d.toString()?"?"+d.toString():""}return(!e||e===".")&&l.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:td([n,a.pathname])),_p(a)}function RX(e,t){return Fe.forwardRef((n,i)=>Fe.createElement(FF,Rf({},n,{ref:i,fetcherKey:e,routeId:t})))}let DX=0;function zX(){var e;let{router:t}=uM(Px.UseFetcher),r=Fe.useContext(Kc);r||Di(!1);let n=(e=r.matches[r.matches.length-1])==null?void 0:e.route.id;n==null&&Di(!1);let[i]=Fe.useState(()=>String(++DX)),[l]=Fe.useState(()=>(n||Di(!1),RX(i,n))),[a]=Fe.useState(()=>S=>{t||Di(!1),n||Di(!1),t.fetch(i,n,S)}),s=cM(i,n),d=t.getFetcher(i),v=Fe.useMemo(()=>Rf({Form:l,submit:s,load:a},d),[d,l,s,a]);return Fe.useEffect(()=>()=>{if(!t){console.warn("No router available to clean up from useFetcher()");return}t.deleteFetcher(i)},[t,i]),v}function LX(){return[...UF(M2.UseFetchers).fetchers.values()]}const U5="react-router-scroll-positions";let uw={};function qF(e){let{getKey:t,storageKey:r}=e===void 0?{}:e,{router:n}=uM(Px.UseScrollRestoration),{restoreScrollPosition:i,preventScrollReset:l}=UF(M2.UseScrollRestoration),a=bp(),s=OF(),d=MF();Fe.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),NX(Fe.useCallback(()=>{if(d.state==="idle"){let v=(t?t(a,s):null)||a.key;uw[v]=window.scrollY}sessionStorage.setItem(r||U5,JSON.stringify(uw)),window.history.scrollRestoration="auto"},[r,t,d.state,a,s])),typeof document<"u"&&(Fe.useLayoutEffect(()=>{try{let v=sessionStorage.getItem(r||U5);v&&(uw=JSON.parse(v))}catch{}},[r]),Fe.useLayoutEffect(()=>{let v=n==null?void 0:n.enableScrollRestoration(uw,()=>window.scrollY,t);return()=>v&&v()},[n,t]),Fe.useLayoutEffect(()=>{if(i!==!1){if(typeof i=="number"){window.scrollTo(0,i);return}if(a.hash){let v=document.getElementById(a.hash.slice(1));if(v){v.scrollIntoView();return}}l!==!0&&window.scrollTo(0,0)}},[a,i,l]))}function $X(e,t){let{capture:r}=t||{};Fe.useEffect(()=>{let n=r!=null?{capture:r}:void 0;return window.addEventListener("beforeunload",e,n),()=>{window.removeEventListener("beforeunload",e,n)}},[e,r])}function NX(e,t){let{capture:r}=t||{};Fe.useEffect(()=>{let n=r!=null?{capture:r}:void 0;return window.addEventListener("pagehide",e,n),()=>{window.removeEventListener("pagehide",e,n)}},[e,r])}function BX(e){let{when:t,message:r}=e,n=zF(t);Fe.useEffect(()=>{n.state==="blocked"&&!t&&n.reset()},[n,t]),Fe.useEffect(()=>{n.state==="blocked"&&(window.confirm(r)?setTimeout(n.proceed,0):n.reset())},[n,r])}const FX=Object.freeze(Object.defineProperty({__proto__:null,AbortedDeferredError:A2,Await:aX,BrowserRouter:SX,Form:kX,HashRouter:EX,Link:po,MemoryRouter:tX,NavLink:AX,Navigate:rX,get NavigationType(){return fs},Outlet:nX,Route:$F,Router:E0,RouterProvider:LF,Routes:iX,ScrollRestoration:IX,UNSAFE_DataRouterContext:Hx,UNSAFE_DataRouterStateContext:Wx,UNSAFE_LocationContext:S0,UNSAFE_NavigationContext:ld,UNSAFE_RouteContext:Kc,UNSAFE_useRouteId:IF,UNSAFE_useScrollRestoration:qF,createBrowserRouter:NF,createHashRouter:xX,createMemoryRouter:cX,createPath:_p,createRoutesFromChildren:Cx,createRoutesFromElements:Cx,createSearchParams:I2,defer:xZ,generatePath:uZ,isRouteErrorResponse:nM,json:yZ,matchPath:tM,matchRoutes:vy,parsePath:Ah,redirect:wZ,renderMatches:uX,resolvePath:pF,unstable_HistoryRouter:CX,unstable_useBlocker:zF,unstable_usePrompt:BX,useActionData:KZ,useAsyncError:YZ,useAsyncValue:DF,useBeforeUnload:$X,useFetcher:zX,useFetchers:LX,useFormAction:VF,useHref:wF,useInRouterContext:Eg,useLinkClickHandler:jF,useLoaderData:ZZ,useLocation:bp,useMatch:SF,useMatches:OF,useNavigate:Yc,useNavigation:MF,useNavigationType:BZ,useOutlet:PF,useOutletContext:UZ,useParams:rc,useResolvedPath:Zx,useRevalidator:WZ,useRouteError:RF,useRouteLoaderData:XZ,useRoutes:TF,useSearchParams:MX,useSubmit:OX},Symbol.toStringTag,{value:"Module"}));var fP={},hP={};const Jc=Vy(FX);var pP={},dP={},GF={},fM={},UX=Array.isArray,Bf=UX,jX=typeof{}=="object"&&{}&&{}.Object===Object&&{},HF=jX,VX=HF,qX=typeof self=="object"&&self&&self.Object===Object&&self,GX=VX||qX||Function("return this")(),xp=GX,HX=xp,WX=HX.Symbol,Xx=WX,j5=Xx,WF=Object.prototype,ZX=WF.hasOwnProperty,XX=WF.toString,Sb=j5?j5.toStringTag:void 0;function KX(e){var t=ZX.call(e,Sb),r=e[Sb];try{e[Sb]=void 0;var n=!0}catch{}var i=XX.call(e);return n&&(t?e[Sb]=r:delete e[Sb]),i}var YX=KX,JX=Object.prototype,QX=JX.toString;function eK(e){return QX.call(e)}var tK=eK,V5=Xx,rK=YX,nK=tK,iK="[object Null]",aK="[object Undefined]",q5=V5?V5.toStringTag:void 0;function oK(e){return e==null?e===void 0?aK:iK:q5&&q5 in Object(e)?rK(e):nK(e)}var Hy=oK;function sK(e){return e!=null&&typeof e=="object"}var ud=sK,lK=Hy,uK=ud,cK="[object Symbol]";function fK(e){return typeof e=="symbol"||uK(e)&&lK(e)==cK}var BS=fK,hK=Bf,pK=BS,dK=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mK=/^\w*$/;function gK(e,t){if(hK(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||pK(e)?!0:mK.test(e)||!dK.test(e)||t!=null&&e in Object(t)}var hM=gK;function yK(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var kh=yK,vK=Hy,_K=kh,bK="[object AsyncFunction]",xK="[object Function]",wK="[object GeneratorFunction]",SK="[object Proxy]";function EK(e){if(!_K(e))return!1;var t=vK(e);return t==xK||t==wK||t==bK||t==SK}var pM=EK,CK=xp,PK=CK["__core-js_shared__"],TK=PK,mP=TK,G5=function(){var e=/[^.]+$/.exec(mP&&mP.keys&&mP.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function AK(e){return!!G5&&G5 in e}var kK=AK,IK=Function.prototype,MK=IK.toString;function OK(e){if(e!=null){try{return MK.call(e)}catch{}try{return e+""}catch{}}return""}var ZF=OK,RK=pM,DK=kK,zK=kh,LK=ZF,$K=/[\\^$.*+?()[\]{}|]/g,NK=/^\[object .+?Constructor\]$/,BK=Function.prototype,FK=Object.prototype,UK=BK.toString,jK=FK.hasOwnProperty,VK=RegExp("^"+UK.call(jK).replace($K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qK(e){if(!zK(e)||DK(e))return!1;var t=RK(e)?VK:NK;return t.test(LK(e))}var GK=qK;function HK(e,t){return e==null?void 0:e[t]}var WK=HK,ZK=GK,XK=WK;function KK(e,t){var r=XK(e,t);return ZK(r)?r:void 0}var Wy=KK,YK=Wy,JK=YK(Object,"create"),FS=JK,H5=FS;function QK(){this.__data__=H5?H5(null):{},this.size=0}var eY=QK;function tY(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var rY=tY,nY=FS,iY="__lodash_hash_undefined__",aY=Object.prototype,oY=aY.hasOwnProperty;function sY(e){var t=this.__data__;if(nY){var r=t[e];return r===iY?void 0:r}return oY.call(t,e)?t[e]:void 0}var lY=sY,uY=FS,cY=Object.prototype,fY=cY.hasOwnProperty;function hY(e){var t=this.__data__;return uY?t[e]!==void 0:fY.call(t,e)}var pY=hY,dY=FS,mY="__lodash_hash_undefined__";function gY(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=dY&&t===void 0?mY:t,this}var yY=gY,vY=eY,_Y=rY,bY=lY,xY=pY,wY=yY;function C0(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}C0.prototype.clear=vY;C0.prototype.delete=_Y;C0.prototype.get=bY;C0.prototype.has=xY;C0.prototype.set=wY;var SY=C0;function EY(){this.__data__=[],this.size=0}var CY=EY;function PY(e,t){return e===t||e!==e&&t!==t}var Kx=PY,TY=Kx;function AY(e,t){for(var r=e.length;r--;)if(TY(e[r][0],t))return r;return-1}var US=AY,kY=US,IY=Array.prototype,MY=IY.splice;function OY(e){var t=this.__data__,r=kY(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():MY.call(t,r,1),--this.size,!0}var RY=OY,DY=US;function zY(e){var t=this.__data__,r=DY(t,e);return r<0?void 0:t[r][1]}var LY=zY,$Y=US;function NY(e){return $Y(this.__data__,e)>-1}var BY=NY,FY=US;function UY(e,t){var r=this.__data__,n=FY(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var jY=UY,VY=CY,qY=RY,GY=LY,HY=BY,WY=jY;function P0(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}P0.prototype.clear=VY;P0.prototype.delete=qY;P0.prototype.get=GY;P0.prototype.has=HY;P0.prototype.set=WY;var jS=P0,ZY=Wy,XY=xp,KY=ZY(XY,"Map"),dM=KY,W5=SY,YY=jS,JY=dM;function QY(){this.size=0,this.__data__={hash:new W5,map:new(JY||YY),string:new W5}}var eJ=QY;function tJ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var rJ=tJ,nJ=rJ;function iJ(e,t){var r=e.__data__;return nJ(t)?r[typeof t=="string"?"string":"hash"]:r.map}var VS=iJ,aJ=VS;function oJ(e){var t=aJ(this,e).delete(e);return this.size-=t?1:0,t}var sJ=oJ,lJ=VS;function uJ(e){return lJ(this,e).get(e)}var cJ=uJ,fJ=VS;function hJ(e){return fJ(this,e).has(e)}var pJ=hJ,dJ=VS;function mJ(e,t){var r=dJ(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var gJ=mJ,yJ=eJ,vJ=sJ,_J=cJ,bJ=pJ,xJ=gJ;function T0(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}T0.prototype.clear=yJ;T0.prototype.delete=vJ;T0.prototype.get=_J;T0.prototype.has=bJ;T0.prototype.set=xJ;var mM=T0,XF=mM,wJ="Expected a function";function gM(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(wJ);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],l=r.cache;if(l.has(i))return l.get(i);var a=e.apply(this,n);return r.cache=l.set(i,a)||l,a};return r.cache=new(gM.Cache||XF),r}gM.Cache=XF;var SJ=gM,EJ=SJ,CJ=500;function PJ(e){var t=EJ(e,function(n){return r.size===CJ&&r.clear(),n}),r=t.cache;return t}var TJ=PJ,AJ=TJ,kJ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,IJ=/\\(\\)?/g,MJ=AJ(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(kJ,function(r,n,i,l){t.push(i?l.replace(IJ,"$1"):n||r)}),t}),OJ=MJ;function RJ(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var KF=RJ,Z5=Xx,DJ=KF,zJ=Bf,LJ=BS,$J=1/0,X5=Z5?Z5.prototype:void 0,K5=X5?X5.toString:void 0;function YF(e){if(typeof e=="string")return e;if(zJ(e))return DJ(e,YF)+"";if(LJ(e))return K5?K5.call(e):"";var t=e+"";return t=="0"&&1/e==-$J?"-0":t}var NJ=YF,BJ=NJ;function FJ(e){return e==null?"":BJ(e)}var UJ=FJ,jJ=Bf,VJ=hM,qJ=OJ,GJ=UJ;function HJ(e,t){return jJ(e)?e:VJ(e,t)?[e]:qJ(GJ(e))}var JF=HJ,WJ=BS,ZJ=1/0;function XJ(e){if(typeof e=="string"||WJ(e))return e;var t=e+"";return t=="0"&&1/e==-ZJ?"-0":t}var qS=XJ,KJ=JF,YJ=qS;function JJ(e,t){t=KJ(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[YJ(t[r++])];return r&&r==n?e:void 0}var QF=JJ,QJ=QF;function eQ(e,t,r){var n=e==null?void 0:QJ(e,t);return n===void 0?r:n}var Zy=eQ;const Qt=Xs(Zy);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(Fe),r=Jc,n=i(Zy);function i(N){return N&&N.__esModule?N:{default:N}}function l(N){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},l(N)}function a(){return a=Object.assign?Object.assign.bind():function(N){for(var z=1;z<arguments.length;z++){var X=arguments[z];for(var te in X)Object.prototype.hasOwnProperty.call(X,te)&&(N[te]=X[te])}return N},a.apply(this,arguments)}function s(N,z){if(!(N instanceof z))throw new TypeError("Cannot call a class as a function")}function d(N,z){for(var X=0;X<z.length;X++){var te=z[X];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(N,H(te.key),te)}}function v(N,z,X){return z&&d(N.prototype,z),X&&d(N,X),Object.defineProperty(N,"prototype",{writable:!1}),N}function S(N,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=Object.create(z&&z.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),Object.defineProperty(N,"prototype",{writable:!1}),z&&A(N,z)}function A(N,z){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(te,pe){return te.__proto__=pe,te},A(N,z)}function P(N){var z=K();return function(){var te=re(N),pe;if(z){var ke=re(this).constructor;pe=Reflect.construct(te,arguments,ke)}else pe=te.apply(this,arguments);return L(this,pe)}}function L(N,z){if(z&&(l(z)==="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F(N)}function F(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function K(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function re(N){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(X){return X.__proto__||Object.getPrototypeOf(X)},re(N)}function G(N,z,X){return z=H(z),z in N?Object.defineProperty(N,z,{value:X,enumerable:!0,configurable:!0,writable:!0}):N[z]=X,N}function H(N){var z=B(N,"string");return l(z)==="symbol"?z:String(z)}function B(N,z){if(l(N)!=="object"||N===null)return N;var X=N[Symbol.toPrimitive];if(X!==void 0){var te=X.call(N,z||"default");if(l(te)!=="object")return te;throw new TypeError("@@toPrimitive must return a primitive value.")}return(z==="string"?String:Number)(N)}var $=function(z){var X;return X=function(te){S(ke,te);var pe=P(ke);function ke(){var Pe;s(this,ke);for(var ge=arguments.length,Ie=new Array(ge),Ne=0;Ne<ge;Ne++)Ie[Ne]=arguments[Ne];return Pe=pe.call.apply(pe,[this].concat(Ie)),G(F(Pe),"state",{email:"",password:""}),Pe}return v(ke,[{key:"handleSubmit",value:function(ge){ge.preventDefault(),this.props.login(this.state.email,this.state.password)}},{key:"render",value:function(){var ge=this,Ie=this.state,Ne=Ie.email,lt=Ie.password,it=Ne&&lt,Rt=this.props,St=Rt.location,Zt=Rt.user,Kt=Rt.redirectTo,Ge=St.pathname;if(Zt.authed){var Ye=(0,n.default)(St,["state","from"]),Dr=Ge===Ye||!Ye?Kt:Ye;return t.default.createElement(r.Navigate,{to:Dr})}return t.default.createElement(z,a({},this.props,this.state,{handleSubmit:function(tr){return ge.handleSubmit(tr)},update:function(tr){return ge.setState(tr)},canSubmit:it}))}}]),ke}(t.default.Component),G(X,"defaultProps",{amsAction:"login",redirectTo:"/",showIfLoggedIn:!1}),X};e.default=$})(fM);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(Fe),r=Jc,n=i(fM);function i(a){return a&&a.__esModule?a:{default:a}}var l=(0,n.default)(function(a){var s=a.email,d=a.password,v=a.update;a.canSubmit;var S=a.handleSubmit,A=a.title,P=A===void 0?"":A;return t.default.createElement("div",{className:"h-full bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8 "},t.default.createElement("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},t.default.createElement("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-md sm:px-10"},t.default.createElement("div",{className:"sm:mx-auto sm:w-full sm:max-w-md border-b border-gray-200"},t.default.createElement("h2",{className:"text-xl font-medium text-gray-900"},P),t.default.createElement("p",{className:"text-lg font-thin text-gray-600"},t.default.createElement("span",{href:"#",className:"font-thin text-blue-400 hover:text-blue-500"},"Login"))),t.default.createElement("form",{className:"space-y-6",onSubmit:S},t.default.createElement("div",{className:"pt-4"},t.default.createElement("label",{htmlFor:"email",className:"block text-sm font-thin text-gray-700"},"Email"),t.default.createElement("div",{className:"mt-1"},t.default.createElement("input",{id:"email",name:"email",type:"email",value:s,onChange:function(F){return v({email:F.target.value})},autoComplete:"email",placeholder:"Enter your email",required:!0,autoFocus:!0,className:"appearance-none block w-full px-3 py-2 border-b border-gray-300 shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}))),t.default.createElement("div",null,t.default.createElement("label",{htmlFor:"password",className:"block text-sm font-thin text-gray-700"},"Password"),t.default.createElement("div",{className:"mt-1"},t.default.createElement("input",{id:"password",name:"password",type:"password",value:d,onChange:function(F){return v({password:F.target.value})},autoComplete:"current-password",placeholder:"Enter your password",required:!0,className:"appearance-none block w-full px-3 py-2 border-b border-gray-300 shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}))),t.default.createElement("div",null,t.default.createElement("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},"Sign in")))),t.default.createElement("div",{className:"flex items-center justify-between px-2 py-4"},t.default.createElement("div",{className:"text-xs"},"Need an account?  ",t.default.createElement(r.Link,{to:"/auth/register",className:"font-medium text-blue-600 hover:text-blue-500"},"Register")),t.default.createElement("div",{className:"text-xs"},t.default.createElement(r.Link,{to:"/auth/reset-password",className:"font-medium text-blue-600 hover:text-blue-500"},"Forgot your password?")))))});e.default=l})(GF);var e8={},yM={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(Fe);function r(H){return H&&H.__esModule?H:{default:H}}function n(H){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},n(H)}function i(H,B){if(!(H instanceof B))throw new TypeError("Cannot call a class as a function")}function l(H,B){for(var $=0;$<B.length;$++){var N=B[$];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(H,K(N.key),N)}}function a(H,B,$){return B&&l(H.prototype,B),$&&l(H,$),Object.defineProperty(H,"prototype",{writable:!1}),H}function s(H,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(B&&B.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),Object.defineProperty(H,"prototype",{writable:!1}),B&&d(H,B)}function d(H,B){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(N,z){return N.__proto__=z,N},d(H,B)}function v(H){var B=P();return function(){var N=L(H),z;if(B){var X=L(this).constructor;z=Reflect.construct(N,arguments,X)}else z=N.apply(this,arguments);return S(this,z)}}function S(H,B){if(B&&(n(B)==="object"||typeof B=="function"))return B;if(B!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A(H)}function A(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L(H){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($){return $.__proto__||Object.getPrototypeOf($)},L(H)}function F(H,B,$){return B=K(B),B in H?Object.defineProperty(H,B,{value:$,enumerable:!0,configurable:!0,writable:!0}):H[B]=$,H}function K(H){var B=re(H,"string");return n(B)==="symbol"?B:String(B)}function re(H,B){if(n(H)!=="object"||H===null)return H;var $=H[Symbol.toPrimitive];if($!==void 0){var N=$.call(H,B||"default");if(n(N)!=="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(B==="string"?String:Number)(H)}var G=function(B){var $;return $=function(N){s(X,N);var z=v(X);function X(){return i(this,X),z.apply(this,arguments)}return a(X,[{key:"render",value:function(){return console.log("LogoutWrapper",this.props),t.default.createElement(B,this.props)}}]),X}(t.default.Component),F($,"defaultProps",{amsAction:"logout",redirectTo:"/",authLevel:0}),$};e.default=G})(yM);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(Fe),r=Jc,n=i(yM);function i(a){return a&&a.__esModule?a:{default:a}}var l=(0,n.default)(function(a){var s=a.logout,d=a.redirectTo,v=d===void 0?"/":d;return t.default.useEffect(function(){s(),console.log("then")},[s]),t.default.createElement(r.Navigate,{to:v})});e.default=l})(e8);var t8={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(Fe);function r(l){return l&&l.__esModule?l:{default:l}}var n=function(a){var s=a.children,d=a.className,v=d===void 0?"mt-16":d;return t.default.createElement("div",{className:v},t.default.createElement("div",{className:"py-20"},s))},i={type:n,props:{amsAction:"project-management",authLevel:5},wrappers:["ams-project-management"],children:[{type:"ams-requests"},{type:"ams-send-invite"},{type:"ams-user-search"},{type:"ams-assign-to-project"},{type:"ams-create-group"},{type:"ams-groups-in-project"}]};e.default=i})(t8);var r8={},wp={},vM={},_M={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;function t(){return{landing:{wrapper:"p-4 border-2 border-blue-300"},table:{table:"min-w-full divide-y divide-gray-300",thead:"",th:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900",tbody:"divide-y divide-gray-200 ",td:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},textarea:{viewWrapper:"overflow-hidden p-2 bg-gray-100 border-b-2"},card:{wrapper:"p-4",row:"flex py-1",rowLabel:"px-4 w-28 text-sm",rowContent:"flex-1"}}}var r=t();e.default=r})(_M);(function(e){function t(S){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},t(S)}Object.defineProperty(e,"__esModule",{value:!0}),e.useTheme=e.default=void 0;var r=a(Fe),n=i(_M);function i(S){return S&&S.__esModule?S:{default:S}}function l(S){if(typeof WeakMap!="function")return null;var A=new WeakMap,P=new WeakMap;return(l=function(F){return F?P:A})(S)}function a(S,A){if(!A&&S&&S.__esModule)return S;if(S===null||t(S)!=="object"&&typeof S!="function")return{default:S};var P=l(A);if(P&&P.has(S))return P.get(S);var L={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in S)if(K!=="default"&&Object.prototype.hasOwnProperty.call(S,K)){var re=F?Object.getOwnPropertyDescriptor(S,K):null;re&&(re.get||re.set)?Object.defineProperty(L,K,re):L[K]=S[K]}return L.default=S,P&&P.set(S,L),L}var s=r.default.createContext(n.default),d=function(){return(0,r.useContext)(s)};e.useTheme=d;var v=s;e.default=v})(vM);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe),r=vM;function n(l){return l&&l.__esModule?l:{default:l}}var i=function(a){var s=a.Title,d=a.children,v=a.className,S=v===void 0?"":v;return(0,r.useTheme)(),t.default.createElement("div",{className:`
      rounded p-10 shadow-xl
      `.concat(S,`
    `)},s?typeof s=="function"?t.default.createElement(s,null):t.default.createElement("div",{className:"text-3xl font-bold mb-2"},s):null,d)};e.default=i})(wp);var bM={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe),r=Jc;function n($){return $&&$.__esModule?$:{default:$}}function i($){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},i($)}function l(){return l=Object.assign?Object.assign.bind():function($){for(var N=1;N<arguments.length;N++){var z=arguments[N];for(var X in z)Object.prototype.hasOwnProperty.call(z,X)&&($[X]=z[X])}return $},l.apply(this,arguments)}function a($,N){if(!($ instanceof N))throw new TypeError("Cannot call a class as a function")}function s($,N){for(var z=0;z<N.length;z++){var X=N[z];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty($,G(X.key),X)}}function d($,N,z){return N&&s($.prototype,N),z&&s($,z),Object.defineProperty($,"prototype",{writable:!1}),$}function v($,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(N&&N.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),Object.defineProperty($,"prototype",{writable:!1}),N&&S($,N)}function S($,N){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(X,te){return X.__proto__=te,X},S($,N)}function A($){var N=F();return function(){var X=K($),te;if(N){var pe=K(this).constructor;te=Reflect.construct(X,arguments,pe)}else te=X.apply(this,arguments);return P(this,te)}}function P($,N){if(N&&(i(N)==="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L($)}function L($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function K($){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(z){return z.__proto__||Object.getPrototypeOf(z)},K($)}function re($,N,z){return N=G(N),N in $?Object.defineProperty($,N,{value:z,enumerable:!0,configurable:!0,writable:!0}):$[N]=z,$}function G($){var N=H($,"string");return i(N)==="symbol"?N:String(N)}function H($,N){if(i($)!=="object"||$===null)return $;var z=$[Symbol.toPrimitive];if(z!==void 0){var X=z.call($,N||"default");if(i(X)!=="object")return X;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)($)}var B=function(N){var z;return z=function(X){v(pe,X);var te=A(pe);function pe(){var ke;a(this,pe);for(var Pe=arguments.length,ge=new Array(Pe),Ie=0;Ie<Pe;Ie++)ge[Ie]=arguments[Ie];return ke=te.call.apply(te,[this].concat(ge)),re(L(ke),"state",{email:"",verify:""}),ke}return d(pe,[{key:"handleSubmit",value:function(Pe){Pe.preventDefault(),this.setState({email:"",verify:""}),this.props.signup(this.state.email,this.props.addToGroup)}},{key:"render",value:function(){var Pe=this,ge=this.state,Ie=ge.email,Ne=ge.verify,lt=Ie&&Ne&&Ie===Ne;return this.props.user.authed?(0,r.redirect)(this.props.redirectTo):t.default.createElement(N,l({},this.props,this.state,{handleSubmit:function(Rt){return Pe.handleSubmit(Rt)},update:function(Rt){return Pe.setState(Rt)},canSubmit:lt}))}}]),pe}(t.default.Component),re(z,"defaultProps",{amsAction:"signup",addToGroup:!1,redirectTo:"/",showIfLoggedIn:!1}),z};e.default=B})(bM);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(Fe),r=Jc;i(wp);var n=i(bM);function i(a){return a&&a.__esModule?a:{default:a}}var l=(0,n.default)(function(a){var s=a.email,d=a.verify,v=a.update;a.canSubmit;var S=a.handleSubmit,A=a.title,P=A===void 0?"":A;return t.default.createElement("div",{className:"h-full bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8 "},t.default.createElement("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},t.default.createElement("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-md sm:px-10"},t.default.createElement("div",{className:"sm:mx-auto sm:w-full sm:max-w-md border-b border-gray-200"},t.default.createElement("h2",{className:"text-xl font-medium text-gray-900"},P),t.default.createElement("p",{className:"text-lg font-thin text-gray-600"},t.default.createElement("span",{href:"#",className:"font-thin text-blue-400 hover:text-blue-500"},"Register"))),t.default.createElement("form",{className:"space-y-6",onSubmit:S},t.default.createElement("div",{className:"pt-4"},t.default.createElement("label",{htmlFor:"email",className:"block text-sm font-thin text-gray-700"},"Email"),t.default.createElement("div",{className:"mt-1"},t.default.createElement("input",{id:"email",name:"email",type:"email",value:s,onChange:function(F){return v({email:F.target.value})},autoComplete:"email",placeholder:"Enter your email",autoFocus:!0,required:!0,className:"appearance-none block w-full px-3 py-2 border-b border-gray-300 shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}))),t.default.createElement("div",null,t.default.createElement("label",{htmlFor:"password",className:"block text-sm font-thin text-gray-700"},"Verify Your Email"),t.default.createElement("div",{className:"mt-1"},t.default.createElement("input",{id:"verify",name:"verify",type:"email",value:d,onChange:function(F){return v({verify:F.target.value})},autoComplete:"Verify your email.",placeholder:"Verify your email.",required:!0,className:"appearance-none block w-full px-3 py-2 border-b border-gray-300 shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}))),t.default.createElement("div",null,t.default.createElement("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},"Register")))),t.default.createElement("div",{className:"flex items-center justify-between px-2 py-4"},t.default.createElement("div",{className:"text-xs"}),t.default.createElement("div",{className:"text-xs"},t.default.createElement(r.Link,{to:"/auth/login",className:"font-medium text-blue-600 hover:text-blue-500"},"Login")))))});e.default=l})(r8);var n8={},xM={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(Fe);function r(B){return B&&B.__esModule?B:{default:B}}function n(B){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},n(B)}function i(){return i=Object.assign?Object.assign.bind():function(B){for(var $=1;$<arguments.length;$++){var N=arguments[$];for(var z in N)Object.prototype.hasOwnProperty.call(N,z)&&(B[z]=N[z])}return B},i.apply(this,arguments)}function l(B,$){if(!(B instanceof $))throw new TypeError("Cannot call a class as a function")}function a(B,$){for(var N=0;N<$.length;N++){var z=$[N];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(B,re(z.key),z)}}function s(B,$,N){return $&&a(B.prototype,$),N&&a(B,N),Object.defineProperty(B,"prototype",{writable:!1}),B}function d(B,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");B.prototype=Object.create($&&$.prototype,{constructor:{value:B,writable:!0,configurable:!0}}),Object.defineProperty(B,"prototype",{writable:!1}),$&&v(B,$)}function v(B,$){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(z,X){return z.__proto__=X,z},v(B,$)}function S(B){var $=L();return function(){var z=F(B),X;if($){var te=F(this).constructor;X=Reflect.construct(z,arguments,te)}else X=z.apply(this,arguments);return A(this,X)}}function A(B,$){if($&&(n($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(B)}function P(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function F(B){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(N){return N.__proto__||Object.getPrototypeOf(N)},F(B)}function K(B,$,N){return $=re($),$ in B?Object.defineProperty(B,$,{value:N,enumerable:!0,configurable:!0,writable:!0}):B[$]=N,B}function re(B){var $=G(B,"string");return n($)==="symbol"?$:String($)}function G(B,$){if(n(B)!=="object"||B===null)return B;var N=B[Symbol.toPrimitive];if(N!==void 0){var z=N.call(B,$||"default");if(n(z)!=="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(B)}var H=function($){var N;return N=function(z){d(te,z);var X=S(te);function te(){var pe;l(this,te);for(var ke=arguments.length,Pe=new Array(ke),ge=0;ge<ke;ge++)Pe[ge]=arguments[ge];return pe=X.call.apply(X,[this].concat(Pe)),K(P(pe),"state",{email:"",verify:""}),pe}return s(te,[{key:"handleSubmit",value:function(ke){ke.preventDefault(),this.setState({email:"",verify:""}),this.props.resetPassword(this.state.email)}},{key:"render",value:function(){var ke=this,Pe=this.state,ge=Pe.email,Ie=Pe.verify,Ne=ge&&Ie&&ge===Ie;return t.default.createElement($,i({},this.props,this.state,{handleSubmit:function(it){return ke.handleSubmit(it)},update:function(it){return ke.setState(it)},canSubmit:Ne}))}}]),te}(t.default.Component),K(N,"defaultProps",{amsAction:"reset-password"}),N};e.default=H})(xM);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(Fe),r=Jc;i(wp);var n=i(xM);function i(a){return a&&a.__esModule?a:{default:a}}var l=(0,n.default)(function(a){var s=a.email,d=a.verify,v=a.update;a.canSubmit;var S=a.handleSubmit,A=a.title;return t.default.createElement("div",{className:"h-full bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8 "},t.default.createElement("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},t.default.createElement("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-md sm:px-10"},t.default.createElement("div",{className:"sm:mx-auto sm:w-full sm:max-w-md border-b border-gray-200"},t.default.createElement("h2",{className:"text-xl font-medium text-gray-900"},A),t.default.createElement("p",{className:"text-lg font-thin text-gray-600"},t.default.createElement("span",{href:"#",className:"font-thin text-blue-400 hover:text-blue-500"},"Reset Password"))),t.default.createElement("form",{className:"space-y-6",onSubmit:S},t.default.createElement("div",{className:"pt-4"},t.default.createElement("label",{htmlFor:"email",className:"block text-sm font-thin text-gray-700"},"Email"),t.default.createElement("div",{className:"mt-1"},t.default.createElement("input",{id:"email",name:"email",type:"email",value:s,onChange:function(L){return v({email:L.target.value})},autoComplete:"email",placeholder:"Enter your email",autoFocus:!0,required:!0,className:"appearance-none block w-full px-3 py-2 border-b border-gray-300 shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}))),t.default.createElement("div",null,t.default.createElement("label",{htmlFor:"password",className:"block text-sm font-thin text-gray-700"},"Verify Email"),t.default.createElement("div",{className:"mt-1"},t.default.createElement("input",{id:"verify",name:"verify",type:"email",value:d,onChange:function(L){return v({verify:L.target.value})},autoComplete:"Verify your email.",placeholder:"Verify your email.",required:!0,className:"appearance-none block w-full px-3 py-2 border-b border-gray-300 shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}))),t.default.createElement("div",null,t.default.createElement("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},"Request Pasword")))),t.default.createElement("div",{className:"flex items-center justify-between px-2 py-4"},t.default.createElement("div",{className:"text-xs"},"Need an account?  ",t.default.createElement(r.Link,{to:"/auth/register",className:"font-medium text-blue-600 hover:text-blue-500"},"Register")),t.default.createElement("div",{className:"text-xs"},t.default.createElement(r.Link,{to:"/auth/login",className:"font-medium text-blue-600 hover:text-blue-500"},"Login")))))});e.default=l})(n8);var i8={},wM={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe),r=Jc;function n($){return $&&$.__esModule?$:{default:$}}function i($){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},i($)}function l(){return l=Object.assign?Object.assign.bind():function($){for(var N=1;N<arguments.length;N++){var z=arguments[N];for(var X in z)Object.prototype.hasOwnProperty.call(z,X)&&($[X]=z[X])}return $},l.apply(this,arguments)}function a($,N){if(!($ instanceof N))throw new TypeError("Cannot call a class as a function")}function s($,N){for(var z=0;z<N.length;z++){var X=N[z];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty($,G(X.key),X)}}function d($,N,z){return N&&s($.prototype,N),z&&s($,z),Object.defineProperty($,"prototype",{writable:!1}),$}function v($,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(N&&N.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),Object.defineProperty($,"prototype",{writable:!1}),N&&S($,N)}function S($,N){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(X,te){return X.__proto__=te,X},S($,N)}function A($){var N=F();return function(){var X=K($),te;if(N){var pe=K(this).constructor;te=Reflect.construct(X,arguments,pe)}else te=X.apply(this,arguments);return P(this,te)}}function P($,N){if(N&&(i(N)==="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L($)}function L($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function K($){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(z){return z.__proto__||Object.getPrototypeOf(z)},K($)}function re($,N,z){return N=G(N),N in $?Object.defineProperty($,N,{value:z,enumerable:!0,configurable:!0,writable:!0}):$[N]=z,$}function G($){var N=H($,"string");return i(N)==="symbol"?N:String(N)}function H($,N){if(i($)!=="object"||$===null)return $;var z=$[Symbol.toPrimitive];if(z!==void 0){var X=z.call($,N||"default");if(i(X)!=="object")return X;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)($)}var B=function(N){var z;return z=function(X){v(pe,X);var te=A(pe);function pe(){var ke;a(this,pe);for(var Pe=arguments.length,ge=new Array(Pe),Ie=0;Ie<Pe;Ie++)ge[Ie]=arguments[Ie];return ke=te.call.apply(te,[this].concat(ge)),re(L(ke),"state",{password:"",verify:""}),ke}return d(pe,[{key:"handleSubmit",value:function(Pe){Pe.preventDefault(),this.setState({password:"",verify:""}),this.props.verifyRequest(this.props.urlArg,this.state.password)}},{key:"render",value:function(){var Pe=this,ge=this.state,Ie=ge.password,Ne=ge.verify,lt=Ie&&Ne&&Ie===Ne;return this.props.user.authed?(0,r.redirect)(this.props.redirectTo):t.default.createElement(N,l({},this.state,this.props,{canSubmit:lt,handleSubmit:function(Rt){return Pe.handleSubmit(Rt)},update:function(Rt){return Pe.setState(Rt)}}))}}]),pe}(t.default.Component),re(z,"defaultProps",{amsAction:"verify-request",urlArg:null,showInDirectory:!1,redirectTo:"/"}),z};e.default=B})(wM);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=l(Fe),r=l(wp),n=l(wM),i=["password","verify","update","canSubmit","handleSubmit"];function l(v){return v&&v.__esModule?v:{default:v}}function a(v,S){if(v==null)return{};var A=s(v,S),P,L;if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(v);for(L=0;L<F.length;L++)P=F[L],!(S.indexOf(P)>=0)&&Object.prototype.propertyIsEnumerable.call(v,P)&&(A[P]=v[P])}return A}function s(v,S){if(v==null)return{};var A={},P=Object.keys(v),L,F;for(F=0;F<P.length;F++)L=P[F],!(S.indexOf(L)>=0)&&(A[L]=v[L]);return A}var d=(0,n.default)(function(v){var S=v.password,A=v.verify,P=v.update,L=v.canSubmit,F=v.handleSubmit;return a(v,i),t.default.createElement("div",{className:"h-full flex-1 flex items-center justify-center"},t.default.createElement(r.default,{Title:"Verify Request"},t.default.createElement("form",{onSubmit:F},t.default.createElement("div",{className:"my-2"},t.default.createElement("label",{htmlFor:"password",className:"block font-bold"},"Password"),t.default.createElement("input",{type:"password",id:"password",required:!0,autoFocus:!0,value:S,onChange:function(re){return P({password:re.target.value})}})),t.default.createElement("div",{className:"my-2"},t.default.createElement("label",{htmlFor:"verify",className:"block font-bold"},"Verify Password"),t.default.createElement("input",{type:"password",id:"verify",required:!0,value:A,onChange:function(re){return P({verify:re.target.value})}})),t.default.createElement("div",{className:"my-2"},t.default.createElement(Button,{disabled:!L,type:"submit",buttonTheme:"buttonPrimaryLargeBlock"},"verify")))))});e.default=d})(i8);var a8={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe),r=["user","className","children"];function n(d){return d&&d.__esModule?d:{default:d}}function i(d,v){if(d==null)return{};var S=l(d,v),A,P;if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(d);for(P=0;P<L.length;P++)A=L[P],!(v.indexOf(A)>=0)&&Object.prototype.propertyIsEnumerable.call(d,A)&&(S[A]=d[A])}return S}function l(d,v){if(d==null)return{};var S={},A=Object.keys(d),P,L;for(L=0;L<A.length;L++)P=A[L],!(v.indexOf(P)>=0)&&(S[P]=d[P]);return S}var a=function(v){var S=v.user,A=v.className,P=A===void 0?null:A,L=v.children;return i(v,r),t.default.createElement("div",{className:P},t.default.createElement("div",{className:"py-8 grid grid-cols-2 gap-8"},t.default.createElement("div",{className:"font-bold text-4xl text-center col-span-2"},"Welcome: ",S.email),L))},s={type:a,props:{amsAction:"profile",authLevel:0},wrappers:["ams-profile"]};e.default=s})(a8);var o8={},SM={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(Fe);function r(N){return N&&N.__esModule?N:{default:N}}function n(N){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},n(N)}function i(){return i=Object.assign?Object.assign.bind():function(N){for(var z=1;z<arguments.length;z++){var X=arguments[z];for(var te in X)Object.prototype.hasOwnProperty.call(X,te)&&(N[te]=X[te])}return N},i.apply(this,arguments)}function l(N,z){if(!(N instanceof z))throw new TypeError("Cannot call a class as a function")}function a(N,z){for(var X=0;X<z.length;X++){var te=z[X];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(N,H(te.key),te)}}function s(N,z,X){return z&&a(N.prototype,z),X&&a(N,X),Object.defineProperty(N,"prototype",{writable:!1}),N}function d(){return typeof Reflect<"u"&&Reflect.get?d=Reflect.get.bind():d=function(z,X,te){var pe=v(z,X);if(pe){var ke=Object.getOwnPropertyDescriptor(pe,X);return ke.get?ke.get.call(arguments.length<3?z:te):ke.value}},d.apply(this,arguments)}function v(N,z){for(;!Object.prototype.hasOwnProperty.call(N,z)&&(N=re(N),N!==null););return N}function S(N,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=Object.create(z&&z.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),Object.defineProperty(N,"prototype",{writable:!1}),z&&A(N,z)}function A(N,z){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(te,pe){return te.__proto__=pe,te},A(N,z)}function P(N){var z=K();return function(){var te=re(N),pe;if(z){var ke=re(this).constructor;pe=Reflect.construct(te,arguments,ke)}else pe=te.apply(this,arguments);return L(this,pe)}}function L(N,z){if(z&&(n(z)==="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F(N)}function F(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function K(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function re(N){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(X){return X.__proto__||Object.getPrototypeOf(X)},re(N)}function G(N,z,X){return z=H(z),z in N?Object.defineProperty(N,z,{value:X,enumerable:!0,configurable:!0,writable:!0}):N[z]=X,N}function H(N){var z=B(N,"string");return n(z)==="symbol"?z:String(z)}function B(N,z){if(n(N)!=="object"||N===null)return N;var X=N[Symbol.toPrimitive];if(X!==void 0){var te=X.call(N,z||"default");if(n(te)!=="object")return te;throw new TypeError("@@toPrimitive must return a primitive value.")}return(z==="string"?String:Number)(N)}var $=function(z){var X;return X=function(te){S(ke,te);var pe=P(ke);function ke(){var Pe;l(this,ke);for(var ge=arguments.length,Ie=new Array(ge),Ne=0;Ne<ge;Ne++)Ie[Ne]=arguments[Ne];return Pe=pe.call.apply(pe,[this].concat(Ie)),G(F(Pe),"state",{verified:"waiting"}),G(F(Pe),"MOUNTED",!1),Pe}return s(ke,[{key:"setState",value:function(){for(var ge,Ie=arguments.length,Ne=new Array(Ie),lt=0;lt<Ie;lt++)Ne[lt]=arguments[lt];this.MOUNTED&&(ge=d(re(ke.prototype),"setState",this)).call.apply(ge,[this].concat(Ne))}},{key:"componentDidMount",value:function(){var ge=this;this.MOUNTED=!0,this.props.verifyEmail(this.props.urlArg).then(function(Ie){var Ne=Ie.res,lt=Ie.dispatch,it=Ie.sendSystemMessage;Ne.error?(lt(it(Ne.error,{type:"Danger",id:"email-verification-failed"})),ge.setState({verified:"failed"})):(lt(it(Ne.message,{type:"Info",id:"email-verification-succeeded"})),ge.setState({verified:"succeeded"}))})}},{key:"componentWillUnmount",value:function(){this.MOUNTED=!1}},{key:"render",value:function(){return t.default.createElement(z,i({},this.props,this.state))}}]),ke}(t.default.Component),G(X,"defaultProps",{amsAction:"verify-email",urlArg:null,showInDirectory:!1}),X};e.default=$})(SM);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=l(Fe),r=l(wp),n=l(SM),i=["verified"];function l(v){return v&&v.__esModule?v:{default:v}}function a(v,S){if(v==null)return{};var A=s(v,S),P,L;if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(v);for(L=0;L<F.length;L++)P=F[L],!(S.indexOf(P)>=0)&&Object.prototype.propertyIsEnumerable.call(v,P)&&(A[P]=v[P])}return A}function s(v,S){if(v==null)return{};var A={},P=Object.keys(v),L,F;for(F=0;F<P.length;F++)L=P[F],!(S.indexOf(L)>=0)&&(A[L]=v[L]);return A}var d=(0,n.default)(function(v){var S=v.verified;return a(v,i),t.default.createElement("div",{className:"h-full flex-1 flex items-center justify-center"},t.default.createElement(r.default,null,S==="waiting"?"Verifying Email...":S==="failed"?"Email verification failed.":"Email verification succeeded."))});e.default=d})(o8);var s8={},EM={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe),r=Jc;function n($){return $&&$.__esModule?$:{default:$}}function i($){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},i($)}function l(){return l=Object.assign?Object.assign.bind():function($){for(var N=1;N<arguments.length;N++){var z=arguments[N];for(var X in z)Object.prototype.hasOwnProperty.call(z,X)&&($[X]=z[X])}return $},l.apply(this,arguments)}function a($,N){if(!($ instanceof N))throw new TypeError("Cannot call a class as a function")}function s($,N){for(var z=0;z<N.length;z++){var X=N[z];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty($,G(X.key),X)}}function d($,N,z){return N&&s($.prototype,N),z&&s($,z),Object.defineProperty($,"prototype",{writable:!1}),$}function v($,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(N&&N.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),Object.defineProperty($,"prototype",{writable:!1}),N&&S($,N)}function S($,N){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(X,te){return X.__proto__=te,X},S($,N)}function A($){var N=F();return function(){var X=K($),te;if(N){var pe=K(this).constructor;te=Reflect.construct(X,arguments,pe)}else te=X.apply(this,arguments);return P(this,te)}}function P($,N){if(N&&(i(N)==="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L($)}function L($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function K($){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(z){return z.__proto__||Object.getPrototypeOf(z)},K($)}function re($,N,z){return N=G(N),N in $?Object.defineProperty($,N,{value:z,enumerable:!0,configurable:!0,writable:!0}):$[N]=z,$}function G($){var N=H($,"string");return i(N)==="symbol"?N:String(N)}function H($,N){if(i($)!=="object"||$===null)return $;var z=$[Symbol.toPrimitive];if(z!==void 0){var X=z.call($,N||"default");if(i(X)!=="object")return X;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)($)}var B=function(N){var z;return z=function(X){v(pe,X);var te=A(pe);function pe(){var ke;a(this,pe);for(var Pe=arguments.length,ge=new Array(Pe),Ie=0;Ie<Pe;Ie++)ge[Ie]=arguments[Ie];return ke=te.call.apply(te,[this].concat(ge)),re(L(ke),"state",{password:"",verify:""}),ke}return d(pe,[{key:"handleSubmit",value:function(Pe){Pe.preventDefault(),this.props.setPassword(this.props.urlArg,this.state.password),this.setState({password:"",verify:""})}},{key:"render",value:function(){var Pe=this,ge=this.state,Ie=ge.password,Ne=ge.verify,lt=Ie&&Ne&&Ie===Ne;return this.props.user.authed?(0,r.redirect)(this.props.redirectTo):t.default.createElement(N,l({},this.state,this.props,{canSubmit:lt,handleSubmit:function(Rt){return Pe.handleSubmit(Rt)},update:function(Rt){return Pe.setState(Rt)}}))}}]),pe}(t.default.Component),re(z,"defaultProps",{amsAction:"set-password",urlArg:null,showInDirectory:!1,redirectTo:"/"}),z};e.default=B})(EM);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe);n(wp);var r=n(EM);function n(l){return l&&l.__esModule?l:{default:l}}var i=(0,r.default)(function(l){var a=l.password,s=l.verify,d=l.update;l.canSubmit;var v=l.handleSubmit;return t.default.createElement("div",{className:"h-full bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8 "},t.default.createElement("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},t.default.createElement("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-md sm:px-10"},t.default.createElement("div",{className:"sm:mx-auto sm:w-full sm:max-w-md border-b border-gray-200"},t.default.createElement("h2",{className:"text-xl font-medium text-gray-900"},title),t.default.createElement("p",{className:"text-lg font-thin text-gray-600"},t.default.createElement("span",{href:"#",className:"font-thin text-blue-400 hover:text-blue-500"},"Set Password"))),t.default.createElement("form",{className:"space-y-6",onSubmit:v},t.default.createElement("div",{className:"pt-4"},t.default.createElement("label",{htmlFor:"email",className:"block text-sm font-thin text-gray-700"},"Password"),t.default.createElement("div",{className:"mt-1"},t.default.createElement("input",{id:"password",name:"password",type:"password",value:a,onChange:function(A){return d({password:A.target.value})},autoComplete:"email",placeholder:"Enter your password",autoFocus:!0,required:!0,className:"appearance-none block w-full px-3 py-2 border-b border-gray-300 shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}))),t.default.createElement("div",null,t.default.createElement("label",{htmlFor:"password",className:"block text-sm font-thin text-gray-700"},"Password"),t.default.createElement("div",{className:"mt-1"},t.default.createElement("input",{id:"verify",name:"verify",type:"password",value:s,onChange:function(A){return d({verify:A.target.value})},autoComplete:"Verify your email.",placeholder:"Verify your email.",required:!0,className:"appearance-none block w-full px-3 py-2 border-b border-gray-300 shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}))),t.default.createElement("div",null,t.default.createElement("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},"Set Password"))))))});e.default=i})(s8);var l8={},CM={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe),r=Jc;function n($){return $&&$.__esModule?$:{default:$}}function i($){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},i($)}function l(){return l=Object.assign?Object.assign.bind():function($){for(var N=1;N<arguments.length;N++){var z=arguments[N];for(var X in z)Object.prototype.hasOwnProperty.call(z,X)&&($[X]=z[X])}return $},l.apply(this,arguments)}function a($,N){if(!($ instanceof N))throw new TypeError("Cannot call a class as a function")}function s($,N){for(var z=0;z<N.length;z++){var X=N[z];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty($,G(X.key),X)}}function d($,N,z){return N&&s($.prototype,N),z&&s($,z),Object.defineProperty($,"prototype",{writable:!1}),$}function v($,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(N&&N.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),Object.defineProperty($,"prototype",{writable:!1}),N&&S($,N)}function S($,N){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(X,te){return X.__proto__=te,X},S($,N)}function A($){var N=F();return function(){var X=K($),te;if(N){var pe=K(this).constructor;te=Reflect.construct(X,arguments,pe)}else te=X.apply(this,arguments);return P(this,te)}}function P($,N){if(N&&(i(N)==="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L($)}function L($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function K($){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(z){return z.__proto__||Object.getPrototypeOf(z)},K($)}function re($,N,z){return N=G(N),N in $?Object.defineProperty($,N,{value:z,enumerable:!0,configurable:!0,writable:!0}):$[N]=z,$}function G($){var N=H($,"string");return i(N)==="symbol"?N:String(N)}function H($,N){if(i($)!=="object"||$===null)return $;var z=$[Symbol.toPrimitive];if(z!==void 0){var X=z.call($,N||"default");if(i(X)!=="object")return X;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)($)}var B=function(N){var z;return z=function(X){v(pe,X);var te=A(pe);function pe(){var ke;a(this,pe);for(var Pe=arguments.length,ge=new Array(Pe),Ie=0;Ie<Pe;Ie++)ge[Ie]=arguments[Ie];return ke=te.call.apply(te,[this].concat(ge)),re(L(ke),"state",{password:"",verify:""}),ke}return d(pe,[{key:"handleSubmit",value:function(Pe){Pe.preventDefault(),this.props.acceptInvite(this.props.urlArg,this.state.password),this.setState({password:"",verify:""})}},{key:"render",value:function(){var Pe=this,ge=this.state,Ie=ge.password,Ne=ge.verify,lt=Ie&&Ne&&Ie===Ne;return this.props.user.authed?(0,r.redirect)(this.props.redirectTo):t.default.createElement(N,l({},this.state,this.props,{canSubmit:lt,handleSubmit:function(Rt){return Pe.handleSubmit(Rt)},update:function(Rt){return Pe.setState(Rt)}}))}}]),pe}(t.default.Component),re(z,"defaultProps",{amsAction:"accept-invite",urlArg:null,showInDirectory:!1,redirectTo:"/"}),z};e.default=B})(CM);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(Fe),r=i(wp),n=i(CM);function i(a){return a&&a.__esModule?a:{default:a}}var l=(0,n.default)(function(a){var s=a.password,d=a.verify,v=a.update,S=a.canSubmit,A=a.handleSubmit;return t.default.createElement("div",{className:"h-full flex-1 flex items-center justify-center"},t.default.createElement(r.default,{Title:"Accept Invite"},t.default.createElement("form",{onSubmit:A},t.default.createElement("div",{className:"my-2"},t.default.createElement("label",{htmlFor:"password",className:"block font-bold"},"Password"),t.default.createElement("input",{type:"password",id:"password",value:s,autoFocus:!0,onChange:function(L){return v({password:L})}})),t.default.createElement("div",{className:"my-2"},t.default.createElement("label",{htmlFor:"verify",className:"block font-bold"},"Verify Password"),t.default.createElement("input",{type:"password",id:"verify",value:d,onChange:function(L){return v({verify:L})}})),t.default.createElement("div",{className:"my-2"},t.default.createElement("button",{type:"submit",buttonTheme:"buttonLargePrimaryBlock",disabled:!S},"accept")))))});e.default=l})(l8);var u8={},PM={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(Fe);function r(H){return H&&H.__esModule?H:{default:H}}function n(H){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},n(H)}function i(H,B){if(!(H instanceof B))throw new TypeError("Cannot call a class as a function")}function l(H,B){for(var $=0;$<B.length;$++){var N=B[$];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(H,K(N.key),N)}}function a(H,B,$){return B&&l(H.prototype,B),$&&l(H,$),Object.defineProperty(H,"prototype",{writable:!1}),H}function s(H,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(B&&B.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),Object.defineProperty(H,"prototype",{writable:!1}),B&&d(H,B)}function d(H,B){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(N,z){return N.__proto__=z,N},d(H,B)}function v(H){var B=P();return function(){var N=L(H),z;if(B){var X=L(this).constructor;z=Reflect.construct(N,arguments,X)}else z=N.apply(this,arguments);return S(this,z)}}function S(H,B){if(B&&(n(B)==="object"||typeof B=="function"))return B;if(B!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A(H)}function A(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L(H){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($){return $.__proto__||Object.getPrototypeOf($)},L(H)}function F(H,B,$){return B=K(B),B in H?Object.defineProperty(H,B,{value:$,enumerable:!0,configurable:!0,writable:!0}):H[B]=$,H}function K(H){var B=re(H,"string");return n(B)==="symbol"?B:String(B)}function re(H,B){if(n(H)!=="object"||H===null)return H;var $=H[Symbol.toPrimitive];if($!==void 0){var N=$.call(H,B||"default");if(n(N)!=="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(B==="string"?String:Number)(H)}var G=function(B){var $;return $=function(N){s(X,N);var z=v(X);function X(){return i(this,X),z.apply(this,arguments)}return a(X,[{key:"render",value:function(){return t.default.createElement(B,this.props)}}]),X}(t.default.Component),F($,"defaultProps",{amsAction:"directory",showInDirectory:!1}),$};e.default=G})(PM);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(Fe),r=Jc,n=a(PM),i=a(Zy),l=["path","children","user","className"];function a(S){return S&&S.__esModule?S:{default:S}}function s(S,A){if(S==null)return{};var P=d(S,A),L,F;if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(S);for(F=0;F<K.length;F++)L=K[F],!(A.indexOf(L)>=0)&&Object.prototype.propertyIsEnumerable.call(S,L)&&(P[L]=S[L])}return P}function d(S,A){if(S==null)return{};var P={},L=Object.keys(S),F,K;for(K=0;K<L.length;K++)F=L[K],!(A.indexOf(F)>=0)&&(P[F]=S[F]);return P}var v=(0,n.default)(function(S){var A=S.path,P=S.children,L=S.user,F=S.className,K=F===void 0?"mt-16":F;s(S,l);var re={};return t.default.createElement("div",{className:K},t.default.createElement("div",{className:"py-20"},t.default.createElement("div",{className:"inline-block"},t.default.Children.toArray(P).reduce(function(G,H){var B=(0,i.default)(H,["props","showInDirectory"],!0),$=(0,i.default)(H,["props","showIfLoggedIn"],!0),N=(0,i.default)(H,["props","amsAction"]);if(N){var z=(0,i.default)(H,["props","authLevel"],-1);L.authLevel>=z&&B&&(!L.authed||L.authed&&$)?G.push(t.default.createElement(r.Link,{key:H.props.amsAction,to:"".concat(A,"/").concat(H.props.amsAction)},t.default.createElement("div",{className:"py-1 px-2 rounded hover:".concat(re.accent1)},H.props.amsAction))):G.push(t.default.createElement("div",{key:H.props.amsAction,className:"py-1 px-2 cursor-not-allowed line-through rounded hover:".concat(re.accent1)},H.props.amsAction))}else N||G.push(H);return G},[]))))});e.default=v})(u8);var c8={},TM={};(function(e){function t(z){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},t(z)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(Fe),n=["updatePassword"];function i(z){return z&&z.__esModule?z:{default:z}}function l(){return l=Object.assign?Object.assign.bind():function(z){for(var X=1;X<arguments.length;X++){var te=arguments[X];for(var pe in te)Object.prototype.hasOwnProperty.call(te,pe)&&(z[pe]=te[pe])}return z},l.apply(this,arguments)}function a(z,X){var te=Object.keys(z);if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(z);X&&(pe=pe.filter(function(ke){return Object.getOwnPropertyDescriptor(z,ke).enumerable})),te.push.apply(te,pe)}return te}function s(z){for(var X=1;X<arguments.length;X++){var te=arguments[X]!=null?arguments[X]:{};X%2?a(Object(te),!0).forEach(function(pe){d(z,pe,te[pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(te)):a(Object(te)).forEach(function(pe){Object.defineProperty(z,pe,Object.getOwnPropertyDescriptor(te,pe))})}return z}function d(z,X,te){return X=v(X),X in z?Object.defineProperty(z,X,{value:te,enumerable:!0,configurable:!0,writable:!0}):z[X]=te,z}function v(z){var X=S(z,"string");return t(X)==="symbol"?X:String(X)}function S(z,X){if(t(z)!=="object"||z===null)return z;var te=z[Symbol.toPrimitive];if(te!==void 0){var pe=te.call(z,X||"default");if(t(pe)!=="object")return pe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(X==="string"?String:Number)(z)}function A(z,X){return re(z)||K(z,X)||L(z,X)||P()}function P(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L(z,X){if(z){if(typeof z=="string")return F(z,X);var te=Object.prototype.toString.call(z).slice(8,-1);if(te==="Object"&&z.constructor&&(te=z.constructor.name),te==="Map"||te==="Set")return Array.from(z);if(te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te))return F(z,X)}}function F(z,X){(X==null||X>z.length)&&(X=z.length);for(var te=0,pe=new Array(X);te<X;te++)pe[te]=z[te];return pe}function K(z,X){var te=z==null?null:typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(te!=null){var pe,ke,Pe,ge,Ie=[],Ne=!0,lt=!1;try{if(Pe=(te=te.call(z)).next,X===0){if(Object(te)!==te)return;Ne=!1}else for(;!(Ne=(pe=Pe.call(te)).done)&&(Ie.push(pe.value),Ie.length!==X);Ne=!0);}catch(it){lt=!0,ke=it}finally{try{if(!Ne&&te.return!=null&&(ge=te.return(),Object(ge)!==ge))return}finally{if(lt)throw ke}}return Ie}}function re(z){if(Array.isArray(z))return z}function G(z,X){if(z==null)return{};var te=H(z,X),pe,ke;if(Object.getOwnPropertySymbols){var Pe=Object.getOwnPropertySymbols(z);for(ke=0;ke<Pe.length;ke++)pe=Pe[ke],!(X.indexOf(pe)>=0)&&Object.prototype.propertyIsEnumerable.call(z,pe)&&(te[pe]=z[pe])}return te}function H(z,X){if(z==null)return{};var te={},pe=Object.keys(z),ke,Pe;for(Pe=0;Pe<pe.length;Pe++)ke=pe[Pe],!(X.indexOf(ke)>=0)&&(te[ke]=z[ke]);return te}var B={current:"",password:"",verify:""},$=function(X){return function(te){var pe=te.updatePassword,ke=G(te,n),Pe=r.default.useState(B),ge=A(Pe,2),Ie=ge[0],Ne=ge[1],lt=r.default.useCallback(function(St){Ne(function(Zt){return s(s({},Zt),St)})},[]),it=r.default.useMemo(function(){var St=Ie.current,Zt=Ie.password,Kt=Ie.verify;return St&&Zt&&St!==Zt&&Zt===Kt},[Ie]),Rt=r.default.useCallback(function(St){St.preventDefault(),it&&pe(Ie.current,Ie.password)},[pe,Ie,it]);return r.default.createElement(X,l({},ke,Ie,{canSubmit:it,handleSubmit:Rt,update:lt}))}},N=$;e.default=N})(TM);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(Fe),r=i(wp),n=i(TM);function i(a){return a&&a.__esModule?a:{default:a}}var l=(0,n.default)(function(a){var s=a.current,d=a.password,v=a.verify,S=a.update,A=a.canSubmit,P=a.handleSubmit;return t.default.createElement(r.default,{Title:"Update Password"},t.default.createElement("form",{onSubmit:P},t.default.createElement("div",{className:"grid grid-cols-1 gap-y-3"},t.default.createElement("div",null,t.default.createElement("label",{htmlFor:"current",className:"block font-bold"},"Current Password"),t.default.createElement("input",{type:"password",id:"current",value:s,autoFocus:!0,onChange:function(F){return S({current:F.target.value})}})),t.default.createElement("div",null,t.default.createElement("label",{htmlFor:"password",className:"block font-bold"},"New Password"),t.default.createElement("input",{type:"password",id:"password",value:d,onChange:function(F){return S({password:F.target.value})}})),t.default.createElement("div",null,t.default.createElement("label",{htmlFor:"verify",className:"block font-bold"},"Verify Password"),t.default.createElement("input",{type:"password",id:"verify",value:v,onChange:function(F){return S({verify:F.target.value})}})),t.default.createElement("div",null,t.default.createElement("button",{type:"submit",disabled:!A},"update password")))))});e.default=l})(c8);var f8={},AM={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe),r=["requests"];function n(ge){return ge&&ge.__esModule?ge:{default:ge}}function i(ge){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ie){return typeof Ie}:function(Ie){return Ie&&typeof Symbol=="function"&&Ie.constructor===Symbol&&Ie!==Symbol.prototype?"symbol":typeof Ie},i(ge)}function l(){return l=Object.assign?Object.assign.bind():function(ge){for(var Ie=1;Ie<arguments.length;Ie++){var Ne=arguments[Ie];for(var lt in Ne)Object.prototype.hasOwnProperty.call(Ne,lt)&&(ge[lt]=Ne[lt])}return ge},l.apply(this,arguments)}function a(ge,Ie){return A(ge)||S(ge,Ie)||d(ge,Ie)||s()}function s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d(ge,Ie){if(ge){if(typeof ge=="string")return v(ge,Ie);var Ne=Object.prototype.toString.call(ge).slice(8,-1);if(Ne==="Object"&&ge.constructor&&(Ne=ge.constructor.name),Ne==="Map"||Ne==="Set")return Array.from(ge);if(Ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ne))return v(ge,Ie)}}function v(ge,Ie){(Ie==null||Ie>ge.length)&&(Ie=ge.length);for(var Ne=0,lt=new Array(Ie);Ne<Ie;Ne++)lt[Ne]=ge[Ne];return lt}function S(ge,Ie){var Ne=ge==null?null:typeof Symbol<"u"&&ge[Symbol.iterator]||ge["@@iterator"];if(Ne!=null){var lt,it,Rt,St,Zt=[],Kt=!0,Ge=!1;try{if(Rt=(Ne=Ne.call(ge)).next,Ie===0){if(Object(Ne)!==Ne)return;Kt=!1}else for(;!(Kt=(lt=Rt.call(Ne)).done)&&(Zt.push(lt.value),Zt.length!==Ie);Kt=!0);}catch(Ye){Ge=!0,it=Ye}finally{try{if(!Kt&&Ne.return!=null&&(St=Ne.return(),Object(St)!==St))return}finally{if(Ge)throw it}}return Zt}}function A(ge){if(Array.isArray(ge))return ge}function P(ge,Ie){if(ge==null)return{};var Ne=L(ge,Ie),lt,it;if(Object.getOwnPropertySymbols){var Rt=Object.getOwnPropertySymbols(ge);for(it=0;it<Rt.length;it++)lt=Rt[it],!(Ie.indexOf(lt)>=0)&&Object.prototype.propertyIsEnumerable.call(ge,lt)&&(Ne[lt]=ge[lt])}return Ne}function L(ge,Ie){if(ge==null)return{};var Ne={},lt=Object.keys(ge),it,Rt;for(Rt=0;Rt<lt.length;Rt++)it=lt[Rt],!(Ie.indexOf(it)>=0)&&(Ne[it]=ge[it]);return Ne}function F(ge,Ie){if(!(ge instanceof Ie))throw new TypeError("Cannot call a class as a function")}function K(ge,Ie){for(var Ne=0;Ne<Ie.length;Ne++){var lt=Ie[Ne];lt.enumerable=lt.enumerable||!1,lt.configurable=!0,"value"in lt&&(lt.writable=!0),Object.defineProperty(ge,pe(lt.key),lt)}}function re(ge,Ie,Ne){return Ie&&K(ge.prototype,Ie),Ne&&K(ge,Ne),Object.defineProperty(ge,"prototype",{writable:!1}),ge}function G(ge,Ie){if(typeof Ie!="function"&&Ie!==null)throw new TypeError("Super expression must either be null or a function");ge.prototype=Object.create(Ie&&Ie.prototype,{constructor:{value:ge,writable:!0,configurable:!0}}),Object.defineProperty(ge,"prototype",{writable:!1}),Ie&&H(ge,Ie)}function H(ge,Ie){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(lt,it){return lt.__proto__=it,lt},H(ge,Ie)}function B(ge){var Ie=z();return function(){var lt=X(ge),it;if(Ie){var Rt=X(this).constructor;it=Reflect.construct(lt,arguments,Rt)}else it=lt.apply(this,arguments);return $(this,it)}}function $(ge,Ie){if(Ie&&(i(Ie)==="object"||typeof Ie=="function"))return Ie;if(Ie!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N(ge)}function N(ge){if(ge===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ge}function z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function X(ge){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Ne){return Ne.__proto__||Object.getPrototypeOf(Ne)},X(ge)}function te(ge,Ie,Ne){return Ie=pe(Ie),Ie in ge?Object.defineProperty(ge,Ie,{value:Ne,enumerable:!0,configurable:!0,writable:!0}):ge[Ie]=Ne,ge}function pe(ge){var Ie=ke(ge,"string");return i(Ie)==="symbol"?Ie:String(Ie)}function ke(ge,Ie){if(i(ge)!=="object"||ge===null)return ge;var Ne=ge[Symbol.toPrimitive];if(Ne!==void 0){var lt=Ne.call(ge,Ie||"default");if(i(lt)!=="object")return lt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ie==="string"?String:Number)(ge)}var Pe=function(Ie){var Ne;return Ne=function(lt){G(Rt,lt);var it=B(Rt);function Rt(){return F(this,Rt),it.apply(this,arguments)}return re(Rt,[{key:"render",value:function(){var Zt=this.props,Kt=Zt.requests,Ge=P(Zt,r),Ye=Kt.reduce(function(Bt,hr){return hr.state==="pending"?Bt[0].push(hr):hr.state==="awaiting"?Bt[1].push(hr):hr.state==="rejected"&&Bt[2].push(hr),Bt},[[],[],[]]),Dr=a(Ye,3),wr=Dr[0],tr=Dr[1],br=Dr[2];return Kt.length?t.default.createElement(Ie,l({},Ge,{pending:wr,awaiting:tr,rejected:br})):null}}]),Rt}(t.default.Component),te(Ne,"defaultProps",{amsAction:"requests",authLevel:5}),Ne};e.default=Pe})(AM);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=S(Fe),r=S(AM),n=["request","groups","signupAccept","signupReject"],i=["requests"],l=["request","signupReject"],a=["requests"],s=["request","groups","signupAccept","deleteRequest"],d=["requests"],v=["pending","awaiting","rejected"];function S(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}}function A(){return A=Object.assign?Object.assign.bind():function(Ne){for(var lt=1;lt<arguments.length;lt++){var it=arguments[lt];for(var Rt in it)Object.prototype.hasOwnProperty.call(it,Rt)&&(Ne[Rt]=it[Rt])}return Ne},A.apply(this,arguments)}function P(Ne,lt){return G(Ne)||re(Ne,lt)||F(Ne,lt)||L()}function L(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F(Ne,lt){if(Ne){if(typeof Ne=="string")return K(Ne,lt);var it=Object.prototype.toString.call(Ne).slice(8,-1);if(it==="Object"&&Ne.constructor&&(it=Ne.constructor.name),it==="Map"||it==="Set")return Array.from(Ne);if(it==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return K(Ne,lt)}}function K(Ne,lt){(lt==null||lt>Ne.length)&&(lt=Ne.length);for(var it=0,Rt=new Array(lt);it<lt;it++)Rt[it]=Ne[it];return Rt}function re(Ne,lt){var it=Ne==null?null:typeof Symbol<"u"&&Ne[Symbol.iterator]||Ne["@@iterator"];if(it!=null){var Rt,St,Zt,Kt,Ge=[],Ye=!0,Dr=!1;try{if(Zt=(it=it.call(Ne)).next,lt===0){if(Object(it)!==it)return;Ye=!1}else for(;!(Ye=(Rt=Zt.call(it)).done)&&(Ge.push(Rt.value),Ge.length!==lt);Ye=!0);}catch(wr){Dr=!0,St=wr}finally{try{if(!Ye&&it.return!=null&&(Kt=it.return(),Object(Kt)!==Kt))return}finally{if(Dr)throw St}}return Ge}}function G(Ne){if(Array.isArray(Ne))return Ne}function H(Ne,lt){if(Ne==null)return{};var it=B(Ne,lt),Rt,St;if(Object.getOwnPropertySymbols){var Zt=Object.getOwnPropertySymbols(Ne);for(St=0;St<Zt.length;St++)Rt=Zt[St],!(lt.indexOf(Rt)>=0)&&Object.prototype.propertyIsEnumerable.call(Ne,Rt)&&(it[Rt]=Ne[Rt])}return it}function B(Ne,lt){if(Ne==null)return{};var it={},Rt=Object.keys(Ne),St,Zt;for(Zt=0;Zt<Rt.length;Zt++)St=Rt[Zt],!(lt.indexOf(St)>=0)&&(it[St]=Ne[St]);return it}var $=function(){return t.default.createElement("div",{className:"grid grid-cols-12 gap-3 font-bold"},t.default.createElement("div",{className:"col-span-3 border-b-2"},"Pending Requests"),t.default.createElement("div",{className:"col-span-2 border-b-2 text-center"},"Age"),t.default.createElement("div",{className:"col-span-5 border-b-2 text-center"},"Accept Request"),t.default.createElement("div",{className:"col-span-2 border-b-2 text-center"},"Reject Request"))},N=function(lt){var it=lt.request,Rt=lt.groups,St=lt.signupAccept,Zt=lt.signupReject;H(lt,n);var Kt=((Date.now()-new Date(it.created_at).valueOf())/(1e3*60*60)).toFixed(1),Ge=t.default.useState(null),Ye=P(Ge,2),Dr=Ye[0],wr=Ye[1],tr=Dr&&it.state==="pending",br=t.default.useCallback(function(Bt){Bt.preventDefault(),St(it.user_email,Dr.name),wr(null)},[St,it,Dr]);return t.default.createElement("div",{className:"grid grid-cols-12 gap-3 my-1 flex items-center"},t.default.createElement("div",{className:"col-span-3"},it.user_email),t.default.createElement("div",{className:"col-span-2 text-center"},Kt," hrs"),t.default.createElement("div",{className:"col-span-5"},t.default.createElement("form",{onSubmit:br},t.default.createElement("div",{className:"grid grid-cols-5 gap-1"},t.default.createElement("div",{className:"col-span-3"},t.default.createElement("select",{value:Dr,onChange:function(hr){return wr(hr.target.value)},placeholder:"Select a group..."},Rt.map(function(Bt){return t.default.createElement("option",{value:Bt.name},Bt.name)}))),t.default.createElement("div",{className:"col-span-2"},t.default.createElement("button",{type:"submit",block:!0,disabled:!tr},"accept"))))),t.default.createElement("div",{className:"col-span-2 text-center"},t.default.createElement("button",{buttonTheme:"buttonDanger",showConfirm:!0,onClick:function(hr){return Zt(it)}},"reject")))},z=function(lt){var it=lt.requests,Rt=H(lt,i);return it.length?t.default.createElement("div",{className:"py-1"},t.default.createElement($,null),it.map(function(St){return t.default.createElement(N,A({key:St.user_email,request:St},Rt))})):null},X=function(){return t.default.createElement("div",{className:"grid grid-cols-12 gap-3 font-bold"},t.default.createElement("div",{className:"col-span-3 border-b-2"},"Awaiting Requests"),t.default.createElement("div",{className:"col-span-2 border-b-2 text-center"},"Age"),t.default.createElement("div",{className:"col-span-2 border-b-2 text-center"},"Reject Request"))},te=function(lt){var it=lt.request,Rt=lt.signupReject;H(lt,l);var St=((Date.now()-new Date(it.created_at).valueOf())/(1e3*60*60)).toFixed(1);return t.default.createElement("div",{className:"grid grid-cols-12 gap-3 my-1 flex items-center"},t.default.createElement("div",{className:"col-span-3"},it.user_email),t.default.createElement("div",{className:"col-span-2 text-center"},St," hrs"),t.default.createElement("div",{className:"col-span-2 text-center"},t.default.createElement(Button,{buttonTheme:"buttonDanger",showConfirm:!0,onClick:function(Kt){return Rt(it)}},"reject")))},pe=function(lt){var it=lt.requests,Rt=H(lt,a);return it.length?t.default.createElement("div",{className:"py-1"},t.default.createElement(X,null),it.map(function(St){return t.default.createElement(te,A({key:St.user_email,request:St},Rt))})):null},ke=function(){return t.default.createElement("div",{className:"grid grid-cols-12 gap-3 font-bold"},t.default.createElement("div",{className:"col-span-3 border-b-2"},"Rejected Requests"),t.default.createElement("div",{className:"col-span-5 border-b-2 text-center"},"Accept Request"),t.default.createElement("div",{className:"col-span-2 border-b-2 text-center"},"Delete Request"))},Pe=function(lt){var it=lt.request,Rt=lt.groups,St=lt.signupAccept,Zt=lt.deleteRequest;H(lt,s);var Kt=t.default.useState(null),Ge=P(Kt,2),Ye=Ge[0],Dr=Ge[1],wr=Ye&&it.state==="rejected",tr=t.default.useCallback(function(br){br.preventDefault(),St(it.user_email,Ye.name),Dr(null)},[St,it,Ye]);return t.default.createElement("div",{className:"grid grid-cols-12 gap-3 my-1 flex items-center"},t.default.createElement("div",{className:"col-span-3"},it.user_email),t.default.createElement("div",{className:"col-span-5"},t.default.createElement("form",{onSubmit:tr},t.default.createElement("div",{className:"grid grid-cols-5 gap-1"},t.default.createElement("div",{className:"col-span-3"},t.default.createElement("select",{value:Ye,onChange:function(Bt){return Dr(Bt.target.value)},placeholder:"Select a group..."},Rt.map(function(br){return t.default.createElement("option",{value:br.name},br.name)}))),t.default.createElement("div",{className:"col-span-2"},t.default.createElement(Button,{type:"submit",block:!0,disabled:!wr},"accept"))))),t.default.createElement("div",{className:"col-span-2 text-center"},t.default.createElement("button",{showConfirm:!0,onClick:function(Bt){return Zt(it)}},"delete")))},ge=function(lt){var it=lt.requests,Rt=H(lt,d);return it.length?t.default.createElement("div",{className:"py-1"},t.default.createElement(ke,null),it.map(function(St){return t.default.createElement(Pe,A({key:St.user_email,request:St},Rt))})):null},Ie=(0,r.default)(function(Ne){var lt=Ne.pending,it=Ne.awaiting,Rt=Ne.rejected,St=H(Ne,v),Zt=t.default.useState(!1),Kt=P(Zt,2),Ge=Kt[0],Ye=Kt[1],Dr=t.default.useCallback(function(tr){return tr.stopPropagation()},[]),wr={};return t.default.createElement("div",{className:`
        mb-5 py-2 px-4 border-2 rounded
        `.concat(Ge?wr.accent1:"cursor-pointer",`
      `),style:{borderColor:"currentColor"},onClick:function(br){Dr(br),Ye(!0)}},t.default.createElement("div",{onClick:function(br){Dr(br),Ye(!Ge)},className:`
          border-b-2 cursor-pointer
          `.concat(Ge?"border-current":"border-transparent",`
        `)},t.default.createElement("span",{className:"fa fa-".concat(Ge?"minus":"plus")}),t.default.createElement("span",{className:"font-bold text-xl ml-2"},"Requests")),Ge?t.default.createElement(t.default.Fragment,null,t.default.createElement(z,A({requests:lt},St)),t.default.createElement(pe,A({requests:it},St)),t.default.createElement(ge,A({requests:Rt},St))):null)});e.default=Ie})(f8);var h8={},A0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(Fe);function r(i){return i&&i.__esModule?i:{default:i}}var n=function(l){var a=l.children,s=l.className,d=s===void 0?"":s;return t.default.createElement("div",{className:"mb-5 last:mb-0 py-2 px-4 border-2 rounded m-auto ".concat(d)},a)};e.default=n})(A0);var kM={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(Fe);function r(B){return B&&B.__esModule?B:{default:B}}function n(B){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},n(B)}function i(){return i=Object.assign?Object.assign.bind():function(B){for(var $=1;$<arguments.length;$++){var N=arguments[$];for(var z in N)Object.prototype.hasOwnProperty.call(N,z)&&(B[z]=N[z])}return B},i.apply(this,arguments)}function l(B,$){if(!(B instanceof $))throw new TypeError("Cannot call a class as a function")}function a(B,$){for(var N=0;N<$.length;N++){var z=$[N];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(B,re(z.key),z)}}function s(B,$,N){return $&&a(B.prototype,$),N&&a(B,N),Object.defineProperty(B,"prototype",{writable:!1}),B}function d(B,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");B.prototype=Object.create($&&$.prototype,{constructor:{value:B,writable:!0,configurable:!0}}),Object.defineProperty(B,"prototype",{writable:!1}),$&&v(B,$)}function v(B,$){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(z,X){return z.__proto__=X,z},v(B,$)}function S(B){var $=L();return function(){var z=F(B),X;if($){var te=F(this).constructor;X=Reflect.construct(z,arguments,te)}else X=z.apply(this,arguments);return A(this,X)}}function A(B,$){if($&&(n($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(B)}function P(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function F(B){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(N){return N.__proto__||Object.getPrototypeOf(N)},F(B)}function K(B,$,N){return $=re($),$ in B?Object.defineProperty(B,$,{value:N,enumerable:!0,configurable:!0,writable:!0}):B[$]=N,B}function re(B){var $=G(B,"string");return n($)==="symbol"?$:String($)}function G(B,$){if(n(B)!=="object"||B===null)return B;var N=B[Symbol.toPrimitive];if(N!==void 0){var z=N.call(B,$||"default");if(n(z)!=="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(B)}var H=function($){var N;return N=function(z){d(te,z);var X=S(te);function te(){var pe;l(this,te);for(var ke=arguments.length,Pe=new Array(ke),ge=0;ge<ke;ge++)Pe[ge]=arguments[ge];return pe=X.call.apply(X,[this].concat(Pe)),K(P(pe),"state",{email:"",verify:"",group:null}),pe}return s(te,[{key:"handleSubmit",value:function(ke){ke.preventDefault(),this.props.sendInvite(this.state.email,this.state.group.name)}},{key:"render",value:function(){var ke=this,Pe=this.state,ge=Pe.email,Ie=Pe.verify,Ne=Pe.group,lt=ge&&Ie&&Ne&&ge===Ie;return t.default.createElement($,i({},this.props,this.state,{handleSubmit:function(Rt){return ke.handleSubmit(Rt)},update:function(Rt){return ke.setState(Rt)},canSubmit:lt}))}}]),te}(t.default.Component),K(N,"defaultProps",{amsAction:"send-invite",authLevel:5}),N};e.default=H})(kM);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(Fe),r=i(A0),n=i(kM);function i(a){return a&&a.__esModule?a:{default:a}}var l=(0,n.default)(function(a){var s=a.email,d=a.verify;a.group;var v=a.update,S=a.canSubmit,A=a.handleSubmit;return a.groups,t.default.createElement(r.default,null,t.default.createElement("div",{className:"grid grid-cols-10 gap-1 font-bold border-b-2 mb-1"},t.default.createElement("div",{className:"col-span-3 text-xl"},"Send Invite"),t.default.createElement("div",{className:"col-span-3 flex items-end"},"Verify Email"),t.default.createElement("div",{className:"col-span-3 flex items-end"},"Assign to Group"),t.default.createElement("div",{className:"col-span-1 flex items-end"})),t.default.createElement("form",{onSubmit:A},t.default.createElement("div",{className:"grid grid-cols-10 gap-1 mb-2"},t.default.createElement("div",{className:"col-span-3"},t.default.createElement("input",{placeholder:"Enter user email...",type:"email",onChange:function(L){return v({email:L.target.value})},value:s})),t.default.createElement("div",{className:"col-span-3"},t.default.createElement("input",{placeholder:"Verify user email...",type:"email",onChange:function(L){return v({verify:L.target.value})},value:d})),t.default.createElement("div",{className:"col-span-3"}),t.default.createElement("div",{className:"col-span-1"},t.default.createElement(Button,{block:!0,type:"submit",disabled:!S},"send")))))});e.default=l})(h8);var p8={},d8={};function Sy(){return Sy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sy.apply(this,arguments)}var GS={exports:{}},m8={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ù:"u",ú:"u",û:"u",ü:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z"},g8=Object.keys(m8).join("|"),tQ=new RegExp(g8,"g"),rQ=new RegExp(g8,""),y8=function(e){return e.replace(tQ,function(t){return m8[t]})},nQ=function(e){return!!e.match(rQ)};GS.exports=y8;GS.exports.has=nQ;GS.exports.remove=y8;var iQ=GS.exports;const aQ=Xs(iQ);var Qu={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0};HS.rankings=Qu;var oQ=function(e,t){return String(e.rankedItem).localeCompare(t.rankedItem)};function HS(e,t,r){r===void 0&&(r={});var n=r,i=n.keys,l=n.threshold,a=l===void 0?Qu.MATCHES:l,s=n.baseSort,d=s===void 0?oQ:s,v=e.reduce(S,[]);return v.sort(function(A,P){return cQ(A,P,d)}).map(function(A){var P=A.item;return P});function S(A,P,L){var F=sQ(P,i,t,r),K=F.rankedItem,re=F.rank,G=F.keyIndex,H=F.keyThreshold,B=H===void 0?a:H;return re>=B&&A.push({rankedItem:K,item:P,rank:re,index:L,keyIndex:G}),A}}function sQ(e,t,r,n){if(!t)return{rankedItem:e,rank:Y5(e,r,n),keyIndex:-1,keyThreshold:n.threshold};var i=hQ(e,t);return i.reduce(function(l,a,s){var d=l.rank,v=l.rankedItem,S=l.keyIndex,A=l.keyThreshold,P=a.itemValue,L=a.attributes,F=Y5(P,r,n),K=v,re=L.minRanking,G=L.maxRanking,H=L.threshold;return F<re&&F>=Qu.MATCHES?F=re:F>G&&(F=G),F>d&&(d=F,S=s,A=H,K=P),{rankedItem:K,rank:d,keyIndex:S,keyThreshold:A}},{rank:Qu.NO_MATCH,keyIndex:-1,keyThreshold:n.threshold})}function Y5(e,t,r){return e=J5(e,r),t=J5(t,r),t.length>e.length?Qu.NO_MATCH:e===t?Qu.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase(),t=t.toLowerCase(),e===t?Qu.EQUAL:e.indexOf(t)===0?Qu.STARTS_WITH:e.indexOf(" "+t)!==-1?Qu.WORD_STARTS_WITH:e.indexOf(t)!==-1?Qu.CONTAINS:t.length===1?Qu.NO_MATCH:lQ(e).indexOf(t)!==-1?Qu.ACRONYM:uQ(e,t))}function lQ(e){var t="",r=e.split(" ");return r.forEach(function(n){var i=n.split("-");i.forEach(function(l){t+=l.substr(0,1)})}),t}function uQ(e,t){var r=0,n=0;function i(A,P,L){for(var F=L;F<P.length;F++){var K=P[F];if(K===A)return r+=1,F+1}return-1}function l(A){var P=r/t.length,L=Qu.MATCHES+P*(1/A);return L}var a=i(t[0],e,0);if(a<0)return Qu.NO_MATCH;n=a;for(var s=1;s<t.length;s++){var d=t[s];n=i(d,e,n);var v=n>-1;if(!v)return Qu.NO_MATCH}var S=n-a;return l(S)}function cQ(e,t,r){var n=-1,i=1,l=e.rank,a=e.keyIndex,s=t.rank,d=t.keyIndex;return l===s?a===d?r(e,t):a<d?n:i:l>s?n:i}function J5(e,t){var r=t.keepDiacritics;return e=""+e,r||(e=aQ(e)),e}function fQ(e,t){typeof t=="object"&&(t=t.key);var r;return typeof t=="function"?r=t(e):t.indexOf(".")!==-1?r=t.split(".").reduce(function(n,i){return n?n[i]:null},e):r=e[t],r!=null?[].concat(r):null}function hQ(e,t){return t.reduce(function(r,n){var i=fQ(e,n);return i&&i.forEach(function(l){r.push({itemValue:l,attributes:pQ(n)})}),r},[])}function pQ(e){return typeof e=="string"&&(e={key:e}),Sy({maxRanking:1/0,minRanking:-1/0},e)}const dQ=Object.freeze(Object.defineProperty({__proto__:null,matchSorter:HS,rankings:Qu},Symbol.toStringTag,{value:"Module"})),IM=Vy(dQ);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe),r=IM;function n($){return $&&$.__esModule?$:{default:$}}function i($){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},i($)}function l(){return l=Object.assign?Object.assign.bind():function($){for(var N=1;N<arguments.length;N++){var z=arguments[N];for(var X in z)Object.prototype.hasOwnProperty.call(z,X)&&($[X]=z[X])}return $},l.apply(this,arguments)}function a($,N){if(!($ instanceof N))throw new TypeError("Cannot call a class as a function")}function s($,N){for(var z=0;z<N.length;z++){var X=N[z];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty($,G(X.key),X)}}function d($,N,z){return N&&s($.prototype,N),z&&s($,z),Object.defineProperty($,"prototype",{writable:!1}),$}function v($,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(N&&N.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),Object.defineProperty($,"prototype",{writable:!1}),N&&S($,N)}function S($,N){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(X,te){return X.__proto__=te,X},S($,N)}function A($){var N=F();return function(){var X=K($),te;if(N){var pe=K(this).constructor;te=Reflect.construct(X,arguments,pe)}else te=X.apply(this,arguments);return P(this,te)}}function P($,N){if(N&&(i(N)==="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L($)}function L($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function K($){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(z){return z.__proto__||Object.getPrototypeOf(z)},K($)}function re($,N,z){return N=G(N),N in $?Object.defineProperty($,N,{value:z,enumerable:!0,configurable:!0,writable:!0}):$[N]=z,$}function G($){var N=H($,"string");return i(N)==="symbol"?N:String(N)}function H($,N){if(i($)!=="object"||$===null)return $;var z=$[Symbol.toPrimitive];if(z!==void 0){var X=z.call($,N||"default");if(i(X)!=="object")return X;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)($)}var B=function(N){var z;return z=function(X){v(pe,X);var te=A(pe);function pe(){var ke;a(this,pe);for(var Pe=arguments.length,ge=new Array(Pe),Ie=0;Ie<Pe;Ie++)ge[Ie]=arguments[Ie];return ke=te.call.apply(te,[this].concat(ge)),re(L(ke),"state",{search:"",amount:5}),ke}return d(pe,[{key:"adjustAmount",value:function(Pe,ge){var Ie=this.state.amount;(Pe<0&&Ie>5||Pe>0&&Ie<ge)&&this.setState({amount:Ie+Pe})}},{key:"render",value:function(){var Pe=this,ge=(0,r.matchSorter)(this.props.users,this.state.search,{keys:["email"]}),Ie=Math.max(0,ge.length-this.state.amount);return t.default.createElement(N,l({},this.props,this.state,{setSearch:function(lt){return Pe.setState({search:lt})},adjustAmount:function(lt){return Pe.adjustAmount(lt,ge.length)},matches:this.state.search?ge.slice(0,this.state.amount):[],remaining:Ie}))}}]),pe}(t.default.Component),re(z,"defaultProps",{amsAction:"user-search",authLevel:5}),z};e.default=B})(d8);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(Fe),r=a(A0),n=a(d8),i=["user","groups","assignToGroup","removeFromGroup","deleteUser"],l=["search","setSearch","adjustAmount","matches","remaining"];function a(B){return B&&B.__esModule?B:{default:B}}function s(){return s=Object.assign?Object.assign.bind():function(B){for(var $=1;$<arguments.length;$++){var N=arguments[$];for(var z in N)Object.prototype.hasOwnProperty.call(N,z)&&(B[z]=N[z])}return B},s.apply(this,arguments)}function d(B,$){return L(B)||P(B,$)||S(B,$)||v()}function v(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S(B,$){if(B){if(typeof B=="string")return A(B,$);var N=Object.prototype.toString.call(B).slice(8,-1);if(N==="Object"&&B.constructor&&(N=B.constructor.name),N==="Map"||N==="Set")return Array.from(B);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return A(B,$)}}function A(B,$){($==null||$>B.length)&&($=B.length);for(var N=0,z=new Array($);N<$;N++)z[N]=B[N];return z}function P(B,$){var N=B==null?null:typeof Symbol<"u"&&B[Symbol.iterator]||B["@@iterator"];if(N!=null){var z,X,te,pe,ke=[],Pe=!0,ge=!1;try{if(te=(N=N.call(B)).next,$===0){if(Object(N)!==N)return;Pe=!1}else for(;!(Pe=(z=te.call(N)).done)&&(ke.push(z.value),ke.length!==$);Pe=!0);}catch(Ie){ge=!0,X=Ie}finally{try{if(!Pe&&N.return!=null&&(pe=N.return(),Object(pe)!==pe))return}finally{if(ge)throw X}}return ke}}function L(B){if(Array.isArray(B))return B}function F(B,$){if(B==null)return{};var N=K(B,$),z,X;if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(B);for(X=0;X<te.length;X++)z=te[X],!($.indexOf(z)>=0)&&Object.prototype.propertyIsEnumerable.call(B,z)&&(N[z]=B[z])}return N}function K(B,$){if(B==null)return{};var N={},z=Object.keys(B),X,te;for(te=0;te<z.length;te++)X=z[te],!($.indexOf(X)>=0)&&(N[X]=B[X]);return N}var re=function(){return t.default.createElement("div",{className:"grid grid-cols-15 py-1 gap-3 font-bold"},t.default.createElement("div",{className:"col-span-5 border-b-2"},"User Email"),t.default.createElement("div",{className:"col-span-4 text-center border-b-2"},"Add to Group"),t.default.createElement("div",{className:"col-span-4 text-center border-b-2"},"Remove from Group"),t.default.createElement("div",{className:"col-span-2 text-center border-b-2"},"Delete User"))},G=function($){var N=$.user,z=$.groups,X=$.assignToGroup,te=$.removeFromGroup,pe=$.deleteUser;F($,i);var ke=t.default.useState(""),Pe=d(ke,2),ge=Pe[0],Ie=Pe[1],Ne=t.default.useState(""),lt=d(Ne,2),it=lt[0],Rt=lt[1];z.sort(function(wr,tr){return wr.authLevel===tr.authLevel?wr.name<tr.name?-1:wr.name>tr.name?1:0:wr.authLevel-tr.authLevel});var St=z.reduce(function(wr,tr){var br=d(wr,2),Bt=br[0],hr=br[1];return N.groups.includes(tr.name)?Bt.push(tr):hr.push(tr),[Bt,hr]},[[],[]]),Zt=d(St,2),Kt=Zt[0],Ge=Zt[1],Ye=t.default.useCallback(function(wr){X(N.email,ge.name),Ie("")},[X,N,ge]),Dr=t.default.useCallback(function(wr){te(N.email,it.name),Rt("")},[te,N,it]);return t.default.createElement("div",{className:"grid grid-cols-15 py-1 gap-3"},t.default.createElement("div",{className:"col-span-5 whitespace-nowrap overflow-hidden flex items-center"},N.email),t.default.createElement("div",{className:"col-span-4"},t.default.createElement("div",{className:"grid grid-cols-12 gap-1"},t.default.createElement("div",{className:"col-span-8"},t.default.createElement(Select,{multi:!1,placeholder:"Select a group...",options:Ge,accessor:function(tr){return tr.name},listAccessor:function(tr){return"".concat(tr.name," (auth level ").concat(tr.authLevel,")")},value:ge,onChange:Ie})),t.default.createElement("div",{className:"col-span-4"},t.default.createElement("button",{block:!0,disabled:!ge,onClick:Ye},"add")))),t.default.createElement("div",{className:"col-span-4"},t.default.createElement("div",{className:"grid grid-cols-12 gap-1"},t.default.createElement("div",{className:"col-span-8"},t.default.createElement("select",{placeholder:"Select a group...",value:it,onChange:function(tr){return Rt(tr.target.value)}},Kt.map(function(wr){return t.default.createElement("option",{value:wr.name},wr.name)}))),t.default.createElement("div",{className:"col-span-4"},t.default.createElement("button",{block:!0,disabled:!it,onClick:Dr},"remove")))),t.default.createElement("div",{className:"col-span-2 flex justify-center"},t.default.createElement("button",{buttonTheme:"buttonDanger",showConfirm:!0,onClick:function(tr){return pe(N.email)}},"delete")))},H=(0,n.default)(function(B){var $=B.search,N=B.setSearch,z=B.adjustAmount,X=B.matches,te=B.remaining,pe=F(B,l);return t.default.createElement(r.default,null,t.default.createElement("div",{className:"grid grid-cols-2 gap-x-3 gap-y-2"},t.default.createElement("div",{className:"col-span-1"},t.default.createElement("input",{placeholder:"Search for a user...",showClear:!0,value:$,onChange:function(Pe){return N(Pe.target.value)}})),t.default.createElement("div",{className:"col-span-1"},$?t.default.createElement("div",{className:"flex justify-center"},t.default.createElement("button",{className:"mx-1",disabled:X.length<=5,onClick:function(Pe){return z(-5)}},"Show Less"),t.default.createElement("button",{className:"mx-1",disabled:!te,onClick:function(Pe){return z(5)}},"Show More")):null),$?t.default.createElement("div",{className:"col-span-2"},t.default.createElement(re,null),X.map(function(ke){return t.default.createElement(G,s({key:ke.email},pe,{user:ke}))})):null),$&&te?t.default.createElement("div",{className:"py-1"},"Plus ",te," others..."):null)});e.default=H})(p8);var v8={},MM={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(Fe);function r(B){return B&&B.__esModule?B:{default:B}}function n(B){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},n(B)}function i(){return i=Object.assign?Object.assign.bind():function(B){for(var $=1;$<arguments.length;$++){var N=arguments[$];for(var z in N)Object.prototype.hasOwnProperty.call(N,z)&&(B[z]=N[z])}return B},i.apply(this,arguments)}function l(B,$){if(!(B instanceof $))throw new TypeError("Cannot call a class as a function")}function a(B,$){for(var N=0;N<$.length;N++){var z=$[N];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(B,re(z.key),z)}}function s(B,$,N){return $&&a(B.prototype,$),N&&a(B,N),Object.defineProperty(B,"prototype",{writable:!1}),B}function d(B,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");B.prototype=Object.create($&&$.prototype,{constructor:{value:B,writable:!0,configurable:!0}}),Object.defineProperty(B,"prototype",{writable:!1}),$&&v(B,$)}function v(B,$){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(z,X){return z.__proto__=X,z},v(B,$)}function S(B){var $=L();return function(){var z=F(B),X;if($){var te=F(this).constructor;X=Reflect.construct(z,arguments,te)}else X=z.apply(this,arguments);return A(this,X)}}function A(B,$){if($&&(n($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(B)}function P(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function F(B){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(N){return N.__proto__||Object.getPrototypeOf(N)},F(B)}function K(B,$,N){return $=re($),$ in B?Object.defineProperty(B,$,{value:N,enumerable:!0,configurable:!0,writable:!0}):B[$]=N,B}function re(B){var $=G(B,"string");return n($)==="symbol"?$:String($)}function G(B,$){if(n(B)!=="object"||B===null)return B;var N=B[Symbol.toPrimitive];if(N!==void 0){var z=N.call(B,$||"default");if(n(z)!=="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(B)}var H=function($){var N;return N=function(z){d(te,z);var X=S(te);function te(){var pe;l(this,te);for(var ke=arguments.length,Pe=new Array(ke),ge=0;ge<ke;ge++)Pe[ge]=arguments[ge];return pe=X.call.apply(X,[this].concat(Pe)),K(P(pe),"state",{group:null,authLevel:-1}),pe}return s(te,[{key:"handleSubmit",value:function(ke){ke.preventDefault();var Pe=this.state,ge=Pe.group,Ie=Pe.authLevel;this.props.assignToProject(ge.name,Ie),this.setState({group:null,authLevel:-1})}},{key:"render",value:function(){var ke=this,Pe=this.props.user,ge=this.state,Ie=ge.group,Ne=ge.authLevel,lt=Ie&&Ne>=0&&Pe.authLevel>=Ne;return t.default.createElement($,i({},this.props,this.state,{groups:this.props.otherGroups,update:function(Rt){return ke.setState(Rt)},canSubmit:lt,handleSubmit:function(Rt){return ke.handleSubmit(Rt)}}))}}]),te}(t.default.Component),K(N,"defaultProps",{amsAction:"assign-to-project",authLevel:5}),N};e.default=H})(MM);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(Fe),r=i(A0),n=i(MM);function i(a){return a&&a.__esModule?a:{default:a}}var l=(0,n.default)(function(a){var s=a.groups,d=a.user,v=a.group,S=a.authLevel,A=a.update,P=a.canSubmit,L=a.handleSubmit;return t.default.createElement(r.default,{className:"max-w-2xl pb-4"},t.default.createElement("div",{className:"border-b-2 mb-1"},t.default.createElement("div",{className:"grid grid-cols-4 gap-1"},t.default.createElement("div",{className:"col-span-2 font-bold"},"Assign to Project"),t.default.createElement("div",{className:"col-span-1"},"Authority Level"))),t.default.createElement("form",{onSubmit:L},t.default.createElement("div",{className:"grid grid-cols-4 gap-1"},t.default.createElement("div",{className:"col-span-2"},t.default.createElement("select",{value:v,onChange:function(K){return A({group:K.target.value})},placeholder:"Select a group..."},s.map(function(F){return t.default.createElement("option",{value:F.name},F.name)}))),t.default.createElement("div",{className:"col-span-1"},t.default.createElement("input",{type:"number",min:"0",max:d.authLevel,required:!0,value:S,onChange:function(K){return A({authLevel:K.target.value})}})),t.default.createElement("div",{className:"col-span-1 flex justify-center"},t.default.createElement("button",{type:"submit",block:!0,disabled:!P},"assign")))))});e.default=l})(v8);var _8={},OM={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(Fe);function r(B){return B&&B.__esModule?B:{default:B}}function n(B){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},n(B)}function i(){return i=Object.assign?Object.assign.bind():function(B){for(var $=1;$<arguments.length;$++){var N=arguments[$];for(var z in N)Object.prototype.hasOwnProperty.call(N,z)&&(B[z]=N[z])}return B},i.apply(this,arguments)}function l(B,$){if(!(B instanceof $))throw new TypeError("Cannot call a class as a function")}function a(B,$){for(var N=0;N<$.length;N++){var z=$[N];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(B,re(z.key),z)}}function s(B,$,N){return $&&a(B.prototype,$),N&&a(B,N),Object.defineProperty(B,"prototype",{writable:!1}),B}function d(B,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");B.prototype=Object.create($&&$.prototype,{constructor:{value:B,writable:!0,configurable:!0}}),Object.defineProperty(B,"prototype",{writable:!1}),$&&v(B,$)}function v(B,$){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(z,X){return z.__proto__=X,z},v(B,$)}function S(B){var $=L();return function(){var z=F(B),X;if($){var te=F(this).constructor;X=Reflect.construct(z,arguments,te)}else X=z.apply(this,arguments);return A(this,X)}}function A(B,$){if($&&(n($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(B)}function P(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function F(B){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(N){return N.__proto__||Object.getPrototypeOf(N)},F(B)}function K(B,$,N){return $=re($),$ in B?Object.defineProperty(B,$,{value:N,enumerable:!0,configurable:!0,writable:!0}):B[$]=N,B}function re(B){var $=G(B,"string");return n($)==="symbol"?$:String($)}function G(B,$){if(n(B)!=="object"||B===null)return B;var N=B[Symbol.toPrimitive];if(N!==void 0){var z=N.call(B,$||"default");if(n(z)!=="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(B)}var H=function($){var N;return N=function(z){d(te,z);var X=S(te);function te(){var pe;l(this,te);for(var ke=arguments.length,Pe=new Array(ke),ge=0;ge<ke;ge++)Pe[ge]=arguments[ge];return pe=X.call.apply(X,[this].concat(Pe)),K(P(pe),"state",{group:"",authLevel:-1}),pe}return s(te,[{key:"handleSubmit",value:function(ke){ke.preventDefault();var Pe=this.state,ge=Pe.group,Ie=Pe.authLevel;this.props.createAndAssign(ge,Ie),this.setState({group:"",authLevel:-1})}},{key:"render",value:function(){var ke=this,Pe=this.props.user,ge=this.state,Ie=ge.group,Ne=ge.authLevel,lt=Ie&&Ne>=0&&Pe.authLevel>=Ne;return t.default.createElement($,i({},this.props,this.state,{groups:this.props.otherGroups,update:function(Rt){return ke.setState(Rt)},canSubmit:lt,handleSubmit:function(Rt){return ke.handleSubmit(Rt)}}))}}]),te}(t.default.Component),K(N,"defaultProps",{amsAction:"create-group",authLevel:5}),N};e.default=H})(OM);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(Fe),r=i(A0),n=i(OM);function i(a){return a&&a.__esModule?a:{default:a}}var l=(0,n.default)(function(a){var s=a.user,d=a.group,v=a.authLevel,S=a.update,A=a.canSubmit,P=a.handleSubmit;return t.default.createElement(r.default,{className:"max-w-2xl pb-4"},t.default.createElement("div",{className:"border-b-2 mb-1"},t.default.createElement("div",{className:"grid grid-cols-4 gap-1"},t.default.createElement("div",{className:"col-span-2 font-bold"},"Create Group"),t.default.createElement("div",{className:"col-span-1"},"Authority Level"))),t.default.createElement("form",{onSubmit:P},t.default.createElement("div",{className:"grid grid-cols-4 gap-1"},t.default.createElement("div",{className:"col-span-2"},t.default.createElement(Input,{placeholder:"Enter group name...",required:!0,showClear:!0,value:d,onChange:function(F){return S({group:F})}})),t.default.createElement("div",{className:"col-span-1"},t.default.createElement("input",{type:"number",min:"0",max:s.authLevel,required:!0,value:v,onChange:function(F){return S({authLevel:F.target.value})}})),t.default.createElement("div",{className:"col-span-1 flex justify-center"},t.default.createElement("button",{type:"submit",block:!0,disabled:!A},"create")))))});e.default=l})(_8);var b8={},x8={},w8={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s(Fe),r=IM,n=["value","onChange"],i=["group","User","removeFromGroup","deleteUser"],l=["group","User","assignToGroup"],a=["group","users"];function s(N){return N&&N.__esModule?N:{default:N}}function d(){return d=Object.assign?Object.assign.bind():function(N){for(var z=1;z<arguments.length;z++){var X=arguments[z];for(var te in X)Object.prototype.hasOwnProperty.call(X,te)&&(N[te]=X[te])}return N},d.apply(this,arguments)}function v(N,z){return F(N)||L(N,z)||A(N,z)||S()}function S(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(N,z){if(N){if(typeof N=="string")return P(N,z);var X=Object.prototype.toString.call(N).slice(8,-1);if(X==="Object"&&N.constructor&&(X=N.constructor.name),X==="Map"||X==="Set")return Array.from(N);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return P(N,z)}}function P(N,z){(z==null||z>N.length)&&(z=N.length);for(var X=0,te=new Array(z);X<z;X++)te[X]=N[X];return te}function L(N,z){var X=N==null?null:typeof Symbol<"u"&&N[Symbol.iterator]||N["@@iterator"];if(X!=null){var te,pe,ke,Pe,ge=[],Ie=!0,Ne=!1;try{if(ke=(X=X.call(N)).next,z===0){if(Object(X)!==X)return;Ie=!1}else for(;!(Ie=(te=ke.call(X)).done)&&(ge.push(te.value),ge.length!==z);Ie=!0);}catch(lt){Ne=!0,pe=lt}finally{try{if(!Ie&&X.return!=null&&(Pe=X.return(),Object(Pe)!==Pe))return}finally{if(Ne)throw pe}}return ge}}function F(N){if(Array.isArray(N))return N}function K(N,z){if(N==null)return{};var X=re(N,z),te,pe;if(Object.getOwnPropertySymbols){var ke=Object.getOwnPropertySymbols(N);for(pe=0;pe<ke.length;pe++)te=ke[pe],!(z.indexOf(te)>=0)&&Object.prototype.propertyIsEnumerable.call(N,te)&&(X[te]=N[te])}return X}function re(N,z){if(N==null)return{};var X={},te=Object.keys(N),pe,ke;for(ke=0;ke<te.length;ke++)pe=te[ke],!(z.indexOf(pe)>=0)&&(X[pe]=N[pe]);return X}var G=function(z){var X=z.value,te=z.onChange;return K(z,n),t.default.createElement("div",{className:"grid grid-cols-9 font-bold gap-3"},t.default.createElement("div",{className:"col-span-4 border-b-2"},t.default.createElement("div",null,"User Email"),t.default.createElement("div",{className:"mb-1"},t.default.createElement("input",{small:!0,showClear:!0,placeholder:"Searh users...",value:X,onChange:function(ke){return te(ke.target.value)}}))),t.default.createElement("div",{className:"col-span-3 border-b-2 flex justify-center items-end"},"Remove from Group"),t.default.createElement("div",{className:"col-span-2 border-b-2 flex justify-center items-end"},"Delete User"))},H=function(z){var X=z.group,te=z.User,pe=z.removeFromGroup,ke=z.deleteUser;return K(z,i),t.default.createElement("div",{className:"grid grid-cols-9 my-1"},t.default.createElement("div",{className:"col-span-4"},te.email),t.default.createElement("div",{className:"col-span-3 flex justify-center"},t.default.createElement("button",{showConfirm:!0,onClick:function(ge){return pe(te.email,X.name)}},"remove")),t.default.createElement("div",{className:"col-span-2 flex justify-center"},t.default.createElement("button",{showConfirm:!0,onClick:function(ge){return ke(te.email)}},"delete")))},B=function(z){var X=z.group,te=z.User,pe=z.assignToGroup;return K(z,l),t.default.createElement("div",{className:"grid grid-cols-12 mb-1 flex items-center"},t.default.createElement("div",{className:"col-span-8"},te.email),t.default.createElement("div",{className:"col-span-4"},t.default.createElement("button",{onClick:function(Pe){return pe(te.email,X.name)}},"add to group")))},$=function(z){var X=z.group,te=z.users,pe=K(z,a),ke=t.default.useState(5),Pe=v(ke,2),ge=Pe[0],Ie=Pe[1],Ne=t.default.useState(""),lt=v(Ne,2),it=lt[0],Rt=lt[1],St=t.default.useState(""),Zt=v(St,2),Kt=Zt[0],Ge=Zt[1],Ye=te.reduce(function(Bt,hr){var cr=v(Bt,2),Mn=cr[0],Hn=cr[1];return hr.groups.includes(X.name)?Mn.push(hr):Hn.push(hr),[Mn,Hn]},[[],[]]),Dr=v(Ye,2),wr=Dr[0],tr=Dr[1];wr.sort(function(Bt,hr){return Bt.email<hr.email?-1:Bt.email>hr.email?1:0});var br=(0,r.matchSorter)(tr,Kt,{keys:["email"]});return console.log("???",wr),t.default.createElement("div",null,t.default.createElement("div",{className:"mb-5 grid grid-cols-3 gap-2"},t.default.createElement("div",{className:"col-span-1 relative"},t.default.createElement("input",{value:Kt,onChange:function(hr){return Ge(hr.target.value)},placeholder:"Search for another user...",showClear:!0}),Kt&&br.length?t.default.createElement("div",{className:"absolute left-0 bottom-0 right-0"},br.length<=5?null:t.default.createElement("div",{className:"flex justify-center"},t.default.createElement("button",{onClick:function(hr){return Ie(ge-5)},disabled:ge===5,className:"mx-1"},"Show Less"),t.default.createElement("button",{onClick:function(hr){return Ie(ge+5)},disabled:ge>br.length,className:"mx-1"},"Show More"))):null),t.default.createElement("div",{className:"col-span-2"},Kt?t.default.createElement("div",null,br.length?null:t.default.createElement("div",{className:"pt-1"},"No users found..."),br.slice(0,ge).map(function(Bt){return t.default.createElement(B,d({},pe,{key:Bt.email,group:X,User:Bt}))}),br.length<ge?null:t.default.createElement("div",null,"Plus ",br.length-ge," others...")):null)),t.default.createElement(G,{onChange:Rt,value:it}),(0,r.matchSorter)(wr,it,{keys:["email"]}).map(function(Bt){return t.default.createElement(H,d({},pe,{key:Bt.email,User:Bt,group:X}),Bt.email)}))};e.default=$})(w8);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.GroupHeader=void 0;var t=l(Fe),r=l(w8),n=l(Zy),i=["group","project","adjustAuthLevel","deleteGroup","removeFromProject"];function l(H){return H&&H.__esModule?H:{default:H}}function a(){return a=Object.assign?Object.assign.bind():function(H){for(var B=1;B<arguments.length;B++){var $=arguments[B];for(var N in $)Object.prototype.hasOwnProperty.call($,N)&&(H[N]=$[N])}return H},a.apply(this,arguments)}function s(H,B){return P(H)||A(H,B)||v(H,B)||d()}function d(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(H,B){if(H){if(typeof H=="string")return S(H,B);var $=Object.prototype.toString.call(H).slice(8,-1);if($==="Object"&&H.constructor&&($=H.constructor.name),$==="Map"||$==="Set")return Array.from(H);if($==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return S(H,B)}}function S(H,B){(B==null||B>H.length)&&(B=H.length);for(var $=0,N=new Array(B);$<B;$++)N[$]=H[$];return N}function A(H,B){var $=H==null?null:typeof Symbol<"u"&&H[Symbol.iterator]||H["@@iterator"];if($!=null){var N,z,X,te,pe=[],ke=!0,Pe=!1;try{if(X=($=$.call(H)).next,B===0){if(Object($)!==$)return;ke=!1}else for(;!(ke=(N=X.call($)).done)&&(pe.push(N.value),pe.length!==B);ke=!0);}catch(ge){Pe=!0,z=ge}finally{try{if(!ke&&$.return!=null&&(te=$.return(),Object(te)!==te))return}finally{if(Pe)throw z}}return pe}}function P(H){if(Array.isArray(H))return H}function L(H,B){if(H==null)return{};var $=F(H,B),N,z;if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(H);for(z=0;z<X.length;z++)N=X[z],!(B.indexOf(N)>=0)&&Object.prototype.propertyIsEnumerable.call(H,N)&&($[N]=H[N])}return $}function F(H,B){if(H==null)return{};var $={},N=Object.keys(H),z,X;for(X=0;X<N.length;X++)z=N[X],!(B.indexOf(z)>=0)&&($[z]=H[z]);return $}var K=function(B){var $=B.onChange,N=B.value;return t.default.createElement("div",{className:"grid grid-cols-12 gap-3 text-center font-bold mb-1"},t.default.createElement("div",{className:"col-span-4 text-left border-b-2 text-xl"},t.default.createElement("div",null,"Groups in Project"),t.default.createElement("div",{className:"mb-1"},t.default.createElement("input",{small:!0,showClear:!0,placeholder:"Search groups...",value:N,onChange:function(X){return $(X.target.value)}}))),t.default.createElement("div",{className:"col-span-3 border-b-2 flex justify-center items-end"},"Adjust Project Authority"),t.default.createElement("div",{className:"col-span-3 border-b-2 flex justify-center items-end"},"Remove from Project"),t.default.createElement("div",{className:"col-span-2 border-b-2 flex justify-center items-end"},"Delete Group"))};e.GroupHeader=K;var re=function(B,$){return!isNaN($)&&B!==$&&$>=0&&$<=10},G=function(B){var $=B.group,N=B.project,z=B.adjustAuthLevel,X=B.deleteGroup,te=B.removeFromProject,pe=L(B,i),ke=t.default.useState(!1),Pe=s(ke,2),ge=Pe[0],Ie=Pe[1],Ne=t.default.useCallback(function(){return Ie(!ge)},[ge]),lt=$.projects.reduce(function(Ye,Dr){return Dr.project_name===N?Dr:Ye},{}),it=t.default.useState((0,n.default)(lt,"auth_level",-1)),Rt=s(it,2),St=Rt[0],Zt=Rt[1],Kt=t.default.useCallback(function(Ye){Ye.preventDefault(),z($.name,St)},[z,$.name,St]),Ge=useTheme();return t.default.createElement("div",{className:`
        mb-1 py-1 px-2 rounded `.concat(ge?Ge.accent1:"")},t.default.createElement("div",{className:"grid grid-cols-12 gap-3"},t.default.createElement("div",{className:"col-span-4 flex items-center"},t.default.createElement("div",{className:`
              px-2 py-1 mr-1 cursor-pointer rounded flex justify-center
              hover:`.concat(Ge.accent2," ").concat(Ge.transition,`
            `),onClick:Ne},ge?t.default.createElement("span",{className:"fa fa-minus"}):t.default.createElement("span",{className:"fa fa-plus"})),t.default.createElement("div",{className:"flex-1"},$.name)),t.default.createElement("div",{className:"col-span-3"},t.default.createElement("form",{onSubmit:Kt},t.default.createElement("div",{className:"grid grid-cols-12 gap-1 flex items-center"},t.default.createElement("div",{className:"col-span-6"},t.default.createElement("input",{type:"number",min:"0",max:"10",required:!0,value:St,onChange:function(Dr){return Zt(Dr.target.value)}})),t.default.createElement("div",{className:"col-span-6"},t.default.createElement("button",{type:"submit",disabled:!re(+lt.auth_level,+St)},"adjust"))))),t.default.createElement("div",{className:"col-span-3 flex justify-center"},t.default.createElement("button",{showConfirm:!0,onClick:function(Dr){return te($.name)}},"remove")),t.default.createElement("div",{className:"col-span-2 flex justify-center"},t.default.createElement("button",{showConfirm:!0,onClick:function(Dr){return X($.name)}},"delete"))),ge?t.default.createElement("div",{className:"mx-10 mt-2"},t.default.createElement(r.default,a({group:$},pe))):null)};e.default=G})(x8);var S8={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(Fe),r=IM,n=["groups"];function i(X){return X&&X.__esModule?X:{default:X}}function l(X){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},l(X)}function a(){return a=Object.assign?Object.assign.bind():function(X){for(var te=1;te<arguments.length;te++){var pe=arguments[te];for(var ke in pe)Object.prototype.hasOwnProperty.call(pe,ke)&&(X[ke]=pe[ke])}return X},a.apply(this,arguments)}function s(X,te){if(X==null)return{};var pe=d(X,te),ke,Pe;if(Object.getOwnPropertySymbols){var ge=Object.getOwnPropertySymbols(X);for(Pe=0;Pe<ge.length;Pe++)ke=ge[Pe],!(te.indexOf(ke)>=0)&&Object.prototype.propertyIsEnumerable.call(X,ke)&&(pe[ke]=X[ke])}return pe}function d(X,te){if(X==null)return{};var pe={},ke=Object.keys(X),Pe,ge;for(ge=0;ge<ke.length;ge++)Pe=ke[ge],!(te.indexOf(Pe)>=0)&&(pe[Pe]=X[Pe]);return pe}function v(X,te){if(!(X instanceof te))throw new TypeError("Cannot call a class as a function")}function S(X,te){for(var pe=0;pe<te.length;pe++){var ke=te[pe];ke.enumerable=ke.enumerable||!1,ke.configurable=!0,"value"in ke&&(ke.writable=!0),Object.defineProperty(X,$(ke.key),ke)}}function A(X,te,pe){return te&&S(X.prototype,te),pe&&S(X,pe),Object.defineProperty(X,"prototype",{writable:!1}),X}function P(X,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function");X.prototype=Object.create(te&&te.prototype,{constructor:{value:X,writable:!0,configurable:!0}}),Object.defineProperty(X,"prototype",{writable:!1}),te&&L(X,te)}function L(X,te){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ke,Pe){return ke.__proto__=Pe,ke},L(X,te)}function F(X){var te=G();return function(){var ke=H(X),Pe;if(te){var ge=H(this).constructor;Pe=Reflect.construct(ke,arguments,ge)}else Pe=ke.apply(this,arguments);return K(this,Pe)}}function K(X,te){if(te&&(l(te)==="object"||typeof te=="function"))return te;if(te!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return re(X)}function re(X){if(X===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X}function G(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function H(X){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(pe){return pe.__proto__||Object.getPrototypeOf(pe)},H(X)}function B(X,te,pe){return te=$(te),te in X?Object.defineProperty(X,te,{value:pe,enumerable:!0,configurable:!0,writable:!0}):X[te]=pe,X}function $(X){var te=N(X,"string");return l(te)==="symbol"?te:String(te)}function N(X,te){if(l(X)!=="object"||X===null)return X;var pe=X[Symbol.toPrimitive];if(pe!==void 0){var ke=pe.call(X,te||"default");if(l(ke)!=="object")return ke;throw new TypeError("@@toPrimitive must return a primitive value.")}return(te==="string"?String:Number)(X)}var z=function(te){var pe;return pe=function(ke){P(ge,ke);var Pe=F(ge);function ge(){var Ie;v(this,ge);for(var Ne=arguments.length,lt=new Array(Ne),it=0;it<Ne;it++)lt[it]=arguments[it];return Ie=Pe.call.apply(Pe,[this].concat(lt)),B(re(Ie),"state",{groupSearch:""}),Ie}return A(ge,[{key:"render",value:function(){var Ne=this,lt=this.props,it=lt.groups,Rt=s(lt,n),St=this.state.groupSearch;return t.default.createElement(te,a({},Rt,this.state,{setGroupSearch:function(Kt){return Ne.setState({groupSearch:Kt})},groups:(0,r.matchSorter)(it,St,{keys:["name"]})}))}}]),ge}(t.default.Component),B(pe,"defaultProps",{amsAction:"groups-in-project",authLevel:5}),pe};e.default=z})(S8);(function(e){function t(F){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},t(F)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=v(Fe),n=d(x8),i=v(A0),l=v(S8),a=["groups","groupSearch","setGroupSearch"];function s(F){if(typeof WeakMap!="function")return null;var K=new WeakMap,re=new WeakMap;return(s=function(H){return H?re:K})(F)}function d(F,K){if(!K&&F&&F.__esModule)return F;if(F===null||t(F)!=="object"&&typeof F!="function")return{default:F};var re=s(K);if(re&&re.has(F))return re.get(F);var G={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in F)if(B!=="default"&&Object.prototype.hasOwnProperty.call(F,B)){var $=H?Object.getOwnPropertyDescriptor(F,B):null;$&&($.get||$.set)?Object.defineProperty(G,B,$):G[B]=F[B]}return G.default=F,re&&re.set(F,G),G}function v(F){return F&&F.__esModule?F:{default:F}}function S(){return S=Object.assign?Object.assign.bind():function(F){for(var K=1;K<arguments.length;K++){var re=arguments[K];for(var G in re)Object.prototype.hasOwnProperty.call(re,G)&&(F[G]=re[G])}return F},S.apply(this,arguments)}function A(F,K){if(F==null)return{};var re=P(F,K),G,H;if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(F);for(H=0;H<B.length;H++)G=B[H],!(K.indexOf(G)>=0)&&Object.prototype.propertyIsEnumerable.call(F,G)&&(re[G]=F[G])}return re}function P(F,K){if(F==null)return{};var re={},G=Object.keys(F),H,B;for(B=0;B<G.length;B++)H=G[B],!(K.indexOf(H)>=0)&&(re[H]=F[H]);return re}var L=(0,l.default)(function(F){var K=F.groups,re=F.groupSearch,G=F.setGroupSearch,H=A(F,a);return r.default.createElement(i.default,null,r.default.createElement(n.GroupHeader,{value:re,onChange:G}),K.map(function(B){return r.default.createElement(n.default,S({key:B.name},H,{group:B}))}))});e.default=L})(b8);var E8={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe),r=["children"];function n(d){return d&&d.__esModule?d:{default:d}}function i(d,v){if(d==null)return{};var S=l(d,v),A,P;if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(d);for(P=0;P<L.length;P++)A=L[P],!(v.indexOf(A)>=0)&&Object.prototype.propertyIsEnumerable.call(d,A)&&(S[A]=d[A])}return S}function l(d,v){if(d==null)return{};var S={},A=Object.keys(d),P,L;for(L=0;L<A.length;L++)P=A[L],!(v.indexOf(P)>=0)&&(S[P]=d[P]);return S}var a=function(v){var S=v.children,A=i(v,r);return t.default.createElement(t.default.Fragment,null,t.default.Children.toArray(S).map(function(P){return t.default.cloneElement(P,A)}))},s={type:a,props:{amsAction:"user-preferences",authLevel:0},wrappers:["ams-user-preferences"]};e.default=s})(E8);var C8={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe),r=n(wp);function n(s){return s&&s.__esModule?s:{default:s}}var i=function(d){var v=d.newPreferences;d.setNewPreferences;var S=d.slackEmail,A=d.setSlackEmail,P=d.getSlackUserFromEmail,L=d.updateSlackPreferences,F=d.updateDisabled,K=d.preferences;return t.default.createElement(r.default,{Title:"Slack Preferences"},t.default.createElement("div",{className:"grid grid-cols-1 gap-y-3"},t.default.createElement("div",{className:"grid grid-cols-1 gap-y-3"},t.default.createElement("div",null,t.default.createElement("label",{className:"block font-bold"},"Send Messages to Slack"),t.default.createElement("div",null,"todo fix")),v.receiveSlack?t.default.createElement(t.default.Fragment,null,t.default.createElement("div",null,t.default.createElement("label",{htmlFor:"slackEmail",className:"block font-bold"},"Slack Email"),t.default.createElement("input",{type:"email",id:"slackEmail",placeholder:"Enter your slack email...",onChange:function(G){return A(G.target.value)},value:S})),t.default.createElement("button",{onClick:P,disabled:!S},"check slack email")):null),K.slackUserId&&v.receiveSlack?t.default.createElement("div",null,t.default.createElement("label",{className:"block font-bold"},"Slack User ID"),t.default.createElement("input",{readOnly:!0,value:K.slackUserId})):null,t.default.createElement("button",{onClick:L,disabled:F},"update preferences")))},l={type:i,wrappers:["show-loading","ams-slack-preferences"]},a=l;e.default=a})(C8);var gP={},f0={},KA="http://www.w3.org/1999/xhtml";const YA={svg:"http://www.w3.org/2000/svg",xhtml:KA,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yx(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),YA.hasOwnProperty(t)?{space:YA[t],local:e}:e}function mQ(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===KA&&t.documentElement.namespaceURI===KA?t.createElement(e):t.createElementNS(r,e)}}function gQ(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function WS(e){var t=Yx(e);return(t.local?gQ:mQ)(t)}function yQ(){}function ZS(e){return e==null?yQ:function(){return this.querySelector(e)}}function vQ(e){typeof e!="function"&&(e=ZS(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var l=t[i],a=l.length,s=n[i]=new Array(a),d,v,S=0;S<a;++S)(d=l[S])&&(v=e.call(d,d.__data__,S,l))&&("__data__"in d&&(v.__data__=d.__data__),s[S]=v);return new _c(n,this._parents)}function P8(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function _Q(){return[]}function RM(e){return e==null?_Q:function(){return this.querySelectorAll(e)}}function bQ(e){return function(){return P8(e.apply(this,arguments))}}function xQ(e){typeof e=="function"?e=bQ(e):e=RM(e);for(var t=this._groups,r=t.length,n=[],i=[],l=0;l<r;++l)for(var a=t[l],s=a.length,d,v=0;v<s;++v)(d=a[v])&&(n.push(e.call(d,d.__data__,v,a)),i.push(d));return new _c(n,i)}function DM(e){return function(){return this.matches(e)}}function T8(e){return function(t){return t.matches(e)}}var wQ=Array.prototype.find;function SQ(e){return function(){return wQ.call(this.children,e)}}function EQ(){return this.firstElementChild}function CQ(e){return this.select(e==null?EQ:SQ(typeof e=="function"?e:T8(e)))}var PQ=Array.prototype.filter;function TQ(){return Array.from(this.children)}function AQ(e){return function(){return PQ.call(this.children,e)}}function kQ(e){return this.selectAll(e==null?TQ:AQ(typeof e=="function"?e:T8(e)))}function IQ(e){typeof e!="function"&&(e=DM(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var l=t[i],a=l.length,s=n[i]=[],d,v=0;v<a;++v)(d=l[v])&&e.call(d,d.__data__,v,l)&&s.push(d);return new _c(n,this._parents)}function A8(e){return new Array(e.length)}function MQ(){return new _c(this._enter||this._groups.map(A8),this._parents)}function O2(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}O2.prototype={constructor:O2,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function OQ(e){return function(){return e}}function RQ(e,t,r,n,i,l){for(var a=0,s,d=t.length,v=l.length;a<v;++a)(s=t[a])?(s.__data__=l[a],n[a]=s):r[a]=new O2(e,l[a]);for(;a<d;++a)(s=t[a])&&(i[a]=s)}function DQ(e,t,r,n,i,l,a){var s,d,v=new Map,S=t.length,A=l.length,P=new Array(S),L;for(s=0;s<S;++s)(d=t[s])&&(P[s]=L=a.call(d,d.__data__,s,t)+"",v.has(L)?i[s]=d:v.set(L,d));for(s=0;s<A;++s)L=a.call(e,l[s],s,l)+"",(d=v.get(L))?(n[s]=d,d.__data__=l[s],v.delete(L)):r[s]=new O2(e,l[s]);for(s=0;s<S;++s)(d=t[s])&&v.get(P[s])===d&&(i[s]=d)}function zQ(e){return e.__data__}function LQ(e,t){if(!arguments.length)return Array.from(this,zQ);var r=t?DQ:RQ,n=this._parents,i=this._groups;typeof e!="function"&&(e=OQ(e));for(var l=i.length,a=new Array(l),s=new Array(l),d=new Array(l),v=0;v<l;++v){var S=n[v],A=i[v],P=A.length,L=$Q(e.call(S,S&&S.__data__,v,n)),F=L.length,K=s[v]=new Array(F),re=a[v]=new Array(F),G=d[v]=new Array(P);r(S,A,K,re,G,L,t);for(var H=0,B=0,$,N;H<F;++H)if($=K[H]){for(H>=B&&(B=H+1);!(N=re[B])&&++B<F;);$._next=N||null}}return a=new _c(a,n),a._enter=s,a._exit=d,a}function $Q(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function NQ(){return new _c(this._exit||this._groups.map(A8),this._parents)}function BQ(e,t,r){var n=this.enter(),i=this,l=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?l.remove():r(l),n&&i?n.merge(i).order():i}function FQ(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,l=n.length,a=Math.min(i,l),s=new Array(i),d=0;d<a;++d)for(var v=r[d],S=n[d],A=v.length,P=s[d]=new Array(A),L,F=0;F<A;++F)(L=v[F]||S[F])&&(P[F]=L);for(;d<i;++d)s[d]=r[d];return new _c(s,this._parents)}function UQ(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],i=n.length-1,l=n[i],a;--i>=0;)(a=n[i])&&(l&&a.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(a,l),l=a);return this}function jQ(e){e||(e=VQ);function t(A,P){return A&&P?e(A.__data__,P.__data__):!A-!P}for(var r=this._groups,n=r.length,i=new Array(n),l=0;l<n;++l){for(var a=r[l],s=a.length,d=i[l]=new Array(s),v,S=0;S<s;++S)(v=a[S])&&(d[S]=v);d.sort(t)}return new _c(i,this._parents).order()}function VQ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function qQ(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function GQ(){return Array.from(this)}function HQ(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,l=n.length;i<l;++i){var a=n[i];if(a)return a}return null}function WQ(){let e=0;for(const t of this)++e;return e}function ZQ(){return!this.node()}function XQ(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],l=0,a=i.length,s;l<a;++l)(s=i[l])&&e.call(s,s.__data__,l,i);return this}function KQ(e){return function(){this.removeAttribute(e)}}function YQ(e){return function(){this.removeAttributeNS(e.space,e.local)}}function JQ(e,t){return function(){this.setAttribute(e,t)}}function QQ(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function eee(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function tee(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function ree(e,t){var r=Yx(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?YQ:KQ:typeof t=="function"?r.local?tee:eee:r.local?QQ:JQ)(r,t))}function zM(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function nee(e){return function(){this.style.removeProperty(e)}}function iee(e,t,r){return function(){this.style.setProperty(e,t,r)}}function aee(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function oee(e,t,r){return arguments.length>1?this.each((t==null?nee:typeof t=="function"?aee:iee)(e,t,r??"")):Dy(this.node(),e)}function Dy(e,t){return e.style.getPropertyValue(t)||zM(e).getComputedStyle(e,null).getPropertyValue(t)}function see(e){return function(){delete this[e]}}function lee(e,t){return function(){this[e]=t}}function uee(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function cee(e,t){return arguments.length>1?this.each((t==null?see:typeof t=="function"?uee:lee)(e,t)):this.node()[e]}function k8(e){return e.trim().split(/^|\s+/)}function LM(e){return e.classList||new I8(e)}function I8(e){this._node=e,this._names=k8(e.getAttribute("class")||"")}I8.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function M8(e,t){for(var r=LM(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function O8(e,t){for(var r=LM(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function fee(e){return function(){M8(this,e)}}function hee(e){return function(){O8(this,e)}}function pee(e,t){return function(){(t.apply(this,arguments)?M8:O8)(this,e)}}function dee(e,t){var r=k8(e+"");if(arguments.length<2){for(var n=LM(this.node()),i=-1,l=r.length;++i<l;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?pee:t?fee:hee)(r,t))}function mee(){this.textContent=""}function gee(e){return function(){this.textContent=e}}function yee(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function vee(e){return arguments.length?this.each(e==null?mee:(typeof e=="function"?yee:gee)(e)):this.node().textContent}function _ee(){this.innerHTML=""}function bee(e){return function(){this.innerHTML=e}}function xee(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function wee(e){return arguments.length?this.each(e==null?_ee:(typeof e=="function"?xee:bee)(e)):this.node().innerHTML}function See(){this.nextSibling&&this.parentNode.appendChild(this)}function Eee(){return this.each(See)}function Cee(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Pee(){return this.each(Cee)}function Tee(e){var t=typeof e=="function"?e:WS(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Aee(){return null}function kee(e,t){var r=typeof e=="function"?e:WS(e),n=t==null?Aee:typeof t=="function"?t:ZS(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function Iee(){var e=this.parentNode;e&&e.removeChild(this)}function Mee(){return this.each(Iee)}function Oee(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ree(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Dee(e){return this.select(e?Ree:Oee)}function zee(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Lee(e){return function(t){e.call(this,t,this.__data__)}}function $ee(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function Nee(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,i=t.length,l;r<i;++r)l=t[r],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++n]=l;++n?t.length=n:delete this.__on}}}function Bee(e,t,r){return function(){var n=this.__on,i,l=Lee(t);if(n){for(var a=0,s=n.length;a<s;++a)if((i=n[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=l,i.options=r),i.value=t;return}}this.addEventListener(e.type,l,r),i={type:e.type,name:e.name,value:t,listener:l,options:r},n?n.push(i):this.__on=[i]}}function Fee(e,t,r){var n=$ee(e+""),i,l=n.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var d=0,v=s.length,S;d<v;++d)for(i=0,S=s[d];i<l;++i)if((a=n[i]).type===S.type&&a.name===S.name)return S.value}return}for(s=t?Bee:Nee,i=0;i<l;++i)this.each(s(n[i],t,r));return this}function R8(e,t,r){var n=zM(e),i=n.CustomEvent;typeof i=="function"?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Uee(e,t){return function(){return R8(this,e,t)}}function jee(e,t){return function(){return R8(this,e,t.apply(this,arguments))}}function Vee(e,t){return this.each((typeof t=="function"?jee:Uee)(e,t))}function*qee(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,l=n.length,a;i<l;++i)(a=n[i])&&(yield a)}var $M=[null];function _c(e,t){this._groups=e,this._parents=t}function Xy(){return new _c([[document.documentElement]],$M)}function Gee(){return this}_c.prototype=Xy.prototype={constructor:_c,select:vQ,selectAll:xQ,selectChild:CQ,selectChildren:kQ,filter:IQ,data:LQ,enter:MQ,exit:NQ,join:BQ,merge:FQ,selection:Gee,order:UQ,sort:jQ,call:qQ,nodes:GQ,node:HQ,size:WQ,empty:ZQ,each:XQ,attr:ree,style:oee,property:cee,classed:dee,text:vee,html:wee,raise:Eee,lower:Pee,append:Tee,insert:kee,remove:Mee,clone:Dee,datum:zee,on:Fee,dispatch:Vee,[Symbol.iterator]:qee};function Xo(e){return typeof e=="string"?new _c([[document.querySelector(e)]],[document.documentElement]):new _c([[e]],$M)}function Hee(e){return Xo(WS(e).call(document.documentElement))}var Wee=0;function D8(){return new JA}function JA(){this._="@"+(++Wee).toString(36)}JA.prototype=D8.prototype={constructor:JA,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};function z8(e){let t;for(;t=e.sourceEvent;)e=t;return e}function L8(e,t){if(e=z8(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Zee(e,t){return e.target&&(e=z8(e),t===void 0&&(t=e.currentTarget),e=e.touches||[e]),Array.from(e,r=>L8(r,t))}function Xee(e){return typeof e=="string"?new _c([document.querySelectorAll(e)],[document.documentElement]):new _c([P8(e)],$M)}const Kee=Object.freeze(Object.defineProperty({__proto__:null,create:Hee,creator:WS,local:D8,matcher:DM,namespace:Yx,namespaces:YA,pointer:L8,pointers:Zee,select:Xo,selectAll:Xee,selection:Xy,selector:ZS,selectorAll:RM,style:Dy,window:zM},Symbol.toStringTag,{value:"Module"})),Yee=Vy(Kee);var Jee={value:()=>{}};function $8(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new qw(r)}function qw(e){this._=e}function Qee(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}qw.prototype=$8.prototype={constructor:qw,on:function(e,t){var r=this._,n=Qee(e+"",r),i,l=-1,a=n.length;if(arguments.length<2){for(;++l<a;)if((i=(e=n[l]).type)&&(i=ete(r[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<a;)if(i=(e=n[l]).type)r[i]=Q5(r[i],e.name,t);else if(t==null)for(i in r)r[i]=Q5(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new qw(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,l;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],n=0,i=l.length;n<i;++n)l[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,l=n.length;i<l;++i)n[i].value.apply(t,r)}};function ete(e,t){for(var r=0,n=e.length,i;r<n;++r)if((i=e[r]).name===t)return i.value}function Q5(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=Jee,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var h0=0,Nb=0,Eb=0,N8=1e3,R2,Bb,D2=0,zy=0,XS=0,Tx=typeof performance=="object"&&performance.now?performance:Date,B8=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function NM(){return zy||(B8(tte),zy=Tx.now()+XS)}function tte(){zy=0}function z2(){this._call=this._time=this._next=null}z2.prototype=F8.prototype={constructor:z2,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?NM():+r)+(t==null?0:+t),!this._next&&Bb!==this&&(Bb?Bb._next=this:R2=this,Bb=this),this._call=e,this._time=r,QA()},stop:function(){this._call&&(this._call=null,this._time=1/0,QA())}};function F8(e,t,r){var n=new z2;return n.restart(e,t,r),n}function rte(){NM(),++h0;for(var e=R2,t;e;)(t=zy-e._time)>=0&&e._call.call(void 0,t),e=e._next;--h0}function eD(){zy=(D2=Tx.now())+XS,h0=Nb=0;try{rte()}finally{h0=0,ite(),zy=0}}function nte(){var e=Tx.now(),t=e-D2;t>N8&&(XS-=t,D2=e)}function ite(){for(var e,t=R2,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:R2=r);Bb=e,QA(n)}function QA(e){if(!h0){Nb&&(Nb=clearTimeout(Nb));var t=e-zy;t>24?(e<1/0&&(Nb=setTimeout(eD,e-Tx.now()-XS)),Eb&&(Eb=clearInterval(Eb))):(Eb||(D2=Tx.now(),Eb=setInterval(nte,N8)),h0=1,B8(eD))}}function tD(e,t,r){var n=new z2;return t=t==null?0:+t,n.restart(i=>{n.stop(),e(i+t)},t,r),n}var ate=$8("start","end","cancel","interrupt"),ote=[],U8=0,ek=1,tk=2,Gw=3,rD=4,rk=5,Hw=6;function KS(e,t,r,n,i,l){var a=e.__transition;if(!a)e.__transition={};else if(r in a)return;ste(e,r,{name:t,index:n,group:i,on:ate,tween:ote,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:U8})}function BM(e,t){var r=Sp(e,t);if(r.state>U8)throw new Error("too late; already scheduled");return r}function cd(e,t){var r=Sp(e,t);if(r.state>Gw)throw new Error("too late; already running");return r}function Sp(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function ste(e,t,r){var n=e.__transition,i;n[t]=r,r.timer=F8(l,0,r.time);function l(v){r.state=ek,r.timer.restart(a,r.delay,r.time),r.delay<=v&&a(v-r.delay)}function a(v){var S,A,P,L;if(r.state!==ek)return d();for(S in n)if(L=n[S],L.name===r.name){if(L.state===Gw)return tD(a);L.state===rD?(L.state=Hw,L.timer.stop(),L.on.call("interrupt",e,e.__data__,L.index,L.group),delete n[S]):+S<t&&(L.state=Hw,L.timer.stop(),L.on.call("cancel",e,e.__data__,L.index,L.group),delete n[S])}if(tD(function(){r.state===Gw&&(r.state=rD,r.timer.restart(s,r.delay,r.time),s(v))}),r.state=tk,r.on.call("start",e,e.__data__,r.index,r.group),r.state===tk){for(r.state=Gw,i=new Array(P=r.tween.length),S=0,A=-1;S<P;++S)(L=r.tween[S].value.call(e,e.__data__,r.index,r.group))&&(i[++A]=L);i.length=A+1}}function s(v){for(var S=v<r.duration?r.ease.call(null,v/r.duration):(r.timer.restart(d),r.state=rk,1),A=-1,P=i.length;++A<P;)i[A].call(e,S);r.state===rk&&(r.on.call("end",e,e.__data__,r.index,r.group),d())}function d(){r.state=Hw,r.timer.stop(),delete n[t];for(var v in n)return;delete e.__transition}}function j8(e,t){var r=e.__transition,n,i,l=!0,a;if(r){t=t==null?null:t+"";for(a in r){if((n=r[a]).name!==t){l=!1;continue}i=n.state>tk&&n.state<rk,n.state=Hw,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[a]}l&&delete e.__transition}}function lte(e){return this.each(function(){j8(this,e)})}function FM(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function V8(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Jx(){}var Ax=.7,L2=1/Ax,K_="\\s*([+-]?\\d+)\\s*",kx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ute=/^#([0-9a-f]{3,8})$/,cte=new RegExp(`^rgb\\(${K_},${K_},${K_}\\)$`),fte=new RegExp(`^rgb\\(${rd},${rd},${rd}\\)$`),hte=new RegExp(`^rgba\\(${K_},${K_},${K_},${kx}\\)$`),pte=new RegExp(`^rgba\\(${rd},${rd},${rd},${kx}\\)$`),dte=new RegExp(`^hsl\\(${kx},${rd},${rd}\\)$`),mte=new RegExp(`^hsla\\(${kx},${rd},${rd},${kx}\\)$`),nD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};FM(Jx,Ly,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:iD,formatHex:iD,formatHex8:gte,formatHsl:yte,formatRgb:aD,toString:aD});function iD(){return this.rgb().formatHex()}function gte(){return this.rgb().formatHex8()}function yte(){return q8(this).formatHsl()}function aD(){return this.rgb().formatRgb()}function Ly(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ute.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?oD(t):r===3?new qc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?cw(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?cw(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=cte.exec(e))?new qc(t[1],t[2],t[3],1):(t=fte.exec(e))?new qc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=hte.exec(e))?cw(t[1],t[2],t[3],t[4]):(t=pte.exec(e))?cw(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dte.exec(e))?uD(t[1],t[2]/100,t[3]/100,1):(t=mte.exec(e))?uD(t[1],t[2]/100,t[3]/100,t[4]):nD.hasOwnProperty(e)?oD(nD[e]):e==="transparent"?new qc(NaN,NaN,NaN,0):null}function oD(e){return new qc(e>>16&255,e>>8&255,e&255,1)}function cw(e,t,r,n){return n<=0&&(e=t=r=NaN),new qc(e,t,r,n)}function vte(e){return e instanceof Jx||(e=Ly(e)),e?(e=e.rgb(),new qc(e.r,e.g,e.b,e.opacity)):new qc}function nk(e,t,r,n){return arguments.length===1?vte(e):new qc(e,t,r,n??1)}function qc(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}FM(qc,nk,V8(Jx,{brighter(e){return e=e==null?L2:Math.pow(L2,e),new qc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ax:Math.pow(Ax,e),new qc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new qc(Ey(this.r),Ey(this.g),Ey(this.b),$2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sD,formatHex:sD,formatHex8:_te,formatRgb:lD,toString:lD}));function sD(){return`#${by(this.r)}${by(this.g)}${by(this.b)}`}function _te(){return`#${by(this.r)}${by(this.g)}${by(this.b)}${by((isNaN(this.opacity)?1:this.opacity)*255)}`}function lD(){const e=$2(this.opacity);return`${e===1?"rgb(":"rgba("}${Ey(this.r)}, ${Ey(this.g)}, ${Ey(this.b)}${e===1?")":`, ${e})`}`}function $2(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ey(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function by(e){return e=Ey(e),(e<16?"0":"")+e.toString(16)}function uD(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new pp(e,t,r,n)}function q8(e){if(e instanceof pp)return new pp(e.h,e.s,e.l,e.opacity);if(e instanceof Jx||(e=Ly(e)),!e)return new pp;if(e instanceof pp)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),l=Math.max(t,r,n),a=NaN,s=l-i,d=(l+i)/2;return s?(t===l?a=(r-n)/s+(r<n)*6:r===l?a=(n-t)/s+2:a=(t-r)/s+4,s/=d<.5?l+i:2-l-i,a*=60):s=d>0&&d<1?0:a,new pp(a,s,d,e.opacity)}function bte(e,t,r,n){return arguments.length===1?q8(e):new pp(e,t,r,n??1)}function pp(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}FM(pp,bte,V8(Jx,{brighter(e){return e=e==null?L2:Math.pow(L2,e),new pp(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ax:Math.pow(Ax,e),new pp(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new qc(yP(e>=240?e-240:e+120,i,n),yP(e,i,n),yP(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new pp(cD(this.h),fw(this.s),fw(this.l),$2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=$2(this.opacity);return`${e===1?"hsl(":"hsla("}${cD(this.h)}, ${fw(this.s)*100}%, ${fw(this.l)*100}%${e===1?")":`, ${e})`}`}}));function cD(e){return e=(e||0)%360,e<0?e+360:e}function fw(e){return Math.max(0,Math.min(1,e||0))}function yP(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const UM=e=>()=>e;function xte(e,t){return function(r){return e+r*t}}function wte(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Ste(e){return(e=+e)==1?G8:function(t,r){return r-t?wte(t,r,e):UM(isNaN(t)?r:t)}}function G8(e,t){var r=t-e;return r?xte(e,r):UM(isNaN(e)?t:e)}const N2=function e(t){var r=Ste(t);function n(i,l){var a=r((i=nk(i)).r,(l=nk(l)).r),s=r(i.g,l.g),d=r(i.b,l.b),v=G8(i.opacity,l.opacity);return function(S){return i.r=a(S),i.g=s(S),i.b=d(S),i.opacity=v(S),i+""}}return n.gamma=e,n}(1);function Ete(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(l){for(i=0;i<r;++i)n[i]=e[i]*(1-l)+t[i]*l;return n}}function Cte(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Pte(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),l=new Array(r),a;for(a=0;a<n;++a)i[a]=Y_(e[a],t[a]);for(;a<r;++a)l[a]=t[a];return function(s){for(a=0;a<n;++a)l[a]=i[a](s);return l}}function Tte(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function hp(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Ate(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Y_(e[i],t[i]):n[i]=t[i];return function(l){for(i in r)n[i]=r[i](l);return n}}var ik=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vP=new RegExp(ik.source,"g");function kte(e){return function(){return e}}function Ite(e){return function(t){return e(t)+""}}function H8(e,t){var r=ik.lastIndex=vP.lastIndex=0,n,i,l,a=-1,s=[],d=[];for(e=e+"",t=t+"";(n=ik.exec(e))&&(i=vP.exec(t));)(l=i.index)>r&&(l=t.slice(r,l),s[a]?s[a]+=l:s[++a]=l),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,d.push({i:a,x:hp(n,i)})),r=vP.lastIndex;return r<t.length&&(l=t.slice(r),s[a]?s[a]+=l:s[++a]=l),s.length<2?d[0]?Ite(d[0].x):kte(t):(t=d.length,function(v){for(var S=0,A;S<t;++S)s[(A=d[S]).i]=A.x(v);return s.join("")})}function Y_(e,t){var r=typeof t,n;return t==null||r==="boolean"?UM(t):(r==="number"?hp:r==="string"?(n=Ly(t))?(t=n,N2):H8:t instanceof Ly?N2:t instanceof Date?Tte:Cte(t)?Ete:Array.isArray(t)?Pte:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ate:hp)(e,t)}function Mte(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var fD=180/Math.PI,ak={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function W8(e,t,r,n,i,l){var a,s,d;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(d=e*r+t*n)&&(r-=e*d,n-=t*d),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,d/=s),e*n<t*r&&(e=-e,t=-t,d=-d,a=-a),{translateX:i,translateY:l,rotate:Math.atan2(t,e)*fD,skewX:Math.atan(d)*fD,scaleX:a,scaleY:s}}var hw;function Ote(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ak:W8(t.a,t.b,t.c,t.d,t.e,t.f)}function Rte(e){return e==null||(hw||(hw=document.createElementNS("http://www.w3.org/2000/svg","g")),hw.setAttribute("transform",e),!(e=hw.transform.baseVal.consolidate()))?ak:(e=e.matrix,W8(e.a,e.b,e.c,e.d,e.e,e.f))}function Z8(e,t,r,n){function i(v){return v.length?v.pop()+" ":""}function l(v,S,A,P,L,F){if(v!==A||S!==P){var K=L.push("translate(",null,t,null,r);F.push({i:K-4,x:hp(v,A)},{i:K-2,x:hp(S,P)})}else(A||P)&&L.push("translate("+A+t+P+r)}function a(v,S,A,P){v!==S?(v-S>180?S+=360:S-v>180&&(v+=360),P.push({i:A.push(i(A)+"rotate(",null,n)-2,x:hp(v,S)})):S&&A.push(i(A)+"rotate("+S+n)}function s(v,S,A,P){v!==S?P.push({i:A.push(i(A)+"skewX(",null,n)-2,x:hp(v,S)}):S&&A.push(i(A)+"skewX("+S+n)}function d(v,S,A,P,L,F){if(v!==A||S!==P){var K=L.push(i(L)+"scale(",null,",",null,")");F.push({i:K-4,x:hp(v,A)},{i:K-2,x:hp(S,P)})}else(A!==1||P!==1)&&L.push(i(L)+"scale("+A+","+P+")")}return function(v,S){var A=[],P=[];return v=e(v),S=e(S),l(v.translateX,v.translateY,S.translateX,S.translateY,A,P),a(v.rotate,S.rotate,A,P),s(v.skewX,S.skewX,A,P),d(v.scaleX,v.scaleY,S.scaleX,S.scaleY,A,P),v=S=null,function(L){for(var F=-1,K=P.length,re;++F<K;)A[(re=P[F]).i]=re.x(L);return A.join("")}}}var Dte=Z8(Ote,"px, ","px)","deg)"),zte=Z8(Rte,", ",")",")");function Lte(e,t){var r,n;return function(){var i=cd(this,e),l=i.tween;if(l!==r){n=r=l;for(var a=0,s=n.length;a<s;++a)if(n[a].name===t){n=n.slice(),n.splice(a,1);break}}i.tween=n}}function $te(e,t,r){var n,i;if(typeof r!="function")throw new Error;return function(){var l=cd(this,e),a=l.tween;if(a!==n){i=(n=a).slice();for(var s={name:t,value:r},d=0,v=i.length;d<v;++d)if(i[d].name===t){i[d]=s;break}d===v&&i.push(s)}l.tween=i}}function Nte(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Sp(this.node(),r).tween,i=0,l=n.length,a;i<l;++i)if((a=n[i]).name===e)return a.value;return null}return this.each((t==null?Lte:$te)(r,e,t))}function jM(e,t,r){var n=e._id;return e.each(function(){var i=cd(this,n);(i.value||(i.value={}))[t]=r.apply(this,arguments)}),function(i){return Sp(i,n).value[t]}}function X8(e,t){var r;return(typeof t=="number"?hp:t instanceof Ly?N2:(r=Ly(t))?(t=r,N2):H8)(e,t)}function Bte(e){return function(){this.removeAttribute(e)}}function Fte(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ute(e,t,r){var n,i=r+"",l;return function(){var a=this.getAttribute(e);return a===i?null:a===n?l:l=t(n=a,r)}}function jte(e,t,r){var n,i=r+"",l;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===n?l:l=t(n=a,r)}}function Vte(e,t,r){var n,i,l;return function(){var a,s=r(this),d;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),d=s+"",a===d?null:a===n&&d===i?l:(i=d,l=t(n=a,s)))}}function qte(e,t,r){var n,i,l;return function(){var a,s=r(this),d;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),d=s+"",a===d?null:a===n&&d===i?l:(i=d,l=t(n=a,s)))}}function Gte(e,t){var r=Yx(e),n=r==="transform"?zte:X8;return this.attrTween(e,typeof t=="function"?(r.local?qte:Vte)(r,n,jM(this,"attr."+e,t)):t==null?(r.local?Fte:Bte)(r):(r.local?jte:Ute)(r,n,t))}function Hte(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Wte(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Zte(e,t){var r,n;function i(){var l=t.apply(this,arguments);return l!==n&&(r=(n=l)&&Wte(e,l)),r}return i._value=t,i}function Xte(e,t){var r,n;function i(){var l=t.apply(this,arguments);return l!==n&&(r=(n=l)&&Hte(e,l)),r}return i._value=t,i}function Kte(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Yx(e);return this.tween(r,(n.local?Zte:Xte)(n,t))}function Yte(e,t){return function(){BM(this,e).delay=+t.apply(this,arguments)}}function Jte(e,t){return t=+t,function(){BM(this,e).delay=t}}function Qte(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Yte:Jte)(t,e)):Sp(this.node(),t).delay}function ere(e,t){return function(){cd(this,e).duration=+t.apply(this,arguments)}}function tre(e,t){return t=+t,function(){cd(this,e).duration=t}}function rre(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ere:tre)(t,e)):Sp(this.node(),t).duration}function nre(e,t){if(typeof t!="function")throw new Error;return function(){cd(this,e).ease=t}}function ire(e){var t=this._id;return arguments.length?this.each(nre(t,e)):Sp(this.node(),t).ease}function are(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;cd(this,e).ease=r}}function ore(e){if(typeof e!="function")throw new Error;return this.each(are(this._id,e))}function sre(e){typeof e!="function"&&(e=DM(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var l=t[i],a=l.length,s=n[i]=[],d,v=0;v<a;++v)(d=l[v])&&e.call(d,d.__data__,v,l)&&s.push(d);return new ad(n,this._parents,this._name,this._id)}function lre(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,l=Math.min(n,i),a=new Array(n),s=0;s<l;++s)for(var d=t[s],v=r[s],S=d.length,A=a[s]=new Array(S),P,L=0;L<S;++L)(P=d[L]||v[L])&&(A[L]=P);for(;s<n;++s)a[s]=t[s];return new ad(a,this._parents,this._name,this._id)}function ure(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function cre(e,t,r){var n,i,l=ure(t)?BM:cd;return function(){var a=l(this,e),s=a.on;s!==n&&(i=(n=s).copy()).on(t,r),a.on=i}}function fre(e,t){var r=this._id;return arguments.length<2?Sp(this.node(),r).on.on(e):this.each(cre(r,e,t))}function hre(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function pre(){return this.on("end.remove",hre(this._id))}function dre(e){var t=this._name,r=this._id;typeof e!="function"&&(e=ZS(e));for(var n=this._groups,i=n.length,l=new Array(i),a=0;a<i;++a)for(var s=n[a],d=s.length,v=l[a]=new Array(d),S,A,P=0;P<d;++P)(S=s[P])&&(A=e.call(S,S.__data__,P,s))&&("__data__"in S&&(A.__data__=S.__data__),v[P]=A,KS(v[P],t,r,P,v,Sp(S,r)));return new ad(l,this._parents,t,r)}function mre(e){var t=this._name,r=this._id;typeof e!="function"&&(e=RM(e));for(var n=this._groups,i=n.length,l=[],a=[],s=0;s<i;++s)for(var d=n[s],v=d.length,S,A=0;A<v;++A)if(S=d[A]){for(var P=e.call(S,S.__data__,A,d),L,F=Sp(S,r),K=0,re=P.length;K<re;++K)(L=P[K])&&KS(L,t,r,K,P,F);l.push(P),a.push(S)}return new ad(l,a,t,r)}var gre=Xy.prototype.constructor;function yre(){return new gre(this._groups,this._parents)}function vre(e,t){var r,n,i;return function(){var l=Dy(this,e),a=(this.style.removeProperty(e),Dy(this,e));return l===a?null:l===r&&a===n?i:i=t(r=l,n=a)}}function K8(e){return function(){this.style.removeProperty(e)}}function _re(e,t,r){var n,i=r+"",l;return function(){var a=Dy(this,e);return a===i?null:a===n?l:l=t(n=a,r)}}function bre(e,t,r){var n,i,l;return function(){var a=Dy(this,e),s=r(this),d=s+"";return s==null&&(d=s=(this.style.removeProperty(e),Dy(this,e))),a===d?null:a===n&&d===i?l:(i=d,l=t(n=a,s))}}function xre(e,t){var r,n,i,l="style."+t,a="end."+l,s;return function(){var d=cd(this,e),v=d.on,S=d.value[l]==null?s||(s=K8(t)):void 0;(v!==r||i!==S)&&(n=(r=v).copy()).on(a,i=S),d.on=n}}function wre(e,t,r){var n=(e+="")=="transform"?Dte:X8;return t==null?this.styleTween(e,vre(e,n)).on("end.style."+e,K8(e)):typeof t=="function"?this.styleTween(e,bre(e,n,jM(this,"style."+e,t))).each(xre(this._id,e)):this.styleTween(e,_re(e,n,t),r).on("end.style."+e,null)}function Sre(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function Ere(e,t,r){var n,i;function l(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&Sre(e,a,r)),n}return l._value=t,l}function Cre(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Ere(e,t,r??""))}function Pre(e){return function(){this.textContent=e}}function Tre(e){return function(){var t=e(this);this.textContent=t??""}}function Are(e){return this.tween("text",typeof e=="function"?Tre(jM(this,"text",e)):Pre(e==null?"":e+""))}function kre(e){return function(t){this.textContent=e.call(this,t)}}function Ire(e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&kre(i)),t}return n._value=e,n}function Mre(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ire(e))}function Ore(){for(var e=this._name,t=this._id,r=Y8(),n=this._groups,i=n.length,l=0;l<i;++l)for(var a=n[l],s=a.length,d,v=0;v<s;++v)if(d=a[v]){var S=Sp(d,t);KS(d,e,r,v,a,{time:S.time+S.delay+S.duration,delay:0,duration:S.duration,ease:S.ease})}return new ad(n,this._parents,e,r)}function Rre(){var e,t,r=this,n=r._id,i=r.size();return new Promise(function(l,a){var s={value:a},d={value:function(){--i===0&&l()}};r.each(function(){var v=cd(this,n),S=v.on;S!==e&&(t=(e=S).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(d)),v.on=t}),i===0&&l()})}var Dre=0;function ad(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Qx(e){return Xy().transition(e)}function Y8(){return++Dre}var jd=Xy.prototype;ad.prototype=Qx.prototype={constructor:ad,select:dre,selectAll:mre,selectChild:jd.selectChild,selectChildren:jd.selectChildren,filter:sre,merge:lre,selection:yre,transition:Ore,call:jd.call,nodes:jd.nodes,node:jd.node,size:jd.size,empty:jd.empty,each:jd.each,on:fre,attr:Gte,attrTween:Kte,style:wre,styleTween:Cre,text:Are,textTween:Mre,remove:pre,tween:Nte,delay:Qte,duration:rre,ease:ire,easeVarying:ore,end:Rre,[Symbol.iterator]:jd[Symbol.iterator]};function zre(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Lre={time:null,delay:0,duration:250,ease:zre};function $re(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Nre(e){var t,r;e instanceof ad?(t=e._id,e=e._name):(t=Y8(),(r=Lre).time=NM(),e=e==null?null:e+"");for(var n=this._groups,i=n.length,l=0;l<i;++l)for(var a=n[l],s=a.length,d,v=0;v<s;++v)(d=a[v])&&KS(d,e,t,v,a,r||$re(d,t));return new ad(n,this._parents,e,t)}Xy.prototype.interrupt=lte;Xy.prototype.transition=Nre;var Bre=[null];function Fre(e,t){var r=e.__transition,n,i;if(r){t=t==null?null:t+"";for(i in r)if((n=r[i]).state>ek&&n.name===t)return new ad([[e]],Bre,t,+i)}return null}const Ure=Object.freeze(Object.defineProperty({__proto__:null,active:Fre,interrupt:j8,transition:Qx},Symbol.toStringTag,{value:"Module"})),jre=Vy(Ure);function Ix(e){return Ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ix(e)}Object.defineProperty(f0,"__esModule",{value:!0});f0.useModal=f0.Modal=void 0;var up=Vre(Fe),pw=Yee,hD=jre;function Vre(e){return e&&e.__esModule?e:{default:e}}function pD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qre(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pD(Object(r),!0).forEach(function(n){Gre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gre(e,t,r){return t=Hre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hre(e){var t=Wre(e,"string");return Ix(t)==="symbol"?t:String(t)}function Wre(e,t){if(Ix(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ix(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J8(e,t){return Yre(e)||Kre(e,t)||Xre(e,t)||Zre()}function Zre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xre(e,t){if(e){if(typeof e=="string")return dD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dD(e,t)}}function dD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Kre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,l,a,s=[],d=!0,v=!1;try{if(l=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=l.call(r)).done)&&(s.push(n.value),s.length!==t);d=!0);}catch(S){v=!0,i=S}finally{try{if(!d&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(v)throw i}}return s}}function Yre(e){if(Array.isArray(e))return e}var Jre={duration:750,hideOnAction:!0},Qre=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Jre,r=up.default.useState(!1),n=J8(r,2),i=n[0],l=n[1],a=up.default.useCallback(function(d){d.stopPropagation(),d.preventDefault(),l(!0)},[]),s=up.default.useCallback(function(d){d.stopPropagation(),d.preventDefault(),l(!1)},[]);return[qre({show:i,closeModal:s},t),a,s]};f0.useModal=Qre;var ene=function(t){var r=t.show,n=t.closeModal;t.actions;var i=t.duration;t.hideOnAction;var l=t.children,a=up.default.createRef(),s=up.default.createRef(),d=up.default.useState(!0),v=J8(d,2),S=v[0],A=v[1];up.default.useEffect(function(){if(S&&r){var L=(0,hD.transition)().duration(i);(0,pw.select)(a.current).style("background-color","rgba(0, 0, 0, 0.0)").transition(L).style("background-color","rgba(0, 0, 0, 0.75)"),(0,pw.select)(s.current).style("top","-50%").transition(L).style("left","50%").style("top","50%"),A(!r)}else if(!S&&!r){var F=(0,hD.transition)().duration(i);(0,pw.select)(a.current).transition(F).style("background-color","rgba(0, 0, 0, 0.0)"),(0,pw.select)(s.current).transition(F).style("left","50%").style("top","-50%").end().then(function(){return A(!r)})}},[a,s,r,S,A,i]);var P={};return up.default.createElement("div",{ref:a,className:"inset-0 z-50 cursor-auto fixed",style:{display:S?"none":"block"}},up.default.createElement("div",{ref:s,className:"absolute inline-block",style:{transform:"translate(-50%, -50%)",left:"50%"}},up.default.createElement("button",{onClick:n,small:!0,className:`
            top-0 left-0 absolute `.concat(P.menuBg,`
          `),style:{transform:"translate(-50%, -50%)"}},up.default.createElement("span",{className:"fa text-lg fa-times"})),l))};f0.Modal=ene;var _P={},bP={},Q8={exports:{}},eU={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0=Fe;function tne(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rne=typeof Object.is=="function"?Object.is:tne,nne=p0.useState,ine=p0.useEffect,ane=p0.useLayoutEffect,one=p0.useDebugValue;function sne(e,t){var r=t(),n=nne({inst:{value:r,getSnapshot:t}}),i=n[0].inst,l=n[1];return ane(function(){i.value=r,i.getSnapshot=t,xP(i)&&l({inst:i})},[e,r,t]),ine(function(){return xP(i)&&l({inst:i}),e(function(){xP(i)&&l({inst:i})})},[e]),one(r),r}function xP(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!rne(e,r)}catch{return!0}}function lne(e,t){return t()}var une=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?lne:sne;eU.useSyncExternalStore=p0.useSyncExternalStore!==void 0?p0.useSyncExternalStore:une;Q8.exports=eU;var tU=Q8.exports,rU={exports:{}},nU={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YS=Fe,cne=tU;function fne(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hne=typeof Object.is=="function"?Object.is:fne,pne=cne.useSyncExternalStore,dne=YS.useRef,mne=YS.useEffect,gne=YS.useMemo,yne=YS.useDebugValue;nU.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var l=dne(null);if(l.current===null){var a={hasValue:!1,value:null};l.current=a}else a=l.current;l=gne(function(){function d(L){if(!v){if(v=!0,S=L,L=n(L),i!==void 0&&a.hasValue){var F=a.value;if(i(F,L))return A=F}return A=L}if(F=A,hne(S,L))return F;var K=n(L);return i!==void 0&&i(F,K)?F:(S=L,A=K)}var v=!1,S,A,P=r===void 0?null:r;return[function(){return d(t())},P===null?void 0:function(){return d(P())}]},[t,r,n,i]);var s=pne(e,l[0],l[1]);return mne(function(){a.hasValue=!0,a.value=s},[s]),yne(s),s};rU.exports=nU;var vne=rU.exports;function _ne(e){e()}let iU=_ne;const bne=e=>iU=e,xne=()=>iU,od=Fe.createContext(null);function aU(){return Fe.useContext(od)}const oU=()=>{throw new Error("uSES not initialized!")};let sU=oU;const wne=e=>{sU=e},Sne=(e,t)=>e===t;function lU(e=od){const t=e===od?aU:()=>Fe.useContext(e);return function(n,i=Sne){const{store:l,subscription:a,getServerState:s}=t(),d=sU(a.addNestedSub,l.getState,s||l.getState,n,i);return Fe.useDebugValue(d),d}}const Ps=lU();function uU(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,l;for(l=0;l<n.length;l++)i=n[l],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var cU={exports:{}},ko={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uu=typeof Symbol=="function"&&Symbol.for,VM=uu?Symbol.for("react.element"):60103,qM=uu?Symbol.for("react.portal"):60106,JS=uu?Symbol.for("react.fragment"):60107,QS=uu?Symbol.for("react.strict_mode"):60108,eE=uu?Symbol.for("react.profiler"):60114,tE=uu?Symbol.for("react.provider"):60109,rE=uu?Symbol.for("react.context"):60110,GM=uu?Symbol.for("react.async_mode"):60111,nE=uu?Symbol.for("react.concurrent_mode"):60111,iE=uu?Symbol.for("react.forward_ref"):60112,aE=uu?Symbol.for("react.suspense"):60113,Ene=uu?Symbol.for("react.suspense_list"):60120,oE=uu?Symbol.for("react.memo"):60115,sE=uu?Symbol.for("react.lazy"):60116,Cne=uu?Symbol.for("react.block"):60121,Pne=uu?Symbol.for("react.fundamental"):60117,Tne=uu?Symbol.for("react.responder"):60118,Ane=uu?Symbol.for("react.scope"):60119;function Ff(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case VM:switch(e=e.type,e){case GM:case nE:case JS:case eE:case QS:case aE:return e;default:switch(e=e&&e.$$typeof,e){case rE:case iE:case sE:case oE:case tE:return e;default:return t}}case qM:return t}}}function fU(e){return Ff(e)===nE}ko.AsyncMode=GM;ko.ConcurrentMode=nE;ko.ContextConsumer=rE;ko.ContextProvider=tE;ko.Element=VM;ko.ForwardRef=iE;ko.Fragment=JS;ko.Lazy=sE;ko.Memo=oE;ko.Portal=qM;ko.Profiler=eE;ko.StrictMode=QS;ko.Suspense=aE;ko.isAsyncMode=function(e){return fU(e)||Ff(e)===GM};ko.isConcurrentMode=fU;ko.isContextConsumer=function(e){return Ff(e)===rE};ko.isContextProvider=function(e){return Ff(e)===tE};ko.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===VM};ko.isForwardRef=function(e){return Ff(e)===iE};ko.isFragment=function(e){return Ff(e)===JS};ko.isLazy=function(e){return Ff(e)===sE};ko.isMemo=function(e){return Ff(e)===oE};ko.isPortal=function(e){return Ff(e)===qM};ko.isProfiler=function(e){return Ff(e)===eE};ko.isStrictMode=function(e){return Ff(e)===QS};ko.isSuspense=function(e){return Ff(e)===aE};ko.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===JS||e===nE||e===eE||e===QS||e===aE||e===Ene||typeof e=="object"&&e!==null&&(e.$$typeof===sE||e.$$typeof===oE||e.$$typeof===tE||e.$$typeof===rE||e.$$typeof===iE||e.$$typeof===Pne||e.$$typeof===Tne||e.$$typeof===Ane||e.$$typeof===Cne)};ko.typeOf=Ff;cU.exports=ko;var kne=cU.exports,HM=kne,Ine={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Mne={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},One={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},hU={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},WM={};WM[HM.ForwardRef]=One;WM[HM.Memo]=hU;function mD(e){return HM.isMemo(e)?hU:WM[e.$$typeof]||Ine}var Rne=Object.defineProperty,Dne=Object.getOwnPropertyNames,gD=Object.getOwnPropertySymbols,zne=Object.getOwnPropertyDescriptor,Lne=Object.getPrototypeOf,yD=Object.prototype;function pU(e,t,r){if(typeof t!="string"){if(yD){var n=Lne(t);n&&n!==yD&&pU(e,n,r)}var i=Dne(t);gD&&(i=i.concat(gD(t)));for(var l=mD(e),a=mD(t),s=0;s<i.length;++s){var d=i[s];if(!Mne[d]&&!(r&&r[d])&&!(a&&a[d])&&!(l&&l[d])){var v=zne(t,d);try{Rne(e,d,v)}catch{}}}}return e}var $ne=pU;const vD=Xs($ne);var dU={exports:{}},Io={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZM=Symbol.for("react.element"),XM=Symbol.for("react.portal"),lE=Symbol.for("react.fragment"),uE=Symbol.for("react.strict_mode"),cE=Symbol.for("react.profiler"),fE=Symbol.for("react.provider"),hE=Symbol.for("react.context"),Nne=Symbol.for("react.server_context"),pE=Symbol.for("react.forward_ref"),dE=Symbol.for("react.suspense"),mE=Symbol.for("react.suspense_list"),gE=Symbol.for("react.memo"),yE=Symbol.for("react.lazy"),Bne=Symbol.for("react.offscreen"),mU;mU=Symbol.for("react.module.reference");function Ih(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case ZM:switch(e=e.type,e){case lE:case cE:case uE:case dE:case mE:return e;default:switch(e=e&&e.$$typeof,e){case Nne:case hE:case pE:case yE:case gE:case fE:return e;default:return t}}case XM:return t}}}Io.ContextConsumer=hE;Io.ContextProvider=fE;Io.Element=ZM;Io.ForwardRef=pE;Io.Fragment=lE;Io.Lazy=yE;Io.Memo=gE;Io.Portal=XM;Io.Profiler=cE;Io.StrictMode=uE;Io.Suspense=dE;Io.SuspenseList=mE;Io.isAsyncMode=function(){return!1};Io.isConcurrentMode=function(){return!1};Io.isContextConsumer=function(e){return Ih(e)===hE};Io.isContextProvider=function(e){return Ih(e)===fE};Io.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===ZM};Io.isForwardRef=function(e){return Ih(e)===pE};Io.isFragment=function(e){return Ih(e)===lE};Io.isLazy=function(e){return Ih(e)===yE};Io.isMemo=function(e){return Ih(e)===gE};Io.isPortal=function(e){return Ih(e)===XM};Io.isProfiler=function(e){return Ih(e)===cE};Io.isStrictMode=function(e){return Ih(e)===uE};Io.isSuspense=function(e){return Ih(e)===dE};Io.isSuspenseList=function(e){return Ih(e)===mE};Io.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===lE||e===cE||e===uE||e===dE||e===mE||e===Bne||typeof e=="object"&&e!==null&&(e.$$typeof===yE||e.$$typeof===gE||e.$$typeof===fE||e.$$typeof===hE||e.$$typeof===pE||e.$$typeof===mU||e.getModuleId!==void 0)};Io.typeOf=Ih;dU.exports=Io;var Fne=dU.exports;const Une=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function jne(e,t,r,n,{areStatesEqual:i,areOwnPropsEqual:l,areStatePropsEqual:a}){let s=!1,d,v,S,A,P;function L(H,B){return d=H,v=B,S=e(d,v),A=t(n,v),P=r(S,A,v),s=!0,P}function F(){return S=e(d,v),t.dependsOnOwnProps&&(A=t(n,v)),P=r(S,A,v),P}function K(){return e.dependsOnOwnProps&&(S=e(d,v)),t.dependsOnOwnProps&&(A=t(n,v)),P=r(S,A,v),P}function re(){const H=e(d,v),B=!a(H,S);return S=H,B&&(P=r(S,A,v)),P}function G(H,B){const $=!l(B,v),N=!i(H,d,B,v);return d=H,v=B,$&&N?F():$?K():N?re():P}return function(B,$){return s?G(B,$):L(B,$)}}function Vne(e,t){let{initMapStateToProps:r,initMapDispatchToProps:n,initMergeProps:i}=t,l=uU(t,Une);const a=r(e,l),s=n(e,l),d=i(e,l);return jne(a,s,d,e,l)}function qne(e,t){const r={};for(const n in e){const i=e[n];typeof i=="function"&&(r[n]=(...l)=>t(i(...l)))}return r}function ok(e){return function(r){const n=e(r);function i(){return n}return i.dependsOnOwnProps=!1,i}}function _D(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function gU(e,t){return function(n,{displayName:i}){const l=function(s,d){return l.dependsOnOwnProps?l.mapToProps(s,d):l.mapToProps(s,void 0)};return l.dependsOnOwnProps=!0,l.mapToProps=function(s,d){l.mapToProps=e,l.dependsOnOwnProps=_D(e);let v=l(s,d);return typeof v=="function"&&(l.mapToProps=v,l.dependsOnOwnProps=_D(v),v=l(s,d)),v},l}}function KM(e,t){return(r,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${n.wrappedComponentName}.`)}}function Gne(e){return e&&typeof e=="object"?ok(t=>qne(e,t)):e?typeof e=="function"?gU(e):KM(e,"mapDispatchToProps"):ok(t=>({dispatch:t}))}function Hne(e){return e?typeof e=="function"?gU(e):KM(e,"mapStateToProps"):ok(()=>({}))}function Wne(e,t,r){return Sy({},r,e,t)}function Zne(e){return function(r,{displayName:n,areMergedPropsEqual:i}){let l=!1,a;return function(d,v,S){const A=e(d,v,S);return l?i(A,a)||(a=A):(l=!0,a=A),a}}}function Xne(e){return e?typeof e=="function"?Zne(e):KM(e,"mergeProps"):()=>Wne}function Kne(){const e=xne();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],i=t;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0,l=r={callback:n,next:null,prev:r};return l.prev?l.prev.next=l:t=l,function(){!i||t===null||(i=!1,l.next?l.next.prev=l.prev:r=l.prev,l.prev?l.prev.next=l.next:t=l.next)}}}}const bD={notify(){},get:()=>[]};function yU(e,t){let r,n=bD;function i(A){return d(),n.subscribe(A)}function l(){n.notify()}function a(){S.onStateChange&&S.onStateChange()}function s(){return!!r}function d(){r||(r=t?t.addNestedSub(a):e.subscribe(a),n=Kne())}function v(){r&&(r(),r=void 0,n.clear(),n=bD)}const S={addNestedSub:i,notifyNestedSubs:l,handleChangeWrapper:a,isSubscribed:s,trySubscribe:d,tryUnsubscribe:v,getListeners:()=>n};return S}const Yne=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",B2=Yne?Fe.useLayoutEffect:Fe.useEffect;function xD(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Ww(e,t){if(xD(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!xD(e[r[i]],t[r[i]]))return!1;return!0}const Jne=["reactReduxForwardedRef"];let vU=oU;const Qne=e=>{vU=e},eie=[null,null];function tie(e,t,r){B2(()=>e(...t),r)}function rie(e,t,r,n,i,l){e.current=n,r.current=!1,i.current&&(i.current=null,l())}function nie(e,t,r,n,i,l,a,s,d,v,S){if(!e)return()=>{};let A=!1,P=null;const L=()=>{if(A||!s.current)return;const K=t.getState();let re,G;try{re=n(K,i.current)}catch(H){G=H,P=H}G||(P=null),re===l.current?a.current||v():(l.current=re,d.current=re,a.current=!0,S())};return r.onStateChange=L,r.trySubscribe(),L(),()=>{if(A=!0,r.tryUnsubscribe(),r.onStateChange=null,P)throw P}}function iie(e,t){return e===t}function _U(e,t,r,{pure:n,areStatesEqual:i=iie,areOwnPropsEqual:l=Ww,areStatePropsEqual:a=Ww,areMergedPropsEqual:s=Ww,forwardRef:d=!1,context:v=od}={}){const S=v,A=Hne(e),P=Gne(t),L=Xne(r),F=!!e;return re=>{const G=re.displayName||re.name||"Component",H=`Connect(${G})`,B={shouldHandleStateChanges:F,displayName:H,wrappedComponentName:G,WrappedComponent:re,initMapStateToProps:A,initMapDispatchToProps:P,initMergeProps:L,areStatesEqual:i,areStatePropsEqual:a,areOwnPropsEqual:l,areMergedPropsEqual:s};function $(X){const[te,pe,ke]=Fe.useMemo(()=>{const{reactReduxForwardedRef:Qn}=X,an=uU(X,Jne);return[X.context,Qn,an]},[X]),Pe=Fe.useMemo(()=>te&&te.Consumer&&Fne.isContextConsumer(Ee.createElement(te.Consumer,null))?te:S,[te,S]),ge=Fe.useContext(Pe),Ie=!!X.store&&!!X.store.getState&&!!X.store.dispatch,Ne=!!ge&&!!ge.store,lt=Ie?X.store:ge.store,it=Ne?ge.getServerState:lt.getState,Rt=Fe.useMemo(()=>Vne(lt.dispatch,B),[lt]),[St,Zt]=Fe.useMemo(()=>{if(!F)return eie;const Qn=yU(lt,Ie?void 0:ge.subscription),an=Qn.notifyNestedSubs.bind(Qn);return[Qn,an]},[lt,Ie,ge]),Kt=Fe.useMemo(()=>Ie?ge:Sy({},ge,{subscription:St}),[Ie,ge,St]),Ge=Fe.useRef(),Ye=Fe.useRef(ke),Dr=Fe.useRef(),wr=Fe.useRef(!1);Fe.useRef(!1);const tr=Fe.useRef(!1),br=Fe.useRef();B2(()=>(tr.current=!0,()=>{tr.current=!1}),[]);const Bt=Fe.useMemo(()=>()=>Dr.current&&ke===Ye.current?Dr.current:Rt(lt.getState(),ke),[lt,ke]),hr=Fe.useMemo(()=>an=>St?nie(F,lt,St,Rt,Ye,Ge,wr,tr,Dr,Zt,an):()=>{},[St]);tie(rie,[Ye,Ge,wr,ke,Dr,Zt]);let cr;try{cr=vU(hr,Bt,it?()=>Rt(it(),ke):Bt)}catch(Qn){throw br.current&&(Qn.message+=`
The error may be correlated with this previous error:
${br.current.stack}

`),Qn}B2(()=>{br.current=void 0,Dr.current=void 0,Ge.current=cr});const Mn=Fe.useMemo(()=>Ee.createElement(re,Sy({},cr,{ref:pe})),[pe,re,cr]);return Fe.useMemo(()=>F?Ee.createElement(Pe.Provider,{value:Kt},Mn):Mn,[Pe,Mn,Kt])}const z=Ee.memo($);if(z.WrappedComponent=re,z.displayName=$.displayName=H,d){const te=Ee.forwardRef(function(ke,Pe){return Ee.createElement(z,Sy({},ke,{reactReduxForwardedRef:Pe}))});return te.displayName=H,te.WrappedComponent=re,vD(te,re)}return vD(z,re)}}function bU({store:e,context:t,children:r,serverState:n}){const i=Fe.useMemo(()=>{const s=yU(e);return{store:e,subscription:s,getServerState:n?()=>n:void 0}},[e,n]),l=Fe.useMemo(()=>e.getState(),[e]);B2(()=>{const{subscription:s}=i;return s.onStateChange=s.notifyNestedSubs,s.trySubscribe(),l!==e.getState()&&s.notifyNestedSubs(),()=>{s.tryUnsubscribe(),s.onStateChange=void 0}},[i,l]);const a=t||od;return Ee.createElement(a.Provider,{value:i},r)}function YM(e=od){const t=e===od?aU:()=>Fe.useContext(e);return function(){const{store:n}=t();return n}}const xU=YM();function wU(e=od){const t=e===od?xU:YM(e);return function(){return t().dispatch}}const SU=wU();wne(vne.useSyncExternalStoreWithSelector);Qne(tU.useSyncExternalStore);bne(eM.unstable_batchedUpdates);const aie=Object.freeze(Object.defineProperty({__proto__:null,Provider:bU,ReactReduxContext:od,batch:eM.unstable_batchedUpdates,connect:_U,createDispatchHook:wU,createSelectorHook:lU,createStoreHook:YM,shallowEqual:Ww,useDispatch:SU,useSelector:Ps,useStore:xU},Symbol.toStringTag,{value:"Module"})),k0=Vy(aie);var vE={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sendSystemMessage=e.dismissSystemMessage=e.default=void 0;function t(G){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},t(G)}function r(G,H){var B=Object.keys(G);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(G);H&&($=$.filter(function(N){return Object.getOwnPropertyDescriptor(G,N).enumerable})),B.push.apply(B,$)}return B}function n(G){for(var H=1;H<arguments.length;H++){var B=arguments[H]!=null?arguments[H]:{};H%2?r(Object(B),!0).forEach(function($){i(G,$,B[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(B)):r(Object(B)).forEach(function($){Object.defineProperty(G,$,Object.getOwnPropertyDescriptor(B,$))})}return G}function i(G,H,B){return H=l(H),H in G?Object.defineProperty(G,H,{value:B,enumerable:!0,configurable:!0,writable:!0}):G[H]=B,G}function l(G){var H=a(G,"string");return t(H)==="symbol"?H:String(H)}function a(G,H){if(t(G)!=="object"||G===null)return G;var B=G[Symbol.toPrimitive];if(B!==void 0){var $=B.call(G,H||"default");if(t($)!=="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)(G)}var s="SEND_SYSTEM_MESSAGE",d="DISMISS_SYSTEM_MESSAGE",v=0,S=function(){return"system-message-".concat(++v)},A=["Danger","Warning","Success","Info"],P={duration:7500,type:A[0],onDismiss:function(){},onConfirm:null},L=function(H){return H.id||(H.id=S()),A.includes(H.type)||(H.type=A[0]),H},F=function(H){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function($){return Promise.resolve($({type:s,message:H,options:L(n(n({},P),B))}))}};e.sendSystemMessage=F;var K=function(H){return function(B){return Promise.resolve(B({type:d,id:H}))}};e.dismissSystemMessage=K;var re=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],B=arguments.length>1?arguments[1]:void 0;switch(B.type){case s:{var $=H.filter(function(N){var z=N.id;return z!==B.options.id});return $.push(n({message:B.message},B.options)),$}case d:return H.filter(function(N){var z=N.id;return z!==B.id});default:return H}};e.default=re})(vE);var wP={},Za={},bc={};Object.defineProperty(bc,"__esModule",{value:!0});bc.postJson=bc.Config=void 0;function Mx(e){return Mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mx(e)}function wD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function EU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wD(Object(r),!0).forEach(function(n){oie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oie(e,t,r){return t=sie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sie(e){var t=lie(e,"string");return Mx(t)==="symbol"?t:String(t)}function lie(e,t){if(Mx(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Mx(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uie=function(){var e=null;return function t(r){return arguments.length?(e=EU({},r),Object.assign(t,r),t):e}}();bc.Config=uie;var cie=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return fetch(t,EU({method:"POST",headers:{Accept:"application/json, text/plain","Content-type":"application/json"},body:JSON.stringify(r)},n)).then(function(i){if(i.ok)return i.json();throw new Error("There was a network problem.")})};bc.postJson=cie;var SD;function Ky(){if(SD)return Za;SD=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.updatePassword=Za.setUserToken=Za.setPassword=Za.resetPassword=Za.removeUserToken=Za.receiveAuthResponse=Za.logout=Za.login=Za.isAuthenticating=Za.getUserToken=Za.auth=Za.USER_LOGOUT=Za.USER_LOGIN=Za.UPDATE_USER=Za.IS_AUTHENTICATING=Za.AUTH_FAILURE=void 0;var e=hm(),t=bc,r="AMS::USER_LOGIN";Za.USER_LOGIN=r;var n="AMS::USER_LOGOUT";Za.USER_LOGOUT=n;var i="AMS::AUTH_FAILURE";Za.AUTH_FAILURE=i;var l="AMS::UPDATE_USER";Za.UPDATE_USER=l;var a="AMS::IS_AUTHENTICATING";Za.IS_AUTHENTICATING=a;var s=function(B){return{type:r,user:B}};Za.receiveAuthResponse=s;var d=function(B){window.localStorage&&window.localStorage.setItem("userToken",B.token)};Za.setUserToken=d;var v=function(B){return window.localStorage?window.localStorage.getItem("userToken"):null};Za.getUserToken=v;var S=function(){window.localStorage&&window.localStorage.removeItem("userToken")};Za.removeUserToken=S;var A=function(){return function(B){return Promise.resolve(B({type:n}))}};Za.logout=A;var P=function(){return{type:a}};Za.isAuthenticating=P;var L=function(B,$){return function(N){var z=(0,t.Config)(),X=z.AUTH_HOST,te=z.PROJECT_NAME;return N(P()),(0,t.postJson)("".concat(X,"/login"),{email:B,password:$,project:te}).then(function(pe){pe.error?(N({type:i}),N((0,e.sendSystemMessage)(pe.error,{type:"Danger"}))):N(s(pe.user))}).catch(function(pe){N((0,e.sendSystemMessage)("Cannot contact authentication server.")),N({type:i})})}};Za.login=L;var F=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v();return function($){return B?($(P()),(0,t.postJson)("".concat(t.Config.AUTH_HOST,"/auth"),{token:B,project:t.Config.PROJECT_NAME}).then(function(N){N.error?($({type:i}),$((0,e.sendSystemMessage)(N.error))):$(s(N.user))}).catch(function(N){$((0,e.sendSystemMessage)("Cannot contact authentication server.")),$({type:i})})):$({type:i})}};Za.auth=F;var K=function(B,$){return function(N,z){var X=z().user.token;return X?(0,t.postJson)("".concat(t.Config.AUTH_HOST,"/password/update"),{token:X,current:B,password:$}).then(function(te){return te.error?N((0,e.sendSystemMessage)(te.error)):(d(te),N((0,e.sendSystemMessage)(te.message)),N({type:l,update:{token:te.token}}))}):Promise.resolve()}};Za.updatePassword=K;var re=function(B,$){return function(N){var z=(0,t.Config)(),X=z.AUTH_HOST,te=z.CLIENT_HOST;return(0,t.postJson)("".concat(X,"/password/set"),{token:B,password:$,host:te,url:"/auth/set-passord"}).then(function(pe){if(pe.error)N((0,e.sendSystemMessage)(pe.error));else return pe.message&&N((0,e.sendSystemMessage)(pe.message)),N(F(pe.token))})}};Za.setPassword=re;var G=function(B){return function($){var N=(0,t.Config)(),z=N.AUTH_HOST,X=N.PROJECT_NAME,te=N.CLIENT_HOST;return(0,t.postJson)("".concat(z,"/password/reset"),{email:B,project_name:X,host:te,url:"/auth/set-password"}).then(function(pe){pe.error?$((0,e.sendSystemMessage)(pe.error)):$((0,e.sendSystemMessage)(pe.message))})}};return Za.resetPassword=G,Za}var il={},Fl={},ED;function _E(){if(ED)return Fl;ED=1,Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.usersForGroup=Fl.removeFromGroup=Fl.getUsers=Fl.deleteUser=Fl.createFake=Fl.assignToGroup=Fl.USERS_IN_GROUPS=Fl.GET_USERS=void 0;var e=Ky(),t=hm(),r=bc;function n(G){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},n(G)}function i(G,H){var B=Object.keys(G);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(G);H&&($=$.filter(function(N){return Object.getOwnPropertyDescriptor(G,N).enumerable})),B.push.apply(B,$)}return B}function l(G){for(var H=1;H<arguments.length;H++){var B=arguments[H]!=null?arguments[H]:{};H%2?i(Object(B),!0).forEach(function($){a(G,$,B[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(B)):i(Object(B)).forEach(function($){Object.defineProperty(G,$,Object.getOwnPropertyDescriptor(B,$))})}return G}function a(G,H,B){return H=s(H),H in G?Object.defineProperty(G,H,{value:B,enumerable:!0,configurable:!0,writable:!0}):G[H]=B,G}function s(G){var H=d(G,"string");return n(H)==="symbol"?H:String(H)}function d(G,H){if(n(G)!=="object"||G===null)return G;var B=G[Symbol.toPrimitive];if(B!==void 0){var $=B.call(G,H||"default");if(n($)!=="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)(G)}var v="AMS::GET_USERS";Fl.GET_USERS=v;var S="AMS::USERS_IN_GROUPS";Fl.USERS_IN_GROUPS=S;var A=function(){return function(H,B){var $=B().user.token;return $?(0,r.postJson)("".concat(r.Config.AUTH_HOST,"/users"),{token:$}).then(function(N){N.error?(H((0,e.auth)()),H((0,t.sendSystemMessage)(N.error))):H(l({type:v},N))}):Promise.resolve()}};Fl.getUsers=A;var P=function(H){return function(B,$){var N=$().user.token;return N?(0,r.postJson)("".concat(r.Config.AUTH_HOST,"/users/bygroup"),{token:N,groups:[H]}).then(function(z){z.error?(B((0,e.auth)()),B((0,t.sendSystemMessage)(z.error))):B(l({type:S,group:H},z))}):Promise.resolve()}};Fl.usersForGroup=P;var L=function(H,B){return function($,N){var z=N().user,X=z.token,te=z.email;return X?(0,r.postJson)("".concat(r.Config.AUTH_HOST,"/user/group/assign"),{token:X,user_email:H,group_name:B}).then(function(pe){return pe.error?($((0,e.auth)()),$((0,t.sendSystemMessage)(pe.error))):$(A()).then(function(){te===H&&$((0,e.auth)())}).then(function(){if(pe.message)return $((0,t.sendSystemMessage)(pe.message))})}):Promise.resolve()}};Fl.assignToGroup=L;var F=function(H,B){return function($,N){var z=N().user,X=z.token,te=z.email;return X?(0,r.postJson)("".concat(r.Config.AUTH_HOST,"/user/group/remove"),{token:X,user_email:H,group_name:B}).then(function(pe){if(pe.error)$((0,e.auth)()),$((0,t.sendSystemMessage)(pe.error));else return $(A()).then(function(){te===H&&$((0,e.auth)())}).then(function(){pe.message&&$((0,t.sendSystemMessage)(pe.message))})}):Promise.resolve()}};Fl.removeFromGroup=F;var K=function(H){return function(B,$){var N=$().user.token;return N?(0,r.postJson)("".concat(r.Config.AUTH_HOST,"/user/delete"),{token:N,user_email:H}).then(function(z){z.error?(B((0,e.auth)()),B((0,t.sendSystemMessage)(z.error))):(B(A()),B((0,e.auth)()),z.message&&B((0,t.sendSystemMessage)(z.message)))}):Promise.resolve()}};Fl.deleteUser=K;var re=function(){return function(H,B){var $=B().user.token;return $?(0,r.postJson)("".concat(r.Config.AUTH_HOST,"/user/create/fake"),{token:$}).then(function(N){N.error?(H((0,e.auth)()),H((0,t.sendSystemMessage)(N.error))):(H(A()),H((0,t.sendSystemMessage)(N.message,{duration:1e4})))}):Promise.resolve()}};return Fl.createFake=re,Fl}var CD;function CU(){if(CD)return il;CD=1,Object.defineProperty(il,"__esModule",{value:!0}),il.removeFromProject=il.groupsForProject=il.getGroups=il.deleteGroup=il.createGroup=il.createAndAssign=il.assignToProject=il.adjustAuthLevel=il.GET_GROUPS=void 0;var e=Ky(),t=_E(),r=hm(),n=bc;function i(B){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},i(B)}function l(B,$){var N=Object.keys(B);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(B);$&&(z=z.filter(function(X){return Object.getOwnPropertyDescriptor(B,X).enumerable})),N.push.apply(N,z)}return N}function a(B){for(var $=1;$<arguments.length;$++){var N=arguments[$]!=null?arguments[$]:{};$%2?l(Object(N),!0).forEach(function(z){s(B,z,N[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(N)):l(Object(N)).forEach(function(z){Object.defineProperty(B,z,Object.getOwnPropertyDescriptor(N,z))})}return B}function s(B,$,N){return $=d($),$ in B?Object.defineProperty(B,$,{value:N,enumerable:!0,configurable:!0,writable:!0}):B[$]=N,B}function d(B){var $=v(B,"string");return i($)==="symbol"?$:String($)}function v(B,$){if(i(B)!=="object"||B===null)return B;var N=B[Symbol.toPrimitive];if(N!==void 0){var z=N.call(B,$||"default");if(i(z)!=="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(B)}var S="AMS::GET_GROUPS";il.GET_GROUPS=S;var A=function(){return function($,N){var z=N().user.token;return z?(0,n.postJson)("".concat(n.Config.AUTH_HOST,"/groups"),{token:z}).then(function(X){X.error?($((0,e.auth)()),$((0,r.sendSystemMessage)(X.error))):$(a({type:S},X))}):Promise.resolve()}};il.getGroups=A;var P=function(){return function($,N){var z=N().user.token,X=(0,n.Config)(),te=X.AUTH_HOST,pe=X.PROJECT_NAME;return z?(0,n.postJson)("".concat(te,"/groups/byproject"),{token:z,project:pe}).then(function(ke){ke.error?($((0,e.auth)()),$((0,r.sendSystemMessage)(ke.error))):$(a({type:S},ke))}):Promise.resolve()}};il.groupsForProject=P;var L=function($){return function(N,z){var X=z().user.token;return X?(0,n.postJson)("".concat(n.Config.AUTH_HOST,"/group/create"),{token:X,name:$}).then(function(te){te.error?(N((0,e.auth)()),N((0,r.sendSystemMessage)(te.error))):(N(A()),te.message&&N((0,r.sendSystemMessage)(te.message)))}):Promise.resolve()}};il.createGroup=L;var F=function($){return function(N,z){var X=z().user,te=X.token,pe=X.groups;return te?(0,n.postJson)("".concat(n.Config.AUTH_HOST,"/group/delete"),{token:te,name:$}).then(function(ke){ke.error?(N((0,e.auth)()),N((0,r.sendSystemMessage)(ke.error))):(pe.includes($)&&N((0,e.auth)()),N((0,t.getUsers)()),N(A()),ke.message&&N((0,r.sendSystemMessage)(ke.message)))}):Promise.resolve()}};il.deleteGroup=F;var K=function($,N){return function(z,X){var te=X().user.token;return te?(0,n.postJson)("".concat(n.Config.AUTH_HOST,"/group/create/project/assign"),{token:te,group_name:$,project_name:n.Config.PROJECT_NAME,auth_level:N}).then(function(pe){pe.error?(z((0,e.auth)()),z((0,r.sendSystemMessage)(pe.error))):(z(A()),pe.message&&z((0,r.sendSystemMessage)(pe.message)))}):Promise.resolve()}};il.createAndAssign=K;var re=function($,N){return function(z,X){var te=X().user,pe=te.token,ke=te.groups;return pe?(0,n.postJson)("".concat(n.Config.AUTH_HOST,"/group/project/assign"),{token:pe,group_name:$,project_name:n.Config.PROJECT_NAME,auth_level:N}).then(function(Pe){Pe.error?(z((0,e.auth)()),z((0,r.sendSystemMessage)(Pe.error))):(ke.includes($)&&z((0,e.auth)()),z(A()),Pe.message&&z((0,r.sendSystemMessage)(Pe.message)))}):Promise.resolve()}};il.assignToProject=re;var G=function($){return function(N,z){var X=z().user,te=X.token,pe=X.groups;return te?(0,n.postJson)("".concat(n.Config.AUTH_HOST,"/group/project/remove"),{token:te,group_name:$,project_name:n.Config.PROJECT_NAME}).then(function(ke){ke.error?(N((0,e.auth)()),N((0,r.sendSystemMessage)(ke.error))):(pe.includes($)&&N((0,e.auth)()),N(A()),N((0,t.getUsers)()),ke.message&&N((0,r.sendSystemMessage)(ke.message)))}):Promise.resolve()}};il.removeFromProject=G;var H=function($,N){return function(z,X){var te=X().user.token;return te?(0,n.postJson)("".concat(n.Config.AUTH_HOST,"/group/project/adjust"),{token:te,group_name:$,project_name:n.Config.PROJECT_NAME,auth_level:N}).then(function(pe){pe.error?(z((0,e.auth)()),z((0,r.sendSystemMessage)(pe.error))):(z(A()),pe.message&&z((0,r.sendSystemMessage)(pe.message)))}):Promise.resolve()}};return il.adjustAuthLevel=H,il}var zs={},PD;function PU(){if(PD)return zs;PD=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.verifyRequest=zs.verifyEmail=zs.signupReject=zs.signupAccept=zs.signup=zs.sendInvite=zs.getRequests=zs.deleteRequest=zs.acceptInvite=zs.GET_REQUESTS=void 0;var e=Ky(),t=hm(),r=_E(),n=bc;function i($){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},i($)}function l($,N){var z=Object.keys($);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols($);N&&(X=X.filter(function(te){return Object.getOwnPropertyDescriptor($,te).enumerable})),z.push.apply(z,X)}return z}function a($){for(var N=1;N<arguments.length;N++){var z=arguments[N]!=null?arguments[N]:{};N%2?l(Object(z),!0).forEach(function(X){s($,X,z[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(z)):l(Object(z)).forEach(function(X){Object.defineProperty($,X,Object.getOwnPropertyDescriptor(z,X))})}return $}function s($,N,z){return N=d(N),N in $?Object.defineProperty($,N,{value:z,enumerable:!0,configurable:!0,writable:!0}):$[N]=z,$}function d($){var N=v($,"string");return i(N)==="symbol"?N:String(N)}function v($,N){if(i($)!=="object"||$===null)return $;var z=$[Symbol.toPrimitive];if(z!==void 0){var X=z.call($,N||"default");if(i(X)!=="object")return X;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)($)}var S="AMS::GET_REQUESTS";zs.GET_REQUESTS=S;var A=function(){return function(N,z){var X=z().user.token;return X?(0,n.postJson)("".concat(n.Config.AUTH_HOST,"/requests/byProject"),{token:X,project_name:n.Config.PROJECT_NAME}).then(function(te){te.error?N((0,t.sendSystemMessage)(te.error)):(N(a({type:S},te)),te.message&&N((0,t.sendSystemMessage)(te.message)))}):Promise.resolve()}};zs.getRequests=A;var P=function(N){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function(X){return(0,n.postJson)("".concat(n.Config.AUTH_HOST,"/signup/request"),{email:N,addToGroup:z,project:n.Config.PROJECT_NAME,host:n.Config.CLIENT_HOST,url:z?"/auth/verify-request":"/auth/verify-email"}).then(function(te){return te.error?X((0,t.sendSystemMessage)(te.error,{type:"Danger"})):(te.user&&X((0,e.receiveAuthResponse)(te.user)),X((0,t.sendSystemMessage)(te.message)))}).catch(function(te){return console.log("err",te)})}};zs.signup=P;var L=function(N,z){return function(X,te){var pe=te().user.token;return pe?(0,n.postJson)("".concat(n.Config.AUTH_HOST,"/signup/accept"),{group_name:z,user_email:N,token:pe,project_name:n.Config.PROJECT_NAME,host:n.Config.CLIENT_HOST,url:"/auth/set-password"}).then(function(ke){return ke.error?X((0,t.sendSystemMessage)(ke.error,{type:"Danger"})):(X(A()),X((0,r.getUsers)()),X((0,t.sendSystemMessage)(ke.message)))}):Promise.resolve()}};zs.signupAccept=L;var F=function(N){var z=N.user_email,X=N.project_name;return function(te,pe){var ke=pe().user.token;return ke?(0,n.postJson)("".concat(n.Config.AUTH_HOST,"/signup/reject"),{token:ke,user_email:z,project_name:X}).then(function(Pe){Pe.error?te((0,t.sendSystemMessage)(Pe.error)):(te(A()),te((0,r.getUsers)()),Pe.message&&te((0,t.sendSystemMessage)(Pe.message)))}):Promise.resolve()}};zs.signupReject=F;var K=function(N){return function(z){return(0,n.postJson)("".concat(n.Config.AUTH_HOST,"/email/verify"),{token:N}).then(function(X){return{dispatch:z,res:X,sendSystemMessage:t.sendSystemMessage}})}};zs.verifyEmail=K;var re=function(N,z){return function(X){return(0,n.postJson)("".concat(n.Config.AUTH_HOST,"/signup/request/verify"),{token:N,password:z}).then(function(te){return te.error?X((0,t.sendSystemMessage)(te.error,{type:"Danger"})):(X((0,t.sendSystemMessage)(te.message)),X((0,e.receiveAuthResponse)(te.user)))})}};zs.verifyRequest=re;var G=function(N){return function(z,X){var te=X().user.token;return te?(0,n.postJson)("".concat(n.Config.AUTH_HOST,"/signup/delete"),{token:te,user_email:N.user_email,project_name:N.project_name}).then(function(pe){pe.error?(z((0,e.auth)()),z((0,t.sendSystemMessage)(pe.error))):(z(A()),pe.message&&z((0,t.sendSystemMessage)(pe.message)))}):Promise.resolve()}};zs.deleteRequest=G;var H=function(N,z){return function(X,te){var pe=te().user.token;return pe?(0,n.postJson)("".concat(n.Config.AUTH_HOST,"/invite"),{token:pe,user_email:N,group_name:z,project_name:n.Config.PROJECT_NAME,host:n.Config.CLIENT_HOST,url:"/auth/accept-invite"}).then(function(ke){ke.error?(X((0,e.auth)()),X((0,t.sendSystemMessage)(ke.error))):(X(A()),X((0,t.sendSystemMessage)(ke.message)))}):Promise.resolve()}};zs.sendInvite=H;var B=function(N,z){return function(X){return(0,n.postJson)("".concat(n.Config.AUTH_HOST,"/invite/accept"),{token:N,password:z}).then(function(te){return te.error?(X((0,e.auth)()),X((0,t.sendSystemMessage)(te.error,{type:"Danger"}))):(X((0,t.sendSystemMessage)(te.message)),X((0,e.receiveAuthResponse)(te.user)))})}};return zs.acceptInvite=B,zs}var Vd={},TD;function TU(){if(TD)return Vd;TD=1,Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.updateUserPreferences=Vd.getUserPreferences=Vd.GET_PREFERENCES=void 0;var e=hm(),t=bc,r="AMS::GET_PREFERENCES";Vd.GET_PREFERENCES=r;var n=function(){return function(a,s){var d=s().user.token;if(d){var v=(0,t.Config)(),S=v.AUTH_HOST,A=v.PROJECT_NAME;(0,t.postJson)("".concat(S,"/preferences"),{token:d,project:A}).then(function(P){P.error?a((0,e.sendSystemMessage)(P.error)):a({type:r,preferences:P.preferences||{}})})}else return Promise.resolve()}};Vd.getUserPreferences=n;var i=function(a){return function(s,d){var v=d().user.token;if(v){var S=(0,t.Config)(),A=S.AUTH_HOST,P=S.PROJECT_NAME;(0,t.postJson)("".concat(A,"/preferences/update"),{token:v,project:P,preferences:a}).then(function(L){L.error?s((0,e.sendSystemMessage)(L.error)):(s((0,e.sendSystemMessage)(L.message)),s({type:r,preferences:L.preferences}))})}else return Promise.resolve()}};return Vd.updateUserPreferences=i,Vd}var qd={},AD;function AU(){if(AD)return qd;AD=1,Object.defineProperty(qd,"__esModule",{value:!0}),qd.getSlackUserFromUserId=qd.getSlackUserFromEmail=qd.GET_SLACK_USER=void 0;var e=hm(),t=bc,r="AMS::GET_SLACK_USER";qd.GET_SLACK_USER=r;var n=function(a){return function(s,d){var v=(0,t.Config)(),S=v.SLACK_KEY;if(S){var A="https://slack.com/api/users.lookupByEmail",P={method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded"},body:"token=".concat(encodeURIComponent(S),"&email=").concat(encodeURIComponent(a))};return fetch(A,P).then(function(L){if(L.ok)return L.json();s((0,e.sendSystemMessage)("There was a network error."))}).then(function(L){L.ok?s({type:r,slacker:L.user}):s((0,e.sendSystemMessage)(L.error))})}else return Promise.resolve()}};qd.getSlackUserFromEmail=n;var i=function(a){return function(s,d){var v=(0,t.Config)(),S=v.SLACK_KEY;if(!S)return Promise.resolve()}};return qd.getSlackUserFromUserId=i,qd}var wf={},kD;function kU(){if(kD)return wf;kD=1,Object.defineProperty(wf,"__esModule",{value:!0}),wf.viewMessages=wf.postMessage=wf.getMessages=wf.deleteMessages=wf.GET_MESSAGES=void 0;var e=hm(),t=bc;function r(L){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},r(L)}function n(L,F){var K=Object.keys(L);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(L);F&&(re=re.filter(function(G){return Object.getOwnPropertyDescriptor(L,G).enumerable})),K.push.apply(K,re)}return K}function i(L){for(var F=1;F<arguments.length;F++){var K=arguments[F]!=null?arguments[F]:{};F%2?n(Object(K),!0).forEach(function(re){l(L,re,K[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(K)):n(Object(K)).forEach(function(re){Object.defineProperty(L,re,Object.getOwnPropertyDescriptor(K,re))})}return L}function l(L,F,K){return F=a(F),F in L?Object.defineProperty(L,F,{value:K,enumerable:!0,configurable:!0,writable:!0}):L[F]=K,L}function a(L){var F=s(L,"string");return r(F)==="symbol"?F:String(F)}function s(L,F){if(r(L)!=="object"||L===null)return L;var K=L[Symbol.toPrimitive];if(K!==void 0){var re=K.call(L,F||"default");if(r(re)!=="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(L)}var d="AMS::GET_MESSAGES";wf.GET_MESSAGES=d;var v=function(){return function(F,K){var re=K().user.token;if(re){var G=(0,t.Config)(),H=G.AUTH_HOST,B=G.PROJECT_NAME;(0,t.postJson)("".concat(H,"/messages"),{token:re,project:B}).then(function($){$.error?F((0,e.sendSystemMessage)($.error)):F(i({type:d},$))}).catch(function($){(0,e.sendSystemMessage)($)})}else return Promise.resolve()}};wf.getMessages=v;var S=function(F){return function(K,re){var G=re().user.token;if(G){var H=(0,t.Config)(),B=H.AUTH_HOST;(0,t.postJson)("".concat(B,"/messages/view"),{token:G,ids:F}).then(function($){$.error?K((0,e.sendSystemMessage)($.error)):K(v())}).catch(function($){(0,e.sendSystemMessage)($)})}else return Promise.resolve()}};wf.viewMessages=S;var A=function(F){return function(K,re){var G=re().user.token;if(G){var H=(0,t.Config)(),B=H.AUTH_HOST;(0,t.postJson)("".concat(B,"/messages/delete"),{token:G,ids:F}).then(function($){$.error?K((0,e.sendSystemMessage)($.error)):K(v())}).catch(function($){(0,e.sendSystemMessage)($)})}else return Promise.resolve()}};wf.deleteMessages=A;var P=function(F,K,re,G){return function(H,B){var $=B().user.token;if($){var N=(0,t.Config)(),z=N.AUTH_HOST,X=N.PROJECT_NAME;return(0,t.postJson)("".concat(z,"/messages/post"),{token:$,heading:F,message:K,type:re,target:G,project:X}).then(function(te){te.error?H((0,e.sendSystemMessage)(te.error)):te.message&&H((0,e.sendSystemMessage)(te.message,{type:"Info"}))})}else return Promise.resolve()}};return wf.postMessage=P,wf}var ID;function JM(){return ID||(ID=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"acceptInvite",{enumerable:!0,get:function(){return i.acceptInvite}}),Object.defineProperty(e,"adjustAuthLevel",{enumerable:!0,get:function(){return r.adjustAuthLevel}}),Object.defineProperty(e,"assignToGroup",{enumerable:!0,get:function(){return n.assignToGroup}}),Object.defineProperty(e,"assignToProject",{enumerable:!0,get:function(){return r.assignToProject}}),Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return t.auth}}),Object.defineProperty(e,"createAndAssign",{enumerable:!0,get:function(){return r.createAndAssign}}),Object.defineProperty(e,"createGroup",{enumerable:!0,get:function(){return r.createGroup}}),Object.defineProperty(e,"deleteGroup",{enumerable:!0,get:function(){return r.deleteGroup}}),Object.defineProperty(e,"deleteMessages",{enumerable:!0,get:function(){return s.deleteMessages}}),Object.defineProperty(e,"deleteRequest",{enumerable:!0,get:function(){return i.deleteRequest}}),Object.defineProperty(e,"deleteUser",{enumerable:!0,get:function(){return n.deleteUser}}),Object.defineProperty(e,"getGroups",{enumerable:!0,get:function(){return r.getGroups}}),Object.defineProperty(e,"getMessages",{enumerable:!0,get:function(){return s.getMessages}}),Object.defineProperty(e,"getRequests",{enumerable:!0,get:function(){return i.getRequests}}),Object.defineProperty(e,"getSlackUserFromEmail",{enumerable:!0,get:function(){return a.getSlackUserFromEmail}}),Object.defineProperty(e,"getSlackUserFromUserId",{enumerable:!0,get:function(){return a.getSlackUserFromUserId}}),Object.defineProperty(e,"getUserPreferences",{enumerable:!0,get:function(){return l.getUserPreferences}}),Object.defineProperty(e,"getUsers",{enumerable:!0,get:function(){return n.getUsers}}),Object.defineProperty(e,"login",{enumerable:!0,get:function(){return t.login}}),Object.defineProperty(e,"logout",{enumerable:!0,get:function(){return t.logout}}),Object.defineProperty(e,"postMessage",{enumerable:!0,get:function(){return s.postMessage}}),Object.defineProperty(e,"removeFromGroup",{enumerable:!0,get:function(){return n.removeFromGroup}}),Object.defineProperty(e,"removeFromProject",{enumerable:!0,get:function(){return r.removeFromProject}}),Object.defineProperty(e,"resetPassword",{enumerable:!0,get:function(){return t.resetPassword}}),Object.defineProperty(e,"sendInvite",{enumerable:!0,get:function(){return i.sendInvite}}),Object.defineProperty(e,"setPassword",{enumerable:!0,get:function(){return t.setPassword}}),Object.defineProperty(e,"signup",{enumerable:!0,get:function(){return i.signup}}),Object.defineProperty(e,"signupAccept",{enumerable:!0,get:function(){return i.signupAccept}}),Object.defineProperty(e,"signupReject",{enumerable:!0,get:function(){return i.signupReject}}),Object.defineProperty(e,"updatePassword",{enumerable:!0,get:function(){return t.updatePassword}}),Object.defineProperty(e,"updateUserPreferences",{enumerable:!0,get:function(){return l.updateUserPreferences}}),Object.defineProperty(e,"usersForGroup",{enumerable:!0,get:function(){return n.usersForGroup}}),Object.defineProperty(e,"verifyEmail",{enumerable:!0,get:function(){return i.verifyEmail}}),Object.defineProperty(e,"verifyRequest",{enumerable:!0,get:function(){return i.verifyRequest}}),Object.defineProperty(e,"viewMessages",{enumerable:!0,get:function(){return s.viewMessages}});var t=Ky(),r=CU(),n=_E(),i=PU(),l=TU(),a=AU(),s=kU()}(wP)),wP}var MD;function IU(){return MD||(MD=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.postMessageWrapper=e.default=e.MessageTypes=void 0;var t=s(Fe),r=k0,n=vE,i=JM(),l=bc,a=["getUsers","getGroups","users","groups","projectName","postMessage","sendSystemMessage"];function s(ge){return ge&&ge.__esModule?ge:{default:ge}}function d(ge){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ie){return typeof Ie}:function(Ie){return Ie&&typeof Symbol=="function"&&Ie.constructor===Symbol&&Ie!==Symbol.prototype?"symbol":typeof Ie},d(ge)}function v(){return v=Object.assign?Object.assign.bind():function(ge){for(var Ie=1;Ie<arguments.length;Ie++){var Ne=arguments[Ie];for(var lt in Ne)Object.prototype.hasOwnProperty.call(Ne,lt)&&(ge[lt]=Ne[lt])}return ge},v.apply(this,arguments)}function S(ge,Ie){return K(ge)||F(ge,Ie)||P(ge,Ie)||A()}function A(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P(ge,Ie){if(ge){if(typeof ge=="string")return L(ge,Ie);var Ne=Object.prototype.toString.call(ge).slice(8,-1);if(Ne==="Object"&&ge.constructor&&(Ne=ge.constructor.name),Ne==="Map"||Ne==="Set")return Array.from(ge);if(Ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ne))return L(ge,Ie)}}function L(ge,Ie){(Ie==null||Ie>ge.length)&&(Ie=ge.length);for(var Ne=0,lt=new Array(Ie);Ne<Ie;Ne++)lt[Ne]=ge[Ne];return lt}function F(ge,Ie){var Ne=ge==null?null:typeof Symbol<"u"&&ge[Symbol.iterator]||ge["@@iterator"];if(Ne!=null){var lt,it,Rt,St,Zt=[],Kt=!0,Ge=!1;try{if(Rt=(Ne=Ne.call(ge)).next,Ie===0){if(Object(Ne)!==Ne)return;Kt=!1}else for(;!(Kt=(lt=Rt.call(Ne)).done)&&(Zt.push(lt.value),Zt.length!==Ie);Kt=!0);}catch(Ye){Ge=!0,it=Ye}finally{try{if(!Kt&&Ne.return!=null&&(St=Ne.return(),Object(St)!==St))return}finally{if(Ge)throw it}}return Zt}}function K(ge){if(Array.isArray(ge))return ge}function re(ge,Ie){if(ge==null)return{};var Ne=G(ge,Ie),lt,it;if(Object.getOwnPropertySymbols){var Rt=Object.getOwnPropertySymbols(ge);for(it=0;it<Rt.length;it++)lt=Rt[it],!(Ie.indexOf(lt)>=0)&&Object.prototype.propertyIsEnumerable.call(ge,lt)&&(Ne[lt]=ge[lt])}return Ne}function G(ge,Ie){if(ge==null)return{};var Ne={},lt=Object.keys(ge),it,Rt;for(Rt=0;Rt<lt.length;Rt++)it=lt[Rt],!(Ie.indexOf(it)>=0)&&(Ne[it]=ge[it]);return Ne}function H(ge,Ie){var Ne=Object.keys(ge);if(Object.getOwnPropertySymbols){var lt=Object.getOwnPropertySymbols(ge);Ie&&(lt=lt.filter(function(it){return Object.getOwnPropertyDescriptor(ge,it).enumerable})),Ne.push.apply(Ne,lt)}return Ne}function B(ge){for(var Ie=1;Ie<arguments.length;Ie++){var Ne=arguments[Ie]!=null?arguments[Ie]:{};Ie%2?H(Object(Ne),!0).forEach(function(lt){$(ge,lt,Ne[lt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ge,Object.getOwnPropertyDescriptors(Ne)):H(Object(Ne)).forEach(function(lt){Object.defineProperty(ge,lt,Object.getOwnPropertyDescriptor(Ne,lt))})}return ge}function $(ge,Ie,Ne){return Ie=N(Ie),Ie in ge?Object.defineProperty(ge,Ie,{value:Ne,enumerable:!0,configurable:!0,writable:!0}):ge[Ie]=Ne,ge}function N(ge){var Ie=z(ge,"string");return d(Ie)==="symbol"?Ie:String(Ie)}function z(ge,Ie){if(d(ge)!=="object"||ge===null)return ge;var Ne=ge[Symbol.toPrimitive];if(Ne!==void 0){var lt=Ne.call(ge,Ie||"default");if(d(lt)!=="object")return lt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ie==="string"?String:Number)(ge)}var X=["user","users","group","project"];e.MessageTypes=X;var te={heading:"",message:"",type:"",target:"",filterGroups:[]},pe=function(Ie,Ne){var lt=Ne.type,it=Ne.payload;switch(lt){case"update-state":return B(B({},Ie),it);default:return Ie}},ke=function(Ie){var Ne=function(St){var Zt=St.getUsers,Kt=St.getGroups,Ge=St.users,Ye=St.groups,Dr=St.projectName,wr=St.postMessage;St.sendSystemMessage;var tr=re(St,a);t.default.useEffect(function(){Zt(),Kt()},[Zt,Kt]);var br=t.default.useReducer(pe,te),Bt=S(br,2),hr=Bt[0],cr=Bt[1],Mn=t.default.useMemo(function(){var Xn=hr.filterGroups,Li=Xn.reduce(function(Pi,Yi){return Pi[Yi]=!0,Pi},{});return Ge.filter(function(Pi){var Yi=Pi.projects;return Yi.reduce(function(gi,ea){return gi||ea.project_name===Dr},!1)}).filter(function(Pi){var Yi=Pi.groups;return Yi.reduce(function(gi,ea){return gi||Li[ea]},!Xn.length)}).sort(function(Pi,Yi){return Pi.email.localeCompare(Yi.email)})},[Ge,Dr,hr]),Hn=t.default.useMemo(function(){return Ye.filter(function(Xn){var Li=Xn.projects;return Li.reduce(function(Pi,Yi){return Pi||Yi.project_name===Dr},!1)}).sort(function(Xn,Li){return Xn.name.localeCompare(Li.name)})},[Ye,Dr]),Qn=t.default.useCallback(function(Xn){"type"in Xn&&(Xn.target=""),Xn.type==="project"&&(Xn.target=Dr),cr({type:"update-state",payload:Xn})},[Dr,cr]),an=t.default.useMemo(function(){var Xn=hr.heading,Li=hr.message,Pi=hr.type,Yi=hr.target;return!!(Xn&&Li&&Pi&&Yi)},[hr]),ki=t.default.useCallback(function(){if(an){var Xn=hr.heading,Li=hr.message,Pi=hr.type,Yi=hr.target;return wr(Xn,Li,Pi,Yi)}},[wr,hr,an]);return t.default.createElement(Ie,v({},tr,{canPostMessage:an,postMessage:ki,updatePostState:Qn,postState:hr,users:Mn,groups:Hn}))},lt=function(St){return{messages:St.messages,users:St.users,groups:St.groups,projectName:l.Config.PROJECT_NAME}},it={postMessage:i.postMessage,getMessages:i.getMessages,getUsers:i.getUsers,getGroups:i.getGroups,sendSystemMessage:n.sendSystemMessage};return(0,r.connect)(lt,it)(Ne)};e.postMessageWrapper=ke;var Pe=ke;e.default=Pe}(bP)),bP}var OD;function fie(){return OD||(OD=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe),r=IU();function n(l){return l&&l.__esModule?l:{default:l}}var i=(0,r.postMessageWrapper)(function(){return t.default.createElement("div",null,"postmessage")});e.default=i}(_P)),_P}var RD;function hie(){return RD||(RD=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(Fe),r=a(wp),n=f0,i=a(fie()),l=["showModal"];function a(N){return N&&N.__esModule?N:{default:N}}function s(){return s=Object.assign?Object.assign.bind():function(N){for(var z=1;z<arguments.length;z++){var X=arguments[z];for(var te in X)Object.prototype.hasOwnProperty.call(X,te)&&(N[te]=X[te])}return N},s.apply(this,arguments)}function d(N,z){return L(N)||P(N,z)||S(N,z)||v()}function v(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S(N,z){if(N){if(typeof N=="string")return A(N,z);var X=Object.prototype.toString.call(N).slice(8,-1);if(X==="Object"&&N.constructor&&(X=N.constructor.name),X==="Map"||X==="Set")return Array.from(N);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return A(N,z)}}function A(N,z){(z==null||z>N.length)&&(z=N.length);for(var X=0,te=new Array(z);X<z;X++)te[X]=N[X];return te}function P(N,z){var X=N==null?null:typeof Symbol<"u"&&N[Symbol.iterator]||N["@@iterator"];if(X!=null){var te,pe,ke,Pe,ge=[],Ie=!0,Ne=!1;try{if(ke=(X=X.call(N)).next,z===0){if(Object(X)!==X)return;Ie=!1}else for(;!(Ie=(te=ke.call(X)).done)&&(ge.push(te.value),ge.length!==z);Ie=!0);}catch(lt){Ne=!0,pe=lt}finally{try{if(!Ie&&X.return!=null&&(Pe=X.return(),Object(Pe)!==Pe))return}finally{if(Ne)throw pe}}return ge}}function L(N){if(Array.isArray(N))return N}function F(N,z){if(N==null)return{};var X=K(N,z),te,pe;if(Object.getOwnPropertySymbols){var ke=Object.getOwnPropertySymbols(N);for(pe=0;pe<ke.length;pe++)te=ke[pe],!(z.indexOf(te)>=0)&&Object.prototype.propertyIsEnumerable.call(N,te)&&(X[te]=N[te])}return X}function K(N,z){if(N==null)return{};var X={},te=Object.keys(N),pe,ke;for(ke=0;ke<te.length;ke++)pe=te[ke],!(z.indexOf(pe)>=0)&&(X[pe]=N[pe]);return X}var re=function(z){var X=z.showModal;return F(z,l),t.default.createElement("div",{className:"flex items-center"},t.default.createElement("div",{className:"flex-1 text-3xl font-bold"},"Messages"),t.default.createElement("div",{className:"text-base flex-0"},t.default.createElement("button",{onClick:X},"compose")))},G=function(z){var X=z.messages,te=z.toggleSelected,pe=z.viewMessages,ke=z.viewSelected,Pe=z.deleteMessages,ge=z.deleteSelected,Ie=z.toggleAll,Ne=z.selected,lt=(0,n.useModal)(),it=d(lt,3),Rt=it[0],St=it[1],Zt=it[2],Kt=t.default.useMemo(function(){return t.default.createElement(re,{showModal:St})},[St]);return t.default.createElement(t.default.Fragment,null,t.default.createElement(n.Modal,Rt,t.default.createElement("div",{className:"bg-gray-200 p-4 rounded"},t.default.createElement(i.default,{onPostMessage:Zt}))),t.default.createElement("div",{className:"col-span-2"},t.default.createElement(r.default,{className:"w-full",Title:Kt},t.default.createElement("div",{className:"grid grid-cols-1 gap-y-1"},X.length?t.default.createElement("div",{className:"flex items-center h-6 px-2"},t.default.createElement("div",{className:"w-4 mr-1 flex-0"},t.default.createElement("input",{className:"cursor-pointer",type:"checkbox",checked:!!Ne.length,onChange:Ie,onClick:function(Ye){return Ye.stopPropagation()}})),Ne.length?t.default.createElement("div",{className:"flex-1 flex items-center"},t.default.createElement("span",{className:"fa fa-trash mx-2 cursor-pointer hover:text-red-400",onClick:ge}),t.default.createElement("span",{className:"fa fa-eye mx-2 cursor-pointer hover:text-blue-400",onClick:ke})):null):null,X.sort(function(Ge,Ye){return new Date(Ye.sent_at)-new Date(Ge.sent_at)}).map(function(Ge){return t.default.createElement($,s({key:Ge.id},Ge,{deleteMessages:Pe,viewMessages:pe,toggleSelected:te,selected:Ne.includes(Ge.id)}))})))))},H={type:G,wrappers:["ams-messages"]},B=H;e.default=B;var $=function(z){var X=z.id,te=z.heading,pe=z.message,ke=z.sent_by,Pe=z.sent_at,ge=z.viewed,Ie=z.viewMessages,Ne=z.toggleSelected,lt=z.selected,it=t.default.useState(!1),Rt=d(it,2),St=Rt[0],Zt=Rt[1],Kt=t.default.useCallback(function(Ye){Zt(!St),!St&&!ge&&Ie([X])},[X,Ie,ge,St]),Ge=t.default.useCallback(function(Ye){Ye.stopPropagation(),Ne(X)},[Ne,X]);return t.default.createElement("div",{onClick:Kt,className:`
        cursor-pointer px-2 rounded
        `.concat(ge?"bg-gray-300":"bg-gray-100",`
      `)},t.default.createElement("div",{className:"flex items-center"},t.default.createElement("div",{className:"w-4 mr-1 flex-0"},t.default.createElement("input",{className:"cursor-pointer",type:"checkbox",checked:lt,onChange:Ge,onClick:function(Dr){return Dr.stopPropagation()}})),t.default.createElement("div",{className:"font-bold text-lg flex-0 w-72 overflow-hidden mr-4"},ke),t.default.createElement("div",{className:"font-bold text-lg flex-0"},te),t.default.createElement("div",{className:"flex-1 text-right"},new Date(Pe).toLocaleString())),St?t.default.createElement("textarea",null,pe):null)}}(gP)),gP}var MU={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(Fe),r=i(wp),n=["newPreferences","setNewPreferences","updateDisabled","updateEmailPreferences"];function i(S){return S&&S.__esModule?S:{default:S}}function l(S,A){if(S==null)return{};var P=a(S,A),L,F;if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(S);for(F=0;F<K.length;F++)L=K[F],!(A.indexOf(L)>=0)&&Object.prototype.propertyIsEnumerable.call(S,L)&&(P[L]=S[L])}return P}function a(S,A){if(S==null)return{};var P={},L=Object.keys(S),F,K;for(K=0;K<L.length;K++)F=L[K],!(A.indexOf(F)>=0)&&(P[F]=S[F]);return P}var s=function(A){A.newPreferences,A.setNewPreferences;var P=A.updateDisabled,L=A.updateEmailPreferences;return l(A,n),t.default.createElement(r.default,{Title:"Email Preferences"},t.default.createElement("div",{className:"grid grid-cols-1 gap-y-3"},t.default.createElement("div",null,t.default.createElement("label",{className:"block font-bold"},"Send Messages to Email")),t.default.createElement("button",{onClick:L,disabled:P},"update preferences")))},d={type:s,wrappers:["ams-email-preferences"]},v=d;e.default=v})(MU);var OU={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var t=r(Fe);function r(i){return i&&i.__esModule?i:{default:i}}function n(){return t.default.createElement("div",null,"Default")}})(OU);var DD;function RU(){return DD||(DD=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=te(GF),r=te(e8),n=te(t8),i=te(r8),l=te(n8),a=te(i8),s=te(a8),d=te(o8),v=te(s8),S=te(l8),A=te(u8),P=te(c8),L=te(f8),F=te(h8),K=te(p8),re=te(v8),G=te(_8),H=te(b8),B=te(E8),$=te(C8),N=te(hie()),z=te(MU),X=te(OU);function te(ge){return ge&&ge.__esModule?ge:{default:ge}}function pe(ge){var Ie=ge.config;return React.createElement("div",null," Invalid DMS Config :",React.createElement("pre",{style:{background:"#dedede"}},JSON.stringify(Ie,null,3)))}function ke(ge){var Ie=ge.path;return React.createElement("div",null," These aren't the droids you are looking for",React.createElement("div",{className:"text-5xl"},"404"),React.createElement("div",null,"/",Ie))}var Pe={"ams-login":t.default,"ams-logout":r.default,"ams-project-management":n.default,"ams-signup":i.default,"ams-reset-password":l.default,"ams-verify-request":a.default,"ams-profile":s.default,"ams-verify-email":d.default,"ams-set-password":v.default,"ams-accept-invite":S.default,"ams-directory":A.default,"ams-update-password":P.default,"ams-requests":L.default,"ams-send-invite":F.default,"ams-user-search":K.default,"ams-assign-to-project":re.default,"ams-create-group":G.default,"ams-groups-in-project":H.default,"ams-user-preferences":B.default,"ams-slack-preferences":$.default,"ams-messages":N.default,"ams-email-preferences":z.default,"ams-default":X.default,InvalidConfig:pe,NoRouteMatch:ke};e.default=Pe}(dP)),dP}var Jv={},SP={},EP={},zD;function QM(){return zD||(zD=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.useAmsApi=e.default=e.AmsApiContext=void 0;var t=a(Fe),r=k0,n=l(JM());function i(re){if(typeof WeakMap!="function")return null;var G=new WeakMap,H=new WeakMap;return(i=function($){return $?H:G})(re)}function l(re,G){if(!G&&re&&re.__esModule)return re;if(re===null||s(re)!=="object"&&typeof re!="function")return{default:re};var H=i(G);if(H&&H.has(re))return H.get(re);var B={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var N in re)if(N!=="default"&&Object.prototype.hasOwnProperty.call(re,N)){var z=$?Object.getOwnPropertyDescriptor(re,N):null;z&&(z.get||z.set)?Object.defineProperty(B,N,z):B[N]=re[N]}return B.default=re,H&&H.set(re,B),B}function a(re){return re&&re.__esModule?re:{default:re}}function s(re){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},s(re)}function d(re,G){var H=Object.keys(re);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(re);G&&(B=B.filter(function($){return Object.getOwnPropertyDescriptor(re,$).enumerable})),H.push.apply(H,B)}return H}function v(re){for(var G=1;G<arguments.length;G++){var H=arguments[G]!=null?arguments[G]:{};G%2?d(Object(H),!0).forEach(function(B){S(re,B,H[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(re,Object.getOwnPropertyDescriptors(H)):d(Object(H)).forEach(function(B){Object.defineProperty(re,B,Object.getOwnPropertyDescriptor(H,B))})}return re}function S(re,G,H){return G=A(G),G in re?Object.defineProperty(re,G,{value:H,enumerable:!0,configurable:!0,writable:!0}):re[G]=H,re}function A(re){var G=P(re,"string");return s(G)==="symbol"?G:String(G)}function P(re,G){if(s(re)!=="object"||re===null)return re;var H=re[Symbol.toPrimitive];if(H!==void 0){var B=H.call(re,G||"default");if(s(B)!=="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(G==="string"?String:Number)(re)}var L=t.default.createContext(v({},n));e.AmsApiContext=L;var F=function(){return t.default.useContext(L)};e.useAmsApi=F;var K=function(G){var H=function($){return{user:$.user,slacker:$.slacker,groups:$.groups,users:$.users,requests:$.requests,messages:$.avlMessages,preferences:$.preferences}};return(0,r.connect)(H,v({},n))(G)};e.default=K}(EP)),EP}var eO={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe),r=Jc;function n(a){return a&&a.__esModule?a:{default:a}}function i(){return i=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&(a[v]=d[v])}return a},i.apply(this,arguments)}var l=function(s){return function(d){var v=(0,r.useLocation)();return t.default.createElement(s,i({},d,{location:v}))}};e.default=l})(eO);var DU={};(function(e){function t(z){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},t(z)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(Fe),n=["groups","project","users","children","getGroups","getUsers","getRequests"];function i(z){return z&&z.__esModule?z:{default:z}}function l(){return l=Object.assign?Object.assign.bind():function(z){for(var X=1;X<arguments.length;X++){var te=arguments[X];for(var pe in te)Object.prototype.hasOwnProperty.call(te,pe)&&(z[pe]=te[pe])}return z},l.apply(this,arguments)}function a(z,X){var te=Object.keys(z);if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(z);X&&(pe=pe.filter(function(ke){return Object.getOwnPropertyDescriptor(z,ke).enumerable})),te.push.apply(te,pe)}return te}function s(z){for(var X=1;X<arguments.length;X++){var te=arguments[X]!=null?arguments[X]:{};X%2?a(Object(te),!0).forEach(function(pe){d(z,pe,te[pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(te)):a(Object(te)).forEach(function(pe){Object.defineProperty(z,pe,Object.getOwnPropertyDescriptor(te,pe))})}return z}function d(z,X,te){return X=v(X),X in z?Object.defineProperty(z,X,{value:te,enumerable:!0,configurable:!0,writable:!0}):z[X]=te,z}function v(z){var X=S(z,"string");return t(X)==="symbol"?X:String(X)}function S(z,X){if(t(z)!=="object"||z===null)return z;var te=z[Symbol.toPrimitive];if(te!==void 0){var pe=te.call(z,X||"default");if(t(pe)!=="object")return pe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(X==="string"?String:Number)(z)}function A(z,X){return re(z)||K(z,X)||L(z,X)||P()}function P(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L(z,X){if(z){if(typeof z=="string")return F(z,X);var te=Object.prototype.toString.call(z).slice(8,-1);if(te==="Object"&&z.constructor&&(te=z.constructor.name),te==="Map"||te==="Set")return Array.from(z);if(te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te))return F(z,X)}}function F(z,X){(X==null||X>z.length)&&(X=z.length);for(var te=0,pe=new Array(X);te<X;te++)pe[te]=z[te];return pe}function K(z,X){var te=z==null?null:typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(te!=null){var pe,ke,Pe,ge,Ie=[],Ne=!0,lt=!1;try{if(Pe=(te=te.call(z)).next,X===0){if(Object(te)!==te)return;Ne=!1}else for(;!(Ne=(pe=Pe.call(te)).done)&&(Ie.push(pe.value),Ie.length!==X);Ne=!0);}catch(it){lt=!0,ke=it}finally{try{if(!Ne&&te.return!=null&&(ge=te.return(),Object(ge)!==ge))return}finally{if(lt)throw ke}}return Ie}}function re(z){if(Array.isArray(z))return z}function G(z,X){if(z==null)return{};var te=H(z,X),pe,ke;if(Object.getOwnPropertySymbols){var Pe=Object.getOwnPropertySymbols(z);for(ke=0;ke<Pe.length;ke++)pe=Pe[ke],!(X.indexOf(pe)>=0)&&Object.prototype.propertyIsEnumerable.call(z,pe)&&(te[pe]=z[pe])}return te}function H(z,X){if(z==null)return{};var te={},pe=Object.keys(z),ke,Pe;for(Pe=0;Pe<pe.length;Pe++)ke=pe[Pe],!(X.indexOf(ke)>=0)&&(te[ke]=z[ke]);return te}var B=function(X,te){return X.name.toLowerCase()<te.name.toLowerCase()?-1:X.name.toLowerCase()>te.name.toLowerCase()?1:0},$=function(X){return function(te){var pe=te.groups,ke=pe===void 0?[]:pe,Pe=te.project,ge=te.users,Ie=te.children,Ne=te.getGroups,lt=te.getUsers,it=te.getRequests,Rt=G(te,n);r.default.useEffect(function(){Ne(),lt(),it()},[Ne,lt,it]);var St=r.default.useMemo(function(){return ke.reduce(function(br,Bt){var hr=Bt.projects.reduce(function(cr,Mn){return Mn.project_name===Pe?+Mn.auth_level:cr},-1);return hr>-1?(Bt.authLevel=hr,br[0].push(Bt)):br[1].push(Bt),br},[[],[]])},[ke,Pe]),Zt=A(St,2),Kt=Zt[0],Ge=Zt[1];Kt.sort(B),Ge.sort(B);var Ye=r.default.useMemo(function(){return ge.reduce(function(br,Bt){return Bt.projects.reduce(function(hr,cr){return hr||cr.project_name===Pe},!1)?br[0].push(Bt):br[1].push(Bt),br},[[],[]])},[ge,Pe]),Dr=A(Ye,2),wr=Dr[0],tr=Dr[1];return r.default.createElement(X,l({},Rt,{project:Pe,getGroups:Ne,getUsers:lt,getRequests:it,users:wr,otherUsers:tr,groups:Kt,otherGroups:Ge}),r.default.Children.toArray(Ie).map(function(br){return r.default.cloneElement(br,s(s({},Rt),{},{project:Pe,getGroups:Ne,getUsers:lt,getRequests:it,users:wr,otherUsers:tr,groups:Kt,otherGroups:Ge}))}))}},N=$;e.default=N})(DU);var zU={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe),r=["children","getMessages"];function n(d){return d&&d.__esModule?d:{default:d}}function i(d,v){if(d==null)return{};var S=l(d,v),A,P;if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(d);for(P=0;P<L.length;P++)A=L[P],!(v.indexOf(A)>=0)&&Object.prototype.propertyIsEnumerable.call(d,A)&&(S[A]=d[A])}return S}function l(d,v){if(d==null)return{};var S={},A=Object.keys(d),P,L;for(L=0;L<A.length;L++)P=A[L],!(v.indexOf(P)>=0)&&(S[P]=d[P]);return S}var a=function(v){return function(S){var A=S.children,P=S.getMessages,L=i(S,r);return t.default.useEffect(function(){P()},[P]),t.default.createElement(v,L,t.default.Children.toArray(A).map(function(F){return t.default.cloneElement(F,L)}))}},s=a;e.default=s})(zU);var LU={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe),r=["getUserPreferences"];function n(d){return d&&d.__esModule?d:{default:d}}function i(d,v){if(d==null)return{};var S=l(d,v),A,P;if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(d);for(P=0;P<L.length;P++)A=L[P],!(v.indexOf(A)>=0)&&Object.prototype.propertyIsEnumerable.call(d,A)&&(S[A]=d[A])}return S}function l(d,v){if(d==null)return{};var S={},A=Object.keys(d),P,L;for(L=0;L<A.length;L++)P=A[L],!(v.indexOf(P)>=0)&&(S[P]=d[P]);return S}var a=function(v){return function(S){var A=S.getUserPreferences,P=i(S,r);return t.default.useEffect(function(){A()},[A]),t.default.createElement(v,P)}},s=a;e.default=s})(LU);var $U={},pie=jS;function die(){this.__data__=new pie,this.size=0}var mie=die;function gie(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var yie=gie;function vie(e){return this.__data__.get(e)}var _ie=vie;function bie(e){return this.__data__.has(e)}var xie=bie,wie=jS,Sie=dM,Eie=mM,Cie=200;function Pie(e,t){var r=this.__data__;if(r instanceof wie){var n=r.__data__;if(!Sie||n.length<Cie-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Eie(n)}return r.set(e,t),this.size=r.size,this}var Tie=Pie,Aie=jS,kie=mie,Iie=yie,Mie=_ie,Oie=xie,Rie=Tie;function I0(e){var t=this.__data__=new Aie(e);this.size=t.size}I0.prototype.clear=kie;I0.prototype.delete=Iie;I0.prototype.get=Mie;I0.prototype.has=Oie;I0.prototype.set=Rie;var bE=I0,Die="__lodash_hash_undefined__";function zie(e){return this.__data__.set(e,Die),this}var Lie=zie;function $ie(e){return this.__data__.has(e)}var Nie=$ie,Bie=mM,Fie=Lie,Uie=Nie;function F2(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Bie;++t<r;)this.add(e[t])}F2.prototype.add=F2.prototype.push=Fie;F2.prototype.has=Uie;var jie=F2;function Vie(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var qie=Vie;function Gie(e,t){return e.has(t)}var Hie=Gie,Wie=jie,Zie=qie,Xie=Hie,Kie=1,Yie=2;function Jie(e,t,r,n,i,l){var a=r&Kie,s=e.length,d=t.length;if(s!=d&&!(a&&d>s))return!1;var v=l.get(e),S=l.get(t);if(v&&S)return v==t&&S==e;var A=-1,P=!0,L=r&Yie?new Wie:void 0;for(l.set(e,t),l.set(t,e);++A<s;){var F=e[A],K=t[A];if(n)var re=a?n(K,F,A,t,e,l):n(F,K,A,e,t,l);if(re!==void 0){if(re)continue;P=!1;break}if(L){if(!Zie(t,function(G,H){if(!Xie(L,H)&&(F===G||i(F,G,r,n,l)))return L.push(H)})){P=!1;break}}else if(!(F===K||i(F,K,r,n,l))){P=!1;break}}return l.delete(e),l.delete(t),P}var NU=Jie,Qie=xp,eae=Qie.Uint8Array,BU=eae;function tae(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var rae=tae;function nae(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var iae=nae,LD=Xx,$D=BU,aae=Kx,oae=NU,sae=rae,lae=iae,uae=1,cae=2,fae="[object Boolean]",hae="[object Date]",pae="[object Error]",dae="[object Map]",mae="[object Number]",gae="[object RegExp]",yae="[object Set]",vae="[object String]",_ae="[object Symbol]",bae="[object ArrayBuffer]",xae="[object DataView]",ND=LD?LD.prototype:void 0,CP=ND?ND.valueOf:void 0;function wae(e,t,r,n,i,l,a){switch(r){case xae:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case bae:return!(e.byteLength!=t.byteLength||!l(new $D(e),new $D(t)));case fae:case hae:case mae:return aae(+e,+t);case pae:return e.name==t.name&&e.message==t.message;case gae:case vae:return e==t+"";case dae:var s=sae;case yae:var d=n&uae;if(s||(s=lae),e.size!=t.size&&!d)return!1;var v=a.get(e);if(v)return v==t;n|=cae,a.set(e,t);var S=oae(s(e),s(t),n,i,l,a);return a.delete(e),S;case _ae:if(CP)return CP.call(e)==CP.call(t)}return!1}var Sae=wae;function Eae(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var FU=Eae,Cae=FU,Pae=Bf;function Tae(e,t,r){var n=t(e);return Pae(e)?n:Cae(n,r(e))}var UU=Tae;function Aae(e,t){for(var r=-1,n=e==null?0:e.length,i=0,l=[];++r<n;){var a=e[r];t(a,r,e)&&(l[i++]=a)}return l}var kae=Aae;function Iae(){return[]}var jU=Iae,Mae=kae,Oae=jU,Rae=Object.prototype,Dae=Rae.propertyIsEnumerable,BD=Object.getOwnPropertySymbols,zae=BD?function(e){return e==null?[]:(e=Object(e),Mae(BD(e),function(t){return Dae.call(e,t)}))}:Oae,tO=zae;function Lae(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var $ae=Lae,Nae=Hy,Bae=ud,Fae="[object Arguments]";function Uae(e){return Bae(e)&&Nae(e)==Fae}var jae=Uae,FD=jae,Vae=ud,VU=Object.prototype,qae=VU.hasOwnProperty,Gae=VU.propertyIsEnumerable,Hae=FD(function(){return arguments}())?FD:function(e){return Vae(e)&&qae.call(e,"callee")&&!Gae.call(e,"callee")},rO=Hae,U2={exports:{}};function Wae(){return!1}var Zae=Wae;U2.exports;(function(e,t){var r=xp,n=Zae,i=t&&!t.nodeType&&t,l=i&&!0&&e&&!e.nodeType&&e,a=l&&l.exports===i,s=a?r.Buffer:void 0,d=s?s.isBuffer:void 0,v=d||n;e.exports=v})(U2,U2.exports);var xE=U2.exports,Xae=9007199254740991,Kae=/^(?:0|[1-9]\d*)$/;function Yae(e,t){var r=typeof e;return t=t??Xae,!!t&&(r=="number"||r!="symbol"&&Kae.test(e))&&e>-1&&e%1==0&&e<t}var nO=Yae,Jae=9007199254740991;function Qae(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Jae}var iO=Qae,eoe=Hy,toe=iO,roe=ud,noe="[object Arguments]",ioe="[object Array]",aoe="[object Boolean]",ooe="[object Date]",soe="[object Error]",loe="[object Function]",uoe="[object Map]",coe="[object Number]",foe="[object Object]",hoe="[object RegExp]",poe="[object Set]",doe="[object String]",moe="[object WeakMap]",goe="[object ArrayBuffer]",yoe="[object DataView]",voe="[object Float32Array]",_oe="[object Float64Array]",boe="[object Int8Array]",xoe="[object Int16Array]",woe="[object Int32Array]",Soe="[object Uint8Array]",Eoe="[object Uint8ClampedArray]",Coe="[object Uint16Array]",Poe="[object Uint32Array]",ls={};ls[voe]=ls[_oe]=ls[boe]=ls[xoe]=ls[woe]=ls[Soe]=ls[Eoe]=ls[Coe]=ls[Poe]=!0;ls[noe]=ls[ioe]=ls[goe]=ls[aoe]=ls[yoe]=ls[ooe]=ls[soe]=ls[loe]=ls[uoe]=ls[coe]=ls[foe]=ls[hoe]=ls[poe]=ls[doe]=ls[moe]=!1;function Toe(e){return roe(e)&&toe(e.length)&&!!ls[eoe(e)]}var Aoe=Toe;function koe(e){return function(t){return e(t)}}var aO=koe,j2={exports:{}};j2.exports;(function(e,t){var r=HF,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===n,a=l&&r.process,s=function(){try{var d=i&&i.require&&i.require("util").types;return d||a&&a.binding&&a.binding("util")}catch{}}();e.exports=s})(j2,j2.exports);var oO=j2.exports,Ioe=Aoe,Moe=aO,UD=oO,jD=UD&&UD.isTypedArray,Ooe=jD?Moe(jD):Ioe,sO=Ooe,Roe=$ae,Doe=rO,zoe=Bf,Loe=xE,$oe=nO,Noe=sO,Boe=Object.prototype,Foe=Boe.hasOwnProperty;function Uoe(e,t){var r=zoe(e),n=!r&&Doe(e),i=!r&&!n&&Loe(e),l=!r&&!n&&!i&&Noe(e),a=r||n||i||l,s=a?Roe(e.length,String):[],d=s.length;for(var v in e)(t||Foe.call(e,v))&&!(a&&(v=="length"||i&&(v=="offset"||v=="parent")||l&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||$oe(v,d)))&&s.push(v);return s}var qU=Uoe,joe=Object.prototype;function Voe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||joe;return e===r}var lO=Voe;function qoe(e,t){return function(r){return e(t(r))}}var GU=qoe,Goe=GU,Hoe=Goe(Object.keys,Object),Woe=Hoe,Zoe=lO,Xoe=Woe,Koe=Object.prototype,Yoe=Koe.hasOwnProperty;function Joe(e){if(!Zoe(e))return Xoe(e);var t=[];for(var r in Object(e))Yoe.call(e,r)&&r!="constructor"&&t.push(r);return t}var Qoe=Joe,ese=pM,tse=iO;function rse(e){return e!=null&&tse(e.length)&&!ese(e)}var M0=rse,nse=qU,ise=Qoe,ase=M0;function ose(e){return ase(e)?nse(e):ise(e)}var e1=ose,sse=UU,lse=tO,use=e1;function cse(e){return sse(e,use,lse)}var HU=cse,VD=HU,fse=1,hse=Object.prototype,pse=hse.hasOwnProperty;function dse(e,t,r,n,i,l){var a=r&fse,s=VD(e),d=s.length,v=VD(t),S=v.length;if(d!=S&&!a)return!1;for(var A=d;A--;){var P=s[A];if(!(a?P in t:pse.call(t,P)))return!1}var L=l.get(e),F=l.get(t);if(L&&F)return L==t&&F==e;var K=!0;l.set(e,t),l.set(t,e);for(var re=a;++A<d;){P=s[A];var G=e[P],H=t[P];if(n)var B=a?n(H,G,P,t,e,l):n(G,H,P,e,t,l);if(!(B===void 0?G===H||i(G,H,r,n,l):B)){K=!1;break}re||(re=P=="constructor")}if(K&&!re){var $=e.constructor,N=t.constructor;$!=N&&"constructor"in e&&"constructor"in t&&!(typeof $=="function"&&$ instanceof $&&typeof N=="function"&&N instanceof N)&&(K=!1)}return l.delete(e),l.delete(t),K}var mse=dse,gse=Wy,yse=xp,vse=gse(yse,"DataView"),_se=vse,bse=Wy,xse=xp,wse=bse(xse,"Promise"),Sse=wse,Ese=Wy,Cse=xp,Pse=Ese(Cse,"Set"),Tse=Pse,Ase=Wy,kse=xp,Ise=Ase(kse,"WeakMap"),Mse=Ise,sk=_se,lk=dM,uk=Sse,ck=Tse,fk=Mse,WU=Hy,O0=ZF,qD="[object Map]",Ose="[object Object]",GD="[object Promise]",HD="[object Set]",WD="[object WeakMap]",ZD="[object DataView]",Rse=O0(sk),Dse=O0(lk),zse=O0(uk),Lse=O0(ck),$se=O0(fk),cy=WU;(sk&&cy(new sk(new ArrayBuffer(1)))!=ZD||lk&&cy(new lk)!=qD||uk&&cy(uk.resolve())!=GD||ck&&cy(new ck)!=HD||fk&&cy(new fk)!=WD)&&(cy=function(e){var t=WU(e),r=t==Ose?e.constructor:void 0,n=r?O0(r):"";if(n)switch(n){case Rse:return ZD;case Dse:return qD;case zse:return GD;case Lse:return HD;case $se:return WD}return t});var wE=cy,PP=bE,Nse=NU,Bse=Sae,Fse=mse,XD=wE,KD=Bf,YD=xE,Use=sO,jse=1,JD="[object Arguments]",QD="[object Array]",dw="[object Object]",Vse=Object.prototype,e4=Vse.hasOwnProperty;function qse(e,t,r,n,i,l){var a=KD(e),s=KD(t),d=a?QD:XD(e),v=s?QD:XD(t);d=d==JD?dw:d,v=v==JD?dw:v;var S=d==dw,A=v==dw,P=d==v;if(P&&YD(e)){if(!YD(t))return!1;a=!0,S=!1}if(P&&!S)return l||(l=new PP),a||Use(e)?Nse(e,t,r,n,i,l):Bse(e,t,d,r,n,i,l);if(!(r&jse)){var L=S&&e4.call(e,"__wrapped__"),F=A&&e4.call(t,"__wrapped__");if(L||F){var K=L?e.value():e,re=F?t.value():t;return l||(l=new PP),i(K,re,r,n,l)}}return P?(l||(l=new PP),Fse(e,t,r,n,i,l)):!1}var Gse=qse,Hse=Gse,t4=ud;function ZU(e,t,r,n,i){return e===t?!0:e==null||t==null||!t4(e)&&!t4(t)?e!==e&&t!==t:Hse(e,t,r,n,ZU,i)}var uO=ZU,Wse=uO;function Zse(e,t){return Wse(e,t)}var cO=Zse;const rm=Xs(cO);(function(e){function t(z){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},t(z)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=l(Fe),n=l(cO),i=["slacker","preferences","getSlackUserFromEmail","getUserPreferences","updateUserPreferences"];function l(z){return z&&z.__esModule?z:{default:z}}function a(){return a=Object.assign?Object.assign.bind():function(z){for(var X=1;X<arguments.length;X++){var te=arguments[X];for(var pe in te)Object.prototype.hasOwnProperty.call(te,pe)&&(z[pe]=te[pe])}return z},a.apply(this,arguments)}function s(z,X){var te=Object.keys(z);if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(z);X&&(pe=pe.filter(function(ke){return Object.getOwnPropertyDescriptor(z,ke).enumerable})),te.push.apply(te,pe)}return te}function d(z){for(var X=1;X<arguments.length;X++){var te=arguments[X]!=null?arguments[X]:{};X%2?s(Object(te),!0).forEach(function(pe){v(z,pe,te[pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(te)):s(Object(te)).forEach(function(pe){Object.defineProperty(z,pe,Object.getOwnPropertyDescriptor(te,pe))})}return z}function v(z,X,te){return X=S(X),X in z?Object.defineProperty(z,X,{value:te,enumerable:!0,configurable:!0,writable:!0}):z[X]=te,z}function S(z){var X=A(z,"string");return t(X)==="symbol"?X:String(X)}function A(z,X){if(t(z)!=="object"||z===null)return z;var te=z[Symbol.toPrimitive];if(te!==void 0){var pe=te.call(z,X||"default");if(t(pe)!=="object")return pe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(X==="string"?String:Number)(z)}function P(z,X){return G(z)||re(z,X)||F(z,X)||L()}function L(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F(z,X){if(z){if(typeof z=="string")return K(z,X);var te=Object.prototype.toString.call(z).slice(8,-1);if(te==="Object"&&z.constructor&&(te=z.constructor.name),te==="Map"||te==="Set")return Array.from(z);if(te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te))return K(z,X)}}function K(z,X){(X==null||X>z.length)&&(X=z.length);for(var te=0,pe=new Array(X);te<X;te++)pe[te]=z[te];return pe}function re(z,X){var te=z==null?null:typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(te!=null){var pe,ke,Pe,ge,Ie=[],Ne=!0,lt=!1;try{if(Pe=(te=te.call(z)).next,X===0){if(Object(te)!==te)return;Ne=!1}else for(;!(Ne=(pe=Pe.call(te)).done)&&(Ie.push(pe.value),Ie.length!==X);Ne=!0);}catch(it){lt=!0,ke=it}finally{try{if(!Ne&&te.return!=null&&(ge=te.return(),Object(ge)!==ge))return}finally{if(lt)throw ke}}return Ie}}function G(z){if(Array.isArray(z))return z}function H(z,X){if(z==null)return{};var te=B(z,X),pe,ke;if(Object.getOwnPropertySymbols){var Pe=Object.getOwnPropertySymbols(z);for(ke=0;ke<Pe.length;ke++)pe=Pe[ke],!(X.indexOf(pe)>=0)&&Object.prototype.propertyIsEnumerable.call(z,pe)&&(te[pe]=z[pe])}return te}function B(z,X){if(z==null)return{};var te={},pe=Object.keys(z),ke,Pe;for(Pe=0;Pe<pe.length;Pe++)ke=pe[Pe],!(X.indexOf(ke)>=0)&&(te[ke]=z[ke]);return te}var $=function(X){return function(te){var pe=te.slacker,ke=te.preferences,Pe=te.getSlackUserFromEmail,ge=te.getUserPreferences,Ie=te.updateUserPreferences,Ne=H(te,i);r.default.useEffect(function(){ge()},[ge]);var lt=r.default.useState(ke),it=P(lt,2),Rt=it[0],St=it[1],Zt=r.default.useState(null),Kt=P(Zt,2),Ge=Kt[0],Ye=Kt[1],Dr=r.default.useState(!1),wr=P(Dr,2),tr=wr[0],br=wr[1];r.default.useEffect(function(){St(ke)},[ke]),r.default.useEffect(function(){St(function(Hn){return d(d({},Hn),{},{slackUserId:pe.id})})},[pe]);var Bt=r.default.useCallback(function(Hn){St(d(d({},ke),{},{receiveSlack:Hn}))},[St,ke]),hr=r.default.useCallback(function(Hn){Hn.preventDefault(),Ge&&(br(!0),Pe(Ge).then(function(){return br(!1)}))},[Pe,Ge]),cr=r.default.useMemo(function(){return Rt.receiveSlack&&!Rt.slackUserId?!0:(0,n.default)(ke,Rt)},[ke,Rt]),Mn=r.default.useCallback(function(Hn){Ie(Rt)},[Ie,Rt]);return r.default.createElement(X,a({},Ne,{loading:tr,preferences:ke,newPreferences:Rt,setNewPreferences:Bt,slackEmail:Ge,setSlackEmail:Ye,getSlackUserFromEmail:hr,updateDisabled:cr,updateSlackPreferences:Mn}))}},N=$;e.default=N})($U);var XU={};(function(e){function t(z){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},t(z)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=l(Fe),n=l(cO),i=["preferences","getUserPreferences","updateUserPreferences"];function l(z){return z&&z.__esModule?z:{default:z}}function a(){return a=Object.assign?Object.assign.bind():function(z){for(var X=1;X<arguments.length;X++){var te=arguments[X];for(var pe in te)Object.prototype.hasOwnProperty.call(te,pe)&&(z[pe]=te[pe])}return z},a.apply(this,arguments)}function s(z,X){var te=Object.keys(z);if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(z);X&&(pe=pe.filter(function(ke){return Object.getOwnPropertyDescriptor(z,ke).enumerable})),te.push.apply(te,pe)}return te}function d(z){for(var X=1;X<arguments.length;X++){var te=arguments[X]!=null?arguments[X]:{};X%2?s(Object(te),!0).forEach(function(pe){v(z,pe,te[pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(te)):s(Object(te)).forEach(function(pe){Object.defineProperty(z,pe,Object.getOwnPropertyDescriptor(te,pe))})}return z}function v(z,X,te){return X=S(X),X in z?Object.defineProperty(z,X,{value:te,enumerable:!0,configurable:!0,writable:!0}):z[X]=te,z}function S(z){var X=A(z,"string");return t(X)==="symbol"?X:String(X)}function A(z,X){if(t(z)!=="object"||z===null)return z;var te=z[Symbol.toPrimitive];if(te!==void 0){var pe=te.call(z,X||"default");if(t(pe)!=="object")return pe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(X==="string"?String:Number)(z)}function P(z,X){return G(z)||re(z,X)||F(z,X)||L()}function L(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F(z,X){if(z){if(typeof z=="string")return K(z,X);var te=Object.prototype.toString.call(z).slice(8,-1);if(te==="Object"&&z.constructor&&(te=z.constructor.name),te==="Map"||te==="Set")return Array.from(z);if(te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te))return K(z,X)}}function K(z,X){(X==null||X>z.length)&&(X=z.length);for(var te=0,pe=new Array(X);te<X;te++)pe[te]=z[te];return pe}function re(z,X){var te=z==null?null:typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(te!=null){var pe,ke,Pe,ge,Ie=[],Ne=!0,lt=!1;try{if(Pe=(te=te.call(z)).next,X===0){if(Object(te)!==te)return;Ne=!1}else for(;!(Ne=(pe=Pe.call(te)).done)&&(Ie.push(pe.value),Ie.length!==X);Ne=!0);}catch(it){lt=!0,ke=it}finally{try{if(!Ne&&te.return!=null&&(ge=te.return(),Object(ge)!==ge))return}finally{if(lt)throw ke}}return Ie}}function G(z){if(Array.isArray(z))return z}function H(z,X){if(z==null)return{};var te=B(z,X),pe,ke;if(Object.getOwnPropertySymbols){var Pe=Object.getOwnPropertySymbols(z);for(ke=0;ke<Pe.length;ke++)pe=Pe[ke],!(X.indexOf(pe)>=0)&&Object.prototype.propertyIsEnumerable.call(z,pe)&&(te[pe]=z[pe])}return te}function B(z,X){if(z==null)return{};var te={},pe=Object.keys(z),ke,Pe;for(Pe=0;Pe<pe.length;Pe++)ke=pe[Pe],!(X.indexOf(ke)>=0)&&(te[ke]=z[ke]);return te}var $=function(X){return function(te){var pe=te.preferences,ke=te.getUserPreferences,Pe=te.updateUserPreferences,ge=H(te,i);r.default.useEffect(function(){ke()},[ke]);var Ie=r.default.useState(pe),Ne=P(Ie,2),lt=Ne[0],it=Ne[1];r.default.useEffect(function(){it(pe)},[pe]);var Rt=r.default.useCallback(function(Kt){it(d(d({},pe),{},{receiveEmail:Kt}))},[it,pe]),St=r.default.useMemo(function(){return(0,n.default)(pe,lt)},[pe,lt]),Zt=r.default.useCallback(function(Kt){Pe(lt)},[Pe,lt]);return r.default.createElement(X,a({},ge,{newPreferences:lt,setNewPreferences:Rt,updateDisabled:St,updateEmailPreferences:Zt}))}},N=$;e.default=N})(XU);var KU={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe),r=["messages","viewMessages","deleteMessages"];function n(B){return B&&B.__esModule?B:{default:B}}function i(){return i=Object.assign?Object.assign.bind():function(B){for(var $=1;$<arguments.length;$++){var N=arguments[$];for(var z in N)Object.prototype.hasOwnProperty.call(N,z)&&(B[z]=N[z])}return B},i.apply(this,arguments)}function l(B){return d(B)||s(B)||A(B)||a()}function a(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s(B){if(typeof Symbol<"u"&&B[Symbol.iterator]!=null||B["@@iterator"]!=null)return Array.from(B)}function d(B){if(Array.isArray(B))return P(B)}function v(B,$){return F(B)||L(B,$)||A(B,$)||S()}function S(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(B,$){if(B){if(typeof B=="string")return P(B,$);var N=Object.prototype.toString.call(B).slice(8,-1);if(N==="Object"&&B.constructor&&(N=B.constructor.name),N==="Map"||N==="Set")return Array.from(B);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return P(B,$)}}function P(B,$){($==null||$>B.length)&&($=B.length);for(var N=0,z=new Array($);N<$;N++)z[N]=B[N];return z}function L(B,$){var N=B==null?null:typeof Symbol<"u"&&B[Symbol.iterator]||B["@@iterator"];if(N!=null){var z,X,te,pe,ke=[],Pe=!0,ge=!1;try{if(te=(N=N.call(B)).next,$===0){if(Object(N)!==N)return;Pe=!1}else for(;!(Pe=(z=te.call(N)).done)&&(ke.push(z.value),ke.length!==$);Pe=!0);}catch(Ie){ge=!0,X=Ie}finally{try{if(!Pe&&N.return!=null&&(pe=N.return(),Object(pe)!==pe))return}finally{if(ge)throw X}}return ke}}function F(B){if(Array.isArray(B))return B}function K(B,$){if(B==null)return{};var N=re(B,$),z,X;if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(B);for(X=0;X<te.length;X++)z=te[X],!($.indexOf(z)>=0)&&Object.prototype.propertyIsEnumerable.call(B,z)&&(N[z]=B[z])}return N}function re(B,$){if(B==null)return{};var N={},z=Object.keys(B),X,te;for(te=0;te<z.length;te++)X=z[te],!($.indexOf(X)>=0)&&(N[X]=B[X]);return N}var G=function($){return function(N){var z=N.messages,X=N.viewMessages,te=N.deleteMessages,pe=K(N,r),ke=t.default.useMemo(function(){return z.reduce(function(Ye,Dr){return Dr.deleted?Ye[1].push(Dr):Ye[0].push(Dr),Ye},[[],[]])},[z]),Pe=v(ke,2),ge=Pe[0],Ie=Pe[1],Ne=t.default.useState([]),lt=v(Ne,2),it=lt[0],Rt=lt[1],St=t.default.useCallback(function(Ye){Rt(function(Dr){return Dr.includes(Ye)?Dr.filter(function(wr){return wr!==Ye}):[].concat(l(Dr),[Ye])})},[]),Zt=t.default.useCallback(function(){Rt(function(Ye){return Ye.length?[]:z.map(function(Dr){return Dr.id})})},[z]),Kt=t.default.useCallback(function(){X(it)},[X,it]),Ge=t.default.useCallback(function(){Rt([]),te(it)},[te,it]);return t.default.createElement($,i({},pe,{toggleSelected:St,viewMessages:X,viewSelected:Kt,deleteMessages:te,deleteSelected:Ge,toggleAll:Zt,selected:it,messages:ge,deleted:Ie}))}},H=G;e.default=H})(KU);var TP={},r4;function Xse(){return r4||(r4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe),r=QM();function n(a){return a&&a.__esModule?a:{default:a}}function i(){return i=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&(a[v]=d[v])}return a},i.apply(this,arguments)}var l=function(s){return function(d){return t.default.createElement(s,i({},d,(0,r.useAmsApi)()))}};e.default=l}(TP)),TP}var YU={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe),r=k0;function n(a){return a&&a.__esModule?a:{default:a}}var i=function(s){var d=function(A){return t.default.createElement(s,A)},v=function(A){return{slacker:A.slacker}};return(0,r.connect)(v)(d)},l=i;e.default=l})(YU);var JU={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Fe),r=k0;function n(a){return a&&a.__esModule?a:{default:a}}var i=function(s){var d=function(A){return t.default.createElement(s,A)},v=function(A){return{preferences:A.preferences}};return(0,r.connect)(v)(d)},l=i;e.default=l})(JU);var Gd={},AP={},n4;function QU(){return n4||(n4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultUserState=e.default=void 0;var t=Ky();function r(S){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},r(S)}function n(S,A){var P=Object.keys(S);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(S);A&&(L=L.filter(function(F){return Object.getOwnPropertyDescriptor(S,F).enumerable})),P.push.apply(P,L)}return P}function i(S){for(var A=1;A<arguments.length;A++){var P=arguments[A]!=null?arguments[A]:{};A%2?n(Object(P),!0).forEach(function(L){l(S,L,P[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(P)):n(Object(P)).forEach(function(L){Object.defineProperty(S,L,Object.getOwnPropertyDescriptor(P,L))})}return S}function l(S,A,P){return A=a(A),A in S?Object.defineProperty(S,A,{value:P,enumerable:!0,configurable:!0,writable:!0}):S[A]=P,S}function a(S){var A=s(S,"string");return r(A)==="symbol"?A:String(A)}function s(S,A){if(r(S)!=="object"||S===null)return S;var P=S[Symbol.toPrimitive];if(P!==void 0){var L=P.call(S,A||"default");if(r(L)!=="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(S)}var d=function(){return{token:null,groups:[],authLevel:-1,authed:!1,attempts:0,meta:[],id:null,isAuthenticating:!1,email:null}};e.defaultUserState=d;var v=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d(),P=arguments.length>1?arguments[1]:void 0;switch(P.type){case t.IS_AUTHENTICATING:return i(i({},A),{},{isAuthenticating:!0});case t.UPDATE_USER:return i(i({},A),P.update);case t.USER_LOGIN:{(0,t.setUserToken)(P.user);var L=i(i(i({},A),P.user),{},{authed:!0,isAuthenticating:!1});return++L.attempts,L}case t.AUTH_FAILURE:{(0,t.removeUserToken)();var F=d();return++F.attempts,F}case t.USER_LOGOUT:return(0,t.removeUserToken)(),d();default:return A}};e.default=v}(AP)),AP}var i4;function Kse(){if(i4)return Gd;i4=1,Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.withAuth=Gd.useAuth=Gd.enableAuth=void 0;var e=s(Fe),t=k0,r=Ky(),n=bc,i=s(Zy),l=QU(),a=["authFunc"];function s(K){return K&&K.__esModule?K:{default:K}}function d(){return d=Object.assign?Object.assign.bind():function(K){for(var re=1;re<arguments.length;re++){var G=arguments[re];for(var H in G)Object.prototype.hasOwnProperty.call(G,H)&&(K[H]=G[H])}return K},d.apply(this,arguments)}function v(K,re){if(K==null)return{};var G=S(K,re),H,B;if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(K);for(B=0;B<$.length;B++)H=$[B],!(re.indexOf(H)>=0)&&Object.prototype.propertyIsEnumerable.call(K,H)&&(G[H]=K[H])}return G}function S(K,re){if(K==null)return{};var G={},H=Object.keys(K),B,$;for($=0;$<H.length;$++)B=H[$],!(re.indexOf(B)>=0)&&(G[B]=K[B]);return G}var A=e.default.createContext((0,l.defaultUserState)()),P=function(){return e.default.useContext(A)};Gd.useAuth=P;var L=function(re){var G=function(B,$){return{user:B.user}};return(0,t.connect)(G,null)(re)};Gd.withAuth=L;var F=function(re,G){(0,n.Config)(G);var H=function(N){var z=N.authFunc,X=v(N,a);return e.default.useEffect(function(){z()},[z]),e.default.createElement(A.Provider,{value:X.user},e.default.createElement(re,d({},X,{isAuthenticating:(0,i.default)(X,["user","isAuthenticating"],!1)})))},B=function(N){return{user:N.user}};return(0,t.connect)(B,{authFunc:r.auth})(H)};return Gd.enableAuth=F,Gd}var a4;function ej(){return a4||(a4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,Object.defineProperty(e,"enableAuth",{enumerable:!0,get:function(){return Pe.enableAuth}}),Object.defineProperty(e,"postMessageWrapper",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(e,"useAuth",{enumerable:!0,get:function(){return Pe.useAuth}}),Object.defineProperty(e,"withAuth",{enumerable:!0,get:function(){return Pe.withAuth}});var t=ge(QM()),r=ge(eO),n=ge(fM),i=ge(yM),l=ge(bM),a=ge(DU),s=ge(xM),d=ge(wM),v=ge(zU),S=ge(EM),A=ge(SM),P=ge(CM),L=ge(PM),F=ge(TM),K=ge(AM),re=ge(kM),G=ge(MM),H=ge(OM),B=ge(LU),$=ge($U),N=ge(XU),z=ge(KU),X=ge(IU()),te=ge(Xse()),pe=ge(YU),ke=ge(JU),Pe=Kse();function ge(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}}var Ie={"ams-redux":t.default,"ams-router":r.default,"ams-login":n.default,"ams-logout":i.default,"ams-signup":l.default,"ams-project-management":a.default,"ams-reset-password":s.default,"ams-verify-request":d.default,"ams-profile":v.default,"ams-set-password":S.default,"ams-verify-email":A.default,"ams-accept-invite":P.default,"ams-directory":L.default,"ams-update-password":F.default,"ams-requests":K.default,"ams-send-invite":re.default,"ams-assign-to-project":G.default,"ams-create-group":H.default,"ams-user-preferences":B.default,"ams-slack-preferences":$.default,"ams-messages":z.default,"ams-post-message":X.default,"ams-email-preferences":N.default,"with-ams-api":te.default,"with-preferences":ke.default,"with-slacker":pe.default};e.default=Ie}(SP)),SP}function Yse(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var tj=Yse,Jse=Wy,Qse=function(){try{var e=Jse(Object,"defineProperty");return e({},"",{}),e}catch{}}(),rj=Qse,o4=rj;function ele(e,t,r){t=="__proto__"&&o4?o4(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var SE=ele,tle=SE,rle=Kx,nle=Object.prototype,ile=nle.hasOwnProperty;function ale(e,t,r){var n=e[t];(!(ile.call(e,t)&&rle(n,r))||r===void 0&&!(t in e))&&tle(e,t,r)}var nj=ale,ole=nj,sle=SE;function lle(e,t,r,n){var i=!r;r||(r={});for(var l=-1,a=t.length;++l<a;){var s=t[l],d=n?n(r[s],e[s],s,r,e):void 0;d===void 0&&(d=e[s]),i?sle(r,s,d):ole(r,s,d)}return r}var t1=lle,ule=t1,cle=e1;function fle(e,t){return e&&ule(t,cle(t),e)}var hle=fle;function ple(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var dle=ple,mle=kh,gle=lO,yle=dle,vle=Object.prototype,_le=vle.hasOwnProperty;function ble(e){if(!mle(e))return yle(e);var t=gle(e),r=[];for(var n in e)n=="constructor"&&(t||!_le.call(e,n))||r.push(n);return r}var xle=ble,wle=qU,Sle=xle,Ele=M0;function Cle(e){return Ele(e)?wle(e,!0):Sle(e)}var r1=Cle,Ple=t1,Tle=r1;function Ale(e,t){return e&&Ple(t,Tle(t),e)}var kle=Ale,V2={exports:{}};V2.exports;(function(e,t){var r=xp,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===n,a=l?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;function d(v,S){if(S)return v.slice();var A=v.length,P=s?s(A):new v.constructor(A);return v.copy(P),P}e.exports=d})(V2,V2.exports);var ij=V2.exports;function Ile(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var aj=Ile,Mle=t1,Ole=tO;function Rle(e,t){return Mle(e,Ole(e),t)}var Dle=Rle,zle=GU,Lle=zle(Object.getPrototypeOf,Object),fO=Lle,$le=FU,Nle=fO,Ble=tO,Fle=jU,Ule=Object.getOwnPropertySymbols,jle=Ule?function(e){for(var t=[];e;)$le(t,Ble(e)),e=Nle(e);return t}:Fle,oj=jle,Vle=t1,qle=oj;function Gle(e,t){return Vle(e,qle(e),t)}var Hle=Gle,Wle=UU,Zle=oj,Xle=r1;function Kle(e){return Wle(e,Xle,Zle)}var Yle=Kle,Jle=Object.prototype,Qle=Jle.hasOwnProperty;function eue(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Qle.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var tue=eue,s4=BU;function rue(e){var t=new e.constructor(e.byteLength);return new s4(t).set(new s4(e)),t}var hO=rue,nue=hO;function iue(e,t){var r=t?nue(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var aue=iue,oue=/\w*$/;function sue(e){var t=new e.constructor(e.source,oue.exec(e));return t.lastIndex=e.lastIndex,t}var lue=sue,l4=Xx,u4=l4?l4.prototype:void 0,c4=u4?u4.valueOf:void 0;function uue(e){return c4?Object(c4.call(e)):{}}var cue=uue,fue=hO;function hue(e,t){var r=t?fue(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var sj=hue,pue=hO,due=aue,mue=lue,gue=cue,yue=sj,vue="[object Boolean]",_ue="[object Date]",bue="[object Map]",xue="[object Number]",wue="[object RegExp]",Sue="[object Set]",Eue="[object String]",Cue="[object Symbol]",Pue="[object ArrayBuffer]",Tue="[object DataView]",Aue="[object Float32Array]",kue="[object Float64Array]",Iue="[object Int8Array]",Mue="[object Int16Array]",Oue="[object Int32Array]",Rue="[object Uint8Array]",Due="[object Uint8ClampedArray]",zue="[object Uint16Array]",Lue="[object Uint32Array]";function $ue(e,t,r){var n=e.constructor;switch(t){case Pue:return pue(e);case vue:case _ue:return new n(+e);case Tue:return due(e,r);case Aue:case kue:case Iue:case Mue:case Oue:case Rue:case Due:case zue:case Lue:return yue(e,r);case bue:return new n;case xue:case Eue:return new n(e);case wue:return mue(e);case Sue:return new n;case Cue:return gue(e)}}var Nue=$ue,Bue=kh,f4=Object.create,Fue=function(){function e(){}return function(t){if(!Bue(t))return{};if(f4)return f4(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Uue=Fue,jue=Uue,Vue=fO,que=lO;function Gue(e){return typeof e.constructor=="function"&&!que(e)?jue(Vue(e)):{}}var lj=Gue,Hue=wE,Wue=ud,Zue="[object Map]";function Xue(e){return Wue(e)&&Hue(e)==Zue}var Kue=Xue,Yue=Kue,Jue=aO,h4=oO,p4=h4&&h4.isMap,Que=p4?Jue(p4):Yue,ece=Que,tce=wE,rce=ud,nce="[object Set]";function ice(e){return rce(e)&&tce(e)==nce}var ace=ice,oce=ace,sce=aO,d4=oO,m4=d4&&d4.isSet,lce=m4?sce(m4):oce,uce=lce,cce=bE,fce=tj,hce=nj,pce=hle,dce=kle,mce=ij,gce=aj,yce=Dle,vce=Hle,_ce=HU,bce=Yle,xce=wE,wce=tue,Sce=Nue,Ece=lj,Cce=Bf,Pce=xE,Tce=ece,Ace=kh,kce=uce,Ice=e1,Mce=r1,Oce=1,Rce=2,Dce=4,uj="[object Arguments]",zce="[object Array]",Lce="[object Boolean]",$ce="[object Date]",Nce="[object Error]",cj="[object Function]",Bce="[object GeneratorFunction]",Fce="[object Map]",Uce="[object Number]",fj="[object Object]",jce="[object RegExp]",Vce="[object Set]",qce="[object String]",Gce="[object Symbol]",Hce="[object WeakMap]",Wce="[object ArrayBuffer]",Zce="[object DataView]",Xce="[object Float32Array]",Kce="[object Float64Array]",Yce="[object Int8Array]",Jce="[object Int16Array]",Qce="[object Int32Array]",efe="[object Uint8Array]",tfe="[object Uint8ClampedArray]",rfe="[object Uint16Array]",nfe="[object Uint32Array]",Qo={};Qo[uj]=Qo[zce]=Qo[Wce]=Qo[Zce]=Qo[Lce]=Qo[$ce]=Qo[Xce]=Qo[Kce]=Qo[Yce]=Qo[Jce]=Qo[Qce]=Qo[Fce]=Qo[Uce]=Qo[fj]=Qo[jce]=Qo[Vce]=Qo[qce]=Qo[Gce]=Qo[efe]=Qo[tfe]=Qo[rfe]=Qo[nfe]=!0;Qo[Nce]=Qo[cj]=Qo[Hce]=!1;function Zw(e,t,r,n,i,l){var a,s=t&Oce,d=t&Rce,v=t&Dce;if(r&&(a=i?r(e,n,i,l):r(e)),a!==void 0)return a;if(!Ace(e))return e;var S=Cce(e);if(S){if(a=wce(e),!s)return gce(e,a)}else{var A=xce(e),P=A==cj||A==Bce;if(Pce(e))return mce(e,s);if(A==fj||A==uj||P&&!i){if(a=d||P?{}:Ece(e),!s)return d?vce(e,dce(a,e)):yce(e,pce(a,e))}else{if(!Qo[A])return i?e:{};a=Sce(e,A,s)}}l||(l=new cce);var L=l.get(e);if(L)return L;l.set(e,a),kce(e)?e.forEach(function(re){a.add(Zw(re,t,r,re,e,l))}):Tce(e)&&e.forEach(function(re,G){a.set(G,Zw(re,t,r,G,e,l))});var F=v?d?bce:_ce:d?Mce:Ice,K=S?void 0:F(e);return fce(K||e,function(re,G){K&&(G=re,re=e[G]),hce(a,G,Zw(re,t,r,G,e,l))}),a}var ife=Zw,afe=ife,ofe=1,sfe=4;function lfe(e){return afe(e,ofe|sfe)}var pO=lfe;const Ox=Xs(pO);var g4;function ufe(){if(g4)return Jv;g4=1,Object.defineProperty(Jv,"__esModule",{value:!0}),Jv.getActiveConfig=P,Jv.getActiveView=A,Jv.validFormat=L;var e=a(Fe);a(ej());var t=a(RU()),r=Jc,n=a(pO);a(Zy);var i=a(QM()),l=a(eO);function a(F){return F&&F.__esModule?F:{default:F}}function s(){return s=Object.assign?Object.assign.bind():function(F){for(var K=1;K<arguments.length;K++){var re=arguments[K];for(var G in re)Object.prototype.hasOwnProperty.call(re,G)&&(F[G]=re[G])}return F},s.apply(this,arguments)}var d=t.default["ams-default"],v=0;function S(F,K){var re=(0,r.matchRoutes)(F.map(function(H){return{path:H.path}}),{pathname:K})||[],G=re.reduce(function(H,B){return H[B.route.path]=B,H},{});return F.filter(function(H,B){var $=(G==null?void 0:G[H.path])||!1;return $&&(H.params=$.params),$})}function A(F,K){var re=S(F,K);return re.map(function(G){var H=typeof G.type=="function"?G.type:t.default[G.type]||d,B=[];G.children&&(B=A(G.children,K,format,depth+1));var $=(0,l.default)((0,i.default)(H));return e.default.createElement($,s({key:v++},G,G.props,{children:B,location:{}}))})}function P(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"/",re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,G=(0,n.default)(S(F,K));return G.forEach(function(H){H.children=P(H.children,K,re+1)}),G||[]}function L(F){return F.children&&Array.isArray(F.children)}return Jv}var y4;function cfe(){return y4||(y4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=d(Fe),r=Jc,n=d(RU()),i=ufe(),l=d(vM),a=d(_M),s=["config","path","user","theme"];function d(K){return K&&K.__esModule?K:{default:K}}function v(K,re){if(K==null)return{};var G=S(K,re),H,B;if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(K);for(B=0;B<$.length;B++)H=$[B],!(re.indexOf(H)>=0)&&Object.prototype.propertyIsEnumerable.call(K,H)&&(G[H]=K[H])}return G}function S(K,re){if(K==null)return{};var G={},H=Object.keys(K),B,$;for($=0;$<H.length;$++)B=H[$],!(re.indexOf(B)>=0)&&(G[B]=K[B]);return G}var A=n.default.InvalidConfig,P=n.default.NoRouteMatch,L=function(re){var G=re.config,H=re.path,B=H===void 0?"":H;re.user;var $=re.theme,N=$===void 0?a.default:$;v(re,s);var z=(0,r.useLocation)();if(!(0,i.validFormat)(G))return t.default.createElement(A,{config:G});var X=(0,i.getActiveView)(G.children,B,z);return X?t.default.createElement(l.default.Provider,{value:N},X):t.default.createElement(P,{path:B})},F=L;e.default=F}(pP)),pP}var v4;function ffe(){return v4||(v4=1,function(e){function t(v){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},t(v)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;var r=s(Fe),n=Jc,i=l(cfe());function l(v){return v&&v.__esModule?v:{default:v}}function a(v){if(typeof WeakMap!="function")return null;var S=new WeakMap,A=new WeakMap;return(a=function(L){return L?A:S})(v)}function s(v,S){if(!S&&v&&v.__esModule)return v;if(v===null||t(v)!=="object"&&typeof v!="function")return{default:v};var A=a(S);if(A&&A.has(v))return A.get(v);var P={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var F in v)if(F!=="default"&&Object.prototype.hasOwnProperty.call(v,F)){var K=L?Object.getOwnPropertyDescriptor(v,F):null;K&&(K.get||K.set)?Object.defineProperty(P,F,K):P[F]=v[F]}return P.default=v,A&&A.set(v,P),P}function d(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"/";function A(){var P=(0,n.useParams)();return r.default.createElement(i.default,{path:"/".concat(P["*"]||""),config:v})}return{path:"".concat(S,"*"),element:function(L){return r.default.createElement(A,L)}}}}(hP)),hP}var kP={},IP={},_4;function hfe(){return _4||(_4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=CU(),r=[],n=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case t.GET_GROUPS:return a.groups;default:return l}};e.default=n}(IP)),IP}var MP={},b4;function pfe(){return b4||(b4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=_E(),r=[],n=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case t.GET_USERS:return a.users;default:return l}};e.default=n}(MP)),MP}var OP={},ap={},x4;function dfe(){if(x4)return ap;x4=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.getProjects=ap.deleteProject=ap.createProject=ap.GET_PROJECTS=void 0;var e=Ky(),t=hm(),r=bc;function n(L){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},n(L)}function i(L,F){var K=Object.keys(L);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(L);F&&(re=re.filter(function(G){return Object.getOwnPropertyDescriptor(L,G).enumerable})),K.push.apply(K,re)}return K}function l(L){for(var F=1;F<arguments.length;F++){var K=arguments[F]!=null?arguments[F]:{};F%2?i(Object(K),!0).forEach(function(re){a(L,re,K[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(K)):i(Object(K)).forEach(function(re){Object.defineProperty(L,re,Object.getOwnPropertyDescriptor(K,re))})}return L}function a(L,F,K){return F=s(F),F in L?Object.defineProperty(L,F,{value:K,enumerable:!0,configurable:!0,writable:!0}):L[F]=K,L}function s(L){var F=d(L,"string");return n(F)==="symbol"?F:String(F)}function d(L,F){if(n(L)!=="object"||L===null)return L;var K=L[Symbol.toPrimitive];if(K!==void 0){var re=K.call(L,F||"default");if(n(re)!=="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(L)}var v="AMS::GET_PROJECTS";ap.GET_PROJECTS=v;var S=function(){return function(F,K){var re=K().user.token;if(re)(0,r.postJson)("".concat(r.Config.AUTH_HOST,"/projects"),{token:re}).then(function(G){G.error?(F((0,e.auth)()),F((0,t.sendSystemMessage)(G.error))):F(l({type:v},G))});else return Promise.resolve()}};ap.getProjects=S;var A=function(F){return function(K,re){var G=re().user.token;if(G)(0,r.postJson)("".concat(r.Config.AUTH_HOST,"/project/create"),{token:G,name:F}).then(function(H){H.error?(K((0,e.auth)()),K((0,t.sendSystemMessage)(H.error))):(K((0,t.sendSystemMessage)(H.message)),K(S()))});else return Promise.resolve()}};ap.createProject=A;var P=function(F){return function(K,re){var G=re().user.token;if(G)(0,r.postJson)("".concat(r.Config.AUTH_HOST,"/project/delete"),{token:G,name:F}).then(function(H){H.error?(K((0,e.auth)()),K((0,t.sendSystemMessage)(H.error))):(K((0,t.sendSystemMessage)(H.message)),K(S()))});else return Promise.resolve()}};return ap.deleteProject=P,ap}var w4;function mfe(){return w4||(w4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=dfe(),r=[],n=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case t.GET_PROJECTS:return a.projects;default:return l}};e.default=n}(OP)),OP}var RP={},S4;function gfe(){return S4||(S4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=PU(),r=[],n=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case t.GET_REQUESTS:return a.requests;default:return l}};e.default=n}(RP)),RP}var DP={},E4;function yfe(){return E4||(E4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=TU();function r(S){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},r(S)}function n(S,A){var P=Object.keys(S);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(S);A&&(L=L.filter(function(F){return Object.getOwnPropertyDescriptor(S,F).enumerable})),P.push.apply(P,L)}return P}function i(S){for(var A=1;A<arguments.length;A++){var P=arguments[A]!=null?arguments[A]:{};A%2?n(Object(P),!0).forEach(function(L){l(S,L,P[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(P)):n(Object(P)).forEach(function(L){Object.defineProperty(S,L,Object.getOwnPropertyDescriptor(P,L))})}return S}function l(S,A,P){return A=a(A),A in S?Object.defineProperty(S,A,{value:P,enumerable:!0,configurable:!0,writable:!0}):S[A]=P,S}function a(S){var A=s(S,"string");return r(A)==="symbol"?A:String(A)}function s(S,A){if(r(S)!=="object"||S===null)return S;var P=S[Symbol.toPrimitive];if(P!==void 0){var L=P.call(S,A||"default");if(r(L)!=="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(S)}var d={receiveEmail:!1,receiveSlack:!1,slackUserId:void 0},v=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,P=arguments.length>1?arguments[1]:void 0;switch(P.type){case t.GET_PREFERENCES:return i(i({},d),P.preferences);default:return A}};e.default=v}(DP)),DP}var zP={},C4;function vfe(){return C4||(C4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=AU(),r={profile:{email:void 0},id:void 0},n=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case t.GET_SLACK_USER:return a.slacker;default:return l}};e.default=n}(zP)),zP}var LP={},P4;function _fe(){return P4||(P4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=kU(),r=[],n=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case t.GET_MESSAGES:return a.messages;default:return l}};e.default=n}(LP)),LP}var T4;function bfe(){return T4||(T4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=v(QU()),r=v(hfe()),n=v(pfe()),i=v(mfe()),l=v(gfe()),a=v(yfe()),s=v(vfe()),d=v(_fe());function v(A){return A&&A.__esModule?A:{default:A}}var S={user:t.default,groups:r.default,users:n.default,projects:i.default,requests:l.default,preferences:a.default,slacker:s.default,avlMessages:d.default};e.default=S}(kP)),kP}var hj={},d0={};Object.defineProperty(d0,"__esModule",{value:!0});d0.SystemMessage=d0.ConfirmMessage=void 0;var Xp=xfe(Fe);function xfe(e){return e&&e.__esModule?e:{default:e}}function m0(e){return m0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m0(e)}function q2(){return q2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q2.apply(this,arguments)}function pj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yj(n.key),n)}}function dj(e,t,r){return t&&A4(e.prototype,t),r&&A4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mj(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hk(e,t)}function hk(e,t){return hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},hk(e,t)}function gj(e){var t=Sfe();return function(){var n=G2(e),i;if(t){var l=G2(this).constructor;i=Reflect.construct(n,arguments,l)}else i=n.apply(this,arguments);return wfe(this,i)}}function wfe(e,t){if(t&&(m0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pk(e)}function pk(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sfe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function G2(e){return G2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},G2(e)}function k4(e,t,r){return t=yj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yj(e){var t=Efe(e,"string");return m0(t)==="symbol"?t:String(t)}function Efe(e,t){if(m0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(m0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vj=function(t){var r=t.message,n=t.top,i=t.type,l=t.show,a=t.dismiss,s=t.confirm,d=s===void 0?null:s,v={bgDanger:"bg-red-300 border border-red-400"};return console.log("type",i),Xp.default.createElement("div",{className:"bg-white absolute whitespace-nowrap rounded ".concat(l),style:{top:"".concat(n,"rem")}},Xp.default.createElement("div",{className:`
          bg-opacity-25 `.concat(v["bg".concat(i)],`
          rounded px-6 py-2 text-large
        `)},Xp.default.createElement("div",{className:"flex justify-center "},Xp.default.createElement("div",{className:"mr-4 p-2"},r),Xp.default.createElement("button",{onClick:a,className:"px-3 rounded-md hover:bg-white text-xl"},"✕"),d?Xp.default.createElement("span",{className:"ml-2"},Xp.default.createElement("button",{onClick:d,className:"px-3 rounded-md hover:bg-white text-xl"},"✓")):null)))},_j=function(e){mj(r,e);var t=gj(r);function r(){var n;pj(this,r);for(var i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return n=t.call.apply(t,[this].concat(l)),k4(pk(n),"state",{show:"show"}),k4(pk(n),"timeout",null),n}return dj(r,[{key:"componentDidMount",value:function(){this.props.duration&&(this.timeout=setTimeout(this.dismiss.bind(this),this.props.duration))}},{key:"dismiss",value:function(){console.log("dismissing"),this.setState({show:"hide"}),clearTimeout(this.timeout),this.timeout=setTimeout(this.props.dismissSystemMessage,750,this.props.id),this.props.onDismiss()}},{key:"render",value:function(){var i=this;return console.log("rendering message",this.props,this.state),Xp.default.createElement(vj,q2({},this.props,this.state,{dismiss:function(a){return i.dismiss(a)}}))}}]),r}(Xp.default.Component);d0.SystemMessage=_j;var Cfe=function(e){mj(r,e);var t=gj(r);function r(){return pj(this,r),t.apply(this,arguments)}return dj(r,[{key:"confirm",value:function(){this.setState({show:"hide"}),clearTimeout(this.timeout),console.log("confirm message"),this.timeout=setTimeout(this.props.dismissSystemMessage,750,this.props.id),this.props.onConfirm()}},{key:"render",value:function(){var i=this;return Xp.default.createElement(vj,q2({},this.props,this.state,{dismiss:function(a){return i.dismiss(a)},confirm:function(a){return i.confirm(a)}}))}}]),r}(_j);d0.ConfirmMessage=Cfe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=l(Fe),r=k0,n=vE,i=d0;function l(S){return S&&S.__esModule?S:{default:S}}function a(){return a=Object.assign?Object.assign.bind():function(S){for(var A=1;A<arguments.length;A++){var P=arguments[A];for(var L in P)Object.prototype.hasOwnProperty.call(P,L)&&(S[L]=P[L])}return S},a.apply(this,arguments)}var s=function(A){var P=A.messages,L=A.dismissSystemMessage;return P.length?t.default.createElement("div",{className:"fixed z-50 top-[70px] right-[20px]"},P.map(function(F,K){return F.onConfirm?t.default.createElement(i.ConfirmMessage,a({key:F.id,top:K*3},F,{dismissSystemMessage:L})):t.default.createElement(i.SystemMessage,a({className:"absolute",key:F.id,top:K*3},F,{dismissSystemMessage:L}))})):null},d=function(A){return{messages:A.messages}},v=(0,r.connect)(d,{dismissSystemMessage:n.dismissSystemMessage})(s);e.default=v})(hj);var I4;function hm(){return I4||(I4=1,function(e){function t(P){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},t(P)}Object.defineProperty(e,"__esModule",{value:!0});var r={amsFactory:!0,enableAuth:!0,useAuth:!0,withAuth:!0,postMessageWrapper:!0,Reducers:!0,Messages:!0,messages:!0,sendSystemMessage:!0,dismissSystemMessage:!0};Object.defineProperty(e,"Messages",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"Reducers",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"amsFactory",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"dismissSystemMessage",{enumerable:!0,get:function(){return s.dismissSystemMessage}}),Object.defineProperty(e,"enableAuth",{enumerable:!0,get:function(){return i.enableAuth}}),Object.defineProperty(e,"messages",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"postMessageWrapper",{enumerable:!0,get:function(){return i.postMessageWrapper}}),Object.defineProperty(e,"sendSystemMessage",{enumerable:!0,get:function(){return s.sendSystemMessage}}),Object.defineProperty(e,"useAuth",{enumerable:!0,get:function(){return i.useAuth}}),Object.defineProperty(e,"withAuth",{enumerable:!0,get:function(){return i.withAuth}});var n=A(ffe()),i=ej(),l=A(bfe()),a=A(hj),s=S(vE),d=JM();Object.keys(d).forEach(function(P){P==="default"||P==="__esModule"||Object.prototype.hasOwnProperty.call(r,P)||P in e&&e[P]===d[P]||Object.defineProperty(e,P,{enumerable:!0,get:function(){return d[P]}})});function v(P){if(typeof WeakMap!="function")return null;var L=new WeakMap,F=new WeakMap;return(v=function(re){return re?F:L})(P)}function S(P,L){if(!L&&P&&P.__esModule)return P;if(P===null||t(P)!=="object"&&typeof P!="function")return{default:P};var F=v(L);if(F&&F.has(P))return F.get(P);var K={},re=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var G in P)if(G!=="default"&&Object.prototype.hasOwnProperty.call(P,G)){var H=re?Object.getOwnPropertyDescriptor(P,G):null;H&&(H.get||H.set)?Object.defineProperty(K,G,H):K[G]=P[G]}return K.default=P,F&&F.set(P,K),K}function A(P){return P&&P.__esModule?P:{default:P}}}(fP)),fP}var Jp=hm();const Pfe={children:[{type:"ams-login",path:"login",props:{title:"NYMTC TIG"}},{type:"ams-reset-password",path:"reset-password",props:{title:"NYMTC TIG"}},{type:"ams-logout",path:"logout"},{type:"ams-signup",path:"register",props:{addToGroup:"123"},props:{title:"NYMTC TIG"}},{type:"ams-profile",path:"profile"},{type:"ams-verify-request",path:"verify-request"},{type:"ams-verify-email",path:"verify-email"},{type:"ams-set-password",path:"set-password"},{type:"ams-accept-invite",path:"accept-invite"},{type:"ams-project-management",path:"project-management",props:{authLevel:5}}]},Tfe=Jp.amsFactory(Pfe,"/auth/"),Afe=()=>ae("div",{className:"h-full flex-1 flex flex-col text-gray-900 bg-gray-100",children:Ft("div",{className:"flex-1 flex items-center justify-center flex-col",children:[ae("div",{className:"text-8xl font-bold",children:"404"}),ae("div",{className:"text-2xl",children:"Page not Found"}),ae("div",{className:"text-2xl",children:"Oops, Something went missing..."})]})}),kfe={mainNav:!1,component:Afe,layoutSettings:{fixed:!0,headerBar:!0}},bj=(e,t)=>{const[r,...n]=e.split(new RegExp("(?<!^)(?=[A-Z])"));return!t.$compositions||!t.$compositions[r]?t[r]||"":t.$compositions[r].reduce((i,l)=>{let a=l.$default||"";for(const s of n)s in l&&(a=l[s]);return i.push(a),i},[]).filter(Boolean).join(" ")},Ife=e=>{const t=JSON.parse(JSON.stringify(e));for(const r in t){if(r==="$compositions")continue;const n=t[r].split(/\s+/),i=/^[@](.+)$/;t[r]=n.map(l=>{const a=i.exec(l);if(a){const[,s]=a;return t[s]}return l}).join(" ")}if(t.$compositions){const{$defaults:r=[],...n}=t.$compositions;for(const i in n)t.$compositions[i].forEach(l=>{for(let a in l){const s=/^[@](.+)$/;l[a]=l[a].split(/\s+/).map(S=>{const A=s.exec(S);if(A){const[,P]=A;return t[P]}return S}).join(" ");const d=/^\$(.+)$/,v=d.exec(l[a]);if(v){const[,S]=v;S in t&&(l[a]=t[S],r.push(S))}}});r.forEach(i=>{t[i]=bj(i,t)})}return t},xj={get:(e,t,r)=>(t in e||(e[t]=bj(t,e)),e[t])},EE=e=>new Proxy(e,xj),Mfe=e=>new Proxy(Ife(e),xj),Ofe=[{$default:"rounded inline-flex items-center justify-center @transition disabled:cursor-not-allowed disabled:bg-transparent disabled:opacity-50 focus:outline-none border",Text:"inline-flex items-center justify-center @transition disabled:cursor-not-allowed disabled:opacity-50 focus:outline-none border"},{$default:"text-gray-400 disabled:text-gray-300",Primary:"text-blue-400 disabled:text-blue-300",Success:"text-green-400 disabled:text-green-300",Danger:"text-red-400 disabled:text-red-300",Info:"text-teal-400 disabled:text-teal-300"},{$default:"border-gray-400",Primary:"border-blue-400",Success:"border-green-400",Danger:"border-red-400",Info:"border-teal-400",Text:"border-none"},{$default:"hover:bg-gray-400 hover:text-white",Primary:"hover:bg-blue-400 hover:text-white",Success:"hover:bg-green-400 hover:text-white",Danger:"hover:bg-red-400 hover:text-white",Info:"hover:bg-teal-400 hover:text-white",Text:""},{$default:"px-4 py-1 @textBase",Large:"px-6 py-2 @textLarge",Small:"px-2 py-0 @textSmall"},{Block:"w-full"}],Rfe=[{$default:"w-full block rounded cursor-pointer disabled:cursor-not-allowed @transition @text @placeholder @inputBg @inputBorder"},{$default:"@paddingBase @textBase",Large:"@paddingLarge @textLarge",Small:"@paddingSmall @textSmall"}],Dfe=[{$default:"border-transparent font-medium focus:outline-none @transition"},{Top:"h-16 flex flex-1 items-center px-4 text-base leading-5",Side:"h-12 mb-1 flex pl-3 pr-4 py-2 border-l-4 text-base"},{$default:"@menuBg @menuBgHover @menuText @menuTextHover",Active:"@menuBgActive @menuBgActiveHover @menuTextActive @menuTextActiveHover"}],zfe=[{$default:"@transition inline-flex px-2 hover:font-bold disabled:font-normal disabled:cursor-not-allowed disabled:opacity-50 focus:outline-none"},{$default:"$textbutton",Info:"text-teal-400 hover:text-teal-500 disabled:text-teal-400"},{$default:"text-base",Large:"text-lg",Small:"text-sm"},{$default:"font-normal cursor-pointer",Active:"font-bold cursor-default"}],Lfe=[{$default:"@transition rounded"},{$default:"p-2 bg-opacity-50",Item:"py-1 px-3 bg-gray-300 mb-2"},{$default:"bg-opacity-50",Dragging:"bg-opacity-75"},{$default:"bg-gray-400",Success:"bg-green-400"}],$fe={$defaults:["input","navitemTop","navitemTopActive","navitemSide","navitemSideActive"],button:Ofe,input:Rfe,navitem:Dfe,textbutton:zfe,list:Lfe},Nfe={bg:"custom-bg",ySpace:"py-4",contentPadding:"py-4",menuBg:"custom-bg",contentWidth:"",text:"text-blue-800",sidebarW:"64",sidebarBorder:"",menuIcon:"mr-3 h-5 w-5",navitemTop:"mr-4 inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out",navitemTopActive:"mr-4 inline-flex items-center px-1 pt-1 border-b-2 border-indigo-500 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out",navitemSide:"mb-1 group flex pl-3 pr-4 py-2 border-l-4 border-transparent text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out",navitemSideActive:"mb-1 group flex pl-3 pr-4 py-2 border-l-4 border-indigo-500 text-sm font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out",headerBg:"custom-bg",headerShadow:"",contentBg:"",accent1:"bg-gray-200",accent2:"bg-gray-300",accent3:"bg-gray-400",accent4:"bg-gray-500",lighter:"bg-gray-50",button:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm leading-5 font-medium rounded-md text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:text-gray-800 active:bg-gray-50 transition duration-150 ease-in-out",buttonPrimary:"inline-flex items-center px-4 py-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo focus:border-indigo-700 active:bg-indigo-700 transition duration-150 ease-in-out",textbutton:"text-sm text-blue-500 hover:text-blue-300 px-2",input:"block",tableRow:"bg-white border-b border-blue-100 hover:bg-blue-50",tableRowStriped:"bg-white even:bg-gray-50",tableCell:"px-6 py-4 whitespace-no-wrap text-sm leading-5 text-gray-600",tableCellCondensed:"px-3 py-2 whitespace-no-wrap text-sm leading-5 text-gray-600",tableHeader:"px-6 pt-2 pb-1	border-b border-gray-400 bg-gray-200 text-left font-medium text-gray-700 uppercase first:rounded-tl-md last:rounded-tr-md"};EE(Nfe);const Bfe={bg:"bg-gray-300",menuBg:"bg-gray-800",sidebarW:"56",sidebarBorder:"",shadow:"",ySpace:"py-5",contentPadding:"py-5",text:"text-gray-300",contentWidth:"max-w-7xl mx-auto",menuIcon:"mr-3 h-4 w-4",navitemTop:"ml-3 my-3 px-3 py-1 inline-flex items-center rounded-md text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700",navitemTopActive:"ml-3 my-3 px-3 py-1 inline-flex items-center rounded-md text-sm font-medium text-white bg-gray-900 focus:outline-none focus:text-white focus:bg-gray-700",navitemSide:"mt-1 group flex items-center px-2 py-2 text-sm leading-5 font-medium text-gray-300 rounded-md hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700 transition ease-in-out duration-150",navitemSideActive:"group flex items-center px-2 py-2 text-sm leading-5 font-medium text-white rounded-md bg-gray-900 focus:outline-none focus:bg-gray-700 transition ease-in-out duration-150",headerBg:"bg-gray-800",headerShadow:"shadow",contentBg:"bg-gray-100",accent1:"bg-gray-600",accent2:"bg-gray-500",accent3:"bg-gray-400",lighter:"bg-gray-700",button:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm leading-5 font-medium rounded-md text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:text-gray-800 active:bg-gray-50 transition duration-150 ease-in-out",buttonPrimary:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm leading-5 font-medium rounded-md text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:text-gray-800 active:bg-gray-50 transition duration-150 ease-in-out",textbutton:"text-sm text-blue-500 hover:text-blue-300 px-2",tableRow:"bg-white border-b border-gray-200",tableRowStriped:"bg-white even:bg-gray-50"};EE(Bfe);const Ffe={bg:"bg-gray-200",menuBg:"bg-indigo-800",sidebarW:"56",sidebarBorder:"",shadow:"shadow",ySpace:"py-5",contentPadding:"py-5",text:"text-gray-300",contentWidth:"max-w-7xl mx-auto",menuIcon:"mr-3 h-4 w-4",navitemTop:"ml-3 my-3 px-3 py-1 inline-flex items-center rounded-md text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700",navitemTopActive:"ml-3 my-3 px-3 py-1 inline-flex items-center rounded-md text-sm font-medium text-white bg-gray-900 focus:outline-none focus:text-white focus:bg-gray-700",navitemSide:"mt-1 group flex items-center px-2 py-2 text-sm leading-5 font-medium text-gray-300 rounded-md hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700 transition ease-in-out duration-150",navitemSideActive:"group flex items-center px-2 py-2 text-sm leading-5 font-medium text-white rounded-md bg-gray-900 focus:outline-none focus:bg-gray-700 transition ease-in-out duration-150",headerBg:"bg-gray-800",headerShadow:"shadow",contentBg:"bg-gray-100",accent1:"bg-gray-200",accent2:"bg-gray-300",accent3:"bg-gray-400",light:"bg-gray-50",button:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm leading-5 font-medium rounded-md text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:text-gray-800 active:bg-gray-50 transition duration-150 ease-in-out",buttonPrimary:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm leading-5 font-medium rounded-md text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:text-gray-800 active:bg-gray-50 transition duration-150 ease-in-out",tableRow:"bg-white border-b border-gray-200",tableRowStriped:"bg-white even:bg-gray-50"};EE(Ffe);const Ufe={shadow:"shadow",ySpace:"py-4",contentPadding:"py-4",sidebarBorder:"",text:"text-gray-800",textContrast:"text-white",border:"border-gray-400",textInfo:"text-teal-400",bgInfo:"bg-teal-400",borderInfo:"border-teal-400",textSuccess:"text-green-400",bgSuccess:"bg-green-400",borderSuccess:"border-green-400",textPrimary:"text-blue-400",bgPrimary:"bg-blue-400",borderPrimary:"border-blue-400",textDanger:"text-red-400",bgDanger:"bg-red-400",borderDanger:"border-red-400",textWarning:"text-yellow-400",bgWarning:"bg-yellow-400",borderWarning:"border-yellow-400",textLight:"text-gray-400",placeholder:"placeholder-gray-400",borderLight:"border-gray-400",bgLight:"bg-gray-400",menuIcon:"mr-3 h-6 w-6",topMenuBorder:"border-b border-gray-200",headerShadow:"",navitemTop:"mr-4 inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out",navitemTopActive:"mr-4 inline-flex items-center px-1 pt-1 border-b-2 border-indigo-500 text-sm font-medium leading-5 text-gray-900 bg-indigo-100 focus:outline-none hover:bg-indigo-200 focus:border-indigo-700 transition duration-150 ease-in-out",navitemSide:"mb-1 group flex pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-300 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out",navitemSideActive:"mb-1 group flex pl-3 pr-4 py-2 border-l-4 border-indigo-500 text-base font-medium text-indigo-600 bg-indigo-100 focus:outline-none hover:text-indigo-800 focus:text-indigo-800 hover:bg-indigo-200 focus:bg-indigo-200 focus:border-indigo-700 transition duration-150 ease-in-out",bg:"bg-gray-100",mobileButton:"md:hidden bg-white inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-300",menuBg:"bg-gray-200",menuBgHover:"hover:bg-gray-300",menuBgActive:"bg-teal-200",menuBgActiveHover:"hover:bg-teal-300",menuText:"text-gray-500",menuTextHover:"hover:text-gray-700",menuTextActive:"text-teal-500",menuTextActiveHover:"hover:text-teal-700",topnavWrapper:"w-full bg-gray-100",topnavContent:"flex w-full ",topnavMenu:"hidden md:flex flex-1 h-full overflow-x-auto overflow-y-hidden scrollbar-sm",sidenavWrapper:"bg-gray-100 w-56 border-r border-gray-200 h-screen pt-16 z-50",headerBg:"bg-gray-200",headerBgHover:"hover:bg-gray-400",inputBg:"bg-white disabled:bg-gray-200 cursor-pointer focus:outline-none",inputBorder:"rounded border border-transparent hover:border-gray-300 focus:border-gray-600 disabled:border-gray-200",inputBgDisabled:"bg-gray-200 cursor-not-allowed focus:outline-none",inputBorderDisabled:"rounded border border-gray-200 hover:border-gray-200",inputBgFocus:"bg-white cursor-pointer focus:outline-none",inputBorderFocus:"rounded border border-transparent hover:border-gray-600 focus:border-gray-600 border-gray-600",textBase:"text-base",textSmall:"text-sm",textLarge:"text-lg",paddingBase:"py-1 px-2",paddingSmall:"py-0 px-1",paddingLarge:"py-2 px-4",contentBg:"bg-white",contentWidth:"max-w-7xl mx-auto",accent1:"bg-gray-200",accent2:"bg-gray-300",accent3:"bg-gray-400",accent4:"bg-gray-500",highlight1:"bg-teal-200",highlight2:"bg-teal-300",highlight3:"bg-teal-400",highlight4:"bg-teal-500",sidebarW:"56",transition:"transition ease-in-out duration-150",button:`
		inline-flex items-center
		px-4 py-2 border border-gray-300
		text-sm leading-5 font-medium
		rounded-md text-gray-700 bg-white
		hover:text-gray-500
		focus:outline-none focus:shadow-outline-blue focus:border-blue-300
		active:text-gray-800 active:bg-gray-50 transition duration-150 ease-in-out
		disabled:cursor-not-allowed`,buttonPrimary:"inline-flex items-center px-4 py-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo focus:border-indigo-700 active:bg-indigo-700 transition duration-150 ease-in-out disabled:cursor-not-allowed",tableRow:"bg-gray-100 hover:bg-gray-200 transition ease-in-out duration-150",tableRowStriped:"bg-gray-100 even:bg-gray-200 hover:bg-gray-300 transition ease-in-out duration-150",tableCell:"px-4 py-1 whitespace-no-wrap",tableHeader:"px-4 py-2 pb-1 border-b-2 border-gray-300 bg-gray-200 text-left font-medium text-gray-700 uppercase first:rounded-tl-md last:rounded-tr-md"},jfe=EE(Ufe),Vfe={text:"text-gray-800",textContrast:"text-white",border:"border-gray-400",ySpace:"",textInfo:"text-teal-400",bgInfo:"bg-teal-400",borderInfo:"border-teal-400",textSuccess:"text-green-400",bgSuccess:"bg-green-400",borderSuccess:"border-green-400",textPrimary:"text-blue-400",bgPrimary:"bg-blue-400",borderPrimary:"border-blue-400",textDanger:"text-red-400",bgDanger:"bg-red-400",borderDanger:"border-red-400",textWarning:"text-yellow-400",bgWarning:"bg-yellow-400",borderWarning:"border-yellow-400",textLight:"text-gray-400",placeholder:"placeholder-gray-400",menuIcon:"mr-3 h-6 w-6",topMenuBorder:"border-b border-gray-200",headerShadow:"",bg:"bg-gray-100",menuBg:"bg-gray-200",menuBgHover:"hover:bg-gray-300",menuBgActive:"bg-teal-200",menuBgActiveHover:"hover:bg-teal-300",menuText:"text-gray-500",menuTextHover:"hover:text-gray-700",menuTextActive:"text-teal-500",menuTextActiveHover:"hover:text-teal-700",menuOpenIcon:"fas fa-bars",menuCloseIcon:"fas fa-times",topnavWrapper:"w-full bg-gray-200 h-16",topnavContent:"flex w-full max-w-7xl mx-auto h-full",topnavMenu:"hidden md:flex flex-1 h-full overflow-x-auto overflow-y-hidden scrollbar-sm",sidenavWrapper:"bg-gray-200 w-56 border-r border-gray-200 h-screen pt-16 z-50",topmenuRightNavContainer:"h-full",mobileButton:"md:hidden bg-white inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-300",sidebarBg:"bg-gray-200",sidebarBorder:"",sidebarW:"56",headerBg:"bg-gray-200",headerBgHover:"hover:bg-gray-400",inputBg:"bg-white disabled:bg-gray-200 cursor-pointer focus:outline-none",inputBorder:"rounded border border-transparent hover:border-gray-300 focus:border-gray-600 disabled:border-gray-200",inputBgDisabled:"bg-gray-200 cursor-not-allowed focus:outline-none",inputBorderDisabled:"rounded border border-gray-200 hover:border-gray-200",inputBgFocus:"bg-white cursor-pointer focus:outline-none",inputBorderFocus:"rounded border border-transparent hover:border-gray-600 focus:border-gray-600 border-gray-600",booleanInputSlider:"bg-gray-300",textBase:"text-base",textSmall:"text-sm",textLarge:"text-lg",paddingBase:"py-1 px-2",paddingSmall:"py-0 px-1",paddingLarge:"py-2 px-4",accent1:"bg-gray-200",accent2:"bg-gray-300",accent3:"bg-gray-400",accent4:"bg-gray-500",highlight1:"bg-teal-200",highlight2:"bg-teal-300",highlight3:"bg-teal-400",highlight4:"bg-teal-500",contentBg:"bg-white",contentWidth:"w-full max-w-7xl mx-auto",contentPadding:"py-4",transition:"transition ease-in-out duration-150",tableInfoBar:"bg-white",tableRow:"bg-white hover:bg-gray-200 @transition",tableRowStriped:"bg-white even:bg-gray-100 hover:bg-gray-200 @transition",tableCell:"px-4 py-1 whitespace-no-wrap",tableHeader:"px-4 py-2 pb-1 border-b-2 border-gray-300 bg-gray-200 text-left font-medium text-gray-700 uppercase first:rounded-tl-md last:rounded-tr-md",$compositions:$fe};Mfe(Vfe);const wj=Ee.createContext(jfe),Mo=()=>Fe.useContext(wj),Sc=e=>_U((r,n)=>({user:r.user}),null)(e);Sc(({title:e,LeftComponent:t=null,children:r,RightComponent:n=null,shadowed:i=!1,user:l,userMenu:a=!1,className:s="",customTheme:d={},toggle:v=()=>{},open:S})=>{const A={...Mo(),...d},{TopUserMenu:P}=QE(),L=e||t,F=r||n,K=A.topNavHeight;return Ft("div",{className:`w-full relative flex items-center justify-end ${A.headerBg} ${s} h-${K}`,style:i?{boxShadow:"0px 6px 3px -3px rgba(0, 0, 0, 0.25)"}:null,children:[ae("div",{className:`inset-0 z-0 text-3xl font-bold flex-1 items-center h-${K} flex-grow`,children:typeof L=="function"?Ee.createElement(L):L}),Ft("div",{className:"flex flex-0 items-center relative z-10 pr-8 w-48 flex-shrink",children:[ae("div",{className:"hidden xl:block",children:F}),!l||!a?null:ae("div",{className:"ml-8",children:ae(P,{})}),ae("button",{className:`block xl:hidden fas ${S?"fa-times":"fa-bars"} float-right ${A.textContrast}`,onClick:v})]})]})});var nm={schemeGroups:{sequential:["BuGn","BuPu","GnBu","OrRd","PuBu","PuBuGn","PuRd","RdPu","YlGn","YlGnBu","YlOrBr","YlOrRd"],singlehue:["Blues","Greens","Greys","Oranges","Purples","Reds"],diverging:["BrBG","PiYG","PRGn","PuOr","RdBu","RdGy","RdYlBu","RdYlGn","Spectral"],qualitative:["Accent","Dark2","Paired","Pastel1","Pastel2","Set1","Set2","Set3"]},YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}};const Xw={};for(const e in nm.schemeGroups)nm.schemeGroups[e].forEach(t=>{const r=nm[t];for(const n in r)n in Xw||(Xw[n]=[]),Xw[n].push({type:`${e[0].toUpperCase()}${e.slice(1)}`,name:t,category:"Colorbrewer",colors:r[n]})});const Sj=({colors:e,size:t=3})=>ae("div",{className:"flex",children:e.map((r,n)=>ae("div",{style:{backgroundColor:r,transition:"background-color 0.5s"},className:`flex-1 h-${t}`},n))}),dO=({...e})=>Object.keys(e).reduce((t,r)=>(e[r]&&t.push(r.split("").map((n,i)=>i===0?n.toUpperCase():n).join("")),t),[]).join(""),Ej=(...e)=>Ee.useCallback(t=>{[...e].forEach(r=>{r&&(typeof r=="function"?r(t):r.current=t)})},[e]),CE=e=>{const[t,r]=Fe.useState(null);return Fe.useEffect(()=>{const n=i=>{t.contains(i.target)||typeof e=="function"&&e(i)};return t&&document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[t,e]),[r,t]};function dk(){for(var e={}.hasOwnProperty,t=[],r=0;r<arguments.length;r++){var n=arguments[r];if(n){var i=typeof n;if(i==="string"||i==="number")t.push(n);else if(Array.isArray(n)){if(n.length){var l=dk.apply(null,n);l&&t.push(l)}}else if(i==="object"){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){t.push(n.toString());continue}for(var a in n)e.call(n,a)&&n[a]&&t.push(a)}}}return t.join(" ")}const M4=({icon:e,className:t})=>ae("div",{className:`${t} flex justify-center items-center`,children:ae("span",{className:e})}),mO=({children:e,icon:t,to:r,onClick:n,className:i=null,type:l="side",active:a=!1,subMenus:s=[],themeOptions:d,subMenuActivate:v="onClick",subMenuOpen:S=!1})=>{const A=Mo()[l==="side"?"sidenav":"topnav"](d),P=Yc(),L=Ee.useMemo(()=>Array.isArray(r)?r:[r],[r]),F=Ee.useMemo(()=>{const N=s.reduce((z,X)=>(Array.isArray(X.path)?z.push(...X.path):X.path&&z.push(X.path),z),[]);return[...L,...N]},[L,s]),K=!!SF({path:F[0]||"",end:!0}),re=l==="side"?A.navitemSide:A.navitemTop,G=l==="side"?A.navitemSideActive:A.navitemTopActive,H=K||a?G:re,[B,$]=Ee.useState(S||K);return Fe.useEffect(()=>{const N=localStorage.getItem(`${r}_toggled`);N?$(!!(N==="true"||K)):localStorage.setItem(`${r}_toggled`,`${B}`)},[K,B,r]),Ft("div",{className:l==="side"?A.subMenuParentWrapper:null,children:[ae("div",{className:`${i||H}`,onClick:()=>{if(n)return n;L[0]&&P(L[0])},onMouseLeave:()=>v==="onHover"?$(!1):"",onMouseOver:()=>v==="onHover"?$(!0):"",children:Ft("div",{className:"flex",children:[Ft("div",{className:"flex-1 flex",children:[t?ae(M4,{icon:t,className:l==="side"?A.menuIconSide:A.menuIconTop}):null,ae("div",{className:A.navItemContent,children:e})]}),ae("div",{onClick:()=>{v==="onClick"&&(localStorage.setItem(`${r}_toggled`,`${!B}`),$(!B))},children:s.length?ae(M4,{icon:B?A.indicatorIconOpen:A.indicatorIcon}):null})]})}),s.length?ae(qfe,{showSubMenu:B,subMenus:s,type:l,themeOptions:d,className:i}):""]})},qfe=({showSubMenu:e,subMenus:t,type:r,themeOptions:n})=>{const i=Mo()[r==="side"?"sidenav":"topnav"](n);return!e||!t.length?null:ae("div",{className:r==="side"?i.subMenuWrapper:i.subMenuWrapperTop,children:ae("div",{className:`${i.contentBg}
					flex
					${r==="side"?"flex-col":"flex-row"}
				`,children:t.map((l,a)=>ae(mO,{to:l.path,icon:l.icon,type:r,className:l.className,onClick:l.onClick,themeOptions:n,subMenus:l.subMenus,children:l.name},a))})})},Cj=({control:e,children:t,className:r,openType:n="hover"})=>{const[i,l]=Ee.useState(!1),a=Ee.useCallback(()=>l(!1),[]),[s]=CE(a);return Ft("div",{ref:s,className:`h-full relative cursor-pointer ${r}`,onMouseEnter:d=>{n==="hover"&&l(!0)},onMouseLeave:d=>l(!1),onClick:d=>{l(!i)},children:[e,i?ae("div",{className:`shadow fixed w-full max-w-[200px] rounded-b-lg ${i?"block":"hidden"} z-10`,children:t}):""]})};var Pj={exports:{}},mk={exports:{}};(function(e,t){(function(r,n){n(t,Fe)})(_S,function(r,n){function i(oe,ze,We,tt,Ot,_t,Tt){try{var xr=oe[_t](Tt),Er=xr.value}catch(_r){return void We(_r)}xr.done?ze(Er):Promise.resolve(Er).then(tt,Ot)}function l(oe){return function(){var ze=this,We=arguments;return new Promise(function(tt,Ot){var _t=oe.apply(ze,We);function Tt(Er){i(_t,tt,Ot,Tt,xr,"next",Er)}function xr(Er){i(_t,tt,Ot,Tt,xr,"throw",Er)}Tt(void 0)})}}function a(){return(a=Object.assign||function(oe){for(var ze=1;ze<arguments.length;ze++){var We=arguments[ze];for(var tt in We)Object.prototype.hasOwnProperty.call(We,tt)&&(oe[tt]=We[tt])}return oe}).apply(this,arguments)}function s(oe,ze){if(oe==null)return{};var We,tt,Ot={},_t=Object.keys(oe);for(tt=0;tt<_t.length;tt++)We=_t[tt],ze.indexOf(We)>=0||(Ot[We]=oe[We]);return Ot}function d(oe){var ze=function(We,tt){if(typeof We!="object"||We===null)return We;var Ot=We[Symbol.toPrimitive];if(Ot!==void 0){var _t=Ot.call(We,tt||"default");if(typeof _t!="object")return _t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(tt==="string"?String:Number)(We)}(oe,"string");return typeof ze=="symbol"?ze:String(ze)}n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;var v={init:"init"},S=function(oe){var ze=oe.value;return ze===void 0?"":ze},A=function(){return n.createElement(n.Fragment,null," ")},P={Cell:S,width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function L(){for(var oe=arguments.length,ze=new Array(oe),We=0;We<oe;We++)ze[We]=arguments[We];return ze.reduce(function(tt,Ot){var _t=Ot.style,Tt=Ot.className;return tt=a({},tt,{},s(Ot,["style","className"])),_t&&(tt.style=tt.style?a({},tt.style||{},{},_t||{}):_t),Tt&&(tt.className=tt.className?tt.className+" "+Tt:Tt),tt.className===""&&delete tt.className,tt},{})}var F=function(oe,ze){return ze===void 0&&(ze={}),function(We){return We===void 0&&(We={}),[].concat(oe,[We]).reduce(function(tt,Ot){return function _t(Tt,xr,Er){return typeof xr=="function"?_t({},xr(Tt,Er)):Array.isArray(xr)?L.apply(void 0,[Tt].concat(xr)):L(Tt,xr)}(tt,Ot,a({},ze,{userProps:We}))},{})}},K=function(oe,ze,We,tt){return We===void 0&&(We={}),oe.reduce(function(Ot,_t){return _t(Ot,We)},ze)},re=function(oe,ze,We){return We===void 0&&(We={}),oe.forEach(function(tt){tt(ze,We)})};function G(oe,ze,We,tt){oe.findIndex(function(Ot){return Ot.pluginName===We}),ze.forEach(function(Ot){oe.findIndex(function(_t){return _t.pluginName===Ot})})}function H(oe,ze){return typeof oe=="function"?oe(ze):oe}function B(oe){var ze=n.useRef();return ze.current=oe,n.useCallback(function(){return ze.current},[])}var $=typeof document<"u"?n.useLayoutEffect:n.useEffect;function N(oe,ze){var We=n.useRef(!1);$(function(){We.current&&oe(),We.current=!0},ze)}function z(oe,ze,We){return We===void 0&&(We={}),function(tt,Ot){Ot===void 0&&(Ot={});var _t=typeof tt=="string"?ze[tt]:tt;if(_t===void 0)throw console.info(ze),new Error("Renderer Error ☝️");return X(_t,a({},oe,{column:ze},We,{},Ot))}}function X(oe,ze){return function(tt){return typeof tt=="function"&&(Ot=Object.getPrototypeOf(tt)).prototype&&Ot.prototype.isReactComponent;var Ot}(We=oe)||typeof We=="function"||function(tt){return typeof tt=="object"&&typeof tt.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(tt.$$typeof.description)}(We)?n.createElement(oe,ze):oe;var We}function te(oe,ze,We){return We===void 0&&(We=0),oe.map(function(tt){return ke(tt=a({},tt,{parent:ze,depth:We})),tt.columns&&(tt.columns=te(tt.columns,tt,We+1)),tt})}function pe(oe){return it(oe,"columns")}function ke(oe){var ze=oe.id,We=oe.accessor,tt=oe.Header;if(typeof We=="string"){ze=ze||We;var Ot=We.split(".");We=function(_t){return function(Tt,xr,Er){if(!xr)return Tt;var _r,on=typeof xr=="function"?xr:JSON.stringify(xr),Gr=Ie.get(on)||function(){var Kr=function(Cr){return function Wr(Yr,bn){if(bn===void 0&&(bn=[]),Array.isArray(Yr))for(var On=0;On<Yr.length;On+=1)Wr(Yr[On],bn);else bn.push(Yr);return bn}(Cr).map(function(Wr){return String(Wr).replace(".","_")}).join(".").replace(Ye,".").replace(Dr,"").split(".")}(xr);return Ie.set(on,Kr),Kr}();try{_r=Gr.reduce(function(Kr,Cr){return Kr[Cr]},Tt)}catch{}return _r!==void 0?_r:Er}(_t,Ot)}}if(!ze&&typeof tt=="string"&&tt&&(ze=tt),!ze&&oe.columns)throw console.error(oe),new Error('A column ID (or unique "Header" value) is required!');if(!ze)throw console.error(oe),new Error("A column ID (or string accessor) is required!");return Object.assign(oe,{id:ze,accessor:We}),oe}function Pe(oe,ze){if(!ze)throw new Error;return Object.assign(oe,a({Header:A,Footer:A},P,{},ze,{},oe)),Object.assign(oe,{originalWidth:oe.width}),oe}function ge(oe,ze,We){We===void 0&&(We=function(){return{}});for(var tt=[],Ot=oe,_t=0,Tt=function(){return _t++},xr=function(){var Er={headers:[]},_r=[],on=Ot.some(function(Gr){return Gr.parent});Ot.forEach(function(Gr){var Kr,Cr=[].concat(_r).reverse()[0];on&&(Gr.parent?Kr=a({},Gr.parent,{originalId:Gr.parent.id,id:Gr.parent.id+"_"+Tt(),headers:[Gr]},We(Gr)):Kr=Pe(a({originalId:Gr.id+"_placeholder",id:Gr.id+"_placeholder_"+Tt(),placeholderOf:Gr,headers:[Gr]},We(Gr)),ze),Cr&&Cr.originalId===Kr.originalId?Cr.headers.push(Gr):_r.push(Kr)),Er.headers.push(Gr)}),tt.push(Er),Ot=_r};Ot.length;)xr();return tt.reverse()}var Ie=new Map;function Ne(){for(var oe=arguments.length,ze=new Array(oe),We=0;We<oe;We++)ze[We]=arguments[We];for(var tt=0;tt<ze.length;tt+=1)if(ze[tt]!==void 0)return ze[tt]}function lt(oe){if(typeof oe=="function")return oe}function it(oe,ze){var We=[];return function tt(Ot){Ot.forEach(function(_t){_t[ze]?tt(_t[ze]):We.push(_t)})}(oe),We}function Rt(oe,ze){var We=ze.manualExpandedKey,tt=ze.expanded,Ot=ze.expandSubRows,_t=Ot===void 0||Ot,Tt=[];return oe.forEach(function(xr){return function Er(_r,on){on===void 0&&(on=!0),_r.isExpanded=_r.original&&_r.original[We]||tt[_r.id],_r.canExpand=_r.subRows&&!!_r.subRows.length,on&&Tt.push(_r),_r.subRows&&_r.subRows.length&&_r.isExpanded&&_r.subRows.forEach(function(Gr){return Er(Gr,_t)})}(xr)}),Tt}function St(oe,ze,We){return lt(oe)||ze[oe]||We[oe]||We.text}function Zt(oe,ze,We){return oe?oe(ze,We):ze===void 0}function Kt(){throw new Error("React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.")}var Ge=null,Ye=/\[/g,Dr=/\]/g,wr=function(oe){return a({role:"table"},oe)},tr=function(oe){return a({role:"rowgroup"},oe)},br=function(oe,ze){var We=ze.column;return a({key:"header_"+We.id,colSpan:We.totalVisibleHeaderCount,role:"columnheader"},oe)},Bt=function(oe,ze){var We=ze.column;return a({key:"footer_"+We.id,colSpan:We.totalVisibleHeaderCount},oe)},hr=function(oe,ze){return a({key:"headerGroup_"+ze.index,role:"row"},oe)},cr=function(oe,ze){return a({key:"footerGroup_"+ze.index},oe)},Mn=function(oe,ze){return a({key:"row_"+ze.row.id,role:"row"},oe)},Hn=function(oe,ze){var We=ze.cell;return a({key:"cell_"+We.row.id+"_"+We.column.id,role:"cell"},oe)};function Qn(){return{useOptions:[],stateReducers:[],useControlledState:[],columns:[],columnsDeps:[],allColumns:[],allColumnsDeps:[],accessValue:[],materializedColumns:[],materializedColumnsDeps:[],useInstanceAfterData:[],visibleColumns:[],visibleColumnsDeps:[],headerGroups:[],headerGroupsDeps:[],useInstanceBeforeDimensions:[],useInstance:[],prepareRow:[],getTableProps:[wr],getTableBodyProps:[tr],getHeaderGroupProps:[hr],getFooterGroupProps:[cr],getHeaderProps:[br],getFooterProps:[Bt],getRowProps:[Mn],getCellProps:[Hn],useFinalInstance:[]}}v.resetHiddenColumns="resetHiddenColumns",v.toggleHideColumn="toggleHideColumn",v.setHiddenColumns="setHiddenColumns",v.toggleHideAllColumns="toggleHideAllColumns";var an=function(oe){oe.getToggleHiddenProps=[ki],oe.getToggleHideAllColumnsProps=[Xn],oe.stateReducers.push(Li),oe.useInstanceBeforeDimensions.push(Pi),oe.headerGroupsDeps.push(function(ze,We){var tt=We.instance;return[].concat(ze,[tt.state.hiddenColumns])}),oe.useInstance.push(Yi)};an.pluginName="useColumnVisibility";var ki=function(oe,ze){var We=ze.column;return[oe,{onChange:function(tt){We.toggleHidden(!tt.target.checked)},style:{cursor:"pointer"},checked:We.isVisible,title:"Toggle Column Visible"}]},Xn=function(oe,ze){var We=ze.instance;return[oe,{onChange:function(tt){We.toggleHideAllColumns(!tt.target.checked)},style:{cursor:"pointer"},checked:!We.allColumnsHidden&&!We.state.hiddenColumns.length,title:"Toggle All Columns Hidden",indeterminate:!We.allColumnsHidden&&We.state.hiddenColumns.length}]};function Li(oe,ze,We,tt){if(ze.type===v.init)return a({hiddenColumns:[]},oe);if(ze.type===v.resetHiddenColumns)return a({},oe,{hiddenColumns:tt.initialState.hiddenColumns||[]});if(ze.type===v.toggleHideColumn){var Ot=(ze.value!==void 0?ze.value:!oe.hiddenColumns.includes(ze.columnId))?[].concat(oe.hiddenColumns,[ze.columnId]):oe.hiddenColumns.filter(function(_t){return _t!==ze.columnId});return a({},oe,{hiddenColumns:Ot})}return ze.type===v.setHiddenColumns?a({},oe,{hiddenColumns:H(ze.value,oe.hiddenColumns)}):ze.type===v.toggleHideAllColumns?a({},oe,{hiddenColumns:(ze.value!==void 0?ze.value:!oe.hiddenColumns.length)?tt.allColumns.map(function(_t){return _t.id}):[]}):void 0}function Pi(oe){var ze=oe.headers,We=oe.state.hiddenColumns;n.useRef(!1).current;var tt=0;ze.forEach(function(Ot){return tt+=function _t(Tt,xr){Tt.isVisible=xr&&!We.includes(Tt.id);var Er=0;return Tt.headers&&Tt.headers.length?Tt.headers.forEach(function(_r){return Er+=_t(_r,Tt.isVisible)}):Er=Tt.isVisible?1:0,Tt.totalVisibleHeaderCount=Er,Er}(Ot,!0)})}function Yi(oe){var ze=oe.columns,We=oe.flatHeaders,tt=oe.dispatch,Ot=oe.allColumns,_t=oe.getHooks,Tt=oe.state.hiddenColumns,xr=oe.autoResetHiddenColumns,Er=xr===void 0||xr,_r=B(oe),on=Ot.length===Tt.length,Gr=n.useCallback(function(bn,On){return tt({type:v.toggleHideColumn,columnId:bn,value:On})},[tt]),Kr=n.useCallback(function(bn){return tt({type:v.setHiddenColumns,value:bn})},[tt]),Cr=n.useCallback(function(bn){return tt({type:v.toggleHideAllColumns,value:bn})},[tt]),Wr=F(_t().getToggleHideAllColumnsProps,{instance:_r()});We.forEach(function(bn){bn.toggleHidden=function(On){tt({type:v.toggleHideColumn,columnId:bn.id,value:On})},bn.getToggleHiddenProps=F(_t().getToggleHiddenProps,{instance:_r(),column:bn})});var Yr=B(Er);N(function(){Yr()&&tt({type:v.resetHiddenColumns})},[tt,ze]),Object.assign(oe,{allColumnsHidden:on,toggleHideColumn:Gr,setHiddenColumns:Kr,toggleHideAllColumns:Cr,getToggleHideAllColumnsProps:Wr})}var gi={},ea={},ya=function(oe,ze,We){return oe},La=function(oe,ze){return oe.subRows||[]},Aa=function(oe,ze,We){return""+(We?[We.id,ze].join("."):ze)},$a=function(oe){return oe};function ka(oe){var ze=oe.initialState,We=ze===void 0?gi:ze,tt=oe.defaultColumn,Ot=tt===void 0?ea:tt,_t=oe.getSubRows,Tt=_t===void 0?La:_t,xr=oe.getRowId,Er=xr===void 0?Aa:xr,_r=oe.stateReducer,on=_r===void 0?ya:_r,Gr=oe.useControlledState,Kr=Gr===void 0?$a:Gr;return a({},s(oe,["initialState","defaultColumn","getSubRows","getRowId","stateReducer","useControlledState"]),{initialState:We,defaultColumn:Ot,getSubRows:Tt,getRowId:Er,stateReducer:on,useControlledState:Kr})}function Ka(oe,ze){ze===void 0&&(ze=0);var We=0,tt=0,Ot=0,_t=0;return oe.forEach(function(Tt){var xr=Tt.headers;if(Tt.totalLeft=ze,xr&&xr.length){var Er=Ka(xr,ze),_r=Er[0],on=Er[1],Gr=Er[2],Kr=Er[3];Tt.totalMinWidth=_r,Tt.totalWidth=on,Tt.totalMaxWidth=Gr,Tt.totalFlexWidth=Kr}else Tt.totalMinWidth=Tt.minWidth,Tt.totalWidth=Math.min(Math.max(Tt.minWidth,Tt.width),Tt.maxWidth),Tt.totalMaxWidth=Tt.maxWidth,Tt.totalFlexWidth=Tt.canResize?Tt.totalWidth:0;Tt.isVisible&&(ze+=Tt.totalWidth,We+=Tt.totalMinWidth,tt+=Tt.totalWidth,Ot+=Tt.totalMaxWidth,_t+=Tt.totalFlexWidth)}),[We,tt,Ot,_t]}function dr(oe){var ze=oe.data,We=oe.rows,tt=oe.flatRows,Ot=oe.rowsById,_t=oe.column,Tt=oe.getRowId,xr=oe.getSubRows,Er=oe.accessValueHooks,_r=oe.getInstance;ze.forEach(function(on,Gr){return function Kr(Cr,Wr,Yr,bn,On){Yr===void 0&&(Yr=0);var ei=Cr,jn=Tt(Cr,Wr,bn),Or=Ot[jn];if(Or)Or.subRows&&Or.originalSubRows.forEach(function(Cn,ri){return Kr(Cn,ri,Yr+1,Or)});else if((Or={id:jn,original:ei,index:Wr,depth:Yr,cells:[{}]}).cells.map=Kt,Or.cells.filter=Kt,Or.cells.forEach=Kt,Or.cells[0].getCellProps=Kt,Or.values={},On.push(Or),tt.push(Or),Ot[jn]=Or,Or.originalSubRows=xr(Cr,Wr),Or.originalSubRows){var yn=[];Or.originalSubRows.forEach(function(Cn,ri){return Kr(Cn,ri,Yr+1,Or,yn)}),Or.subRows=yn}_t.accessor&&(Or.values[_t.id]=_t.accessor(Cr,Wr,Or,On,ze)),Or.values[_t.id]=K(Er,Or.values[_t.id],{row:Or,column:_t,instance:_r()})}(on,Gr,0,void 0,We)})}v.resetExpanded="resetExpanded",v.toggleRowExpanded="toggleRowExpanded",v.toggleAllRowsExpanded="toggleAllRowsExpanded";var Mt=function(oe){oe.getToggleAllRowsExpandedProps=[yr],oe.getToggleRowExpandedProps=[Xt],oe.stateReducers.push(Yt),oe.useInstance.push(lr),oe.prepareRow.push(Qr)};Mt.pluginName="useExpanded";var yr=function(oe,ze){var We=ze.instance;return[oe,{onClick:function(tt){We.toggleAllRowsExpanded()},style:{cursor:"pointer"},title:"Toggle All Rows Expanded"}]},Xt=function(oe,ze){var We=ze.row;return[oe,{onClick:function(){We.toggleRowExpanded()},style:{cursor:"pointer"},title:"Toggle Row Expanded"}]};function Yt(oe,ze,We,tt){if(ze.type===v.init)return a({expanded:{}},oe);if(ze.type===v.resetExpanded)return a({},oe,{expanded:tt.initialState.expanded||{}});if(ze.type===v.toggleAllRowsExpanded){var Ot=ze.value,_t=tt.rowsById,Tt=Object.keys(_t).length===Object.keys(oe.expanded).length;if(Ot!==void 0?Ot:!Tt){var xr={};return Object.keys(_t).forEach(function(Wr){xr[Wr]=!0}),a({},oe,{expanded:xr})}return a({},oe,{expanded:{}})}if(ze.type===v.toggleRowExpanded){var Er,_r=ze.id,on=ze.value,Gr=oe.expanded[_r],Kr=on!==void 0?on:!Gr;if(!Gr&&Kr)return a({},oe,{expanded:a({},oe.expanded,(Er={},Er[_r]=!0,Er))});if(Gr&&!Kr){var Cr=oe.expanded;return Cr[_r],a({},oe,{expanded:s(Cr,[_r].map(d))})}return oe}}function lr(oe){var ze=oe.data,We=oe.rows,tt=oe.rowsById,Ot=oe.manualExpandedKey,_t=Ot===void 0?"expanded":Ot,Tt=oe.paginateExpandedRows,xr=Tt===void 0||Tt,Er=oe.expandSubRows,_r=Er===void 0||Er,on=oe.autoResetExpanded,Gr=on===void 0||on,Kr=oe.getHooks,Cr=oe.plugins,Wr=oe.state.expanded,Yr=oe.dispatch;G(Cr,["useSortBy","useGroupBy","usePivotColumns","useGlobalFilter"],"useExpanded");var bn=B(Gr),On=!!(Object.keys(tt).length&&Object.keys(Wr).length);On&&Object.keys(tt).some(function(Gn){return!Wr[Gn]})&&(On=!1),N(function(){bn()&&Yr({type:v.resetExpanded})},[Yr,ze]);var ei=n.useCallback(function(Gn,ni){Yr({type:v.toggleRowExpanded,id:Gn,value:ni})},[Yr]),jn=n.useCallback(function(Gn){return Yr({type:v.toggleAllRowsExpanded,value:Gn})},[Yr]),Or=n.useMemo(function(){return xr?Rt(We,{manualExpandedKey:_t,expanded:Wr,expandSubRows:_r}):We},[xr,We,_t,Wr,_r]),yn=n.useMemo(function(){return function(Gn){var ni=0;return Object.keys(Gn).forEach(function(sn){var Vn=sn.split(".");ni=Math.max(ni,Vn.length)}),ni}(Wr)},[Wr]),Cn=B(oe),ri=F(Kr().getToggleAllRowsExpandedProps,{instance:Cn()});Object.assign(oe,{preExpandedRows:We,expandedRows:Or,rows:Or,expandedDepth:yn,isAllRowsExpanded:On,toggleRowExpanded:ei,toggleAllRowsExpanded:jn,getToggleAllRowsExpandedProps:ri})}function Qr(oe,ze){var We=ze.instance.getHooks,tt=ze.instance;oe.toggleRowExpanded=function(Ot){return tt.toggleRowExpanded(oe.id,Ot)},oe.getToggleRowExpandedProps=F(We().getToggleRowExpandedProps,{instance:tt,row:oe})}var Xr=function(oe,ze,We){return oe=oe.filter(function(tt){return ze.some(function(Ot){var _t=tt.values[Ot];return String(_t).toLowerCase().includes(String(We).toLowerCase())})})};Xr.autoRemove=function(oe){return!oe};var En=function(oe,ze,We){return oe.filter(function(tt){return ze.some(function(Ot){var _t=tt.values[Ot];return _t===void 0||String(_t).toLowerCase()===String(We).toLowerCase()})})};En.autoRemove=function(oe){return!oe};var Rn=function(oe,ze,We){return oe.filter(function(tt){return ze.some(function(Ot){var _t=tt.values[Ot];return _t===void 0||String(_t)===String(We)})})};Rn.autoRemove=function(oe){return!oe};var rr=function(oe,ze,We){return oe.filter(function(tt){return ze.some(function(Ot){return tt.values[Ot].includes(We)})})};rr.autoRemove=function(oe){return!oe||!oe.length};var Lr=function(oe,ze,We){return oe.filter(function(tt){return ze.some(function(Ot){var _t=tt.values[Ot];return _t&&_t.length&&We.every(function(Tt){return _t.includes(Tt)})})})};Lr.autoRemove=function(oe){return!oe||!oe.length};var ur=function(oe,ze,We){return oe.filter(function(tt){return ze.some(function(Ot){var _t=tt.values[Ot];return _t&&_t.length&&We.some(function(Tt){return _t.includes(Tt)})})})};ur.autoRemove=function(oe){return!oe||!oe.length};var hn=function(oe,ze,We){return oe.filter(function(tt){return ze.some(function(Ot){var _t=tt.values[Ot];return We.includes(_t)})})};hn.autoRemove=function(oe){return!oe||!oe.length};var ti=function(oe,ze,We){return oe.filter(function(tt){return ze.some(function(Ot){return tt.values[Ot]===We})})};ti.autoRemove=function(oe){return oe===void 0};var Hr=function(oe,ze,We){return oe.filter(function(tt){return ze.some(function(Ot){return tt.values[Ot]==We})})};Hr.autoRemove=function(oe){return oe==null};var fi=function(oe,ze,We){var tt=We||[],Ot=tt[0],_t=tt[1];if((Ot=typeof Ot=="number"?Ot:-1/0)>(_t=typeof _t=="number"?_t:1/0)){var Tt=Ot;Ot=_t,_t=Tt}return oe.filter(function(xr){return ze.some(function(Er){var _r=xr.values[Er];return _r>=Ot&&_r<=_t})})};fi.autoRemove=function(oe){return!oe||typeof oe[0]!="number"&&typeof oe[1]!="number"};var Ci=Object.freeze({__proto__:null,text:Xr,exactText:En,exactTextCase:Rn,includes:rr,includesAll:Lr,includesSome:ur,includesValue:hn,exact:ti,equals:Hr,between:fi});v.resetFilters="resetFilters",v.setFilter="setFilter",v.setAllFilters="setAllFilters";var zi=function(oe){oe.stateReducers.push(Ae),oe.useInstance.push($e)};function Ae(oe,ze,We,tt){if(ze.type===v.init)return a({filters:[]},oe);if(ze.type===v.resetFilters)return a({},oe,{filters:tt.initialState.filters||[]});if(ze.type===v.setFilter){var Ot=ze.columnId,_t=ze.filterValue,Tt=tt.allColumns,xr=tt.filterTypes,Er=Tt.find(function(Yr){return Yr.id===Ot});if(!Er)throw new Error("React-Table: Could not find a column with id: "+Ot);var _r=St(Er.filter,xr||{},Ci),on=oe.filters.find(function(Yr){return Yr.id===Ot}),Gr=H(_t,on&&on.value);return Zt(_r.autoRemove,Gr,Er)?a({},oe,{filters:oe.filters.filter(function(Yr){return Yr.id!==Ot})}):a({},oe,on?{filters:oe.filters.map(function(Yr){return Yr.id===Ot?{id:Ot,value:Gr}:Yr})}:{filters:[].concat(oe.filters,[{id:Ot,value:Gr}])})}if(ze.type===v.setAllFilters){var Kr=ze.filters,Cr=tt.allColumns,Wr=tt.filterTypes;return a({},oe,{filters:H(Kr,oe.filters).filter(function(Yr){var bn=Cr.find(function(On){return On.id===Yr.id});return!Zt(St(bn.filter,Wr||{},Ci).autoRemove,Yr.value,bn)})})}}function $e(oe){var ze=oe.data,We=oe.rows,tt=oe.flatRows,Ot=oe.rowsById,_t=oe.allColumns,Tt=oe.filterTypes,xr=oe.manualFilters,Er=oe.defaultCanFilter,_r=Er!==void 0&&Er,on=oe.disableFilters,Gr=oe.state.filters,Kr=oe.dispatch,Cr=oe.autoResetFilters,Wr=Cr===void 0||Cr,Yr=n.useCallback(function(Cn,ri){Kr({type:v.setFilter,columnId:Cn,filterValue:ri})},[Kr]),bn=n.useCallback(function(Cn){Kr({type:v.setAllFilters,filters:Cn})},[Kr]);_t.forEach(function(Cn){var ri=Cn.id,Gn=Cn.accessor,ni=Cn.defaultCanFilter,sn=Cn.disableFilters;Cn.canFilter=Gn?Ne(sn!==!0&&void 0,on!==!0&&void 0,!0):Ne(ni,_r,!1),Cn.setFilter=function(vn){return Yr(Cn.id,vn)};var Vn=Gr.find(function(vn){return vn.id===ri});Cn.filterValue=Vn&&Vn.value});var On=n.useMemo(function(){if(xr||!Gr.length)return[We,tt,Ot];var Cn=[],ri={};return[function Gn(ni,sn){sn===void 0&&(sn=0);var Vn=ni;return(Vn=Gr.reduce(function(vn,Un){var Ti=Un.id,Hi=Un.value,Yn=_t.find(function(xa){return xa.id===Ti});if(!Yn)return vn;sn===0&&(Yn.preFilteredRows=vn);var Fi=St(Yn.filter,Tt||{},Ci);return Fi?(Yn.filteredRows=Fi(vn,[Ti],Hi),Yn.filteredRows):(console.warn("Could not find a valid 'column.filter' for column with the ID: "+Yn.id+"."),vn)},ni)).forEach(function(vn){Cn.push(vn),ri[vn.id]=vn,vn.subRows&&(vn.subRows=vn.subRows&&vn.subRows.length>0?Gn(vn.subRows,sn+1):vn.subRows)}),Vn}(We),Cn,ri]},[xr,Gr,We,tt,Ot,_t,Tt]),ei=On[0],jn=On[1],Or=On[2];n.useMemo(function(){_t.filter(function(Cn){return!Gr.find(function(ri){return ri.id===Cn.id})}).forEach(function(Cn){Cn.preFilteredRows=ei,Cn.filteredRows=ei})},[ei,Gr,_t]);var yn=B(Wr);N(function(){yn()&&Kr({type:v.resetFilters})},[Kr,xr?null:ze]),Object.assign(oe,{preFilteredRows:We,preFilteredFlatRows:tt,preFilteredRowsById:Ot,filteredRows:ei,filteredFlatRows:jn,filteredRowsById:Or,rows:ei,flatRows:jn,rowsById:Or,setFilter:Yr,setAllFilters:bn})}zi.pluginName="useFilters",v.resetGlobalFilter="resetGlobalFilter",v.setGlobalFilter="setGlobalFilter";var je=function(oe){oe.stateReducers.push(et),oe.useInstance.push(ht)};function et(oe,ze,We,tt){if(ze.type===v.resetGlobalFilter)return a({},oe,{globalFilter:tt.initialState.globalFilter||void 0});if(ze.type===v.setGlobalFilter){var Ot=ze.filterValue,_t=tt.userFilterTypes,Tt=St(tt.globalFilter,_t||{},Ci),xr=H(Ot,oe.globalFilter);return Zt(Tt.autoRemove,xr)?(oe.globalFilter,s(oe,["globalFilter"])):a({},oe,{globalFilter:xr})}}function ht(oe){var ze=oe.data,We=oe.rows,tt=oe.flatRows,Ot=oe.rowsById,_t=oe.allColumns,Tt=oe.filterTypes,xr=oe.globalFilter,Er=oe.manualGlobalFilter,_r=oe.state.globalFilter,on=oe.dispatch,Gr=oe.autoResetGlobalFilter,Kr=Gr===void 0||Gr,Cr=oe.disableGlobalFilter,Wr=n.useCallback(function(Or){on({type:v.setGlobalFilter,filterValue:Or})},[on]),Yr=n.useMemo(function(){if(Er||_r===void 0)return[We,tt,Ot];var Or=[],yn={},Cn=St(xr,Tt||{},Ci);if(!Cn)return console.warn("Could not find a valid 'globalFilter' option."),We;_t.forEach(function(Gn){var ni=Gn.disableGlobalFilter;Gn.canFilter=Ne(ni!==!0&&void 0,Cr!==!0&&void 0,!0)});var ri=_t.filter(function(Gn){return Gn.canFilter===!0});return[function Gn(ni){return(ni=Cn(ni,ri.map(function(sn){return sn.id}),_r)).forEach(function(sn){Or.push(sn),yn[sn.id]=sn,sn.subRows=sn.subRows&&sn.subRows.length?Gn(sn.subRows):sn.subRows}),ni}(We),Or,yn]},[Er,_r,xr,Tt,_t,We,tt,Ot,Cr]),bn=Yr[0],On=Yr[1],ei=Yr[2],jn=B(Kr);N(function(){jn()&&on({type:v.resetGlobalFilter})},[on,Er?null:ze]),Object.assign(oe,{preGlobalFilteredRows:We,preGlobalFilteredFlatRows:tt,preGlobalFilteredRowsById:Ot,globalFilteredRows:bn,globalFilteredFlatRows:On,globalFilteredRowsById:ei,rows:bn,flatRows:On,rowsById:ei,setGlobalFilter:Wr,disableGlobalFilter:Cr})}function Ct(oe,ze){return ze.reduce(function(We,tt){return We+(typeof tt=="number"?tt:0)},0)}je.pluginName="useGlobalFilter";var Dt=Object.freeze({__proto__:null,sum:Ct,min:function(oe){var ze=oe[0]||0;return oe.forEach(function(We){typeof We=="number"&&(ze=Math.min(ze,We))}),ze},max:function(oe){var ze=oe[0]||0;return oe.forEach(function(We){typeof We=="number"&&(ze=Math.max(ze,We))}),ze},minMax:function(oe){var ze=oe[0]||0,We=oe[0]||0;return oe.forEach(function(tt){typeof tt=="number"&&(ze=Math.min(ze,tt),We=Math.max(We,tt))}),ze+".."+We},average:function(oe){return Ct(0,oe)/oe.length},median:function(oe){if(!oe.length)return null;var ze=Math.floor(oe.length/2),We=[].concat(oe).sort(function(tt,Ot){return tt-Ot});return oe.length%2!=0?We[ze]:(We[ze-1]+We[ze])/2},unique:function(oe){return Array.from(new Set(oe).values())},uniqueCount:function(oe){return new Set(oe).size},count:function(oe){return oe.length}}),Et=[],Je={};v.resetGroupBy="resetGroupBy",v.setGroupBy="setGroupBy",v.toggleGroupBy="toggleGroupBy";var ye=function(oe){oe.getGroupByToggleProps=[fe],oe.stateReducers.push(we),oe.visibleColumnsDeps.push(function(ze,We){var tt=We.instance;return[].concat(ze,[tt.state.groupBy])}),oe.visibleColumns.push(Ce),oe.useInstance.push(nt),oe.prepareRow.push(dt)};ye.pluginName="useGroupBy";var fe=function(oe,ze){var We=ze.header;return[oe,{onClick:We.canGroupBy?function(tt){tt.persist(),We.toggleGroupBy()}:void 0,style:{cursor:We.canGroupBy?"pointer":void 0},title:"Toggle GroupBy"}]};function we(oe,ze,We,tt){if(ze.type===v.init)return a({groupBy:[]},oe);if(ze.type===v.resetGroupBy)return a({},oe,{groupBy:tt.initialState.groupBy||[]});if(ze.type===v.setGroupBy)return a({},oe,{groupBy:ze.value});if(ze.type===v.toggleGroupBy){var Ot=ze.columnId,_t=ze.value,Tt=_t!==void 0?_t:!oe.groupBy.includes(Ot);return a({},oe,Tt?{groupBy:[].concat(oe.groupBy,[Ot])}:{groupBy:oe.groupBy.filter(function(xr){return xr!==Ot})})}}function Ce(oe,ze){var We=ze.instance.state.groupBy,tt=We.map(function(_t){return oe.find(function(Tt){return Tt.id===_t})}).filter(Boolean),Ot=oe.filter(function(_t){return!We.includes(_t.id)});return(oe=[].concat(tt,Ot)).forEach(function(_t){_t.isGrouped=We.includes(_t.id),_t.groupedIndex=We.indexOf(_t.id)}),oe}var Le={};function nt(oe){var ze=oe.data,We=oe.rows,tt=oe.flatRows,Ot=oe.rowsById,_t=oe.allColumns,Tt=oe.flatHeaders,xr=oe.groupByFn,Er=xr===void 0?ct:xr,_r=oe.manualGroupBy,on=oe.aggregations,Gr=on===void 0?Le:on,Kr=oe.plugins,Cr=oe.state.groupBy,Wr=oe.dispatch,Yr=oe.autoResetGroupBy,bn=Yr===void 0||Yr,On=oe.disableGroupBy,ei=oe.defaultCanGroupBy,jn=oe.getHooks;G(Kr,["useColumnOrder","useFilters"],"useGroupBy");var Or=B(oe);_t.forEach(function(Yn){var Fi=Yn.accessor,xa=Yn.defaultGroupBy,wo=Yn.disableGroupBy;Yn.canGroupBy=Fi?Ne(Yn.canGroupBy,wo!==!0&&void 0,On!==!0&&void 0,!0):Ne(Yn.canGroupBy,xa,ei,!1),Yn.canGroupBy&&(Yn.toggleGroupBy=function(){return oe.toggleGroupBy(Yn.id)}),Yn.Aggregated=Yn.Aggregated||Yn.Cell});var yn=n.useCallback(function(Yn,Fi){Wr({type:v.toggleGroupBy,columnId:Yn,value:Fi})},[Wr]),Cn=n.useCallback(function(Yn){Wr({type:v.setGroupBy,value:Yn})},[Wr]);Tt.forEach(function(Yn){Yn.getGroupByToggleProps=F(jn().getGroupByToggleProps,{instance:Or(),header:Yn})});var ri=n.useMemo(function(){if(_r||!Cr.length)return[We,tt,Ot,Et,Je,tt,Ot];var Yn=Cr.filter(function(wi){return _t.find(function(Vs){return Vs.id===wi})}),Fi=[],xa={},wo=[],Wn={},sa=[],Na={},eo=function wi(Vs,ps,so){if(ps===void 0&&(ps=0),ps===Yn.length)return Vs.map(function(Js){return a({},Js,{depth:ps})});var rs=Yn[ps],zu=Er(Vs,rs);return Object.entries(zu).map(function(Js,Ac){var Ts=Js[0],Qs=Js[1],qs=rs+":"+Ts,Lu=wi(Qs,ps+1,qs=so?so+">"+qs:qs),ll=ps?it(Qs,"leafRows"):Qs,Ml=function(Ua,Zl,Nu){var Bo={};return _t.forEach(function(la){if(Yn.includes(la.id))Bo[la.id]=Zl[0]?Zl[0].values[la.id]:null;else{var ul=typeof la.aggregate=="function"?la.aggregate:Gr[la.aggregate]||Dt[la.aggregate];if(ul){var Bu=Zl.map(function(As){return As.values[la.id]}),sc=Ua.map(function(As){var ds=As.values[la.id];if(!Nu&&la.aggregateValue){var fu=typeof la.aggregateValue=="function"?la.aggregateValue:Gr[la.aggregateValue]||Dt[la.aggregateValue];if(!fu)throw console.info({column:la}),new Error("React Table: Invalid column.aggregateValue option for column listed above");ds=fu(ds,As,la)}return ds});Bo[la.id]=ul(sc,Bu)}else{if(la.aggregate)throw console.info({column:la}),new Error("React Table: Invalid column.aggregate option for column listed above");Bo[la.id]=null}}}),Bo}(ll,Qs,ps),$u={id:qs,isGrouped:!0,groupByID:rs,groupByVal:Ts,values:Ml,subRows:Lu,leafRows:ll,depth:ps,index:Ac};return Lu.forEach(function(Ua){Fi.push(Ua),xa[Ua.id]=Ua,Ua.isGrouped?(wo.push(Ua),Wn[Ua.id]=Ua):(sa.push(Ua),Na[Ua.id]=Ua)}),$u})}(We);return eo.forEach(function(wi){Fi.push(wi),xa[wi.id]=wi,wi.isGrouped?(wo.push(wi),Wn[wi.id]=wi):(sa.push(wi),Na[wi.id]=wi)}),[eo,Fi,xa,wo,Wn,sa,Na]},[_r,Cr,We,tt,Ot,_t,Gr,Er]),Gn=ri[0],ni=ri[1],sn=ri[2],Vn=ri[3],vn=ri[4],Un=ri[5],Ti=ri[6],Hi=B(bn);N(function(){Hi()&&Wr({type:v.resetGroupBy})},[Wr,_r?null:ze]),Object.assign(oe,{preGroupedRows:We,preGroupedFlatRow:tt,preGroupedRowsById:Ot,groupedRows:Gn,groupedFlatRows:ni,groupedRowsById:sn,onlyGroupedFlatRows:Vn,onlyGroupedRowsById:vn,nonGroupedFlatRows:Un,nonGroupedRowsById:Ti,rows:Gn,flatRows:ni,rowsById:sn,toggleGroupBy:yn,setGroupBy:Cn})}function dt(oe){oe.allCells.forEach(function(ze){var We;ze.isGrouped=ze.column.isGrouped&&ze.column.id===oe.groupByID,ze.isPlaceholder=!ze.isGrouped&&ze.column.isGrouped,ze.isAggregated=!ze.isGrouped&&!ze.isPlaceholder&&((We=oe.subRows)==null?void 0:We.length)})}function ct(oe,ze){return oe.reduce(function(We,tt,Ot){var _t=""+tt.values[ze];return We[_t]=Array.isArray(We[_t])?We[_t]:[],We[_t].push(tt),We},{})}var Xe=/([0-9]+)/gm;function pt(oe,ze){return oe===ze?0:oe>ze?1:-1}function vt(oe,ze,We){return[oe.values[We],ze.values[We]]}function ar(oe){return typeof oe=="number"?isNaN(oe)||oe===1/0||oe===-1/0?"":String(oe):typeof oe=="string"?oe:""}var Vt=Object.freeze({__proto__:null,alphanumeric:function(oe,ze,We){var tt=vt(oe,ze,We),Ot=tt[0],_t=tt[1];for(Ot=ar(Ot),_t=ar(_t),Ot=Ot.split(Xe).filter(Boolean),_t=_t.split(Xe).filter(Boolean);Ot.length&&_t.length;){var Tt=Ot.shift(),xr=_t.shift(),Er=parseInt(Tt,10),_r=parseInt(xr,10),on=[Er,_r].sort();if(isNaN(on[0])){if(Tt>xr)return 1;if(xr>Tt)return-1}else{if(isNaN(on[1]))return isNaN(Er)?-1:1;if(Er>_r)return 1;if(_r>Er)return-1}}return Ot.length-_t.length},datetime:function(oe,ze,We){var tt=vt(oe,ze,We),Ot=tt[0],_t=tt[1];return pt(Ot=Ot.getTime(),_t=_t.getTime())},basic:function(oe,ze,We){var tt=vt(oe,ze,We);return pt(tt[0],tt[1])},string:function(oe,ze,We){var tt=vt(oe,ze,We),Ot=tt[0],_t=tt[1];for(Ot=Ot.split("").filter(Boolean),_t=_t.split("").filter(Boolean);Ot.length&&_t.length;){var Tt=Ot.shift(),xr=_t.shift(),Er=Tt.toLowerCase(),_r=xr.toLowerCase();if(Er>_r)return 1;if(_r>Er)return-1;if(Tt>xr)return 1;if(xr>Tt)return-1}return Ot.length-_t.length},number:function(oe,ze,We){var tt=vt(oe,ze,We),Ot=tt[0],_t=tt[1],Tt=/[^0-9.]/gi;return pt(Ot=Number(String(Ot).replace(Tt,"")),_t=Number(String(_t).replace(Tt,"")))}});v.resetSortBy="resetSortBy",v.setSortBy="setSortBy",v.toggleSortBy="toggleSortBy",v.clearSortBy="clearSortBy",P.sortType="alphanumeric",P.sortDescFirst=!1;var fr=function(oe){oe.getSortByToggleProps=[qr],oe.stateReducers.push(Ar),oe.useInstance.push(ln)};fr.pluginName="useSortBy";var qr=function(oe,ze){var We=ze.instance,tt=ze.column,Ot=We.isMultiSortEvent,_t=Ot===void 0?function(Tt){return Tt.shiftKey}:Ot;return[oe,{onClick:tt.canSort?function(Tt){Tt.persist(),tt.toggleSortBy(void 0,!We.disableMultiSort&&_t(Tt))}:void 0,style:{cursor:tt.canSort?"pointer":void 0},title:tt.canSort?"Toggle SortBy":void 0}]};function Ar(oe,ze,We,tt){if(ze.type===v.init)return a({sortBy:[]},oe);if(ze.type===v.resetSortBy)return a({},oe,{sortBy:tt.initialState.sortBy||[]});if(ze.type===v.clearSortBy)return a({},oe,{sortBy:oe.sortBy.filter(function(Or){return Or.id!==ze.columnId})});if(ze.type===v.setSortBy)return a({},oe,{sortBy:ze.sortBy});if(ze.type===v.toggleSortBy){var Ot,_t=ze.columnId,Tt=ze.desc,xr=ze.multi,Er=tt.allColumns,_r=tt.disableMultiSort,on=tt.disableSortRemove,Gr=tt.disableMultiRemove,Kr=tt.maxMultiSortColCount,Cr=Kr===void 0?Number.MAX_SAFE_INTEGER:Kr,Wr=oe.sortBy,Yr=Er.find(function(Or){return Or.id===_t}).sortDescFirst,bn=Wr.find(function(Or){return Or.id===_t}),On=Wr.findIndex(function(Or){return Or.id===_t}),ei=Tt!=null,jn=[];return(Ot=!_r&&xr?bn?"toggle":"add":On!==Wr.length-1||Wr.length!==1?"replace":bn?"toggle":"replace")!="toggle"||on||ei||xr&&Gr||!(bn&&bn.desc&&!Yr||!bn.desc&&Yr)||(Ot="remove"),Ot==="replace"?jn=[{id:_t,desc:ei?Tt:Yr}]:Ot==="add"?(jn=[].concat(Wr,[{id:_t,desc:ei?Tt:Yr}])).splice(0,jn.length-Cr):Ot==="toggle"?jn=Wr.map(function(Or){return Or.id===_t?a({},Or,{desc:ei?Tt:!bn.desc}):Or}):Ot==="remove"&&(jn=Wr.filter(function(Or){return Or.id!==_t})),a({},oe,{sortBy:jn})}}function ln(oe){var ze=oe.data,We=oe.rows,tt=oe.flatRows,Ot=oe.allColumns,_t=oe.orderByFn,Tt=_t===void 0?gn:_t,xr=oe.sortTypes,Er=oe.manualSortBy,_r=oe.defaultCanSort,on=oe.disableSortBy,Gr=oe.flatHeaders,Kr=oe.state.sortBy,Cr=oe.dispatch,Wr=oe.plugins,Yr=oe.getHooks,bn=oe.autoResetSortBy,On=bn===void 0||bn;G(Wr,["useFilters","useGlobalFilter","useGroupBy","usePivotColumns"],"useSortBy");var ei=n.useCallback(function(ni){Cr({type:v.setSortBy,sortBy:ni})},[Cr]),jn=n.useCallback(function(ni,sn,Vn){Cr({type:v.toggleSortBy,columnId:ni,desc:sn,multi:Vn})},[Cr]),Or=B(oe);Gr.forEach(function(ni){var sn=ni.accessor,Vn=ni.canSort,vn=ni.disableSortBy,Un=ni.id,Ti=sn?Ne(vn!==!0&&void 0,on!==!0&&void 0,!0):Ne(_r,Vn,!1);ni.canSort=Ti,ni.canSort&&(ni.toggleSortBy=function(Yn,Fi){return jn(ni.id,Yn,Fi)},ni.clearSortBy=function(){Cr({type:v.clearSortBy,columnId:ni.id})}),ni.getSortByToggleProps=F(Yr().getSortByToggleProps,{instance:Or(),column:ni});var Hi=Kr.find(function(Yn){return Yn.id===Un});ni.isSorted=!!Hi,ni.sortedIndex=Kr.findIndex(function(Yn){return Yn.id===Un}),ni.isSortedDesc=ni.isSorted?Hi.desc:void 0});var yn=n.useMemo(function(){if(Er||!Kr.length)return[We,tt];var ni=[],sn=Kr.filter(function(Vn){return Ot.find(function(vn){return vn.id===Vn.id})});return[function Vn(vn){var Un=Tt(vn,sn.map(function(Ti){var Hi=Ot.find(function(xa){return xa.id===Ti.id});if(!Hi)throw new Error("React-Table: Could not find a column with id: "+Ti.id+" while sorting");var Yn=Hi.sortType,Fi=lt(Yn)||(xr||{})[Yn]||Vt[Yn];if(!Fi)throw new Error("React-Table: Could not find a valid sortType of '"+Yn+"' for column '"+Ti.id+"'.");return function(xa,wo){return Fi(xa,wo,Ti.id,Ti.desc)}}),sn.map(function(Ti){var Hi=Ot.find(function(Yn){return Yn.id===Ti.id});return Hi&&Hi.sortInverted?Ti.desc:!Ti.desc}));return Un.forEach(function(Ti){ni.push(Ti),Ti.subRows&&Ti.subRows.length!==0&&(Ti.subRows=Vn(Ti.subRows))}),Un}(We),ni]},[Er,Kr,We,tt,Ot,Tt,xr]),Cn=yn[0],ri=yn[1],Gn=B(On);N(function(){Gn()&&Cr({type:v.resetSortBy})},[Er?null:ze]),Object.assign(oe,{preSortedRows:We,preSortedFlatRows:tt,sortedRows:Cn,sortedFlatRows:ri,rows:Cn,flatRows:ri,setSortBy:ei,toggleSortBy:jn})}function gn(oe,ze,We){return[].concat(oe).sort(function(tt,Ot){for(var _t=0;_t<ze.length;_t+=1){var Tt=ze[_t],xr=We[_t]===!1||We[_t]==="desc",Er=Tt(tt,Ot);if(Er!==0)return xr?-Er:Er}return We[0]?tt.index-Ot.index:Ot.index-tt.index})}v.resetPage="resetPage",v.gotoPage="gotoPage",v.setPageSize="setPageSize";var An=function(oe){oe.stateReducers.push(wn),oe.useInstance.push(Dn)};function wn(oe,ze,We,tt){if(ze.type===v.init)return a({pageSize:10,pageIndex:0},oe);if(ze.type===v.resetPage)return a({},oe,{pageIndex:tt.initialState.pageIndex||0});if(ze.type===v.gotoPage){var Ot=tt.pageCount,_t=tt.page,Tt=H(ze.pageIndex,oe.pageIndex),xr=!1;return Tt>oe.pageIndex?xr=Ot===-1?_t.length>=oe.pageSize:Tt<Ot:Tt<oe.pageIndex&&(xr=Tt>-1),xr?a({},oe,{pageIndex:Tt}):oe}if(ze.type===v.setPageSize){var Er=ze.pageSize,_r=oe.pageSize*oe.pageIndex;return a({},oe,{pageIndex:Math.floor(_r/Er),pageSize:Er})}}function Dn(oe){var ze=oe.rows,We=oe.autoResetPage,tt=We===void 0||We,Ot=oe.manualExpandedKey,_t=Ot===void 0?"expanded":Ot,Tt=oe.plugins,xr=oe.pageCount,Er=oe.paginateExpandedRows,_r=Er===void 0||Er,on=oe.expandSubRows,Gr=on===void 0||on,Kr=oe.state,Cr=Kr.pageSize,Wr=Kr.pageIndex,Yr=Kr.expanded,bn=Kr.globalFilter,On=Kr.filters,ei=Kr.groupBy,jn=Kr.sortBy,Or=oe.dispatch,yn=oe.data,Cn=oe.manualPagination;G(Tt,["useGlobalFilter","useFilters","useGroupBy","useSortBy","useExpanded"],"usePagination");var ri=B(tt);N(function(){ri()&&Or({type:v.resetPage})},[Or,Cn?null:yn,bn,On,ei,jn]);var Gn=Cn?xr:Math.ceil(ze.length/Cr),ni=n.useMemo(function(){return Gn>0?[].concat(new Array(Gn)).fill(null).map(function(Fi,xa){return xa}):[]},[Gn]),sn=n.useMemo(function(){var Fi;if(Cn)Fi=ze;else{var xa=Cr*Wr,wo=xa+Cr;Fi=ze.slice(xa,wo)}return _r?Fi:Rt(Fi,{manualExpandedKey:_t,expanded:Yr,expandSubRows:Gr})},[Gr,Yr,_t,Cn,Wr,Cr,_r,ze]),Vn=Wr>0,vn=Gn===-1?sn.length>=Cr:Wr<Gn-1,Un=n.useCallback(function(Fi){Or({type:v.gotoPage,pageIndex:Fi})},[Or]),Ti=n.useCallback(function(){return Un(function(Fi){return Fi-1})},[Un]),Hi=n.useCallback(function(){return Un(function(Fi){return Fi+1})},[Un]),Yn=n.useCallback(function(Fi){Or({type:v.setPageSize,pageSize:Fi})},[Or]);Object.assign(oe,{pageOptions:ni,pageCount:Gn,page:sn,canPreviousPage:Vn,canNextPage:vn,gotoPage:Un,previousPage:Ti,nextPage:Hi,setPageSize:Yn})}An.pluginName="usePagination",v.resetPivot="resetPivot",v.togglePivot="togglePivot";var $n=function(oe){oe.getPivotToggleProps=[Qa],oe.stateReducers.push(Fn),oe.useInstanceAfterData.push(oo),oe.allColumns.push(Tl),oe.accessValue.push(Ya),oe.materializedColumns.push(Oi),oe.materializedColumnsDeps.push(ku),oe.visibleColumns.push(Ys),oe.visibleColumnsDeps.push(co),oe.useInstance.push(Bs),oe.prepareRow.push($o)};$n.pluginName="usePivotColumns";var kn=[],Qa=function(oe,ze){var We=ze.header;return[oe,{onClick:We.canPivot?function(tt){tt.persist(),We.togglePivot()}:void 0,style:{cursor:We.canPivot?"pointer":void 0},title:"Toggle Pivot"}]};function Fn(oe,ze,We,tt){if(ze.type===v.init)return a({pivotColumns:kn},oe);if(ze.type===v.resetPivot)return a({},oe,{pivotColumns:tt.initialState.pivotColumns||kn});if(ze.type===v.togglePivot){var Ot=ze.columnId,_t=ze.value,Tt=_t!==void 0?_t:!oe.pivotColumns.includes(Ot);return a({},oe,Tt?{pivotColumns:[].concat(oe.pivotColumns,[Ot])}:{pivotColumns:oe.pivotColumns.filter(function(xr){return xr!==Ot})})}}function oo(oe){oe.allColumns.forEach(function(ze){ze.isPivotSource=oe.state.pivotColumns.includes(ze.id)})}function Tl(oe,ze){var We=ze.instance;return oe.forEach(function(tt){tt.isPivotSource=We.state.pivotColumns.includes(tt.id),tt.uniqueValues=new Set}),oe}function Ya(oe,ze){var We=ze.column;return We.uniqueValues&&oe!==void 0&&We.uniqueValues.add(oe),oe}function Oi(oe,ze){var We=ze.instance,tt=We.allColumns,Ot=We.state;if(!Ot.pivotColumns.length||!Ot.groupBy||!Ot.groupBy.length)return oe;var _t=Ot.pivotColumns.map(function(Er){return tt.find(function(_r){return _r.id===Er})}).filter(Boolean),Tt=tt.filter(function(Er){return!Er.isPivotSource&&!Ot.groupBy.includes(Er.id)&&!Ot.pivotColumns.includes(Er.id)}),xr=pe(function Er(_r,on,Gr){_r===void 0&&(_r=0),Gr===void 0&&(Gr=[]);var Kr=_t[_r];return Kr?Array.from(Kr.uniqueValues).sort().map(function(Cr){var Wr=a({},Kr,{Header:Kr.PivotHeader||typeof Kr.header=="string"?Kr.Header+": "+Cr:Cr,isPivotGroup:!0,parent:on,depth:_r,id:on?on.id+"."+Kr.id+"."+Cr:Kr.id+"."+Cr,pivotValue:Cr});return Wr.columns=Er(_r+1,Wr,[].concat(Gr,[function(Yr){return Yr.values[Kr.id]===Cr}])),Wr}):Tt.map(function(Cr){return a({},Cr,{canPivot:!1,isPivoted:!0,parent:on,depth:_r,id:""+(on?on.id+"."+Cr.id:Cr.id),accessor:function(Wr,Yr,bn){if(Gr.every(function(On){return On(bn)}))return bn.values[Cr.id]}})})}());return[].concat(oe,xr)}function ku(oe,ze){var We=ze.instance.state,tt=We.pivotColumns,Ot=We.groupBy;return[].concat(oe,[tt,Ot])}function Ys(oe,ze){var We=ze.instance.state;return oe=oe.filter(function(tt){return!tt.isPivotSource}),We.pivotColumns.length&&We.groupBy&&We.groupBy.length&&(oe=oe.filter(function(tt){return tt.isGrouped||tt.isPivoted})),oe}function co(oe,ze){var We=ze.instance;return[].concat(oe,[We.state.pivotColumns,We.state.groupBy])}function Bs(oe){var ze=oe.columns,We=oe.allColumns,tt=oe.flatHeaders,Ot=oe.getHooks,_t=oe.plugins,Tt=oe.dispatch,xr=oe.autoResetPivot,Er=xr===void 0||xr,_r=oe.manaulPivot,on=oe.disablePivot,Gr=oe.defaultCanPivot;G(_t,["useGroupBy"],"usePivotColumns");var Kr=B(oe);We.forEach(function(Wr){var Yr=Wr.accessor,bn=Wr.defaultPivot,On=Wr.disablePivot;Wr.canPivot=Yr?Ne(Wr.canPivot,On!==!0&&void 0,on!==!0&&void 0,!0):Ne(Wr.canPivot,bn,Gr,!1),Wr.canPivot&&(Wr.togglePivot=function(){return oe.togglePivot(Wr.id)}),Wr.Aggregated=Wr.Aggregated||Wr.Cell}),tt.forEach(function(Wr){Wr.getPivotToggleProps=F(Ot().getPivotToggleProps,{instance:Kr(),header:Wr})});var Cr=B(Er);N(function(){Cr()&&Tt({type:v.resetPivot})},[Tt,_r?null:ze]),Object.assign(oe,{togglePivot:function(Wr,Yr){Tt({type:v.togglePivot,columnId:Wr,value:Yr})}})}function $o(oe){oe.allCells.forEach(function(ze){ze.isPivoted=ze.column.isPivoted})}v.resetSelectedRows="resetSelectedRows",v.toggleAllRowsSelected="toggleAllRowsSelected",v.toggleRowSelected="toggleRowSelected",v.toggleAllPageRowsSelected="toggleAllPageRowsSelected";var Pa=function(oe){oe.getToggleRowSelectedProps=[Ro],oe.getToggleAllRowsSelectedProps=[mo],oe.getToggleAllPageRowsSelectedProps=[Ko],oe.stateReducers.push(Fs),oe.useInstance.push(jf),oe.prepareRow.push(bo)};Pa.pluginName="useRowSelect";var Ro=function(oe,ze){var We=ze.instance,tt=ze.row,Ot=We.manualRowSelectedKey,_t=Ot===void 0?"isSelected":Ot;return[oe,{onChange:function(Tt){tt.toggleRowSelected(Tt.target.checked)},style:{cursor:"pointer"},checked:!(!tt.original||!tt.original[_t])||tt.isSelected,title:"Toggle Row Selected",indeterminate:tt.isSomeSelected}]},mo=function(oe,ze){var We=ze.instance;return[oe,{onChange:function(tt){We.toggleAllRowsSelected(tt.target.checked)},style:{cursor:"pointer"},checked:We.isAllRowsSelected,title:"Toggle All Rows Selected",indeterminate:!!(!We.isAllRowsSelected&&Object.keys(We.state.selectedRowIds).length)}]},Ko=function(oe,ze){var We=ze.instance;return[oe,{onChange:function(tt){We.toggleAllPageRowsSelected(tt.target.checked)},style:{cursor:"pointer"},checked:We.isAllPageRowsSelected,title:"Toggle All Current Page Rows Selected",indeterminate:!!(!We.isAllPageRowsSelected&&We.page.some(function(tt){var Ot=tt.id;return We.state.selectedRowIds[Ot]}))}]};function Fs(oe,ze,We,tt){if(ze.type===v.init)return a({selectedRowIds:{}},oe);if(ze.type===v.resetSelectedRows)return a({},oe,{selectedRowIds:tt.initialState.selectedRowIds||{}});if(ze.type===v.toggleAllRowsSelected){var Ot=ze.value,_t=tt.isAllRowsSelected,Tt=tt.rowsById,xr=tt.nonGroupedRowsById,Er=xr===void 0?Tt:xr,_r=Ot!==void 0?Ot:!_t,on=Object.assign({},oe.selectedRowIds);return _r?Object.keys(Er).forEach(function(Un){on[Un]=!0}):Object.keys(Er).forEach(function(Un){delete on[Un]}),a({},oe,{selectedRowIds:on})}if(ze.type===v.toggleRowSelected){var Gr=ze.id,Kr=ze.value,Cr=tt.rowsById,Wr=tt.selectSubRows,Yr=Wr===void 0||Wr,bn=tt.getSubRows,On=oe.selectedRowIds[Gr],ei=Kr!==void 0?Kr:!On;if(On===ei)return oe;var jn=a({},oe.selectedRowIds);return function Un(Ti){var Hi=Cr[Ti];if(Hi&&(Hi.isGrouped||(ei?jn[Ti]=!0:delete jn[Ti]),Yr&&bn(Hi)))return bn(Hi).forEach(function(Yn){return Un(Yn.id)})}(Gr),a({},oe,{selectedRowIds:jn})}if(ze.type===v.toggleAllPageRowsSelected){var Or=ze.value,yn=tt.page,Cn=tt.rowsById,ri=tt.selectSubRows,Gn=ri===void 0||ri,ni=tt.isAllPageRowsSelected,sn=tt.getSubRows,Vn=Or!==void 0?Or:!ni,vn=a({},oe.selectedRowIds);return yn.forEach(function(Un){return function Ti(Hi){var Yn=Cn[Hi];if(Yn.isGrouped||(Vn?vn[Hi]=!0:delete vn[Hi]),Gn&&sn(Yn))return sn(Yn).forEach(function(Fi){return Ti(Fi.id)})}(Un.id)}),a({},oe,{selectedRowIds:vn})}return oe}function jf(oe){var ze=oe.data,We=oe.rows,tt=oe.getHooks,Ot=oe.plugins,_t=oe.rowsById,Tt=oe.nonGroupedRowsById,xr=Tt===void 0?_t:Tt,Er=oe.autoResetSelectedRows,_r=Er===void 0||Er,on=oe.state.selectedRowIds,Gr=oe.selectSubRows,Kr=Gr===void 0||Gr,Cr=oe.dispatch,Wr=oe.page,Yr=oe.getSubRows;G(Ot,["useFilters","useGroupBy","useSortBy","useExpanded","usePagination"],"useRowSelect");var bn=n.useMemo(function(){var sn=[];return We.forEach(function(Vn){var vn=Kr?function Un(Ti,Hi,Yn){if(Hi[Ti.id])return!0;var Fi=Yn(Ti);if(Fi&&Fi.length){var xa=!0,wo=!1;return Fi.forEach(function(Wn){wo&&!xa||(Un(Wn,Hi,Yn)?wo=!0:xa=!1)}),!!xa||!!wo&&null}return!1}(Vn,on,Yr):!!on[Vn.id];Vn.isSelected=!!vn,Vn.isSomeSelected=vn===null,vn&&sn.push(Vn)}),sn},[We,Kr,on,Yr]),On=!!(Object.keys(xr).length&&Object.keys(on).length),ei=On;On&&Object.keys(xr).some(function(sn){return!on[sn]})&&(On=!1),On||Wr&&Wr.length&&Wr.some(function(sn){var Vn=sn.id;return!on[Vn]})&&(ei=!1);var jn=B(_r);N(function(){jn()&&Cr({type:v.resetSelectedRows})},[Cr,ze]);var Or=n.useCallback(function(sn){return Cr({type:v.toggleAllRowsSelected,value:sn})},[Cr]),yn=n.useCallback(function(sn){return Cr({type:v.toggleAllPageRowsSelected,value:sn})},[Cr]),Cn=n.useCallback(function(sn,Vn){return Cr({type:v.toggleRowSelected,id:sn,value:Vn})},[Cr]),ri=B(oe),Gn=F(tt().getToggleAllRowsSelectedProps,{instance:ri()}),ni=F(tt().getToggleAllPageRowsSelectedProps,{instance:ri()});Object.assign(oe,{selectedFlatRows:bn,isAllRowsSelected:On,isAllPageRowsSelected:ei,toggleRowSelected:Cn,toggleAllRowsSelected:Or,getToggleAllRowsSelectedProps:Gn,getToggleAllPageRowsSelectedProps:ni,toggleAllPageRowsSelected:yn})}function bo(oe,ze){var We=ze.instance;oe.toggleRowSelected=function(tt){return We.toggleRowSelected(oe.id,tt)},oe.getToggleRowSelectedProps=F(We.getHooks().getToggleRowSelectedProps,{instance:We,row:oe})}var Al=function(oe){return{}},No=function(oe){return{}};v.setRowState="setRowState",v.setCellState="setCellState",v.resetRowState="resetRowState";var Ia=function(oe){oe.stateReducers.push(Ga),oe.useInstance.push(Us),oe.prepareRow.push(Iu)};function Ga(oe,ze,We,tt){var Ot=tt.initialRowStateAccessor,_t=Ot===void 0?Al:Ot,Tt=tt.initialCellStateAccessor,xr=Tt===void 0?No:Tt,Er=tt.rowsById;if(ze.type===v.init)return a({rowState:{}},oe);if(ze.type===v.resetRowState)return a({},oe,{rowState:tt.initialState.rowState||{}});if(ze.type===v.setRowState){var _r,on=ze.rowId,Gr=ze.value,Kr=oe.rowState[on]!==void 0?oe.rowState[on]:_t(Er[on]);return a({},oe,{rowState:a({},oe.rowState,(_r={},_r[on]=H(Gr,Kr),_r))})}if(ze.type===v.setCellState){var Cr,Wr,Yr,bn,On,ei=ze.rowId,jn=ze.columnId,Or=ze.value,yn=oe.rowState[ei]!==void 0?oe.rowState[ei]:_t(Er[ei]),Cn=(yn==null||(Cr=yn.cellState)==null?void 0:Cr[jn])!==void 0?yn.cellState[jn]:xr((Wr=Er[ei])==null||(Yr=Wr.cells)==null?void 0:Yr.find(function(ri){return ri.column.id===jn}));return a({},oe,{rowState:a({},oe.rowState,(On={},On[ei]=a({},yn,{cellState:a({},yn.cellState||{},(bn={},bn[jn]=H(Or,Cn),bn))}),On))})}}function Us(oe){var ze=oe.autoResetRowState,We=ze===void 0||ze,tt=oe.data,Ot=oe.dispatch,_t=n.useCallback(function(Er,_r){return Ot({type:v.setRowState,rowId:Er,value:_r})},[Ot]),Tt=n.useCallback(function(Er,_r,on){return Ot({type:v.setCellState,rowId:Er,columnId:_r,value:on})},[Ot]),xr=B(We);N(function(){xr()&&Ot({type:v.resetRowState})},[tt]),Object.assign(oe,{setRowState:_t,setCellState:Tt})}function Iu(oe,ze){var We=ze.instance,tt=We.initialRowStateAccessor,Ot=tt===void 0?Al:tt,_t=We.initialCellStateAccessor,Tt=_t===void 0?No:_t,xr=We.state.rowState;oe&&(oe.state=xr[oe.id]!==void 0?xr[oe.id]:Ot(oe),oe.setState=function(Er){return We.setRowState(oe.id,Er)},oe.cells.forEach(function(Er){oe.state.cellState||(oe.state.cellState={}),Er.state=oe.state.cellState[Er.column.id]!==void 0?oe.state.cellState[Er.column.id]:Tt(Er),Er.setState=function(_r){return We.setCellState(oe.id,Er.column.id,_r)}}))}Ia.pluginName="useRowState",v.resetColumnOrder="resetColumnOrder",v.setColumnOrder="setColumnOrder";var Mu=function(oe){oe.stateReducers.push(Ou),oe.visibleColumnsDeps.push(function(ze,We){var tt=We.instance;return[].concat(ze,[tt.state.columnOrder])}),oe.visibleColumns.push(Ma),oe.useInstance.push(Ru)};function Ou(oe,ze,We,tt){return ze.type===v.init?a({columnOrder:[]},oe):ze.type===v.resetColumnOrder?a({},oe,{columnOrder:tt.initialState.columnOrder||[]}):ze.type===v.setColumnOrder?a({},oe,{columnOrder:H(ze.columnOrder,oe.columnOrder)}):void 0}function Ma(oe,ze){var We=ze.instance.state.columnOrder;if(!We||!We.length)return oe;for(var tt=[].concat(We),Ot=[].concat(oe),_t=[],Tt=function(){var xr=tt.shift(),Er=Ot.findIndex(function(_r){return _r.id===xr});Er>-1&&_t.push(Ot.splice(Er,1)[0])};Ot.length&&tt.length;)Tt();return[].concat(_t,Ot)}function Ru(oe){var ze=oe.dispatch;oe.setColumnOrder=n.useCallback(function(We){return ze({type:v.setColumnOrder,columnOrder:We})},[ze])}Mu.pluginName="useColumnOrder",P.canResize=!0,v.columnStartResizing="columnStartResizing",v.columnResizing="columnResizing",v.columnDoneResizing="columnDoneResizing",v.resetResize="resetResize";var Pc=function(oe){oe.getResizerProps=[Vf],oe.getHeaderProps.push({style:{position:"relative"}}),oe.stateReducers.push(nc),oe.useInstance.push(ic),oe.useInstanceBeforeDimensions.push(Hl)},Vf=function(oe,ze){var We=ze.instance,tt=ze.header,Ot=We.dispatch,_t=function(Tt,xr){var Er=!1;if(Tt.type==="touchstart"){if(Tt.touches&&Tt.touches.length>1)return;Er=!0}var _r,on,Gr=function(jn){var Or=[];return function yn(Cn){Cn.columns&&Cn.columns.length&&Cn.columns.map(yn),Or.push(Cn)}(jn),Or}(xr).map(function(jn){return[jn.id,jn.totalWidth]}),Kr=Er?Math.round(Tt.touches[0].clientX):Tt.clientX,Cr=function(){window.cancelAnimationFrame(_r),_r=null,Ot({type:v.columnDoneResizing})},Wr=function(){window.cancelAnimationFrame(_r),_r=null,Ot({type:v.columnResizing,clientX:on})},Yr=function(jn){on=jn,_r||(_r=window.requestAnimationFrame(Wr))},bn={mouse:{moveEvent:"mousemove",moveHandler:function(jn){return Yr(jn.clientX)},upEvent:"mouseup",upHandler:function(jn){document.removeEventListener("mousemove",bn.mouse.moveHandler),document.removeEventListener("mouseup",bn.mouse.upHandler),Cr()}},touch:{moveEvent:"touchmove",moveHandler:function(jn){return jn.cancelable&&(jn.preventDefault(),jn.stopPropagation()),Yr(jn.touches[0].clientX),!1},upEvent:"touchend",upHandler:function(jn){document.removeEventListener(bn.touch.moveEvent,bn.touch.moveHandler),document.removeEventListener(bn.touch.upEvent,bn.touch.moveHandler),Cr()}}},On=Er?bn.touch:bn.mouse,ei=!!function(){if(typeof Ge=="boolean")return Ge;var jn=!1;try{var Or={get passive(){return jn=!0,!1}};window.addEventListener("test",null,Or),window.removeEventListener("test",null,Or)}catch{jn=!1}return Ge=jn}()&&{passive:!1};document.addEventListener(On.moveEvent,On.moveHandler,ei),document.addEventListener(On.upEvent,On.upHandler,ei),Ot({type:v.columnStartResizing,columnId:xr.id,columnWidth:xr.totalWidth,headerIdWidths:Gr,clientX:Kr})};return[oe,{onMouseDown:function(Tt){return Tt.persist()||_t(Tt,tt)},onTouchStart:function(Tt){return Tt.persist()||_t(Tt,tt)},style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function nc(oe,ze){if(ze.type===v.init)return a({columnResizing:{columnWidths:{}}},oe);if(ze.type===v.resetResize)return a({},oe,{columnResizing:{columnWidths:{}}});if(ze.type===v.columnStartResizing){var We=ze.clientX,tt=ze.columnId,Ot=ze.columnWidth,_t=ze.headerIdWidths;return a({},oe,{columnResizing:a({},oe.columnResizing,{startX:We,headerIdWidths:_t,columnWidth:Ot,isResizingColumn:tt})})}if(ze.type===v.columnResizing){var Tt=ze.clientX,xr=oe.columnResizing,Er=xr.startX,_r=xr.columnWidth,on=xr.headerIdWidths,Gr=(Tt-Er)/_r,Kr={};return(on===void 0?[]:on).forEach(function(Cr){var Wr=Cr[0],Yr=Cr[1];Kr[Wr]=Math.max(Yr+Yr*Gr,0)}),a({},oe,{columnResizing:a({},oe.columnResizing,{columnWidths:a({},oe.columnResizing.columnWidths,{},Kr)})})}return ze.type===v.columnDoneResizing?a({},oe,{columnResizing:a({},oe.columnResizing,{startX:null,isResizingColumn:null})}):void 0}Pc.pluginName="useResizeColumns";var Hl=function(oe){var ze=oe.flatHeaders,We=oe.disableResizing,tt=oe.getHooks,Ot=oe.state.columnResizing,_t=B(oe);ze.forEach(function(Tt){var xr=Ne(Tt.disableResizing!==!0&&void 0,We!==!0&&void 0,!0);Tt.canResize=xr,Tt.width=Ot.columnWidths[Tt.id]||Tt.originalWidth||Tt.width,Tt.isResizing=Ot.isResizingColumn===Tt.id,xr&&(Tt.getResizerProps=F(tt().getResizerProps,{instance:_t(),header:Tt}))})};function ic(oe){var ze=oe.plugins,We=oe.dispatch,tt=oe.autoResetResize,Ot=tt===void 0||tt,_t=oe.columns;G(ze,["useAbsoluteLayout"],"useResizeColumns");var Tt=B(Ot);N(function(){Tt()&&We({type:v.resetResize})},[_t]);var xr=n.useCallback(function(){return We({type:v.resetResize})},[We]);Object.assign(oe,{resetResizing:xr})}var cu={position:"absolute",top:0},ef=function(oe){oe.getTableBodyProps.push(kl),oe.getRowProps.push(kl),oe.getHeaderGroupProps.push(kl),oe.getFooterGroupProps.push(kl),oe.getHeaderProps.push(function(ze,We){var tt=We.column;return[ze,{style:a({},cu,{left:tt.totalLeft+"px",width:tt.totalWidth+"px"})}]}),oe.getCellProps.push(function(ze,We){var tt=We.cell;return[ze,{style:a({},cu,{left:tt.column.totalLeft+"px",width:tt.column.totalWidth+"px"})}]}),oe.getFooterProps.push(function(ze,We){var tt=We.column;return[ze,{style:a({},cu,{left:tt.totalLeft+"px",width:tt.totalWidth+"px"})}]})};ef.pluginName="useAbsoluteLayout";var kl=function(oe,ze){return[oe,{style:{position:"relative",width:ze.instance.totalColumnsWidth+"px"}}]},Il={display:"inline-block",boxSizing:"border-box"},xo=function(oe,ze){return[oe,{style:{display:"flex",width:ze.instance.totalColumnsWidth+"px"}}]},ol=function(oe){oe.getRowProps.push(xo),oe.getHeaderGroupProps.push(xo),oe.getFooterGroupProps.push(xo),oe.getHeaderProps.push(function(ze,We){var tt=We.column;return[ze,{style:a({},Il,{width:tt.totalWidth+"px"})}]}),oe.getCellProps.push(function(ze,We){var tt=We.cell;return[ze,{style:a({},Il,{width:tt.column.totalWidth+"px"})}]}),oe.getFooterProps.push(function(ze,We){var tt=We.column;return[ze,{style:a({},Il,{width:tt.totalWidth+"px"})}]})};function $i(oe){oe.getTableProps.push(ac),oe.getRowProps.push(sl),oe.getHeaderGroupProps.push(sl),oe.getFooterGroupProps.push(sl),oe.getHeaderProps.push(ra),oe.getCellProps.push(Ji),oe.getFooterProps.push(js)}ol.pluginName="useBlockLayout",$i.pluginName="useFlexLayout";var ac=function(oe,ze){return[oe,{style:{minWidth:ze.instance.totalColumnsMinWidth+"px"}}]},sl=function(oe,ze){return[oe,{style:{display:"flex",flex:"1 0 auto",minWidth:ze.instance.totalColumnsMinWidth+"px"}}]},ra=function(oe,ze){var We=ze.column;return[oe,{style:{boxSizing:"border-box",flex:We.totalFlexWidth?We.totalFlexWidth+" 0 auto":void 0,minWidth:We.totalMinWidth+"px",width:We.totalWidth+"px"}}]},Ji=function(oe,ze){var We=ze.cell;return[oe,{style:{boxSizing:"border-box",flex:We.column.totalFlexWidth+" 0 auto",minWidth:We.column.totalMinWidth+"px",width:We.column.totalWidth+"px"}}]},js=function(oe,ze){var We=ze.column;return[oe,{style:{boxSizing:"border-box",flex:We.totalFlexWidth?We.totalFlexWidth+" 0 auto":void 0,minWidth:We.totalMinWidth+"px",width:We.totalWidth+"px"}}]};function aa(oe){oe.stateReducers.push(tf),oe.getTableProps.push(Du),oe.getHeaderProps.push(oc),oe.getRowProps.push(Tc)}v.columnStartResizing="columnStartResizing",v.columnResizing="columnResizing",v.columnDoneResizing="columnDoneResizing",v.resetResize="resetResize",aa.pluginName="useGridLayout";var Du=function(oe,ze){var We=ze.instance;return[oe,{style:{display:"grid",gridTemplateColumns:We.visibleColumns.map(function(tt){var Ot;return We.state.gridLayout.columnWidths[tt.id]?We.state.gridLayout.columnWidths[tt.id]+"px":(Ot=We.state.columnResizing)!=null&&Ot.isResizingColumn?We.state.gridLayout.startWidths[tt.id]+"px":typeof tt.width=="number"?tt.width+"px":tt.width}).join(" ")}}]},oc=function(oe,ze){var We=ze.column;return[oe,{id:"header-cell-"+We.id,style:{position:"sticky",gridColumn:"span "+We.totalVisibleHeaderCount}}]},Tc=function(oe,ze){var We=ze.row;return We.isExpanded?[oe,{style:{gridColumn:"1 / "+(We.cells.length+1)}}]:[oe,{}]};function tf(oe,ze,We,tt){if(ze.type===v.init)return a({gridLayout:{columnWidths:{}}},oe);if(ze.type===v.resetResize)return a({},oe,{gridLayout:{columnWidths:{}}});if(ze.type===v.columnStartResizing){var Ot=ze.columnId,_t=ze.headerIdWidths,Tt=Wl(Ot);if(Tt!==void 0){var xr=tt.visibleColumns.reduce(function(Or,yn){var Cn;return a({},Or,((Cn={})[yn.id]=Wl(yn.id),Cn))},{}),Er=tt.visibleColumns.reduce(function(Or,yn){var Cn;return a({},Or,((Cn={})[yn.id]=yn.minWidth,Cn))},{}),_r=tt.visibleColumns.reduce(function(Or,yn){var Cn;return a({},Or,((Cn={})[yn.id]=yn.maxWidth,Cn))},{}),on=_t.map(function(Or){var yn=Or[0];return[yn,Wl(yn)]});return a({},oe,{gridLayout:a({},oe.gridLayout,{startWidths:xr,minWidths:Er,maxWidths:_r,headerIdGridWidths:on,columnWidth:Tt})})}return oe}if(ze.type===v.columnResizing){var Gr=ze.clientX,Kr=oe.columnResizing.startX,Cr=oe.gridLayout,Wr=Cr.columnWidth,Yr=Cr.minWidths,bn=Cr.maxWidths,On=Cr.headerIdGridWidths,ei=(Gr-Kr)/Wr,jn={};return(On===void 0?[]:On).forEach(function(Or){var yn=Or[0],Cn=Or[1];jn[yn]=Math.min(Math.max(Yr[yn],Cn+Cn*ei),bn[yn])}),a({},oe,{gridLayout:a({},oe.gridLayout,{columnWidths:a({},oe.gridLayout.columnWidths,{},jn)})})}return ze.type===v.columnDoneResizing?a({},oe,{gridLayout:a({},oe.gridLayout,{startWidths:{},minWidths:{},maxWidths:{}})}):void 0}function Wl(oe){var ze,We=(ze=document.getElementById("header-cell-"+oe))==null?void 0:ze.offsetWidth;if(We!==void 0)return We}r._UNSTABLE_usePivotColumns=$n,r.actions=v,r.defaultColumn=P,r.defaultGroupByFn=ct,r.defaultOrderByFn=gn,r.defaultRenderer=S,r.emptyRenderer=A,r.ensurePluginOrder=G,r.flexRender=X,r.functionalUpdate=H,r.loopHooks=re,r.makePropGetter=F,r.makeRenderer=z,r.reduceHooks=K,r.safeUseLayoutEffect=$,r.useAbsoluteLayout=ef,r.useAsyncDebounce=function(oe,ze){ze===void 0&&(ze=0);var We=n.useRef({}),tt=B(oe),Ot=B(ze);return n.useCallback(function(){var _t=l(regeneratorRuntime.mark(function Tt(){var xr,Er,_r,on=arguments;return regeneratorRuntime.wrap(function(Gr){for(;;)switch(Gr.prev=Gr.next){case 0:for(xr=on.length,Er=new Array(xr),_r=0;_r<xr;_r++)Er[_r]=on[_r];return We.current.promise||(We.current.promise=new Promise(function(Kr,Cr){We.current.resolve=Kr,We.current.reject=Cr})),We.current.timeout&&clearTimeout(We.current.timeout),We.current.timeout=setTimeout(l(regeneratorRuntime.mark(function Kr(){return regeneratorRuntime.wrap(function(Cr){for(;;)switch(Cr.prev=Cr.next){case 0:return delete We.current.timeout,Cr.prev=1,Cr.t0=We.current,Cr.next=5,tt().apply(void 0,Er);case 5:Cr.t1=Cr.sent,Cr.t0.resolve.call(Cr.t0,Cr.t1),Cr.next=12;break;case 9:Cr.prev=9,Cr.t2=Cr.catch(1),We.current.reject(Cr.t2);case 12:return Cr.prev=12,delete We.current.promise,Cr.finish(12);case 15:case"end":return Cr.stop()}},Kr,null,[[1,9,12,15]])})),Ot()),Gr.abrupt("return",We.current.promise);case 5:case"end":return Gr.stop()}},Tt)}));return function(){return _t.apply(this,arguments)}}(),[tt,Ot])},r.useBlockLayout=ol,r.useColumnOrder=Mu,r.useExpanded=Mt,r.useFilters=zi,r.useFlexLayout=$i,r.useGetLatest=B,r.useGlobalFilter=je,r.useGridLayout=aa,r.useGroupBy=ye,r.useMountedLayoutEffect=N,r.usePagination=An,r.useResizeColumns=Pc,r.useRowSelect=Pa,r.useRowState=Ia,r.useSortBy=fr,r.useTable=function(oe){for(var ze=arguments.length,We=new Array(ze>1?ze-1:0),tt=1;tt<ze;tt++)We[tt-1]=arguments[tt];oe=ka(oe),We=[an].concat(We);var Ot=n.useRef({}),_t=B(Ot.current);Object.assign(_t(),a({},oe,{plugins:We,hooks:Qn()})),We.filter(Boolean).forEach(function(Wn){Wn(_t().hooks)});var Tt=B(_t().hooks);_t().getHooks=Tt,delete _t().hooks,Object.assign(_t(),K(Tt().useOptions,ka(oe)));var xr=_t(),Er=xr.data,_r=xr.columns,on=xr.initialState,Gr=xr.defaultColumn,Kr=xr.getSubRows,Cr=xr.getRowId,Wr=xr.stateReducer,Yr=xr.useControlledState,bn=B(Wr),On=n.useCallback(function(Wn,sa){if(!sa.type)throw console.info({action:sa}),new Error("Unknown Action 👆");return[].concat(Tt().stateReducers,Array.isArray(bn())?bn():[bn()]).reduce(function(Na,eo){return eo(Na,sa,Wn,_t())||Na},Wn)},[Tt,bn,_t]),ei=n.useReducer(On,void 0,function(){return On(on,{type:v.init})}),jn=ei[0],Or=ei[1],yn=K([].concat(Tt().useControlledState,[Yr]),jn,{instance:_t()});Object.assign(_t(),{state:yn,dispatch:Or});var Cn=n.useMemo(function(){return te(K(Tt().columns,_r,{instance:_t()}))},[Tt,_t,_r].concat(K(Tt().columnsDeps,[],{instance:_t()})));_t().columns=Cn;var ri=n.useMemo(function(){return K(Tt().allColumns,pe(Cn),{instance:_t()}).map(ke)},[Cn,Tt,_t].concat(K(Tt().allColumnsDeps,[],{instance:_t()})));_t().allColumns=ri;var Gn=n.useMemo(function(){for(var Wn=[],sa=[],Na={},eo=[].concat(ri);eo.length;){var wi=eo.shift();dr({data:Er,rows:Wn,flatRows:sa,rowsById:Na,column:wi,getRowId:Cr,getSubRows:Kr,accessValueHooks:Tt().accessValue,getInstance:_t})}return[Wn,sa,Na]},[ri,Er,Cr,Kr,Tt,_t]),ni=Gn[0],sn=Gn[1],Vn=Gn[2];Object.assign(_t(),{rows:ni,initialRows:[].concat(ni),flatRows:sn,rowsById:Vn}),re(Tt().useInstanceAfterData,_t());var vn=n.useMemo(function(){return K(Tt().visibleColumns,ri,{instance:_t()}).map(function(Wn){return Pe(Wn,Gr)})},[Tt,ri,_t,Gr].concat(K(Tt().visibleColumnsDeps,[],{instance:_t()})));ri=n.useMemo(function(){var Wn=[].concat(vn);return ri.forEach(function(sa){Wn.find(function(Na){return Na.id===sa.id})||Wn.push(sa)}),Wn},[ri,vn]),_t().allColumns=ri;var Un=n.useMemo(function(){return K(Tt().headerGroups,ge(vn,Gr),_t())},[Tt,vn,Gr,_t].concat(K(Tt().headerGroupsDeps,[],{instance:_t()})));_t().headerGroups=Un;var Ti=n.useMemo(function(){return Un.length?Un[0].headers:[]},[Un]);_t().headers=Ti,_t().flatHeaders=Un.reduce(function(Wn,sa){return[].concat(Wn,sa.headers)},[]),re(Tt().useInstanceBeforeDimensions,_t());var Hi=vn.filter(function(Wn){return Wn.isVisible}).map(function(Wn){return Wn.id}).sort().join("_");vn=n.useMemo(function(){return vn.filter(function(Wn){return Wn.isVisible})},[vn,Hi]),_t().visibleColumns=vn;var Yn=Ka(Ti),Fi=Yn[0],xa=Yn[1],wo=Yn[2];return _t().totalColumnsMinWidth=Fi,_t().totalColumnsWidth=xa,_t().totalColumnsMaxWidth=wo,re(Tt().useInstance,_t()),[].concat(_t().flatHeaders,_t().allColumns).forEach(function(Wn){Wn.render=z(_t(),Wn),Wn.getHeaderProps=F(Tt().getHeaderProps,{instance:_t(),column:Wn}),Wn.getFooterProps=F(Tt().getFooterProps,{instance:_t(),column:Wn})}),_t().headerGroups=n.useMemo(function(){return Un.filter(function(Wn,sa){return Wn.headers=Wn.headers.filter(function(Na){return Na.headers?function eo(wi){return wi.filter(function(Vs){return Vs.headers?eo(Vs.headers):Vs.isVisible}).length}(Na.headers):Na.isVisible}),!!Wn.headers.length&&(Wn.getHeaderGroupProps=F(Tt().getHeaderGroupProps,{instance:_t(),headerGroup:Wn,index:sa}),Wn.getFooterGroupProps=F(Tt().getFooterGroupProps,{instance:_t(),headerGroup:Wn,index:sa}),!0)})},[Un,_t,Tt]),_t().footerGroups=[].concat(_t().headerGroups).reverse(),_t().prepareRow=n.useCallback(function(Wn){Wn.getRowProps=F(Tt().getRowProps,{instance:_t(),row:Wn}),Wn.allCells=ri.map(function(sa){var Na=Wn.values[sa.id],eo={column:sa,row:Wn,value:Na};return eo.getCellProps=F(Tt().getCellProps,{instance:_t(),cell:eo}),eo.render=z(_t(),sa,{row:Wn,cell:eo,value:Na}),eo}),Wn.cells=vn.map(function(sa){return Wn.allCells.find(function(Na){return Na.column.id===sa.id})}),re(Tt().prepareRow,Wn,{instance:_t()})},[Tt,_t,ri,vn]),_t().getTableProps=F(Tt().getTableProps,{instance:_t()}),_t().getTableBodyProps=F(Tt().getTableBodyProps,{instance:_t()}),re(Tt().useFinalInstance,_t()),_t()},Object.defineProperty(r,"__esModule",{value:!0})})})(mk,mk.exports);var Gfe=mk.exports;Pj.exports=Gfe;var Qv=Pj.exports;const Hfe=({onClick:e,children:t,confirmMessage:r,type:n,...i})=>{const[l,a]=Ee.useState(!1),s=Ee.useRef(null),d=Ee.useCallback(S=>{S.preventDefault(),a(!0),s.current=setTimeout(a,5e3,!1)},[s]),v=Ee.useCallback(S=>{a(!1),e&&e(S)},[e]);return Ee.useEffect(()=>()=>clearTimeout(s.current),[s]),ae("button",{onClick:l?n==="submit"?null:v:d,...i,type:l?n:"button",children:Ft("div",{className:"relative w-full",children:[l?ae("div",{className:"absolute top-0 left-0 right-0 bottom-0 flex items-center overflow-hidden",children:ae("div",{children:r})}):null,ae("div",{style:{color:l?"transparent":null},children:t})]})})},bh=({children:e,type:t="button",showConfirm:r=!1,confirmMessage:n="click to confirm",themeOptions:i={},...l})=>{let s=Mo().button(i);return r?ae(Hfe,{type:t,...l,confirmMessage:n,className:`${s.button}`,children:e}):ae("button",{type:t,...l,className:`${s.button}`,children:e})},Cy=e=>e==null||typeof e=="string"&&!e.length?!1:Array.isArray(e)?e.reduce((t,r)=>t||Cy(r),!1):typeof e=="number"&&isNaN(e)?!1:typeof e=="object"?Object.values(e).reduce((t,r)=>t||Cy(r),!1):!0,R0=Ee.forwardRef(({large:e,small:t,className:r=null,onChange:n,value:i,showClear:l=!1,placeholder:a="type a value...",themeOptions:s={color:"white",size:"small",width:"block"},...d},v)=>{const S=Mo().input(s).input,A=Ee.useCallback(P=>{P.stopPropagation(),n(P.target.value,P)},[n]);return l?Ft(Pu,{children:[ae("input",{...d,ref:v,onChange:A,value:Cy(i)?i:"",className:`${r||S} `,placeholder:a}),Cy(i)?ae("div",{className:`absolute right-0 ${t?"mr-1":"mr-2"} top-0 bottom-0 flex items-center`,children:ae("div",{className:`
                ${S.menuBgActive} ${S.menuBgActiveHover} ${S.textContrast}
                p-1 flex justify-center items-center rounded cursor-pointer
              `,onClick:()=>n(""),children:Ft("svg",{width:"8",height:"8",children:[ae("line",{x2:"8",y2:"8",style:{stroke:"currentColor",strokeWidth:2}}),ae("line",{y1:"8",x2:"8",style:{stroke:"currentColor",strokeWidth:2}})]})})}):null]}):ae("input",{...d,ref:v,onChange:A,value:Cy(i)?i:"",className:`${r||S} `,placeholder:a})});Ee.forwardRef(({large:e,small:t,className:r="",children:n,onChange:i,value:l,...a},s)=>{const d=Mo(),v=d[`input${dO({large:e,small:t})}`];return ae("textarea",{...a,onChange:S=>i(S.target.value),value:l||"",className:`${v()} ${r}`,ref:s,rows:6,children:n})});Ee.forwardRef(({children:e,hasFocus:t,large:r,small:n,disabled:i=!1,customTheme:l,className:a="",...s},d)=>{const v={...Mo(),...l};return ae("div",{...s,ref:d,className:`
        w-full flex flex-row flex-wrap
        ${i?`${v.inputBgDisabled} ${v.inputBorderDisabled}`:t?`${v.inputBgFocus} ${v.inputBorderFocus}`:`${v.inputBg} ${v.inputBorder}`}
        ${r?"pt-1 pb-2 px-4":n?"pb-1 px-1":"pb-1 px-2"}
        ${r?v.textLarge:n?v.textSmall:v.textBase}
        ${a}
      `,children:e})});const O4=({isPlaceholder:e,children:t,remove:r,edit:n,disabled:i=!1,themeOptions:l})=>{const a=Mo().select(l);return Ft("div",{className:`
        ${e?a.textLight:`${i?a.accent2:r||n?a.menuBgActive:""}
            mr-1 pl-2 ${!i&&(r||n)?"pr-1":"pr-4"}
          `}
        ${a.itemText}
         flex items-center max-w-full
      `,children:[ae("span",{className:a.valueItem,children:t}),e||i||!n?null:ae("div",{className:`
            ${a.menuBgActive} ${a.menuBgActiveHover} ${a.textContrast}
            ml-2 p-1 flex justify-center items-center rounded cursor-pointer
          `,onClick:n,children:Ft("svg",{width:"8",height:"8",children:[ae("line",{x1:"0",y1:"6",x2:"4",y2:"2",style:{stroke:"currentColor",strokeWidth:2}}),ae("line",{x1:"4",y1:"2",x2:"8",y2:"6",style:{stroke:"currentColor",strokeWidth:2}})]})}),e||i||!r?null:ae("div",{className:`
            ${a.menuBgActive} ${a.menuBgActiveHover} ${a.textContrast}
            ${n?"ml-1":"ml-2"} p-1 flex justify-center items-center rounded cursor-pointer
          `,onClick:r,children:Ft("svg",{width:"8",height:"8",children:[ae("line",{x2:"8",y2:"8",style:{stroke:"currentColor",strokeWidth:2}}),ae("line",{y1:"8",x2:"8",style:{stroke:"currentColor",strokeWidth:2}})]})})]})},Wfe=Ee.forwardRef(({children:e,searchable:t,opened:r,direction:n,themeOptions:i={}},l)=>{const a=Mo().select(i);return ae("div",{className:`
      absolute left-0 z-40 overflow-hidden min-w-full
      ${r?"block":"hidden"}
    `,style:n==="down"?{top:"100%"}:{bottom:"100%"},ref:l,children:ae("div",{className:`${a.menuWrapper}`,children:e})})}),$P=e=>e,Zfe=e=>{const{multi:t=!1,searchable:r=!1,domain:n=[],options:i=[],value:l=null,placeholder:a="Select a value...",accessor:s=$P,listAccessor:d=null,autoFocus:v=!1,disabled:S=!1,removable:A=!1,themeOptions:P={},onChange:L=$P,valueAccessor:F=$P,className:K=""}=e,re=Mo().select(P),G=Ee.useRef(),H=Ee.useRef(),B=Ee.useRef(),$=Ee.useRef([]),[N,z]=Fe.useState(!1),[X,te]=Fe.useState("down"),[,pe]=Fe.useState(!1),[ke,Pe]=Fe.useState(""),ge=tr=>{tr.stopPropagation(),z(!0),pe(!0)},Ie=tr=>{N&&H&&H.current.focus(),z(!1)},Ne=()=>{H&&H.focus()};Fe.useEffect(()=>{v&&Ne()},[v]),Fe.useEffect(()=>{const tr=Bt=>{N&&H&&H.current.focus(),z(!1)},br=Bt=>{G&&G.current&&G.current.contains(Bt.target)||tr()};if(document.addEventListener("mousedown",br),B&&B.current&&N&&X==="down"){const Bt=B.current.getBoundingClientRect();Bt.top+Bt.height>window.innerHeight&&te("up")}return()=>{document.removeEventListener("mousedown",br)}},[X,N]);const lt=()=>{let tr=[];return Cy(l)?(Array.isArray(l)?tr=l:tr=[l],St().filter(br=>tr.reduce((Bt,hr)=>Bt||rm(F(br),hr),!1))):[]},it=(tr,br)=>{tr.stopPropagation(),Ie(),br=F(br),t?Cy(l)?l.reduce((Bt,hr)=>Bt&&!rm(hr,br),!0)&&L([...l,br]):L([br]):L(br)},Rt=(tr,br)=>{tr.stopPropagation(),br=F(br),L(t?l.filter(Bt=>!rm(Bt,br)):null)},St=()=>i.length?i:n;let Zt=Fe.useCallback(tr=>{switch(tr.key){case"Space":case"Enter":case"ArrowDown":tr.preventDefault(),N||z(!0),$[0]&&$[0].current&&$[0].current.focus();break;case"ArrowUp":tr.preventDefault(),N||z(!0),$[0]&&$[0].current&&$[0].current.focus();break;case"Escape":tr.preventDefault(),tr.stopPropagation(),N&&z(!1);break}},[N]);const Kt=lt(),Ge=St();let Ye=Ge.filter(tr=>Kt.includes(tr));const Dr=d||s,wr=ke?HS(Ge,ke,{keys:[Dr]}):Ge;return Ft("div",{ref:G,onMouseLeave:tr=>Ie(),children:[ae("div",{className:"cursor-pointer",children:Ft("div",{id:e.id,ref:H,onBlur:tr=>pe(!1),onFocus:tr=>pe(!0),onKeyDown:Zt,disabled:S,tabIndex:S?-1:0,onClick:ge,className:`${re.select} ${K}`,children:[ae("div",{className:"w-11/12 overflow-x-hidden",children:Kt.length?Kt.map((tr,br,Bt)=>ae(O4,{disabled:S,themeOptions:P,remove:A?hr=>Rt(hr,tr):null,children:s(tr,Bt)},br)):ae(O4,{isPlaceholder:!0,themeOptions:P,children:a},"placeholder")}),ae("div",{className:`${re.selectIcon}`})]})}),ae("div",{className:"relative",children:S||!N?null:Ft(Wfe,{opened:N,direction:X,searchable:r,ref:B,themeOptions:P,children:[r?ae("div",{className:"p-2 pt-1 w-full",children:ae(R0,{type:"text",autoFocus:!0,placeholder:"search...",className:"w-full",value:ke,onChange:tr=>Pe(tr)})}):null,wr.length?ae("div",{className:"scrollbar overflow-y-auto",style:{maxHeight:"15rem"},children:wr.map((tr,br)=>ae("div",{ref:Bt=>$.current.push(Bt),onClick:Ye.includes(tr)?Bt=>Bt.stopPropagation():Bt=>it(Bt,tr),className:`${Ye.includes(tr)?`${re.menuItemActive}`:`${re.menuItem}`}`,children:Qt(tr,"OptionComponent")?ae(tr.OptionComponent,{option:tr}):Dr(tr)},`${s(tr)}-${br}`))}):ae("div",{className:"p-1 text-center",children:"No Selections"})]})})]})};Ee.forwardRef(({large:e,small:t,className:r="",labels:n=["False","True"],value:i,onChange:l,disabled:a=!1,autoFocus:s=!1,...d},v)=>{const[S,A]=Ee.useState(!1),[P,L]=Ee.useState(null);Ee.useEffect(()=>{P&&s&&P.focus()},[s,P]);const F=Mo();return ae("div",{...d,onClick:a?null:K=>l(!i),onFocus:K=>A(!a),onBlur:K=>A(!1),className:`
        ${e?`${F.paddingLarge} ${F.textLarge}`:t?`${F.paddingSmall} ${F.textSmall}`:`${F.paddingBase} ${F.textBase}`}
        ${a?`${F.inputBgDisabled} ${F.inputBorderDisabled}`:S?`${F.inputBgFocus} ${F.inputBorderFocus}`:`${F.inputBg} ${F.inputBorder}`}
        ${r}
      `,ref:Ej(v,L),tabIndex:a?"-1":"0",children:Ft("div",{className:"flex",children:[ae("div",{className:"flex-0",children:ae(Xfe,{value:i})}),ae("div",{className:"flex-1 ml-4",children:n[+!!i]})]})})});const Xfe=({value:e})=>{const t=Mo();return ae("div",{className:"px-1 h-full flex justify-center items-center",children:Ft("div",{className:"relative h-3",children:[Ft("div",{className:"relative w-10 h-3 rounded-lg overflow-hidden",children:[ae("div",{className:`absolute top-0 w-20 h-full ${t.accent4}`,style:{left:e?"100%":"0",transition:"left 0.25s"}}),ae("div",{className:`absolute top-0 w-20 h-full ${t.bgInfo}`,style:{right:e?"0":"100%",transition:"right 0.25s"}})]}),ae("div",{className:`absolute h-4 w-4 rounded-lg ${t.booleanInputSlider||t.accent2}`,style:{top:"50%",left:e?"calc(100% - 0.625rem)":"-0.125rem",transform:"translateY(-50%)",transition:"left 0.25s"}})]})})},R4=["http","https","mailto","tel"];function Kfe(e){const t=(e||"").trim(),r=t.charAt(0);if(r==="#"||r==="/")return t;const n=t.indexOf(":");if(n===-1)return t;let i=-1;for(;++i<R4.length;){const l=R4[i];if(n===l.length&&t.slice(0,l.length).toLowerCase()===l)return t}return i=t.indexOf("?"),i!==-1&&n>i||(i=t.indexOf("#"),i!==-1&&n>i)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Yfe=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};const Tj=Xs(Yfe);function rx(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?D4(e.position):"start"in e||"end"in e?D4(e):"line"in e||"column"in e?gk(e):""}function gk(e){return z4(e&&e.line)+":"+z4(e&&e.column)}function D4(e){return gk(e&&e.start)+"-"+gk(e&&e.end)}function z4(e){return e&&typeof e=="number"?e:1}class Mh extends Error{constructor(t,r,n){const i=[null,null];let l={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof r=="string"&&(n=r,r=void 0),typeof n=="string"){const a=n.indexOf(":");a===-1?i[1]=n:(i[0]=n.slice(0,a),i[1]=n.slice(a+1))}r&&("type"in r||"position"in r?r.position&&(l=r.position):"start"in r||"end"in r?l=r:("line"in r||"column"in r)&&(l.start=r)),this.name=rx(r)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=l.start.line,this.column=l.start.column,this.position=l,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}}Mh.prototype.file="";Mh.prototype.name="";Mh.prototype.reason="";Mh.prototype.message="";Mh.prototype.stack="";Mh.prototype.fatal=null;Mh.prototype.column=null;Mh.prototype.line=null;Mh.prototype.source=null;Mh.prototype.ruleId=null;Mh.prototype.position=null;const Zp={basename:Jfe,dirname:Qfe,extname:ehe,join:the,sep:"/"};function Jfe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');n1(e);let r=0,n=-1,i=e.length,l;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(l){r=i+1;break}}else n<0&&(l=!0,n=i+1);return n<0?"":e.slice(r,n)}if(t===e)return"";let a=-1,s=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(l){r=i+1;break}}else a<0&&(l=!0,a=i+1),s>-1&&(e.charCodeAt(i)===t.charCodeAt(s--)?s<0&&(n=i):(s=-1,n=a));return r===n?n=a:n<0&&(n=e.length),e.slice(r,n)}function Qfe(e){if(n1(e),e.length===0)return".";let t=-1,r=e.length,n;for(;--r;)if(e.charCodeAt(r)===47){if(n){t=r;break}}else n||(n=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function ehe(e){n1(e);let t=e.length,r=-1,n=0,i=-1,l=0,a;for(;t--;){const s=e.charCodeAt(t);if(s===47){if(a){n=t+1;break}continue}r<0&&(a=!0,r=t+1),s===46?i<0?i=t:l!==1&&(l=1):i>-1&&(l=-1)}return i<0||r<0||l===0||l===1&&i===r-1&&i===n+1?"":e.slice(i,r)}function the(...e){let t=-1,r;for(;++t<e.length;)n1(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":rhe(r)}function rhe(e){n1(e);const t=e.charCodeAt(0)===47;let r=nhe(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.charCodeAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function nhe(e,t){let r="",n=0,i=-1,l=0,a=-1,s,d;for(;++a<=e.length;){if(a<e.length)s=e.charCodeAt(a);else{if(s===47)break;s=47}if(s===47){if(!(i===a-1||l===1))if(i!==a-1&&l===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){if(d=r.lastIndexOf("/"),d!==r.length-1){d<0?(r="",n=0):(r=r.slice(0,d),n=r.length-1-r.lastIndexOf("/")),i=a,l=0;continue}}else if(r.length>0){r="",n=0,i=a,l=0;continue}}t&&(r=r.length>0?r+"/..":"..",n=2)}else r.length>0?r+="/"+e.slice(i+1,a):r=e.slice(i+1,a),n=a-i-1;i=a,l=0}else s===46&&l>-1?l++:l=-1}return r}function n1(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const ihe={cwd:ahe};function ahe(){return"/"}function yk(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function ohe(e){if(typeof e=="string")e=new URL(e);else if(!yk(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return she(e)}function she(e){if(e.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const t=e.pathname;let r=-1;for(;++r<t.length;)if(t.charCodeAt(r)===37&&t.charCodeAt(r+1)===50){const n=t.charCodeAt(r+2);if(n===70||n===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const NP=["history","path","basename","stem","extname","dirname"];class Aj{constructor(t){let r;t?typeof t=="string"||lhe(t)?r={value:t}:yk(t)?r={path:t}:r=t:r={},this.data={},this.messages=[],this.history=[],this.cwd=ihe.cwd(),this.value,this.stored,this.result,this.map;let n=-1;for(;++n<NP.length;){const l=NP[n];l in r&&r[l]!==void 0&&r[l]!==null&&(this[l]=l==="history"?[...r[l]]:r[l])}let i;for(i in r)NP.includes(i)||(this[i]=r[i])}get path(){return this.history[this.history.length-1]}set path(t){yk(t)&&(t=ohe(t)),FP(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?Zp.dirname(this.path):void 0}set dirname(t){L4(this.basename,"dirname"),this.path=Zp.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?Zp.basename(this.path):void 0}set basename(t){FP(t,"basename"),BP(t,"basename"),this.path=Zp.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?Zp.extname(this.path):void 0}set extname(t){if(BP(t,"extname"),L4(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Zp.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?Zp.basename(this.path,this.extname):void 0}set stem(t){FP(t,"stem"),BP(t,"stem"),this.path=Zp.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t||void 0)}message(t,r,n){const i=new Mh(t,r,n);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,r,n){const i=this.message(t,r,n);return i.fatal=null,i}fail(t,r,n){const i=this.message(t,r,n);throw i.fatal=!0,i}}function BP(e,t){if(e&&e.includes(Zp.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Zp.sep+"`")}function FP(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function L4(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function lhe(e){return Tj(e)}function $4(e){if(e)throw e}var Kw=Object.prototype.hasOwnProperty,kj=Object.prototype.toString,N4=Object.defineProperty,B4=Object.getOwnPropertyDescriptor,F4=function(t){return typeof Array.isArray=="function"?Array.isArray(t):kj.call(t)==="[object Array]"},U4=function(t){if(!t||kj.call(t)!=="[object Object]")return!1;var r=Kw.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&Kw.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var i;for(i in t);return typeof i>"u"||Kw.call(t,i)},j4=function(t,r){N4&&r.name==="__proto__"?N4(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},V4=function(t,r){if(r==="__proto__")if(Kw.call(t,r)){if(B4)return B4(t,r).value}else return;return t[r]},uhe=function e(){var t,r,n,i,l,a,s=arguments[0],d=1,v=arguments.length,S=!1;for(typeof s=="boolean"&&(S=s,s=arguments[1]||{},d=2),(s==null||typeof s!="object"&&typeof s!="function")&&(s={});d<v;++d)if(t=arguments[d],t!=null)for(r in t)n=V4(s,r),i=V4(t,r),s!==i&&(S&&i&&(U4(i)||(l=F4(i)))?(l?(l=!1,a=n&&F4(n)?n:[]):a=n&&U4(n)?n:{},j4(s,{name:r,newValue:e(S,a,i)})):typeof i<"u"&&j4(s,{name:r,newValue:i}));return s};const q4=Xs(uhe);function vk(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function che(){const e=[],t={run:r,use:n};return t;function r(...i){let l=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);s(null,...i);function s(d,...v){const S=e[++l];let A=-1;if(d){a(d);return}for(;++A<i.length;)(v[A]===null||v[A]===void 0)&&(v[A]=i[A]);i=v,S?fhe(S,s)(...v):a(null,...v)}}function n(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function fhe(e,t){let r;return n;function n(...a){const s=e.length>a.length;let d;s&&a.push(i);try{d=e.apply(this,a)}catch(v){const S=v;if(s&&r)throw S;return i(S)}s||(d instanceof Promise?d.then(l,i):d instanceof Error?i(d):l(d))}function i(a,...s){r||(r=!0,t(a,...s))}function l(a){i(null,a)}}const hhe=Mj().freeze(),Ij={}.hasOwnProperty;function Mj(){const e=che(),t=[];let r={},n,i=-1;return l.data=a,l.Parser=void 0,l.Compiler=void 0,l.freeze=s,l.attachers=t,l.use=d,l.parse=v,l.stringify=S,l.run=A,l.runSync=P,l.process=L,l.processSync=F,l;function l(){const K=Mj();let re=-1;for(;++re<t.length;)K.use(...t[re]);return K.data(q4(!0,{},r)),K}function a(K,re){return typeof K=="string"?arguments.length===2?(VP("data",n),r[K]=re,l):Ij.call(r,K)&&r[K]||null:K?(VP("data",n),r=K,l):r}function s(){if(n)return l;for(;++i<t.length;){const[K,...re]=t[i];if(re[0]===!1)continue;re[0]===!0&&(re[0]=void 0);const G=K.call(l,...re);typeof G=="function"&&e.use(G)}return n=!0,i=Number.POSITIVE_INFINITY,l}function d(K,...re){let G;if(VP("use",n),K!=null)if(typeof K=="function")N(K,...re);else if(typeof K=="object")Array.isArray(K)?$(K):B(K);else throw new TypeError("Expected usable value, not `"+K+"`");return G&&(r.settings=Object.assign(r.settings||{},G)),l;function H(z){if(typeof z=="function")N(z);else if(typeof z=="object")if(Array.isArray(z)){const[X,...te]=z;N(X,...te)}else B(z);else throw new TypeError("Expected usable value, not `"+z+"`")}function B(z){$(z.plugins),z.settings&&(G=Object.assign(G||{},z.settings))}function $(z){let X=-1;if(z!=null)if(Array.isArray(z))for(;++X<z.length;){const te=z[X];H(te)}else throw new TypeError("Expected a list of plugins, not `"+z+"`")}function N(z,X){let te=-1,pe;for(;++te<t.length;)if(t[te][0]===z){pe=t[te];break}pe?(vk(pe[1])&&vk(X)&&(X=q4(!0,pe[1],X)),pe[1]=X):t.push([...arguments])}}function v(K){l.freeze();const re=Cb(K),G=l.Parser;return UP("parse",G),G4(G,"parse")?new G(String(re),re).parse():G(String(re),re)}function S(K,re){l.freeze();const G=Cb(re),H=l.Compiler;return jP("stringify",H),H4(K),G4(H,"compile")?new H(K,G).compile():H(K,G)}function A(K,re,G){if(H4(K),l.freeze(),!G&&typeof re=="function"&&(G=re,re=void 0),!G)return new Promise(H);H(null,G);function H(B,$){e.run(K,Cb(re),N);function N(z,X,te){X=X||K,z?$(z):B?B(X):G(null,X,te)}}}function P(K,re){let G,H;return l.run(K,re,B),W4("runSync","run",H),G;function B($,N){$4($),G=N,H=!0}}function L(K,re){if(l.freeze(),UP("process",l.Parser),jP("process",l.Compiler),!re)return new Promise(G);G(null,re);function G(H,B){const $=Cb(K);l.run(l.parse($),$,(z,X,te)=>{if(z||!X||!te)N(z);else{const pe=l.stringify(X,te);pe==null||(mhe(pe)?te.value=pe:te.result=pe),N(z,te)}});function N(z,X){z||!X?B(z):H?H(X):re(null,X)}}}function F(K){let re;l.freeze(),UP("processSync",l.Parser),jP("processSync",l.Compiler);const G=Cb(K);return l.process(G,H),W4("processSync","process",re),G;function H(B){re=!0,$4(B)}}}function G4(e,t){return typeof e=="function"&&e.prototype&&(phe(e.prototype)||t in e.prototype)}function phe(e){let t;for(t in e)if(Ij.call(e,t))return!0;return!1}function UP(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function jP(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function VP(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function H4(e){if(!vk(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function W4(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Cb(e){return dhe(e)?e:new Aj(e)}function dhe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function mhe(e){return typeof e=="string"||Tj(e)}const ghe={};function yhe(e,t){const r=t||ghe,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,i=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return Oj(e,n,i)}function Oj(e,t,r){if(vhe(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Z4(e.children,t,r)}return Array.isArray(e)?Z4(e,t,r):""}function Z4(e,t,r){const n=[];let i=-1;for(;++i<e.length;)n[i]=Oj(e[i],t,r);return n.join("")}function vhe(e){return!!(e&&typeof e=="object")}function sd(e,t,r,n){const i=e.length;let l=0,a;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,r=r>0?r:0,n.length<1e4)a=Array.from(n),a.unshift(t,r),[].splice.apply(e,a);else for(r&&[].splice.apply(e,[t,r]);l<n.length;)a=n.slice(l,l+1e4),a.unshift(t,0),[].splice.apply(e,a),l+=1e4,t+=1e4}function _h(e,t){return e.length>0?(sd(e,e.length,0,t),e):t}const X4={}.hasOwnProperty;function _he(e){const t={};let r=-1;for(;++r<e.length;)bhe(t,e[r]);return t}function bhe(e,t){let r;for(r in t){const i=(X4.call(e,r)?e[r]:void 0)||(e[r]={}),l=t[r];let a;for(a in l){X4.call(i,a)||(i[a]=[]);const s=l[a];xhe(i[a],Array.isArray(s)?s:s?[s]:[])}}}function xhe(e,t){let r=-1;const n=[];for(;++r<t.length;)(t[r].add==="after"?e:n).push(t[r]);sd(e,0,0,n)}const whe=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Yp=Pg(/[A-Za-z]/),_k=Pg(/\d/),She=Pg(/[\dA-Fa-f]/),kf=Pg(/[\dA-Za-z]/),Ehe=Pg(/[!-/:-@[-`{-~]/),K4=Pg(/[#-'*+\--9=?A-Z^-~]/);function bk(e){return e!==null&&(e<32||e===127)}function Sh(e){return e!==null&&(e<0||e===32)}function oa(e){return e!==null&&e<-2}function Cl(e){return e===-2||e===-1||e===32}const Che=Pg(/\s/),Phe=Pg(whe);function Pg(e){return t;function t(r){return r!==null&&e.test(String.fromCharCode(r))}}function Zo(e,t,r,n){const i=n?n-1:Number.POSITIVE_INFINITY;let l=0;return a;function a(d){return Cl(d)?(e.enter(r),s(d)):t(d)}function s(d){return Cl(d)&&l++<i?(e.consume(d),s):(e.exit(r),t(d))}}const The={tokenize:Ahe};function Ahe(e){const t=e.attempt(this.parser.constructs.contentInitial,n,i);let r;return t;function n(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),Zo(e,t,"linePrefix")}function i(s){return e.enter("paragraph"),l(s)}function l(s){const d=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=d),r=d,a(s)}function a(s){if(s===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(s);return}return oa(s)?(e.consume(s),e.exit("chunkText"),l):(e.consume(s),a)}}const khe={tokenize:Ihe},Y4={tokenize:Mhe};function Ihe(e){const t=this,r=[];let n=0,i,l,a;return s;function s(B){if(n<r.length){const $=r[n];return t.containerState=$[1],e.attempt($[0].continuation,d,v)(B)}return v(B)}function d(B){if(n++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&H();const $=t.events.length;let N=$,z;for(;N--;)if(t.events[N][0]==="exit"&&t.events[N][1].type==="chunkFlow"){z=t.events[N][1].end;break}G(n);let X=$;for(;X<t.events.length;)t.events[X][1].end=Object.assign({},z),X++;return sd(t.events,N+1,0,t.events.slice($)),t.events.length=X,v(B)}return s(B)}function v(B){if(n===r.length){if(!i)return P(B);if(i.currentConstruct&&i.currentConstruct.concrete)return F(B);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Y4,S,A)(B)}function S(B){return i&&H(),G(n),P(B)}function A(B){return t.parser.lazy[t.now().line]=n!==r.length,a=t.now().offset,F(B)}function P(B){return t.containerState={},e.attempt(Y4,L,F)(B)}function L(B){return n++,r.push([t.currentConstruct,t.containerState]),P(B)}function F(B){if(B===null){i&&H(),G(0),e.consume(B);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:l,_tokenizer:i}),K(B)}function K(B){if(B===null){re(e.exit("chunkFlow"),!0),G(0),e.consume(B);return}return oa(B)?(e.consume(B),re(e.exit("chunkFlow")),n=0,t.interrupt=void 0,s):(e.consume(B),K)}function re(B,$){const N=t.sliceStream(B);if($&&N.push(null),B.previous=l,l&&(l.next=B),l=B,i.defineSkip(B.start),i.write(N),t.parser.lazy[B.start.line]){let z=i.events.length;for(;z--;)if(i.events[z][1].start.offset<a&&(!i.events[z][1].end||i.events[z][1].end.offset>a))return;const X=t.events.length;let te=X,pe,ke;for(;te--;)if(t.events[te][0]==="exit"&&t.events[te][1].type==="chunkFlow"){if(pe){ke=t.events[te][1].end;break}pe=!0}for(G(n),z=X;z<t.events.length;)t.events[z][1].end=Object.assign({},ke),z++;sd(t.events,te+1,0,t.events.slice(X)),t.events.length=z}}function G(B){let $=r.length;for(;$-- >B;){const N=r[$];t.containerState=N[1],N[0].exit.call(t,e)}r.length=B}function H(){i.write([null]),l=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Mhe(e,t,r){return Zo(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function J4(e){if(e===null||Sh(e)||Che(e))return 1;if(Phe(e))return 2}function gO(e,t,r){const n=[];let i=-1;for(;++i<e.length;){const l=e[i].resolveAll;l&&!n.includes(l)&&(t=l(t,r),n.push(l))}return t}const xk={name:"attention",tokenize:Rhe,resolveAll:Ohe};function Ohe(e,t){let r=-1,n,i,l,a,s,d,v,S;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(n=r;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[n][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;d=e[n][1].end.offset-e[n][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const A=Object.assign({},e[n][1].end),P=Object.assign({},e[r][1].start);Q4(A,-d),Q4(P,d),a={type:d>1?"strongSequence":"emphasisSequence",start:A,end:Object.assign({},e[n][1].end)},s={type:d>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[r][1].start),end:P},l={type:d>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[r][1].start)},i={type:d>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},s.end)},e[n][1].end=Object.assign({},a.start),e[r][1].start=Object.assign({},s.end),v=[],e[n][1].end.offset-e[n][1].start.offset&&(v=_h(v,[["enter",e[n][1],t],["exit",e[n][1],t]])),v=_h(v,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",l,t]]),v=_h(v,gO(t.parser.constructs.insideSpan.null,e.slice(n+1,r),t)),v=_h(v,[["exit",l,t],["enter",s,t],["exit",s,t],["exit",i,t]]),e[r][1].end.offset-e[r][1].start.offset?(S=2,v=_h(v,[["enter",e[r][1],t],["exit",e[r][1],t]])):S=0,sd(e,n-1,r-n+3,v),r=n+v.length-S-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function Rhe(e,t){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,i=J4(n);let l;return a;function a(d){return e.enter("attentionSequence"),l=d,s(d)}function s(d){if(d===l)return e.consume(d),s;const v=e.exit("attentionSequence"),S=J4(d),A=!S||S===2&&i||r.includes(d),P=!i||i===2&&S||r.includes(n);return v._open=!!(l===42?A:A&&(i||!P)),v._close=!!(l===42?P:P&&(S||!A)),t(d)}}function Q4(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Dhe={name:"autolink",tokenize:zhe};function zhe(e,t,r){let n=1;return i;function i(F){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(F),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),l}function l(F){return Yp(F)?(e.consume(F),a):K4(F)?v(F):r(F)}function a(F){return F===43||F===45||F===46||kf(F)?s(F):v(F)}function s(F){return F===58?(e.consume(F),d):(F===43||F===45||F===46||kf(F))&&n++<32?(e.consume(F),s):v(F)}function d(F){return F===62?(e.exit("autolinkProtocol"),L(F)):F===null||F===32||F===60||bk(F)?r(F):(e.consume(F),d)}function v(F){return F===64?(e.consume(F),n=0,S):K4(F)?(e.consume(F),v):r(F)}function S(F){return kf(F)?A(F):r(F)}function A(F){return F===46?(e.consume(F),n=0,S):F===62?(e.exit("autolinkProtocol").type="autolinkEmail",L(F)):P(F)}function P(F){return(F===45||kf(F))&&n++<63?(e.consume(F),F===45?P:A):r(F)}function L(F){return e.enter("autolinkMarker"),e.consume(F),e.exit("autolinkMarker"),e.exit("autolink"),t}}const PE={tokenize:Lhe,partial:!0};function Lhe(e,t,r){return Zo(e,n,"linePrefix");function n(i){return i===null||oa(i)?t(i):r(i)}}const Rj={name:"blockQuote",tokenize:$he,continuation:{tokenize:Nhe},exit:Bhe};function $he(e,t,r){const n=this;return i;function i(a){if(a===62){const s=n.containerState;return s.open||(e.enter("blockQuote",{_container:!0}),s.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),l}return r(a)}function l(a){return Cl(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function Nhe(e,t,r){return Zo(e,e.attempt(Rj,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Bhe(e){e.exit("blockQuote")}const Dj={name:"characterEscape",tokenize:Fhe};function Fhe(e,t,r){return n;function n(l){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(l),e.exit("escapeMarker"),i}function i(l){return Ehe(l)?(e.enter("characterEscapeValue"),e.consume(l),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(l)}}const ez=document.createElement("i");function yO(e){const t="&"+e+";";ez.innerHTML=t;const r=ez.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}const zj={name:"characterReference",tokenize:Uhe};function Uhe(e,t,r){const n=this;let i=0,l,a;return s;function s(A){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(A),e.exit("characterReferenceMarker"),d}function d(A){return A===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(A),e.exit("characterReferenceMarkerNumeric"),v):(e.enter("characterReferenceValue"),l=31,a=kf,S(A))}function v(A){return A===88||A===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(A),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),l=6,a=She,S):(e.enter("characterReferenceValue"),l=7,a=_k,S(A))}function S(A){let P;return A===59&&i?(P=e.exit("characterReferenceValue"),a===kf&&!yO(n.sliceSerialize(P))?r(A):(e.enter("characterReferenceMarker"),e.consume(A),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)):a(A)&&i++<l?(e.consume(A),S):r(A)}}const tz={name:"codeFenced",tokenize:jhe,concrete:!0};function jhe(e,t,r){const n=this,i={tokenize:N,partial:!0},l={tokenize:$,partial:!0},a=this.events[this.events.length-1],s=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0;let d=0,v;return S;function S(z){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),v=z,A(z)}function A(z){return z===v?(e.consume(z),d++,A):(e.exit("codeFencedFenceSequence"),d<3?r(z):Zo(e,P,"whitespace")(z))}function P(z){return z===null||oa(z)?re(z):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),L(z))}function L(z){return z===null||Sh(z)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Zo(e,F,"whitespace")(z)):z===96&&z===v?r(z):(e.consume(z),L)}function F(z){return z===null||oa(z)?re(z):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),K(z))}function K(z){return z===null||oa(z)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),re(z)):z===96&&z===v?r(z):(e.consume(z),K)}function re(z){return e.exit("codeFencedFence"),n.interrupt?t(z):G(z)}function G(z){return z===null?B(z):oa(z)?e.attempt(l,e.attempt(i,B,s?Zo(e,G,"linePrefix",s+1):G),B)(z):(e.enter("codeFlowValue"),H(z))}function H(z){return z===null||oa(z)?(e.exit("codeFlowValue"),G(z)):(e.consume(z),H)}function B(z){return e.exit("codeFenced"),t(z)}function $(z,X,te){const pe=this;return ke;function ke(ge){return z.enter("lineEnding"),z.consume(ge),z.exit("lineEnding"),Pe}function Pe(ge){return pe.parser.lazy[pe.now().line]?te(ge):X(ge)}}function N(z,X,te){let pe=0;return Zo(z,ke,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function ke(Ie){return z.enter("codeFencedFence"),z.enter("codeFencedFenceSequence"),Pe(Ie)}function Pe(Ie){return Ie===v?(z.consume(Ie),pe++,Pe):pe<d?te(Ie):(z.exit("codeFencedFenceSequence"),Zo(z,ge,"whitespace")(Ie))}function ge(Ie){return Ie===null||oa(Ie)?(z.exit("codeFencedFence"),X(Ie)):te(Ie)}}}const qP={name:"codeIndented",tokenize:qhe},Vhe={tokenize:Ghe,partial:!0};function qhe(e,t,r){const n=this;return i;function i(v){return e.enter("codeIndented"),Zo(e,l,"linePrefix",4+1)(v)}function l(v){const S=n.events[n.events.length-1];return S&&S[1].type==="linePrefix"&&S[2].sliceSerialize(S[1],!0).length>=4?a(v):r(v)}function a(v){return v===null?d(v):oa(v)?e.attempt(Vhe,a,d)(v):(e.enter("codeFlowValue"),s(v))}function s(v){return v===null||oa(v)?(e.exit("codeFlowValue"),a(v)):(e.consume(v),s)}function d(v){return e.exit("codeIndented"),t(v)}}function Ghe(e,t,r){const n=this;return i;function i(a){return n.parser.lazy[n.now().line]?r(a):oa(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):Zo(e,l,"linePrefix",4+1)(a)}function l(a){const s=n.events[n.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?t(a):oa(a)?i(a):r(a)}}const Hhe={name:"codeText",tokenize:Xhe,resolve:Whe,previous:Zhe};function Whe(e){let t=e.length-4,r=3,n,i;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(n=r;++n<t;)if(e[n][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(n=r-1,t++;++n<=t;)i===void 0?n!==t&&e[n][1].type!=="lineEnding"&&(i=n):(n===t||e[n][1].type==="lineEnding")&&(e[i][1].type="codeTextData",n!==i+2&&(e[i][1].end=e[n-1][1].end,e.splice(i+2,n-i-2),t-=n-i-2,n=i+2),i=void 0);return e}function Zhe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Xhe(e,t,r){let n=0,i,l;return a;function a(A){return e.enter("codeText"),e.enter("codeTextSequence"),s(A)}function s(A){return A===96?(e.consume(A),n++,s):(e.exit("codeTextSequence"),d(A))}function d(A){return A===null?r(A):A===96?(l=e.enter("codeTextSequence"),i=0,S(A)):A===32?(e.enter("space"),e.consume(A),e.exit("space"),d):oa(A)?(e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),d):(e.enter("codeTextData"),v(A))}function v(A){return A===null||A===32||A===96||oa(A)?(e.exit("codeTextData"),d(A)):(e.consume(A),v)}function S(A){return A===96?(e.consume(A),i++,S):i===n?(e.exit("codeTextSequence"),e.exit("codeText"),t(A)):(l.type="codeTextData",v(A))}}function Lj(e){const t={};let r=-1,n,i,l,a,s,d,v;for(;++r<e.length;){for(;r in t;)r=t[r];if(n=e[r],r&&n[1].type==="chunkFlow"&&e[r-1][1].type==="listItemPrefix"&&(d=n[1]._tokenizer.events,l=0,l<d.length&&d[l][1].type==="lineEndingBlank"&&(l+=2),l<d.length&&d[l][1].type==="content"))for(;++l<d.length&&d[l][1].type!=="content";)d[l][1].type==="chunkText"&&(d[l][1]._isInFirstContentOfListItem=!0,l++);if(n[0]==="enter")n[1].contentType&&(Object.assign(t,Khe(e,r)),r=t[r],v=!0);else if(n[1]._container){for(l=r,i=void 0;l--&&(a=e[l],a[1].type==="lineEnding"||a[1].type==="lineEndingBlank");)a[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),a[1].type="lineEnding",i=l);i&&(n[1].end=Object.assign({},e[i][1].start),s=e.slice(i,r),s.unshift(n),sd(e,i,r-i+1,s))}}return!v}function Khe(e,t){const r=e[t][1],n=e[t][2];let i=t-1;const l=[],a=r._tokenizer||n.parser[r.contentType](r.start),s=a.events,d=[],v={};let S,A,P=-1,L=r,F=0,K=0;const re=[K];for(;L;){for(;e[++i][1]!==L;);l.push(i),L._tokenizer||(S=n.sliceStream(L),L.next||S.push(null),A&&a.defineSkip(L.start),L._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(S),L._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),A=L,L=L.next}for(L=r;++P<s.length;)s[P][0]==="exit"&&s[P-1][0]==="enter"&&s[P][1].type===s[P-1][1].type&&s[P][1].start.line!==s[P][1].end.line&&(K=P+1,re.push(K),L._tokenizer=void 0,L.previous=void 0,L=L.next);for(a.events=[],L?(L._tokenizer=void 0,L.previous=void 0):re.pop(),P=re.length;P--;){const G=s.slice(re[P],re[P+1]),H=l.pop();d.unshift([H,H+G.length-1]),sd(e,H,2,G)}for(P=-1;++P<d.length;)v[F+d[P][0]]=F+d[P][1],F+=d[P][1]-d[P][0]-1;return v}const Yhe={tokenize:epe,resolve:Qhe},Jhe={tokenize:tpe,partial:!0};function Qhe(e){return Lj(e),e}function epe(e,t){let r;return n;function n(s){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),i(s)}function i(s){return s===null?l(s):oa(s)?e.check(Jhe,a,l)(s):(e.consume(s),i)}function l(s){return e.exit("chunkContent"),e.exit("content"),t(s)}function a(s){return e.consume(s),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,i}}function tpe(e,t,r){const n=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Zo(e,l,"linePrefix")}function l(a){if(a===null||oa(a))return r(a);const s=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?t(a):e.interrupt(n.parser.constructs.flow,r,t)(a)}}function $j(e,t,r,n,i,l,a,s,d){const v=d||Number.POSITIVE_INFINITY;let S=0;return A;function A(G){return G===60?(e.enter(n),e.enter(i),e.enter(l),e.consume(G),e.exit(l),P):G===null||G===41||bk(G)?r(G):(e.enter(n),e.enter(a),e.enter(s),e.enter("chunkString",{contentType:"string"}),K(G))}function P(G){return G===62?(e.enter(l),e.consume(G),e.exit(l),e.exit(i),e.exit(n),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),L(G))}function L(G){return G===62?(e.exit("chunkString"),e.exit(s),P(G)):G===null||G===60||oa(G)?r(G):(e.consume(G),G===92?F:L)}function F(G){return G===60||G===62||G===92?(e.consume(G),L):L(G)}function K(G){return G===40?++S>v?r(G):(e.consume(G),K):G===41?S--?(e.consume(G),K):(e.exit("chunkString"),e.exit(s),e.exit(a),e.exit(n),t(G)):G===null||Sh(G)?S?r(G):(e.exit("chunkString"),e.exit(s),e.exit(a),e.exit(n),t(G)):bk(G)?r(G):(e.consume(G),G===92?re:K)}function re(G){return G===40||G===41||G===92?(e.consume(G),K):K(G)}}function Nj(e,t,r,n,i,l){const a=this;let s=0,d;return v;function v(L){return e.enter(n),e.enter(i),e.consume(L),e.exit(i),e.enter(l),S}function S(L){return L===null||L===91||L===93&&!d||L===94&&!s&&"_hiddenFootnoteSupport"in a.parser.constructs||s>999?r(L):L===93?(e.exit(l),e.enter(i),e.consume(L),e.exit(i),e.exit(n),t):oa(L)?(e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),S):(e.enter("chunkString",{contentType:"string"}),A(L))}function A(L){return L===null||L===91||L===93||oa(L)||s++>999?(e.exit("chunkString"),S(L)):(e.consume(L),d=d||!Cl(L),L===92?P:A)}function P(L){return L===91||L===92||L===93?(e.consume(L),s++,A):A(L)}}function Bj(e,t,r,n,i,l){let a;return s;function s(P){return e.enter(n),e.enter(i),e.consume(P),e.exit(i),a=P===40?41:P,d}function d(P){return P===a?(e.enter(i),e.consume(P),e.exit(i),e.exit(n),t):(e.enter(l),v(P))}function v(P){return P===a?(e.exit(l),d(a)):P===null?r(P):oa(P)?(e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),Zo(e,v,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),S(P))}function S(P){return P===a||P===null||oa(P)?(e.exit("chunkString"),v(P)):(e.consume(P),P===92?A:S)}function A(P){return P===a||P===92?(e.consume(P),S):S(P)}}function nx(e,t){let r;return n;function n(i){return oa(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),r=!0,n):Cl(i)?Zo(e,n,r?"linePrefix":"lineSuffix")(i):t(i)}}function J_(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const rpe={name:"definition",tokenize:ipe},npe={tokenize:ape,partial:!0};function ipe(e,t,r){const n=this;let i;return l;function l(d){return e.enter("definition"),Nj.call(n,e,a,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(d)}function a(d){return i=J_(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),d===58?(e.enter("definitionMarker"),e.consume(d),e.exit("definitionMarker"),nx(e,$j(e,e.attempt(npe,Zo(e,s,"whitespace"),Zo(e,s,"whitespace")),r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):r(d)}function s(d){return d===null||oa(d)?(e.exit("definition"),n.parser.defined.includes(i)||n.parser.defined.push(i),t(d)):r(d)}}function ape(e,t,r){return n;function n(a){return Sh(a)?nx(e,i)(a):r(a)}function i(a){return a===34||a===39||a===40?Bj(e,Zo(e,l,"whitespace"),r,"definitionTitle","definitionTitleMarker","definitionTitleString")(a):r(a)}function l(a){return a===null||oa(a)?t(a):r(a)}}const ope={name:"hardBreakEscape",tokenize:spe};function spe(e,t,r){return n;function n(l){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(l),i}function i(l){return oa(l)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(l)):r(l)}}const lpe={name:"headingAtx",tokenize:cpe,resolve:upe};function upe(e,t){let r=e.length-2,n=3,i,l;return e[n][1].type==="whitespace"&&(n+=2),r-2>n&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(n===r-1||r-4>n&&e[r-2][1].type==="whitespace")&&(r-=n+1===r?2:4),r>n&&(i={type:"atxHeadingText",start:e[n][1].start,end:e[r][1].end},l={type:"chunkText",start:e[n][1].start,end:e[r][1].end,contentType:"text"},sd(e,n,r-n+1,[["enter",i,t],["enter",l,t],["exit",l,t],["exit",i,t]])),e}function cpe(e,t,r){const n=this;let i=0;return l;function l(S){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),a(S)}function a(S){return S===35&&i++<6?(e.consume(S),a):S===null||Sh(S)?(e.exit("atxHeadingSequence"),n.interrupt?t(S):s(S)):r(S)}function s(S){return S===35?(e.enter("atxHeadingSequence"),d(S)):S===null||oa(S)?(e.exit("atxHeading"),t(S)):Cl(S)?Zo(e,s,"whitespace")(S):(e.enter("atxHeadingText"),v(S))}function d(S){return S===35?(e.consume(S),d):(e.exit("atxHeadingSequence"),s(S))}function v(S){return S===null||S===35||Sh(S)?(e.exit("atxHeadingText"),s(S)):(e.consume(S),v)}}const fpe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],rz=["pre","script","style","textarea"],hpe={name:"htmlFlow",tokenize:mpe,resolveTo:dpe,concrete:!0},ppe={tokenize:gpe,partial:!0};function dpe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function mpe(e,t,r){const n=this;let i,l,a,s,d;return v;function v(Ye){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(Ye),S}function S(Ye){return Ye===33?(e.consume(Ye),A):Ye===47?(e.consume(Ye),F):Ye===63?(e.consume(Ye),i=3,n.interrupt?t:Zt):Yp(Ye)?(e.consume(Ye),a=String.fromCharCode(Ye),l=!0,K):r(Ye)}function A(Ye){return Ye===45?(e.consume(Ye),i=2,P):Ye===91?(e.consume(Ye),i=5,a="CDATA[",s=0,L):Yp(Ye)?(e.consume(Ye),i=4,n.interrupt?t:Zt):r(Ye)}function P(Ye){return Ye===45?(e.consume(Ye),n.interrupt?t:Zt):r(Ye)}function L(Ye){return Ye===a.charCodeAt(s++)?(e.consume(Ye),s===a.length?n.interrupt?t:Pe:L):r(Ye)}function F(Ye){return Yp(Ye)?(e.consume(Ye),a=String.fromCharCode(Ye),K):r(Ye)}function K(Ye){return Ye===null||Ye===47||Ye===62||Sh(Ye)?Ye!==47&&l&&rz.includes(a.toLowerCase())?(i=1,n.interrupt?t(Ye):Pe(Ye)):fpe.includes(a.toLowerCase())?(i=6,Ye===47?(e.consume(Ye),re):n.interrupt?t(Ye):Pe(Ye)):(i=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(Ye):l?H(Ye):G(Ye)):Ye===45||kf(Ye)?(e.consume(Ye),a+=String.fromCharCode(Ye),K):r(Ye)}function re(Ye){return Ye===62?(e.consume(Ye),n.interrupt?t:Pe):r(Ye)}function G(Ye){return Cl(Ye)?(e.consume(Ye),G):pe(Ye)}function H(Ye){return Ye===47?(e.consume(Ye),pe):Ye===58||Ye===95||Yp(Ye)?(e.consume(Ye),B):Cl(Ye)?(e.consume(Ye),H):pe(Ye)}function B(Ye){return Ye===45||Ye===46||Ye===58||Ye===95||kf(Ye)?(e.consume(Ye),B):$(Ye)}function $(Ye){return Ye===61?(e.consume(Ye),N):Cl(Ye)?(e.consume(Ye),$):H(Ye)}function N(Ye){return Ye===null||Ye===60||Ye===61||Ye===62||Ye===96?r(Ye):Ye===34||Ye===39?(e.consume(Ye),d=Ye,z):Cl(Ye)?(e.consume(Ye),N):(d=null,X(Ye))}function z(Ye){return Ye===null||oa(Ye)?r(Ye):Ye===d?(e.consume(Ye),te):(e.consume(Ye),z)}function X(Ye){return Ye===null||Ye===34||Ye===39||Ye===60||Ye===61||Ye===62||Ye===96||Sh(Ye)?$(Ye):(e.consume(Ye),X)}function te(Ye){return Ye===47||Ye===62||Cl(Ye)?H(Ye):r(Ye)}function pe(Ye){return Ye===62?(e.consume(Ye),ke):r(Ye)}function ke(Ye){return Cl(Ye)?(e.consume(Ye),ke):Ye===null||oa(Ye)?Pe(Ye):r(Ye)}function Pe(Ye){return Ye===45&&i===2?(e.consume(Ye),lt):Ye===60&&i===1?(e.consume(Ye),it):Ye===62&&i===4?(e.consume(Ye),Kt):Ye===63&&i===3?(e.consume(Ye),Zt):Ye===93&&i===5?(e.consume(Ye),St):oa(Ye)&&(i===6||i===7)?e.check(ppe,Kt,ge)(Ye):Ye===null||oa(Ye)?ge(Ye):(e.consume(Ye),Pe)}function ge(Ye){return e.exit("htmlFlowData"),Ie(Ye)}function Ie(Ye){return Ye===null?Ge(Ye):oa(Ye)?e.attempt({tokenize:Ne,partial:!0},Ie,Ge)(Ye):(e.enter("htmlFlowData"),Pe(Ye))}function Ne(Ye,Dr,wr){return tr;function tr(Bt){return Ye.enter("lineEnding"),Ye.consume(Bt),Ye.exit("lineEnding"),br}function br(Bt){return n.parser.lazy[n.now().line]?wr(Bt):Dr(Bt)}}function lt(Ye){return Ye===45?(e.consume(Ye),Zt):Pe(Ye)}function it(Ye){return Ye===47?(e.consume(Ye),a="",Rt):Pe(Ye)}function Rt(Ye){return Ye===62&&rz.includes(a.toLowerCase())?(e.consume(Ye),Kt):Yp(Ye)&&a.length<8?(e.consume(Ye),a+=String.fromCharCode(Ye),Rt):Pe(Ye)}function St(Ye){return Ye===93?(e.consume(Ye),Zt):Pe(Ye)}function Zt(Ye){return Ye===62?(e.consume(Ye),Kt):Ye===45&&i===2?(e.consume(Ye),Zt):Pe(Ye)}function Kt(Ye){return Ye===null||oa(Ye)?(e.exit("htmlFlowData"),Ge(Ye)):(e.consume(Ye),Kt)}function Ge(Ye){return e.exit("htmlFlow"),t(Ye)}}function gpe(e,t,r){return n;function n(i){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),e.attempt(PE,t,r)}}const ype={name:"htmlText",tokenize:vpe};function vpe(e,t,r){const n=this;let i,l,a,s;return d;function d(Ge){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(Ge),v}function v(Ge){return Ge===33?(e.consume(Ge),S):Ge===47?(e.consume(Ge),X):Ge===63?(e.consume(Ge),N):Yp(Ge)?(e.consume(Ge),ke):r(Ge)}function S(Ge){return Ge===45?(e.consume(Ge),A):Ge===91?(e.consume(Ge),l="CDATA[",a=0,re):Yp(Ge)?(e.consume(Ge),$):r(Ge)}function A(Ge){return Ge===45?(e.consume(Ge),P):r(Ge)}function P(Ge){return Ge===null||Ge===62?r(Ge):Ge===45?(e.consume(Ge),L):F(Ge)}function L(Ge){return Ge===null||Ge===62?r(Ge):F(Ge)}function F(Ge){return Ge===null?r(Ge):Ge===45?(e.consume(Ge),K):oa(Ge)?(s=F,St(Ge)):(e.consume(Ge),F)}function K(Ge){return Ge===45?(e.consume(Ge),Kt):F(Ge)}function re(Ge){return Ge===l.charCodeAt(a++)?(e.consume(Ge),a===l.length?G:re):r(Ge)}function G(Ge){return Ge===null?r(Ge):Ge===93?(e.consume(Ge),H):oa(Ge)?(s=G,St(Ge)):(e.consume(Ge),G)}function H(Ge){return Ge===93?(e.consume(Ge),B):G(Ge)}function B(Ge){return Ge===62?Kt(Ge):Ge===93?(e.consume(Ge),B):G(Ge)}function $(Ge){return Ge===null||Ge===62?Kt(Ge):oa(Ge)?(s=$,St(Ge)):(e.consume(Ge),$)}function N(Ge){return Ge===null?r(Ge):Ge===63?(e.consume(Ge),z):oa(Ge)?(s=N,St(Ge)):(e.consume(Ge),N)}function z(Ge){return Ge===62?Kt(Ge):N(Ge)}function X(Ge){return Yp(Ge)?(e.consume(Ge),te):r(Ge)}function te(Ge){return Ge===45||kf(Ge)?(e.consume(Ge),te):pe(Ge)}function pe(Ge){return oa(Ge)?(s=pe,St(Ge)):Cl(Ge)?(e.consume(Ge),pe):Kt(Ge)}function ke(Ge){return Ge===45||kf(Ge)?(e.consume(Ge),ke):Ge===47||Ge===62||Sh(Ge)?Pe(Ge):r(Ge)}function Pe(Ge){return Ge===47?(e.consume(Ge),Kt):Ge===58||Ge===95||Yp(Ge)?(e.consume(Ge),ge):oa(Ge)?(s=Pe,St(Ge)):Cl(Ge)?(e.consume(Ge),Pe):Kt(Ge)}function ge(Ge){return Ge===45||Ge===46||Ge===58||Ge===95||kf(Ge)?(e.consume(Ge),ge):Ie(Ge)}function Ie(Ge){return Ge===61?(e.consume(Ge),Ne):oa(Ge)?(s=Ie,St(Ge)):Cl(Ge)?(e.consume(Ge),Ie):Pe(Ge)}function Ne(Ge){return Ge===null||Ge===60||Ge===61||Ge===62||Ge===96?r(Ge):Ge===34||Ge===39?(e.consume(Ge),i=Ge,lt):oa(Ge)?(s=Ne,St(Ge)):Cl(Ge)?(e.consume(Ge),Ne):(e.consume(Ge),i=void 0,Rt)}function lt(Ge){return Ge===i?(e.consume(Ge),it):Ge===null?r(Ge):oa(Ge)?(s=lt,St(Ge)):(e.consume(Ge),lt)}function it(Ge){return Ge===62||Ge===47||Sh(Ge)?Pe(Ge):r(Ge)}function Rt(Ge){return Ge===null||Ge===34||Ge===39||Ge===60||Ge===61||Ge===96?r(Ge):Ge===62||Sh(Ge)?Pe(Ge):(e.consume(Ge),Rt)}function St(Ge){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(Ge),e.exit("lineEnding"),Zo(e,Zt,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Zt(Ge){return e.enter("htmlTextData"),s(Ge)}function Kt(Ge){return Ge===62?(e.consume(Ge),e.exit("htmlTextData"),e.exit("htmlText"),t):r(Ge)}}const vO={name:"labelEnd",tokenize:Epe,resolveTo:Spe,resolveAll:wpe},_pe={tokenize:Cpe},bpe={tokenize:Ppe},xpe={tokenize:Tpe};function wpe(e){let t=-1,r;for(;++t<e.length;)r=e[t][1],(r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd")&&(e.splice(t+1,r.type==="labelImage"?4:2),r.type="data",t++);return e}function Spe(e,t){let r=e.length,n=0,i,l,a,s;for(;r--;)if(i=e[r][1],l){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[r][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[r][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(l=r,i.type!=="labelLink")){n=2;break}}else i.type==="labelEnd"&&(a=r);const d={type:e[l][1].type==="labelLink"?"link":"image",start:Object.assign({},e[l][1].start),end:Object.assign({},e[e.length-1][1].end)},v={type:"label",start:Object.assign({},e[l][1].start),end:Object.assign({},e[a][1].end)},S={type:"labelText",start:Object.assign({},e[l+n+2][1].end),end:Object.assign({},e[a-2][1].start)};return s=[["enter",d,t],["enter",v,t]],s=_h(s,e.slice(l+1,l+n+3)),s=_h(s,[["enter",S,t]]),s=_h(s,gO(t.parser.constructs.insideSpan.null,e.slice(l+n+4,a-3),t)),s=_h(s,[["exit",S,t],e[a-2],e[a-1],["exit",v,t]]),s=_h(s,e.slice(a+1)),s=_h(s,[["exit",d,t]]),sd(e,l,e.length,s),e}function Epe(e,t,r){const n=this;let i=n.events.length,l,a;for(;i--;)if((n.events[i][1].type==="labelImage"||n.events[i][1].type==="labelLink")&&!n.events[i][1]._balanced){l=n.events[i][1];break}return s;function s(S){return l?l._inactive?v(S):(a=n.parser.defined.includes(J_(n.sliceSerialize({start:l.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(S),e.exit("labelMarker"),e.exit("labelEnd"),d):r(S)}function d(S){return S===40?e.attempt(_pe,t,a?t:v)(S):S===91?e.attempt(bpe,t,a?e.attempt(xpe,t,v):v)(S):a?t(S):v(S)}function v(S){return l._balanced=!0,r(S)}}function Cpe(e,t,r){return n;function n(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),nx(e,i)}function i(d){return d===41?s(d):$j(e,l,r,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function l(d){return Sh(d)?nx(e,a)(d):s(d)}function a(d){return d===34||d===39||d===40?Bj(e,nx(e,s),r,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):s(d)}function s(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):r(d)}}function Ppe(e,t,r){const n=this;return i;function i(a){return Nj.call(n,e,l,r,"reference","referenceMarker","referenceString")(a)}function l(a){return n.parser.defined.includes(J_(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(a):r(a)}}function Tpe(e,t,r){return n;function n(l){return e.enter("reference"),e.enter("referenceMarker"),e.consume(l),e.exit("referenceMarker"),i}function i(l){return l===93?(e.enter("referenceMarker"),e.consume(l),e.exit("referenceMarker"),e.exit("reference"),t):r(l)}}const Ape={name:"labelStartImage",tokenize:kpe,resolveAll:vO.resolveAll};function kpe(e,t,r){const n=this;return i;function i(s){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(s),e.exit("labelImageMarker"),l}function l(s){return s===91?(e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelImage"),a):r(s)}function a(s){return s===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(s):t(s)}}const Ipe={name:"labelStartLink",tokenize:Mpe,resolveAll:vO.resolveAll};function Mpe(e,t,r){const n=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),l}function l(a){return a===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(a):t(a)}}const GP={name:"lineEnding",tokenize:Ope};function Ope(e,t){return r;function r(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Zo(e,t,"linePrefix")}}const Yw={name:"thematicBreak",tokenize:Rpe};function Rpe(e,t,r){let n=0,i;return l;function l(d){return e.enter("thematicBreak"),i=d,a(d)}function a(d){return d===i?(e.enter("thematicBreakSequence"),s(d)):Cl(d)?Zo(e,a,"whitespace")(d):n<3||d!==null&&!oa(d)?r(d):(e.exit("thematicBreak"),t(d))}function s(d){return d===i?(e.consume(d),n++,s):(e.exit("thematicBreakSequence"),a(d))}}const Bc={name:"list",tokenize:Lpe,continuation:{tokenize:$pe},exit:Bpe},Dpe={tokenize:Fpe,partial:!0},zpe={tokenize:Npe,partial:!0};function Lpe(e,t,r){const n=this,i=n.events[n.events.length-1];let l=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return s;function s(L){const F=n.containerState.type||(L===42||L===43||L===45?"listUnordered":"listOrdered");if(F==="listUnordered"?!n.containerState.marker||L===n.containerState.marker:_k(L)){if(n.containerState.type||(n.containerState.type=F,e.enter(F,{_container:!0})),F==="listUnordered")return e.enter("listItemPrefix"),L===42||L===45?e.check(Yw,r,v)(L):v(L);if(!n.interrupt||L===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),d(L)}return r(L)}function d(L){return _k(L)&&++a<10?(e.consume(L),d):(!n.interrupt||a<2)&&(n.containerState.marker?L===n.containerState.marker:L===41||L===46)?(e.exit("listItemValue"),v(L)):r(L)}function v(L){return e.enter("listItemMarker"),e.consume(L),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||L,e.check(PE,n.interrupt?r:S,e.attempt(Dpe,P,A))}function S(L){return n.containerState.initialBlankLine=!0,l++,P(L)}function A(L){return Cl(L)?(e.enter("listItemPrefixWhitespace"),e.consume(L),e.exit("listItemPrefixWhitespace"),P):r(L)}function P(L){return n.containerState.size=l+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(L)}}function $pe(e,t,r){const n=this;return n.containerState._closeFlow=void 0,e.check(PE,i,l);function i(s){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,Zo(e,t,"listItemIndent",n.containerState.size+1)(s)}function l(s){return n.containerState.furtherBlankLines||!Cl(s)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,a(s)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(zpe,t,a)(s))}function a(s){return n.containerState._closeFlow=!0,n.interrupt=void 0,Zo(e,e.attempt(Bc,t,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function Npe(e,t,r){const n=this;return Zo(e,i,"listItemIndent",n.containerState.size+1);function i(l){const a=n.events[n.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===n.containerState.size?t(l):r(l)}}function Bpe(e){e.exit(this.containerState.type)}function Fpe(e,t,r){const n=this;return Zo(e,i,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function i(l){const a=n.events[n.events.length-1];return!Cl(l)&&a&&a[1].type==="listItemPrefixWhitespace"?t(l):r(l)}}const nz={name:"setextUnderline",tokenize:jpe,resolveTo:Upe};function Upe(e,t){let r=e.length,n,i,l;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){n=r;break}e[r][1].type==="paragraph"&&(i=r)}else e[r][1].type==="content"&&e.splice(r,1),!l&&e[r][1].type==="definition"&&(l=r);const a={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",l?(e.splice(i,0,["enter",a,t]),e.splice(l+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[l][1].end)):e[n][1]=a,e.push(["exit",a,t]),e}function jpe(e,t,r){const n=this;let i=n.events.length,l,a;for(;i--;)if(n.events[i][1].type!=="lineEnding"&&n.events[i][1].type!=="linePrefix"&&n.events[i][1].type!=="content"){a=n.events[i][1].type==="paragraph";break}return s;function s(S){return!n.parser.lazy[n.now().line]&&(n.interrupt||a)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),l=S,d(S)):r(S)}function d(S){return S===l?(e.consume(S),d):(e.exit("setextHeadingLineSequence"),Zo(e,v,"lineSuffix")(S))}function v(S){return S===null||oa(S)?(e.exit("setextHeadingLine"),t(S)):r(S)}}const Vpe={tokenize:qpe};function qpe(e){const t=this,r=e.attempt(PE,n,e.attempt(this.parser.constructs.flowInitial,i,Zo(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Yhe,i)),"linePrefix")));return r;function n(l){if(l===null){e.consume(l);return}return e.enter("lineEndingBlank"),e.consume(l),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function i(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const Gpe={resolveAll:Uj()},Hpe=Fj("string"),Wpe=Fj("text");function Fj(e){return{tokenize:t,resolveAll:Uj(e==="text"?Zpe:void 0)};function t(r){const n=this,i=this.parser.constructs[e],l=r.attempt(i,a,s);return a;function a(S){return v(S)?l(S):s(S)}function s(S){if(S===null){r.consume(S);return}return r.enter("data"),r.consume(S),d}function d(S){return v(S)?(r.exit("data"),l(S)):(r.consume(S),d)}function v(S){if(S===null)return!0;const A=i[S];let P=-1;if(A)for(;++P<A.length;){const L=A[P];if(!L.previous||L.previous.call(n,n.previous))return!0}return!1}}}function Uj(e){return t;function t(r,n){let i=-1,l;for(;++i<=r.length;)l===void 0?r[i]&&r[i][1].type==="data"&&(l=i,i++):(!r[i]||r[i][1].type!=="data")&&(i!==l+2&&(r[l][1].end=r[i-1][1].end,r.splice(l+2,i-l-2),i=l+2),l=void 0);return e?e(r,n):r}}function Zpe(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const n=e[r-1][1],i=t.sliceStream(n);let l=i.length,a=-1,s=0,d;for(;l--;){const v=i[l];if(typeof v=="string"){for(a=v.length;v.charCodeAt(a-1)===32;)s++,a--;if(a)break;a=-1}else if(v===-2)d=!0,s++;else if(v!==-1){l++;break}}if(s){const v={type:r===e.length||d||s<2?"lineSuffix":"hardBreakTrailing",start:{line:n.end.line,column:n.end.column-s,offset:n.end.offset-s,_index:n.start._index+l,_bufferIndex:l?a:n.start._bufferIndex+a},end:Object.assign({},n.end)};n.end=Object.assign({},v.start),n.start.offset===n.end.offset?Object.assign(n,v):(e.splice(r,0,["enter",v,t],["exit",v,t]),r+=2)}r++}return e}function Xpe(e,t,r){let n=Object.assign(r?Object.assign({},r):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},l=[];let a=[],s=[];const d={consume:H,enter:B,exit:$,attempt:X(N),check:X(z),interrupt:X(z,{interrupt:!0})},v={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:L,sliceSerialize:P,now:F,defineSkip:K,write:A};let S=t.tokenize.call(v,d);return t.resolveAll&&l.push(t),v;function A(Pe){return a=_h(a,Pe),re(),a[a.length-1]!==null?[]:(te(t,0),v.events=gO(l,v.events,v),v.events)}function P(Pe,ge){return Ype(L(Pe),ge)}function L(Pe){return Kpe(a,Pe)}function F(){return Object.assign({},n)}function K(Pe){i[Pe.line]=Pe.column,ke()}function re(){let Pe;for(;n._index<a.length;){const ge=a[n._index];if(typeof ge=="string")for(Pe=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===Pe&&n._bufferIndex<ge.length;)G(ge.charCodeAt(n._bufferIndex));else G(ge)}}function G(Pe){S=S(Pe)}function H(Pe){oa(Pe)?(n.line++,n.column=1,n.offset+=Pe===-3?2:1,ke()):Pe!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===a[n._index].length&&(n._bufferIndex=-1,n._index++)),v.previous=Pe}function B(Pe,ge){const Ie=ge||{};return Ie.type=Pe,Ie.start=F(),v.events.push(["enter",Ie,v]),s.push(Ie),Ie}function $(Pe){const ge=s.pop();return ge.end=F(),v.events.push(["exit",ge,v]),ge}function N(Pe,ge){te(Pe,ge.from)}function z(Pe,ge){ge.restore()}function X(Pe,ge){return Ie;function Ie(Ne,lt,it){let Rt,St,Zt,Kt;return Array.isArray(Ne)?Ye(Ne):"tokenize"in Ne?Ye([Ne]):Ge(Ne);function Ge(br){return Bt;function Bt(hr){const cr=hr!==null&&br[hr],Mn=hr!==null&&br.null,Hn=[...Array.isArray(cr)?cr:cr?[cr]:[],...Array.isArray(Mn)?Mn:Mn?[Mn]:[]];return Ye(Hn)(hr)}}function Ye(br){return Rt=br,St=0,br.length===0?it:Dr(br[St])}function Dr(br){return Bt;function Bt(hr){return Kt=pe(),Zt=br,br.partial||(v.currentConstruct=br),br.name&&v.parser.constructs.disable.null.includes(br.name)?tr():br.tokenize.call(ge?Object.assign(Object.create(v),ge):v,d,wr,tr)(hr)}}function wr(br){return Pe(Zt,Kt),lt}function tr(br){return Kt.restore(),++St<Rt.length?Dr(Rt[St]):it}}}function te(Pe,ge){Pe.resolveAll&&!l.includes(Pe)&&l.push(Pe),Pe.resolve&&sd(v.events,ge,v.events.length-ge,Pe.resolve(v.events.slice(ge),v)),Pe.resolveTo&&(v.events=Pe.resolveTo(v.events,v))}function pe(){const Pe=F(),ge=v.previous,Ie=v.currentConstruct,Ne=v.events.length,lt=Array.from(s);return{restore:it,from:Ne};function it(){n=Pe,v.previous=ge,v.currentConstruct=Ie,v.events.length=Ne,s=lt,ke()}}function ke(){n.line in i&&n.column<2&&(n.column=i[n.line],n.offset+=i[n.line]-1)}}function Kpe(e,t){const r=t.start._index,n=t.start._bufferIndex,i=t.end._index,l=t.end._bufferIndex;let a;return r===i?a=[e[r].slice(n,l)]:(a=e.slice(r,i),n>-1&&(a[0]=a[0].slice(n)),l>0&&a.push(e[i].slice(0,l))),a}function Ype(e,t){let r=-1;const n=[];let i;for(;++r<e.length;){const l=e[r];let a;if(typeof l=="string")a=l;else switch(l){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&i)continue;a=" ";break}default:a=String.fromCharCode(l)}i=l===-2,n.push(a)}return n.join("")}const Jpe={[42]:Bc,[43]:Bc,[45]:Bc,[48]:Bc,[49]:Bc,[50]:Bc,[51]:Bc,[52]:Bc,[53]:Bc,[54]:Bc,[55]:Bc,[56]:Bc,[57]:Bc,[62]:Rj},Qpe={[91]:rpe},ede={[-2]:qP,[-1]:qP,[32]:qP},tde={[35]:lpe,[42]:Yw,[45]:[nz,Yw],[60]:hpe,[61]:nz,[95]:Yw,[96]:tz,[126]:tz},rde={[38]:zj,[92]:Dj},nde={[-5]:GP,[-4]:GP,[-3]:GP,[33]:Ape,[38]:zj,[42]:xk,[60]:[Dhe,ype],[91]:Ipe,[92]:[ope,Dj],[93]:vO,[95]:xk,[96]:Hhe},ide={null:[xk,Gpe]},ade={null:[42,95]},ode={null:[]},sde=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:ade,contentInitial:Qpe,disable:ode,document:Jpe,flow:tde,flowInitial:ede,insideSpan:ide,string:rde,text:nde},Symbol.toStringTag,{value:"Module"}));function lde(e={}){const t=_he([sde].concat(e.extensions||[])),r={defined:[],lazy:{},constructs:t,content:n(The),document:n(khe),flow:n(Vpe),string:n(Hpe),text:n(Wpe)};return r;function n(i){return l;function l(a){return Xpe(r,i,a)}}}const iz=/[\0\t\n\r]/g;function ude(){let e=1,t="",r=!0,n;return i;function i(l,a,s){const d=[];let v,S,A,P,L;for(l=t+l.toString(a),A=0,t="",r&&(l.charCodeAt(0)===65279&&A++,r=void 0);A<l.length;){if(iz.lastIndex=A,v=iz.exec(l),P=v&&v.index!==void 0?v.index:l.length,L=l.charCodeAt(P),!v){t=l.slice(A);break}if(L===10&&A===P&&n)d.push(-3),n=void 0;else switch(n&&(d.push(-5),n=void 0),A<P&&(d.push(l.slice(A,P)),e+=P-A),L){case 0:{d.push(65533),e++;break}case 9:{for(S=Math.ceil(e/4)*4,d.push(-2);e++<S;)d.push(-1);break}case 10:{d.push(-4),e=1;break}default:n=!0,e=1}A=P+1}return s&&(n&&d.push(-5),t&&d.push(t),d.push(null)),d}}function cde(e){for(;!Lj(e););return e}function jj(e,t){const r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"�":String.fromCharCode(r)}const fde=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function hde(e){return e.replace(fde,pde)}function pde(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){const i=r.charCodeAt(1),l=i===120||i===88;return jj(r.slice(l?2:1),l?16:10)}return yO(r)||e}const Vj={}.hasOwnProperty,dde=function(e,t,r){return typeof t!="string"&&(r=t,t=void 0),mde(r)(cde(lde(r).document().write(ude()(e,t,!0))))};function mde(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ea),autolinkProtocol:Pe,autolinkEmail:Pe,atxHeading:s(Li),blockQuote:s(Hn),characterEscape:Pe,characterReference:Pe,codeFenced:s(Qn),codeFencedFenceInfo:d,codeFencedFenceMeta:d,codeIndented:s(Qn,d),codeText:s(an,d),codeTextData:Pe,data:Pe,codeFlowValue:Pe,definition:s(ki),definitionDestinationString:d,definitionLabelString:d,definitionTitleString:d,emphasis:s(Xn),hardBreakEscape:s(Pi),hardBreakTrailing:s(Pi),htmlFlow:s(Yi,d),htmlFlowData:Pe,htmlText:s(Yi,d),htmlTextData:Pe,image:s(gi),label:d,link:s(ea),listItem:s(La),listItemValue:F,listOrdered:s(ya,L),listUnordered:s(ya),paragraph:s(Aa),reference:tr,referenceString:d,resourceDestinationString:d,resourceTitleString:d,setextHeading:s(Li),strong:s($a),thematicBreak:s(Ka)},exit:{atxHeading:S(),atxHeadingSequence:X,autolink:S(),autolinkEmail:Mn,autolinkProtocol:cr,blockQuote:S(),characterEscapeValue:ge,characterReferenceMarkerHexadecimal:Bt,characterReferenceMarkerNumeric:Bt,characterReferenceValue:hr,codeFenced:S(H),codeFencedFence:G,codeFencedFenceInfo:K,codeFencedFenceMeta:re,codeFlowValue:ge,codeIndented:S(B),codeText:S(Rt),codeTextData:ge,data:ge,definition:S(),definitionDestinationString:z,definitionLabelString:$,definitionTitleString:N,emphasis:S(),hardBreakEscape:S(Ne),hardBreakTrailing:S(Ne),htmlFlow:S(lt),htmlFlowData:ge,htmlText:S(it),htmlTextData:ge,image:S(Zt),label:Ge,labelText:Kt,lineEnding:Ie,link:S(St),listItem:S(),listOrdered:S(),listUnordered:S(),paragraph:S(),referenceString:br,resourceDestinationString:Ye,resourceTitleString:Dr,resource:wr,setextHeading:S(ke),setextHeadingLineSequence:pe,setextHeadingText:te,strong:S(),thematicBreak:S()}};qj(t,(e||{}).mdastExtensions||[]);const r={};return n;function n(dr){let Mt={type:"root",children:[]};const yr={stack:[Mt],tokenStack:[],config:t,enter:v,exit:A,buffer:d,resume:P,setData:l,getData:a},Xt=[];let Yt=-1;for(;++Yt<dr.length;)if(dr[Yt][1].type==="listOrdered"||dr[Yt][1].type==="listUnordered")if(dr[Yt][0]==="enter")Xt.push(Yt);else{const lr=Xt.pop();Yt=i(dr,lr,Yt)}for(Yt=-1;++Yt<dr.length;){const lr=t[dr[Yt][0]];Vj.call(lr,dr[Yt][1].type)&&lr[dr[Yt][1].type].call(Object.assign({sliceSerialize:dr[Yt][2].sliceSerialize},yr),dr[Yt][1])}if(yr.tokenStack.length>0){const lr=yr.tokenStack[yr.tokenStack.length-1];(lr[1]||az).call(yr,void 0,lr[0])}for(Mt.position={start:Gm(dr.length>0?dr[0][1].start:{line:1,column:1,offset:0}),end:Gm(dr.length>0?dr[dr.length-2][1].end:{line:1,column:1,offset:0})},Yt=-1;++Yt<t.transforms.length;)Mt=t.transforms[Yt](Mt)||Mt;return Mt}function i(dr,Mt,yr){let Xt=Mt-1,Yt=-1,lr=!1,Qr,Xr,En,Rn;for(;++Xt<=yr;){const rr=dr[Xt];if(rr[1].type==="listUnordered"||rr[1].type==="listOrdered"||rr[1].type==="blockQuote"?(rr[0]==="enter"?Yt++:Yt--,Rn=void 0):rr[1].type==="lineEndingBlank"?rr[0]==="enter"&&(Qr&&!Rn&&!Yt&&!En&&(En=Xt),Rn=void 0):rr[1].type==="linePrefix"||rr[1].type==="listItemValue"||rr[1].type==="listItemMarker"||rr[1].type==="listItemPrefix"||rr[1].type==="listItemPrefixWhitespace"||(Rn=void 0),!Yt&&rr[0]==="enter"&&rr[1].type==="listItemPrefix"||Yt===-1&&rr[0]==="exit"&&(rr[1].type==="listUnordered"||rr[1].type==="listOrdered")){if(Qr){let Lr=Xt;for(Xr=void 0;Lr--;){const ur=dr[Lr];if(ur[1].type==="lineEnding"||ur[1].type==="lineEndingBlank"){if(ur[0]==="exit")continue;Xr&&(dr[Xr][1].type="lineEndingBlank",lr=!0),ur[1].type="lineEnding",Xr=Lr}else if(!(ur[1].type==="linePrefix"||ur[1].type==="blockQuotePrefix"||ur[1].type==="blockQuotePrefixWhitespace"||ur[1].type==="blockQuoteMarker"||ur[1].type==="listItemIndent"))break}En&&(!Xr||En<Xr)&&(Qr._spread=!0),Qr.end=Object.assign({},Xr?dr[Xr][1].start:rr[1].end),dr.splice(Xr||Xt,0,["exit",Qr,rr[2]]),Xt++,yr++}rr[1].type==="listItemPrefix"&&(Qr={type:"listItem",_spread:!1,start:Object.assign({},rr[1].start)},dr.splice(Xt,0,["enter",Qr,rr[2]]),Xt++,yr++,En=void 0,Rn=!0)}}return dr[Mt][1]._spread=lr,yr}function l(dr,Mt){r[dr]=Mt}function a(dr){return r[dr]}function s(dr,Mt){return yr;function yr(Xt){v.call(this,dr(Xt),Xt),Mt&&Mt.call(this,Xt)}}function d(){this.stack.push({type:"fragment",children:[]})}function v(dr,Mt,yr){return this.stack[this.stack.length-1].children.push(dr),this.stack.push(dr),this.tokenStack.push([Mt,yr]),dr.position={start:Gm(Mt.start)},dr}function S(dr){return Mt;function Mt(yr){dr&&dr.call(this,yr),A.call(this,yr)}}function A(dr,Mt){const yr=this.stack.pop(),Xt=this.tokenStack.pop();if(Xt)Xt[0].type!==dr.type&&(Mt?Mt.call(this,dr,Xt[0]):(Xt[1]||az).call(this,dr,Xt[0]));else throw new Error("Cannot close `"+dr.type+"` ("+rx({start:dr.start,end:dr.end})+"): it’s not open");return yr.position.end=Gm(dr.end),yr}function P(){return yhe(this.stack.pop())}function L(){l("expectingFirstListItemValue",!0)}function F(dr){if(a("expectingFirstListItemValue")){const Mt=this.stack[this.stack.length-2];Mt.start=Number.parseInt(this.sliceSerialize(dr),10),l("expectingFirstListItemValue")}}function K(){const dr=this.resume(),Mt=this.stack[this.stack.length-1];Mt.lang=dr}function re(){const dr=this.resume(),Mt=this.stack[this.stack.length-1];Mt.meta=dr}function G(){a("flowCodeInside")||(this.buffer(),l("flowCodeInside",!0))}function H(){const dr=this.resume(),Mt=this.stack[this.stack.length-1];Mt.value=dr.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),l("flowCodeInside")}function B(){const dr=this.resume(),Mt=this.stack[this.stack.length-1];Mt.value=dr.replace(/(\r?\n|\r)$/g,"")}function $(dr){const Mt=this.resume(),yr=this.stack[this.stack.length-1];yr.label=Mt,yr.identifier=J_(this.sliceSerialize(dr)).toLowerCase()}function N(){const dr=this.resume(),Mt=this.stack[this.stack.length-1];Mt.title=dr}function z(){const dr=this.resume(),Mt=this.stack[this.stack.length-1];Mt.url=dr}function X(dr){const Mt=this.stack[this.stack.length-1];if(!Mt.depth){const yr=this.sliceSerialize(dr).length;Mt.depth=yr}}function te(){l("setextHeadingSlurpLineEnding",!0)}function pe(dr){const Mt=this.stack[this.stack.length-1];Mt.depth=this.sliceSerialize(dr).charCodeAt(0)===61?1:2}function ke(){l("setextHeadingSlurpLineEnding")}function Pe(dr){const Mt=this.stack[this.stack.length-1];let yr=Mt.children[Mt.children.length-1];(!yr||yr.type!=="text")&&(yr=ka(),yr.position={start:Gm(dr.start)},Mt.children.push(yr)),this.stack.push(yr)}function ge(dr){const Mt=this.stack.pop();Mt.value+=this.sliceSerialize(dr),Mt.position.end=Gm(dr.end)}function Ie(dr){const Mt=this.stack[this.stack.length-1];if(a("atHardBreak")){const yr=Mt.children[Mt.children.length-1];yr.position.end=Gm(dr.end),l("atHardBreak");return}!a("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(Mt.type)&&(Pe.call(this,dr),ge.call(this,dr))}function Ne(){l("atHardBreak",!0)}function lt(){const dr=this.resume(),Mt=this.stack[this.stack.length-1];Mt.value=dr}function it(){const dr=this.resume(),Mt=this.stack[this.stack.length-1];Mt.value=dr}function Rt(){const dr=this.resume(),Mt=this.stack[this.stack.length-1];Mt.value=dr}function St(){const dr=this.stack[this.stack.length-1];if(a("inReference")){const Mt=a("referenceType")||"shortcut";dr.type+="Reference",dr.referenceType=Mt,delete dr.url,delete dr.title}else delete dr.identifier,delete dr.label;l("referenceType")}function Zt(){const dr=this.stack[this.stack.length-1];if(a("inReference")){const Mt=a("referenceType")||"shortcut";dr.type+="Reference",dr.referenceType=Mt,delete dr.url,delete dr.title}else delete dr.identifier,delete dr.label;l("referenceType")}function Kt(dr){const Mt=this.sliceSerialize(dr),yr=this.stack[this.stack.length-2];yr.label=hde(Mt),yr.identifier=J_(Mt).toLowerCase()}function Ge(){const dr=this.stack[this.stack.length-1],Mt=this.resume(),yr=this.stack[this.stack.length-1];if(l("inReference",!0),yr.type==="link"){const Xt=dr.children;yr.children=Xt}else yr.alt=Mt}function Ye(){const dr=this.resume(),Mt=this.stack[this.stack.length-1];Mt.url=dr}function Dr(){const dr=this.resume(),Mt=this.stack[this.stack.length-1];Mt.title=dr}function wr(){l("inReference")}function tr(){l("referenceType","collapsed")}function br(dr){const Mt=this.resume(),yr=this.stack[this.stack.length-1];yr.label=Mt,yr.identifier=J_(this.sliceSerialize(dr)).toLowerCase(),l("referenceType","full")}function Bt(dr){l("characterReferenceType",dr.type)}function hr(dr){const Mt=this.sliceSerialize(dr),yr=a("characterReferenceType");let Xt;yr?(Xt=jj(Mt,yr==="characterReferenceMarkerNumeric"?10:16),l("characterReferenceType")):Xt=yO(Mt);const Yt=this.stack.pop();Yt.value+=Xt,Yt.position.end=Gm(dr.end)}function cr(dr){ge.call(this,dr);const Mt=this.stack[this.stack.length-1];Mt.url=this.sliceSerialize(dr)}function Mn(dr){ge.call(this,dr);const Mt=this.stack[this.stack.length-1];Mt.url="mailto:"+this.sliceSerialize(dr)}function Hn(){return{type:"blockquote",children:[]}}function Qn(){return{type:"code",lang:null,meta:null,value:""}}function an(){return{type:"inlineCode",value:""}}function ki(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Xn(){return{type:"emphasis",children:[]}}function Li(){return{type:"heading",depth:void 0,children:[]}}function Pi(){return{type:"break"}}function Yi(){return{type:"html",value:""}}function gi(){return{type:"image",title:null,url:"",alt:null}}function ea(){return{type:"link",title:null,url:"",children:[]}}function ya(dr){return{type:"list",ordered:dr.type==="listOrdered",start:null,spread:dr._spread,children:[]}}function La(dr){return{type:"listItem",spread:dr._spread,checked:null,children:[]}}function Aa(){return{type:"paragraph",children:[]}}function $a(){return{type:"strong",children:[]}}function ka(){return{type:"text",value:""}}function Ka(){return{type:"thematicBreak"}}}function Gm(e){return{line:e.line,column:e.column,offset:e.offset}}function qj(e,t){let r=-1;for(;++r<t.length;){const n=t[r];Array.isArray(n)?qj(e,n):gde(e,n)}}function gde(e,t){let r;for(r in t)if(Vj.call(t,r)){if(r==="canContainEols"){const n=t[r];n&&e[r].push(...n)}else if(r==="transforms"){const n=t[r];n&&e[r].push(...n)}else if(r==="enter"||r==="exit"){const n=t[r];n&&Object.assign(e[r],n)}}}function az(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+rx({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+rx({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+rx({start:t.start,end:t.end})+") is still open")}function yde(e){Object.assign(this,{Parser:r=>{const n=this.data("settings");return dde(r,Object.assign({},n,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}function vde(e,t){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function _de(e,t){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:`
`}]}function bde(e,t){const r=t.value?t.value+`
`:"",n=t.lang?t.lang.match(/^[^ \t]+(?=[ \t]|$)/):null,i={};n&&(i.className=["language-"+n]);let l={type:"element",tagName:"code",properties:i,children:[{type:"text",value:r}]};return t.meta&&(l.data={meta:t.meta}),e.patch(t,l),l=e.applyData(t,l),l={type:"element",tagName:"pre",properties:{},children:[l]},e.patch(t,l),l}function xde(e,t){const r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function wde(e,t){const r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function D0(e){const t=[];let r=-1,n=0,i=0;for(;++r<e.length;){const l=e.charCodeAt(r);let a="";if(l===37&&kf(e.charCodeAt(r+1))&&kf(e.charCodeAt(r+2)))i=2;else if(l<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(l))||(a=String.fromCharCode(l));else if(l>55295&&l<57344){const s=e.charCodeAt(r+1);l<56320&&s>56319&&s<57344?(a=String.fromCharCode(l,s),i=1):a="�"}else a=String.fromCharCode(l);a&&(t.push(e.slice(n,r),encodeURIComponent(a)),n=r+i+1,a=""),i&&(r+=i,i=0)}return t.join("")+e.slice(n)}function Gj(e,t){const r=String(t.identifier).toUpperCase(),n=D0(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let l;i===-1?(e.footnoteOrder.push(r),e.footnoteCounts[r]=1,l=e.footnoteOrder.length):(e.footnoteCounts[r]++,l=i+1);const a=e.footnoteCounts[r],s={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fn-"+n,id:e.clobberPrefix+"fnref-"+n+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(t,s);const d={type:"element",tagName:"sup",properties:{},children:[s]};return e.patch(t,d),e.applyData(t,d)}function Sde(e,t){const r=e.footnoteById;let n=1;for(;n in r;)n++;const i=String(n);return r[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:t.children}],position:t.position},Gj(e,{type:"footnoteReference",identifier:i,position:t.position})}function Ede(e,t){const r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Cde(e,t){if(e.dangerous){const r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}return null}function Hj(e,t){const r=t.referenceType;let n="]";if(r==="collapsed"?n+="[]":r==="full"&&(n+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return{type:"text",value:"!["+t.alt+n};const i=e.all(t),l=i[0];l&&l.type==="text"?l.value="["+l.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=n:i.push({type:"text",value:n}),i}function Pde(e,t){const r=e.definition(t.identifier);if(!r)return Hj(e,t);const n={src:D0(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(n.title=r.title);const i={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,i),e.applyData(t,i)}function Tde(e,t){const r={src:D0(t.url)};t.alt!==null&&t.alt!==void 0&&(r.alt=t.alt),t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,n),e.applyData(t,n)}function Ade(e,t){const r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);const n={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,n),e.applyData(t,n)}function kde(e,t){const r=e.definition(t.identifier);if(!r)return Hj(e,t);const n={href:D0(r.url||"")};r.title!==null&&r.title!==void 0&&(n.title=r.title);const i={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function Ide(e,t){const r={href:D0(t.url)};t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Mde(e,t,r){const n=e.all(t),i=r?Ode(r):Wj(t),l={},a=[];if(typeof t.checked=="boolean"){const S=n[0];let A;S&&S.type==="element"&&S.tagName==="p"?A=S:(A={type:"element",tagName:"p",properties:{},children:[]},n.unshift(A)),A.children.length>0&&A.children.unshift({type:"text",value:" "}),A.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),l.className=["task-list-item"]}let s=-1;for(;++s<n.length;){const S=n[s];(i||s!==0||S.type!=="element"||S.tagName!=="p")&&a.push({type:"text",value:`
`}),S.type==="element"&&S.tagName==="p"&&!i?a.push(...S.children):a.push(S)}const d=n[n.length-1];d&&(i||d.type!=="element"||d.tagName!=="p")&&a.push({type:"text",value:`
`});const v={type:"element",tagName:"li",properties:l,children:a};return e.patch(t,v),e.applyData(t,v)}function Ode(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const r=e.children;let n=-1;for(;!t&&++n<r.length;)t=Wj(r[n])}return t}function Wj(e){const t=e.spread;return t??e.children.length>1}function Rde(e,t){const r={},n=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(r.start=t.start);++i<n.length;){const a=n[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const l={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(n,!0)};return e.patch(t,l),e.applyData(t,l)}function Dde(e,t){const r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function zde(e,t){const r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function Lde(e,t){const r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}const _O=Zj("start"),bO=Zj("end");function $de(e){return{start:_O(e),end:bO(e)}}function Zj(e){return t;function t(r){const n=r&&r.position&&r.position[e]||{};return{line:n.line||null,column:n.column||null,offset:n.offset>-1?n.offset:null}}}function Nde(e,t){const r=e.all(t),n=r.shift(),i=[];if(n){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([n],!0)};e.patch(t.children[0],a),i.push(a)}if(r.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},s=_O(t.children[1]),d=bO(t.children[t.children.length-1]);s.line&&d.line&&(a.position={start:s,end:d}),i.push(a)}const l={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,l),e.applyData(t,l)}function Bde(e,t,r){const n=r?r.children:void 0,l=(n?n.indexOf(t):1)===0?"th":"td",a=r&&r.type==="table"?r.align:void 0,s=a?a.length:t.children.length;let d=-1;const v=[];for(;++d<s;){const A=t.children[d],P={},L=a?a[d]:void 0;L&&(P.align=L);let F={type:"element",tagName:l,properties:P,children:[]};A&&(F.children=e.all(A),e.patch(A,F),F=e.applyData(t,F)),v.push(F)}const S={type:"element",tagName:"tr",properties:{},children:e.wrap(v,!0)};return e.patch(t,S),e.applyData(t,S)}function Fde(e,t){const r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}const oz=9,sz=32;function Ude(e){const t=String(e),r=/\r?\n|\r/g;let n=r.exec(t),i=0;const l=[];for(;n;)l.push(lz(t.slice(i,n.index),i>0,!0),n[0]),i=n.index+n[0].length,n=r.exec(t);return l.push(lz(t.slice(i),i>0,!1)),l.join("")}function lz(e,t,r){let n=0,i=e.length;if(t){let l=e.codePointAt(n);for(;l===oz||l===sz;)n++,l=e.codePointAt(n)}if(r){let l=e.codePointAt(i-1);for(;l===oz||l===sz;)i--,l=e.codePointAt(i-1)}return i>n?e.slice(n,i):""}function jde(e,t){const r={type:"text",value:Ude(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function Vde(e,t){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}const qde={blockquote:vde,break:_de,code:bde,delete:xde,emphasis:wde,footnoteReference:Gj,footnote:Sde,heading:Ede,html:Cde,imageReference:Pde,image:Tde,inlineCode:Ade,linkReference:kde,link:Ide,listItem:Mde,list:Rde,paragraph:Dde,root:zde,strong:Lde,table:Nde,tableCell:Fde,tableRow:Bde,text:jde,thematicBreak:Vde,toml:mw,yaml:mw,definition:mw,footnoteDefinition:mw};function mw(){return null}const Xj=function(e){if(e==null)return Zde;if(typeof e=="string")return Wde(e);if(typeof e=="object")return Array.isArray(e)?Gde(e):Hde(e);if(typeof e=="function")return TE(e);throw new Error("Expected function, string, or object as test")};function Gde(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=Xj(e[r]);return TE(n);function n(...i){let l=-1;for(;++l<t.length;)if(t[l].call(this,...i))return!0;return!1}}function Hde(e){return TE(t);function t(r){let n;for(n in e)if(r[n]!==e[n])return!1;return!0}}function Wde(e){return TE(t);function t(r){return r&&r.type===e}}function TE(e){return t;function t(r,...n){return!!(r&&typeof r=="object"&&"type"in r&&e.call(this,r,...n))}}function Zde(){return!0}const Xde=!0,uz=!1,Kde="skip",Yde=function(e,t,r,n){typeof t=="function"&&typeof r!="function"&&(n=r,r=t,t=null);const i=Xj(t),l=n?-1:1;a(e,void 0,[])();function a(s,d,v){const S=s&&typeof s=="object"?s:{};if(typeof S.type=="string"){const P=typeof S.tagName=="string"?S.tagName:typeof S.name=="string"?S.name:void 0;Object.defineProperty(A,"name",{value:"node ("+(s.type+(P?"<"+P+">":""))+")"})}return A;function A(){let P=[],L,F,K;if((!t||i(s,d,v[v.length-1]||null))&&(P=Jde(r(s,v)),P[0]===uz))return P;if(s.children&&P[0]!==Kde)for(F=(n?s.children.length:-1)+l,K=v.concat(s);F>-1&&F<s.children.length;){if(L=a(s.children[F],F,K)(),L[0]===uz)return L;F=typeof L[1]=="number"?L[1]:F+l}return P}}};function Jde(e){return Array.isArray(e)?e:typeof e=="number"?[Xde,e]:[e]}const xO=function(e,t,r,n){typeof t=="function"&&typeof r!="function"&&(n=r,r=t,t=null),Yde(e,t,i,n);function i(l,a){const s=a[a.length-1];return r(l,s?s.children.indexOf(l):null,s)}};function Qde(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const cz={}.hasOwnProperty;function eme(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return xO(e,"definition",n=>{const i=fz(n.identifier);i&&!cz.call(t,i)&&(t[i]=n)}),r;function r(n){const i=fz(n);return i&&cz.call(t,i)?t[i]:null}}function fz(e){return String(e||"").toUpperCase()}const H2={}.hasOwnProperty;function tme(e,t){const r=t||{},n=r.allowDangerousHtml||!1,i={};return a.dangerous=n,a.clobberPrefix=r.clobberPrefix===void 0||r.clobberPrefix===null?"user-content-":r.clobberPrefix,a.footnoteLabel=r.footnoteLabel||"Footnotes",a.footnoteLabelTagName=r.footnoteLabelTagName||"h2",a.footnoteLabelProperties=r.footnoteLabelProperties||{className:["sr-only"]},a.footnoteBackLabel=r.footnoteBackLabel||"Back to content",a.unknownHandler=r.unknownHandler,a.passThrough=r.passThrough,a.handlers={...qde,...r.handlers},a.definition=eme(e),a.footnoteById=i,a.footnoteOrder=[],a.footnoteCounts={},a.patch=rme,a.applyData=nme,a.one=s,a.all=d,a.wrap=ame,a.augment=l,xO(e,"footnoteDefinition",v=>{const S=String(v.identifier).toUpperCase();H2.call(i,S)||(i[S]=v)}),a;function l(v,S){if(v&&"data"in v&&v.data){const A=v.data;A.hName&&(S.type!=="element"&&(S={type:"element",tagName:"",properties:{},children:[]}),S.tagName=A.hName),S.type==="element"&&A.hProperties&&(S.properties={...S.properties,...A.hProperties}),"children"in S&&S.children&&A.hChildren&&(S.children=A.hChildren)}if(v){const A="type"in v?v:{position:v};Qde(A)||(S.position={start:_O(A),end:bO(A)})}return S}function a(v,S,A,P){return Array.isArray(A)&&(P=A,A={}),l(v,{type:"element",tagName:S,properties:A||{},children:P||[]})}function s(v,S){return Kj(a,v,S)}function d(v){return wO(a,v)}}function rme(e,t){e.position&&(t.position=$de(e))}function nme(e,t){let r=t;if(e&&e.data){const n=e.data.hName,i=e.data.hChildren,l=e.data.hProperties;typeof n=="string"&&(r.type==="element"?r.tagName=n:r={type:"element",tagName:n,properties:{},children:[]}),r.type==="element"&&l&&(r.properties={...r.properties,...l}),"children"in r&&r.children&&i!==null&&i!==void 0&&(r.children=i)}return r}function Kj(e,t,r){const n=t&&t.type;if(!n)throw new Error("Expected node, got `"+t+"`");return H2.call(e.handlers,n)?e.handlers[n](e,t,r):e.passThrough&&e.passThrough.includes(n)?"children"in t?{...t,children:wO(e,t)}:t:e.unknownHandler?e.unknownHandler(e,t,r):ime(e,t)}function wO(e,t){const r=[];if("children"in t){const n=t.children;let i=-1;for(;++i<n.length;){const l=Kj(e,n[i],t);if(l){if(i&&n[i-1].type==="break"&&(!Array.isArray(l)&&l.type==="text"&&(l.value=l.value.replace(/^\s+/,"")),!Array.isArray(l)&&l.type==="element")){const a=l.children[0];a&&a.type==="text"&&(a.value=a.value.replace(/^\s+/,""))}Array.isArray(l)?r.push(...l):r.push(l)}}}return r}function ime(e,t){const r=t.data||{},n="value"in t&&!(H2.call(r,"hProperties")||H2.call(r,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:wO(e,t)};return e.patch(t,n),e.applyData(t,n)}function ame(e,t){const r=[];let n=-1;for(t&&r.push({type:"text",value:`
`});++n<e.length;)n&&r.push({type:"text",value:`
`}),r.push(e[n]);return t&&e.length>0&&r.push({type:"text",value:`
`}),r}function ome(e){const t=[];let r=-1;for(;++r<e.footnoteOrder.length;){const n=e.footnoteById[e.footnoteOrder[r]];if(!n)continue;const i=e.all(n),l=String(n.identifier).toUpperCase(),a=D0(l.toLowerCase());let s=0;const d=[];for(;++s<=e.footnoteCounts[l];){const A={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+a+(s>1?"-"+s:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:"↩"}]};s>1&&A.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(s)}]}),d.length>0&&d.push({type:"text",value:" "}),d.push(A)}const v=i[i.length-1];if(v&&v.type==="element"&&v.tagName==="p"){const A=v.children[v.children.length-1];A&&A.type==="text"?A.value+=" ":v.children.push({type:"text",value:" "}),v.children.push(...d)}else i.push(...d);const S={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+a},children:e.wrap(i,!0)};e.patch(n,S),t.push(S)}if(t.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[{type:"text",value:e.footnoteLabel}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(t,!0)},{type:"text",value:`
`}]}}function Yj(e,t){const r=tme(e,t),n=r.one(e,null),i=ome(r);return i&&n.children.push({type:"text",value:`
`},i),Array.isArray(n)?{type:"root",children:n}:n}const sme=function(e,t){return e&&"run"in e?ume(e,t):cme(e||t)},lme=sme;function ume(e,t){return(r,n,i)=>{e.run(Yj(r,t),n,l=>{i(l)})}}function cme(e){return t=>Yj(t,e)}var Jj={exports:{}},fme="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",hme=fme,pme=hme;function Qj(){}function e9(){}e9.resetWarningCache=Qj;var dme=function(){function e(n,i,l,a,s,d){if(d!==pme){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:e9,resetWarningCache:Qj};return r.PropTypes=r,r};Jj.exports=dme();var t9=Jj.exports;const Tr=Xs(t9);class i1{constructor(t,r,n){this.property=t,this.normal=r,n&&(this.space=n)}}i1.prototype.property={};i1.prototype.normal={};i1.prototype.space=null;function r9(e,t){const r={},n={};let i=-1;for(;++i<e.length;)Object.assign(r,e[i].property),Object.assign(n,e[i].normal);return new i1(r,n,t)}function wk(e){return e.toLowerCase()}class Oh{constructor(t,r){this.property=t,this.attribute=r}}Oh.prototype.space=null;Oh.prototype.boolean=!1;Oh.prototype.booleanish=!1;Oh.prototype.overloadedBoolean=!1;Oh.prototype.number=!1;Oh.prototype.commaSeparated=!1;Oh.prototype.spaceSeparated=!1;Oh.prototype.commaOrSpaceSeparated=!1;Oh.prototype.mustUseProperty=!1;Oh.prototype.defined=!1;let mme=0;const Ca=Yy(),Sl=Yy(),n9=Yy(),_n=Yy(),us=Yy(),Q_=Yy(),Sf=Yy();function Yy(){return 2**++mme}const Sk=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ca,booleanish:Sl,commaOrSpaceSeparated:Sf,commaSeparated:Q_,number:_n,overloadedBoolean:n9,spaceSeparated:us},Symbol.toStringTag,{value:"Module"})),HP=Object.keys(Sk);class SO extends Oh{constructor(t,r,n,i){let l=-1;if(super(t,r),hz(this,"space",i),typeof n=="number")for(;++l<HP.length;){const a=HP[l];hz(this,HP[l],(n&Sk[a])===Sk[a])}}}SO.prototype.defined=!0;function hz(e,t,r){r&&(e[t]=r)}const gme={}.hasOwnProperty;function z0(e){const t={},r={};let n;for(n in e.properties)if(gme.call(e.properties,n)){const i=e.properties[n],l=new SO(n,e.transform(e.attributes||{},n),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(l.mustUseProperty=!0),t[n]=l,r[wk(n)]=n,r[wk(l.attribute)]=n}return new i1(t,r,e.space)}const i9=z0({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),a9=z0({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function o9(e,t){return t in e?e[t]:t}function s9(e,t){return o9(e,t.toLowerCase())}const l9=z0({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:s9,properties:{xmlns:null,xmlnsXLink:null}}),u9=z0({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Sl,ariaAutoComplete:null,ariaBusy:Sl,ariaChecked:Sl,ariaColCount:_n,ariaColIndex:_n,ariaColSpan:_n,ariaControls:us,ariaCurrent:null,ariaDescribedBy:us,ariaDetails:null,ariaDisabled:Sl,ariaDropEffect:us,ariaErrorMessage:null,ariaExpanded:Sl,ariaFlowTo:us,ariaGrabbed:Sl,ariaHasPopup:null,ariaHidden:Sl,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:us,ariaLevel:_n,ariaLive:null,ariaModal:Sl,ariaMultiLine:Sl,ariaMultiSelectable:Sl,ariaOrientation:null,ariaOwns:us,ariaPlaceholder:null,ariaPosInSet:_n,ariaPressed:Sl,ariaReadOnly:Sl,ariaRelevant:null,ariaRequired:Sl,ariaRoleDescription:us,ariaRowCount:_n,ariaRowIndex:_n,ariaRowSpan:_n,ariaSelected:Sl,ariaSetSize:_n,ariaSort:null,ariaValueMax:_n,ariaValueMin:_n,ariaValueNow:_n,ariaValueText:null,role:null}}),yme=z0({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:s9,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Q_,acceptCharset:us,accessKey:us,action:null,allow:null,allowFullScreen:Ca,allowPaymentRequest:Ca,allowUserMedia:Ca,alt:null,as:null,async:Ca,autoCapitalize:null,autoComplete:us,autoFocus:Ca,autoPlay:Ca,capture:Ca,charSet:null,checked:Ca,cite:null,className:us,cols:_n,colSpan:null,content:null,contentEditable:Sl,controls:Ca,controlsList:us,coords:_n|Q_,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ca,defer:Ca,dir:null,dirName:null,disabled:Ca,download:n9,draggable:Sl,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ca,formTarget:null,headers:us,height:_n,hidden:Ca,high:_n,href:null,hrefLang:null,htmlFor:us,httpEquiv:us,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:Ca,itemId:null,itemProp:us,itemRef:us,itemScope:Ca,itemType:us,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ca,low:_n,manifest:null,max:null,maxLength:_n,media:null,method:null,min:null,minLength:_n,multiple:Ca,muted:Ca,name:null,nonce:null,noModule:Ca,noValidate:Ca,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ca,optimum:_n,pattern:null,ping:us,placeholder:null,playsInline:Ca,poster:null,preload:null,readOnly:Ca,referrerPolicy:null,rel:us,required:Ca,reversed:Ca,rows:_n,rowSpan:_n,sandbox:us,scope:null,scoped:Ca,seamless:Ca,selected:Ca,shape:null,size:_n,sizes:null,slot:null,span:_n,spellCheck:Sl,src:null,srcDoc:null,srcLang:null,srcSet:null,start:_n,step:null,style:null,tabIndex:_n,target:null,title:null,translate:null,type:null,typeMustMatch:Ca,useMap:null,value:Sl,width:_n,wrap:null,align:null,aLink:null,archive:us,axis:null,background:null,bgColor:null,border:_n,borderColor:null,bottomMargin:_n,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ca,declare:Ca,event:null,face:null,frame:null,frameBorder:null,hSpace:_n,leftMargin:_n,link:null,longDesc:null,lowSrc:null,marginHeight:_n,marginWidth:_n,noResize:Ca,noHref:Ca,noShade:Ca,noWrap:Ca,object:null,profile:null,prompt:null,rev:null,rightMargin:_n,rules:null,scheme:null,scrolling:Sl,standby:null,summary:null,text:null,topMargin:_n,valueType:null,version:null,vAlign:null,vLink:null,vSpace:_n,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ca,disableRemotePlayback:Ca,prefix:null,property:null,results:_n,security:null,unselectable:null}}),vme=z0({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:o9,properties:{about:Sf,accentHeight:_n,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:_n,amplitude:_n,arabicForm:null,ascent:_n,attributeName:null,attributeType:null,azimuth:_n,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:_n,by:null,calcMode:null,capHeight:_n,className:us,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:_n,diffuseConstant:_n,direction:null,display:null,dur:null,divisor:_n,dominantBaseline:null,download:Ca,dx:null,dy:null,edgeMode:null,editable:null,elevation:_n,enableBackground:null,end:null,event:null,exponent:_n,externalResourcesRequired:null,fill:null,fillOpacity:_n,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Q_,g2:Q_,glyphName:Q_,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:_n,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:_n,horizOriginX:_n,horizOriginY:_n,id:null,ideographic:_n,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:_n,k:_n,k1:_n,k2:_n,k3:_n,k4:_n,kernelMatrix:Sf,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:_n,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:_n,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:_n,overlineThickness:_n,paintOrder:null,panose1:null,path:null,pathLength:_n,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:us,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:_n,pointsAtY:_n,pointsAtZ:_n,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Sf,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Sf,rev:Sf,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Sf,requiredFeatures:Sf,requiredFonts:Sf,requiredFormats:Sf,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:_n,specularExponent:_n,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:_n,strikethroughThickness:_n,string:null,stroke:null,strokeDashArray:Sf,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:_n,strokeOpacity:_n,strokeWidth:null,style:null,surfaceScale:_n,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Sf,tabIndex:_n,tableValues:null,target:null,targetX:_n,targetY:_n,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Sf,to:null,transform:null,u1:null,u2:null,underlinePosition:_n,underlineThickness:_n,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:_n,values:null,vAlphabetic:_n,vMathematical:_n,vectorEffect:null,vHanging:_n,vIdeographic:_n,version:null,vertAdvY:_n,vertOriginX:_n,vertOriginY:_n,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:_n,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),_me=/^data[-\w.:]+$/i,pz=/-[a-z]/g,bme=/[A-Z]/g;function xme(e,t){const r=wk(t);let n=t,i=Oh;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&_me.test(t)){if(t.charAt(4)==="-"){const l=t.slice(5).replace(pz,Sme);n="data"+l.charAt(0).toUpperCase()+l.slice(1)}else{const l=t.slice(4);if(!pz.test(l)){let a=l.replace(bme,wme);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}i=SO}return new i(n,t)}function wme(e){return"-"+e.toLowerCase()}function Sme(e){return e.charAt(1).toUpperCase()}const dz={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Eme=r9([a9,i9,l9,u9,yme],"html"),Cme=r9([a9,i9,l9,u9,vme],"svg");function Pme(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{xO(t,"element",(r,n,i)=>{const l=i;let a;if(e.allowedElements?a=!e.allowedElements.includes(r.tagName):e.disallowedElements&&(a=e.disallowedElements.includes(r.tagName)),!a&&e.allowElement&&typeof n=="number"&&(a=!e.allowElement(r,n,l)),a&&typeof n=="number")return e.unwrapDisallowed&&r.children?l.children.splice(n,1,...r.children):l.children.splice(n,1),n})}}var c9={exports:{}},Oo={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EO=Symbol.for("react.element"),CO=Symbol.for("react.portal"),AE=Symbol.for("react.fragment"),kE=Symbol.for("react.strict_mode"),IE=Symbol.for("react.profiler"),ME=Symbol.for("react.provider"),OE=Symbol.for("react.context"),Tme=Symbol.for("react.server_context"),RE=Symbol.for("react.forward_ref"),DE=Symbol.for("react.suspense"),zE=Symbol.for("react.suspense_list"),LE=Symbol.for("react.memo"),$E=Symbol.for("react.lazy"),Ame=Symbol.for("react.offscreen"),f9;f9=Symbol.for("react.module.reference");function Rh(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case EO:switch(e=e.type,e){case AE:case IE:case kE:case DE:case zE:return e;default:switch(e=e&&e.$$typeof,e){case Tme:case OE:case RE:case $E:case LE:case ME:return e;default:return t}}case CO:return t}}}Oo.ContextConsumer=OE;Oo.ContextProvider=ME;Oo.Element=EO;Oo.ForwardRef=RE;Oo.Fragment=AE;Oo.Lazy=$E;Oo.Memo=LE;Oo.Portal=CO;Oo.Profiler=IE;Oo.StrictMode=kE;Oo.Suspense=DE;Oo.SuspenseList=zE;Oo.isAsyncMode=function(){return!1};Oo.isConcurrentMode=function(){return!1};Oo.isContextConsumer=function(e){return Rh(e)===OE};Oo.isContextProvider=function(e){return Rh(e)===ME};Oo.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===EO};Oo.isForwardRef=function(e){return Rh(e)===RE};Oo.isFragment=function(e){return Rh(e)===AE};Oo.isLazy=function(e){return Rh(e)===$E};Oo.isMemo=function(e){return Rh(e)===LE};Oo.isPortal=function(e){return Rh(e)===CO};Oo.isProfiler=function(e){return Rh(e)===IE};Oo.isStrictMode=function(e){return Rh(e)===kE};Oo.isSuspense=function(e){return Rh(e)===DE};Oo.isSuspenseList=function(e){return Rh(e)===zE};Oo.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===AE||e===IE||e===kE||e===DE||e===zE||e===Ame||typeof e=="object"&&e!==null&&(e.$$typeof===$E||e.$$typeof===LE||e.$$typeof===ME||e.$$typeof===OE||e.$$typeof===RE||e.$$typeof===f9||e.getModuleId!==void 0)};Oo.typeOf=Rh;c9.exports=Oo;var kme=c9.exports;const Ime=Xs(kme);function Mme(e){const t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function Ome(e){return e.join(" ").trim()}function Rme(e,t){const r=t||{};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}var PO={exports:{}},mz=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Dme=/\n/g,zme=/^\s*/,Lme=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,$me=/^:\s*/,Nme=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Bme=/^[;\s]*/,Fme=/^\s+|\s+$/g,Ume=`
`,gz="/",yz="*",dy="",jme="comment",Vme="declaration",qme=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var r=1,n=1;function i(F){var K=F.match(Dme);K&&(r+=K.length);var re=F.lastIndexOf(Ume);n=~re?F.length-re:n+F.length}function l(){var F={line:r,column:n};return function(K){return K.position=new a(F),v(),K}}function a(F){this.start=F,this.end={line:r,column:n},this.source=t.source}a.prototype.content=e;function s(F){var K=new Error(t.source+":"+r+":"+n+": "+F);if(K.reason=F,K.filename=t.source,K.line=r,K.column=n,K.source=e,!t.silent)throw K}function d(F){var K=F.exec(e);if(K){var re=K[0];return i(re),e=e.slice(re.length),K}}function v(){d(zme)}function S(F){var K;for(F=F||[];K=A();)K!==!1&&F.push(K);return F}function A(){var F=l();if(!(gz!=e.charAt(0)||yz!=e.charAt(1))){for(var K=2;dy!=e.charAt(K)&&(yz!=e.charAt(K)||gz!=e.charAt(K+1));)++K;if(K+=2,dy===e.charAt(K-1))return s("End of comment missing");var re=e.slice(2,K-2);return n+=2,i(re),e=e.slice(K),n+=2,F({type:jme,comment:re})}}function P(){var F=l(),K=d(Lme);if(K){if(A(),!d($me))return s("property missing ':'");var re=d(Nme),G=F({type:Vme,property:vz(K[0].replace(mz,dy)),value:re?vz(re[0].replace(mz,dy)):dy});return d(Bme),G}}function L(){var F=[];S(F);for(var K;K=P();)K!==!1&&(F.push(K),S(F));return F}return v(),L()};function vz(e){return e?e.replace(Fme,dy):dy}var Gme=qme;function h9(e,t){var r=null;if(!e||typeof e!="string")return r;for(var n,i=Gme(e),l=typeof t=="function",a,s,d=0,v=i.length;d<v;d++)n=i[d],a=n.property,s=n.value,l?t(a,s,n):s&&(r||(r={}),r[a]=s);return r}PO.exports=h9;PO.exports.default=h9;var Hme=PO.exports;const Wme=Xs(Hme),Ek={}.hasOwnProperty,Zme=new Set(["table","thead","tbody","tfoot","tr"]);function p9(e,t){const r=[];let n=-1,i;for(;++n<t.children.length;)i=t.children[n],i.type==="element"?r.push(Xme(e,i,n,t)):i.type==="text"?(t.type!=="element"||!Zme.has(t.tagName)||!Mme(i))&&r.push(i.value):i.type==="raw"&&!e.options.skipHtml&&r.push(i.value);return r}function Xme(e,t,r,n){const i=e.options,l=i.transformLinkUri===void 0?Kfe:i.transformLinkUri,a=e.schema,s=t.tagName,d={};let v=a,S;if(a.space==="html"&&s==="svg"&&(v=Cme,e.schema=v),t.properties)for(S in t.properties)Ek.call(t.properties,S)&&Yme(d,S,t.properties[S],e);(s==="ol"||s==="ul")&&e.listDepth++;const A=p9(e,t);(s==="ol"||s==="ul")&&e.listDepth--,e.schema=a;const P=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},L=i.components&&Ek.call(i.components,s)?i.components[s]:s,F=typeof L=="string"||L===Ee.Fragment;if(!Ime.isValidElementType(L))throw new TypeError(`Component for name \`${s}\` not defined or is not renderable`);if(d.key=r,s==="a"&&i.linkTarget&&(d.target=typeof i.linkTarget=="function"?i.linkTarget(String(d.href||""),t.children,typeof d.title=="string"?d.title:null):i.linkTarget),s==="a"&&l&&(d.href=l(String(d.href||""),t.children,typeof d.title=="string"?d.title:null)),!F&&s==="code"&&n.type==="element"&&n.tagName!=="pre"&&(d.inline=!0),!F&&(s==="h1"||s==="h2"||s==="h3"||s==="h4"||s==="h5"||s==="h6")&&(d.level=Number.parseInt(s.charAt(1),10)),s==="img"&&i.transformImageUri&&(d.src=i.transformImageUri(String(d.src||""),String(d.alt||""),typeof d.title=="string"?d.title:null)),!F&&s==="li"&&n.type==="element"){const K=Kme(t);d.checked=K&&K.properties?!!K.properties.checked:null,d.index=WP(n,t),d.ordered=n.tagName==="ol"}return!F&&(s==="ol"||s==="ul")&&(d.ordered=s==="ol",d.depth=e.listDepth),(s==="td"||s==="th")&&(d.align&&(d.style||(d.style={}),d.style.textAlign=d.align,delete d.align),F||(d.isHeader=s==="th")),!F&&s==="tr"&&n.type==="element"&&(d.isHeader=n.tagName==="thead"),i.sourcePos&&(d["data-sourcepos"]=ege(P)),!F&&i.rawSourcePos&&(d.sourcePosition=t.position),!F&&i.includeElementIndex&&(d.index=WP(n,t),d.siblingCount=WP(n)),F||(d.node=t),A.length>0?Ee.createElement(L,d,A):Ee.createElement(L,d)}function Kme(e){let t=-1;for(;++t<e.children.length;){const r=e.children[t];if(r.type==="element"&&r.tagName==="input")return r}return null}function WP(e,t){let r=-1,n=0;for(;++r<e.children.length&&e.children[r]!==t;)e.children[r].type==="element"&&n++;return n}function Yme(e,t,r,n){const i=xme(n.schema,t);let l=r;l==null||l!==l||(Array.isArray(l)&&(l=i.commaSeparated?Rme(l):Ome(l)),i.property==="style"&&typeof l=="string"&&(l=Jme(l)),i.space&&i.property?e[Ek.call(dz,i.property)?dz[i.property]:i.property]=l:i.attribute&&(e[i.attribute]=l))}function Jme(e){const t={};try{Wme(e,r)}catch{}return t;function r(n,i){const l=n.slice(0,4)==="-ms-"?`ms-${n.slice(4)}`:n;t[l.replace(/-([a-z])/g,Qme)]=i}}function Qme(e,t){return t.toUpperCase()}function ege(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const _z={}.hasOwnProperty,tge="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",gw={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function d9(e){for(const l in gw)if(_z.call(gw,l)&&_z.call(e,l)){const a=gw[l];console.warn(`[react-markdown] Warning: please ${a.to?`use \`${a.to}\` instead of`:"remove"} \`${l}\` (see <${tge}#${a.id}> for more info)`),delete gw[l]}const t=hhe().use(yde).use(e.remarkPlugins||[]).use(lme,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(Pme,e),r=new Aj;typeof e.children=="string"?r.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const n=t.runSync(t.parse(r),r);if(n.type!=="root")throw new TypeError("Expected a `root` node");let i=Ee.createElement(Ee.Fragment,{},p9({options:e,schema:Eme,listDepth:0},n));return e.className&&(i=Ee.createElement("div",{className:e.className},i)),i}d9.propTypes={children:Tr.string,className:Tr.string,allowElement:Tr.func,allowedElements:Tr.arrayOf(Tr.string),disallowedElements:Tr.arrayOf(Tr.string),unwrapDisallowed:Tr.bool,remarkPlugins:Tr.arrayOf(Tr.oneOfType([Tr.object,Tr.func,Tr.arrayOf(Tr.oneOfType([Tr.bool,Tr.string,Tr.object,Tr.func,Tr.arrayOf(Tr.any)]))])),rehypePlugins:Tr.arrayOf(Tr.oneOfType([Tr.object,Tr.func,Tr.arrayOf(Tr.oneOfType([Tr.bool,Tr.string,Tr.object,Tr.func,Tr.arrayOf(Tr.any)]))])),sourcePos:Tr.bool,rawSourcePos:Tr.bool,skipHtml:Tr.bool,includeElementIndex:Tr.bool,transformLinkUri:Tr.oneOfType([Tr.func,Tr.bool]),linkTarget:Tr.oneOfType([Tr.func,Tr.string]),transformImageUri:Tr.func,components:Tr.object};var ZP,bz;function rge(){return bz||(bz=1,ZP=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),ZP}var XP,xz;function nge(){return xz||(xz=1,XP=/[\0-\x1F\x7F-\x9F]/),XP}var KP,wz;function ige(){return wz||(wz=1,KP=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/),KP}var YP,Sz;function age(){return Sz||(Sz=1,YP=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/),YP}var JP,Ez;function oge(){return Ez||(Ez=1,JP=function(e){var t={};e=e||{},t.src_Any=rge().source,t.src_Cc=nge().source,t.src_Z=ige().source,t.src_P=age().source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");var r="[><｜]";return t.src_pseudo_letter="(?:(?!"+r+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+r+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+r+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}),JP}function Ck(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(r){r&&Object.keys(r).forEach(function(n){e[n]=r[n]})}),e}function NE(e){return Object.prototype.toString.call(e)}function sge(e){return NE(e)==="[object String]"}function lge(e){return NE(e)==="[object Object]"}function uge(e){return NE(e)==="[object RegExp]"}function Cz(e){return NE(e)==="[object Function]"}function cge(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var m9={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function fge(e){return Object.keys(e||{}).reduce(function(t,r){return t||m9.hasOwnProperty(r)},!1)}var hge={"http:":{validate:function(e,t,r){var n=e.slice(t);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,r){var n=e.slice(t);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,r){var n=e.slice(t);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},pge="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",dge="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function mge(e){e.__index__=-1,e.__text_cache__=""}function gge(e){return function(t,r){var n=t.slice(r);return e.test(n)?n.match(e)[0].length:0}}function Pz(){return function(e,t){t.normalize(e)}}function W2(e){var t=e.re=oge()(e.__opts__),r=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||r.push(pge),r.push(t.src_xn),t.src_tlds=r.join("|");function n(s){return s.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(n(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(n(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(n(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(n(t.tpl_host_fuzzy_test),"i");var i=[];e.__compiled__={};function l(s,d){throw new Error('(LinkifyIt) Invalid schema "'+s+'": '+d)}Object.keys(e.__schemas__).forEach(function(s){var d=e.__schemas__[s];if(d!==null){var v={validate:null,link:null};if(e.__compiled__[s]=v,lge(d)){uge(d.validate)?v.validate=gge(d.validate):Cz(d.validate)?v.validate=d.validate:l(s,d),Cz(d.normalize)?v.normalize=d.normalize:d.normalize?l(s,d):v.normalize=Pz();return}if(sge(d)){i.push(s);return}l(s,d)}}),i.forEach(function(s){e.__compiled__[e.__schemas__[s]]&&(e.__compiled__[s].validate=e.__compiled__[e.__schemas__[s]].validate,e.__compiled__[s].normalize=e.__compiled__[e.__schemas__[s]].normalize)}),e.__compiled__[""]={validate:null,normalize:Pz()};var a=Object.keys(e.__compiled__).filter(function(s){return s.length>0&&e.__compiled__[s]}).map(cge).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+a+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+a+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),mge(e)}function yge(e,t){var r=e.__index__,n=e.__last_index__,i=e.__text_cache__.slice(r,n);this.schema=e.__schema__.toLowerCase(),this.index=r+t,this.lastIndex=n+t,this.raw=i,this.text=i,this.url=i}function Pk(e,t){var r=new yge(e,t);return e.__compiled__[r.schema].normalize(r,e),r}function Df(e,t){if(!(this instanceof Df))return new Df(e,t);t||fge(e)&&(t=e,e={}),this.__opts__=Ck({},m9,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Ck({},hge,e),this.__compiled__={},this.__tlds__=dge,this.__tlds_replaced__=!1,this.re={},W2(this)}Df.prototype.add=function(t,r){return this.__schemas__[t]=r,W2(this),this};Df.prototype.set=function(t){return this.__opts__=Ck(this.__opts__,t),this};Df.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;var r,n,i,l,a,s,d,v,S;if(this.re.schema_test.test(t)){for(d=this.re.schema_search,d.lastIndex=0;(r=d.exec(t))!==null;)if(l=this.testSchemaAt(t,r[2],d.lastIndex),l){this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+l;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(v=t.search(this.re.host_fuzzy_test),v>=0&&(this.__index__<0||v<this.__index__)&&(n=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(a=n.index+n[1].length,(this.__index__<0||a<this.__index__)&&(this.__schema__="",this.__index__=a,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(S=t.indexOf("@"),S>=0&&(i=t.match(this.re.email_fuzzy))!==null&&(a=i.index+i[1].length,s=i.index+i[0].length,(this.__index__<0||a<this.__index__||a===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=a,this.__last_index__=s))),this.__index__>=0};Df.prototype.pretest=function(t){return this.re.pretest.test(t)};Df.prototype.testSchemaAt=function(t,r,n){return this.__compiled__[r.toLowerCase()]?this.__compiled__[r.toLowerCase()].validate(t,n,this):0};Df.prototype.match=function(t){var r=0,n=[];this.__index__>=0&&this.__text_cache__===t&&(n.push(Pk(this,r)),r=this.__last_index__);for(var i=r?t.slice(r):t;this.test(i);)n.push(Pk(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Df.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;var r=this.re.schema_at_start.exec(t);if(!r)return null;var n=this.testSchemaAt(t,r[2],r[0].length);return n?(this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+n,Pk(this,0)):null};Df.prototype.tlds=function(t,r){return t=Array.isArray(t)?t:[t],r?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(n,i,l){return n!==l[i-1]}).reverse(),W2(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,W2(this),this)};Df.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Df.prototype.onCompile=function(){};var vge=Df;const _ge=Xs(vge),bge=["aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","etisalat","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kids","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","lancia","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","link","lipsy","live","living","lk","llc","llp","loan","loans","locker","locus","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mutual","mv","mw","mx","my","mz","na","nab","nagoya","name","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","vermögensberater","vermögensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","ελ","ευ","бг","бел","дети","ею","католик","ком","мкд","мон","москва","онлайн","орг","рус","рф","сайт","срб","укр","қаз","հայ","ישראל","קום","ابوظبي","اتصالات","ارامكو","الاردن","البحرين","الجزائر","السعودية","العليان","المغرب","امارات","ایران","بارت","بازار","بيتك","بھارت","تونس","سودان","سورية","شبكة","عراق","عرب","عمان","فلسطين","قطر","كاثوليك","كوم","مصر","مليسيا","موريتانيا","موقع","همراه","پاکستان","ڀارت","कॉम","नेट","भारत","भारतम्","भारोत","संगठन","বাংলা","ভারত","ভাৰত","ਭਾਰਤ","ભારત","ଭାରତ","இந்தியா","இலங்கை","சிங்கப்பூர்","భారత్","ಭಾರತ","ഭാരതം","ලංකා","คอม","ไทย","ລາວ","გე","みんな","アマゾン","クラウド","グーグル","コム","ストア","セール","ファッション","ポイント","世界","中信","中国","中國","中文网","亚马逊","企业","佛山","信息","健康","八卦","公司","公益","台湾","台灣","商城","商店","商标","嘉里","嘉里大酒店","在线","大拿","天主教","娱乐","家電","广东","微博","慈善","我爱你","手机","招聘","政务","政府","新加坡","新闻","时尚","書籍","机构","淡马锡","游戏","澳門","点看","移动","组织机构","网址","网店","网站","网络","联通","谷歌","购物","通販","集团","電訊盈科","飞利浦","食品","餐厅","香格里拉","香港","닷넷","닷컴","삼성","한국"],xge=_ge().tlds(bge).add("ftp",null).set({fuzzyIP:!0}),g9=({href:e,children:t})=>{const r=Mo();return ae("a",{href:e,className:`
      ${r.textInfo} hover:underline
    `,children:t})},y9=({value:e=""})=>{const t=xge.match(e);if(!t)return e;const r=[];let n=0;return t.forEach(i=>{r.push(e.slice(n,i.index)),r.push(ae(g9,{href:i.url,children:i.text},i.index)),n=i.lastIndex}),r.push(e.slice(n)),r.filter(Boolean)},wge=({value:e,...t})=>{const r=Mo();return ae("pre",{className:`
      rounded ${r.accent1} px-2 py-1
      scrollbar overflow-x-auto
    `,children:ae(y9,{value:e})})},Sge=({children:e,...t})=>{const r=Mo();return ae("blockquote",{className:`
      rounded ${r.accent1} px-2 py-1 whitespace-pre-wrap
    `,children:e})},Ege={heading:({level:e,children:t})=>e===1?ae("h1",{className:"font-bold text-3xl",children:t}):e===2?ae("h2",{className:"font-bold text-2xl",children:t}):e===3?ae("h3",{className:"font-bold text-xl",children:t}):ae("h4",{className:"font-bold text-lg",children:t}),list:({ordered:e,children:t})=>e?ae("ol",{className:"list-decimal list-inside",children:t}):ae("ul",{className:"list-disc list-inside",children:t}),code:wge,blockquote:Sge,paragraph:({children:e})=>ae("p",{className:"whitespace-pre-wrap",children:e}),text:y9,link:g9};Ee.forwardRef(({large:e,small:t,className:r="",children:n,onChange:i,value:l,autoFocus:a,disabled:s=!1,placeholder:d="enter some markdown...",...v},S)=>{const[A,P]=Ee.useState(!l),L=Ee.useRef(A),F=Ee.useRef(),K=Ee.useCallback(z=>{i(z.target.value)},[i]),re=Mo(),G=re[`input${dO({large:e,small:t})}`],[H,B]=Ee.useState(null);Ee.useEffect(()=>{a&&H&&(H.focus(),P(!0))},[a,H]),Ee.useEffect(()=>{A&&H&&F.current!==l&&(H.style.height="auto",H.style.height=`calc(${H.scrollHeight}px + 0.125rem)`,F.current=l),A&&!L.current&&H.focus(),L.current=A},[l,A,H]);const $=Ee.useCallback(z=>{P(!l)},[l]),[N]=CE($);return Ft("div",{ref:N,className:"relative",onDoubleClick:z=>P(!0),children:[l?ae("div",{className:"absolute right-0 top-0 mr-1 mt-1",children:ae(bh,{tabIndex:-1,small:!0,onClick:z=>P(X=>!X),children:A?"preview":"edit"},A?"editing":"viewing")}):null,ae("textarea",{...v,rows:1,tabIndex:s||!A?-1:0,value:l||"",onChange:K,style:{display:A?"block":"none"},className:`${G} ${r} resize-none`,onFocus:z=>A&&H.focus(),onBlur:z=>P(!l),placeholder:d,ref:Ej(S,B)}),ae("div",{tabIndex:s||A?-1:0,className:`
          ${G} ${r} ${A?"hidden":"block"}
        `,children:ae(d9,{renderers:Ege,children:l})})]})});var Vl={},a1={},Cge=Hy,Pge=Bf,Tge=ud,Age="[object String]";function kge(e){return typeof e=="string"||!Pge(e)&&Tge(e)&&Cge(e)==Age}var Ige=kge;function Mge(e){return function(t,r,n){for(var i=-1,l=Object(t),a=n(t),s=a.length;s--;){var d=a[e?s:++i];if(r(l[d],d,l)===!1)break}return t}}var Oge=Mge,Rge=Oge,Dge=Rge(),v9=Dge,zge=v9,Lge=e1;function $ge(e,t){return e&&zge(e,t,Lge)}var TO=$ge;function Nge(e){return e}var BE=Nge,Bge=BE;function Fge(e){return typeof e=="function"?e:Bge}var _9=Fge,Uge=TO,jge=_9;function Vge(e,t){return e&&Uge(e,jge(t))}var AO=Vge,qge=Hy,Gge=fO,Hge=ud,Wge="[object Object]",Zge=Function.prototype,Xge=Object.prototype,b9=Zge.toString,Kge=Xge.hasOwnProperty,Yge=b9.call(Object);function Jge(e){if(!Hge(e)||qge(e)!=Wge)return!1;var t=Gge(e);if(t===null)return!0;var r=Kge.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&b9.call(r)==Yge}var x9=Jge,Qge=bE,eye=uO,tye=1,rye=2;function nye(e,t,r,n){var i=r.length,l=i,a=!n;if(e==null)return!l;for(e=Object(e);i--;){var s=r[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<l;){s=r[i];var d=s[0],v=e[d],S=s[1];if(a&&s[2]){if(v===void 0&&!(d in e))return!1}else{var A=new Qge;if(n)var P=n(v,S,d,e,t,A);if(!(P===void 0?eye(S,v,tye|rye,n,A):P))return!1}}return!0}var iye=nye,aye=kh;function oye(e){return e===e&&!aye(e)}var w9=oye,sye=w9,lye=e1;function uye(e){for(var t=lye(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,sye(i)]}return t}var cye=uye;function fye(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var S9=fye,hye=iye,pye=cye,dye=S9;function mye(e){var t=pye(e);return t.length==1&&t[0][2]?dye(t[0][0],t[0][1]):function(r){return r===e||hye(r,e,t)}}var gye=mye;function yye(e,t){return e!=null&&t in Object(e)}var vye=yye,_ye=JF,bye=rO,xye=Bf,wye=nO,Sye=iO,Eye=qS;function Cye(e,t,r){t=_ye(t,e);for(var n=-1,i=t.length,l=!1;++n<i;){var a=Eye(t[n]);if(!(l=e!=null&&r(e,a)))break;e=e[a]}return l||++n!=i?l:(i=e==null?0:e.length,!!i&&Sye(i)&&wye(a,i)&&(xye(e)||bye(e)))}var Pye=Cye,Tye=vye,Aye=Pye;function kye(e,t){return e!=null&&Aye(e,t,Tye)}var Iye=kye,Mye=uO,Oye=Zy,Rye=Iye,Dye=hM,zye=w9,Lye=S9,$ye=qS,Nye=1,Bye=2;function Fye(e,t){return Dye(e)&&zye(t)?Lye($ye(e),t):function(r){var n=Oye(r,e);return n===void 0&&n===t?Rye(r,e):Mye(t,n,Nye|Bye)}}var Uye=Fye;function jye(e){return function(t){return t==null?void 0:t[e]}}var Vye=jye,qye=QF;function Gye(e){return function(t){return qye(t,e)}}var Hye=Gye,Wye=Vye,Zye=Hye,Xye=hM,Kye=qS;function Yye(e){return Xye(e)?Wye(Kye(e)):Zye(e)}var Jye=Yye,Qye=gye,eve=Uye,tve=BE,rve=Bf,nve=Jye;function ive(e){return typeof e=="function"?e:e==null?tve:typeof e=="object"?rve(e)?eve(e[0],e[1]):Qye(e):nve(e)}var kO=ive,ave=M0;function ove(e,t){return function(r,n){if(r==null)return r;if(!ave(r))return e(r,n);for(var i=r.length,l=t?i:-1,a=Object(r);(t?l--:++l<i)&&n(a[l],l,a)!==!1;);return r}}var sve=ove,lve=TO,uve=sve,cve=uve(lve),E9=cve,fve=E9,hve=M0;function pve(e,t){var r=-1,n=hve(e)?Array(e.length):[];return fve(e,function(i,l,a){n[++r]=t(i,l,a)}),n}var dve=pve,mve=KF,gve=kO,yve=dve,vve=Bf;function _ve(e,t){var r=vve(e)?mve:yve;return r(e,gve(t))}var bve=_ve;Object.defineProperty(a1,"__esModule",{value:!0});a1.flattenNames=void 0;var xve=Ige,wve=FE(xve),Sve=AO,Eve=FE(Sve),Cve=x9,Pve=FE(Cve),Tve=bve,Ave=FE(Tve);function FE(e){return e&&e.__esModule?e:{default:e}}var kve=a1.flattenNames=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[];return(0,Ave.default)(t,function(n){Array.isArray(n)?e(n).map(function(i){return r.push(i)}):(0,Pve.default)(n)?(0,Eve.default)(n,function(i,l){i===!0&&r.push(l),r.push(l+"-"+i)}):(0,wve.default)(n)&&r.push(n)}),r};a1.default=kve;var o1={};Object.defineProperty(o1,"__esModule",{value:!0});o1.mergeClasses=void 0;var Ive=AO,Mve=C9(Ive),Ove=pO,Rve=C9(Ove),Dve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function C9(e){return e&&e.__esModule?e:{default:e}}var zve=o1.mergeClasses=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=t.default&&(0,Rve.default)(t.default)||{};return r.map(function(i){var l=t[i];return l&&(0,Mve.default)(l,function(a,s){n[s]||(n[s]={}),n[s]=Dve({},n[s],l[s])}),i}),n};o1.default=zve;var s1={};Object.defineProperty(s1,"__esModule",{value:!0});s1.autoprefix=void 0;var Lve=AO,Tz=Nve(Lve),$ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function Nve(e){return e&&e.__esModule?e:{default:e}}var Bve={borderRadius:function(t){return{msBorderRadius:t,MozBorderRadius:t,OBorderRadius:t,WebkitBorderRadius:t,borderRadius:t}},boxShadow:function(t){return{msBoxShadow:t,MozBoxShadow:t,OBoxShadow:t,WebkitBoxShadow:t,boxShadow:t}},userSelect:function(t){return{WebkitTouchCallout:t,KhtmlUserSelect:t,MozUserSelect:t,msUserSelect:t,WebkitUserSelect:t,userSelect:t}},flex:function(t){return{WebkitBoxFlex:t,MozBoxFlex:t,WebkitFlex:t,msFlex:t,flex:t}},flexBasis:function(t){return{WebkitFlexBasis:t,flexBasis:t}},justifyContent:function(t){return{WebkitJustifyContent:t,justifyContent:t}},transition:function(t){return{msTransition:t,MozTransition:t,OTransition:t,WebkitTransition:t,transition:t}},transform:function(t){return{msTransform:t,MozTransform:t,OTransform:t,WebkitTransform:t,transform:t}},absolute:function(t){var r=t&&t.split(" ");return{position:"absolute",top:r&&r[0],right:r&&r[1],bottom:r&&r[2],left:r&&r[3]}},extend:function(t,r){var n=r[t];return n||{extend:t}}},Fve=s1.autoprefix=function(t){var r={};return(0,Tz.default)(t,function(n,i){var l={};(0,Tz.default)(n,function(a,s){var d=Bve[s];d?l=$ve({},l,d(a)):l[s]=a}),r[i]=l}),r};s1.default=Fve;var l1={};Object.defineProperty(l1,"__esModule",{value:!0});l1.hover=void 0;var Uve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jve=Fe,QP=Vve(jve);function Vve(e){return e&&e.__esModule?e:{default:e}}function qve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Az(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Gve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Hve=l1.hover=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){Gve(i,n);function i(){var l,a,s,d;qve(this,i);for(var v=arguments.length,S=Array(v),A=0;A<v;A++)S[A]=arguments[A];return d=(a=(s=Az(this,(l=i.__proto__||Object.getPrototypeOf(i)).call.apply(l,[this].concat(S))),s),s.state={hover:!1},s.handleMouseOver=function(){return s.setState({hover:!0})},s.handleMouseOut=function(){return s.setState({hover:!1})},s.render=function(){return QP.default.createElement(r,{onMouseOver:s.handleMouseOver,onMouseOut:s.handleMouseOut},QP.default.createElement(t,Uve({},s.props,s.state)))},a),Az(s,d)}return i}(QP.default.Component)};l1.default=Hve;var u1={};Object.defineProperty(u1,"__esModule",{value:!0});u1.active=void 0;var Wve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zve=Fe,eT=Xve(Zve);function Xve(e){return e&&e.__esModule?e:{default:e}}function Kve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kz(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Yve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Jve=u1.active=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){Yve(i,n);function i(){var l,a,s,d;Kve(this,i);for(var v=arguments.length,S=Array(v),A=0;A<v;A++)S[A]=arguments[A];return d=(a=(s=kz(this,(l=i.__proto__||Object.getPrototypeOf(i)).call.apply(l,[this].concat(S))),s),s.state={active:!1},s.handleMouseDown=function(){return s.setState({active:!0})},s.handleMouseUp=function(){return s.setState({active:!1})},s.render=function(){return eT.default.createElement(r,{onMouseDown:s.handleMouseDown,onMouseUp:s.handleMouseUp},eT.default.createElement(t,Wve({},s.props,s.state)))},a),kz(s,d)}return i}(eT.default.Component)};u1.default=Jve;var IO={};Object.defineProperty(IO,"__esModule",{value:!0});var Qve=function(t,r){var n={},i=function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n[a]=s};return t===0&&i("first-child"),t===r-1&&i("last-child"),(t===0||t%2===0)&&i("even"),Math.abs(t%2)===1&&i("odd"),i("nth-child",t),n};IO.default=Qve;Object.defineProperty(Vl,"__esModule",{value:!0});Vl.ReactCSS=Vl.loop=Vl.handleActive=MO=Vl.handleHover=Vl.hover=void 0;var e_e=a1,t_e=L0(e_e),r_e=o1,n_e=L0(r_e),i_e=s1,a_e=L0(i_e),o_e=l1,P9=L0(o_e),s_e=u1,l_e=L0(s_e),u_e=IO,c_e=L0(u_e);function L0(e){return e&&e.__esModule?e:{default:e}}Vl.hover=P9.default;var MO=Vl.handleHover=P9.default;Vl.handleActive=l_e.default;Vl.loop=c_e.default;var f_e=Vl.ReactCSS=function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var l=(0,t_e.default)(n),a=(0,n_e.default)(t,l);return(0,a_e.default)(a)},ia=Vl.default=f_e,h_e=function(t,r,n,i,l){var a=l.clientWidth,s=l.clientHeight,d=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,v=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,S=d-(l.getBoundingClientRect().left+window.pageXOffset),A=v-(l.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var P=void 0;if(A<0?P=0:A>s?P=1:P=Math.round(A*100/s)/100,r.a!==P)return{h:r.h,s:r.s,l:r.l,a:P,source:"rgb"}}else{var L=void 0;if(S<0?L=0:S>a?L=1:L=Math.round(S*100/a)/100,i!==L)return{h:r.h,s:r.s,l:r.l,a:L,source:"rgb"}}return null},tT={},p_e=function(t,r,n,i){if(typeof document>"u"&&!i)return null;var l=i?new i:document.createElement("canvas");l.width=n*2,l.height=n*2;var a=l.getContext("2d");return a?(a.fillStyle=t,a.fillRect(0,0,l.width,l.height),a.fillStyle=r,a.fillRect(0,0,n,n),a.translate(n,n),a.fillRect(0,0,n,n),l.toDataURL()):null},d_e=function(t,r,n,i){var l=t+"-"+r+"-"+n+(i?"-server":"");if(tT[l])return tT[l];var a=p_e(t,r,n,i);return tT[l]=a,a},Iz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$0=function(t){var r=t.white,n=t.grey,i=t.size,l=t.renderers,a=t.borderRadius,s=t.boxShadow,d=t.children,v=ia({default:{grid:{borderRadius:a,boxShadow:s,absolute:"0px 0px 0px 0px",background:"url("+d_e(r,n,i,l.canvas)+") center left"}}});return Fe.isValidElement(d)?Ee.cloneElement(d,Iz({},d.props,{style:Iz({},d.props.style,v.grid)})):Ee.createElement("div",{style:v.grid})};$0.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var m_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g_e=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function y_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mz(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function v_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var OO=function(e){v_e(t,e);function t(){var r,n,i,l;y_e(this,t);for(var a=arguments.length,s=Array(a),d=0;d<a;d++)s[d]=arguments[d];return l=(n=(i=Mz(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(s))),i),i.handleChange=function(v){var S=h_e(v,i.props.hsl,i.props.direction,i.props.a,i.container);S&&typeof i.props.onChange=="function"&&i.props.onChange(S,v)},i.handleMouseDown=function(v){i.handleChange(v),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},n),Mz(i,l)}return g_e(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var n=this,i=this.props.rgb,l=ia({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:m_e({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return Ee.createElement("div",{style:l.alpha},Ee.createElement("div",{style:l.checkboard},Ee.createElement($0,{renderers:this.props.renderers})),Ee.createElement("div",{style:l.gradient}),Ee.createElement("div",{style:l.container,ref:function(s){return n.container=s},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Ee.createElement("div",{style:l.pointer},this.props.pointer?Ee.createElement(this.props.pointer,this.props):Ee.createElement("div",{style:l.slider}))))}}]),t}(Fe.PureComponent||Fe.Component),__e=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function b_e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w_e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function S_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E_e=1,T9=38,C_e=40,P_e=[T9,C_e],T_e=function(t){return P_e.indexOf(t)>-1},A_e=function(t){return Number(String(t).replace(/%/g,""))},k_e=1,Xa=function(e){S_e(t,e);function t(r){x_e(this,t);var n=w_e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(i){n.setUpdatedValue(i.target.value,i)},n.handleKeyDown=function(i){var l=A_e(i.target.value);if(!isNaN(l)&&T_e(i.keyCode)){var a=n.getArrowOffset(),s=i.keyCode===T9?l+a:l-a;n.setUpdatedValue(s,i)}},n.handleDrag=function(i){if(n.props.dragLabel){var l=Math.round(n.props.value+i.movementX);l>=0&&l<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(l),i)}},n.handleMouseDown=function(i){n.props.dragLabel&&(i.preventDefault(),n.handleDrag(i),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(r.value).toUpperCase(),blurValue:String(r.value).toUpperCase()},n.inputId="rc-editable-input-"+k_e++,n}return __e(t,[{key:"componentDidUpdate",value:function(n,i){this.props.value!==this.state.value&&(n.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(n){return b_e({},this.props.label,n)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||E_e}},{key:"setUpdatedValue",value:function(n,i){var l=this.props.label?this.getValueObjectWithLabel(n):n;this.props.onChange&&this.props.onChange(l,i),this.setState({value:n})}},{key:"render",value:function(){var n=this,i=ia({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return Ee.createElement("div",{style:i.wrap},Ee.createElement("input",{id:this.inputId,style:i.input,ref:function(a){return n.input=a},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?Ee.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(Fe.PureComponent||Fe.Component),I_e=function(t,r,n,i){var l=i.clientWidth,a=i.clientHeight,s=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,d=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,v=s-(i.getBoundingClientRect().left+window.pageXOffset),S=d-(i.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var A=void 0;if(S<0)A=359;else if(S>a)A=0;else{var P=-(S*100/a)+100;A=360*P/100}if(n.h!==A)return{h:A,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var L=void 0;if(v<0)L=0;else if(v>l)L=359;else{var F=v*100/l;L=360*F/100}if(n.h!==L)return{h:L,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},M_e=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function O_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oz(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function R_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var N0=function(e){R_e(t,e);function t(){var r,n,i,l;O_e(this,t);for(var a=arguments.length,s=Array(a),d=0;d<a;d++)s[d]=arguments[d];return l=(n=(i=Oz(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(s))),i),i.handleChange=function(v){var S=I_e(v,i.props.direction,i.props.hsl,i.container);S&&typeof i.props.onChange=="function"&&i.props.onChange(S,v)},i.handleMouseDown=function(v){i.handleChange(v),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},n),Oz(i,l)}return M_e(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.direction,l=i===void 0?"horizontal":i,a=ia({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:l==="vertical"});return Ee.createElement("div",{style:a.hue},Ee.createElement("div",{className:"hue-"+l,style:a.container,ref:function(d){return n.container=d},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Ee.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),Ee.createElement("div",{style:a.pointer},this.props.pointer?Ee.createElement(this.props.pointer,this.props):Ee.createElement("div",{style:a.slider}))))}}]),t}(Fe.PureComponent||Fe.Component);function D_e(){this.__data__=[],this.size=0}function c1(e,t){return e===t||e!==e&&t!==t}function UE(e,t){for(var r=e.length;r--;)if(c1(e[r][0],t))return r;return-1}var z_e=Array.prototype,L_e=z_e.splice;function $_e(e){var t=this.__data__,r=UE(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():L_e.call(t,r,1),--this.size,!0}function N_e(e){var t=this.__data__,r=UE(t,e);return r<0?void 0:t[r][1]}function B_e(e){return UE(this.__data__,e)>-1}function F_e(e,t){var r=this.__data__,n=UE(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function pm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}pm.prototype.clear=D_e;pm.prototype.delete=$_e;pm.prototype.get=N_e;pm.prototype.has=B_e;pm.prototype.set=F_e;function U_e(){this.__data__=new pm,this.size=0}function j_e(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function V_e(e){return this.__data__.get(e)}function q_e(e){return this.__data__.has(e)}var G_e=typeof{}=="object"&&{}&&{}.Object===Object&&{};const A9=G_e;var H_e=typeof self=="object"&&self&&self.Object===Object&&self,W_e=A9||H_e||Function("return this")();const Ep=W_e;var Z_e=Ep.Symbol;const gg=Z_e;var k9=Object.prototype,X_e=k9.hasOwnProperty,K_e=k9.toString,Pb=gg?gg.toStringTag:void 0;function Y_e(e){var t=X_e.call(e,Pb),r=e[Pb];try{e[Pb]=void 0;var n=!0}catch{}var i=K_e.call(e);return n&&(t?e[Pb]=r:delete e[Pb]),i}var J_e=Object.prototype,Q_e=J_e.toString;function e0e(e){return Q_e.call(e)}var t0e="[object Null]",r0e="[object Undefined]",Rz=gg?gg.toStringTag:void 0;function Jy(e){return e==null?e===void 0?r0e:t0e:Rz&&Rz in Object(e)?Y_e(e):e0e(e)}function Ph(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var n0e="[object AsyncFunction]",i0e="[object Function]",a0e="[object GeneratorFunction]",o0e="[object Proxy]";function RO(e){if(!Ph(e))return!1;var t=Jy(e);return t==i0e||t==a0e||t==n0e||t==o0e}var s0e=Ep["__core-js_shared__"];const rT=s0e;var Dz=function(){var e=/[^.]+$/.exec(rT&&rT.keys&&rT.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function l0e(e){return!!Dz&&Dz in e}var u0e=Function.prototype,c0e=u0e.toString;function Qy(e){if(e!=null){try{return c0e.call(e)}catch{}try{return e+""}catch{}}return""}var f0e=/[\\^$.*+?()[\]{}|]/g,h0e=/^\[object .+?Constructor\]$/,p0e=Function.prototype,d0e=Object.prototype,m0e=p0e.toString,g0e=d0e.hasOwnProperty,y0e=RegExp("^"+m0e.call(g0e).replace(f0e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v0e(e){if(!Ph(e)||l0e(e))return!1;var t=RO(e)?y0e:h0e;return t.test(Qy(e))}function _0e(e,t){return e==null?void 0:e[t]}function ev(e,t){var r=_0e(e,t);return v0e(r)?r:void 0}var b0e=ev(Ep,"Map");const Rx=b0e;var x0e=ev(Object,"create");const Dx=x0e;function w0e(){this.__data__=Dx?Dx(null):{},this.size=0}function S0e(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var E0e="__lodash_hash_undefined__",C0e=Object.prototype,P0e=C0e.hasOwnProperty;function T0e(e){var t=this.__data__;if(Dx){var r=t[e];return r===E0e?void 0:r}return P0e.call(t,e)?t[e]:void 0}var A0e=Object.prototype,k0e=A0e.hasOwnProperty;function I0e(e){var t=this.__data__;return Dx?t[e]!==void 0:k0e.call(t,e)}var M0e="__lodash_hash_undefined__";function O0e(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Dx&&t===void 0?M0e:t,this}function $y(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}$y.prototype.clear=w0e;$y.prototype.delete=S0e;$y.prototype.get=T0e;$y.prototype.has=I0e;$y.prototype.set=O0e;function R0e(){this.size=0,this.__data__={hash:new $y,map:new(Rx||pm),string:new $y}}function D0e(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function jE(e,t){var r=e.__data__;return D0e(t)?r[typeof t=="string"?"string":"hash"]:r.map}function z0e(e){var t=jE(this,e).delete(e);return this.size-=t?1:0,t}function L0e(e){return jE(this,e).get(e)}function $0e(e){return jE(this,e).has(e)}function N0e(e,t){var r=jE(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function dm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}dm.prototype.clear=R0e;dm.prototype.delete=z0e;dm.prototype.get=L0e;dm.prototype.has=$0e;dm.prototype.set=N0e;var B0e=200;function F0e(e,t){var r=this.__data__;if(r instanceof pm){var n=r.__data__;if(!Rx||n.length<B0e-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new dm(n)}return r.set(e,t),this.size=r.size,this}function nd(e){var t=this.__data__=new pm(e);this.size=t.size}nd.prototype.clear=U_e;nd.prototype.delete=j_e;nd.prototype.get=V_e;nd.prototype.has=q_e;nd.prototype.set=F0e;var U0e=function(){try{var e=ev(Object,"defineProperty");return e({},"",{}),e}catch{}}();const Z2=U0e;function DO(e,t,r){t=="__proto__"&&Z2?Z2(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Tk(e,t,r){(r!==void 0&&!c1(e[t],r)||r===void 0&&!(t in e))&&DO(e,t,r)}function j0e(e){return function(t,r,n){for(var i=-1,l=Object(t),a=n(t),s=a.length;s--;){var d=a[e?s:++i];if(r(l[d],d,l)===!1)break}return t}}var V0e=j0e();const I9=V0e;var M9=typeof If=="object"&&If&&!If.nodeType&&If,zz=M9&&typeof yc=="object"&&yc&&!yc.nodeType&&yc,q0e=zz&&zz.exports===M9,Lz=q0e?Ep.Buffer:void 0,$z=Lz?Lz.allocUnsafe:void 0;function G0e(e,t){if(t)return e.slice();var r=e.length,n=$z?$z(r):new e.constructor(r);return e.copy(n),n}var H0e=Ep.Uint8Array;const X2=H0e;function W0e(e){var t=new e.constructor(e.byteLength);return new X2(t).set(new X2(e)),t}function Z0e(e,t){var r=t?W0e(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function X0e(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Nz=Object.create,K0e=function(){function e(){}return function(t){if(!Ph(t))return{};if(Nz)return Nz(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const Y0e=K0e;function O9(e,t){return function(r){return e(t(r))}}var J0e=O9(Object.getPrototypeOf,Object);const R9=J0e;var Q0e=Object.prototype;function zO(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Q0e;return e===r}function ebe(e){return typeof e.constructor=="function"&&!zO(e)?Y0e(R9(e)):{}}function yg(e){return e!=null&&typeof e=="object"}var tbe="[object Arguments]";function Bz(e){return yg(e)&&Jy(e)==tbe}var D9=Object.prototype,rbe=D9.hasOwnProperty,nbe=D9.propertyIsEnumerable,ibe=Bz(function(){return arguments}())?Bz:function(e){return yg(e)&&rbe.call(e,"callee")&&!nbe.call(e,"callee")};const K2=ibe;var abe=Array.isArray;const zf=abe;var obe=9007199254740991;function LO(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=obe}function B0(e){return e!=null&&LO(e.length)&&!RO(e)}function sbe(e){return yg(e)&&B0(e)}function lbe(){return!1}var z9=typeof If=="object"&&If&&!If.nodeType&&If,Fz=z9&&typeof yc=="object"&&yc&&!yc.nodeType&&yc,ube=Fz&&Fz.exports===z9,Uz=ube?Ep.Buffer:void 0,cbe=Uz?Uz.isBuffer:void 0,fbe=cbe||lbe;const Y2=fbe;var hbe="[object Object]",pbe=Function.prototype,dbe=Object.prototype,L9=pbe.toString,mbe=dbe.hasOwnProperty,gbe=L9.call(Object);function ybe(e){if(!yg(e)||Jy(e)!=hbe)return!1;var t=R9(e);if(t===null)return!0;var r=mbe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&L9.call(r)==gbe}var vbe="[object Arguments]",_be="[object Array]",bbe="[object Boolean]",xbe="[object Date]",wbe="[object Error]",Sbe="[object Function]",Ebe="[object Map]",Cbe="[object Number]",Pbe="[object Object]",Tbe="[object RegExp]",Abe="[object Set]",kbe="[object String]",Ibe="[object WeakMap]",Mbe="[object ArrayBuffer]",Obe="[object DataView]",Rbe="[object Float32Array]",Dbe="[object Float64Array]",zbe="[object Int8Array]",Lbe="[object Int16Array]",$be="[object Int32Array]",Nbe="[object Uint8Array]",Bbe="[object Uint8ClampedArray]",Fbe="[object Uint16Array]",Ube="[object Uint32Array]",cs={};cs[Rbe]=cs[Dbe]=cs[zbe]=cs[Lbe]=cs[$be]=cs[Nbe]=cs[Bbe]=cs[Fbe]=cs[Ube]=!0;cs[vbe]=cs[_be]=cs[Mbe]=cs[bbe]=cs[Obe]=cs[xbe]=cs[wbe]=cs[Sbe]=cs[Ebe]=cs[Cbe]=cs[Pbe]=cs[Tbe]=cs[Abe]=cs[kbe]=cs[Ibe]=!1;function jbe(e){return yg(e)&&LO(e.length)&&!!cs[Jy(e)]}function Vbe(e){return function(t){return e(t)}}var $9=typeof If=="object"&&If&&!If.nodeType&&If,ix=$9&&typeof yc=="object"&&yc&&!yc.nodeType&&yc,qbe=ix&&ix.exports===$9,nT=qbe&&A9.process,Gbe=function(){try{var e=ix&&ix.require&&ix.require("util").types;return e||nT&&nT.binding&&nT.binding("util")}catch{}}();const jz=Gbe;var Vz=jz&&jz.isTypedArray,Hbe=Vz?Vbe(Vz):jbe;const $O=Hbe;function Ak(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Wbe=Object.prototype,Zbe=Wbe.hasOwnProperty;function Xbe(e,t,r){var n=e[t];(!(Zbe.call(e,t)&&c1(n,r))||r===void 0&&!(t in e))&&DO(e,t,r)}function Kbe(e,t,r,n){var i=!r;r||(r={});for(var l=-1,a=t.length;++l<a;){var s=t[l],d=n?n(r[s],e[s],s,r,e):void 0;d===void 0&&(d=e[s]),i?DO(r,s,d):Xbe(r,s,d)}return r}function Ybe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Jbe=9007199254740991,Qbe=/^(?:0|[1-9]\d*)$/;function NO(e,t){var r=typeof e;return t=t??Jbe,!!t&&(r=="number"||r!="symbol"&&Qbe.test(e))&&e>-1&&e%1==0&&e<t}var exe=Object.prototype,txe=exe.hasOwnProperty;function N9(e,t){var r=zf(e),n=!r&&K2(e),i=!r&&!n&&Y2(e),l=!r&&!n&&!i&&$O(e),a=r||n||i||l,s=a?Ybe(e.length,String):[],d=s.length;for(var v in e)(t||txe.call(e,v))&&!(a&&(v=="length"||i&&(v=="offset"||v=="parent")||l&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||NO(v,d)))&&s.push(v);return s}function rxe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var nxe=Object.prototype,ixe=nxe.hasOwnProperty;function axe(e){if(!Ph(e))return rxe(e);var t=zO(e),r=[];for(var n in e)n=="constructor"&&(t||!ixe.call(e,n))||r.push(n);return r}function B9(e){return B0(e)?N9(e,!0):axe(e)}function oxe(e){return Kbe(e,B9(e))}function sxe(e,t,r,n,i,l,a){var s=Ak(e,r),d=Ak(t,r),v=a.get(d);if(v){Tk(e,r,v);return}var S=l?l(s,d,r+"",e,t,a):void 0,A=S===void 0;if(A){var P=zf(d),L=!P&&Y2(d),F=!P&&!L&&$O(d);S=d,P||L||F?zf(s)?S=s:sbe(s)?S=X0e(s):L?(A=!1,S=G0e(d,!0)):F?(A=!1,S=Z0e(d,!0)):S=[]:ybe(d)||K2(d)?(S=s,K2(s)?S=oxe(s):(!Ph(s)||RO(s))&&(S=ebe(d))):A=!1}A&&(a.set(d,S),i(S,d,n,l,a),a.delete(d)),Tk(e,r,S)}function F9(e,t,r,n,i){e!==t&&I9(t,function(l,a){if(i||(i=new nd),Ph(l))sxe(e,t,a,r,F9,n,i);else{var s=n?n(Ak(e,a),l,a+"",e,t,i):void 0;s===void 0&&(s=l),Tk(e,a,s)}},B9)}function VE(e){return e}function lxe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var qz=Math.max;function uxe(e,t,r){return t=qz(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,l=qz(n.length-t,0),a=Array(l);++i<l;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),lxe(e,this,s)}}function cxe(e){return function(){return e}}var fxe=Z2?function(e,t){return Z2(e,"toString",{configurable:!0,enumerable:!1,value:cxe(t),writable:!0})}:VE;const hxe=fxe;var pxe=800,dxe=16,mxe=Date.now;function gxe(e){var t=0,r=0;return function(){var n=mxe(),i=dxe-(n-r);if(r=n,i>0){if(++t>=pxe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var yxe=gxe(hxe);const vxe=yxe;function _xe(e,t){return vxe(uxe(e,t,VE),e+"")}function bxe(e,t,r){if(!Ph(r))return!1;var n=typeof t;return(n=="number"?B0(r)&&NO(t,r.length):n=="string"&&t in r)?c1(r[t],e):!1}function xxe(e){return _xe(function(t,r){var n=-1,i=r.length,l=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(l=e.length>3&&typeof l=="function"?(i--,l):void 0,a&&bxe(r[0],r[1],a)&&(l=i<3?void 0:l,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,l)}return t})}var wxe=xxe(function(e,t,r){F9(e,t,r)});const Qc=wxe;var f1=function(t){var r=t.zDepth,n=t.radius,i=t.background,l=t.children,a=t.styles,s=a===void 0?{}:a,d=ia(Qc({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+r+"px "+r*4+"px rgba(0,0,0,.24)",borderRadius:n,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},s),{"zDepth-1":r===1});return Ee.createElement("div",{style:d.wrap},Ee.createElement("div",{style:d.bg}),Ee.createElement("div",{style:d.content},l))};f1.propTypes={background:Tr.string,zDepth:Tr.oneOf([0,1,2,3,4,5]),radius:Tr.number,styles:Tr.object};f1.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var Sxe=function(){return Ep.Date.now()};const iT=Sxe;var Exe=/\s/;function Cxe(e){for(var t=e.length;t--&&Exe.test(e.charAt(t)););return t}var Pxe=/^\s+/;function Txe(e){return e&&e.slice(0,Cxe(e)+1).replace(Pxe,"")}var Axe="[object Symbol]";function qE(e){return typeof e=="symbol"||yg(e)&&Jy(e)==Axe}var Gz=0/0,kxe=/^[-+]0x[0-9a-f]+$/i,Ixe=/^0b[01]+$/i,Mxe=/^0o[0-7]+$/i,Oxe=parseInt;function Hz(e){if(typeof e=="number")return e;if(qE(e))return Gz;if(Ph(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ph(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Txe(e);var r=Ixe.test(e);return r||Mxe.test(e)?Oxe(e.slice(2),r?2:8):kxe.test(e)?Gz:+e}var Rxe="Expected a function",Dxe=Math.max,zxe=Math.min;function U9(e,t,r){var n,i,l,a,s,d,v=0,S=!1,A=!1,P=!0;if(typeof e!="function")throw new TypeError(Rxe);t=Hz(t)||0,Ph(r)&&(S=!!r.leading,A="maxWait"in r,l=A?Dxe(Hz(r.maxWait)||0,t):l,P="trailing"in r?!!r.trailing:P);function L(z){var X=n,te=i;return n=i=void 0,v=z,a=e.apply(te,X),a}function F(z){return v=z,s=setTimeout(G,t),S?L(z):a}function K(z){var X=z-d,te=z-v,pe=t-X;return A?zxe(pe,l-te):pe}function re(z){var X=z-d,te=z-v;return d===void 0||X>=t||X<0||A&&te>=l}function G(){var z=iT();if(re(z))return H(z);s=setTimeout(G,K(z))}function H(z){return s=void 0,P&&n?L(z):(n=i=void 0,a)}function B(){s!==void 0&&clearTimeout(s),v=0,n=d=i=s=void 0}function $(){return s===void 0?a:H(iT())}function N(){var z=iT(),X=re(z);if(n=arguments,i=this,d=z,X){if(s===void 0)return F(d);if(A)return clearTimeout(s),s=setTimeout(G,t),L(d)}return s===void 0&&(s=setTimeout(G,t)),a}return N.cancel=B,N.flush=$,N}var Lxe="Expected a function";function $xe(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(Lxe);return Ph(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),U9(e,t,{leading:n,maxWait:t,trailing:i})}var Nxe=function(t,r,n){var i=n.getBoundingClientRect(),l=i.width,a=i.height,s=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,d=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,v=s-(n.getBoundingClientRect().left+window.pageXOffset),S=d-(n.getBoundingClientRect().top+window.pageYOffset);v<0?v=0:v>l&&(v=l),S<0?S=0:S>a&&(S=a);var A=v/l,P=1-S/a;return{h:r.h,s:A,v:P,a:r.a,source:"hsv"}},Bxe=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Fxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uxe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function jxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var GE=function(e){jxe(t,e);function t(r){Fxe(this,t);var n=Uxe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return n.handleChange=function(i){typeof n.props.onChange=="function"&&n.throttle(n.props.onChange,Nxe(i,n.props.hsl,n.container),i)},n.handleMouseDown=function(i){n.handleChange(i);var l=n.getContainerRenderWindow();l.addEventListener("mousemove",n.handleChange),l.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=$xe(function(i,l,a){i(l,a)},50),n}return Bxe(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var n=this.container,i=window;!i.document.contains(n)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var n=this.getContainerRenderWindow();n.removeEventListener("mousemove",this.handleChange),n.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.style||{},l=i.color,a=i.white,s=i.black,d=i.pointer,v=i.circle,S=ia({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:l,white:a,black:s,pointer:d,circle:v}},{custom:!!this.props.style});return Ee.createElement("div",{style:S.color,ref:function(P){return n.container=P},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Ee.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),Ee.createElement("div",{style:S.white,className:"saturation-white"},Ee.createElement("div",{style:S.black,className:"saturation-black"}),Ee.createElement("div",{style:S.pointer},this.props.pointer?Ee.createElement(this.props.pointer,this.props):Ee.createElement("div",{style:S.circle}))))}}]),t}(Fe.PureComponent||Fe.Component);function Vxe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var qxe=O9(Object.keys,Object);const Gxe=qxe;var Hxe=Object.prototype,Wxe=Hxe.hasOwnProperty;function Zxe(e){if(!zO(e))return Gxe(e);var t=[];for(var r in Object(e))Wxe.call(e,r)&&r!="constructor"&&t.push(r);return t}function BO(e){return B0(e)?N9(e):Zxe(e)}function Xxe(e,t){return e&&I9(e,t,BO)}function Kxe(e,t){return function(r,n){if(r==null)return r;if(!B0(r))return e(r,n);for(var i=r.length,l=t?i:-1,a=Object(r);(t?l--:++l<i)&&n(a[l],l,a)!==!1;);return r}}var Yxe=Kxe(Xxe);const j9=Yxe;function Jxe(e){return typeof e=="function"?e:VE}function Qxe(e,t){var r=zf(e)?Vxe:j9;return r(e,Jxe(t))}function J2(e){return J2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J2(e)}var e1e=/^\s+/,t1e=/\s+$/;function bi(e,t){if(e=e||"",t=t||{},e instanceof bi)return e;if(!(this instanceof bi))return new bi(e,t);var r=r1e(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}bi.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),r,n,i,l,a,s;return r=t.r/255,n=t.g/255,i=t.b/255,r<=.03928?l=r/12.92:l=Math.pow((r+.055)/1.055,2.4),n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),.2126*l+.7152*a+.0722*s},setAlpha:function(t){return this._a=V9(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=Zz(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=Zz(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.v*100);return this._a==1?"hsv("+r+", "+n+"%, "+i+"%)":"hsva("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=Wz(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=Wz(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.l*100);return this._a==1?"hsl("+r+", "+n+"%, "+i+"%)":"hsla("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return Xz(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return o1e(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Es(this._r,255)*100)+"%",g:Math.round(Es(this._g,255)*100)+"%",b:Math.round(Es(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Es(this._r,255)*100)+"%, "+Math.round(Es(this._g,255)*100)+"%, "+Math.round(Es(this._b,255)*100)+"%)":"rgba("+Math.round(Es(this._r,255)*100)+"%, "+Math.round(Es(this._g,255)*100)+"%, "+Math.round(Es(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:v1e[Xz(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var r="#"+Kz(this._r,this._g,this._b,this._a),n=r,i=this._gradientType?"GradientType = 1, ":"";if(t){var l=bi(t);n="#"+Kz(l._r,l._g,l._b,l._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+r+",endColorstr="+n+")"},toString:function(t){var r=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0,l=!r&&i&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return l?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return bi(this.toString())},_applyModification:function(t,r){var n=t.apply(null,[this].concat([].slice.call(r)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(c1e,arguments)},brighten:function(){return this._applyModification(f1e,arguments)},darken:function(){return this._applyModification(h1e,arguments)},desaturate:function(){return this._applyModification(s1e,arguments)},saturate:function(){return this._applyModification(l1e,arguments)},greyscale:function(){return this._applyModification(u1e,arguments)},spin:function(){return this._applyModification(p1e,arguments)},_applyCombination:function(t,r){return t.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(g1e,arguments)},complement:function(){return this._applyCombination(d1e,arguments)},monochromatic:function(){return this._applyCombination(y1e,arguments)},splitcomplement:function(){return this._applyCombination(m1e,arguments)},triad:function(){return this._applyCombination(Yz,[3])},tetrad:function(){return this._applyCombination(Yz,[4])}};bi.fromRatio=function(e,t){if(J2(e)=="object"){var r={};for(var n in e)e.hasOwnProperty(n)&&(n==="a"?r[n]=e[n]:r[n]=Fb(e[n]));e=r}return bi(e,t)};function r1e(e){var t={r:0,g:0,b:0},r=1,n=null,i=null,l=null,a=!1,s=!1;return typeof e=="string"&&(e=w1e(e)),J2(e)=="object"&&(Hd(e.r)&&Hd(e.g)&&Hd(e.b)?(t=n1e(e.r,e.g,e.b),a=!0,s=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Hd(e.h)&&Hd(e.s)&&Hd(e.v)?(n=Fb(e.s),i=Fb(e.v),t=a1e(e.h,n,i),a=!0,s="hsv"):Hd(e.h)&&Hd(e.s)&&Hd(e.l)&&(n=Fb(e.s),l=Fb(e.l),t=i1e(e.h,n,l),a=!0,s="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=V9(r),{ok:a,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}function n1e(e,t,r){return{r:Es(e,255)*255,g:Es(t,255)*255,b:Es(r,255)*255}}function Wz(e,t,r){e=Es(e,255),t=Es(t,255),r=Es(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),l,a,s=(n+i)/2;if(n==i)l=a=0;else{var d=n-i;switch(a=s>.5?d/(2-n-i):d/(n+i),n){case e:l=(t-r)/d+(t<r?6:0);break;case t:l=(r-e)/d+2;break;case r:l=(e-t)/d+4;break}l/=6}return{h:l,s:a,l:s}}function i1e(e,t,r){var n,i,l;e=Es(e,360),t=Es(t,100),r=Es(r,100);function a(v,S,A){return A<0&&(A+=1),A>1&&(A-=1),A<1/6?v+(S-v)*6*A:A<1/2?S:A<2/3?v+(S-v)*(2/3-A)*6:v}if(t===0)n=i=l=r;else{var s=r<.5?r*(1+t):r+t-r*t,d=2*r-s;n=a(d,s,e+1/3),i=a(d,s,e),l=a(d,s,e-1/3)}return{r:n*255,g:i*255,b:l*255}}function Zz(e,t,r){e=Es(e,255),t=Es(t,255),r=Es(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),l,a,s=n,d=n-i;if(a=n===0?0:d/n,n==i)l=0;else{switch(n){case e:l=(t-r)/d+(t<r?6:0);break;case t:l=(r-e)/d+2;break;case r:l=(e-t)/d+4;break}l/=6}return{h:l,s:a,v:s}}function a1e(e,t,r){e=Es(e,360)*6,t=Es(t,100),r=Es(r,100);var n=Math.floor(e),i=e-n,l=r*(1-t),a=r*(1-i*t),s=r*(1-(1-i)*t),d=n%6,v=[r,a,l,l,s,r][d],S=[s,r,r,a,l,l][d],A=[l,l,s,r,r,a][d];return{r:v*255,g:S*255,b:A*255}}function Xz(e,t,r,n){var i=[mp(Math.round(e).toString(16)),mp(Math.round(t).toString(16)),mp(Math.round(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function o1e(e,t,r,n,i){var l=[mp(Math.round(e).toString(16)),mp(Math.round(t).toString(16)),mp(Math.round(r).toString(16)),mp(q9(n))];return i&&l[0].charAt(0)==l[0].charAt(1)&&l[1].charAt(0)==l[1].charAt(1)&&l[2].charAt(0)==l[2].charAt(1)&&l[3].charAt(0)==l[3].charAt(1)?l[0].charAt(0)+l[1].charAt(0)+l[2].charAt(0)+l[3].charAt(0):l.join("")}function Kz(e,t,r,n){var i=[mp(q9(n)),mp(Math.round(e).toString(16)),mp(Math.round(t).toString(16)),mp(Math.round(r).toString(16))];return i.join("")}bi.equals=function(e,t){return!e||!t?!1:bi(e).toRgbString()==bi(t).toRgbString()};bi.random=function(){return bi.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function s1e(e,t){t=t===0?0:t||10;var r=bi(e).toHsl();return r.s-=t/100,r.s=HE(r.s),bi(r)}function l1e(e,t){t=t===0?0:t||10;var r=bi(e).toHsl();return r.s+=t/100,r.s=HE(r.s),bi(r)}function u1e(e){return bi(e).desaturate(100)}function c1e(e,t){t=t===0?0:t||10;var r=bi(e).toHsl();return r.l+=t/100,r.l=HE(r.l),bi(r)}function f1e(e,t){t=t===0?0:t||10;var r=bi(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),bi(r)}function h1e(e,t){t=t===0?0:t||10;var r=bi(e).toHsl();return r.l-=t/100,r.l=HE(r.l),bi(r)}function p1e(e,t){var r=bi(e).toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,bi(r)}function d1e(e){var t=bi(e).toHsl();return t.h=(t.h+180)%360,bi(t)}function Yz(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var r=bi(e).toHsl(),n=[bi(e)],i=360/t,l=1;l<t;l++)n.push(bi({h:(r.h+l*i)%360,s:r.s,l:r.l}));return n}function m1e(e){var t=bi(e).toHsl(),r=t.h;return[bi(e),bi({h:(r+72)%360,s:t.s,l:t.l}),bi({h:(r+216)%360,s:t.s,l:t.l})]}function g1e(e,t,r){t=t||6,r=r||30;var n=bi(e).toHsl(),i=360/r,l=[bi(e)];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,l.push(bi(n));return l}function y1e(e,t){t=t||6;for(var r=bi(e).toHsv(),n=r.h,i=r.s,l=r.v,a=[],s=1/t;t--;)a.push(bi({h:n,s:i,v:l})),l=(l+s)%1;return a}bi.mix=function(e,t,r){r=r===0?0:r||50;var n=bi(e).toRgb(),i=bi(t).toRgb(),l=r/100,a={r:(i.r-n.r)*l+n.r,g:(i.g-n.g)*l+n.g,b:(i.b-n.b)*l+n.b,a:(i.a-n.a)*l+n.a};return bi(a)};bi.readability=function(e,t){var r=bi(e),n=bi(t);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};bi.isReadable=function(e,t,r){var n=bi.readability(e,t),i,l;switch(l=!1,i=S1e(r),i.level+i.size){case"AAsmall":case"AAAlarge":l=n>=4.5;break;case"AAlarge":l=n>=3;break;case"AAAsmall":l=n>=7;break}return l};bi.mostReadable=function(e,t,r){var n=null,i=0,l,a,s,d;r=r||{},a=r.includeFallbackColors,s=r.level,d=r.size;for(var v=0;v<t.length;v++)l=bi.readability(e,t[v]),l>i&&(i=l,n=bi(t[v]));return bi.isReadable(e,n,{level:s,size:d})||!a?n:(r.includeFallbackColors=!1,bi.mostReadable(e,["#fff","#000"],r))};var kk=bi.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},v1e=bi.hexNames=_1e(kk);function _1e(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function V9(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Es(e,t){b1e(e)&&(e="100%");var r=x1e(e);return e=Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function HE(e){return Math.min(1,Math.max(0,e))}function Ef(e){return parseInt(e,16)}function b1e(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function x1e(e){return typeof e=="string"&&e.indexOf("%")!=-1}function mp(e){return e.length==1?"0"+e:""+e}function Fb(e){return e<=1&&(e=e*100+"%"),e}function q9(e){return Math.round(parseFloat(e)*255).toString(16)}function Jz(e){return Ef(e)/255}var op=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",r="(?:"+t+")|(?:"+e+")",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Hd(e){return!!op.CSS_UNIT.exec(e)}function w1e(e){e=e.replace(e1e,"").replace(t1e,"").toLowerCase();var t=!1;if(kk[e])e=kk[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=op.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=op.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=op.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=op.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=op.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=op.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=op.hex8.exec(e))?{r:Ef(r[1]),g:Ef(r[2]),b:Ef(r[3]),a:Jz(r[4]),format:t?"name":"hex8"}:(r=op.hex6.exec(e))?{r:Ef(r[1]),g:Ef(r[2]),b:Ef(r[3]),format:t?"name":"hex"}:(r=op.hex4.exec(e))?{r:Ef(r[1]+""+r[1]),g:Ef(r[2]+""+r[2]),b:Ef(r[3]+""+r[3]),a:Jz(r[4]+""+r[4]),format:t?"name":"hex8"}:(r=op.hex3.exec(e))?{r:Ef(r[1]+""+r[1]),g:Ef(r[2]+""+r[2]),b:Ef(r[3]+""+r[3]),format:t?"name":"hex"}:!1}function S1e(e){var t,r;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:t,size:r}}const E1e=Object.freeze(Object.defineProperty({__proto__:null,default:bi},Symbol.toStringTag,{value:"Module"}));var Qz=function(t){var r=["r","g","b","a","h","s","l","v"],n=0,i=0;return Qxe(r,function(l){if(t[l]&&(n+=1,isNaN(t[l])||(i+=1),l==="s"||l==="l")){var a=/^\d+%$/;a.test(t[l])&&(i+=1)}}),n===i?t:!1},Ub=function(t,r){var n=t.hex?bi(t.hex):bi(t),i=n.toHsl(),l=n.toHsv(),a=n.toRgb(),s=n.toHex();i.s===0&&(i.h=r||0,l.h=r||0);var d=s==="000000"&&a.a===0;return{hsl:i,hex:d?"transparent":"#"+s,rgb:a,hsv:l,oldHue:t.h||r||i.h,source:t.source}},Tg=function(t){if(t==="transparent")return!0;var r=String(t).charAt(0)==="#"?1:0;return t.length!==4+r&&t.length<7+r&&bi(t).isValid()},FO=function(t){if(!t)return"#fff";var r=Ub(t);if(r.hex==="transparent")return"rgba(0,0,0,0.4)";var n=(r.rgb.r*299+r.rgb.g*587+r.rgb.b*114)/1e3;return n>=128?"#000":"#fff"},aT=function(t,r){var n=t.replace("°","");return bi(r+" ("+n+")")._ok},Tb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C1e=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function P1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T1e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function A1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ec=function(t){var r=function(n){A1e(i,n);function i(l){P1e(this,i);var a=T1e(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return a.handleChange=function(s,d){var v=Qz(s);if(v){var S=Ub(s,s.h||a.state.oldHue);a.setState(S),a.props.onChangeComplete&&a.debounce(a.props.onChangeComplete,S,d),a.props.onChange&&a.props.onChange(S,d)}},a.handleSwatchHover=function(s,d){var v=Qz(s);if(v){var S=Ub(s,s.h||a.state.oldHue);a.props.onSwatchHover&&a.props.onSwatchHover(S,d)}},a.state=Tb({},Ub(l.color,0)),a.debounce=U9(function(s,d,v){s(d,v)},100),a}return C1e(i,[{key:"render",value:function(){var a={};return this.props.onSwatchHover&&(a.onSwatchHover=this.handleSwatchHover),Ee.createElement(t,Tb({},this.props,this.state,{onChange:this.handleChange},a))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return Tb({},Ub(a.color,s.oldHue))}}]),i}(Fe.PureComponent||Fe.Component);return r.propTypes=Tb({},t.propTypes),r.defaultProps=Tb({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),r},k1e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I1e=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function M1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eL(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function O1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var R1e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){O1e(i,n);function i(){var l,a,s,d;M1e(this,i);for(var v=arguments.length,S=Array(v),A=0;A<v;A++)S[A]=arguments[A];return d=(a=(s=eL(this,(l=i.__proto__||Object.getPrototypeOf(i)).call.apply(l,[this].concat(S))),s),s.state={focus:!1},s.handleFocus=function(){return s.setState({focus:!0})},s.handleBlur=function(){return s.setState({focus:!1})},a),eL(s,d)}return I1e(i,[{key:"render",value:function(){return Ee.createElement(r,{onFocus:this.handleFocus,onBlur:this.handleBlur},Ee.createElement(t,k1e({},this.props,this.state)))}}]),i}(Ee.Component)},tL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D1e=13,z1e=function(t){var r=t.color,n=t.style,i=t.onClick,l=i===void 0?function(){}:i,a=t.onHover,s=t.title,d=s===void 0?r:s,v=t.children,S=t.focus,A=t.focusStyle,P=A===void 0?{}:A,L=r==="transparent",F=ia({default:{swatch:tL({background:r,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,S?P:{})}}),K=function($){return l(r,$)},re=function($){return $.keyCode===D1e&&l(r,$)},G=function($){return a(r,$)},H={};return a&&(H.onMouseOver=G),Ee.createElement("div",tL({style:F.swatch,onClick:K,title:d,tabIndex:0,onKeyDown:re},H),v,L&&Ee.createElement($0,{borderRadius:F.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const tv=R1e(z1e);var L1e=function(t){var r=t.direction,n=ia({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return Ee.createElement("div",{style:n.picker})},$1e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G9=function(t){var r=t.rgb,n=t.hsl,i=t.width,l=t.height,a=t.onChange,s=t.direction,d=t.style,v=t.renderers,S=t.pointer,A=t.className,P=A===void 0?"":A,L=ia({default:{picker:{position:"relative",width:i,height:l},alpha:{radius:"2px",style:d}}});return Ee.createElement("div",{style:L.picker,className:"alpha-picker "+P},Ee.createElement(OO,$1e({},L.alpha,{rgb:r,hsl:n,pointer:S,renderers:v,onChange:a,direction:s})))};G9.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:L1e};Ec(G9);function H9(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var N1e="__lodash_hash_undefined__";function B1e(e){return this.__data__.set(e,N1e),this}function F1e(e){return this.__data__.has(e)}function Q2(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new dm;++t<r;)this.add(e[t])}Q2.prototype.add=Q2.prototype.push=B1e;Q2.prototype.has=F1e;function U1e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function j1e(e,t){return e.has(t)}var V1e=1,q1e=2;function W9(e,t,r,n,i,l){var a=r&V1e,s=e.length,d=t.length;if(s!=d&&!(a&&d>s))return!1;var v=l.get(e),S=l.get(t);if(v&&S)return v==t&&S==e;var A=-1,P=!0,L=r&q1e?new Q2:void 0;for(l.set(e,t),l.set(t,e);++A<s;){var F=e[A],K=t[A];if(n)var re=a?n(K,F,A,t,e,l):n(F,K,A,e,t,l);if(re!==void 0){if(re)continue;P=!1;break}if(L){if(!U1e(t,function(G,H){if(!j1e(L,H)&&(F===G||i(F,G,r,n,l)))return L.push(H)})){P=!1;break}}else if(!(F===K||i(F,K,r,n,l))){P=!1;break}}return l.delete(e),l.delete(t),P}function G1e(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function H1e(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var W1e=1,Z1e=2,X1e="[object Boolean]",K1e="[object Date]",Y1e="[object Error]",J1e="[object Map]",Q1e="[object Number]",ewe="[object RegExp]",twe="[object Set]",rwe="[object String]",nwe="[object Symbol]",iwe="[object ArrayBuffer]",awe="[object DataView]",rL=gg?gg.prototype:void 0,oT=rL?rL.valueOf:void 0;function owe(e,t,r,n,i,l,a){switch(r){case awe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case iwe:return!(e.byteLength!=t.byteLength||!l(new X2(e),new X2(t)));case X1e:case K1e:case Q1e:return c1(+e,+t);case Y1e:return e.name==t.name&&e.message==t.message;case ewe:case rwe:return e==t+"";case J1e:var s=G1e;case twe:var d=n&W1e;if(s||(s=H1e),e.size!=t.size&&!d)return!1;var v=a.get(e);if(v)return v==t;n|=Z1e,a.set(e,t);var S=W9(s(e),s(t),n,i,l,a);return a.delete(e),S;case nwe:if(oT)return oT.call(e)==oT.call(t)}return!1}function swe(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function lwe(e,t,r){var n=t(e);return zf(e)?n:swe(n,r(e))}function uwe(e,t){for(var r=-1,n=e==null?0:e.length,i=0,l=[];++r<n;){var a=e[r];t(a,r,e)&&(l[i++]=a)}return l}function cwe(){return[]}var fwe=Object.prototype,hwe=fwe.propertyIsEnumerable,nL=Object.getOwnPropertySymbols,pwe=nL?function(e){return e==null?[]:(e=Object(e),uwe(nL(e),function(t){return hwe.call(e,t)}))}:cwe;const dwe=pwe;function iL(e){return lwe(e,BO,dwe)}var mwe=1,gwe=Object.prototype,ywe=gwe.hasOwnProperty;function vwe(e,t,r,n,i,l){var a=r&mwe,s=iL(e),d=s.length,v=iL(t),S=v.length;if(d!=S&&!a)return!1;for(var A=d;A--;){var P=s[A];if(!(a?P in t:ywe.call(t,P)))return!1}var L=l.get(e),F=l.get(t);if(L&&F)return L==t&&F==e;var K=!0;l.set(e,t),l.set(t,e);for(var re=a;++A<d;){P=s[A];var G=e[P],H=t[P];if(n)var B=a?n(H,G,P,t,e,l):n(G,H,P,e,t,l);if(!(B===void 0?G===H||i(G,H,r,n,l):B)){K=!1;break}re||(re=P=="constructor")}if(K&&!re){var $=e.constructor,N=t.constructor;$!=N&&"constructor"in e&&"constructor"in t&&!(typeof $=="function"&&$ instanceof $&&typeof N=="function"&&N instanceof N)&&(K=!1)}return l.delete(e),l.delete(t),K}var _we=ev(Ep,"DataView");const Ik=_we;var bwe=ev(Ep,"Promise");const Mk=bwe;var xwe=ev(Ep,"Set");const Ok=xwe;var wwe=ev(Ep,"WeakMap");const Rk=wwe;var aL="[object Map]",Swe="[object Object]",oL="[object Promise]",sL="[object Set]",lL="[object WeakMap]",uL="[object DataView]",Ewe=Qy(Ik),Cwe=Qy(Rx),Pwe=Qy(Mk),Twe=Qy(Ok),Awe=Qy(Rk),fy=Jy;(Ik&&fy(new Ik(new ArrayBuffer(1)))!=uL||Rx&&fy(new Rx)!=aL||Mk&&fy(Mk.resolve())!=oL||Ok&&fy(new Ok)!=sL||Rk&&fy(new Rk)!=lL)&&(fy=function(e){var t=Jy(e),r=t==Swe?e.constructor:void 0,n=r?Qy(r):"";if(n)switch(n){case Ewe:return uL;case Cwe:return aL;case Pwe:return oL;case Twe:return sL;case Awe:return lL}return t});const cL=fy;var kwe=1,fL="[object Arguments]",hL="[object Array]",yw="[object Object]",Iwe=Object.prototype,pL=Iwe.hasOwnProperty;function Mwe(e,t,r,n,i,l){var a=zf(e),s=zf(t),d=a?hL:cL(e),v=s?hL:cL(t);d=d==fL?yw:d,v=v==fL?yw:v;var S=d==yw,A=v==yw,P=d==v;if(P&&Y2(e)){if(!Y2(t))return!1;a=!0,S=!1}if(P&&!S)return l||(l=new nd),a||$O(e)?W9(e,t,r,n,i,l):owe(e,t,d,r,n,i,l);if(!(r&kwe)){var L=S&&pL.call(e,"__wrapped__"),F=A&&pL.call(t,"__wrapped__");if(L||F){var K=L?e.value():e,re=F?t.value():t;return l||(l=new nd),i(K,re,r,n,l)}}return P?(l||(l=new nd),vwe(e,t,r,n,i,l)):!1}function UO(e,t,r,n,i){return e===t?!0:e==null||t==null||!yg(e)&&!yg(t)?e!==e&&t!==t:Mwe(e,t,r,n,UO,i)}var Owe=1,Rwe=2;function Dwe(e,t,r,n){var i=r.length,l=i,a=!n;if(e==null)return!l;for(e=Object(e);i--;){var s=r[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<l;){s=r[i];var d=s[0],v=e[d],S=s[1];if(a&&s[2]){if(v===void 0&&!(d in e))return!1}else{var A=new nd;if(n)var P=n(v,S,d,e,t,A);if(!(P===void 0?UO(S,v,Owe|Rwe,n,A):P))return!1}}return!0}function Z9(e){return e===e&&!Ph(e)}function zwe(e){for(var t=BO(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Z9(i)]}return t}function X9(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function Lwe(e){var t=zwe(e);return t.length==1&&t[0][2]?X9(t[0][0],t[0][1]):function(r){return r===e||Dwe(r,e,t)}}var $we=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nwe=/^\w*$/;function jO(e,t){if(zf(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||qE(e)?!0:Nwe.test(e)||!$we.test(e)||t!=null&&e in Object(t)}var Bwe="Expected a function";function VO(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Bwe);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],l=r.cache;if(l.has(i))return l.get(i);var a=e.apply(this,n);return r.cache=l.set(i,a)||l,a};return r.cache=new(VO.Cache||dm),r}VO.Cache=dm;var Fwe=500;function Uwe(e){var t=VO(e,function(n){return r.size===Fwe&&r.clear(),n}),r=t.cache;return t}var jwe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vwe=/\\(\\)?/g,qwe=Uwe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(jwe,function(r,n,i,l){t.push(i?l.replace(Vwe,"$1"):n||r)}),t});const Gwe=qwe;var Hwe=1/0,dL=gg?gg.prototype:void 0,mL=dL?dL.toString:void 0;function K9(e){if(typeof e=="string")return e;if(zf(e))return H9(e,K9)+"";if(qE(e))return mL?mL.call(e):"";var t=e+"";return t=="0"&&1/e==-Hwe?"-0":t}function Wwe(e){return e==null?"":K9(e)}function Y9(e,t){return zf(e)?e:jO(e,t)?[e]:Gwe(Wwe(e))}var Zwe=1/0;function WE(e){if(typeof e=="string"||qE(e))return e;var t=e+"";return t=="0"&&1/e==-Zwe?"-0":t}function J9(e,t){t=Y9(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[WE(t[r++])];return r&&r==n?e:void 0}function Xwe(e,t,r){var n=e==null?void 0:J9(e,t);return n===void 0?r:n}function Kwe(e,t){return e!=null&&t in Object(e)}function Ywe(e,t,r){t=Y9(t,e);for(var n=-1,i=t.length,l=!1;++n<i;){var a=WE(t[n]);if(!(l=e!=null&&r(e,a)))break;e=e[a]}return l||++n!=i?l:(i=e==null?0:e.length,!!i&&LO(i)&&NO(a,i)&&(zf(e)||K2(e)))}function Jwe(e,t){return e!=null&&Ywe(e,t,Kwe)}var Qwe=1,e2e=2;function t2e(e,t){return jO(e)&&Z9(t)?X9(WE(e),t):function(r){var n=Xwe(r,e);return n===void 0&&n===t?Jwe(r,e):UO(t,n,Qwe|e2e)}}function r2e(e){return function(t){return t==null?void 0:t[e]}}function n2e(e){return function(t){return J9(t,e)}}function i2e(e){return jO(e)?r2e(WE(e)):n2e(e)}function a2e(e){return typeof e=="function"?e:e==null?VE:typeof e=="object"?zf(e)?t2e(e[0],e[1]):Lwe(e):i2e(e)}function o2e(e,t){var r=-1,n=B0(e)?Array(e.length):[];return j9(e,function(i,l,a){n[++r]=t(i,l,a)}),n}function rv(e,t){var r=zf(e)?H9:o2e;return r(e,a2e(t))}var s2e=function(t){var r=t.colors,n=t.onClick,i=t.onSwatchHover,l=ia({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return Ee.createElement("div",{style:l.swatches},rv(r,function(a){return Ee.createElement(tv,{key:a,color:a,style:l.swatch,onClick:n,onHover:i,focusStyle:{boxShadow:"0 0 4px "+a}})}),Ee.createElement("div",{style:l.clear}))},qO=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.hex,l=t.colors,a=t.width,s=t.triangle,d=t.styles,v=d===void 0?{}:d,S=t.className,A=S===void 0?"":S,P=i==="transparent",L=function(re,G){Tg(re)&&r({hex:re,source:"hex"},G)},F=ia(Qc({default:{card:{width:a,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:FO(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},v),{"hide-triangle":s==="hide"});return Ee.createElement("div",{style:F.card,className:"block-picker "+A},Ee.createElement("div",{style:F.triangle}),Ee.createElement("div",{style:F.head},P&&Ee.createElement($0,{borderRadius:"6px 6px 0 0"}),Ee.createElement("div",{style:F.label},i)),Ee.createElement("div",{style:F.body},Ee.createElement(s2e,{colors:l,onClick:L,onSwatchHover:n}),Ee.createElement(Xa,{style:{input:F.input},value:i,onChange:L})))};qO.propTypes={width:Tr.oneOfType([Tr.string,Tr.number]),colors:Tr.arrayOf(Tr.string),triangle:Tr.oneOf(["top","hide"]),styles:Tr.object};qO.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};Ec(qO);var l_={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},u_={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},c_={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},f_={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},h_={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},p_={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},d_={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},m_={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},g_={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},jb={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},y_={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},v_={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},__={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},b_={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},x_={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},w_={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},S_={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},E_={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},Q9=function(t){var r=t.color,n=t.onClick,i=t.onSwatchHover,l=t.hover,a=t.active,s=t.circleSize,d=t.circleSpacing,v=ia({default:{swatch:{width:s,height:s,marginRight:d,marginBottom:d,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(s/2+1)+"px "+r,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+r}}},{hover:l,active:a});return Ee.createElement("div",{style:v.swatch},Ee.createElement(tv,{style:v.Swatch,color:r,onClick:n,onHover:i,focusStyle:{boxShadow:v.Swatch.boxShadow+", 0 0 5px "+r}}))};Q9.defaultProps={circleSize:28,circleSpacing:14};const l2e=MO(Q9);var GO=function(t){var r=t.width,n=t.onChange,i=t.onSwatchHover,l=t.colors,a=t.hex,s=t.circleSize,d=t.styles,v=d===void 0?{}:d,S=t.circleSpacing,A=t.className,P=A===void 0?"":A,L=ia(Qc({default:{card:{width:r,display:"flex",flexWrap:"wrap",marginRight:-S,marginBottom:-S}}},v)),F=function(re,G){return n({hex:re,source:"hex"},G)};return Ee.createElement("div",{style:L.card,className:"circle-picker "+P},rv(l,function(K){return Ee.createElement(l2e,{key:K,color:K,onClick:F,onSwatchHover:i,active:a===K.toLowerCase(),circleSize:s,circleSpacing:S})}))};GO.propTypes={width:Tr.oneOfType([Tr.string,Tr.number]),circleSize:Tr.number,circleSpacing:Tr.number,styles:Tr.object};GO.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[l_[500],u_[500],c_[500],f_[500],h_[500],p_[500],d_[500],m_[500],g_[500],jb[500],y_[500],v_[500],__[500],b_[500],x_[500],w_[500],S_[500],E_[500]],styles:{}};Ec(GO);function gL(e){return e===void 0}var e7={};Object.defineProperty(e7,"__esModule",{value:!0});var yL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u2e=Fe,vL=c2e(u2e);function c2e(e){return e&&e.__esModule?e:{default:e}}function f2e(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var vw=24,h2e=e7.default=function(e){var t=e.fill,r=t===void 0?"currentColor":t,n=e.width,i=n===void 0?vw:n,l=e.height,a=l===void 0?vw:l,s=e.style,d=s===void 0?{}:s,v=f2e(e,["fill","width","height","style"]);return vL.default.createElement("svg",yL({viewBox:"0 0 "+vw+" "+vw,style:yL({fill:r,width:i,height:a},d)},v),vL.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},p2e=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function d2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m2e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function g2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var t7=function(e){g2e(t,e);function t(r){d2e(this,t);var n=m2e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){n.state.view==="hex"?n.setState({view:"rgb"}):n.state.view==="rgb"?n.setState({view:"hsl"}):n.state.view==="hsl"&&(n.props.hsl.a===1?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(i,l){i.hex?Tg(i.hex)&&n.props.onChange({hex:i.hex,source:"hex"},l):i.r||i.g||i.b?n.props.onChange({r:i.r||n.props.rgb.r,g:i.g||n.props.rgb.g,b:i.b||n.props.rgb.b,source:"rgb"},l):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},l)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),n.props.onChange({h:i.h||n.props.hsl.h,s:Number(gL(i.s)?n.props.hsl.s:i.s),l:Number(gL(i.l)?n.props.hsl.l:i.l),source:"hsl"},l))},n.showHighlight=function(i){i.currentTarget.style.background="#eee"},n.hideHighlight=function(i){i.currentTarget.style.background="transparent"},r.hsl.a!==1&&r.view==="hex"?n.state={view:"rgb"}:n.state={view:r.view},n}return p2e(t,[{key:"render",value:function(){var n=this,i=ia({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),l=void 0;return this.state.view==="hex"?l=Ee.createElement("div",{style:i.fields,className:"flexbox-fix"},Ee.createElement("div",{style:i.field},Ee.createElement(Xa,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?l=Ee.createElement("div",{style:i.fields,className:"flexbox-fix"},Ee.createElement("div",{style:i.field},Ee.createElement(Xa,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),Ee.createElement("div",{style:i.field},Ee.createElement(Xa,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),Ee.createElement("div",{style:i.field},Ee.createElement(Xa,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),Ee.createElement("div",{style:i.alpha},Ee.createElement(Xa,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(l=Ee.createElement("div",{style:i.fields,className:"flexbox-fix"},Ee.createElement("div",{style:i.field},Ee.createElement(Xa,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),Ee.createElement("div",{style:i.field},Ee.createElement(Xa,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),Ee.createElement("div",{style:i.field},Ee.createElement(Xa,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),Ee.createElement("div",{style:i.alpha},Ee.createElement(Xa,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),Ee.createElement("div",{style:i.wrap,className:"flexbox-fix"},l,Ee.createElement("div",{style:i.toggle},Ee.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(s){return n.icon=s}},Ee.createElement(h2e,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),t}(Ee.Component);t7.defaultProps={view:"hex"};var _L=function(){var t=ia({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return Ee.createElement("div",{style:t.picker})},y2e=function(){var t=ia({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return Ee.createElement("div",{style:t.picker})},HO=function(t){var r=t.width,n=t.onChange,i=t.disableAlpha,l=t.rgb,a=t.hsl,s=t.hsv,d=t.hex,v=t.renderers,S=t.styles,A=S===void 0?{}:S,P=t.className,L=P===void 0?"":P,F=t.defaultView,K=ia(Qc({default:{picker:{width:r,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+l.r+", "+l.g+", "+l.b+", "+l.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},A),{disableAlpha:i});return Ee.createElement("div",{style:K.picker,className:"chrome-picker "+L},Ee.createElement("div",{style:K.saturation},Ee.createElement(GE,{style:K.Saturation,hsl:a,hsv:s,pointer:y2e,onChange:n})),Ee.createElement("div",{style:K.body},Ee.createElement("div",{style:K.controls,className:"flexbox-fix"},Ee.createElement("div",{style:K.color},Ee.createElement("div",{style:K.swatch},Ee.createElement("div",{style:K.active}),Ee.createElement($0,{renderers:v}))),Ee.createElement("div",{style:K.toggles},Ee.createElement("div",{style:K.hue},Ee.createElement(N0,{style:K.Hue,hsl:a,pointer:_L,onChange:n})),Ee.createElement("div",{style:K.alpha},Ee.createElement(OO,{style:K.Alpha,rgb:l,hsl:a,pointer:_L,renderers:v,onChange:n})))),Ee.createElement(t7,{rgb:l,hsl:a,hex:d,view:F,onChange:n,disableAlpha:i})))};HO.propTypes={width:Tr.oneOfType([Tr.string,Tr.number]),disableAlpha:Tr.bool,styles:Tr.object,defaultView:Tr.oneOf(["hex","rgb","hsl"])};HO.defaultProps={width:225,disableAlpha:!1,styles:{}};Ec(HO);var v2e=function(t){var r=t.color,n=t.onClick,i=n===void 0?function(){}:n,l=t.onSwatchHover,a=t.active,s=ia({default:{color:{background:r,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:FO(r),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:a,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return Ee.createElement(tv,{style:s.color,color:r,onClick:i,onHover:l,focusStyle:{boxShadow:"0 0 4px "+r}},Ee.createElement("div",{style:s.dot}))},_2e=function(t){var r=t.hex,n=t.rgb,i=t.onChange,l=ia({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:r},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),a=function(d,v){d.r||d.g||d.b?i({r:d.r||n.r,g:d.g||n.g,b:d.b||n.b,source:"rgb"},v):i({hex:d.hex,source:"hex"},v)};return Ee.createElement("div",{style:l.fields,className:"flexbox-fix"},Ee.createElement("div",{style:l.active}),Ee.createElement(Xa,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"hex",value:r,onChange:a}),Ee.createElement(Xa,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:n.r,onChange:a}),Ee.createElement(Xa,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:n.g,onChange:a}),Ee.createElement(Xa,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:n.b,onChange:a}))},WO=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.colors,l=t.hex,a=t.rgb,s=t.styles,d=s===void 0?{}:s,v=t.className,S=v===void 0?"":v,A=ia(Qc({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},d)),P=function(F,K){F.hex?Tg(F.hex)&&r({hex:F.hex,source:"hex"},K):r(F,K)};return Ee.createElement(f1,{style:A.Compact,styles:d},Ee.createElement("div",{style:A.compact,className:"compact-picker "+S},Ee.createElement("div",null,rv(i,function(L){return Ee.createElement(v2e,{key:L,color:L,active:L.toLowerCase()===l,onClick:P,onSwatchHover:n})}),Ee.createElement("div",{style:A.clear})),Ee.createElement(_2e,{hex:l,rgb:a,onChange:P})))};WO.propTypes={colors:Tr.arrayOf(Tr.string),styles:Tr.object};WO.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};Ec(WO);var b2e=function(t){var r=t.hover,n=t.color,i=t.onClick,l=t.onSwatchHover,a={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},s=ia({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:a}},{hover:r});return Ee.createElement("div",{style:s.swatch},Ee.createElement(tv,{color:n,onClick:i,onHover:l,focusStyle:a}))};const x2e=MO(b2e);var ZO=function(t){var r=t.width,n=t.colors,i=t.onChange,l=t.onSwatchHover,a=t.triangle,s=t.styles,d=s===void 0?{}:s,v=t.className,S=v===void 0?"":v,A=ia(Qc({default:{card:{width:r,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},d),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right","bottom-left-triangle":a==="bottom-left","bottom-right-triangle":a==="bottom-right"}),P=function(F,K){return i({hex:F,source:"hex"},K)};return Ee.createElement("div",{style:A.card,className:"github-picker "+S},Ee.createElement("div",{style:A.triangleShadow}),Ee.createElement("div",{style:A.triangle}),rv(n,function(L){return Ee.createElement(x2e,{color:L,key:L,onClick:P,onSwatchHover:l})}))};ZO.propTypes={width:Tr.oneOfType([Tr.string,Tr.number]),colors:Tr.arrayOf(Tr.string),triangle:Tr.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:Tr.object};ZO.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};Ec(ZO);var w2e=function(t){var r=t.direction,n=ia({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return Ee.createElement("div",{style:n.picker})},S2e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XO=function(t){var r=t.width,n=t.height,i=t.onChange,l=t.hsl,a=t.direction,s=t.pointer,d=t.styles,v=d===void 0?{}:d,S=t.className,A=S===void 0?"":S,P=ia(Qc({default:{picker:{position:"relative",width:r,height:n},hue:{radius:"2px"}}},v)),L=function(K){return i({a:1,h:K.h,l:.5,s:1})};return Ee.createElement("div",{style:P.picker,className:"hue-picker "+A},Ee.createElement(N0,S2e({},P.hue,{hsl:l,pointer:s,onChange:L,direction:a})))};XO.propTypes={styles:Tr.object};XO.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:w2e,styles:{}};Ec(XO);var E2e=function(t){var r=t.onChange,n=t.hex,i=t.rgb,l=t.styles,a=l===void 0?{}:l,s=t.className,d=s===void 0?"":s,v=ia(Qc({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},a)),S=function(P,L){P.hex?Tg(P.hex)&&r({hex:P.hex,source:"hex"},L):(P.r||P.g||P.b)&&r({r:P.r||i.r,g:P.g||i.g,b:P.b||i.b,source:"rgb"},L)};return Ee.createElement(f1,{styles:a},Ee.createElement("div",{style:v.material,className:"material-picker "+d},Ee.createElement(Xa,{style:{wrap:v.HEXwrap,input:v.HEXinput,label:v.HEXlabel},label:"hex",value:n,onChange:S}),Ee.createElement("div",{style:v.split,className:"flexbox-fix"},Ee.createElement("div",{style:v.third},Ee.createElement(Xa,{style:{wrap:v.RGBwrap,input:v.RGBinput,label:v.RGBlabel},label:"r",value:i.r,onChange:S})),Ee.createElement("div",{style:v.third},Ee.createElement(Xa,{style:{wrap:v.RGBwrap,input:v.RGBinput,label:v.RGBlabel},label:"g",value:i.g,onChange:S})),Ee.createElement("div",{style:v.third},Ee.createElement(Xa,{style:{wrap:v.RGBwrap,input:v.RGBinput,label:v.RGBlabel},label:"b",value:i.b,onChange:S})))))};Ec(E2e);var C2e=function(t){var r=t.onChange,n=t.rgb,i=t.hsv,l=t.hex,a=ia({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),s=function(v,S){v["#"]?Tg(v["#"])&&r({hex:v["#"],source:"hex"},S):v.r||v.g||v.b?r({r:v.r||n.r,g:v.g||n.g,b:v.b||n.b,source:"rgb"},S):(v.h||v.s||v.v)&&r({h:v.h||i.h,s:v.s||i.s,v:v.v||i.v,source:"hsv"},S)};return Ee.createElement("div",{style:a.fields},Ee.createElement(Xa,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"h",value:Math.round(i.h),onChange:s}),Ee.createElement(Xa,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:s}),Ee.createElement(Xa,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:s}),Ee.createElement("div",{style:a.divider}),Ee.createElement(Xa,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:n.r,onChange:s}),Ee.createElement(Xa,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:n.g,onChange:s}),Ee.createElement(Xa,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:n.b,onChange:s}),Ee.createElement("div",{style:a.divider}),Ee.createElement(Xa,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"#",value:l.replace("#",""),onChange:s}),Ee.createElement("div",{style:a.fieldSymbols},Ee.createElement("div",{style:a.symbol},"°"),Ee.createElement("div",{style:a.symbol},"%"),Ee.createElement("div",{style:a.symbol},"%")))},P2e=function(t){var r=t.hsl,n=ia({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":r.l>.5});return Ee.createElement("div",{style:n.picker})},T2e=function(){var t=ia({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return Ee.createElement("div",{style:t.pointer},Ee.createElement("div",{style:t.left},Ee.createElement("div",{style:t.leftInside})),Ee.createElement("div",{style:t.right},Ee.createElement("div",{style:t.rightInside})))},bL=function(t){var r=t.onClick,n=t.label,i=t.children,l=t.active,a=ia({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:l});return Ee.createElement("div",{style:a.button,onClick:r},n||i)},A2e=function(t){var r=t.rgb,n=t.currentColor,i=ia({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+r.r+","+r.g+", "+r.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return Ee.createElement("div",null,Ee.createElement("div",{style:i.label},"new"),Ee.createElement("div",{style:i.swatches},Ee.createElement("div",{style:i.new}),Ee.createElement("div",{style:i.current})),Ee.createElement("div",{style:i.label},"current"))},k2e=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function I2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M2e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function O2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var KO=function(e){O2e(t,e);function t(r){I2e(this,t);var n=M2e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:r.hex},n}return k2e(t,[{key:"render",value:function(){var n=this.props,i=n.styles,l=i===void 0?{}:i,a=n.className,s=a===void 0?"":a,d=ia(Qc({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},l));return Ee.createElement("div",{style:d.picker,className:"photoshop-picker "+s},Ee.createElement("div",{style:d.head},this.props.header),Ee.createElement("div",{style:d.body,className:"flexbox-fix"},Ee.createElement("div",{style:d.saturation},Ee.createElement(GE,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:P2e,onChange:this.props.onChange})),Ee.createElement("div",{style:d.hue},Ee.createElement(N0,{direction:"vertical",hsl:this.props.hsl,pointer:T2e,onChange:this.props.onChange})),Ee.createElement("div",{style:d.controls},Ee.createElement("div",{style:d.top,className:"flexbox-fix"},Ee.createElement("div",{style:d.previews},Ee.createElement(A2e,{rgb:this.props.rgb,currentColor:this.state.currentColor})),Ee.createElement("div",{style:d.actions},Ee.createElement(bL,{label:"OK",onClick:this.props.onAccept,active:!0}),Ee.createElement(bL,{label:"Cancel",onClick:this.props.onCancel}),Ee.createElement(C2e,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(Ee.Component);KO.propTypes={header:Tr.string,styles:Tr.object};KO.defaultProps={header:"Color Picker",styles:{}};Ec(KO);var R2e=function(t){var r=t.onChange,n=t.rgb,i=t.hsl,l=t.hex,a=t.disableAlpha,s=ia({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:a}),d=function(S,A){S.hex?Tg(S.hex)&&r({hex:S.hex,source:"hex"},A):S.r||S.g||S.b?r({r:S.r||n.r,g:S.g||n.g,b:S.b||n.b,a:n.a,source:"rgb"},A):S.a&&(S.a<0?S.a=0:S.a>100&&(S.a=100),S.a/=100,r({h:i.h,s:i.s,l:i.l,a:S.a,source:"rgb"},A))};return Ee.createElement("div",{style:s.fields,className:"flexbox-fix"},Ee.createElement("div",{style:s.double},Ee.createElement(Xa,{style:{input:s.input,label:s.label},label:"hex",value:l.replace("#",""),onChange:d})),Ee.createElement("div",{style:s.single},Ee.createElement(Xa,{style:{input:s.input,label:s.label},label:"r",value:n.r,onChange:d,dragLabel:"true",dragMax:"255"})),Ee.createElement("div",{style:s.single},Ee.createElement(Xa,{style:{input:s.input,label:s.label},label:"g",value:n.g,onChange:d,dragLabel:"true",dragMax:"255"})),Ee.createElement("div",{style:s.single},Ee.createElement(Xa,{style:{input:s.input,label:s.label},label:"b",value:n.b,onChange:d,dragLabel:"true",dragMax:"255"})),Ee.createElement("div",{style:s.alpha},Ee.createElement(Xa,{style:{input:s.input,label:s.label},label:"a",value:Math.round(n.a*100),onChange:d,dragLabel:"true",dragMax:"100"})))},D2e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r7=function(t){var r=t.colors,n=t.onClick,i=n===void 0?function(){}:n,l=t.onSwatchHover,a=ia({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!r||!r.length}),s=function(v,S){i({hex:v,source:"hex"},S)};return Ee.createElement("div",{style:a.colors,className:"flexbox-fix"},r.map(function(d){var v=typeof d=="string"?{color:d}:d,S=""+v.color+(v.title||"");return Ee.createElement("div",{key:S,style:a.swatchWrap},Ee.createElement(tv,D2e({},v,{style:a.swatch,onClick:s,onHover:l,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+v.color}})))}))};r7.propTypes={colors:Tr.arrayOf(Tr.oneOfType([Tr.string,Tr.shape({color:Tr.string,title:Tr.string})])).isRequired};var z2e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},YO=function(t){var r=t.width,n=t.rgb,i=t.hex,l=t.hsv,a=t.hsl,s=t.onChange,d=t.onSwatchHover,v=t.disableAlpha,S=t.presetColors,A=t.renderers,P=t.styles,L=P===void 0?{}:P,F=t.className,K=F===void 0?"":F,re=ia(Qc({default:z2e({picker:{width:r,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},L),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},L),{disableAlpha:v});return Ee.createElement("div",{style:re.picker,className:"sketch-picker "+K},Ee.createElement("div",{style:re.saturation},Ee.createElement(GE,{style:re.Saturation,hsl:a,hsv:l,onChange:s})),Ee.createElement("div",{style:re.controls,className:"flexbox-fix"},Ee.createElement("div",{style:re.sliders},Ee.createElement("div",{style:re.hue},Ee.createElement(N0,{style:re.Hue,hsl:a,onChange:s})),Ee.createElement("div",{style:re.alpha},Ee.createElement(OO,{style:re.Alpha,rgb:n,hsl:a,renderers:A,onChange:s}))),Ee.createElement("div",{style:re.color},Ee.createElement($0,null),Ee.createElement("div",{style:re.activeColor}))),Ee.createElement(R2e,{rgb:n,hsl:a,hex:i,onChange:s,disableAlpha:v}),Ee.createElement(r7,{colors:S,onClick:s,onSwatchHover:d}))};YO.propTypes={disableAlpha:Tr.bool,width:Tr.oneOfType([Tr.string,Tr.number]),styles:Tr.object};YO.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};Ec(YO);var Ab=function(t){var r=t.hsl,n=t.offset,i=t.onClick,l=i===void 0?function(){}:i,a=t.active,s=t.first,d=t.last,v=ia({default:{swatch:{height:"12px",background:"hsl("+r.h+", 50%, "+n*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:a,first:s,last:d}),S=function(P){return l({h:r.h,s:.5,l:n,source:"hsl"},P)};return Ee.createElement("div",{style:v.swatch,onClick:S})},L2e=function(t){var r=t.onClick,n=t.hsl,i=ia({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),l=.1;return Ee.createElement("div",{style:i.swatches},Ee.createElement("div",{style:i.swatch},Ee.createElement(Ab,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<l&&Math.abs(n.s-.5)<l,onClick:r,first:!0})),Ee.createElement("div",{style:i.swatch},Ee.createElement(Ab,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<l&&Math.abs(n.s-.5)<l,onClick:r})),Ee.createElement("div",{style:i.swatch},Ee.createElement(Ab,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<l&&Math.abs(n.s-.5)<l,onClick:r})),Ee.createElement("div",{style:i.swatch},Ee.createElement(Ab,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<l&&Math.abs(n.s-.5)<l,onClick:r})),Ee.createElement("div",{style:i.swatch},Ee.createElement(Ab,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<l&&Math.abs(n.s-.5)<l,onClick:r,last:!0})),Ee.createElement("div",{style:i.clear}))},$2e=function(){var t=ia({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return Ee.createElement("div",{style:t.picker})},JO=function(t){var r=t.hsl,n=t.onChange,i=t.pointer,l=t.styles,a=l===void 0?{}:l,s=t.className,d=s===void 0?"":s,v=ia(Qc({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},a));return Ee.createElement("div",{style:v.wrap||{},className:"slider-picker "+d},Ee.createElement("div",{style:v.hue},Ee.createElement(N0,{style:v.Hue,hsl:r,pointer:i,onChange:n})),Ee.createElement("div",{style:v.swatches},Ee.createElement(L2e,{hsl:r,onClick:n})))};JO.propTypes={styles:Tr.object};JO.defaultProps={pointer:$2e,styles:{}};Ec(JO);var n7={};Object.defineProperty(n7,"__esModule",{value:!0});var xL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N2e=Fe,wL=B2e(N2e);function B2e(e){return e&&e.__esModule?e:{default:e}}function F2e(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var _w=24,U2e=n7.default=function(e){var t=e.fill,r=t===void 0?"currentColor":t,n=e.width,i=n===void 0?_w:n,l=e.height,a=l===void 0?_w:l,s=e.style,d=s===void 0?{}:s,v=F2e(e,["fill","width","height","style"]);return wL.default.createElement("svg",xL({viewBox:"0 0 "+_w+" "+_w,style:xL({fill:r,width:i,height:a},d)},v),wL.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},j2e=function(t){var r=t.color,n=t.onClick,i=n===void 0?function(){}:n,l=t.onSwatchHover,a=t.first,s=t.last,d=t.active,v=ia({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:r,marginBottom:"1px"},check:{color:FO(r),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:a,last:s,active:d,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return Ee.createElement(tv,{color:r,style:v.color,onClick:i,onHover:l,focusStyle:{boxShadow:"0 0 4px "+r}},Ee.createElement("div",{style:v.check},Ee.createElement(U2e,null)))},V2e=function(t){var r=t.onClick,n=t.onSwatchHover,i=t.group,l=t.active,a=ia({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return Ee.createElement("div",{style:a.group},rv(i,function(s,d){return Ee.createElement(j2e,{key:s,color:s,active:s.toLowerCase()===l,first:d===0,last:d===i.length-1,onClick:r,onSwatchHover:n})}))},QO=function(t){var r=t.width,n=t.height,i=t.onChange,l=t.onSwatchHover,a=t.colors,s=t.hex,d=t.styles,v=d===void 0?{}:d,S=t.className,A=S===void 0?"":S,P=ia(Qc({default:{picker:{width:r,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},v)),L=function(K,re){return i({hex:K,source:"hex"},re)};return Ee.createElement("div",{style:P.picker,className:"swatches-picker "+A},Ee.createElement(f1,null,Ee.createElement("div",{style:P.overflow},Ee.createElement("div",{style:P.body},rv(a,function(F){return Ee.createElement(V2e,{key:F.toString(),group:F,active:s,onClick:L,onSwatchHover:l})}),Ee.createElement("div",{style:P.clear})))))};QO.propTypes={width:Tr.oneOfType([Tr.string,Tr.number]),height:Tr.oneOfType([Tr.string,Tr.number]),colors:Tr.arrayOf(Tr.arrayOf(Tr.string)),styles:Tr.object};QO.defaultProps={width:320,height:240,colors:[[l_[900],l_[700],l_[500],l_[300],l_[100]],[u_[900],u_[700],u_[500],u_[300],u_[100]],[c_[900],c_[700],c_[500],c_[300],c_[100]],[f_[900],f_[700],f_[500],f_[300],f_[100]],[h_[900],h_[700],h_[500],h_[300],h_[100]],[p_[900],p_[700],p_[500],p_[300],p_[100]],[d_[900],d_[700],d_[500],d_[300],d_[100]],[m_[900],m_[700],m_[500],m_[300],m_[100]],[g_[900],g_[700],g_[500],g_[300],g_[100]],["#194D33",jb[700],jb[500],jb[300],jb[100]],[y_[900],y_[700],y_[500],y_[300],y_[100]],[v_[900],v_[700],v_[500],v_[300],v_[100]],[__[900],__[700],__[500],__[300],__[100]],[b_[900],b_[700],b_[500],b_[300],b_[100]],[x_[900],x_[700],x_[500],x_[300],x_[100]],[w_[900],w_[700],w_[500],w_[300],w_[100]],[S_[900],S_[700],S_[500],S_[300],S_[100]],[E_[900],E_[700],E_[500],E_[300],E_[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};Ec(QO);var eR=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.hex,l=t.colors,a=t.width,s=t.triangle,d=t.styles,v=d===void 0?{}:d,S=t.className,A=S===void 0?"":S,P=ia(Qc({default:{card:{width:a,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},v),{"hide-triangle":s==="hide","top-left-triangle":s==="top-left","top-right-triangle":s==="top-right"}),L=function(K,re){Tg(K)&&r({hex:K,source:"hex"},re)};return Ee.createElement("div",{style:P.card,className:"twitter-picker "+A},Ee.createElement("div",{style:P.triangleShadow}),Ee.createElement("div",{style:P.triangle}),Ee.createElement("div",{style:P.body},rv(l,function(F,K){return Ee.createElement(tv,{key:K,color:F,hex:F,style:P.swatch,onClick:L,onHover:n,focusStyle:{boxShadow:"0 0 4px "+F}})}),Ee.createElement("div",{style:P.hash},"#"),Ee.createElement(Xa,{label:null,style:{input:P.input},value:i.replace("#",""),onChange:L}),Ee.createElement("div",{style:P.clear})))};eR.propTypes={width:Tr.oneOfType([Tr.string,Tr.number]),triangle:Tr.oneOf(["hide","top-left","top-right"]),colors:Tr.arrayOf(Tr.string),styles:Tr.object};eR.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};Ec(eR);var tR=function(t){var r=ia({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(t.hsl.s*100)+"%, "+Math.round(t.hsl.l*100)+"%)"}}});return Ee.createElement("div",{style:r.picker})};tR.propTypes={hsl:Tr.shape({h:Tr.number,s:Tr.number,l:Tr.number,a:Tr.number})};tR.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var rR=function(t){var r=ia({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return Ee.createElement("div",{style:r.picker})};rR.propTypes={hsl:Tr.shape({h:Tr.number,s:Tr.number,l:Tr.number,a:Tr.number})};rR.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var q2e=function(t){var r=t.onChange,n=t.rgb,i=t.hsl,l=t.hex,a=t.hsv,s=function(L,F){if(L.hex)Tg(L.hex)&&r({hex:L.hex,source:"hex"},F);else if(L.rgb){var K=L.rgb.split(",");aT(L.rgb,"rgb")&&r({r:K[0],g:K[1],b:K[2],a:1,source:"rgb"},F)}else if(L.hsv){var re=L.hsv.split(",");aT(L.hsv,"hsv")&&(re[2]=re[2].replace("%",""),re[1]=re[1].replace("%",""),re[0]=re[0].replace("°",""),re[1]==1?re[1]=.01:re[2]==1&&(re[2]=.01),r({h:Number(re[0]),s:Number(re[1]),v:Number(re[2]),source:"hsv"},F))}else if(L.hsl){var G=L.hsl.split(",");aT(L.hsl,"hsl")&&(G[2]=G[2].replace("%",""),G[1]=G[1].replace("%",""),G[0]=G[0].replace("°",""),A[1]==1?A[1]=.01:A[2]==1&&(A[2]=.01),r({h:Number(G[0]),s:Number(G[1]),v:Number(G[2]),source:"hsl"},F))}},d=ia({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),v=n.r+", "+n.g+", "+n.b,S=Math.round(i.h)+"°, "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",A=Math.round(a.h)+"°, "+Math.round(a.s*100)+"%, "+Math.round(a.v*100)+"%";return Ee.createElement("div",{style:d.wrap,className:"flexbox-fix"},Ee.createElement("div",{style:d.fields},Ee.createElement("div",{style:d.double},Ee.createElement(Xa,{style:{input:d.input,label:d.label},label:"hex",value:l,onChange:s})),Ee.createElement("div",{style:d.column},Ee.createElement("div",{style:d.single},Ee.createElement(Xa,{style:{input:d.input2,label:d.label2},label:"rgb",value:v,onChange:s})),Ee.createElement("div",{style:d.single},Ee.createElement(Xa,{style:{input:d.input2,label:d.label2},label:"hsv",value:A,onChange:s})),Ee.createElement("div",{style:d.single},Ee.createElement(Xa,{style:{input:d.input2,label:d.label2},label:"hsl",value:S,onChange:s})))))},nR=function(t){var r=t.width,n=t.onChange,i=t.rgb,l=t.hsl,a=t.hsv,s=t.hex,d=t.header,v=t.styles,S=v===void 0?{}:v,A=t.className,P=A===void 0?"":A,L=ia(Qc({default:{picker:{width:r,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},S));return Ee.createElement("div",{style:L.picker,className:"google-picker "+P},Ee.createElement("div",{style:L.head},d),Ee.createElement("div",{style:L.swatch}),Ee.createElement("div",{style:L.saturation},Ee.createElement(GE,{hsl:l,hsv:a,pointer:tR,onChange:n})),Ee.createElement("div",{style:L.body},Ee.createElement("div",{style:L.controls,className:"flexbox-fix"},Ee.createElement("div",{style:L.hue},Ee.createElement(N0,{style:L.Hue,hsl:l,radius:"4px",pointer:rR,onChange:n}))),Ee.createElement(q2e,{rgb:i,hsl:l,hex:s,hsv:a,onChange:n})))};nR.propTypes={width:Tr.oneOfType([Tr.string,Tr.number]),styles:Tr.object,header:Tr.string};nR.defaultProps={width:652,styles:{},header:"Color picker"};Ec(nR);var Dk={},h1={},iR={};Object.defineProperty(iR,"__esModule",{value:!0});iR.calculateChange=function(t,r,n,i,l){var a=l.clientWidth,s=l.clientHeight,d=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,v=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,S=d-(l.getBoundingClientRect().left+window.pageXOffset),A=v-(l.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var P=void 0;if(A<0?P=0:A>s?P=1:P=Math.round(A*100/s)/100,r.a!==P)return{h:r.h,s:r.s,l:r.l,a:P,source:"rgb"}}else{var L=void 0;if(S<0?L=0:S>a?L=1:L=Math.round(S*100/a)/100,i!==L)return{h:r.h,s:r.s,l:r.l,a:L,source:"rgb"}}return null};var nv={},ZE={};Object.defineProperty(ZE,"__esModule",{value:!0});var sT={},G2e=ZE.render=function(t,r,n,i){if(typeof document>"u"&&!i)return null;var l=i?new i:document.createElement("canvas");l.width=n*2,l.height=n*2;var a=l.getContext("2d");return a?(a.fillStyle=t,a.fillRect(0,0,l.width,l.height),a.fillStyle=r,a.fillRect(0,0,n,n),a.translate(n,n),a.fillRect(0,0,n,n),l.toDataURL()):null};ZE.get=function(t,r,n,i){var l=t+"-"+r+"-"+n+(i?"-server":"");if(sT[l])return sT[l];var a=G2e(t,r,n,i);return sT[l]=a,a};Object.defineProperty(nv,"__esModule",{value:!0});nv.Checkboard=void 0;var SL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i7=Fe,EL=a7(i7),H2e=Vl,W2e=a7(H2e),Z2e=ZE,X2e=K2e(Z2e);function K2e(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a7(e){return e&&e.__esModule?e:{default:e}}var o7=nv.Checkboard=function(t){var r=t.white,n=t.grey,i=t.size,l=t.renderers,a=t.borderRadius,s=t.boxShadow,d=t.children,v=(0,W2e.default)({default:{grid:{borderRadius:a,boxShadow:s,absolute:"0px 0px 0px 0px",background:"url("+X2e.get(r,n,i,l.canvas)+") center left"}}});return(0,i7.isValidElement)(d)?EL.default.cloneElement(d,SL({},d.props,{style:SL({},d.props.style,v.grid)})):EL.default.createElement("div",{style:v.grid})};o7.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};nv.default=o7;Object.defineProperty(h1,"__esModule",{value:!0});h1.Alpha=void 0;var Y2e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J2e=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),zk=Fe,Hm=aR(zk),Q2e=Vl,eSe=aR(Q2e),tSe=iR,rSe=aSe(tSe),nSe=nv,iSe=aR(nSe);function aSe(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function aR(e){return e&&e.__esModule?e:{default:e}}function oSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CL(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function sSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var lSe=h1.Alpha=function(e){sSe(t,e);function t(){var r,n,i,l;oSe(this,t);for(var a=arguments.length,s=Array(a),d=0;d<a;d++)s[d]=arguments[d];return l=(n=(i=CL(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(s))),i),i.handleChange=function(v){var S=rSe.calculateChange(v,i.props.hsl,i.props.direction,i.props.a,i.container);S&&typeof i.props.onChange=="function"&&i.props.onChange(S,v)},i.handleMouseDown=function(v){i.handleChange(v),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},n),CL(i,l)}return J2e(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var n=this,i=this.props.rgb,l=(0,eSe.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:Y2e({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return Hm.default.createElement("div",{style:l.alpha},Hm.default.createElement("div",{style:l.checkboard},Hm.default.createElement(iSe.default,{renderers:this.props.renderers})),Hm.default.createElement("div",{style:l.gradient}),Hm.default.createElement("div",{style:l.container,ref:function(s){return n.container=s},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Hm.default.createElement("div",{style:l.pointer},this.props.pointer?Hm.default.createElement(this.props.pointer,this.props):Hm.default.createElement("div",{style:l.slider}))))}}]),t}(zk.PureComponent||zk.Component);h1.default=lSe;var p1={};Object.defineProperty(p1,"__esModule",{value:!0});p1.EditableInput=void 0;var uSe=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Lk=Fe,lT=s7(Lk),cSe=Vl,fSe=s7(cSe);function s7(e){return e&&e.__esModule?e:{default:e}}function hSe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dSe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function mSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var gSe=1,l7=38,ySe=40,vSe=[l7,ySe],_Se=function(t){return vSe.indexOf(t)>-1},bSe=function(t){return Number(String(t).replace(/%/g,""))},xSe=1,wSe=p1.EditableInput=function(e){mSe(t,e);function t(r){pSe(this,t);var n=dSe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(i){n.setUpdatedValue(i.target.value,i)},n.handleKeyDown=function(i){var l=bSe(i.target.value);if(!isNaN(l)&&_Se(i.keyCode)){var a=n.getArrowOffset(),s=i.keyCode===l7?l+a:l-a;n.setUpdatedValue(s,i)}},n.handleDrag=function(i){if(n.props.dragLabel){var l=Math.round(n.props.value+i.movementX);l>=0&&l<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(l),i)}},n.handleMouseDown=function(i){n.props.dragLabel&&(i.preventDefault(),n.handleDrag(i),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(r.value).toUpperCase(),blurValue:String(r.value).toUpperCase()},n.inputId="rc-editable-input-"+xSe++,n}return uSe(t,[{key:"componentDidUpdate",value:function(n,i){this.props.value!==this.state.value&&(n.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(n){return hSe({},this.props.label,n)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||gSe}},{key:"setUpdatedValue",value:function(n,i){var l=this.props.label?this.getValueObjectWithLabel(n):n;this.props.onChange&&this.props.onChange(l,i),this.setState({value:n})}},{key:"render",value:function(){var n=this,i=(0,fSe.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return lT.default.createElement("div",{style:i.wrap},lT.default.createElement("input",{id:this.inputId,style:i.input,ref:function(a){return n.input=a},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?lT.default.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(Lk.PureComponent||Lk.Component);p1.default=wSe;var d1={},oR={};Object.defineProperty(oR,"__esModule",{value:!0});oR.calculateChange=function(t,r,n,i){var l=i.clientWidth,a=i.clientHeight,s=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,d=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,v=s-(i.getBoundingClientRect().left+window.pageXOffset),S=d-(i.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var A=void 0;if(S<0)A=359;else if(S>a)A=0;else{var P=-(S*100/a)+100;A=360*P/100}if(n.h!==A)return{h:A,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var L=void 0;if(v<0)L=0;else if(v>l)L=359;else{var F=v*100/l;L=360*F/100}if(n.h!==L)return{h:L,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null};Object.defineProperty(d1,"__esModule",{value:!0});d1.Hue=void 0;var SSe=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),$k=Fe,e_=u7($k),ESe=Vl,CSe=u7(ESe),PSe=oR,TSe=ASe(PSe);function ASe(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function u7(e){return e&&e.__esModule?e:{default:e}}function kSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PL(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ISe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var MSe=d1.Hue=function(e){ISe(t,e);function t(){var r,n,i,l;kSe(this,t);for(var a=arguments.length,s=Array(a),d=0;d<a;d++)s[d]=arguments[d];return l=(n=(i=PL(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(s))),i),i.handleChange=function(v){var S=TSe.calculateChange(v,i.props.direction,i.props.hsl,i.container);S&&typeof i.props.onChange=="function"&&i.props.onChange(S,v)},i.handleMouseDown=function(v){i.handleChange(v),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},n),PL(i,l)}return SSe(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.direction,l=i===void 0?"horizontal":i,a=(0,CSe.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:l==="vertical"});return e_.default.createElement("div",{style:a.hue},e_.default.createElement("div",{className:"hue-"+l,style:a.container,ref:function(d){return n.container=d},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},e_.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),e_.default.createElement("div",{style:a.pointer},this.props.pointer?e_.default.createElement(this.props.pointer,this.props):e_.default.createElement("div",{style:a.slider}))))}}]),t}($k.PureComponent||$k.Component);d1.default=MSe;var m1={},OSe=SE,RSe=Kx;function DSe(e,t,r){(r!==void 0&&!RSe(e[t],r)||r===void 0&&!(t in e))&&OSe(e,t,r)}var c7=DSe,zSe=M0,LSe=ud;function $Se(e){return LSe(e)&&zSe(e)}var NSe=$Se;function BSe(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var f7=BSe,FSe=t1,USe=r1;function jSe(e){return FSe(e,USe(e))}var VSe=jSe,TL=c7,qSe=ij,GSe=sj,HSe=aj,WSe=lj,AL=rO,kL=Bf,ZSe=NSe,XSe=xE,KSe=pM,YSe=kh,JSe=x9,QSe=sO,IL=f7,eEe=VSe;function tEe(e,t,r,n,i,l,a){var s=IL(e,r),d=IL(t,r),v=a.get(d);if(v){TL(e,r,v);return}var S=l?l(s,d,r+"",e,t,a):void 0,A=S===void 0;if(A){var P=kL(d),L=!P&&XSe(d),F=!P&&!L&&QSe(d);S=d,P||L||F?kL(s)?S=s:ZSe(s)?S=HSe(s):L?(A=!1,S=qSe(d,!0)):F?(A=!1,S=GSe(d,!0)):S=[]:JSe(d)||AL(d)?(S=s,AL(s)?S=eEe(s):(!YSe(s)||KSe(s))&&(S=WSe(d))):A=!1}A&&(a.set(d,S),i(S,d,n,l,a),a.delete(d)),TL(e,r,S)}var rEe=tEe,nEe=bE,iEe=c7,aEe=v9,oEe=rEe,sEe=kh,lEe=r1,uEe=f7;function h7(e,t,r,n,i){e!==t&&aEe(t,function(l,a){if(i||(i=new nEe),sEe(l))oEe(e,t,a,r,h7,n,i);else{var s=n?n(uEe(e,a),l,a+"",e,t,i):void 0;s===void 0&&(s=l),iEe(e,a,s)}},lEe)}var cEe=h7;function fEe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var hEe=fEe,pEe=hEe,ML=Math.max;function dEe(e,t,r){return t=ML(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,l=ML(n.length-t,0),a=Array(l);++i<l;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),pEe(e,this,s)}}var mEe=dEe;function gEe(e){return function(){return e}}var yEe=gEe,vEe=yEe,OL=rj,_Ee=BE,bEe=OL?function(e,t){return OL(e,"toString",{configurable:!0,enumerable:!1,value:vEe(t),writable:!0})}:_Ee,xEe=bEe,wEe=800,SEe=16,EEe=Date.now;function CEe(e){var t=0,r=0;return function(){var n=EEe(),i=SEe-(n-r);if(r=n,i>0){if(++t>=wEe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var PEe=CEe,TEe=xEe,AEe=PEe,kEe=AEe(TEe),IEe=kEe,MEe=BE,OEe=mEe,REe=IEe;function DEe(e,t){return REe(OEe(e,t,MEe),e+"")}var zEe=DEe,LEe=Kx,$Ee=M0,NEe=nO,BEe=kh;function FEe(e,t,r){if(!BEe(r))return!1;var n=typeof t;return(n=="number"?$Ee(r)&&NEe(t,r.length):n=="string"&&t in r)?LEe(r[t],e):!1}var UEe=FEe,jEe=zEe,VEe=UEe;function qEe(e){return jEe(function(t,r){var n=-1,i=r.length,l=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(l=e.length>3&&typeof l=="function"?(i--,l):void 0,a&&VEe(r[0],r[1],a)&&(l=i<3?void 0:l,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,l)}return t})}var GEe=qEe,HEe=cEe,WEe=GEe,ZEe=WEe(function(e,t,r){HEe(e,t,r)}),XEe=ZEe;Object.defineProperty(m1,"__esModule",{value:!0});m1.Raised=void 0;var KEe=Fe,uT=XE(KEe),YEe=t9,bw=XE(YEe),JEe=Vl,QEe=XE(JEe),eCe=XEe,tCe=XE(eCe);function XE(e){return e&&e.__esModule?e:{default:e}}var sR=m1.Raised=function(t){var r=t.zDepth,n=t.radius,i=t.background,l=t.children,a=t.styles,s=a===void 0?{}:a,d=(0,QEe.default)((0,tCe.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+r+"px "+r*4+"px rgba(0,0,0,.24)",borderRadius:n,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},s),{"zDepth-1":r===1});return uT.default.createElement("div",{style:d.wrap},uT.default.createElement("div",{style:d.bg}),uT.default.createElement("div",{style:d.content},l))};sR.propTypes={background:bw.default.string,zDepth:bw.default.oneOf([0,1,2,3,4,5]),radius:bw.default.number,styles:bw.default.object};sR.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};m1.default=sR;var g1={},rCe=xp,nCe=function(){return rCe.Date.now()},iCe=nCe,aCe=/\s/;function oCe(e){for(var t=e.length;t--&&aCe.test(e.charAt(t)););return t}var sCe=oCe,lCe=sCe,uCe=/^\s+/;function cCe(e){return e&&e.slice(0,lCe(e)+1).replace(uCe,"")}var fCe=cCe,hCe=fCe,RL=kh,pCe=BS,DL=0/0,dCe=/^[-+]0x[0-9a-f]+$/i,mCe=/^0b[01]+$/i,gCe=/^0o[0-7]+$/i,yCe=parseInt;function vCe(e){if(typeof e=="number")return e;if(pCe(e))return DL;if(RL(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=RL(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=hCe(e);var r=mCe.test(e);return r||gCe.test(e)?yCe(e.slice(2),r?2:8):dCe.test(e)?DL:+e}var _Ce=vCe,bCe=kh,cT=iCe,zL=_Ce,xCe="Expected a function",wCe=Math.max,SCe=Math.min;function ECe(e,t,r){var n,i,l,a,s,d,v=0,S=!1,A=!1,P=!0;if(typeof e!="function")throw new TypeError(xCe);t=zL(t)||0,bCe(r)&&(S=!!r.leading,A="maxWait"in r,l=A?wCe(zL(r.maxWait)||0,t):l,P="trailing"in r?!!r.trailing:P);function L(z){var X=n,te=i;return n=i=void 0,v=z,a=e.apply(te,X),a}function F(z){return v=z,s=setTimeout(G,t),S?L(z):a}function K(z){var X=z-d,te=z-v,pe=t-X;return A?SCe(pe,l-te):pe}function re(z){var X=z-d,te=z-v;return d===void 0||X>=t||X<0||A&&te>=l}function G(){var z=cT();if(re(z))return H(z);s=setTimeout(G,K(z))}function H(z){return s=void 0,P&&n?L(z):(n=i=void 0,a)}function B(){s!==void 0&&clearTimeout(s),v=0,n=d=i=s=void 0}function $(){return s===void 0?a:H(cT())}function N(){var z=cT(),X=re(z);if(n=arguments,i=this,d=z,X){if(s===void 0)return F(d);if(A)return clearTimeout(s),s=setTimeout(G,t),L(d)}return s===void 0&&(s=setTimeout(G,t)),a}return N.cancel=B,N.flush=$,N}var lR=ECe;const CCe=Xs(lR);var PCe=lR,TCe=kh,ACe="Expected a function";function kCe(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(ACe);return TCe(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),PCe(e,t,{leading:n,maxWait:t,trailing:i})}var p7=kCe;const d7=Xs(p7);var uR={};Object.defineProperty(uR,"__esModule",{value:!0});uR.calculateChange=function(t,r,n){var i=n.getBoundingClientRect(),l=i.width,a=i.height,s=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,d=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,v=s-(n.getBoundingClientRect().left+window.pageXOffset),S=d-(n.getBoundingClientRect().top+window.pageYOffset);v<0?v=0:v>l&&(v=l),S<0?S=0:S>a&&(S=a);var A=v/l,P=1-S/a;return{h:r.h,s:A,v:P,a:r.a,source:"hsv"}};Object.defineProperty(g1,"__esModule",{value:!0});g1.Saturation=void 0;var ICe=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Nk=Fe,ay=cR(Nk),MCe=Vl,OCe=cR(MCe),RCe=p7,DCe=cR(RCe),zCe=uR,LCe=$Ce(zCe);function $Ce(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function cR(e){return e&&e.__esModule?e:{default:e}}function NCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BCe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function FCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var UCe=g1.Saturation=function(e){FCe(t,e);function t(r){NCe(this,t);var n=BCe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return n.handleChange=function(i){typeof n.props.onChange=="function"&&n.throttle(n.props.onChange,LCe.calculateChange(i,n.props.hsl,n.container),i)},n.handleMouseDown=function(i){n.handleChange(i);var l=n.getContainerRenderWindow();l.addEventListener("mousemove",n.handleChange),l.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=(0,DCe.default)(function(i,l,a){i(l,a)},50),n}return ICe(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var n=this.container,i=window;!i.document.contains(n)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var n=this.getContainerRenderWindow();n.removeEventListener("mousemove",this.handleChange),n.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.style||{},l=i.color,a=i.white,s=i.black,d=i.pointer,v=i.circle,S=(0,OCe.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:l,white:a,black:s,pointer:d,circle:v}},{custom:!!this.props.style});return ay.default.createElement("div",{style:S.color,ref:function(P){return n.container=P},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},ay.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),ay.default.createElement("div",{style:S.white,className:"saturation-white"},ay.default.createElement("div",{style:S.black,className:"saturation-black"}),ay.default.createElement("div",{style:S.pointer},this.props.pointer?ay.default.createElement(this.props.pointer,this.props):ay.default.createElement("div",{style:S.circle}))))}}]),t}(Nk.PureComponent||Nk.Component);g1.default=UCe;var y1={},jc={},jCe=tj,VCe=E9,qCe=_9,GCe=Bf;function HCe(e,t){var r=GCe(e)?jCe:VCe;return r(e,qCe(t))}var WCe=HCe,ZCe=WCe;const XCe=Vy(E1e);Object.defineProperty(jc,"__esModule",{value:!0});jc.isvalidColorString=jc.red=jc.getContrastingColor=jc.isValidHex=jc.toState=jc.simpleCheckForValidColor=void 0;var KCe=ZCe,YCe=m7(KCe),JCe=XCe,eS=m7(JCe);function m7(e){return e&&e.__esModule?e:{default:e}}jc.simpleCheckForValidColor=function(t){var r=["r","g","b","a","h","s","l","v"],n=0,i=0;return(0,YCe.default)(r,function(l){if(t[l]&&(n+=1,isNaN(t[l])||(i+=1),l==="s"||l==="l")){var a=/^\d+%$/;a.test(t[l])&&(i+=1)}}),n===i?t:!1};var QCe=jc.toState=function(t,r){var n=t.hex?(0,eS.default)(t.hex):(0,eS.default)(t),i=n.toHsl(),l=n.toHsv(),a=n.toRgb(),s=n.toHex();i.s===0&&(i.h=r||0,l.h=r||0);var d=s==="000000"&&a.a===0;return{hsl:i,hex:d?"transparent":"#"+s,rgb:a,hsv:l,oldHue:t.h||r||i.h,source:t.source}};jc.isValidHex=function(t){if(t==="transparent")return!0;var r=String(t).charAt(0)==="#"?1:0;return t.length!==4+r&&t.length<7+r&&(0,eS.default)(t).isValid()};jc.getContrastingColor=function(t){if(!t)return"#fff";var r=QCe(t);if(r.hex==="transparent")return"rgba(0,0,0,0.4)";var n=(r.rgb.r*299+r.rgb.g*587+r.rgb.b*114)/1e3;return n>=128?"#000":"#fff"};jc.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}};jc.isvalidColorString=function(t,r){var n=t.replace("°","");return(0,eS.default)(r+" ("+n+")")._ok};Object.defineProperty(y1,"__esModule",{value:!0});y1.ColorWrap=void 0;var kb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ePe=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Bk=Fe,tPe=g7(Bk),rPe=lR,nPe=g7(rPe),iPe=jc,t_=aPe(iPe);function aPe(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function g7(e){return e&&e.__esModule?e:{default:e}}function oPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sPe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function lPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var uPe=y1.ColorWrap=function(t){var r=function(n){lPe(i,n);function i(l){oPe(this,i);var a=sPe(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return a.handleChange=function(s,d){var v=t_.simpleCheckForValidColor(s);if(v){var S=t_.toState(s,s.h||a.state.oldHue);a.setState(S),a.props.onChangeComplete&&a.debounce(a.props.onChangeComplete,S,d),a.props.onChange&&a.props.onChange(S,d)}},a.handleSwatchHover=function(s,d){var v=t_.simpleCheckForValidColor(s);if(v){var S=t_.toState(s,s.h||a.state.oldHue);a.props.onSwatchHover&&a.props.onSwatchHover(S,d)}},a.state=kb({},t_.toState(l.color,0)),a.debounce=(0,nPe.default)(function(s,d,v){s(d,v)},100),a}return ePe(i,[{key:"render",value:function(){var a={};return this.props.onSwatchHover&&(a.onSwatchHover=this.handleSwatchHover),tPe.default.createElement(t,kb({},this.props,this.state,{onChange:this.handleChange},a))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return kb({},t_.toState(a.color,s.oldHue))}}]),i}(Bk.PureComponent||Bk.Component);return r.propTypes=kb({},t.propTypes),r.defaultProps=kb({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),r};y1.default=uPe;var v1={},KE={};Object.defineProperty(KE,"__esModule",{value:!0});KE.handleFocus=void 0;var cPe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fPe=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),hPe=Fe,fT=pPe(hPe);function pPe(e){return e&&e.__esModule?e:{default:e}}function dPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LL(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function mPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}KE.handleFocus=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){mPe(i,n);function i(){var l,a,s,d;dPe(this,i);for(var v=arguments.length,S=Array(v),A=0;A<v;A++)S[A]=arguments[A];return d=(a=(s=LL(this,(l=i.__proto__||Object.getPrototypeOf(i)).call.apply(l,[this].concat(S))),s),s.state={focus:!1},s.handleFocus=function(){return s.setState({focus:!0})},s.handleBlur=function(){return s.setState({focus:!1})},a),LL(s,d)}return fPe(i,[{key:"render",value:function(){return fT.default.createElement(r,{onFocus:this.handleFocus,onBlur:this.handleBlur},fT.default.createElement(t,cPe({},this.props,this.state)))}}]),i}(fT.default.Component)};Object.defineProperty(v1,"__esModule",{value:!0});v1.Swatch=void 0;var $L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gPe=Fe,NL=fR(gPe),yPe=Vl,vPe=fR(yPe),_Pe=KE,bPe=nv,xPe=fR(bPe);function fR(e){return e&&e.__esModule?e:{default:e}}var wPe=13,SPe=v1.Swatch=function(t){var r=t.color,n=t.style,i=t.onClick,l=i===void 0?function(){}:i,a=t.onHover,s=t.title,d=s===void 0?r:s,v=t.children,S=t.focus,A=t.focusStyle,P=A===void 0?{}:A,L=r==="transparent",F=(0,vPe.default)({default:{swatch:$L({background:r,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,S?P:{})}}),K=function($){return l(r,$)},re=function($){return $.keyCode===wPe&&l(r,$)},G=function($){return a(r,$)},H={};return a&&(H.onMouseOver=G),NL.default.createElement("div",$L({style:F.swatch,onClick:K,title:d,tabIndex:0,onKeyDown:re},H),v,L&&NL.default.createElement(xPe.default,{borderRadius:F.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};v1.default=(0,_Pe.handleFocus)(SPe);(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=h1;Object.defineProperty(e,"Alpha",{enumerable:!0,get:function(){return v(t).default}});var r=nv;Object.defineProperty(e,"Checkboard",{enumerable:!0,get:function(){return v(r).default}});var n=p1;Object.defineProperty(e,"EditableInput",{enumerable:!0,get:function(){return v(n).default}});var i=d1;Object.defineProperty(e,"Hue",{enumerable:!0,get:function(){return v(i).default}});var l=m1;Object.defineProperty(e,"Raised",{enumerable:!0,get:function(){return v(l).default}});var a=g1;Object.defineProperty(e,"Saturation",{enumerable:!0,get:function(){return v(a).default}});var s=y1;Object.defineProperty(e,"ColorWrap",{enumerable:!0,get:function(){return v(s).default}});var d=v1;Object.defineProperty(e,"Swatch",{enumerable:!0,get:function(){return v(d).default}});function v(S){return S&&S.__esModule?S:{default:S}}})(Dk);let EPe=-1;const BL=()=>`input-id-${++EPe}`,CPe=Ee.memo(({small:e=!1,large:t=!1})=>{const r=Mo();return ae("div",{className:`
        ${e?"h-3 mt-1 w-1":t?"h-9 mt-3 w-3":"h-6 mt-2 w-2"}
        rounded pointer-events-none ${r.accent3}
      `,style:{transform:"translate(-50%, -50%)"}})}),PPe=({showPreview:e=!0,showInputs:t=!0,showLabels:r=!0,showHex:n=!0,showRgb:i=!0,small:l=!1,large:a=!1,disabled:s=!1,autoFocus:d=!1,...v})=>{const[S,A]=Ee.useState(),P=Ee.useRef(BL()),L=Ee.useRef(BL());Ee.useEffect(()=>{S&&d&&S.focus()},[S,d]);const F=Mo(),K=F[`input${dO({large:a,small:l})}`];return ae("div",{tabIndex:s?-1:0,ref:A,className:`
        ${K} w-full h-full
      `,children:Ft("div",{className:`
          grid
          ${l?"gap-y-1 py-1":a?"gap-y-4 py-2":"gap-y-2 py-1"}
        `,style:{gridTemplateRows:`auto auto${t?" auto":""}`},children:[Ft("div",{className:`
            grid grid-cols-12
            ${l?"gap-x-1":a?"gap-x-4":"gap-x-2"}
          `,style:{height:a?"20rem":l?"10rem":"15rem"},children:[ae("div",{className:`
              relative h-full cursor-pointer
              ${e?"col-span-9":"col-span-12"}
            `,children:ae(Dk.Saturation,{...v,style:{pointer:{pointerEvents:"none"}}})}),e?ae("div",{className:"col-span-3 h-full rounded",style:{backgroundColor:v.hex}}):null]}),ae("div",{className:`
            rounded cursor-pointer relative
            ${l?"h-2":a?"h-6":"h-4"}
          `,children:ae(Dk.Hue,{...v,direction:"horizontal",pointer:()=>ae(CPe,{small:l,large:a})})}),t?Ft("div",{className:`
              grid grid-cols-${!!n+!!i}
              ${l?"gap-x-1":a?"gap-x-4":"gap-x-2"}
            `,children:[n?ae("div",{className:r?`${F.accent1} rounded
                  ${r?l?"px-1 pt-1 pb-0":a?"px-4 pt-4 pb-3":"px-2 pt-2 pb-1":""}
                `:null,children:ae(kPe,{id:P.current,...v,value:v.hex,small:l,large:a,showLabels:r})}):null,i?ae("div",{className:r?`${F.accent1} rounded
                  ${r?l?"px-1 pt-1 pb-0":a?"px-4 pt-4 pb-3":"px-2 pt-2 pb-1":""}
                `:null,children:ae(OPe,{id:L.current,...v,value:v.rgb,small:l,large:a,showLabels:r})}):null]}):null]})})};Ec(PPe);const TPe=e=>({value:e.toUpperCase(),blurValue:e.toUpperCase()}),APe=(e,t)=>{const{type:r,...n}=t;switch(r){case"update-state":return{...e,...n};default:return e}},Jw=Ee.forwardRef(({id:e,label:t,showLabels:r,...n},i)=>Ft("div",{className:"flex flex-col items-center",children:[ae(R0,{id:e,ref:i,...n}),r?ae("label",{htmlFor:e,className:`
            font-bold
            ${n.small?"text-sm":n.large?"text-lg":"text-base"}
          `,children:t}):null]})),kPe=({id:e,value:t,onChange:r,small:n=!1,large:i=!1,showLabels:l=!0})=>{const[a,s]=Ee.useReducer(APe,t,TPe),d=Ee.useRef(null),v=Ee.useRef(null),S=Ee.useRef(null);Ee.useEffect(()=>{t!==a.value&&(S.current!==t||v.current!==a.value)&&(d.current===document.activeElement?s({type:"update-state",blurValue:t.toUpperCase()}):s({type:"update-state",value:t.toUpperCase(),blurValue:!a.blurValue&&t.toUpperCase()})),v.current=a.value,S.current=t},[t,a]);const A=Ee.useCallback(L=>{s({type:"update-state",value:L}),r(L)},[r]),P=Ee.useCallback(L=>{a.blurValue&&s({type:"update-state",value:a.blurValue,blurValue:null})},[a]);return ae(Jw,{type:"text",id:e,small:n,large:i,ref:d,onChange:A,value:a.value,onBlur:P,showLabels:l,label:"Hex"})},IPe=e=>({value:e,blurValue:e}),MPe=(e,t)=>{const{type:r,...n}=t;switch(r){case"update-state":return{...e,...n};case"update-value":return{...e,value:{...e.value,...n}};default:return e}},OPe=({id:e,value:t,onChange:r,small:n=!1,large:i=!1,showLabels:l=!0})=>{const[a,s]=Ee.useReducer(MPe,t,IPe),d=Ee.useRef(null),v=Ee.useRef(null),S=Ee.useRef(null),A=Ee.useRef(null),P=Ee.useRef(null);Ee.useEffect(()=>{!rm(t,a.value)&&(!rm(P.current,t)||!rm(A.current,a.value))&&([d.current,v.current,S.current].includes(document.activeElement)?s({type:"update-state",blurValue:t}):s({type:"update-state",value:t,blurValue:!a.blurValue&&t})),A.current=a.value,P.current=t},[t,a]);const L=Ee.useCallback((K,re)=>{const G=re.target.name;s({type:"update-value",[G]:K}),r({...t,[G]:K})},[t,r]),F=Ee.useCallback(K=>{a.blurValue&&s({type:"update-state",value:a.blurValue,blurValue:null})},[a]);return Ft("div",{className:`
      grid grid-cols-3
      ${n?"gap-x-1":i?"gap-x-4":"gap-x-2"}
    `,children:[ae(Jw,{type:"number",id:`r-${e}`,name:"r",small:n,large:i,min:0,max:255,ref:d,onChange:L,value:a.value.r,onBlur:F,showLabels:l,label:"Red"}),ae(Jw,{type:"number",id:`g-${e}`,name:"g",small:n,large:i,min:0,max:255,ref:v,onChange:L,value:a.value.g,onBlur:F,showLabels:l,label:"Green"}),ae(Jw,{type:"number",id:`b-${e}`,name:"b",small:n,large:i,min:0,max:255,ref:S,onChange:L,value:a.value.b,onBlur:F,showLabels:l,label:"Blue"})]})},RPe=({column:e})=>{const{filterValue:t="",setFilter:r}=e,n=Mo().table();return ae("div",{className:"w-3/4",children:ae("input",{className:n.inputSmall,value:t,onChange:i=>r(i.target.value),onClick:i=>i.stopPropagation(),placeholder:"Search..."})})},DPe=({column:{filterValue:e,setFilter:t,preFilteredRows:r,id:n,filterMeta:i,filterDomain:l,onFilterChange:a,customValue:s,filterThemeOptions:d,filterClassName:v,filterMulti:S,filterRemovable:A=!0}})=>{const P=Ee.useMemo(()=>{const F=new Set;return i||(r.forEach(K=>{F.add(K.values[n])}),[...F.values()])},[i,n,r]).filter(F=>F),L=r.length;return ae("div",{className:"",children:ae(Zfe,{domain:l||P,value:e||s||[],onChange:F=>{t(F||void 0),a(F||void 0)},placeHolder:`Search ${L} records...`,removable:A,multi:S,themeOptions:d,className:`${v}`})})};function zPe(e,t,r){return HS(e,r,{keys:[n=>n.values[t]]})}function LPe(e,t,r){return e.filter(n=>{const i=n.values[t];return i!==void 0&&Array.isArray(r)&&r.length?r.includes(i):i!==void 0&&r.length?i===r:!0})}const $Pe=(e,t)=>{let r=e-2,n=e+2;r<0&&(n+=-r,r=0),n>t&&(r-=n-t,n=t);const i=[];for(let l=Math.max(0,r);l<=Math.min(t,n);++l)i.push(l);return i},NPe=({values:e})=>ae("div",{className:"flex",children:e.map(({key:t,value:r},n)=>Ft("div",{className:"flex-1",children:[t?Ft("b",{children:[t,":"]}):null,ae("span",{className:"ml-1",children:r})]},t||`key-${n}`))}),FL=[],y7=({columns:e=FL,data:t=FL,sortBy:r,sortOrder:n="",initialPageSize:i=10,pageSize:l=null,onRowClick:a,onRowEnter:s,onRowLeave:d,ExpandRow:v=NPe,disableFilters:S=!1,disableSortBy:A=!1,themeOptions:P={},...L})=>{const F=Mo().table(P),K=Ee.useMemo(()=>({fuzzyText:zPe,dropdown:LPe}),[]),re=Ee.useMemo(()=>({dropdown:DPe,text:RPe}),[]),G=Ee.useMemo(()=>({Filter:!1}),[]),{getTableProps:H,getTableBodyProps:B,headerGroups:$,page:N,rows:z,preFilteredRows:X,prepareRow:te,canPreviousPage:pe,canNextPage:ke,gotoPage:Pe,previousPage:ge,nextPage:Ie,pageCount:Ne,visibleColumns:lt,toggleRowExpanded:it,setPageSize:Rt,state:{pageSize:St,pageIndex:Zt,expanded:Kt}}=Qv.useTable({columns:e,data:t,defaultColumn:G,filterTypes:K,disableFilters:S,disableSortBy:A,initialState:{pageSize:l||i,sortBy:[{id:r,desc:n.toLowerCase()==="desc"}]}},Qv.useFilters,Qv.useGlobalFilter,Qv.useSortBy,Qv.useExpanded,Qv.usePagination);return Ee.useEffect(()=>{l!==null&&l!==St&&Rt(l)},[l,St,Rt]),!(e.length&&t.length)||!X.length?null:Ft("div",{className:"w-full",children:[ae("div",{className:"overflow-auto scrollbar-sm",children:Ft("table",{...H(),className:"w-full",children:[ae("thead",{children:$.map(Ge=>ae("tr",{...Ge.getHeaderGroupProps(),children:Ge.headers.map(Ye=>ae("th",{...Ye.getHeaderProps({...Ye.getSortByToggleProps(),style:{minWidth:Ye.minWidth,width:Ye.width,maxWidth:Ye.maxWidth}}),className:F.tableHeader,children:Ft("div",{className:"flex flex-col",children:[Ft("div",{className:"flex justify-between",children:[ae("div",{className:"flex-1 pr-1",children:Ye.render("Header")}),Ye.canSort?Ye.isSorted?Ye.isSortedDesc?ae("i",{className:`ml-2 pt-1 ${F.sortIconDown}`}):ae("i",{className:`ml-2 pt-1 ${F.sortIconUp}`}):ae("i",{className:`ml-2 pt-1 ${F.sortIconIdeal}`}):null]}),ae("div",{children:Ye.canFilter?ae("div",{children:Ye.render(re[Ye.filter]||"Filter")}):null})]})}))}))}),ae("tbody",{...B(),children:N.map(Ge=>{const{onClick:Ye,expand:Dr=[]}=Ge.original;return te(Ge),Ft(Ee.Fragment,{children:[ae("tr",{...Ge.getRowProps(),onMouseEnter:typeof s=="function"?wr=>s(wr,Ge):null,onMouseLeave:typeof d=="function"?wr=>d(wr,Ge):null,className:`
                        ${L.striped?F.tableRowStriped:F.tableRow}
                        ${Ye||a?"cursor-pointer":""}
                      `,onClick:wr=>{typeof a=="function"&&a(wr,Ge),typeof Ye=="function"&&Ye(wr,Ge)},children:Ge.cells.map((wr,tr)=>ae("td",{...wr.getCellProps({style:{minWidth:wr.column.minWidth,maxWidth:wr.column.maxWidth,width:wr.column.width}}),className:`text-${Qt(e.find(br=>br.Header===wr.column.Header),"align")||"center"} ${F.tableCell}`,children:tr>0||Ge.subRows.length===0&&Dr.length===0?wr.render("Cell"):Ft("div",{className:"flex items-center",children:[ae("div",{className:"flex-1",children:wr.render("Cell")}),ae("div",{onClick:br=>{br.stopPropagation(),br.preventDefault(),Object.keys(Kt).filter(Bt=>Bt!==Ge.id).forEach(it),Ge.toggleRowExpanded(!Ge.isExpanded)},className:`
                                        flex item-center justify-center
                                        rounded cursor-pointer py-1 px-2
                                        hover:${F.accent3} ${F.transition}
                                      `,children:Ge.isExpanded?ae("i",{className:"fas fa-chevron-up"}):ae("i",{className:"fas fa-chevron-down"})})]})}))}),!Ge.isExpanded||!Dr.length?null:ae("tr",{className:F.tableRow,children:ae("td",{colSpan:lt.length,className:F.tableCell,children:ae(v,{values:Dr})})})]},Ge.getRowProps().key)})})]})}),ae("div",{className:"w-full p-2",children:Ne<=1?null:Ft("div",{className:`flex items-center ${F.textInfo}`,children:[Ft("div",{className:"flex-0",children:["Page ",Zt+1," of ",Ne,ae("br",{}),"Rows ",Zt*St+1,"-",Math.min(z.length,Zt*St+St)," of ",z.length]}),Ft("div",{className:"flex-1 flex justify-end items-center",children:[ae(bh,{disabled:Zt===0,themeOptions:{size:"sm"},onClick:Ge=>Pe(0),children:"<<"}),ae(bh,{disabled:!pe,themeOptions:{size:"sm"},onClick:Ge=>ge(),children:"<"}),$Pe(Zt,Ne-1).map(Ge=>{const Ye=Ge===Zt;return ae(bh,{themeOptions:{size:"sm",color:Ye?"primary":"white"},onClick:Ye?null:Dr=>Pe(Ge),children:Ge+1},Ge)}),ae(bh,{disabled:!ke,themeOptions:{size:"sm"},onClick:Ge=>Ie(0),children:">"}),ae(bh,{disabled:Zt===Ne-1,themeOptions:{size:"sm"},onClick:Ge=>Pe(Ne-1),children:">>"})]})]})})]})},BPe=({open:e,toggle:t,menuItems:r=[],rightMenu:n=null,themeOptions:i={}})=>{let l=Mo().topnav(i);return Ft("div",{className:`${e?"md:hidden":"hidden"} ${l.topnavMobileContainer}`,id:"mobile-menu",children:[ae("div",{className:"",children:r.map((a,s)=>ae(mO,{type:"top",to:a.path,icon:a.icon,themeOptions:i,subMenus:Qt(a,"subMenus",[]),children:a.name},s))}),ae("div",{className:"",children:n})]})},FPe=({open:e,toggle:t,menuItems:r=[],rightMenu:n=null,leftMenu:i=null,themeOptions:l={}})=>{let a=Mo().topnav(l);return ae("div",{className:`${a.topnavWrapper}`,children:Ft("div",{className:`${a.topnavContent} justify-between`,children:[ae("div",{children:i}),ae("div",{className:`${a.topnavMenu}`,children:r.map((s,d)=>ae(mO,{type:"top",to:s.path,icon:s.icon,themeOptions:l,subMenus:Qt(s,"subMenus",[]),children:s.name},d))}),Ft("div",{className:"flex items-center justify-center h-full",children:[ae("div",{className:`${a.topmenuRightNavContainer}`,children:n}),Ft("button",{type:"button",className:`${a.mobileButton} border-2`,onClick:()=>t(!e),children:[ae("span",{className:"sr-only",children:"Open main menu"}),ae("div",{className:"flex justify-center items-center text-2xl",children:ae("span",{className:e?a.menuCloseIcon:a.menuOpenIcon})})]})]})]})})},v7=({...e})=>{const[t,r]=Fe.useState(!1);return Ft("nav",{children:[ae(FPe,{open:t,toggle:r,...e}),ae(BPe,{open:t,...e})]})},UPe=({color:e})=>Ft("svg",{width:"100",height:"100",children:[ae("path",{fill:e,d:`M31.6,3.5C5.9,13.6-6.6,42.7,3.5,68.4c10.1,25.7,39.2,38.3,64.9,28.1l-3.1-7.9c-21.3,8.4-45.4-2-53.8-23.3
		c-8.4-21.3,2-45.4,23.3-53.8L31.6,3.5z`,children:ae("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"2s",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})}),ae("path",{fill:e,d:`M42.3,39.6c5.7-4.3,13.9-3.1,18.1,2.7c4.3,5.7,3.1,13.9-2.7,18.1l4.1,5.5c8.8-6.5,10.6-19,4.1-27.7
		c-6.5-8.8-19-10.6-27.7-4.1L42.3,39.6z`,children:ae("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"1s",from:"0 50 50",to:"-360 50 50",repeatCount:"indefinite"})}),ae("path",{fill:e,d:`M82,35.7C74.1,18,53.4,10.1,35.7,18S10.1,46.6,18,64.3l7.6-3.4c-6-13.5,0-29.3,13.5-35.3s29.3,0,35.3,13.5
		L82,35.7z`,children:ae("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"1.5s",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})})]}),jPe=({scale:e=1,color:t="#005bcc"})=>{const r=100*e;return ae("div",{style:{position:"relative",width:`${r}px`,height:`${r}px`,display:"flex",alignItems:"center",justifyContent:"center"},children:ae("div",{style:{display:"flex",transform:`scale(${e}, ${e})`,width:"100px",height:"100px"},children:ae(UPe,{color:t})})})},VPe=(e,t=100)=>{let r,n;return()=>{const i=+new Date;!!r&&i<r+t?(clearTimeout(n),n=setTimeout(()=>{r=i,e()},t)):(r=i,e())}};function qPe(e,t){return e.length===t.length&&e.every((r,n)=>r===t[n])}class w$e extends Ee.Component{static get propTypes(){return{items:Tr.arrayOf(Tr.string).isRequired,currentClassName:Tr.string.isRequired,scrolledPastClassName:Tr.string,style:Tr.object,componentTag:Tr.oneOfType([Tr.string,Tr.elementType]),offset:Tr.number,rootEl:Tr.string,onUpdate:Tr.func}}static get defaultProps(){return{items:[],currentClassName:"",style:{},componentTag:"ul",offset:1e3,onUpdate(){}}}constructor(t){super(t),this.state={targetItems:[],inViewState:[],isScrolledPast:[]},this._handleSpy=this._handleSpy.bind(this)}_initSpyTarget(t){return t.map(n=>document.getElementById(n))}_fillArray(t,r){let n=[];for(let i=0,l=t.length;i<l;i++)n[i]=r;return n}_isScrolled(){return this._getScrollDimension().scrollTop>0}_getScrollDimension(){const t=document,{rootEl:r}=this.props,n=r?t.querySelector(r).scrollTop:t.documentElement.scrollTop||t.body.parentNode.scrollTop||t.body.scrollTop,i=r?t.querySelector(r).scrollHeight:t.documentElement.scrollHeight||t.body.parentNode.scrollHeight||t.body.scrollHeight;return{scrollTop:n,scrollHeight:i}}_getElemsViewState(t){let r=[],n=[],i=[];const l=t||this.state.targetItems;let a=!1;for(let s=0,d=l.length;s<d;s++){let v=l[s],S=a?!1:this._isInView(v);S?(a=!0,r.push(v)):n.push(v);const A=s===d-1,P=this._isScrolled();this._isAtBottom()&&this._isInView(v)&&!S&&A&&P&&(n.pop(),n.push(...r),r=[v],i=this._fillArray(i,!1),S=!0),i.push(S)}return{inView:r,outView:n,viewStatusList:i,scrolledPast:this.props.scrolledPastClassName&&this._getScrolledPast(i)}}_isInView(t){if(!t)return!1;const{rootEl:r,offset:n}=this.props;let i;r&&(i=document.querySelector(r).getBoundingClientRect());const l=t.getBoundingClientRect(),a=r?i.height:window.innerHeight,{scrollTop:s}=this._getScrollDimension(),d=s+a,v=r?l.top+s-i.top+n:l.top+s+n,S=v+t.offsetHeight;return v<d&&S>s}_isAtBottom(){const{rootEl:t}=this.props,{scrollTop:r,scrollHeight:n}=this._getScrollDimension(),i=t?document.querySelector(t).getBoundingClientRect().height:window.innerHeight;return r+i>=n}_getScrolledPast(t){if(!t.some(i=>i))return t;let r=!1;return t.map(i=>i&&!r?(r=!0,!1):!r)}_spy(t){const r=this._getElemsViewState(t),n=this.state.inViewState;this.setState({inViewState:r.viewStatusList,isScrolledPast:r.scrolledPast},()=>{this._update(n)})}_update(t){qPe(this.state.inViewState,t)||this.props.onUpdate(this.state.targetItems[this.state.inViewState.indexOf(!0)])}_handleSpy(){VPe(this._spy(),100)}_initFromProps(){const t=this._initSpyTarget(this.props.items);this.setState({targetItems:t}),this._spy(t)}offEvent(){(this.props.rootEl?document.querySelector(this.props.rootEl):window).removeEventListener("scroll",this._handleSpy)}onEvent(){(this.props.rootEl?document.querySelector(this.props.rootEl):window).addEventListener("scroll",this._handleSpy)}componentDidMount(){this._initFromProps(),this.onEvent()}componentWillUnmount(){this.offEvent()}UNSAFE_componentWillReceiveProps(){this._initFromProps()}render(){const t=this.props.componentTag,{children:r,className:n,scrolledPastClassName:i,style:l}=this.props;let a=0;const s=Ee.Children.map(r,(v,S)=>{if(!v)return null;const A=v.type,P=i&&this.state.isScrolledPast[S],L=dk({[`${v.props.className}`]:v.props.className,[`${this.props.currentClassName}`]:this.state.inViewState[S],[`${this.props.scrolledPastClassName}`]:P});return Fe.createElement(A,{...v.props,className:L,key:a++},v.props.children)}),d=dk({[`${n}`]:n});return ae(t,{className:d,style:l,children:s})}}const GPe=({open:e=!1,className:t="",style:r={},...n})=>{const i=Mo();return ae("div",{...n,className:`
        flex items-center rounded cursor-pointer ${i.textInfo}
        ${e?i.borderInfo:"border-transparent"}
        hover:${i.borderInfo} ${i.transition}
        flex items-center justify-center ${t}
      `,style:{width:"2.5rem",height:"2.5rem",borderRadius:"1.25rem",fontSize:"1.15rem",borderWidth:"3px",...r},children:ae("span",{className:"fas fa-user"})})},HPe=Sc(({user:e})=>{const[t,r]=Ee.useState(!1),n=Ee.useCallback(v=>{r(S=>!S)},[]),i=Ee.useCallback(()=>r(!1),[]),[l]=CE(i),a=Mo(),{UserMenuItems:s,TopUserMenuControl:d}=QE();return e?e.authed?Ft("div",{className:"relative",ref:l,children:[ae(d,{open:t,onClick:n}),t?ae("div",{className:`
              ${a.menuBg} ${a.menuText}
              p-2 right-0 absolute
            `,style:{top:"100%",minWidth:"8rem"},children:ae(s,{toggle:n})}):null]}):ae(po,{to:"/auth/login",children:ae(d,{})}):null}),WPe=({open:e=!1,label:t="",className:r="",style:n=null,...i})=>{const l=Mo();return Ft("div",{...i,className:`
        w-full py-1 pl-4 transition cursor-pointer
        ${l.menuBgHover} ${l.menuTextHover} ${r}
      `,style:n,children:[ae("span",{className:"fas fa-user mr-2"}),t]})},ZPe=Sc(({user:e})=>{const[t,r]=Ee.useState(!1),n=Ee.useCallback(()=>{r(v=>!v)},[]),i=Ee.useCallback(()=>r(!1),[]),[l]=CE(i),a=Mo(),{SideUserMenuControl:s,UserMenuItems:d}=QE();return e?ae("div",{className:"pb-6",children:e.authed?Ft("div",{className:"relative",ref:l,children:[ae(s,{label:"User Menu",open:t,onClick:n}),t?ae("div",{className:`
                  ${a.menuBg} ${a.menuText} mt-1 p-2 left-0 absolute
                `,style:{bottom:"100%",minWidth:"8rem"},children:ae(d,{toggle:n})}):null]}):ae(po,{to:"/auth/login",children:ae(s,{label:"Login"})})}):null}),XPe=Sc(({user:e={},toggle:t})=>{const{UserMenuSeparator:r,UserMenuItem:n}=QE();return Ft(Pu,{children:[ae("div",{className:"mb-1 border-b-2",children:e.email}),ae(n,{to:"/auth/profile",toggle:t,children:"Profile"}),Qt(e,"authLevel",-1)<5?null:ae(n,{to:"/auth/project-management",toggle:t,children:"Project Management"}),ae(r,{}),ae(n,{to:"/auth/logout",toggle:t,children:"Logout"})]})}),KPe=({to:e="#",toggle:t,children:r})=>{const n=Mo();return ae("div",{onClick:t,children:ae(po,{to:e,children:ae("div",{className:`
          rounded cursor-pointer px-2 whitespace-nowrap
          ${n.menuBg} ${n.menuBgHover}
          ${n.menuText} ${n.menuTextHover}
        `,children:r})})})},YPe=()=>ae("div",{className:"border my-1"});function zx(e){return zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zx(e)}function JPe(e,t){if(zx(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zx(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QPe(e){var t=JPe(e,"string");return zx(t)==="symbol"?t:String(t)}function eTe(e,t,r){return t=QPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UL(Object(r),!0).forEach(function(n){eTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ju(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var VL=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),hT=function(){return Math.random().toString(36).substring(7).split("").join(".")},tS={INIT:"@@redux/INIT"+hT(),REPLACE:"@@redux/REPLACE"+hT(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+hT()}};function tTe(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function _7(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ju(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ju(1));return r(_7)(e,t)}if(typeof e!="function")throw new Error(Ju(2));var i=e,l=t,a=[],s=a,d=!1;function v(){s===a&&(s=a.slice())}function S(){if(d)throw new Error(Ju(3));return l}function A(K){if(typeof K!="function")throw new Error(Ju(4));if(d)throw new Error(Ju(5));var re=!0;return v(),s.push(K),function(){if(re){if(d)throw new Error(Ju(6));re=!1,v();var H=s.indexOf(K);s.splice(H,1),a=null}}}function P(K){if(!tTe(K))throw new Error(Ju(7));if(typeof K.type>"u")throw new Error(Ju(8));if(d)throw new Error(Ju(9));try{d=!0,l=i(l,K)}finally{d=!1}for(var re=a=s,G=0;G<re.length;G++){var H=re[G];H()}return K}function L(K){if(typeof K!="function")throw new Error(Ju(10));i=K,P({type:tS.REPLACE})}function F(){var K,re=A;return K={subscribe:function(H){if(typeof H!="object"||H===null)throw new Error(Ju(11));function B(){H.next&&H.next(S())}B();var $=re(B);return{unsubscribe:$}}},K[VL]=function(){return this},K}return P({type:tS.INIT}),n={dispatch:P,subscribe:A,getState:S,replaceReducer:L},n[VL]=F,n}function rTe(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:tS.INIT});if(typeof n>"u")throw new Error(Ju(12));if(typeof r(void 0,{type:tS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ju(13))})}function nTe(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var i=t[n];typeof e[i]=="function"&&(r[i]=e[i])}var l=Object.keys(r),a;try{rTe(r)}catch(s){a=s}return function(d,v){if(d===void 0&&(d={}),a)throw a;for(var S=!1,A={},P=0;P<l.length;P++){var L=l[P],F=r[L],K=d[L],re=F(K,v);if(typeof re>"u")throw v&&v.type,new Error(Ju(14));A[L]=re,S=S||re!==K}return S=S||l.length!==Object.keys(d).length,S?A:d}}function rS(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,i){return function(){return n(i.apply(void 0,arguments))}})}function iTe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var i=n.apply(void 0,arguments),l=function(){throw new Error(Ju(15))},a={getState:i.getState,dispatch:function(){return l.apply(void 0,arguments)}},s=t.map(function(d){return d(a)});return l=rS.apply(void 0,s)(i.dispatch),jL(jL({},i),{},{dispatch:l})}}}Ee.createContext({});Ee.forwardRef(({open:e,transitioning:t,width:r,padding:n,children:i,heightFull:l=!0},a)=>{const s=Mo(),d=l?"h-full":"";return ae("div",{className:`${d} w-full`,ref:a,style:{overflow:e&&!t?"visible":"hidden"},children:Ft("div",{className:`${d} scrollbar-sm overflow-y-auto`,style:{width:`${r-n*2}px`},children:[ae("div",{className:`
          absolute top-0 right-0 bottom-0 left-0 pointer-events-none z-10
          ${e?"opacity-0":"opacity-100"} ${s.sidebarBg}
        `,style:{transition:"opacity 500ms"}}),i]})})});function aTe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function nS(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function g0(e){return e=nS(Math.abs(e)),e?e[1]:NaN}function oTe(e,t){return function(r,n){for(var i=r.length,l=[],a=0,s=e[0],d=0;i>0&&s>0&&(d+s+1>n&&(s=Math.max(1,n-d)),l.push(r.substring(i-=s,i+s)),!((d+=s+1)>n));)s=e[a=(a+1)%e.length];return l.reverse().join(t)}}function sTe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var lTe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function iS(e){if(!(t=lTe.exec(e)))throw new Error("invalid format: "+e);var t;return new hR({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}iS.prototype=hR.prototype;function hR(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}hR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function uTe(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var b7;function cTe(e,t){var r=nS(e,t);if(!r)return e+"";var n=r[0],i=r[1],l=i-(b7=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=n.length;return l===a?n:l>a?n+new Array(l-a+1).join("0"):l>0?n.slice(0,l)+"."+n.slice(l):"0."+new Array(1-l).join("0")+nS(e,Math.max(0,t+l-1))[0]}function qL(e,t){var r=nS(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const GL={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:aTe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>qL(e*100,t),r:qL,s:cTe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function HL(e){return e}var WL=Array.prototype.map,ZL=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function fTe(e){var t=e.grouping===void 0||e.thousands===void 0?HL:oTe(WL.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?HL:sTe(WL.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function v(A){A=iS(A);var P=A.fill,L=A.align,F=A.sign,K=A.symbol,re=A.zero,G=A.width,H=A.comma,B=A.precision,$=A.trim,N=A.type;N==="n"?(H=!0,N="g"):GL[N]||(B===void 0&&(B=12),$=!0,N="g"),(re||P==="0"&&L==="=")&&(re=!0,P="0",L="=");var z=K==="$"?r:K==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",X=K==="$"?n:/[%p]/.test(N)?a:"",te=GL[N],pe=/[defgprs%]/.test(N);B=B===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,B)):Math.max(0,Math.min(20,B));function ke(Pe){var ge=z,Ie=X,Ne,lt,it;if(N==="c")Ie=te(Pe)+Ie,Pe="";else{Pe=+Pe;var Rt=Pe<0||1/Pe<0;if(Pe=isNaN(Pe)?d:te(Math.abs(Pe),B),$&&(Pe=uTe(Pe)),Rt&&+Pe==0&&F!=="+"&&(Rt=!1),ge=(Rt?F==="("?F:s:F==="-"||F==="("?"":F)+ge,Ie=(N==="s"?ZL[8+b7/3]:"")+Ie+(Rt&&F==="("?")":""),pe){for(Ne=-1,lt=Pe.length;++Ne<lt;)if(it=Pe.charCodeAt(Ne),48>it||it>57){Ie=(it===46?i+Pe.slice(Ne+1):Pe.slice(Ne))+Ie,Pe=Pe.slice(0,Ne);break}}}H&&!re&&(Pe=t(Pe,1/0));var St=ge.length+Pe.length+Ie.length,Zt=St<G?new Array(G-St+1).join(P):"";switch(H&&re&&(Pe=t(Zt+Pe,Zt.length?G-Ie.length:1/0),Zt=""),L){case"<":Pe=ge+Pe+Ie+Zt;break;case"=":Pe=ge+Zt+Pe+Ie;break;case"^":Pe=Zt.slice(0,St=Zt.length>>1)+ge+Pe+Ie+Zt.slice(St);break;default:Pe=Zt+ge+Pe+Ie;break}return l(Pe)}return ke.toString=function(){return A+""},ke}function S(A,P){var L=v((A=iS(A),A.type="f",A)),F=Math.max(-8,Math.min(8,Math.floor(g0(P)/3)))*3,K=Math.pow(10,-F),re=ZL[8+F/3];return function(G){return L(K*G)+re}}return{format:v,formatPrefix:S}}var xw,e0,x7;hTe({thousands:",",grouping:[3],currency:["$",""]});function hTe(e){return xw=fTe(e),e0=xw.format,x7=xw.formatPrefix,xw}function pTe(e){return Math.max(0,-g0(Math.abs(e)))}function dTe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(g0(t)/3)))*3-g0(Math.abs(e)))}function mTe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,g0(t)-g0(e))+1}function ax(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gTe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function w7(e){let t,r,n;e.length!==2?(t=ax,r=(s,d)=>ax(e(s),d),n=(s,d)=>e(s)-d):(t=e===ax||e===gTe?e:yTe,r=e,n=e);function i(s,d,v=0,S=s.length){if(v<S){if(t(d,d)!==0)return S;do{const A=v+S>>>1;r(s[A],d)<0?v=A+1:S=A}while(v<S)}return v}function l(s,d,v=0,S=s.length){if(v<S){if(t(d,d)!==0)return S;do{const A=v+S>>>1;r(s[A],d)<=0?v=A+1:S=A}while(v<S)}return v}function a(s,d,v=0,S=s.length){const A=i(s,d,v,S-1);return A>v&&n(s[A-1],d)>-n(s[A],d)?A-1:A}return{left:i,center:a,right:l}}function yTe(){return 0}function S7(e){return e===null?NaN:+e}const vTe=w7(ax),_Te=vTe.right;w7(S7).center;const YE=_Te;function bTe(e,t){let r,n;if(t===void 0)for(const i of e)i!=null&&(r===void 0?i>=i&&(r=n=i):(r>i&&(r=i),n<i&&(n=i)));else{let i=-1;for(let l of e)(l=t(l,++i,e))!=null&&(r===void 0?l>=l&&(r=n=l):(r>l&&(r=l),n<l&&(n=l)))}return[r,n]}class XL extends Map{constructor(t,r=STe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(KL(this,t))}has(t){return super.has(KL(this,t))}set(t,r){return super.set(xTe(this,t),r)}delete(t){return super.delete(wTe(this,t))}}function KL({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function xTe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function wTe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function STe(e){return e!==null&&typeof e=="object"?e.valueOf():e}const ETe=Math.sqrt(50),CTe=Math.sqrt(10),PTe=Math.sqrt(2);function aS(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),l=n/Math.pow(10,i),a=l>=ETe?10:l>=CTe?5:l>=PTe?2:1;let s,d,v;return i<0?(v=Math.pow(10,-i)/a,s=Math.round(e*v),d=Math.round(t*v),s/v<e&&++s,d/v>t&&--d,v=-v):(v=Math.pow(10,i)*a,s=Math.round(e/v),d=Math.round(t/v),s*v<e&&++s,d*v>t&&--d),d<s&&.5<=r&&r<2?aS(e,t,r*2):[s,d,v]}function TTe(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,l,a]=n?aS(t,e,r):aS(e,t,r);if(!(l>=i))return[];const s=l-i+1,d=new Array(s);if(n)if(a<0)for(let v=0;v<s;++v)d[v]=(l-v)/-a;else for(let v=0;v<s;++v)d[v]=(l-v)*a;else if(a<0)for(let v=0;v<s;++v)d[v]=(i+v)/-a;else for(let v=0;v<s;++v)d[v]=(i+v)*a;return d}function Fk(e,t,r){return t=+t,e=+e,r=+r,aS(e,t,r)[2]}function ATe(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?Fk(t,e,r):Fk(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function kTe(e,t,r=S7){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,l=Math.floor(i),a=+r(e[l],l,e),s=+r(e[l+1],l+1,e);return a+(s-a)*(i-l)}}function ITe(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,l=new Array(i);++n<i;)l[n]=e+n*r;return l}function F0(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const YL=Symbol("implicit");function pR(){var e=new XL,t=[],r=[],n=YL;function i(l){let a=e.get(l);if(a===void 0){if(n!==YL)return n;e.set(l,a=t.push(l)-1)}return r[a%r.length]}return i.domain=function(l){if(!arguments.length)return t.slice();t=[],e=new XL;for(const a of l)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(l){return arguments.length?(r=Array.from(l),i):r.slice()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.copy=function(){return pR(t,r).unknown(n)},F0.apply(i,arguments),i}function E7(){var e=pR().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,l,a,s=!1,d=0,v=0,S=.5;delete e.unknown;function A(){var P=t().length,L=i<n,F=L?i:n,K=L?n:i;l=(K-F)/Math.max(1,P-d+v*2),s&&(l=Math.floor(l)),F+=(K-F-l*(P-d))*S,a=l*(1-d),s&&(F=Math.round(F),a=Math.round(a));var re=ITe(P).map(function(G){return F+l*G});return r(L?re.reverse():re)}return e.domain=function(P){return arguments.length?(t(P),A()):t()},e.range=function(P){return arguments.length?([n,i]=P,n=+n,i=+i,A()):[n,i]},e.rangeRound=function(P){return[n,i]=P,n=+n,i=+i,s=!0,A()},e.bandwidth=function(){return a},e.step=function(){return l},e.round=function(P){return arguments.length?(s=!!P,A()):s},e.padding=function(P){return arguments.length?(d=Math.min(1,v=+P),A()):d},e.paddingInner=function(P){return arguments.length?(d=Math.min(1,P),A()):d},e.paddingOuter=function(P){return arguments.length?(v=+P,A()):v},e.align=function(P){return arguments.length?(S=Math.max(0,Math.min(1,P)),A()):S},e.copy=function(){return E7(t(),[n,i]).round(s).paddingInner(d).paddingOuter(v).align(S)},F0.apply(A(),arguments)}function C7(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return C7(t())},e}function MTe(){return C7(E7.apply(null,arguments).paddingInner(1))}function OTe(e){return function(){return e}}function RTe(e){return+e}var JL=[0,1];function U_(e){return e}function Uk(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:OTe(isNaN(t)?NaN:.5)}function DTe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function zTe(e,t,r){var n=e[0],i=e[1],l=t[0],a=t[1];return i<n?(n=Uk(i,n),l=r(a,l)):(n=Uk(n,i),l=r(l,a)),function(s){return l(n(s))}}function LTe(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),l=new Array(n),a=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<n;)i[a]=Uk(e[a],e[a+1]),l[a]=r(t[a],t[a+1]);return function(s){var d=YE(e,s,1,n)-1;return l[d](i[d](s))}}function $Te(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function NTe(){var e=JL,t=JL,r=Y_,n,i,l,a=U_,s,d,v;function S(){var P=Math.min(e.length,t.length);return a!==U_&&(a=DTe(e[0],e[P-1])),s=P>2?LTe:zTe,d=v=null,A}function A(P){return P==null||isNaN(P=+P)?l:(d||(d=s(e.map(n),t,r)))(n(a(P)))}return A.invert=function(P){return a(i((v||(v=s(t,e.map(n),hp)))(P)))},A.domain=function(P){return arguments.length?(e=Array.from(P,RTe),S()):e.slice()},A.range=function(P){return arguments.length?(t=Array.from(P),S()):t.slice()},A.rangeRound=function(P){return t=Array.from(P),r=Mte,S()},A.clamp=function(P){return arguments.length?(a=P?!0:U_,S()):a!==U_},A.interpolate=function(P){return arguments.length?(r=P,S()):r},A.unknown=function(P){return arguments.length?(l=P,A):l},function(P,L){return n=P,i=L,S()}}function BTe(){return NTe()(U_,U_)}function FTe(e,t,r,n){var i=ATe(e,t,r),l;switch(n=iS(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(l=dTe(i,a))&&(n.precision=l),x7(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(l=mTe(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=l-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(l=pTe(i))&&(n.precision=l-(n.type==="%")*2);break}}return e0(n)}function P7(e){var t=e.domain;return e.ticks=function(r){var n=t();return TTe(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return FTe(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,l=n.length-1,a=n[i],s=n[l],d,v,S=10;for(s<a&&(v=a,a=s,s=v,v=i,i=l,l=v);S-- >0;){if(v=Fk(a,s,r),v===d)return n[i]=a,n[l]=s,t(n);if(v>0)a=Math.floor(a/v)*v,s=Math.ceil(s/v)*v;else if(v<0)a=Math.ceil(a*v)/v,s=Math.floor(s*v)/v;else break;d=v}return e},e}function oS(){var e=BTe();return e.copy=function(){return $Te(e,oS())},F0.apply(e,arguments),P7(e)}function T7(){var e=[],t=[],r=[],n;function i(){var a=0,s=Math.max(1,t.length);for(r=new Array(s-1);++a<s;)r[a-1]=kTe(e,a/s);return l}function l(a){return a==null||isNaN(a=+a)?n:t[YE(r,a)]}return l.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?r[s-1]:e[0],s<r.length?r[s]:e[e.length-1]]},l.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(ax),i()},l.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},l.unknown=function(a){return arguments.length?(n=a,l):n},l.quantiles=function(){return r.slice()},l.copy=function(){return T7().domain(e).range(t).unknown(n)},F0.apply(l,arguments)}function A7(){var e=0,t=1,r=1,n=[.5],i=[0,1],l;function a(d){return d!=null&&d<=d?i[YE(n,d,0,r)]:l}function s(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return a}return a.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,s()):[e,t]},a.range=function(d){return arguments.length?(r=(i=Array.from(d)).length-1,s()):i.slice()},a.invertExtent=function(d){var v=i.indexOf(d);return v<0?[NaN,NaN]:v<1?[e,n[0]]:v>=r?[n[r-1],t]:[n[v-1],n[v]]},a.unknown=function(d){return arguments.length&&(l=d),a},a.thresholds=function(){return n.slice()},a.copy=function(){return A7().domain([e,t]).range(i).unknown(l)},F0.apply(P7(a),arguments)}function JE(){var e=[.5],t=[0,1],r,n=1;function i(l){return l!=null&&l<=l?t[YE(e,l,0,n)]:r}return i.domain=function(l){return arguments.length?(e=Array.from(l),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(l){return arguments.length?(t=Array.from(l),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(l){var a=t.indexOf(l);return[e[a-1],e[a]]},i.unknown=function(l){return arguments.length?(r=l,i):r},i.copy=function(){return JE().domain(e).range(t).unknown(r)},F0.apply(i,arguments)}Object.keys(Xw).sort((e,t)=>+e-+t);const UTe=({type:e,domain:t,range:r,format:n,...i})=>{const l=Ee.useMemo(()=>jTe(e,t,r),[e,t,r]),a=Ee.useMemo(()=>qTe(n),[n]);return ae("div",{children:e==="linear"?ae(GTe,{scale:l,format:a,...i}):e==="ordinal"?ae(HTe,{scale:l,format:a,...i}):e==="quantize"||e==="quantile"||e==="threshold"?ae(WTe,{scale:l,format:a,...i}):Ft("div",{children:['Unknown scale type "',e,'."']})})},jTe=(e,t,r)=>{switch(e){case"linear":return oS().domain(t).range(r);case"ordinal":return pR().domain(t).range(r);case"quantize":return A7().domain(bTe(t)).range(r);case"quantile":return T7().domain(t).range(r);case"threshold":return JE().domain(t).range(r);default:return null}},VTe=e=>e,qTe=e=>e?typeof e=="string"?e0(e):e:VTe,GTe=({scale:e,format:t,size:r,ticks:n=5})=>{const i=e.ticks(n);return Ft("div",{children:[ae(Sj,{size:r,colors:i.map(l=>e(l))}),ae("div",{className:"text-sm flex",children:i.map(l=>ae("div",{className:"col-span-1 text-right pr-1 flex-1",children:t(l)},l))})]})},HTe=({scale:e,format:t,height:r=3,direction:n="vertical"})=>{const i=e.range();return ae("div",{children:n==="horizontal"?Ft(Pu,{children:[ae("div",{className:"flex",children:i.map(l=>ae("div",{className:"flex-1  h-3 mx-2 rounded",style:{backgroundColor:l}},l))}),ae("div",{className:"flex",children:e.domain().map(l=>ae("div",{className:"flex-1 text-center",children:t(l)},l))})]}):ae("div",{className:"flex",children:e.domain().reduce((l,a,s)=>(s%r===0&&l.push([]),l[l.length-1].push(a),l),[]).map((l,a)=>ae("div",{className:`${a>0?"ml-6":""} flex-1`,children:l.map(s=>Ft("div",{className:"flex items-center",children:[ae("div",{className:"h-6 w-6 rounded mr-1 mb-1",style:{backgroundColor:e(s)}}),ae("div",{children:t(s)})]},s))},a))})})},WTe=({scale:e,format:t,size:r})=>{const n=e.range();return Ft("div",{children:[ae(Sj,{size:r,colors:n}),ae("div",{className:"text-sm flex",children:n.map(i=>ae("div",{className:"flex-1 text-right pr-1",children:t(e.invertExtent(i)[1])},i))})]})},ZTe={TopUserMenu:HPe,TopUserMenuControl:GPe,SideUserMenu:ZPe,SideUserMenuControl:WPe,UserMenuItem:KPe,UserMenuSeparator:YPe,UserMenuItems:XPe},XTe=Ee.createContext(ZTe),QE=()=>Ee.useContext(XTe);Ee.memo(({color:e,position:t="fixed",className:r="",scale:n=1})=>ae("div",{className:`
    ${t} left-0 top-0 right-0 bottom-0
    flex justify-center items-center z-50 bg-black opacity-50
    ${r}
  `,children:ae(jPe,{scale:n,color:e})}));var KTe="function",Ag=function(t){return!!t&&typeof t===KTe},YTe="object",Cc=function(t){return t!==null&&typeof t===YTe},JTe=Cc,QTe=Object.prototype.hasOwnProperty,_1=function(e,t){return JTe(e)&&QTe.call(e,t)},pT=Ag,QL=_1;function dR(e){var t=e||{};this.syncRefCount=0,this.expired=t.expired||[],this.unsafeMode=t.unsafeMode||!1,this.cache={},pT(t.comparator)&&(this.comparator=t.comparator),pT(t.errorSelector)&&(this.errorSelector=t.errorSelector),pT(t.onChange)&&(this.onChange=t.onChange)}dR.prototype.errorSelector=function(t,r){return r};dR.prototype.comparator=function(t,r){return QL(t,"value")&&QL(r,"value")?t.value===r.value&&t.$type===r.$type&&t.$expires===r.$expires:t===r};var k7=dR;const eAe=Xs(k7);function eC(e){this._model=e._materialize().treatErrorsAsValues()}eC.prototype.get=function(t){return this._model.get.apply(this._model,t)._toJSONG()};eC.prototype.set=function(t){return this._model.set(t)._toJSONG()};eC.prototype.call=function(t,r,n,i){var l=[t,r,n];return Array.prototype.push.apply(l,i),this._model.call.apply(this._model,l)._toJSONG()};var tAe=eC,I7={GetRequest:"GET"},tC="$",rAe=tC,rC=rAe+"_",U0=rC+"ref",nAe=U0,b1=function(t,r){var n=r.$_refsLength||0;r[nAe+n]=t,r.$_refsLength=n+1,t.$_refIndex=n,t.$_context=r},Uf="ref",mR=Date.now,gR=0,yR=1,iAe=mR,aAe=gR,oAe=yR,sAe=function(t){var r=t.$expires;return r!=null&&r!==oAe&&r!==aAe&&r<iAe()},lAe="object",iv=function(t){return t==null||typeof t!==lAe},M7=function(t,r){var n=r.$_prev,i=r.$_next;i&&(i.$_prev=n),n&&(n.$_next=i),r.$_prev=r.$_next=void 0,r===t.$_head&&(t.$_head=i),r===t.$_tail&&(t.$_tail=n)},uAe=M7,kg=function(t,r,n){return t.$_invalidated||(t.$_invalidated=!0,r.push(t),uAe(n,t)),t},cAe=Array.isArray,x1=function(t,r){if(r.isArray===void 0&&fAe(t,r),r.isArray){var n;do{r.loaded&&r.rangeOffset>r.to&&(++r.arrayOffset,r.loaded=!1);var i=r.arrayOffset,l=t.length;if(i>=l){r.done=!0;break}var a=t[r.arrayOffset];if(a!==null&&typeof a=="object"){if(r.loaded||e$(a,r),r.empty)continue;n=r.rangeOffset++}else++r.arrayOffset,n=a}while(n===void 0);return n}else if(r.isObject){if(r.loaded||e$(t,r),r.rangeOffset>r.to){r.done=!0;return}return r.rangeOffset++}else{if(!r.loaded)return r.loaded=!0,t;r.done=!0;return}};function e$(e,t){var r=t.from=e.from||0,n=t.to=e.to||typeof e.length=="number"&&t.from+e.length-1||0;t.rangeOffset=t.from,t.loaded=!0,r>n&&(t.empty=!0)}function fAe(e,t){t.done=!1;var r=t.isObject=!!(e&&typeof e=="object");t.isArray=r&&cAe(e),t.arrayOffset=0}var t$=x1,O7=function(t){return t.reduce(hAe,{})};function hAe(e,t){return R7(e,t,0),e}function R7(e,t,r){var n=t[r],i={},l,a=r+1;for(l=t$(n,i);!i.done;){var s=Object.prototype.hasOwnProperty.call(e,l)&&e[l];s||(a===t.length?e[l]=null:l!==void 0&&(s=e[l]={})),a<t.length&&R7(s,t,a),l=t$(n,i)}}var r$=x1,vR=function e(t,r,n){for(var i=t,l=!0;l&&n<r.length;++n){var a=r[n],s=typeof a;if(a&&s==="object"){var d={},v=r$(a,d),S=n+1;do{var A=i[v];l=A!==void 0,l&&(l=e(A,r,S)),v=r$(a,d)}while(l&&!d.done);break}i=i[a],l=i!==void 0}return l},pAe=vR,dAe=function(t,r){for(var n=[],i=-1,l=0,a=t.length;l<a;++l)pAe(r,t[l],0)||(n[++i]=t[l]);return n},mAe=vR,gAe=function(t,r){for(var n=[],i=-1,l=0,a=t.length;l<a;++l){var s=t[l];mAe(r[s.length],s,0)||(n[++i]=s)}return n},t0={};function yAe(e){if(Object.prototype.toString.call(e)==="[object Object]"){var t=JSON.stringify(e,D7);if(t[0]==="{")return t}throw new TypeError("Only plain objects can be converted to JSON keys")}function D7(e,t){return typeof t!="object"||t===null||Array.isArray(t)?t:Object.keys(t).sort().reduce(function(r,n){return r[n]=t[n],r},{})}function z7(e){if(!(typeof e!="string"||e[0]!=="{")){var t;try{t=JSON.parse(e)}catch{return}if(JSON.stringify(t,D7)===e)return t}}function vAe(e){return typeof z7(e)<"u"}t0.toJsonKey=yAe;t0.isJsonKey=vAe;t0.maybeJsonKey=z7;var _R={exports:{}},y0={},_Ae=9007199254740991,bAe=Math.abs,sS=Number.isSafeInteger||function(t){return typeof t=="number"&&t%1===0&&bAe(t)<=_Ae};function xAe(e){if(typeof e=="string"){var t=Number(e);if(sS(t)&&String(t)===e)return t}else if(sS(e))return e}function wAe(e){if(typeof e=="string"){var t=Number(e);return sS(t)&&String(t)===e}return sS(e)}y0.isIntegerKey=wAe;y0.maybeIntegerKey=xAe;var L7=y0.maybeIntegerKey,$7=y0.isIntegerKey,SAe=Array.isArray,EAe="object",N7="number";_R.exports=function(t){var r,n=[];for(var i in t){var l=L7(i);if(typeof l===N7&&CAe(r=t[i]))for(var a=B7(r,0,l).sets,s=-1,d=a.length;++s<d;)n.push(PAe(a[s]))}return n};function CAe(e){return e!==null&&typeof e===EAe}function B7(e,t,r){var n,i=dT(String(t)),l=Object.create(null),a=[],s=-1,d=0,v=[],S=0,A,P,L,F,K,re,G,H,B,$,N,z,X;if(L=[],F=-1,t<r-1){for(K=n$(e,L);++F<K;){n=L[F],A=B7(e[n],t+1,r),P=A.code,l[P]?A=l[P]:(a[d++]=P,A=l[P]={keys:[],sets:A.sets}),i=dT(i+n+P);var te=L7(n);A.keys.push(typeof te===N7?te:n)}for(;++s<d;)if(n=a[s],A=l[n],L=A.keys,K=L.length,K>0)for(re=A.sets,G=-1,H=re.length,z=L[0];++G<H;){for(B=re[G],$=-1,N=B.length,X=new Array(N+1),X[0]=K>1&&L||z;++$<N;)X[$+1]=B[$];v[S++]=X}}else for(K=n$(e,L),K>1?v[S++]=[L]:v[S++]=L;++F<K;)i=dT(i+L[F]);return{code:i,sets:v}}function PAe(e){for(var t=-1,r=e.length;++t<r;){var n=e[t];SAe(n)&&(e[t]=TAe(n))}return e}function TAe(e){for(var t=-1,r=e.length-1,n=r>0;++t<=r;){var i=e[t];if(!$7(i)){n=!1;break}e[t]=parseInt(i,10)}if(n===!0){e.sort(AAe);var l=e[0],a=e[r];if(a-l<=r)return{from:l,to:a}}return e}function AAe(e,t){return e-t}function n$(e,t,r){var n=0;for(var i in e)t[n++]=i;return n}function dT(e){for(var t=5381,r=-1,n=e.length;++r<n;)t=(t<<5)+t+e.charCodeAt(r);return String(t)}_R.exports._isSafeNumber=$7;var F7=_R.exports,kAe=F7,IAe=O7,MAe=function(t){var r=t.reduce(function(n,i){var l=i.length;return n[l]||(n[l]=[]),n[l].push(i),n},{});return Object.keys(r).forEach(function(n){r[n]=IAe(r[n])}),kAe(r)},OAe={innerReferences:"References with inner references are not allowed.",circularReference:"There appears to be a circular reference, maximum reference following exceeded."},i$=OAe;function RAe(e,t,r){typeof r>"u"&&(r=5);for(var n=e,i=n,l=t,a=-1,s=0;++a<l.length;){var d=l[a];if(i=n[d],i===null||typeof i!="object"||i.$type&&i.$type!=="ref")break;if(i.$type==="ref"){if(a+1<l.length)return{error:new Error(i$.innerReferences)};if(s>=r)return{error:new Error(i$.circularReference)};l=i.value,a=-1,n=e,s++}else n=i}return{node:i,refPath:l}}var U7=RAe;function DAe(e,t){for(var r=[],n=e.length,i=t||0;i<n;i++)r[i]=e[i];return r}var zAe=DAe,LAe=function(t,r,n){var i=[],l,a,s;for(l=0,s=t.length;l<s;++l)i[l]=t[l];for(a=n||0,s=r.length;a<s;++a,++l)i[l]=r[a];return i},a$=x1,$Ae=zAe,NAe=LAe,BAe=U7,FAe=function(t,r,n){typeof n>"u"&&(n=5);for(var i=[],l=0,a=r.length;l<a;++l){var s=j7(t,t,r[l],0,i,[],n);if(s)return{error:s}}return{paths:i}};function j7(e,t,r,n,i,l,a){if(e===void 0){i[i.length]=NAe(l,r,n);return}if(!(e===null||e.$type&&e.$type!=="ref"||typeof e!="object")&&!(e.$type==="ref"&&n===r.length)){var s=r[n],d=typeof s=="object"&&s!==null,v=n+1,S=!1,A=s;d&&(S={},A=a$(s,S));var P,L;do{P=e[A];var F=l.length;if(l[F]=A,P&&P.$type==="ref"&&v<r.length){var K=BAe(t,P.value,a);if(K.error)return K.error;P=K.node,L=$Ae(K.refPath)}else L=l;var re=j7(P,t,r,v,i,L,a);if(re)return re;l.length=F,S&&!S.done&&(A=a$(s,S))}while(S&&!S.done)}}function o$(e){if(e==null)return 1;if(Array.isArray(e))throw new Error("Unexpected Array found in keySet: "+JSON.stringify(e));return typeof e=="object"?UAe(e):1}function UAe(e){var t=e.to,r=e.length;if(t!=null){if(isNaN(t)||parseInt(t,10)!==t)throw new Error("Invalid range, 'to' is not an integer: "+JSON.stringify(e));var n=e.from||0;if(isNaN(n)||parseInt(n,10)!==n)throw new Error("Invalid range, 'from' is not an integer: "+JSON.stringify(e));return n<=t?t-n+1:0}else if(r!=null){if(isNaN(r)||parseInt(r,10)!==r)throw new Error("Invalid range, 'length' is not an integer: "+JSON.stringify(e));return r}else throw new Error("Invalid range, expected 'to' or 'length': "+JSON.stringify(e))}function jAe(e){if(e.length===0)throw new Error("All paths must have length larger than zero.");for(var t=1,r=0;r<e.length;r++){var n=e[r];if(Array.isArray(n)){for(var i=0,l=0;l<n.length;l++){var a=n[l];i+=o$(a)}t*=i}else t*=o$(n)}return t}var VAe=jAe,qAe=function(t){return"_"+t},GAe=function(t){if(t.slice(0,1)==="_")return t.slice(1);throw SyntaxError('Expected "_".')},s$=x1,HAe=function(t,r){return t.reduceRight(function(i,l){var a={};if(typeof l!="object"||l===null)return a[l]=i,a;for(var s={},d=s$(l,s);!s.done;)a[d]=i,d=s$(l,s);return a},r)},av={iterateKeySet:x1,toTree:O7,pathsComplementFromTree:dAe,pathsComplementFromLengthTree:gAe,toJsonKey:t0.toJsonKey,isJsonKey:t0.isJsonKey,maybeJsonKey:t0.maybeJsonKey,hasIntersection:vR,toPaths:F7,isIntegerKey:y0.isIntegerKey,maybeIntegerKey:y0.maybeIntegerKey,collapse:MAe,followReference:U7,optimizePathSets:FAe,pathCount:VAe,escape:qAe,unescape:GAe,materialize:HAe},bR={exports:{}},V7=1;bR.exports=function(){return V7++};bR.exports.getCurrentVersion=function(){return V7};var j0=bR.exports,V0="error",WAe=Cc,Ig=function(t){return WAe(t)&&t.$size||0},ZAe=Cc,q7=function(t){return ZAe(t)&&t.$timestamp||void 0},XAe=mR,KAe=gR,YAe=yR,ov=function(t){var r=t.$expires;return r!=null&&r!==YAe&&(r===KAe||r<XAe())},JAe=rC,QAe=_1,eke=Array.isArray,tke=Cc,rke=function(t){var r=t;if(tke(r)){r=eke(t)?[]:{};var n=t;for(var i in n)i.lastIndexOf(JAe,0)===0||!QAe(n,i)||(r[i]=n[i])}return r},nke=Cc,ike=function(t){return nke(t)&&t.$expires||void 0},xR="atom",ake=mR,oke=gR,Ib=50,ske=rke,lke=Array.isArray,uke=Ig,cke=ike,fke=xR,G7=function(t,r,n){var i=0,l=t,a=r;if(a){var s=l.$_modelCreated;l=ske(l),i=uke(l),l.$type=a,l.$_prev=void 0,l.$_next=void 0,l.$_modelCreated=s||!1}else l={$type:fke,value:n,$_prev:void 0,$_next:void 0,$_modelCreated:!0};if(n==null)i=Ib+1;else if(i==null||i<=0)switch(typeof n){case"object":lke(n)?i=Ib+n.length:i=Ib+1;break;case"string":i=Ib+n.length;break;default:i=Ib+1;break}var d=cke(l);return typeof d=="number"&&d<oke&&(l.$expires=ake()+d*-1),l.$size=i,l},H7=function(t,r,n,i,l){return t.$_key=n,t.$_parent=r,i!==void 0&&(t.$_version=i),t.$_absolutePath||(Array.isArray(n)?(t.$_absolutePath=l.slice(0,l.index),Array.prototype.push.apply(t.$_absolutePath,n)):(t.$_absolutePath=l.slice(0,l.index),t.$_absolutePath.push(n))),r[n]=t,t},mT=U0,hke=function(t,r){for(var n=t.$_refsLength||0,i=r.$_refsLength||0,l=-1;++l<n;){var a=t[mT+l];a!==void 0&&(a.$_context=r,r[mT+(i+l)]=a,t[mT+l]=void 0)}return r.$_refsLength=n+i,t.$_refsLength=void 0,r},l$=U0,pke=function(t){for(var r=-1,n=t.$_refsLength||0;++r<n;){var i=t[l$+r];i!=null&&(i.$_context=i.$_refIndex=t[l$+r]=void 0)}return t.$_refsLength=void 0,t},u$=U0,dke=function(t){var r=t.$_context;if(r){for(var n=(t.$_refIndex||0)-1,i=(r.$_refsLength||0)-1;++n<=i;)r[u$+n]=r[u$+(n+1)];r.$_refsLength=i,t.$_refIndex=t.$_context=r=void 0}return t},mke=Uf,gke=M7,yke=Cc,vke=pke,_ke=dke,wR=function(t,r,n,i){if(yke(t)){var l=t.$type;return l&&(l===mke&&_ke(t),gke(i,t)),vke(t),r[n]=t.$_parent=void 0,!0}return!1},gT,c$;function SR(){if(c$)return gT;c$=1;var e=_1,t=tC,r=wR;return gT=function n(i,l,a,s,d){if(r(i,l,a,s)){if(i.$type!==void 0&&d&&i.$_absolutePath&&(d.hasInvalidatedResult=!0),i.$type==null)for(var v in i)v[0]!==t&&e(i,v)&&n(i[v],i,v,s,d);return!0}return!1},gT}var bke=Cc,xke=hke,wke=SR(),W7=function(t,r,n,i,l,a){return t===r?t:(bke(t)&&(xke(t,r),wke(t,n,i,l,a)),n[i]=r,r)},Ske=U0,Z7=function(t,r){var n=[t],i=0;do{var l=n[i];if(l&&l.$_version!==r){l.$_version=r,n[i++]=l.$_parent;for(var a=-1,s=l.$_refsLength||0;++a<s;)n[i++]=l[Ske+a]}}while(--i>-1);return t},Eke=wR,Cke=Z7,w1=function(t,r,n,i){var l=t;do{var a=l.$_parent,s=l.$size=(l.$size||0)-r;s<=0&&a!=null?Eke(l,a,l.$_key,n):l.$_version!==i&&Cke(l,i),l=a}while(l);return t},X7=function(t,r){var n=t.slice(0,t.depth);return n[n.length]=r,n},f$=Uf,Pke=V0,h$=Ig,p$=q7,ww=Cc,Mb=ov,d$=Ag,yT=G7,r_=H7,m$=kg,g$=W7,vT=w1,Tke=X7,Ake=function(t,r,n,i,l,a,s,d,v,S,A,P){var L,F,K,re,G,H,B,$=r&&r.value!==void 0?r.value:r;if($===n){if(n===null)return r=yT(n,void 0,n),t=vT(t,-r.$size,v,s),r=r_(r,t,i,void 0,a),r;if(n===void 0)return n;if(re=ww(r),re&&(F=r.$type,F==null))return r.$_parent==null&&r_(r,t,i,s,a),r}else re=ww(r),re&&(F=r.$type);if(F!==f$){if(G=ww(n),G&&(K=n.$type),re&&!F&&(n==null||G&&!K))return r}else{if(n==null){if(Mb(r)){m$(r,d,v);return}return r}if(G=ww(n),G&&(K=n.$type,K===f$)){if(r===n){if(r.$_parent!=null)return r}else if(H=r.$timestamp,B=n.$timestamp,!Mb(r)&&!Mb(n)&&B<H)return}}if(F&&G&&!K)return r_(g$(r,n,t,i,v,P),t,i,void 0,a);if(K||!G){if(K===Pke&&d$(A)&&(n=A(Tke(l,i),n),K=n.$type||K),K&&r===n)r.$_parent==null&&(r=yT(r,K,r.value),t=vT(t,-r.$size,v,s),r=r_(r,t,i,s,a));else{var N=!0;(F&&!Mb(r)||!re)&&(N=!(p$(n)<p$(r)),N&&(F||K)&&d$(S)&&(N=!S($,n,a.slice(0,a.index)))),N&&(n=yT(n,K,K?n.value:n),L=h$(r)-h$(n),r=g$(r,n,t,i,v,P),t=vT(t,L,v,s),r=r_(r,t,i,s,a))}Mb(r)&&m$(r,d,v)}else r==null&&(r=r_({},t,i,void 0,a));return r};function kke(e){e.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,Error):e.__proto__=Error}var q0=kke,Ike=q0;function ER(){var e=new Error("`null` and `undefined` are not allowed in branch key positions");return e.name="NullInPathError",Object.setPrototypeOf&&Object.setPrototypeOf(e,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(e,ER),e}Ike(ER);var CR=ER,Mke=b1,Oke=Uf,Rke=sAe,Dke=Ag,K7=iv,zke=kg,y$=av.iterateKeySet,Lke=j0,$ke=Ake,Nke=CR,nC=function(t,r,n,i,l,a){for(var s=t._root,d=s,v=s.expired,S=Lke(),A=s.cache,P=A.$_version,L=[],F=[],K=[],re=[],G=-1,H=r.length;++G<H;)for(var B=r[G],$=B.paths,N=B.jsonGraph,z=-1,X=$.length;++z<X;){var te=$[z];F.index=0,Y7(te,0,A,A,A,N,N,N,K,re,L,F,S,v,d,l,i,a)}var pe=A.$_version,ke=s.onChange;return Dke(ke)&&P!==pe&&ke(),[K,re]};function Y7(e,t,r,n,i,l,a,s,d,v,S,A,P,L,F,K,re,G){var H={},B=t<e.length-1,$=e[t],N=y$($,H),z=A.index;do{S.depth=t;var X=J7(r,n,i,l,a,s,N,B,S,A,P,L,F,K,re,G);S[t]=N,S.index=t,A[A.index++]=N;var te=X[0],pe=X[1];if(te&&(B?Y7(e,t+1,r,pe,te,l,X[3],X[2],d,v,S,A,P,L,F,K,re,G):(d.push(S.slice(0,S.index+1)),v.push(A.slice(0,A.index)))),N=y$($,H),H.done)break;A.index=z}while(!0)}var El=new Array(4);function Bke(e,t,r,n,i,l,a,s,d,v,S,A){var P=t.value;if(l.length=0,l.push.apply(l,P),Rke(t))return l.index=P.length,zke(t,s,d),El[0]=void 0,El[1]=e,El[2]=n,El[3]=r,El;var L=0,F=t,K=P.length-1,re=t=e,G=n=r;do{var H=P[L],B=L<K;l.index=L;var $=J7(e,re,t,r,G,n,H,B,i,l,a,s,d,v,S,A);if(t=$[0],K7(t))return l.index=L,$;re=$[1],n=$[2],G=$[3]}while(L++<K);return l.index=L,F.$_context!==t&&Mke(F,t),El[0]=t,El[1]=re,El[2]=n,El[3]=G,El}function J7(e,t,r,n,i,l,a,s,d,v,S,A,P,L,F,K){for(var re=r.$type;re===Oke;){var G=Bke(e,r,n,l,d,v,S,A,P,L,F,K);if(r=G[0],K7(r))return G;t=G[1],l=G[2],i=G[3],re=r.$type}if(re!==void 0)return El[0]=r,El[1]=t,El[2]=l,El[3]=i,El;if(a==null){if(s)throw new Nke;r&&(a=r.$_key)}else t=r,i=l,r=t[a],l=i&&i[a];return r=$ke(t,r,l,a,d,v,S,A,P,L,F,K),El[0]=r,El[1]=t,El[2]=l,El[3]=i,El}var Fke=yR,sv=function(t,r){if(r.$expires!==Fke){var n=t.$_head;if(!n){t.$_head=t.$_tail=r;return}if(n!==r){var i=r.$_prev,l=r.$_next;l&&(l.$_prev=i),i&&(i.$_next=l),r.$_prev=void 0,t.$_head=r,r.$_next=n,n.$_prev=r,r===t.$_tail&&(t.$_tail=i)}}},Uke=rC,PR=function(t){if(t===void 0)return t;var r={};for(var n in t)n.lastIndexOf(Uke,0)!==0&&(r[n]=t[n]);return r},jke=sv,_T=PR,v$=Uf,_$=xR,Vke=V0,TR=function(t,r,n,i,l,a,s,d,v,S){if(r&&jke(t._root,r),!!n){var A,P,L,F,K,re=null,G,H=!1,B,$=r&&r.$type,N=r&&r.value;if(N===void 0&&(H=t._materialized),H)B={$type:_$};else if(t._boxed)B=_T(r);else if(!S&&$===v$)B=void 0;else if($===v$||$===Vke)S?B=_T(r):B=N;else if(S){var z=N&&typeof N=="object",X=!r||!r.$_modelCreated;z||X?B=_T(r):B=N}else r&&$===void 0&&N===void 0?B={}:B=N;var te=!1;if(S){for(K=n.jsonGraph,K||(te=!0,K=n.jsonGraph={},n.paths=[]),A=0,P=v-1;A<P;A++)F=d[A],K[F]||(te=!0,K[F]={}),K=K[F];F=d[A],K[F]=H?{$type:_$}:B,s&&n.paths.push(s.slice(0,i))}else if(i===0)te=!0,n.json=B;else{for(K=n.json,K||(te=!0,K=n.json={}),A=0;A<i-1;A++)L=s[A],K[L]||(te=!0,K[L]=a[A]),re=K,G=L,K=K[L];L=s[A],B!==void 0&&(L!=null?(te=!0,K[L]||(K[L]=B)):re[G]=B)}l&&(l.hasValues=te)}},iC=ov,qke=b1,Gke=TR,Hke=iC,Wke=Uf,Zke=sv;function Xke(e,t,r,n,i,l,a){for(var s=r,d=i,v=n,S=0,A,P;;){if(S===0&&v.$_context?(S=d.length,P=v.$_context):(A=d[S++],P=s[A]),P){var L=P.$type,F=L&&P.value||P;if(S<d.length){if(L){s=P;break}s=P;continue}else{if(s=P,L&&Hke(P))break;if(v.$_context||qke(v,P),L===Wke){a?Gke(e,P,l,null,null,null,null,d,d.length,a):Zke(e._root,P),S=0,d=F,v=P,s=t;continue}break}}else s=void 0;break}if(S<d.length&&s!==void 0){for(var K=[],re=0;re<S;re++)K[re]=d[re];d=K}return[s,d,v]}var Q7=Xke,Kke=Q7,Yke=PR,b$=iC,Jke=sv,Qke=Uf,x$=xR,eIe=V0,aC=function(t,r,n){for(var i=t._root.cache,l=r.length,a=[],s=!1,d=!1,v=0,S,A,P=i,L=i,F=i,K,re,G,H=!0,B=!1;P&&v<l;){if(S=r[v++],S!==null&&(P=L[S],a[a.length]=S),!P){F=void 0,s=!0,H=!1;break}if(K=P.$type,K===x$&&P.value===void 0){F=void 0,H=!1,s=v<l;break}if(v<l){if(K===Qke){if(b$(P)){B=!0,F=void 0;break}if(re=Kke(t,i,i,P,P.value),G=re[0],!G){F=void 0,P=void 0,H=!1;break}K=G.$type,P=G,a=re[1].slice(0)}if(K)break}else F=P;L=P}if(v<l&&!B){for(A=v;A<l;++A)if(r[v]!==null){d=!0;break}for(d?(s=!0,F=void 0):F=P,A=v;A<l;++A)r[A]!==null&&(a[a.length]=r[A])}if(F&&K&&(b$(F)?F=void 0:Jke(t._root,F)),F&&K===eIe&&!t._treatErrorsAsValues)throw{path:v===l?r:r.slice(0,v),value:F.value};return F&&t._boxed?F=K&&!n?Yke(F):F:!F&&t._materialized?F={$type:x$}:F&&(F=F.value),{value:F,shorted:s,optimizedPath:a,found:H}},tIe=q0;function AR(e,t){var r=new Error("The boundPath of the model is not valid since a value or error was found before the path end.");return r.name="InvalidModelError",r.boundPath=e,r.shortedPath=t,Object.setPrototypeOf&&Object.setPrototypeOf(r,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(r,AR),r}tIe(AR);var kR=AR,rIe=aC,nIe=kR,lv=function(t,r,n){var i=r,l=r,a,s,d,v,S;for(a=t._boxed,n=t._materialized,s=t._treatErrorsAsValues,t._boxed=!0,t._materialized=n===void 0||n,t._treatErrorsAsValues=!0,d=rIe(t,i.concat(null),!0),t._boxed=a,t._materialized=n,t._treatErrorsAsValues=s,i=d.optimizedPath,v=d.shorted,S=d.found,d=d.value;i.length&&i[i.length-1]===null;)i.pop();if(S&&v)throw new nIe(l,i);return{path:i,value:d,shorted:v,found:S}},iIe=Cc,aIe=function(t,r){var n=iIe(t)&&t.$type||void 0;return r&&n?"branch":n},oIe=Uf,sIe=V0,w$=aIe,S$=Ig,E$=q7,lIe=ov,uIe=iv,C$=Ag,cIe=G7,fIe=kg,P$=H7,T$=W7,hIe=w1,pIe=Z7,dIe=X7,eV=function(t,r,n,i,l,a,s,d,v,S,A,P,L,F){var K=w$(r,a);if(l||a)K&&lIe(r)&&(K="expired",fIe(r,S,A)),(K&&K!==oIe||uIe(r))&&(r=T$(r,{},t,n,A,F),r=P$(r,t,n,v,d),r=pIe(r,v));else{var re=i,G=w$(re),H=!(E$(re)<E$(r));if((K||G)&&C$(P)&&(H=!P(r,re,d.slice(0,d.index))),H){G===sIe&&C$(L)&&(re=L(dIe(s,n),re),G=re.$type||G),re=cIe(re,G,G?re.value:re);var B=S$(r)-S$(re);r=T$(r,re,t,n,A,F),t=hIe(t,B,A,v),r=P$(r,t,n,v,d)}}return r},bT,A$;function oC(){if(A$)return bT;A$=1;var e=b1,t=Uf,r=lv,n=ov,i=Ag,l=iv,a=kg,s=av.iterateKeySet,d=j0,v=eV,S=CR;bT=function(K,re,G,H,B){for(var $=K._root,N=$,z=$.expired,X=d(),te=K._path,pe=$.cache,ke=te.length?r(K,te).value:pe,Pe=ke.$_parent||pe,ge=pe.$_version,Ie=[],Ne=[],lt=[],it=te.length,Rt=-1,St=re.length;++Rt<St;){var Zt=re[Rt],Kt=Zt.path,Ge=Zt.value,Ye=te.slice(0);Ye.index=it,A(Ge,Kt,0,pe,Pe,ke,Ne,lt,Ie,Ye,X,z,N,B,H)}var Dr=pe.$_version,wr=$.onChange;return i(wr)&&ge!==Dr&&wr(),[Ne,lt]};function A(F,K,re,G,H,B,$,N,z,X,te,pe,ke,Pe,ge,Ie){var Ne={},lt=re<K.length-1,it=K[re],Rt=s(it,Ne),St=X.index;do{z.depth=re;var Zt=L(G,H,B,Rt,F,lt,!1,z,X,te,pe,ke,Pe,ge,Ie);z[re]=Rt,z.index=re,X[X.index++]=Rt;var Kt=Zt[0],Ge=Zt[1];if(Kt&&(lt?A(F,K,re+1,G,Ge,Kt,$,N,z,X,te,pe,ke,Pe,ge):($.push(z.slice(0,z.index+1)),N.push(X.slice(0,X.index)))),Rt=s(it,Ne),Ne.done)break;X.index=St}while(!0)}function P(F,K,re,G,H,B,$,N,z,X,te){var pe=re.value;if(H.length=0,H.push.apply(H,pe),n(re))return H.index=pe.length,a(re,$,N),[void 0,K];var ke=re,Pe=K;if(re=re.$_context,re!=null)Pe=re.$_parent||K,H.index=pe.length;else{var ge=0,Ie=pe.length-1;Pe=re=K;do{var Ne=pe[ge],lt=ge<Ie;H.index=ge;var it=L(K,Pe,re,Ne,F,lt,!0,G,H,B,$,N,z,X,te);if(re=it[0],l(re))return H.index=ge,it;Pe=it[1]}while(ge++<Ie);H.index=ge,ke.$_context!==re&&e(ke,re)}return[re,Pe]}function L(F,K,re,G,H,B,$,N,z,X,te,pe,ke,Pe,ge){for(var Ie=re.$type;Ie===t;){var Ne=P(H,F,re,N,z,X,te,pe,ke,Pe,ge);if(re=Ne[0],l(re))return Ne;K=Ne[1],Ie=re.$type}if(B&&Ie!==void 0)return[re,K];if(G==null){if(B)throw new S;re&&(G=re.$_key)}else K=re,re=K[G];return re=v(K,re,G,H,B,$,N,z,X,te,pe,ke,Pe,ge),[re,K]}return bT}var mIe=q0;function IR(e){var t=new Error("An exception was thrown when making a request.");return t.name="InvalidSourceError",t.innerError=e,Object.setPrototypeOf&&Object.setPrototypeOf(t,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(t,IR),t}mIe(IR);var G0=IR,gIe=nC,yIe=oC(),vIe=G0,k$=[],_Ie={dispose:function(){}},bIe=function(e,t,r,n){var i=e.paths,l=t._root,a=l.errorSelector,s=l.comparator,d=t._path,v,S;try{S=t._source.set(e,r)}catch{return n(new vIe),_Ie}var A=S.subscribe(function(L){if(!(A&&A.disposed)){t._path=k$;var F=gIe(t,[{paths:i,jsonGraph:L.jsonGraph}],null,a,s);L.paths=F[1],t._path=d,v=L}},function(L){A&&A.disposed||(t._path=k$,yIe(t,i.map(function(F){return{path:F,value:L}}),null,a,s),t._path=d,n(L))},function(){n(null,v)});return A},xIe=bIe,MR={exports:{}},I$=av.iterateKeySet;MR.exports=function(t,r,n){var i=[],l=[],a=[],s,d;for(s=0,d=r.length;s<d;++s){var v=r[s],S=t[s],A=n[v.length],P=tV(S,v,A);Array.prototype.push.apply(a,P[0]),Array.prototype.push.apply(i,P[1]),Array.prototype.push.apply(l,P[2])}return{intersection:a,optimizedComplement:i,requestedComplement:l}};function tV(e,t,r){var n=e.length-t.length,i;for(i=0;r&&i<-n;i++)r=r[t[i]];return r?n===0?Qw(e,t,r,0,[],[]):n>0?Qw(e,t,r,0,e.slice(0,n),[]):Qw(e,t,r,-n,[],t.slice(0,-n)):[[],[t],[e]]}function Qw(e,t,r,n,i,l){for(var a=e.length-t.length,s=[],d=[],v=[],S=t.length;n<S;++n){var A=t[n],P=typeof A;if(A&&P==="object"){for(var L={},F=I$(A,L);!L.done;){var K=r[F];if(K===void 0)v[v.length]=O$(l,F,t,n+1),d[d.length]=O$(i,F,e,n+1+a);else if(n===S-1)s[s.length]=xT(i,F);else{var re=Qw(e,t,K,n+1,xT(i,F),xT(l,F));Array.prototype.push.apply(s,re[0]),Array.prototype.push.apply(v,re[1]),Array.prototype.push.apply(d,re[2])}F=I$(A,L)}break}else if(r=r[A],l[l.length]=t[n],i[i.length]=e[n+a],r===void 0){v[v.length]=M$(l,t,n+1),d[d.length]=M$(i,e,n+a+1);break}else n===S-1&&(s[s.length]=i)}return[s,v,d]}MR.exports.__test={findPartialIntersections:tV};function M$(e,t,r){var n=e.slice(),i=n.length,l=t.length-r;n.length=i+l;for(var a=0;a<l;++a)n[i+a]=t[r+a];return n}function O$(e,t,r,n){var i=e.concat(t),l=i.length,a=r.length-n;i.length=l+a;for(var s=0;s<a;++s)i[l+s]=r[n+s];return i}function xT(e,t){var r=e.slice();return r.push(t),r}var wIe=MR.exports,rV=av,SIe=rV.toTree,EIe=rV.toPaths,CIe=G0,PIe=function(t,r,n){if(t._count===0)return t.requestQueue.removeRequest(t),null;t.sent=!0,t.scheduled=!1;var i,l=t.requestQueue.model;if(l._enablePathCollapse||l._enableRequestDeduplication){for(var a=t._pathMap,s=0,d=r.length;s<d;++s)for(var v=r[s],S=0,A=v.length;S<A;++S){var P=v[S],L=P.length;if(!a[L])a[L]=[P];else{var F=a[L];F[F.length]=P}}for(var K=Object.keys(a),re=0,G=K.length;re<G;++re){var H=K[re];a[H]=SIe(a[H])}}l._enablePathCollapse?i=EIe(t._pathMap):r.length===1?i=r[0]:i=Array.prototype.concat.apply([],r);var B;try{B=l._source.get(i,t._attemptCount)}catch{return n(new CIe),null}var $,N=B.subscribe(function(z){$=z},function(z){n(z,$)},function(){n(null,$)});return N},sC={},nV=null;sC.setVersion=function(t){nV=t};sC.getVersion=function(){return nV};var TIe=wIe,AIe=PIe,kIe=j0,R$=sC,IIe=0,MIe=I7.GetRequest,OIe=nC,RIe=oC(),DIe=V0,zIe=[],LIe=G0,iV=function(e,t,r){this.sent=!1,this.scheduled=!1,this.requestQueue=t,this.id=++IIe,this.type=MIe,this._scheduler=e,this._attemptCount=r,this._pathMap={},this._optimizedPaths=[],this._requestedPaths=[],this._callbacks=[],this._count=0,this._disposable=null,this._collapsed=null,this._disposed=!1};iV.prototype={batch:function(e,t,r){var n=this,i=n._optimizedPaths,l=n._requestedPaths,a=n._callbacks,s=i.length;if(i[s]=t,l[s]=e,a[s]=r,++n._count,!n.scheduled){n.scheduled=!0;var d,v=n._scheduler.schedule(function(){d=AIe(n,i,function(S,A){var P,L,F,K=n.requestQueue.model;if(n.requestQueue.removeRequest(n),n._disposed=!0,K._treatDataSourceErrorsAsJSONGraphErrors?S instanceof LIe:S){for(P=0,F=a.length;P<F;++P)L=a[P],L&&L(S);return}if(n._count){var re=kIe.getCurrentVersion();R$.setVersion(re);var G={hasInvalidatedResult:!1},H=K._useServerPaths&&A&&A.paths===void 0?new Error("Server responses must include a 'paths' field when Model._useServerPaths === true"):void 0;for(H||n._merge(l,S,A,G),P=0,F=a.length;P<F;++P)L=a[P],L&&L(H||S,A,G.hasInvalidatedResult);R$.setVersion(null)}}),n._disposable=d});n._disposable=d||v}return D$(n,s)},add:function(e,t,r){var n=this,i=TIe(e,t,n._pathMap),l=!1,a=!1;if(i.intersection.length){l=!0;var s=n._callbacks.length;n._callbacks[s]=r,n._requestedPaths[s]=i.intersection,n._optimizedPaths[s]=[],++n._count,a=D$(n,s)}return[l,i.requestedComplement,i.optimizedComplement,a]},_merge:function(e,t,r,n){var i=this,l=i.requestQueue.model,a=l._root,s=a.errorSelector,d=a.comparator,v=l._path;l._path=zIe;var S=l._useServerPaths?r.paths:$Ie(e);if(t&&l._treatDataSourceErrorsAsJSONGraphErrors){var A=t;A instanceof Error&&(A={message:A.message}),A.$type||(A={$type:DIe,value:A});var P=S.map(function(L){return{path:L,value:A}});RIe(l,P,null,s,d,n)}else OIe(l,[{paths:S,jsonGraph:r.jsonGraph}],null,s,d,n);l._path=v}};function D$(e,t){var r=!1;return function(){if(!(r||e._disposed)){r=!0,e._callbacks[t]=null,e._optimizedPaths[t]=[],e._requestedPaths[t]=[];var n=--e._count,i=e._disposable;n===0&&(i.unsubscribe?i.unsubscribe():i.dispose(),e.requestQueue.removeRequest(e))}}}function $Ie(e){for(var t=[],r=-1,n=0,i=e.length;n<i;++n)for(var l=e[n],a=0,s=l.length;a<s;++a)t[++r]=l[a];return t}var NIe=iV,BIe=I7,FIe=xIe,UIe=NIe,jIe=av;function aV(e,t){this.model=e,this.scheduler=t,this.requests=this._requests=[]}aV.prototype={setScheduler:function(e){this.scheduler=e},set:function(e,t,r){return this.model._enablePathCollapse&&(e.paths=jIe.collapse(e.paths)),r===void 0&&(r=t,t=void 0),FIe(e,this.model,t,r)},get:function(e,t,r,n){var i=this,l=[],a=0,s=i._requests,d,v,S=t,A=e,P=!1,L;for(n===void 0&&(n=r,r=void 0),d=0,v=s.length;d<v;++d)if(L=s[d],L.type===BIe.GetRequest)if(L.sent){if(this.model._enableRequestDeduplication){var F=L.add(A,S,re);if(F[0]&&(A=F[1],S=F[2],l[l.length]=F[3],++a,!S.length))break}}else{L.batch(A,S,re),S=null,A=null,++a;break}if(S&&S.length){L=new UIe(i.scheduler,i,r),s[s.length]=L,++a;var K=L.batch(A,S,re);l[l.length]=K}function re(G,H,B){P||(--a,a===0&&n(G,H,B))}return function(){if(!(P||a===0)){P=!0;for(var G=l.length,H=0;H<G;++H)l[H]()}}},removeRequest:function(e){for(var t=this._requests,r=t.length;--r>=0;)if(t[r].id===e.id){t.splice(r,1);break}}};var VIe=aV,qIe=function(){},n_=qIe;function oV(e,t,r){!e||typeof e!="object"?this._observer={onNext:typeof e=="function"?e:n_,onError:typeof t=="function"?t:n_,onCompleted:typeof r=="function"?r:n_}:this._observer={onNext:typeof e.onNext=="function"?function(n){e.onNext(n)}:n_,onError:typeof e.onError=="function"?function(n){e.onError(n)}:n_,onCompleted:typeof e.onCompleted=="function"?function(){e.onCompleted()}:n_}}oV.prototype={onNext:function(e){this._closed||this._observer.onNext(e)},onError:function(e){this._closed||(this._closed=!0,this._observer.onError(e))},onCompleted:function(){this._closed||(this._closed=!0,this._observer.onCompleted())}};var GIe=oV;function HIe(e){var t,r=e.Symbol;return typeof r=="function"?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}var C_;typeof self<"u"?C_=self:typeof window<"u"?C_=window:typeof{}<"u"?C_={}:typeof yc<"u"?C_=yc:C_=Function("return this")();var WIe=HIe(C_);const ZIe=Object.freeze(Object.defineProperty({__proto__:null,default:WIe},Symbol.toStringTag,{value:"Module"})),XIe=Vy(ZIe);function sV(e){this.esObserver=e}sV.prototype={onNext:function(t){typeof this.esObserver.next=="function"&&this.esObserver.next(t)},onError:function(t){typeof this.esObserver.error=="function"&&this.esObserver.error(t)},onCompleted:function(){typeof this.esObserver.complete=="function"&&this.esObserver.complete()}};function lV(e){this.subscription=e}lV.prototype.unsubscribe=function(){this.subscription.dispose()};function KIe(e){return{subscribe:function(r){return new lV(e.subscribe(new sV(r)))}}}var YIe=KIe,JIe=GIe,QIe=XIe.default,eMe=YIe;function Ny(e){this._subscribe=e}Ny.prototype[QIe]=function(){return eMe(this)};Ny.prototype._toJSONG=function(){return this};Ny.prototype.progressively=function(){return this};Ny.prototype.subscribe=Ny.prototype.forEach=function(t,r,n){var i=new JIe(t,r,n),l=this._subscribe(i);switch(typeof l){case"function":return{dispose:function(){i._closed||(i._closed=!0,l())}};case"object":return{dispose:function(){i._closed||(i._closed=!0,l!==null&&l.dispose())}};default:return{dispose:function(){i._closed=!0}}}};Ny.prototype.then=function(t,r){var n=this;return n._promise||(n._promise=new Promise(function(i,l){var a=!1,s=[];n.subscribe(function(d){s[s.length]=d},function(d){a=!0,l(d)},function(){var d=s;s.length<=1&&(d=s[0]),a===!1&&i(d)})})),n._promise.then(t,r)};var mm=Ny,uV={exports:{}},tMe={token:"token",dotSeparator:".",commaSeparator:",",openingBracket:"[",closingBracket:"]",openingBrace:"{",closingBrace:"}",escape:"\\",space:" ",colon:":",quote:"quote",unknown:"unknown"},H0=tMe,gh=H0,rMe=".",nMe=",",iMe="[",aMe="]",oMe="{",sMe="}",lMe=":",uMe="\\",cMe='"',fMe="'",hMe=" ",pMe=`\\'"[]., `,dMe=`\\{}'"[]., :`,cV=uV.exports=function(e,t){this._string=e,this._idx=-1,this._extended=t,this.parseString=""};cV.prototype={next:function(){var e=this._nextToken?this._nextToken:L$(this._string,this._idx,this._extended);return this._idx=e.idx,this._nextToken=!1,this.parseString+=e.token.token,e.token},peek:function(){var e=this._nextToken?this._nextToken:L$(this._string,this._idx,this._extended);return this._nextToken=e,e.token}};cV.toNumber=function(t){return isNaN(+t)?NaN:+t};function z$(e,t,r){return{token:e,done:r,type:t}}function L$(e,t,r){var n=!1,i="",l=r?dMe:pMe,a;do{if(a=t+1>=e.length,a)break;var s=e[t+1];if(s!==void 0&&l.indexOf(s)===-1){i+=s,++t;continue}else if(i.length)break;++t;var d;switch(s){case rMe:d=gh.dotSeparator;break;case nMe:d=gh.commaSeparator;break;case iMe:d=gh.openingBracket;break;case aMe:d=gh.closingBracket;break;case oMe:d=gh.openingBrace;break;case sMe:d=gh.closingBrace;break;case hMe:d=gh.space;break;case cMe:case fMe:d=gh.quote;break;case uMe:d=gh.escape;break;case lMe:d=gh.colon;break;default:d=gh.unknown;break}n=z$(s,d,!1);break}while(!a);return!n&&i.length&&(n=z$(i,gh.token,!1)),n||(n={done:!0}),{token:n,idx:t}}var fV=uV.exports,S1={indexer:{nested:"Indexers cannot be nested.",needQuotes:"unquoted indexers must be numeric.",empty:"cannot have empty indexers.",leadingDot:"Indexers cannot have leading dots.",leadingComma:"Indexers cannot have leading comma.",requiresComma:"Indexers require commas between indexer args.",routedTokens:"Only one token can be used per indexer when specifying routed tokens."},range:{precedingNaN:"ranges must be preceded by numbers.",suceedingNaN:"ranges must be suceeded by numbers."},routed:{invalid:"Invalid routed token.  only integers|ranges|keys are supported."},quote:{empty:"cannot have empty quoted keys.",illegalEscape:"Invalid escape character.  Only quotes are escapable."},unexpectedToken:"Unexpected token.",invalidIdentifier:"Invalid Identifier.",invalidPath:"Please provide a valid path.",throwError:function(e,t,r){throw r?e+" -- "+t.parseString+" with next token: "+r:e+" -- "+t.parseString}},$$=fV,N$=H0,i_=S1,mMe=function(t,r,n,i){var l=t.peek(),a=1,s=!1,d=!0,v=n.indexer.length-1,S=$$.toNumber(n.indexer[v]),A;for(isNaN(S)&&i_.throwError(i_.range.precedingNaN,t);!s&&!l.done;){switch(l.type){case N$.dotSeparator:a===3&&i_.throwError(i_.unexpectedToken,t),++a,a===3&&(d=!1);break;case N$.token:A=$$.toNumber(t.next().token),isNaN(A)&&i_.throwError(i_.range.suceedingNaN,t),s=!0;break;default:s=!0;break}if(!s)t.next(),l=t.peek();else break}n.indexer[v]={from:S,to:d?A:A-1}},qp=H0,Vb=S1,B$=Vb.quote,gMe=function(t,r,n,i){for(var l=t.next(),a="",s=r.token,d=!1,v=!1;!l.done;){switch(l.type){case qp.token:case qp.space:case qp.dotSeparator:case qp.commaSeparator:case qp.openingBracket:case qp.closingBracket:case qp.openingBrace:case qp.closingBrace:d&&Vb.throwError(B$.illegalEscape,t),a+=l.token;break;case qp.quote:d?(a+=l.token,d=!1):l.token!==s?a+=l.token:v=!0;break;case qp.escape:d=!0;break;default:Vb.throwError(Vb.unexpectedToken,t)}if(v)break;l=t.next()}a.length===0&&Vb.throwError(B$.empty,t),n.indexer[n.indexer.length]=a},hV={integers:"integers",ranges:"ranges",keys:"keys"},wT=H0,ST=hV,e2=S1,ET=e2.routed,yMe=function(t,r,n,i){var l=t.next(),a=!1,s="";switch(l.token){case ST.integers:case ST.ranges:case ST.keys:break;default:e2.throwError(ET.invalid,t);break}var d=t.next();if(d.type===wT.colon&&(a=!0,d=t.next(),d.type!==wT.token&&e2.throwError(ET.invalid,t),s=d.token,d=t.next()),d.type===wT.closingBrace){var v={type:l.token,named:a,name:s};n.indexer[n.indexer.length]=v}else e2.throwError(ET.invalid,t)},Gp=H0,Zd=S1,a_=Zd.indexer,vMe=mMe,_Me=gMe,bMe=yMe,xMe=function(t,r,n,i){var l=t.next(),a=!1,s=1,d=!1;for(n.indexer=[];!l.done;){switch(l.type){case Gp.token:case Gp.quote:n.indexer.length===s&&Zd.throwError(a_.requiresComma,t);break}switch(l.type){case Gp.openingBrace:d=!0,bMe(t,l,n);break;case Gp.token:var v=+l.token;isNaN(v)&&Zd.throwError(a_.needQuotes,t),n.indexer[n.indexer.length]=v;break;case Gp.dotSeparator:n.indexer.length||Zd.throwError(a_.leadingDot,t),vMe(t,l,n);break;case Gp.space:break;case Gp.closingBracket:a=!0;break;case Gp.quote:_Me(t,l,n);break;case Gp.openingBracket:Zd.throwError(a_.nested,t);break;case Gp.commaSeparator:++s;break;default:Zd.throwError(Zd.unexpectedToken,t);break}if(a)break;l=t.next()}n.indexer.length===0&&Zd.throwError(a_.empty,t),n.indexer.length>1&&d&&Zd.throwError(a_.routedTokens,t),n.indexer.length===1&&(n.indexer=n.indexer[0]),i[i.length]=n.indexer,n.indexer=void 0},Sw=H0,Wm=S1,wMe=xMe,SMe=function(t){for(var r=t.next(),n={},i=[];!r.done;){switch(r.type){case Sw.token:var l=+r.token[0];isNaN(l)||Wm.throwError(Wm.invalidIdentifier,t),i[i.length]=r.token;break;case Sw.dotSeparator:i.length===0&&Wm.throwError(Wm.unexpectedToken,t);break;case Sw.space:break;case Sw.openingBracket:wMe(t,r,n,i);break;default:Wm.throwError(Wm.unexpectedToken,t);break}r=t.next()}return i.length===0&&Wm.throwError(Wm.invalidPath,t),i},EMe=fV,CMe=SMe,PMe=hV,Py=function(t,r){return CMe(new EMe(t,r))},fd=Py;Py.fromPathsOrPathValues=function(e,t){if(!e)return[];for(var r=[],n=0,i=e.length;n<i;n++)typeof e[n]=="string"?r[n]=Py(e[n],t):typeof e[n].path=="string"?r[n]={path:Py(e[n].path,t),value:e[n].value}:r[n]=e[n];return r};Py.fromPath=function(e,t){return e?typeof e=="string"?Py(e,t):e:[]};Py.RoutedTokens=PMe;var TMe=mm,AMe=G0,CT=fd;function OR(e,t,r,n,i){this.callPath=CT.fromPath(t),this.args=r,i&&(this.paths=i.map(CT.fromPath)),n&&(this.suffix=n.map(CT.fromPath)),this.model=e}OR.prototype=Object.create(TMe.prototype);OR.prototype._subscribe=function(t){var r=this.callPath,n=this.args,i=this.suffix,l=this.paths,a=this.model,s=a._clone({_path:[]}),d=a._path,v=d.concat(r);if(!a._source){t.onError(new Error("function does not exist"));return}var S,A;try{A=a._source.call(v,n,i,l)}catch(P){t.onError(new AMe(P));return}return A.subscribe(function(P){S=P},function(P){t.onError(P)},function(){var P=S.invalidated;P&&P.length&&s.invalidate.apply(s,P),s.withoutDataSource().set(S).subscribe(function(L){t.onNext(L)},function(L){t.onError(L)},function(){t.onCompleted()})})};var kMe=OR,IMe=Array.isArray,MMe=Cc,E1=function(t){return MMe(t)&&(IMe(t.path)||typeof t.path=="string")},OMe=Cc,lC=function(t){return OMe(t)&&"json"in t},RMe=Array.isArray,DMe=mm,zMe=E1,LMe=lC,$Me={dispose:function(){}};function C1(e,t){this._model=e;for(var r=[],n,i,l=-1,a=t.length;++l<a;){var s=t[l],d;if(RMe(s))d="PathValues";else if(zMe(s))d="PathValues";else if(LMe(s))d="PathMaps";else throw new Error("Invalid Input");i!==d&&(i=d,n={inputType:d,arguments:[]},r.push(n)),n.arguments.push(s)}this._groups=r}C1.prototype=Object.create(DMe.prototype);C1.prototype.progressively=function(){return this};C1.prototype._toJSONG=function(){return this};C1.prototype._subscribe=function(t){var r=this._model;return this._groups.forEach(function(n){var i=n.inputType,l=n.arguments,a="_invalidate"+i,s=r[a];s(r,l)}),t.onCompleted(),$Me};var NMe=C1;function RR(e){this.delay=e}var DR=function(t){this.id=t,this.disposed=!1};RR.prototype.schedule=function(t){var r=setTimeout(t,this.delay);return new DR(r)};RR.prototype.scheduleWithState=function(t,r){var n=this,i=setTimeout(function(){r(n,t)},this.delay);return new DR(i)};DR.prototype.dispose=function(){this.disposed||(clearTimeout(this.id),this.disposed=!0)};var BMe=RR,pV={dispose:function(){}};function zR(){}zR.prototype.schedule=function(t){return t(),pV};zR.prototype.scheduleWithState=function(t,r){return r(this,t),pV};var FMe=zR,UMe=wR,F$=w1,LR=function(t,r,n,i,l,a){var s=n,d=l;typeof d!="number"&&(d=.75);var v=typeof a=="number",S=i*d,A,P,L;for(P=r.pop();P;)L=P.$size||0,s-=L,v===!0?F$(P,L,t,a):(A=P.$_parent)&&UMe(P,A,P.$_key,t),P=r.pop();if(s>=i){var F=t.$_tail;for(P=F;s>=S&&P;)F=F.$_prev,L=P.$size||0,s-=L,v===!0&&F$(P,L,t,a),P=F;t.$_tail=t.$_prev=P,P==null?t.$_head=t.$_next=void 0:P.$_next=void 0}},jMe=Array.isArray,o_=Cc,$R=function(t){return o_(t)&&jMe(t.paths)&&(o_(t.jsonGraph)||o_(t.jsong)||o_(t.json)||o_(t.values)||o_(t.value))},VMe=b1,qMe=tC,GMe=Uf,HMe=lv,WMe=Array.isArray,ZMe=_1,dV=Cc,XMe=ov,KMe=Ag,mV=iv,YMe=kg,JMe=j0,QMe=eV,eOe=CR,NR=function(t,r,n,i,l){for(var a=t._root,s=a,d=a.expired,v=JMe(),S=t._path,A=a.cache,P=S.length?HMe(t,S).value:A,L=P.$_parent||A,F=A.$_version,K=[],re=[],G=[],H=S.length,B=-1,$=r.length;++B<$;){var N=r[B],z=S.slice(0);z.index=H,gV(N.json,0,A,L,P,re,G,K,z,v,d,s,l,i)}var X=A.$_version,te=a.onChange;return KMe(te)&&F!==X&&te(),[re,G]};function gV(e,t,r,n,i,l,a,s,d,v,S,A,P,L){var F=rOe(e);if(F&&F.length){var K=0,re=F.length,G=d.index;do{var H=F[K],B=e[H],$=dV(B)&&!B.$type;s.depth=t;var N=yV(r,n,i,H,B,$,!1,s,d,v,S,A,P,L);s[t]=H,s.index=t,d[d.index++]=H;var z=N[0],X=N[1];if(z&&($?gV(B,t+1,r,X,z,l,a,s,d,v,S,A,P,L):(l.push(s.slice(0,s.index+1)),a.push(d.slice(0,d.index)))),++K>=re)break;d.index=G}while(!0)}}function tOe(e,t,r,n,i,l,a,s,d,v){var S=r.value;if(i.length=0,i.push.apply(i,S),XMe(r))return i.index=S.length,YMe(r,a,s),[void 0,t];var A=r,P=t;if(r=r.$_context,r!=null)P=r.$_parent||t,i.index=S.length;else{var L=0,F=S.length-1;i.index=L,P=r=t;do{var K=S[L],re=L<F,G=yV(t,P,r,K,e,re,!0,n,i,l,a,s,d,v);if(r=G[0],mV(r))return i.index=L,G;P=G[1]}while(L++<F);i.index=L,A.$_context!==r&&VMe(A,r)}return[r,P]}function yV(e,t,r,n,i,l,a,s,d,v,S,A,P,L){for(var F=r.$type;F===GMe;){var K=tOe(i,e,r,s,d,v,S,A,P,L);if(r=K[0],mV(r))return K;t=K[1],F=r&&r.$type}if(F!==void 0)return[r,t];if(n==null){if(l)throw new eOe;r&&(n=r.$_key)}else t=r,r=t[n];return r=QMe(t,r,n,i,l,a,s,d,v,S,A,P,L),[r,t]}function rOe(e){if(dV(e)&&!e.$type){var t=[],r=0;WMe(e)&&(t[r++]="length");for(var n in e)n[0]===qMe||!ZMe(e,n)||(t[r++]=n);return t}}var PT=fd;function Ew(e,t,r){var n=Object.create(null);if(r!=null){for(var i in r)n[i]=r[i];return n.$type=e,n.value=t,n}else return{$type:e,value:t}}var vV={ref:function(t,r){return Ew("ref",PT.fromPath(t),r)},atom:function(t,r){return Ew("atom",t,r)},undefined:function(){return Ew("atom")},error:function(t,r){return Ew("error",t,r)},pathValue:function(t,r){return{path:PT.fromPath(t),value:r}},pathInvalidation:function(t){return{path:PT.fromPath(t),invalidated:!0}}},nOe=Array.isArray,iOe=E1,aOe=$R,oOe=lC,U$=fd,BR=function(t,r,n){for(var i=0,l=t.length;i<l;++i){var a=t[i],s=!1;if(nOe(a)&&r.path)s=!0;else if(typeof a=="string"&&r.pathSyntax)try{U$.fromPath(a),s=!0}catch(d){return new Error("Path syntax validation error -- "+d)}else if(iOe(a)&&r.pathValue)try{a.path=U$.fromPath(a.path),s=!0}catch(d){return new Error("Path syntax validation error -- "+d)}else(aOe(a)&&r.jsonGraph||oOe(a)&&r.json||typeof a=="function"&&i+1===l&&r.selector)&&(s=!0);if(!s)return new Error("Unrecognized argument "+typeof a+" ["+String(a)+"] to Model#"+n)}return!0},sOe=rC,lOe=function(t){return t==="$size"||t.lastIndexOf(sOe,0)===0},_V=lOe,uOe=function(t){var r={};return bV(t,r),r};function cOe(e){var t={},r=Object.keys(e),n,i,l;for(i=0,l=r.length;i<l;i++)n=r[i],_V(n)||(t[n]=e[n]);return t}function bV(e,t,r){Object.keys(e).filter(function(n){return!_V(n)&&e[n]!==void 0}).forEach(function(n){var i=e[n],l=t[n];if(l||(l=t[n]={}),i.$type){var a=i.value&&typeof i.value=="object",s=!i.$_modelCreated,d;a||s?d=cOe(i):d=i.value,t[n]=d;return}bV(i,l)})}var xV=function(t,r){for(var n=t._root.cache,i=-1,l=r.length;++i<l&&n&&!n.$type;)n=n[r[i]];return n},fOe=q0;function FR(){var e=new Error("It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model.");return e.name="BoundJSONGraphModelError",Object.setPrototypeOf&&Object.setPrototypeOf(e,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(e,FR),e}fOe(FR);var hOe=FR,pOe=xV,dOe=kR,mOe=hOe;function wV(e,t){if(e!==t&&!(e===null||typeof e!="object"||e.$type)&&!(t===null||typeof t!="object"||t.$type)){for(var r in t)if(r!=="$__path"){var n=e[r];n===void 0?e[r]=t[r]:wV(n,t[r])}}}function gOe(e){return e?{jsonGraph:{},paths:[]}:{json:{}}}var yOe=function(t,r){return function(i,l,a){var s=r?a:[{}],d=s[0],v={values:s,optimizedPaths:[]},S=i._root.cache,A=i._path,P=S,L,F,K,re,G=[],H=[],B;if(A.length){if(r)return{criticalError:new mOe};if(L=i._getOptimizedBoundPath(),F=L.length,P=pOe(i,L),P&&P.$type)return{criticalError:new dOe(A,L)};B=i._referenceContainer}else L=[],F=0;for(K=0,re=l.length;K<re;K++)t(i,S,P,l[K],0,d,v,H,G,L,F,r,!1,B);return wV(d,l.length?a[0]:gOe(r)),v}},vOe=sv,_Oe=PR,bOe=function(t,r,n,i,l){var a=r.value;l.errors||(l.errors=[]),t._boxed&&(a=_Oe(r)),l.errors.push({path:i.slice(0,n),value:a}),vOe(t._root,r)},xOe=function(t,r,n,i,l,a,s){var d;if(i.requestedMissingPaths||(i.requestedMissingPaths=[],i.optimizedMissingPaths=[]),n<r.length){for(var v=!1,S=n;S<r.length&&!v;++S)if(SOe(r[S]))return;d=r.slice(n)}else d=[];wOe(t,d,n,l,a,s,i)};function wOe(e,t,r,n,i,l,a){var s=n.slice(0,r);Array.prototype.push.apply(s,t),a.requestedMissingPaths[a.requestedMissingPaths.length]=s;var d=i.slice(0,l);Array.prototype.push.apply(d,t),a.optimizedMissingPaths[a.optimizedMissingPaths.length]=d}function SOe(e){if(e===null||typeof e!="object")return!1;var t=Array.isArray(e);if(t&&e.length)return!1;if(t)return!0;var r=e.from,n=e.to;return!(r===void 0||r<=n)}var EOe=function(t){return t._materialized&&!t._source},COe=iC,POe=V0,TOe=bOe,Cw=TR,j$=xOe,AOe=EOe,kOe=kg,IOe=sC,MOe=function(t,r,n,i,l,a,s,d,v,S,A,P){var L=r&&r.$type;if(!r||!L){var F=AOe(t);(F||!A)&&Cw(t,r,l,i,a,s,d,v,S,A),F||j$(t,n,i,a,d,v,S);return}else COe(r)&&!(r.$_version===IOe.getVersion()&&r.$expires===0)?(r.$_invalidated||kOe(r,t._root.expired,t._root),j$(t,n,i,a,d,v,S)):L===POe?(P&&(d[i]=null,i+=1),A||t._treatErrorsAsValues?Cw(t,r,l,i,a,s,d,v,S,A):(Cw(t,void 0,l,i,a,s,d,v,S,A),TOe(t,r,i,d,a))):(P&&(d[i]=null,i+=1),Cw(t,r,l,i,a,s,d,v,S,A))},OOe=Q7,ROe=MOe,V$=TR,DOe=iC,TT=av.iterateKeySet,zOe=Uf,LOe=sv,$Oe=function e(t,r,n,i,l,a,s,d,v,S,A,P,L,F){var K=L,re=S,G=F;if(!n||n.$type||l===i.length){ROe(t,n,i,l,a,s,d,v,re,A,P,K);return}var H=i[l],B=H!==null&&typeof H=="object",$=!1,N=H;B&&($={},N=TT(H,$));var z=t._allowFromWhenceYouCame,X=A+1,te=l+1,pe;do{if(N==null){V$(t,n,a,l,s,d,v,re,A,P),$&&!$.done&&(N=TT(H,$));continue}K=!1,re[A]=N,v[l]=N;var ke=n[N],Pe=re,ge=X;if(ke){var Ie=ke.$type,Ne=Ie&&ke.value||ke;if(te<i.length&&Ie&&Ie===zOe&&!DOe(ke)){LOe(t._root,ke),P&&V$(t,ke,a,te,s,null,null,re,ge,P);var lt=OOe(t,r,r,ke,Ne,a,P);K=!0,ke=lt[0],pe=lt[1],G=lt[2],Pe=pe.slice(),ge=pe.length}if(ke){var it;G&&z?it={$__path:ke.$_absolutePath,$__refPath:G.value,$__toReference:G.$_absolutePath}:it={$__path:ke.$_absolutePath},d[l]=it}}e(t,r,ke,i,te,a,s,d,v,Pe,ge,P,K,G),$&&!$.done&&(N=TT(H,$))}while($&&!$.done)},SV=yOe,EV=$Oe,NOe=SV(EV,!1),BOe=SV(EV,!0),UR={getValueSync:aC,getBoundValue:lv,getWithPathsAsPathMap:NOe,getWithPathsAsJSONGraph:BOe},CV={path:!0,pathSyntax:!0},PV=UR,FOe=PV.getWithPathsAsJSONGraph,UOe=PV.getWithPathsAsPathMap,TV=function(t,r,n,i,l,a,s){var d=l?FOe(t,r,a):UOe(t,r,a),v=d.values&&d.values[0],S=!d.requestedMissingPaths||!d.requestedMissingPaths.length||!t._source;if(d.errors)for(var A=d.errors,P=s.length,L=0,F=A.length;L<F;++L,++P)s[P]=A[L];return(i||S&&v!==void 0)&&n.onNext(v),d.criticalError?(n.onError(d.criticalError),null):S?(s.length?n.onError(s):n.onCompleted(),null):d},jOe=q0;function uC(e){var t=new Error("The allowed number of retries have been exceeded.");return t.name="MaxRetryExceededError",t.missingOptimizedPaths=e||[],Object.setPrototypeOf&&Object.setPrototypeOf(t,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(t,uC),t}jOe(uC);uC.is=function(e){return e&&e.name==="MaxRetryExceededError"};var AV=uC,kV=function(t){this.disposed=!1,this.currentDisposable=t};kV.prototype={dispose:function(){if(!(this.disposed||!this.currentDisposable)){this.disposed=!0;var t=this.currentDisposable;t.dispose?t.dispose():t()}}};var IV=kV,VOe=TV,qOe=AV,GOe=LR,HOe=Ig,WOe=IV,ZOe=G0,XOe=function e(t,r,n,i,l,a){if(a>r._maxRetries)return i.onError(new qOe(n.optimizedMissingPaths)),{dispose:function(){}};var s=r._request,d=n.requestedMissingPaths,v=n.optimizedMissingPaths,S=new WOe,A=[],P=r._path;if(P.length)for(var L=0,F=d.length;L<F;++L)A[L]=P.concat(d[L]);else A=d;var K=s.get(A,v,a,function(re,G,H){if(r._treatDataSourceErrorsAsJSONGraphErrors?re instanceof ZOe:re){n.hasValues&&i.onNext(n.values&&n.values[0]),i.onError(re);return}var B,$;H?(B=t.currentRemainingPaths,$=[{}]):(B=d,$=n.values);var N=VOe(r,B,i,t.isProgressive,t.isJSONGraph,$,l);if(N)S.currentDisposable=e(t,r,N,i,l,a+1);else{var z=r._root,X=z.cache,te=X.$_version;GOe(z,z.expired,HOe(X),r._maxSize,r._collectRatio,te)}});return S.currentDisposable=K,S},KOe=mm,YOe=TV,JOe=XOe,QOe={dispose:function(){}},eRe=LR,tRe=Ig,By=function(t,r,n,i,l){this.model=t,this.currentRemainingPaths=r,this.isJSONGraph=n||!1,this.isProgressive=i||!1,this.forceCollect=l||!1};By.prototype=Object.create(KOe.prototype);By.prototype._toJSONG=function(){return new By(this.model,this.currentRemainingPaths,!0,this.isProgressive,this.forceCollect)};By.prototype.progressively=function(){return new By(this.model,this.currentRemainingPaths,this.isJSONGraph,!0,this.forceCollect)};By.prototype._subscribe=function(t){var r=[{}],n=[],i=this.model,l=t.isJSONG=this.isJSONGraph,a=this.isProgressive,s=YOe(i,this.currentRemainingPaths,t,a,l,r,n);if(!s){if(this.forceCollect){var d=i._root,v=d.cache,S=v.$_version;eRe(d,d.expired,tRe(v),i._maxSize,i._collectRatio,S)}return QOe}return JOe(this,i,s,t,n,1)};var jR=By,rRe=fd,nRe=mm,iRe=CV,aRe=BR,oRe=jR,sRe=function(){var t=aRe(arguments,iRe,"get");if(t!==!0)return new nRe(function(n){n.onError(t)});var r=rRe.fromPathsOrPathValues(arguments);return new oRe(this,r)},lRe=jR,uRe=function(t){return new lRe(this,t)},cRe={pathValue:!0,pathSyntax:!0,json:!0,jsonGraph:!0},fRe=function(t,r){for(var n=-1,i=-1,l=t.length,a=[];++i<l;)for(var s=r(t[i],i,t),d=-1,v=s.length;++d<v;)a[++n]=s[d];return a},hRe=fRe,pRe=function(t,r){for(var n=t._root,i=n.errorSelector,l=-1,a=r.length,s=[],d=[],v={requestedPaths:s,optimizedPaths:d};++l<a;){var S=r[l],A=S.inputType,P=S.arguments;if(P.length>0){var L="_set"+A,F=t[L],K=F(t,P,null,i);d.push.apply(d,K[1]),A==="PathValues"?s.push.apply(s,P.map(dRe)):A==="JSONGs"?s.push.apply(s,hRe(P,mRe)):s.push.apply(s,K[0])}}return v};function dRe(e){return e.path}function mRe(e){return e.paths}var gRe=[],yRe=IV,vRe=jR,_Re=pRe,bRe=UR.getWithPathsAsPathMap,xRe=G0,wRe=AV,SRe=function e(t,r,n,i,l,a){var s=_Re(t,n),d=s.optimizedPaths,v=s.requestedPaths;if(a>t._maxRetries)return r.onError(new wRe(d)),{dispose:function(){}};var S=t._source===void 0;if(S)return q$(t,r,v,i,l);var A;if(l){var P=bRe(t,v,[{}]);if(P.criticalError)return r.onError(P.criticalError),null;r.onNext(P.values[0]),A=t._root.cache.$_version}var L=ERe(t,d),F=new yRe,K=t._request.set(L,a,function(re,G){if(re instanceof xRe){r.onError(re);return}var H=!1;if((re||d.length===G.paths.length)&&(H=!0),l){var B=t._root.cache.$_version,$=B!==A;if(!$){r.onCompleted();return}}H?F.currentDisposable=q$(t,r,v,i,l):e(t,r,n,i,l,a+1)});return F.currentDisposable=K,F};function ERe(e,t){var r=e._path,n={};return e._path=gRe,e._getPathValuesAsJSONG(e._materialize().withoutDataSource(),t,[n]),e._path=r,n}function q$(e,t,r,n,i){var l=new vRe(e,r,n,i,!0);return l.subscribe(t)}var CRe=mm,G$=fd,PRe=Array.isArray,TRe=E1,ARe=$R,kRe=lC,IRe=SRe,Fy=function(t,r,n,i){this._model=t,this._isJSONGraph=n||!1,this._isProgressive=i||!1,this._initialArgs=r,this._value=[{}];for(var l=[],a,s,d=-1,v=r.length;++d<v;){var S=r[d],A;PRe(S)||typeof S=="string"?(S=G$.fromPath(S),A="PathValues"):TRe(S)?(S.path=G$.fromPath(S.path),A="PathValues"):ARe(S)?A="JSONGs":kRe(S)&&(A="PathMaps"),s!==A&&(s=A,a={inputType:A,arguments:[]},l.push(a)),a.arguments.push(S)}this._groups=l};Fy.prototype=Object.create(CRe.prototype);Fy.prototype._subscribe=function(t){var r=this._groups,n=this._model,i=this._isJSONGraph,l=this._isProgressive;return IRe(n,t,r,i,l,1)};Fy.prototype._toJSONG=function(){return new Fy(this._model,this._initialArgs,!0,this._isProgressive)};Fy.prototype.progressively=function(){return new Fy(this._model,this._initialArgs,this._isJSONGraph,!0)};var MRe=Fy,ORe=cRe,RRe=BR,DRe=MRe,zRe=mm,LRe=function(){var t=RRe(arguments,ORe,"set");if(t!==!0)return new zRe(function(l){l.onError(t)});for(var r=-1,n=arguments.length,i=[];++r<n;)i[r]=arguments[r];return new DRe(this,i)},AT,H$;function $Re(){if(H$)return AT;H$=1;var e=q0;function t(){var r=new Error("Deref can only be used with a non-primitive object from get, set, or call.");return r.name="InvalidDerefInputError",Object.setPrototypeOf&&Object.setPrototypeOf(r,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(r,t),r}return e(t),AT=t,AT}var kT,W$;function NRe(){if(W$)return kT;W$=1;var e=$Re(),t=xV,r="e",n=Uf;return kT=function(l){var a=l&&l.$__path,s=l&&l.$__refPath,d=l&&l.$__toReference,v;if(a){var S=r;if(d&&(S=!1,v=t(this,d),s&&v&&v.$type===n)){var A=v.value,P=0,L=s.length;for(S=!0;S&&P<L;++P)A[P]!==s[P]&&(S=!1)}return S?S===r&&(v=!0):v=!1,this._clone({_path:a,_referenceContainer:v})}throw new e},kT}var IT,Z$;function BRe(){return Z$||(Z$=1,IT=function(){var t=this._referenceContainer;return!this._allowFromWhenceYouCame||t===!0?!0:!(t===!1||t&&t.$_parent===void 0||t&&t.$_invalidated)}),IT}var MT,X$;function FRe(){if(X$)return MT;X$=1;var e=mm,t=fd;return MT=function(n){for(var i=t.fromPath(n),l=0,a=i.length;++l<a;)if(typeof i[l]=="object")return new e(function(d){d.onError(new Error("Paths must be simple paths"))});var s=this;return new e(function(d){return s.get(i).subscribe(function(v){for(var S=v.json,A=-1,P=i.length;S&&++A<P;)S=S[i[A]];d.onNext(S)},function(v){d.onError(v)},function(){d.onCompleted()})})},MT}var OT,K$;function URe(){if(K$)return OT;K$=1;var e=vV,t=mm,r=E1;return OT=function(i,l){for(var a=r(i)?i:e.pathValue(i,l),s=0,d=a.path,v=d.length;++s<v;)if(typeof d[s]=="object")return new t(function(A){A.onError(new Error("Paths must be simple paths"))});var S=this;return new t(function(A){return S.set(a).subscribe(function(P){for(var L=P.json,F=-1,K=d.length;L&&++F<K;)L=L[d[F]];A.onNext(L)},function(P){A.onError(P)},function(){A.onCompleted()})})},OT}var RT,Y$;function jRe(){if(Y$)return RT;Y$=1;var e=fd,t=aC;return RT=function(n){var i=e.fromPath(n);if(Array.isArray(i)===!1)throw new Error("Model#_getValueSync must be called with an Array path.");return this._path.length&&(i=this._path.concat(i)),this._syncCheck("getValueSync"),t(this,i).value},RT}var DT,J$;function VRe(){if(J$)return DT;J$=1;var e=fd,t=E1,r=oC();return DT=function(i,l,a,s){var d=e.fromPath(i),v=l,S=a,A=s;if(t(d)?(A=S,S=v,v=d):v={path:d,value:v},t(v)===!1)throw new Error("Model#setValueSync must be called with an Array path.");return typeof S!="function"&&(S=this._root._errorSelector),typeof A!="function"&&(A=this._root._comparator),this._syncCheck("setValueSync"),r(this,[v]),this._getValueSync(v.path)},DT}var zT,Q$;function qRe(){if(Q$)return zT;Q$=1;var e=fd,t=lv,r=kR;return zT=function(i){var l=e.fromPath(i);if(!Array.isArray(l))throw new Error("Model#derefSync must be called with an Array path.");var a=t(this,this._path.concat(l),!1),s=a.path,d=a.value,v=a.found;if(!(!v||d===void 0)){if(d.$type)throw new r(s,s);return this._clone({_path:s})}},zT}var LT,eN;function GRe(){if(eN)return LT;eN=1;var e=aC;return LT=function(r,n){var i=e({_boxed:!0,_root:r._root,_treatErrorsAsValues:r._treatErrorsAsValues},n,!0).value,l=i&&i.$_version;return l??-1},LT}var $T,tN;function HRe(){if(tN)return $T;tN=1;var e=U0,t=Uf,r=lv,n=sv,i=Ig,l=ov,a=Ag,s=iv,d=kg,v=av.iterateKeySet,S=j0,A=w1,P=SR();$T=function(G,H){for(var B=G._root,$=B,N=B.expired,z=S(),X=G._path,te=B.cache,pe=X.length?r(G,X).value:te,ke=pe.$_parent||te,Pe=te.$_version,ge=-1,Ie=H.length;++ge<Ie;){var Ne=H[ge];L(Ne,0,te,ke,pe,z,N,$)}var lt=te.$_version,it=B.onChange;a(it)&&Pe!==lt&&it()};function L(re,G,H,B,$,N,z,X){var te={},pe=G<re.length-1,ke=re[G],Pe=v(ke,te);do{var ge=K(H,B,$,Pe,pe,z,X),Ie=ge[0],Ne=ge[1];Ie&&(pe?L(re,G+1,H,Ne,Ie,N,z,X):P(Ie,Ne,Pe,X,void 0)&&A(Ne,i(Ie),X,N)),Pe=v(ke,te)}while(!te.done)}function F(re,G,H,B){if(l(G))return d(G,H,B),[void 0,re];n(B,G);var $=G,N=G.value,z=re;if(G=G.$_context,G!=null)z=G.$_parent||re;else{var X=0,te=N.length-1;z=G=re;do{var pe=N[X],ke=X<te,Pe=K(re,z,G,pe,ke,H,B);if(G=Pe[0],s(G))return Pe;z=Pe[1]}while(X++<te);if($.$_context!==G){var ge=G.$_refsLength||0;G.$_refsLength=ge+1,G[e+ge]=$,$.$_context=G,$.$_refIndex=ge}}return[G,z]}function K(re,G,H,B,$,N,z){for(var X=H.$type;X===t;){var te=F(re,H,N,z);if(H=te[0],s(H))return te;G=te[1],X=H.$type}if(X!==void 0)return[H,G];if(B==null){if($)throw new Error("`null` is not allowed in branch key positions.");H&&(B=H.$_key)}else G=H,H=G[B];return[H,G]}return $T}var NT,rN;function WRe(){if(rN)return NT;rN=1;var e=b1,t=tC,r=Uf,n=lv,i=sv,l=Ig,a=_1,s=Cc,d=ov,v=Ag,S=iv,A=kg,P=j0,L=w1,F=SR();NT=function(B,$){for(var N=B._root,z=N,X=N.expired,te=P(),pe=B._path,ke=N.cache,Pe=pe.length?n(B,pe).value:ke,ge=Pe.$_parent||ke,Ie=ke.$_version,Ne=-1,lt=$.length;++Ne<lt;){var it=$[Ne];K(it.json,ke,ge,Pe,te,X,z)}var Rt=ke.$_version,St=N.onChange;v(St)&&Ie!==Rt&&St()};function K(H,B,$,N,z,X,te){if(!(S(H)||H.$type)){for(var pe in H)if(pe[0]!==t&&a(H,pe)){var ke=H[pe],Pe=s(ke)&&!ke.$type,ge=G(B,$,N,pe,Pe,X,te),Ie=ge[0],Ne=ge[1];Ie&&(Pe?K(ke,B,Ne,Ie,z,X,te):F(Ie,Ne,pe,te)&&L(Ne,l(Ie),te,z))}}}function re(H,B,$,N){if(d(B))return A(B,$,N),[void 0,H];i(N,B);var z=B,X=B.value,te=H;if(B=B.$_context,B!=null)te=B.$_parent||H;else{var pe=0,ke=X.length-1;te=B=H;do{var Pe=X[pe],ge=pe<ke,Ie=G(H,te,B,Pe,ge,$,N);if(B=Ie[0],S(B))return Ie;te=Ie[1]}while(pe++<ke);z.$_context!==B&&e(z,B)}return[B,te]}function G(H,B,$,N,z,X,te){for(var pe=$.$type;pe===r;){var ke=re(H,$,X,te);if($=ke[0],S($))return ke;B=ke[1],pe=$&&$.$type}if(pe!==void 0)return[$,B];if(N==null){if(z)throw new Error("`null` is not allowed in branch key positions.");$&&(N=$.$_key)}else B=$,$=B[N];return[$,B]}return NT}var ZRe=k7,XRe=tAe,VR=VIe,jk=mm,KRe=kMe,YRe=NMe,nN=BMe,MV=FMe,OV=LR,RV=fd,DV=Ig,JRe=Cc,QRe=iv,e3e=lC,t3e=$R,iN=NR,r3e=nC,cC=vV,n3e=0,i3e=BR,a3e=function(){},o3e=uOe,fC=UR,s3e=CV,l3e=xi;xi.ref=cC.ref;xi.atom=cC.atom;xi.error=cC.error;xi.pathValue=cC.pathValue;function xi(e){var t=e||{};this._root=t._root||new ZRe(t),this._path=t.path||t._path||[],this._source=t.source||t._source,this._request=t.request||t._request||new VR(this,t.scheduler||new MV),this._ID=n3e++,typeof t.maxSize=="number"?this._maxSize=t.maxSize:this._maxSize=t._maxSize||xi.prototype._maxSize,typeof t.maxRetries=="number"?this._maxRetries=t.maxRetries:this._maxRetries=t._maxRetries||xi.prototype._maxRetries,typeof t.collectRatio=="number"?this._collectRatio=t.collectRatio:this._collectRatio=t._collectRatio||xi.prototype._collectRatio,(t.boxed||t.hasOwnProperty("_boxed"))&&(this._boxed=t.boxed||t._boxed),(t.materialized||t.hasOwnProperty("_materialized"))&&(this._materialized=t.materialized||t._materialized),typeof t.treatErrorsAsValues=="boolean"?this._treatErrorsAsValues=t.treatErrorsAsValues:t.hasOwnProperty("_treatErrorsAsValues")?this._treatErrorsAsValues=t._treatErrorsAsValues:this._treatErrorsAsValues=!1,typeof t.disablePathCollapse=="boolean"?this._enablePathCollapse=!t.disablePathCollapse:t.hasOwnProperty("_enablePathCollapse")?this._enablePathCollapse=t._enablePathCollapse:this._enablePathCollapse=!0,typeof t.disableRequestDeduplication=="boolean"?this._enableRequestDeduplication=!t.disableRequestDeduplication:t.hasOwnProperty("_enableRequestDeduplication")?this._enableRequestDeduplication=t._enableRequestDeduplication:this._enableRequestDeduplication=!0,this._useServerPaths=t._useServerPaths||!1,this._allowFromWhenceYouCame=t.allowFromWhenceYouCame||t._allowFromWhenceYouCame||!1,this._treatDataSourceErrorsAsJSONGraphErrors=t._treatDataSourceErrorsAsJSONGraphErrors||!1,t.cache&&this.setCache(t.cache)}xi.prototype.constructor=xi;xi.prototype._materialized=!1;xi.prototype._boxed=!1;xi.prototype._progressive=!1;xi.prototype._treatErrorsAsValues=!1;xi.prototype._maxSize=Math.pow(2,53)-1;xi.prototype._maxRetries=3;xi.prototype._collectRatio=.75;xi.prototype._enablePathCollapse=!0;xi.prototype._enableRequestDeduplication=!0;xi.prototype.get=sRe;xi.prototype._getOptimizedBoundPath=function(){return this._path?this._path.slice():this._path};xi.prototype._getWithPaths=uRe;xi.prototype.set=LRe;xi.prototype.preload=function(){var t=i3e(arguments,s3e,"preload");if(t!==!0)return new jk(function(i){i.onError(t)});var r=Array.prototype.slice.call(arguments),n=this;return new jk(function(i){return n.get.apply(n,r).subscribe(function(){},function(l){i.onError(l)},function(){i.onCompleted()})})};xi.prototype.call=function(){var t,r=-1,n=arguments.length;for(t=new Array(n);++r<n;){var i=arguments[r];t[r]=i;var l=typeof i;if(r>1&&!Array.isArray(i)||r===0&&!Array.isArray(i)&&l!=="string"||r===1&&!Array.isArray(i)&&!QRe(i))return new jk(function(a){a.onError(new Error("Invalid argument"))})}return new KRe(this,t[0],t[1],t[2],t[3])};xi.prototype.invalidate=function(){var t,r=-1,n=arguments.length;for(t=[];++r<n;)if(t[r]=RV.fromPath(arguments[r]),!Array.isArray(t[r])||!t[r].length)throw new Error("Invalid argument");new YRe(this,t).subscribe(a3e,function(i){throw i})};xi.prototype.deref=NRe();xi.prototype._hasValidParentReference=BRe();xi.prototype.getValue=FRe();xi.prototype.setValue=URe();xi.prototype._getValueSync=jRe();xi.prototype._setValueSync=VRe();xi.prototype._derefSync=qRe();xi.prototype.setCache=function(t){var r=this._root.cache;if(t!==r){var n=this._root,i=this._path;this._path=[],this._root.cache={},typeof r<"u"&&OV(n,n.expired,DV(r),0);var l;t3e(t)?l=r3e(this,[t])[0]:e3e(t)?l=iN(this,[t])[0]:JRe(t)&&(l=iN(this,[{json:t}])[0]),l&&fC.getWithPathsAsPathMap(this,l,[]),this._path=i}else typeof r>"u"&&(this._root.cache={});return this};xi.prototype.getCache=function(){var t=Array.prototype.slice.call(arguments);if(t.length===0)return o3e(this._root.cache);var r=[{}],n=this._path;return fC.getWithPathsAsJSONGraph(this,t,r),this._path=n,r[0].jsonGraph};xi.prototype._setMaxSize=function(t){var r=this._maxSize;if(this._maxSize=t,t<r){var n=this._root,i=n.cache,l=i.$_version;OV(n,n.expired,DV(i),this._maxSize,this._collectRatio,l)}};xi.prototype.getVersion=function(t){var r=t&&RV.fromPath(t)||[];if(Array.isArray(r)===!1)throw new Error("Model#getVersion must be called with an Array path.");return this._path.length&&(r=this._path.concat(r)),this._getVersion(this,r)};xi.prototype._syncCheck=function(t){if(this._source&&this._root.syncRefCount<=0&&this._root.unsafeMode===!1)throw new Error("Model#"+t+" may only be called within the context of a request selector.");return!0};xi.prototype._clone=function(t){var r=new this.constructor(this);for(var n in t){var i=t[n];i==="delete"?delete r[n]:r[n]=i}return r.setCache=void 0,r};xi.prototype.batch=function(t){var r;typeof t=="number"?r=new nN(Math.round(Math.abs(t))):!t||!t.schedule?r=new nN(1):r=t;var n=this._clone();return n._request=new VR(n,r),n};xi.prototype.unbatch=function(){var t=this._clone();return t._request=new VR(t,new MV),t};xi.prototype.treatErrorsAsValues=function(){return this._clone({_treatErrorsAsValues:!0})};xi.prototype.asDataSource=function(){return new XRe(this)};xi.prototype._materialize=function(){return this._clone({_materialized:!0})};xi.prototype._dematerialize=function(){return this._clone({_materialized:"delete"})};xi.prototype.boxValues=function(){return this._clone({_boxed:!0})};xi.prototype.unboxValues=function(){return this._clone({_boxed:"delete"})};xi.prototype.withoutDataSource=function(){return this._clone({_source:"delete"})};xi.prototype.toJSON=function(){return{$type:"ref",value:this._path}};xi.prototype.getPath=function(){return this._path?this._path.slice():this._path};xi.prototype._fromWhenceYouCame=function(t){return this._clone({_allowFromWhenceYouCame:t===void 0?!0:t})};xi.prototype._getBoundValue=lv;xi.prototype._getVersion=GRe();xi.prototype._getPathValuesAsPathMap=fC.getWithPathsAsPathMap;xi.prototype._getPathValuesAsJSONG=fC.getWithPathsAsJSONGraph;xi.prototype._setPathValues=oC();xi.prototype._setPathMaps=NR;xi.prototype._setJSONGs=nC;xi.prototype._setCache=NR;xi.prototype._invalidatePathValues=HRe();xi.prototype._invalidatePathMaps=WRe();function hC(e){return new hC.Model(e)}hC.keys=function(t){if(t)return Object.keys(t).filter(function(r){return r!=="$__path"})};var u3e=hC;hC.Model=l3e;var c3e=XMLHttpRequest;const zV=Xs(c3e);function f3e(){return new zV}function h3e(){return new zV}var aN=Object.prototype.hasOwnProperty,oN=function(){};function Vk(){}Vk.create=function(e){var t=new Vk;return t.subscribe=function(r,n,i){var l,a;return typeof r=="function"?l={onNext:r,onError:n||oN,onCompleted:i||oN}:l=r,a=e(l),typeof a=="function"?{dispose:a}:a},t};function BT(e,t,r){return Vk.create(function(i){var l={method:e||"GET",crossDomain:!1,async:!0,headers:{},responseType:"json"},a,s,d,v,S;for(S in t)aN.call(t,S)&&(l[S]=t[S]);!l.crossDomain&&!l.headers["X-Requested-With"]&&(l.headers["X-Requested-With"]="XMLHttpRequest"),r.onBeforeRequest!=null&&r.onBeforeRequest(l);try{a=l.crossDomain?h3e():f3e()}catch(A){i.onError(A)}try{l.user?a.open(l.method,l.url,l.async,l.user,l.password):a.open(l.method,l.url,l.async),a.timeout=l.timeout,a.withCredentials=l.withCredentials!==!1,d=l.headers;for(v in d)aN.call(d,v)&&a.setRequestHeader(v,d[v]);if(l.responseType)try{a.responseType=l.responseType}catch(A){if(l.responseType!=="json")throw A}a.onreadystatechange=function(P){a.readyState===4&&(s||(s=!0,p3e(i,a,P)))},a.ontimeout=function(P){s||(s=!0,d3e(i,a,"timeout error",P))},a.send(l.data)}catch(A){i.onError(A)}return function(){!s&&a.readyState!==4&&(s=!0,a.abort())}})}function P_(e,t,r){r||(r=new Error(t)),e.onError(r)}function p3e(e,t,r){var n,i;if(t&&e){i=t.responseType,n="response"in t?t.response:t.responseText;var l=t.status===1223?204:t.status;if(l>=200&&l<=399){try{i!=="json"&&(n=JSON.parse(n||"")),typeof n=="string"&&(n=JSON.parse(n||""))}catch(a){P_(e,"invalid json",a)}e.onNext(n),e.onCompleted();return}else return l===401||l===403||l===407||l===410||l===408||l===504?P_(e,n):P_(e,n||"Response code "+l)}}function d3e(e,t,r,n){P_(e,r||t.statusText||"request error",n)}function m3e(e,t,r){var n=[],i,l={url:e},a=e.indexOf("?")!==-1,s=a?"&":"?";return typeof r=="string"?n.push(r):(i=Object.keys(r),i.forEach(function(d){var v=typeof r[d]=="object"?JSON.stringify(r[d]):r[d];n.push(d+"="+encodeURIComponent(v))})),t==="GET"?l.url+=s+n.join("&"):l.data=n.join("&"),l}function T_(e,t){var r;for(r in t)e[r]=t[r];return e}function Uy(e,t){if(this._jsongUrl=e,typeof t=="number"){var r={timeout:t};t=r}this._config=T_({timeout:15e3,headers:{}},t||{})}Uy.prototype={constructor:Uy,buildQueryObject:m3e,get:function(t){var r="GET",n=this.buildQueryObject(this._jsongUrl,r,{paths:t,method:"get"}),i=T_(n,this._config),l=this;return BT(r,i,l)},set:function(t){var r="POST",n,i;!this._config.headers||!this._config.headers["Content-Type"]||!this._config.headers["Content-Type"].match(/application\/json/)?(i=this.buildQueryObject(this._jsongUrl,r,{jsonGraph:t,method:"set"}),n=T_(i,this._config),n.headers["Content-Type"]="application/x-www-form-urlencoded"):n=T_({url:this._jsongUrl,data:JSON.stringify({jsonGraph:JSON.stringify(t),method:"set"})},this._config);var l=this;return BT(r,n,l)},call:function(t,r,n,i){r=r||[],n=n||[],i=i||[];var l="POST",a,s=[],d;!this._config.headers||!this._config.headers["Content-Type"]||!this._config.headers["Content-Type"].match(/application\/json/)?(s.push("method=call"),s.push("callPath="+encodeURIComponent(JSON.stringify(t))),s.push("arguments="+encodeURIComponent(JSON.stringify(r))),s.push("pathSuffixes="+encodeURIComponent(JSON.stringify(n))),s.push("paths="+encodeURIComponent(JSON.stringify(i))),d=this.buildQueryObject(this._jsongUrl,l,s.join("&")),a=T_(d,this._config),a.headers["Content-Type"]="application/x-www-form-urlencoded"):a=T_({url:this._jsongUrl,data:JSON.stringify({method:"call",callPath:JSON.stringify(t),arguments:JSON.stringify(r),pathSuffixes:JSON.stringify(n),paths:JSON.stringify(i)})},this._config);var v=this;return BT(l,a,v)}};Uy.XMLHttpSource=Uy;Uy.default=Uy;Promise.map=function(e,t,r={}){let n=r.concurrency||1/0,i=0;const l=[],a=[],s=e[Symbol.iterator]();for(;n-- >0;){const v=d();if(v)a.push(v);else break}return Promise.all(a).then(()=>l);function d(){const v=s.next();if(v.done)return null;const S=i++,A=t(v.value,S);return Promise.resolve(A).then(P=>(l[S]=P,d()))}};class g3e extends Uy{onBeforeRequest(t){if(window&&window.localStorage){const r=window.localStorage.getItem("userToken");r&&(t.headers.Authorization=r)}}}function y3e(){return{}}const v3e=()=>{},_3e=(e,t,r={})=>{const{placeholder:n="replace_me",chunkSize:i=100}=r,l=[];for(let a=0;a<e.length;a+=i)l.push(t.map(s=>s===n?e.slice(a,a+i):s));return l.length?l:[t]},b3e=(e,t={})=>{const{falcor:r,onProgress:n=v3e,concurrency:i=5,...l}=t,a=d7(n,50);let s=0,d=0,v=e.reduce((S,[A,P])=>{const L=_3e(A,P,l);return d+=L.length,S.push(...L),S},[]);return Promise.map(v,S=>r.get(S).then(()=>{a(++s,d)}),{concurrency:i})},LV=e=>e.reduce((t,r)=>(Array.isArray(r)?t[0].push(r):t[1]=r,t),[[],{}]),x3e=(...e)=>{const[t,r]=LV(e),{index:n=null,placeholder:i="replace_me",...l}=r,a=t.reduce((s,d)=>{let v=[],S=!1;const A=d.map((P,L)=>Array.isArray(P)&&P.length&&!S&&(n===null||n===L)?(S=!0,v=P,i):P);return s.push([v,A]),s},[]);return b3e(a,{...l,placeholder:i})};class w3e extends eAe{constructor(...t){super(...t),this.listeners=[],this.onChange=this.onChange.bind(this),this.listen=this.listen.bind(this),this.unlisten=this.unlisten.bind(this)}onChange(){this.listeners.forEach(t=>t())}listen(t){this.listeners.includes(t)||this.listeners.push(t)}unlisten(t){this.listeners=this.listeners.filter(r=>r!==t)}}class S3e extends u3e.Model{constructor(...t){super(...t),this.onChange=this.onChange.bind(this),this.remove=this.remove.bind(this),this.chunk=this.chunk.bind(this)}onChange(t,r){this._root.listen(t,r)}remove(t){this._root.unlisten(t)}get(...t){return super.get(...t).then(r=>r)}chunk(...t){const[r,n]=LV(t);return x3e(...r,{falcor:this,...n})}}const qR=e=>new S3e({_root:new w3e,source:new g3e(e+"/graph",{crossDomain:!0,withCredentials:!1,timeout:12e4}),errorSelector:(t,r)=>(console.log("errorSelector",t,r),r),cache:y3e()});qR("https://graph.availabs.org");const GR=Ee.createContext(),Gl=()=>Ee.useContext(GR);GR.Consumer;const E3e=({falcor:e,children:t})=>{const[r,n]=Ee.useState({}),i=Ee.useMemo(()=>CCe(()=>{const a=e.getCache();n(a)},250),[e]);Ee.useEffect(()=>(e.onChange(i),()=>{e.remove(i)}),[e,i]);const l=Ee.useMemo(()=>({falcor:e,falcorCache:r}),[e,r]);return ae(GR.Provider,{value:l,children:t})},C3e=({user:e})=>Ft("div",{className:"flex justify-column align-middle py-1 px-4",children:[ae("div",{className:"pt-[4px]",children:ae("span",{className:`rounded-full border-2 border-blue-400
                    inline-flex items-center justify-center 
                    h-6 w-6 sm:h-8 sm:w-8 ring-white text-white 
                    bg-blue-500 overflow-hidden`,children:ae("i",{className:"fa-duotone fa-user fa-fw pt-2 text-2xl","aria-hidden":"true"})})}),Ft("span",{className:"pl-2",children:[ae("div",{className:"text-md font-thin tracking-tighter  text-left text-blue-600 group-hover:text-white ",children:e.email?e.email:""}),ae("div",{className:"text-xs font-medium -mt-1 tracking-widest text-left text-gray-500 group-hover:text-gray-200",children:e.groups[0]?e.groups[0]:""})]})]}),qk=(e,t,r,n)=>n===void 0||n?ae(po,{to:e,children:ae("div",{className:"px-6 py-2 bg-blue-500 text-white hover:text-blue-100",children:Ft("div",{className:"hover:translate-x-2 transition duration-100 ease-out hover:ease-in",children:[ae("i",{className:`${t} `}),ae("span",{className:"pl-2",children:r})]})})}):null;Sc(({title:e,shadowed:t=!0,user:r,children:n})=>{const i=Mo();return ae("div",{className:"h-full w-full",children:r.authed?ae(Cj,{control:ae(C3e,{user:r}),className:"hover:bg-blue-500 group ",children:ae("div",{className:"p-1 bg-blue-500",children:ae("div",{className:"py-1 border-t border-blue-400",children:qk("/auth/logout","fad fa-sign-out-alt pb-2 pr-1","Logout")})})}):ae(po,{className:`${i.topnav({}).navitemTop}`,to:"/auth/login",children:"Login"})})});function dp(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function vg(e){return!!e&&!!e[Ss]}function cm(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===D3e}(e)||Array.isArray(e)||!!e[pN]||!!(!((t=e.constructor)===null||t===void 0)&&t[pN])||HR(e)||WR(e))}function jy(e,t,r){r===void 0&&(r=!1),W0(e)===0?(r?Object.keys:n0)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,i){return t(i,n,e)})}function W0(e){var t=e[Ss];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:HR(e)?2:WR(e)?3:0}function r0(e,t){return W0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function P3e(e,t){return W0(e)===2?e.get(t):e[t]}function $V(e,t,r){var n=W0(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function NV(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function HR(e){return O3e&&e instanceof Map}function WR(e){return R3e&&e instanceof Set}function hy(e){return e.o||e.t}function ZR(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=FV(e);delete t[Ss];for(var r=n0(t),n=0;n<r.length;n++){var i=r[n],l=t[i];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(t[i]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function XR(e,t){return t===void 0&&(t=!1),KR(e)||vg(e)||!cm(e)||(W0(e)>1&&(e.set=e.add=e.clear=e.delete=T3e),Object.freeze(e),t&&jy(e,function(r,n){return XR(n,!0)},!0)),e}function T3e(){dp(2)}function KR(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function id(e){var t=Zk[e];return t||dp(18,e),t}function A3e(e,t){Zk[e]||(Zk[e]=t)}function Gk(){return Lx}function FT(e,t){t&&(id("Patches"),e.u=[],e.s=[],e.v=t)}function lS(e){Hk(e),e.p.forEach(k3e),e.p=null}function Hk(e){e===Lx&&(Lx=e.l)}function sN(e){return Lx={p:[],l:Lx,h:e,m:!0,_:0}}function k3e(e){var t=e[Ss];t.i===0||t.i===1?t.j():t.g=!0}function UT(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||id("ES5").S(t,e,n),n?(r[Ss].P&&(lS(t),dp(4)),cm(e)&&(e=uS(t,e),t.l||cS(t,e)),t.u&&id("Patches").M(r[Ss].t,e,t.u,t.s)):e=uS(t,r,[]),lS(t),t.u&&t.v(t.u,t.s),e!==BV?e:void 0}function uS(e,t,r){if(KR(t))return t;var n=t[Ss];if(!n)return jy(t,function(s,d){return lN(e,n,t,s,d,r)},!0),t;if(n.A!==e)return t;if(!n.P)return cS(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=ZR(n.k):n.o,l=i,a=!1;n.i===3&&(l=new Set(i),i.clear(),a=!0),jy(l,function(s,d){return lN(e,n,i,s,d,r,a)}),cS(e,i,!1),r&&e.u&&id("Patches").N(n,r,e.u,e.s)}return n.o}function lN(e,t,r,n,i,l,a){if(vg(i)){var s=uS(e,i,l&&t&&t.i!==3&&!r0(t.R,n)?l.concat(n):void 0);if($V(r,n,s),!vg(s))return;e.m=!1}else a&&r.add(i);if(cm(i)&&!KR(i)){if(!e.h.D&&e._<1)return;uS(e,i),t&&t.A.l||cS(e,i)}}function cS(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&XR(t,r)}function jT(e,t){var r=e[Ss];return(r?hy(r):e)[t]}function uN(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Qm(e){e.P||(e.P=!0,e.l&&Qm(e.l))}function VT(e){e.o||(e.o=ZR(e.t))}function Wk(e,t,r){var n=HR(t)?id("MapSet").F(t,r):WR(t)?id("MapSet").T(t,r):e.O?function(i,l){var a=Array.isArray(i),s={i:a?1:0,A:l?l.A:Gk(),P:!1,I:!1,R:{},l,t:i,k:null,o:null,j:null,C:!1},d=s,v=$x;a&&(d=[s],v=qb);var S=Proxy.revocable(d,v),A=S.revoke,P=S.proxy;return s.k=P,s.j=A,P}(t,r):id("ES5").J(t,r);return(r?r.A:Gk()).p.push(n),n}function I3e(e){return vg(e)||dp(22,e),function t(r){if(!cm(r))return r;var n,i=r[Ss],l=W0(r);if(i){if(!i.P&&(i.i<4||!id("ES5").K(i)))return i.t;i.I=!0,n=cN(r,l),i.I=!1}else n=cN(r,l);return jy(n,function(a,s){i&&P3e(i.t,a)===s||$V(n,a,t(s))}),l===3?new Set(n):n}(e)}function cN(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return ZR(e)}function M3e(){function e(l,a){var s=i[l];return s?s.enumerable=a:i[l]=s={configurable:!0,enumerable:a,get:function(){var d=this[Ss];return $x.get(d,l)},set:function(d){var v=this[Ss];$x.set(v,l,d)}},s}function t(l){for(var a=l.length-1;a>=0;a--){var s=l[a][Ss];if(!s.P)switch(s.i){case 5:n(s)&&Qm(s);break;case 4:r(s)&&Qm(s)}}}function r(l){for(var a=l.t,s=l.k,d=n0(s),v=d.length-1;v>=0;v--){var S=d[v];if(S!==Ss){var A=a[S];if(A===void 0&&!r0(a,S))return!0;var P=s[S],L=P&&P[Ss];if(L?L.t!==A:!NV(P,A))return!0}}var F=!!a[Ss];return d.length!==n0(a).length+(F?0:1)}function n(l){var a=l.k;if(a.length!==l.t.length)return!0;var s=Object.getOwnPropertyDescriptor(a,a.length-1);if(s&&!s.get)return!0;for(var d=0;d<a.length;d++)if(!a.hasOwnProperty(d))return!0;return!1}var i={};A3e("ES5",{J:function(l,a){var s=Array.isArray(l),d=function(S,A){if(S){for(var P=Array(A.length),L=0;L<A.length;L++)Object.defineProperty(P,""+L,e(L,!0));return P}var F=FV(A);delete F[Ss];for(var K=n0(F),re=0;re<K.length;re++){var G=K[re];F[G]=e(G,S||!!F[G].enumerable)}return Object.create(Object.getPrototypeOf(A),F)}(s,l),v={i:s?5:4,A:a?a.A:Gk(),P:!1,I:!1,R:{},l:a,t:l,k:d,o:null,g:!1,C:!1};return Object.defineProperty(d,Ss,{value:v,writable:!0}),d},S:function(l,a,s){s?vg(a)&&a[Ss].A===l&&t(l.p):(l.u&&function d(v){if(v&&typeof v=="object"){var S=v[Ss];if(S){var A=S.t,P=S.k,L=S.R,F=S.i;if(F===4)jy(P,function(B){B!==Ss&&(A[B]!==void 0||r0(A,B)?L[B]||d(P[B]):(L[B]=!0,Qm(S)))}),jy(A,function(B){P[B]!==void 0||r0(P,B)||(L[B]=!1,Qm(S))});else if(F===5){if(n(S)&&(Qm(S),L.length=!0),P.length<A.length)for(var K=P.length;K<A.length;K++)L[K]=!1;else for(var re=A.length;re<P.length;re++)L[re]=!0;for(var G=Math.min(P.length,A.length),H=0;H<G;H++)P.hasOwnProperty(H)||(L[H]=!0),L[H]===void 0&&d(P[H])}}}}(l.p[0]),t(l.p))},K:function(l){return l.i===4?r(l):n(l)}})}var fN,Lx,YR=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",O3e=typeof Map<"u",R3e=typeof Set<"u",hN=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",BV=YR?Symbol.for("immer-nothing"):((fN={})["immer-nothing"]=!0,fN),pN=YR?Symbol.for("immer-draftable"):"__$immer_draftable",Ss=YR?Symbol.for("immer-state"):"__$immer_state",D3e=""+Object.prototype.constructor,n0=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,FV=Object.getOwnPropertyDescriptors||function(e){var t={};return n0(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},Zk={},$x={get:function(e,t){if(t===Ss)return e;var r=hy(e);if(!r0(r,t))return function(i,l,a){var s,d=uN(l,a);return d?"value"in d?d.value:(s=d.get)===null||s===void 0?void 0:s.call(i.k):void 0}(e,r,t);var n=r[t];return e.I||!cm(n)?n:n===jT(e.t,t)?(VT(e),e.o[t]=Wk(e.A.h,n,e)):n},has:function(e,t){return t in hy(e)},ownKeys:function(e){return Reflect.ownKeys(hy(e))},set:function(e,t,r){var n=uN(hy(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var i=jT(hy(e),t),l=i==null?void 0:i[Ss];if(l&&l.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(NV(r,i)&&(r!==void 0||r0(e.t,t)))return!0;VT(e),Qm(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return jT(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,VT(e),Qm(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=hy(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){dp(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){dp(12)}},qb={};jy($x,function(e,t){qb[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),qb.deleteProperty=function(e,t){return qb.set.call(this,e,t,void 0)},qb.set=function(e,t,r){return $x.set.call(this,e[0],t,r,e[0])};var z3e=function(){function e(r){var n=this;this.O=hN,this.D=!0,this.produce=function(i,l,a){if(typeof i=="function"&&typeof l!="function"){var s=l;l=i;var d=n;return function(K){var re=this;K===void 0&&(K=s);for(var G=arguments.length,H=Array(G>1?G-1:0),B=1;B<G;B++)H[B-1]=arguments[B];return d.produce(K,function($){var N;return(N=l).call.apply(N,[re,$].concat(H))})}}var v;if(typeof l!="function"&&dp(6),a!==void 0&&typeof a!="function"&&dp(7),cm(i)){var S=sN(n),A=Wk(n,i,void 0),P=!0;try{v=l(A),P=!1}finally{P?lS(S):Hk(S)}return typeof Promise<"u"&&v instanceof Promise?v.then(function(K){return FT(S,a),UT(K,S)},function(K){throw lS(S),K}):(FT(S,a),UT(v,S))}if(!i||typeof i!="object"){if((v=l(i))===void 0&&(v=i),v===BV&&(v=void 0),n.D&&XR(v,!0),a){var L=[],F=[];id("Patches").M(i,v,L,F),a(L,F)}return v}dp(21,i)},this.produceWithPatches=function(i,l){if(typeof i=="function")return function(v){for(var S=arguments.length,A=Array(S>1?S-1:0),P=1;P<S;P++)A[P-1]=arguments[P];return n.produceWithPatches(v,function(L){return i.apply(void 0,[L].concat(A))})};var a,s,d=n.produce(i,l,function(v,S){a=v,s=S});return typeof Promise<"u"&&d instanceof Promise?d.then(function(v){return[v,a,s]}):[d,a,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){cm(r)||dp(8),vg(r)&&(r=I3e(r));var n=sN(this),i=Wk(this,r,void 0);return i[Ss].C=!0,Hk(n),i},t.finishDraft=function(r,n){var i=r&&r[Ss],l=i.A;return FT(l,n),UT(void 0,l)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!hN&&dp(20),this.O=r},t.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var l=n[i];if(l.path.length===0&&l.op==="replace"){r=l.value;break}}i>-1&&(n=n.slice(i+1));var a=id("Patches").$;return vg(r)?a(r,n):this.produce(r,function(s){return a(s,n)})},e}(),Lf=new z3e,UV=Lf.produce;Lf.produceWithPatches.bind(Lf);Lf.setAutoFreeze.bind(Lf);Lf.setUseProxies.bind(Lf);Lf.applyPatches.bind(Lf);Lf.createDraft.bind(Lf);Lf.finishDraft.bind(Lf);function jV(e){var t=function(n){var i=n.dispatch,l=n.getState;return function(a){return function(s){return typeof s=="function"?s(i,l,e):a(s)}}};return t}var VV=jV();VV.withExtraArgument=jV;const dN=VV;var qV=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),L3e=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,i,l,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(v){return function(S){return d([v,S])}}function d(v){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(l=v[0]&2?i.return:v[0]?i.throw||((l=i.return)&&l.call(i),0):i.next)&&!(l=l.call(i,v[1])).done)return l;switch(i=0,l&&(v=[v[0]&2,l.value]),v[0]){case 0:case 1:l=v;break;case 4:return r.label++,{value:v[1],done:!1};case 5:r.label++,i=v[1],v=[0];continue;case 7:v=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(v[0]===6||v[0]===2)){r=0;continue}if(v[0]===3&&(!l||v[1]>l[0]&&v[1]<l[3])){r.label=v[1];break}if(v[0]===6&&r.label<l[1]){r.label=l[1],l=v;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(v);break}l[2]&&r.ops.pop(),r.trys.pop();continue}v=t.call(e,r)}catch(S){v=[6,S],i=0}finally{n=l=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},v0=globalThis&&globalThis.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},$3e=Object.defineProperty,N3e=Object.defineProperties,B3e=Object.getOwnPropertyDescriptors,mN=Object.getOwnPropertySymbols,F3e=Object.prototype.hasOwnProperty,U3e=Object.prototype.propertyIsEnumerable,gN=function(e,t,r){return t in e?$3e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},fg=function(e,t){for(var r in t||(t={}))F3e.call(t,r)&&gN(e,r,t[r]);if(mN)for(var n=0,i=mN(t);n<i.length;n++){var r=i[n];U3e.call(t,r)&&gN(e,r,t[r])}return e},qT=function(e,t){return N3e(e,B3e(t))},j3e=function(e,t,r){return new Promise(function(n,i){var l=function(d){try{s(r.next(d))}catch(v){i(v)}},a=function(d){try{s(r.throw(d))}catch(v){i(v)}},s=function(d){return d.done?n(d.value):Promise.resolve(d.value).then(l,a)};s((r=r.apply(e,t)).next())})},V3e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?rS:rS.apply(null,arguments)};function q3e(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}var G3e=function(e){qV(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=e.apply(this,r)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,v0([void 0],r[0].concat(this)))):new(t.bind.apply(t,v0([void 0],r.concat(this))))},t}(Array),H3e=function(e){qV(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=e.apply(this,r)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,v0([void 0],r[0].concat(this)))):new(t.bind.apply(t,v0([void 0],r.concat(this))))},t}(Array);function Xk(e){return cm(e)?UV(e,function(){}):e}function W3e(e){return typeof e=="boolean"}function Z3e(){return function(t){return X3e(t)}}function X3e(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck;var n=new G3e;return r&&(W3e(r)?n.push(dN):n.push(dN.withExtraArgument(r.extraArgument))),n}var K3e=!0;function Y3e(e){var t=Z3e(),r=e||{},n=r.reducer,i=n===void 0?void 0:n,l=r.middleware,a=l===void 0?t():l,s=r.devTools,d=s===void 0?!0:s,v=r.preloadedState,S=v===void 0?void 0:v,A=r.enhancers,P=A===void 0?void 0:A,L;if(typeof i=="function")L=i;else if(q3e(i))L=nTe(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var F=a;typeof F=="function"&&(F=F(t));var K=iTe.apply(void 0,F),re=rS;d&&(re=V3e(fg({trace:!K3e},typeof d=="object"&&d)));var G=new H3e(K),H=G;Array.isArray(P)?H=v0([K],P):typeof P=="function"&&(H=P(G));var B=re.apply(void 0,H);return _7(L,S,B)}function hg(e,t){function r(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(t){var l=t.apply(void 0,n);if(!l)throw new Error("prepareAction did not return an object");return fg(fg({type:e,payload:l.payload},"meta"in l&&{meta:l.meta}),"error"in l&&{error:l.error})}return{type:e,payload:n[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(n){return n.type===e},r}function GV(e){var t={},r=[],n,i={addCase:function(l,a){var s=typeof l=="string"?l:l.type;if(s in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[s]=a,i},addMatcher:function(l,a){return r.push({matcher:l,reducer:a}),i},addDefaultCase:function(l){return n=l,i}};return e(i),[t,r,n]}function J3e(e){return typeof e=="function"}function Q3e(e,t,r,n){r===void 0&&(r=[]);var i=typeof t=="function"?GV(t):[t,r,n],l=i[0],a=i[1],s=i[2],d;if(J3e(e))d=function(){return Xk(e())};else{var v=Xk(e);d=function(){return v}}function S(A,P){A===void 0&&(A=d());var L=v0([l[P.type]],a.filter(function(F){var K=F.matcher;return K(P)}).map(function(F){var K=F.reducer;return K}));return L.filter(function(F){return!!F}).length===0&&(L=[s]),L.reduce(function(F,K){if(K)if(vg(F)){var re=F,G=K(re,P);return G===void 0?F:G}else{if(cm(F))return UV(F,function(H){return K(H,P)});var G=K(F,P);if(G===void 0){if(F===null)return F;throw Error("A case reducer on a non-draftable value must not return undefined")}return G}return F},A)}return S.getInitialState=d,S}function e5e(e,t){return e+"/"+t}function t5e(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var r=typeof e.initialState=="function"?e.initialState:Xk(e.initialState),n=e.reducers||{},i=Object.keys(n),l={},a={},s={};i.forEach(function(S){var A=n[S],P=e5e(t,S),L,F;"reducer"in A?(L=A.reducer,F=A.prepare):L=A,l[S]=L,a[P]=L,s[S]=F?hg(P,F):hg(P)});function d(){var S=typeof e.extraReducers=="function"?GV(e.extraReducers):[e.extraReducers],A=S[0],P=A===void 0?{}:A,L=S[1],F=L===void 0?[]:L,K=S[2],re=K===void 0?void 0:K,G=fg(fg({},P),a);return Q3e(r,function(H){for(var B in G)H.addCase(B,G[B]);for(var $=0,N=F;$<N.length;$++){var z=N[$];H.addMatcher(z.matcher,z.reducer)}re&&H.addDefaultCase(re)})}var v;return{name:t,reducer:function(S,A){return v||(v=d()),v(S,A)},actions:s,caseReducers:l,getInitialState:function(){return v||(v=d()),v.getInitialState()}}}var r5e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",n5e=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=r5e[Math.random()*64|0];return t},i5e=["name","message","stack","code"],GT=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),yN=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),a5e=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,n=i5e;r<n.length;r++){var i=n[r];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,r,n){var i=hg(t+"/fulfilled",function(v,S,A,P){return{payload:v,meta:qT(fg({},P||{}),{arg:A,requestId:S,requestStatus:"fulfilled"})}}),l=hg(t+"/pending",function(v,S,A){return{payload:void 0,meta:qT(fg({},A||{}),{arg:S,requestId:v,requestStatus:"pending"})}}),a=hg(t+"/rejected",function(v,S,A,P,L){return{payload:P,error:(n&&n.serializeError||a5e)(v||"Rejected"),meta:qT(fg({},L||{}),{arg:A,requestId:S,rejectedWithValue:!!P,requestStatus:"rejected",aborted:(v==null?void 0:v.name)==="AbortError",condition:(v==null?void 0:v.name)==="ConditionError"})}}),s=typeof AbortController<"u"?AbortController:function(){function v(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return v.prototype.abort=function(){},v}();function d(v){return function(S,A,P){var L=n!=null&&n.idGenerator?n.idGenerator(v):n5e(),F=new s,K;function re(H){K=H,F.abort()}var G=function(){return j3e(this,null,function(){var H,B,$,N,z,X,te;return L3e(this,function(pe){switch(pe.label){case 0:return pe.trys.push([0,4,,5]),N=(H=n==null?void 0:n.condition)==null?void 0:H.call(n,v,{getState:A,extra:P}),s5e(N)?[4,N]:[3,2];case 1:N=pe.sent(),pe.label=2;case 2:if(N===!1||F.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return z=new Promise(function(ke,Pe){return F.signal.addEventListener("abort",function(){return Pe({name:"AbortError",message:K||"Aborted"})})}),S(l(L,v,(B=n==null?void 0:n.getPendingMeta)==null?void 0:B.call(n,{requestId:L,arg:v},{getState:A,extra:P}))),[4,Promise.race([z,Promise.resolve(r(v,{dispatch:S,getState:A,extra:P,requestId:L,signal:F.signal,abort:re,rejectWithValue:function(ke,Pe){return new GT(ke,Pe)},fulfillWithValue:function(ke,Pe){return new yN(ke,Pe)}})).then(function(ke){if(ke instanceof GT)throw ke;return ke instanceof yN?i(ke.payload,L,v,ke.meta):i(ke,L,v)})])];case 3:return $=pe.sent(),[3,5];case 4:return X=pe.sent(),$=X instanceof GT?a(null,L,v,X.payload,X.meta):a(X,L,v),[3,5];case 5:return te=n&&!n.dispatchConditionRejection&&a.match($)&&$.meta.condition,te||S($),[2,$]}})})}();return Object.assign(G,{abort:re,requestId:L,arg:v,unwrap:function(){return G.then(o5e)}})}}return Object.assign(d,{pending:l,rejected:a,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function o5e(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function s5e(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var JR="listenerMiddleware";hg(JR+"/add");hg(JR+"/removeAll");hg(JR+"/remove");var vN;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof{}<"u"?{}:globalThis);M3e();const QR="data_manager",HV="pan",WV={pgEnv:`redux.${QR}.pgEnv`},l5e=localStorage.getItem(WV.pgEnv)||HV,ZV=t5e({name:QR,initialState:{pgEnv:l5e},reducers:{setPgEnv:(e,t)=>{localStorage.setItem(WV.pgEnv,t.payload),e.pgEnv=t.payload}}}),{actions:{setPgEnv:XV}}=ZV,u5e=e=>{const{user:t}=e;return t&&Array.isArray(t.groups)&&t.groups.includes("AVAIL")},Ks=e=>Qt(e,[QR,"pgEnv"],HV),c5e=()=>["dama-info","pgEnvs"],f5e=ZV.reducer,Nx={source_id:"source_id",name:"name",display_name:"display_name",type:"type",update_interval:"update_interval",category:"category",categories:"categories",description:"description",statistics:"statistics",metadata:"metadata"},e3={view_id:"view_id",source_id:"source_id",data_type:"data_type",interval_version:"interval_version",geography_version:"geography_version",version:"version",source_url:"source_url",publisher:"publisher",table_schema:"table_schema",table_name:"table_name",data_table:"data_table",download_url:"download_url",tiles_url:"tiles_url",start_date:"start_date",end_date:"end_date",last_updated:"last_updated",statistics:"statistics",metadata:"metadata",user_id:"user_id",etl_context_id:"etl_context_id",view_dependencies:"view_dependencies",_created_timestamp:"_created_timestamp",_modified_timestamp:"_modified_timestamp"},fS=e=>Object.entries(e).reduce((t,r)=>{const[n,i]=r;return typeof i.value<"u"?t[n]=i.value:t[n]=i,t},{});function h5e({baseUrl:e="/datasources"}){const{sourceId:t,page:r,cat1:n,cat2:i}=rc(),{falcor:l,falcorCache:a}=Gl(),s=Ps(Ks);Fe.useEffect(()=>{async function v(){return t?await l.get(["dama",s,"sources","byId",t,"attributes",["categories","name","data_type"]]):Promise.resolve({})}v()},[l,t,s]);const d=Fe.useMemo(()=>{let v=fS(Qt(a,["dama",s,"sources","byId",t],{attributes:{}}).attributes),S=Qt(v,"categories[0]",!1)||[n,i].filter(P=>P),A=typeof S!="object"?[]:S.map((P,L)=>({name:P,href:`${e}/cat/${L>0?S[L-1]+"/":""}${P}`}));return A.push({name:v.name}),A},[a,t,s,n,i,e]);return ae("nav",{className:"border-b border-gray-200 flex ","aria-label":"Breadcrumb",children:Ft("ol",{className:"max-w-screen-xl w-full mx-auto px-4 flex space-x-4 sm:px-6 lg:px-8",children:[ae("li",{className:"flex",children:ae("div",{className:"flex items-center",children:Ft(po,{to:`${e}`,className:"hover:text-[#bbd4cb] text-[#679d89]",children:[ae("i",{className:"fad fa-database flex-shrink-0 h-5 w-5","aria-hidden":"true"}),ae("span",{className:"sr-only",children:"Data Sources"})]})})}),d.map((v,S)=>ae("li",{className:"flex",children:Ft("div",{className:"flex items-center",children:[ae("svg",{className:"flex-shrink-0 w-6 h-full text-gray-300",viewBox:"0 0 30 44",preserveAspectRatio:"none",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:ae("path",{d:"M.293 0l22 22-22 22h1.414l22-22-22-22H.293z"})}),v.href?ae(po,{to:v.href,className:"ml-4 text-sm font-medium text-gray-500 hover:text-gray-700","aria-current":v.current?"page":void 0,children:v.name}):ae("div",{className:"ml-4 text-sm font-medium text-gray-500 hover:text-gray-700","aria-current":v.current?"page":void 0,children:v.name})]})},S))]})})}const pC=({children:e,baseUrl:t="/datasources"})=>Ft("div",{className:"max-w-6xl mx-auto",children:[ae("div",{className:"",children:ae(h5e,{baseUrl:t})}),ae("div",{className:"flex",children:ae("div",{className:"flex-1 ",children:e})})]}),p5e=Sc(({user:e,baseUrl:t="/datasources"})=>{const r=Ps(Ks);return ae("div",{className:"pt-[2px]",children:e.authLevel>=5?ae("div",{className:" h-full",children:ae(Cj,{control:Ft("div",{className:"px-2 flex text-lg",children:[ae("div",{className:" font-medium text-gray-800",children:" Data Manager"}),ae("div",{className:"fal fa-angle-down px-3 mt-[6px] "}),ae("div",{style:{color:"red",paddingLeft:"15px",fontWeight:"bold"},children:r})]}),className:"text-gray-800 group",openType:"click",children:Ft("div",{className:"p-1 bg-blue-500 text-base",children:[ae("div",{className:"py-1 ",children:qk(`${t}/create/source`,"fa fa-file-plus flex-shrink-0  pr-1","Add New Datasource")}),ae("div",{className:"py-1 ",children:qk(`${t}/settings`,"fa fa-cog flex-shrink-0  pr-1","Datamanager Settings")})]})})}):ae("div",{})})}),d5e=({source:e,baseUrl:t="/datasources"})=>{const{falcor:r,falcorCache:n}=Gl(),i=Ps(Ks);return Fe.useEffect(()=>{async function l(){const a=["dama",i,"sources","byId",e.source_id,"views","length"],s=await r.get(a);await r.get(["dama",i,"sources","byId",e.source_id,"views","byIndex",{from:0,to:Qt(s.json,a,0)-1},"attributes",Object.values(e3)])}l()},[r,n,e,i]),ae("div",{className:"w-full p-4 bg-white my-1 hover:bg-blue-50 block border shadow flex justify-between",children:Ft("div",{children:[ae(po,{to:`${t}/source/${e.source_id}`,className:"text-xl font-medium w-full block",children:ae("span",{children:e.display_name||e.name})}),ae("div",{children:(Qt(e,"categories",[])||[]).map(l=>l.map((a,s)=>ae(po,{to:`${t}/cat/${s>0?l[s-1]+"/":""}${a}`,className:"text-xs p-1 px-2 bg-blue-200 text-blue-600 mr-2",children:a},s)))}),ae(po,{to:`${t}/source/${e.source_id}`,className:"py-2 block",children:e.description})]})})},m5e=({baseUrl:e="/datasources"})=>{const{falcor:t,falcorCache:r}=Gl(),[n,i]=Fe.useState(""),{cat1:l,cat2:a}=rc(),s=Ps(Ks);Fe.useEffect(()=>{async function v(){const S=["dama",s,"sources","length"],A=await t.get(S);console.log(A),await t.get(["dama",s,"sources","byIndex",{from:0,to:Qt(A.json,S,0)-1},"attributes",Object.values(Nx)])}v()},[t,s]);const d=Fe.useMemo(()=>Object.values(Qt(r,["dama",s,"sources","byIndex"],{})).map(v=>fS(Qt(r,v.value,{attributes:{}}).attributes)),[r,s]);return Ft(pC,{baseUrl:e,children:[ae("div",{className:"py-4",children:ae("div",{children:ae("input",{className:"w-full text-lg p-2 border border-gray-300 ",placeholder:"Search datasources",value:n,onChange:v=>i(v.target.value)})})}),d.filter(v=>{let S=!0;return l&&(S=!1,(Qt(v,"categories",[])||[]).forEach(A=>{A[0]===l&&(!a||A[1]===a)&&(S=!0)})),S}).filter(v=>{let S=v.display_name+" "+Qt(v,"categories[0]",[]).join(" ");return!n.length>2||S.toLowerCase().includes(n.toLowerCase())}).map((v,S)=>ae(d5e,{source:v,baseUrl:e},S))]})},_N=({startValue:e,attr:t,sourceId:r,cancel:n=()=>{}})=>{const{falcor:i}=Gl(),[l,a]=Fe.useState(""),s=Ps(Ks);console.log("useParams",rc()),Fe.useEffect(()=>{a(e)},[e]);const d=(v,S)=>{r&&i.set({paths:[["dama",s,"sources","byId",r,"attributes",v]],jsonGraph:{dama:{[s]:{sources:{byId:{[r]:{attributes:{[v]:S}}}}}}}}).then(A=>{console.log("set run",A),n()})};return Ft("div",{className:"w-full flex",children:[ae(R0,{className:"flex-1 px-2 shadow bg-blue-100 focus:ring-blue-700 focus:border-blue-500  border-gray-300 rounded-none rounded-l-md",value:l,onChange:v=>a(v)}),ae(bh,{themeOptions:{size:"sm",color:"primary"},onClick:v=>d(t,l),children:" Save "}),ae(bh,{themeOptions:{size:"sm",color:"cancel"},onClick:v=>n(),children:" Cancel "})]})},g5e=Sc(({source:e,views:t,user:r,baseUrl:n="/datasources"})=>{const[i,l]=Ee.useState(null);return Ft("div",{className:"overflow-hidden",children:[Ft("div",{className:"pl-4 py-6 hover:py-6 sm:pl-6 flex justify-between group",children:[ae("div",{className:"flex-1 mt-1 max-w-2xl text-sm text-gray-500",children:i==="description"?ae(_N,{startValue:Qt(e,"description",""),attr:"description",sourceId:e==null?void 0:e.source_id,cancel:()=>l(null)}):Qt(e,"description",!1)||"No Description"}),r.authLevel>5?ae("div",{className:"hidden group-hover:block text-blue-500 cursor-pointer",onClick:a=>l("description"),children:ae("i",{className:"fad fa-pencil absolute -ml-12  p-2 hover:bg-blue-500 rounded focus:bg-blue-700 hover:text-white "})}):""]}),ae("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-0",children:ae("dl",{className:"sm:divide-y sm:divide-gray-200",children:Object.keys(Nx).filter(a=>!["source_id","metadata","description","statistics","category","display_name"].includes(a)).map((a,s)=>{let d=typeof e[a]=="object"?JSON.stringify(e[a]):e[a];return Ft("div",{className:"flex justify-between group",children:[Ft("div",{className:"flex-1 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[ae("dt",{className:"text-sm font-medium text-gray-500 py-5",children:a}),ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:i===a?ae("div",{className:"pt-3 pr-8",children:ae(_N,{startValue:d,attr:a,sourceId:e.source_id,cancel:()=>l(null)})}):ae("div",{className:"py-5 px-2",children:d})})]}),r.authLevel>5?ae("div",{className:"hidden group-hover:block text-blue-500 cursor-pointer",onClick:v=>l(i===a?null:a),children:ae("i",{className:"fad fa-pencil absolute -ml-12 mt-3 p-2.5 rounded hover:bg-blue-500 hover:text-white "})}):""]},s)})})})]})}),y5e="NPMRDS";let KV="https://tig22.nymtc.org/graph/",v5e="https://availauth.availabs.org",_5e="tig22.nymtc.org",t3="https://tig22.nymtc.org/dama";async function r3(e){if(!e.ok){let t=e.statusText;try{const{message:r}=await e.json();t=r}catch(r){console.error(r)}throw new Error(t)}}function n3(e){return`${t3}/dama-admin/${e}`}const b5e=async(e,t)=>{const r=new URL(`${e}/makeAuthoritativeDamaView`),n=await fetch(r,{method:"POST",body:JSON.stringify({view_id:t}),headers:{"Content-Type":"application/json"}});return await r3(n),await n.json()},x5e=async(e,t)=>{const r=new URL(`${e}/deleteDamaSource`),n=await fetch(r,{method:"POST",body:JSON.stringify({source_id:t}),headers:{"Content-Type":"application/json"}});return await r3(n),await n.json()},w5e=async(e,t)=>{const r=new URL(`${e}/deleteDamaView`),n=await fetch(r,{method:"POST",body:JSON.stringify({view_id:t}),headers:{"Content-Type":"application/json"}});return await r3(n),await n.json()},bN=e=>{const t={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return e?new Date(e).toLocaleDateString(void 0,t):""};async function S5e({falcor:e,pgEnv:t,viewId:r}){const n=await e.get(["dama",t,"viewDependencySubgraphs","byViewId",r]),i=await e.get(["dama",t,"views","byId",r,"dependents"]),l=[],a=[];Qt(n,["json","dama",t,"viewDependencySubgraphs","byViewId",r,"dependencies"],[]).forEach(s=>{l.push(s.source_id),a.push(s.view_id)}),Qt(i,["json","dama",t,"views","byId",r,"dependents"],[]).forEach(s=>{l.push(s.source_id),a.push(s.view_id)}),await e.get(["dama",t,"sources","byId",l,"attributes",["type","name"]]),await e.get(["dama",t,"views","byId",a,"attributes",["version","metadata","_modified_timestamp","last_updated"]])}const E5e=({dependencies:e={},viewId:t,srcMeta:r,viewMeta:n,baseUrl:i})=>{const l=Qt(e.dependencies.find(a=>a.view_id.toString()===t.toString()),"view_dependencies")||[];return Ft("div",{className:"w-full p-4 bg-white shadow mb-4",children:[ae("label",{className:"text-lg",children:"Dependencies"}),ae("div",{className:"py-4 sm:py-2 mt-2 sm:grid sm:grid-cols-5 sm:gap-4 sm:px-6 border-b-2",children:["Source Name","Type","Version","Last Updated"].map(a=>ae("dt",{className:"text-sm font-medium text-gray-600",children:a},a))}),ae("dl",{className:"sm:divide-y sm:divide-gray-200",children:e.dependencies.filter(a=>l.includes(a.view_id)).map((a,s)=>Ft("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-5 sm:gap-4 sm:px-6",children:[ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 align-middle",children:ae(po,{to:`${i}/source/${a.source_id}/overview`,children:Qt(r,[a.source_id,"attributes","name"])})},`${s}_1`),ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 align-middle",children:ae(po,{to:`${i}/source/${a.source_id}/overview`,children:Qt(r,[a.source_id,"attributes","type"])})},`${s}_2`),ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 align-middle",children:ae(po,{to:`${i}/source/${a.source_id}/versions/${a.view_id}`,children:Qt(n,[a.view_id,"attributes","version"])})},`${s}_3`),ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 align-middle",children:ae(po,{to:`${i}/source/${a.source_id}/versions/${a.view_id}`,children:typeof Qt(n,[a.view_id,"attributes","_modified_timestamp","value"])=="object"?"":Qt(n,[a.view_id,"attributes","_modified_timestamp","value"])})},`${s}_4`),ae("dd",{className:"mt-1 text-sm text-red-400 sm:mt-0",children:Ft("span",{className:"float-right italic",children:[" ",Qt(n,[a.view_id,"attributes","metadata","value","authoritative"])==="true"?"":"outdated"]})},`${s}_5`)]},`${s}_0`))})]})},C5e=({dependents:e=[],viewId:t,srcMeta:r,viewMeta:n,baseUrl:i})=>Ft("div",{className:"w-full p-4 bg-white shadow mb-4",children:[ae("label",{className:"text-lg",children:"Dependents"}),ae("div",{className:"py-4 sm:py-2 mt-2 sm:grid sm:grid-cols-5 sm:gap-4 sm:px-6 border-b-2",children:["Source Name","Type","Version","Last Updated"].map(l=>ae("dt",{className:"text-sm font-medium text-gray-600",children:l},l))}),ae("dl",{className:"sm:divide-y sm:divide-gray-200",children:e.map((l,a)=>Ft("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-5 sm:gap-4 sm:px-6",children:[ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 align-middle",children:ae(po,{to:`${i}/source/${l.source_id}/overview`,children:Qt(r,[l.source_id,"attributes","name"])})},`${a}_1`),ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 align-middle",children:ae(po,{to:`${i}/source/${l.source_id}/overview`,children:Qt(r,[l.source_id,"attributes","type"])})},`${a}_2`),ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 align-middle",children:ae(po,{to:`${i}/source/${l.source_id}/versions/${l.view_id}`,children:Qt(n,[l.view_id,"attributes","version"])})},`${a}_3`),ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 align-middle",children:ae(po,{to:`${i}/source/${l.source_id}/versions/${l.view_id}`,children:typeof Qt(n,[l.view_id,"attributes","_modified_timestamp","value"])=="object"?"":Qt(n,[l.view_id,"attributes","_modified_timestamp","value"])})},`${a}_4`),ae("dd",{className:"mt-1 text-sm text-red-400 sm:mt-0",children:Ft("span",{className:"float-right italic",children:[" ",Qt(n,[l.view_id,"attributes","metadata","value","authoritative"])==="true"?"":"outdated"]})},`${a}_5`)]},`${a}_0`))})]}),P5e=({startValue:e,attr:t,viewId:r,cancel:n=()=>{}})=>{const{falcor:i}=Gl(),[l,a]=Fe.useState(""),s=Ps(Ks);Fe.useEffect(()=>{a(e)},[e]);const d=(v,S)=>{r&&i.set({paths:[["dama",s,"views","byId",r,"attributes",v]],jsonGraph:{dama:{[s]:{views:{byId:{[r]:{attributes:{[v]:S}}}}}}}}).then(A=>{console.log("set run",A),n()})};return Ft("div",{className:"w-full flex",children:[ae(R0,{className:"flex-1 px-2 shadow bg-blue-100 focus:ring-blue-700 focus:border-blue-500  border-gray-300 rounded-none rounded-l-md",value:l,onChange:v=>a(v)}),ae(bh,{themeOptions:{size:"sm",color:"primary"},onClick:v=>d(t,l),children:" Save "}),ae(bh,{themeOptions:{size:"sm",color:"cancel"},onClick:v=>n(),children:" Cancel "})]})},T5e=Sc(({view:e,user:t,baseUrl:r="/datasources"})=>{const[n,i]=Ee.useState(null);return ae("div",{className:"overflow-hidden",children:ae("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-0",children:ae("dl",{className:"sm:divide-y sm:divide-gray-200",children:Object.keys(e3).filter(l=>!["view_id","source_id","description","statistics","category"].includes(l)).map((l,a)=>{let s=typeof e[l]=="object"?JSON.stringify(e[l].value):e[l];return Ft("div",{className:"flex justify-between group",children:[Ft("div",{className:"flex-1 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[ae("dt",{className:"text-sm font-medium text-gray-500 py-5",children:l}),ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:n===l?ae("div",{className:"pt-3 pr-8",children:ae(P5e,{startValue:s,attr:l,viewId:e.view_id,cancel:()=>i(null)})}):ae("div",{className:"py-5 px-2",children:s})})]}),t.authLevel>5?ae("div",{className:"hidden group-hover:block text-blue-500 cursor-pointer",onClick:d=>i(n===l?null:l),children:ae("i",{className:"fad fa-pencil absolute -ml-12 mt-3 p-2.5 rounded hover:bg-blue-500 hover:text-white "})}):""]},a)})})})})});function A5e({baseUrl:e}){const{falcor:t,falcorCache:r}=Gl(),{viewId:n}=rc(),i=Ps(Ks);Fe.useEffect(()=>{S5e({falcor:t,pgEnv:i,viewId:n})},[n,i,t]);const l=Qt(r,["dama",i,"viewDependencySubgraphs","byViewId",n,"value"],{dependencies:[]}),a=Qt(r,["dama",i,"views","byId",n,"dependents","value"],[]),s=Qt(r,["dama",i,"sources","byId"],{}),d=Qt(r,["dama",i,"views","byId"],{}),v=Qt(r,["dama",i,"views","byId",n,"attributes"],{});return Ft("div",{children:[ae("div",{className:"text-xl font-medium overflow-hidden p-2 border-b ",children:n}),ae(T5e,{view:v,baseUrl:e}),ae(E5e,{viewId:n,dependencies:l,srcMeta:s,viewMeta:d,baseUrl:e}),ae(C5e,{viewId:n,dependents:a,srcMeta:s,viewMeta:d,baseUrl:e})]})}async function k5e({falcor:e,pgEnv:t,viewId:r}){const n=await e.get(["dama",t,"views","byId",r,"dependents"],["dama",t,"views","byId",r,"attributes","source_id"]),i=[],l=[];Qt(n,["json","dama",t,"views","byId",r,"dependents"]).forEach(s=>{i.push(s.source_id),l.push(s.view_id)}),await e.get(["dama",t,"sources","byId",i,"attributes",["type","name"]]),await e.get(["dama",t,"views","byId",l,"attributes",["version","metadata","_modified_timestamp","last_updated"]]);const a=e.getCache();return{dependents:Qt(a,["dama",t,"views","byId",r,"dependents","value"],[]),sourceId:Qt(n,["json","dama",t,"views","byId",r,"attributes","source_id"],[]),srcMeta:Qt(a,["dama",t,"sources","byId"],{}),viewMeta:Qt(a,["dama",t,"views","byId"],{})}}const YV=({text:e,viewId:t,sourceId:r,pgEnv:n,baseUrl:i,falcor:l})=>{const a=Yc();return ae("button",{className:"bg-red-50 hover:bg-red-400 hover:text-white p-2",onClick:async()=>{await w5e(n3(n),t),await l.invalidate(["dama",n,"sources","byId",r,"views","length"]),a(`${i}/source/${r}/versions`)},children:e})},I5e=({dependents:e,viewId:t,srcMeta:r,viewMeta:n})=>Ft("div",{className:"w-full p-4 shadow mb-4",children:[ae("label",{className:"text-lg",children:"Dependents"}),ae("div",{className:"py-4 sm:py-2 mt-2 sm:grid sm:grid-cols-5 sm:gap-20 sm:px-6 border-b-2",children:["Source Name","Type","Version","Last Updated"].map(i=>ae("dt",{className:"text-sm font-medium text-gray-600",children:i},i))}),ae("dl",{className:"sm:divide-y sm:divide-gray-200",children:e.map((i,l)=>Ft("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-5 sm:gap-20 sm:px-6",children:[ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 align-middle",children:ae(po,{to:`/source/${i.source_id}/overview`,children:Qt(r,[i.source_id,"attributes","name"])})},`${l}_1`),ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 align-middle",children:ae(po,{to:`/source/${i.source_id}/overview`,children:Qt(r,[i.source_id,"attributes","type"])})},`${l}_2`),ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 align-middle",children:ae(po,{to:`/source/${i.source_id}/views/${i.view_id}`,children:Qt(n,[i.view_id,"attributes","version"])})},`${l}_3`),ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 align-middle",children:ae(po,{to:`/source/${i.source_id}/views/${i.view_id}`,children:typeof Qt(n,[i.view_id,"attributes","_modified_timestamp","value"])=="object"?"":Qt(n,[i.view_id,"attributes","_modified_timestamp","value"])})},`${l}_4`),ae("dd",{className:"mt-1 text-sm text-red-400 sm:mt-0",children:Ft("span",{className:"float-right italic",children:[" ",Qt(n,[i.view_id,"attributes","metadata","value","authoritative"])==="true"?"":"outdated"]})},`${l}_5`)]},`${l}_0`))})]}),M5e=(e,t,r,n,i,l,a,s)=>Ft(Pu,{children:[Ft("div",{className:"pb-4 flex justify-between",children:[ae("label",{children:"The View has following dependents:"}),ae(YV,{text:"Delete anyway",viewId:r,sourceId:t,pgEnv:l,baseUrl:a,falcor:s})]}),ae("div",{className:"bg-red-50",children:ae(I5e,{viewId:r,srcMeta:n,viewMeta:i,dependents:e})})]}),O5e=(e,t,r,n,i)=>Ft("div",{className:"pb-4 flex justify-between",children:[ae("label",{children:"No dependents found."}),ae(YV,{text:"Confirm Delete",viewId:e,sourceId:t,pgEnv:r,baseUrl:n,falcor:i})]});function R5e({baseUrl:e}){const{falcor:t,falcorCache:r}=Gl(),{sourceId:n,viewId:i}=rc(),l=Ps(Ks);Fe.useEffect(()=>{k5e({falcor:t,pgEnv:l,viewId:i})},[i,l,t]);const a=Qt(r,["dama",l,"views","byId",i,"dependents","value"],[]),s=Qt(r,["dama",l,"sources","byId"],{}),d=Qt(r,["dama",l,"views","byId"],{});return Ft("div",{className:"w-full p-4 bg-white my-1 block border shadow",children:[Ft("div",{className:"pb-4 font-bold",children:["Delete ",ae("i",{children:i})]}),a.length?M5e(a,n,i,s,d,l,e,t):O5e(i,n,l,e,t)]})}const D5e=({viewId:e,meta:t,pgEnv:r})=>ae("button",{className:`${Qt(t,"authoritative")==="true"?"cursor-not-allowed bg-blue-100":"bg-blue-50 hover:bg-blue-400 hover:text-white"} p-2`,disabled:Qt(t,"authoritative")==="true",onClick:async()=>{await b5e(n3(r),e)},children:Qt(t,"authoritative")==="true"?ae("i",{className:"fad fa-gavel"}):ae("i",{class:"fa-regular fa-gavel"})}),z5e=({viewId:e,sourceId:t,meta:r,navigate:n,baseUrl:i})=>ae("button",{disabled:Qt(r,"authoritative")==="true",className:`bg-red-50 p-2 ${Qt(r,"authoritative")==="true"?"cursor-not-allowed":"hover:bg-red-400 hover:text-white"}`,onClick:()=>n(`${i}/source/${t}/versions/${e}/delete`),children:ae("i",{className:"fad fa-trash"})}),L5e=Sc(({source:e,views:t,user:r,baseUrl:n,meta:i})=>{const l=Ps(Ks),a=Yc(),{sourceId:s,viewId:d,vPage:v}=rc();return v==="delete"?ae(R5e,{baseUrl:n}):d?ae(A5e,{baseUrl:n}):ae("div",{className:"",children:ae(y7,{data:t,columns:[{Header:"Version Id",accessor:S=>Ft(po,{to:`${n}/source/${s}/versions/${S.view_id}`,children:[" ",S.view_id," "]}),align:"left"},{Header:"Version",accessor:"version"},{Header:"User",accessor:"user_id"},{Header:"Updated",accessor:S=>bN(S._modified_timestamp)},{Header:"Created",accessor:S=>bN(S._created_timestamp)},{Header:"Make Authoritative",accessor:S=>ae(D5e,{viewId:S.view_id,meta:S.metadata,pgEnv:l}),disableFilters:!0},{Header:" ",accessor:S=>ae(z5e,{viewId:S.view_id,sourceId:S.source_id,meta:S.metadata,navigate:a,baseUrl:n}),disableFilters:!0}]})})}),Ob={overview:{name:"Overview",path:"",component:g5e},versions:{name:"Versions",path:"/versions",component:L5e}};var JV={exports:{}};(function(e,t){(function({},r){e.exports=r()})(_S,function(){var r,n,i;function l(a,s){if(!r)r=s;else if(!n)n=s;else{var d="var sharedChunk = {}; ("+r+")(sharedChunk); ("+n+")(sharedChunk);",v={};r(v),i=s(v),typeof window<"u"&&(i.workerUrl=window.URL.createObjectURL(new Blob([d],{type:"text/javascript"})))}}return l(["exports"],function(a){function s(o,h){return o(h={exports:{}},h.exports),h.exports}var d=v;function v(o,h,m,E){this.cx=3*o,this.bx=3*(m-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(E-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=E,this.p2x=m,this.p2y=E}v.prototype.sampleCurveX=function(o){return((this.ax*o+this.bx)*o+this.cx)*o},v.prototype.sampleCurveY=function(o){return((this.ay*o+this.by)*o+this.cy)*o},v.prototype.sampleCurveDerivativeX=function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},v.prototype.solveCurveX=function(o,h){var m,E,I,V,Z;for(h===void 0&&(h=1e-6),I=o,Z=0;Z<8;Z++){if(V=this.sampleCurveX(I)-o,Math.abs(V)<h)return I;var ne=this.sampleCurveDerivativeX(I);if(Math.abs(ne)<1e-6)break;I-=V/ne}if((I=o)<(m=0))return m;if(I>(E=1))return E;for(;m<E;){if(V=this.sampleCurveX(I),Math.abs(V-o)<h)return I;o>V?m=I:E=I,I=.5*(E-m)+m}return I},v.prototype.solve=function(o,h){return this.sampleCurveY(this.solveCurveX(o,h))};var S=A;function A(o,h){this.x=o,this.y=h}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,h){return this.clone()._rotateAround(o,h)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var h=o.x-this.x,m=o.y-this.y;return h*h+m*m},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,h){return Math.atan2(this.x*h-this.y*o,this.x*o+this.y*h)},_matMult:function(o){var h=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=h,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var h=Math.cos(o),m=Math.sin(o),E=m*this.x+h*this.y;return this.x=h*this.x-m*this.y,this.y=E,this},_rotateAround:function(o,h){var m=Math.cos(o),E=Math.sin(o),I=h.y+E*(this.x-h.x)+m*(this.y-h.y);return this.x=h.x+m*(this.x-h.x)-E*(this.y-h.y),this.y=I,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},A.convert=function(o){return o instanceof A?o:Array.isArray(o)?new A(o[0],o[1]):o};var P=typeof self<"u"?self:{},L=Math.pow(2,53)-1;function F(o,h,m,E){var I=new d(o,h,m,E);return function(V){return I.solve(V)}}var K=F(.25,.1,.25,1);function re(o,h,m){return Math.min(m,Math.max(h,o))}function G(o,h,m){var E=m-h,I=((o-h)%E+E)%E+h;return I===h?m:I}function H(o){for(var h=[],m=arguments.length-1;m-- >0;)h[m]=arguments[m+1];for(var E=0,I=h;E<I.length;E+=1){var V=I[E];for(var Z in V)o[Z]=V[Z]}return o}var B=1;function $(){return B++}function N(){return function o(h){return h?(h^16*Math.random()>>h/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,o)}()}function z(o){return!!o&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(o)}function X(o,h){o.forEach(function(m){h[m]&&(h[m]=h[m].bind(h))})}function te(o,h){return o.indexOf(h,o.length-h.length)!==-1}function pe(o,h,m){var E={};for(var I in o)E[I]=h.call(m||this,o[I],I,o);return E}function ke(o,h,m){var E={};for(var I in o)h.call(m||this,o[I],I,o)&&(E[I]=o[I]);return E}function Pe(o){return Array.isArray(o)?o.map(Pe):typeof o=="object"&&o?pe(o,Pe):o}var ge={};function Ie(o){ge[o]||(typeof console<"u"&&console.warn(o),ge[o]=!0)}function Ne(o,h,m){return(m.y-o.y)*(h.x-o.x)>(h.y-o.y)*(m.x-o.x)}function lt(o){for(var h=0,m=0,E=o.length,I=E-1,V=void 0,Z=void 0;m<E;I=m++)h+=((Z=o[I]).x-(V=o[m]).x)*(V.y+Z.y);return h}function it(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Rt(o){var h={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(E,I,V,Z){var ne=V||Z;return h[I]=!ne||ne.toLowerCase(),""}),h["max-age"]){var m=parseInt(h["max-age"],10);isNaN(m)?delete h["max-age"]:h["max-age"]=m}return h}var St=null;function Zt(o){if(St==null){var h=o.navigator?o.navigator.userAgent:null;St=!!o.safari||!(!h||!(/\b(iPad|iPhone|iPod)\b/.test(h)||h.match("Safari")&&!h.match("Chrome")))}return St}function Kt(o){try{var h=P[o];return h.setItem("_mapbox_test_",1),h.removeItem("_mapbox_test_"),!0}catch{return!1}}var Ge,Ye,Dr,wr,tr=P.performance&&P.performance.now?P.performance.now.bind(P.performance):Date.now.bind(Date),br=P.requestAnimationFrame||P.mozRequestAnimationFrame||P.webkitRequestAnimationFrame||P.msRequestAnimationFrame,Bt=P.cancelAnimationFrame||P.mozCancelAnimationFrame||P.webkitCancelAnimationFrame||P.msCancelAnimationFrame,hr={now:tr,frame:function(o){var h=br(o);return{cancel:function(){return Bt(h)}}},getImageData:function(o,h){h===void 0&&(h=0);var m=P.document.createElement("canvas"),E=m.getContext("2d");if(!E)throw new Error("failed to create canvas 2d context");return m.width=o.width,m.height=o.height,E.drawImage(o,0,0,o.width,o.height),E.getImageData(-h,-h,o.width+2*h,o.height+2*h)},resolveURL:function(o){return Ge||(Ge=P.document.createElement("a")),Ge.href=o,Ge.href},hardwareConcurrency:P.navigator&&P.navigator.hardwareConcurrency||4,get devicePixelRatio(){return P.devicePixelRatio},get prefersReducedMotion(){return!!P.matchMedia&&(Ye==null&&(Ye=P.matchMedia("(prefers-reduced-motion: reduce)")),Ye.matches)}},cr={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},Mn={supported:!1,testSupport:function(o){!Hn&&wr&&(Qn?an(o):Dr=o)}},Hn=!1,Qn=!1;function an(o){var h=o.createTexture();o.bindTexture(o.TEXTURE_2D,h);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,wr),o.isContextLost())return;Mn.supported=!0}catch{}o.deleteTexture(h),Hn=!0}P.document&&((wr=P.document.createElement("img")).onload=function(){Dr&&an(Dr),Dr=null,Qn=!0},wr.onerror=function(){Hn=!0,Dr=null},wr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ki="01",Xn=function(o,h){this._transformRequestFn=o,this._customAccessToken=h,this._createSkuToken()};function Li(o){return o.indexOf("mapbox:")===0}Xn.prototype._createSkuToken=function(){var o=function(){for(var h="",m=0;m<10;m++)h+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ki,h].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt},Xn.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Xn.prototype.transformRequest=function(o,h){return this._transformRequestFn&&this._transformRequestFn(o,h)||{url:o}},Xn.prototype.normalizeStyleURL=function(o,h){if(!Li(o))return o;var m=ea(o);return m.path="/styles/v1"+m.path,this._makeAPIURL(m,this._customAccessToken||h)},Xn.prototype.normalizeGlyphsURL=function(o,h){if(!Li(o))return o;var m=ea(o);return m.path="/fonts/v1"+m.path,this._makeAPIURL(m,this._customAccessToken||h)},Xn.prototype.normalizeSourceURL=function(o,h){if(!Li(o))return o;var m=ea(o);return m.path="/v4/"+m.authority+".json",m.params.push("secure"),this._makeAPIURL(m,this._customAccessToken||h)},Xn.prototype.normalizeSpriteURL=function(o,h,m,E){var I=ea(o);return Li(o)?(I.path="/styles/v1"+I.path+"/sprite"+h+m,this._makeAPIURL(I,this._customAccessToken||E)):(I.path+=""+h+m,ya(I))},Xn.prototype.normalizeTileURL=function(o,h){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!Li(o))return o;var m=ea(o);m.path=m.path.replace(/(\.(png|jpg)\d*)(?=$)/,(hr.devicePixelRatio>=2||h===512?"@2x":"")+(Mn.supported?".webp":"$1")),m.path=m.path.replace(/^.+\/v4\//,"/"),m.path="/v4"+m.path;var E=this._customAccessToken||function(I){for(var V=0,Z=I;V<Z.length;V+=1){var ne=Z[V].match(/^access_token=(.*)$/);if(ne)return ne[1]}return null}(m.params)||cr.ACCESS_TOKEN;return cr.REQUIRE_ACCESS_TOKEN&&E&&this._skuToken&&m.params.push("sku="+this._skuToken),this._makeAPIURL(m,E)},Xn.prototype.canonicalizeTileURL=function(o,h){var m=ea(o);if(!m.path.match(/(^\/v4\/)/)||!m.path.match(/\.[\w]+$/))return o;var E="mapbox://tiles/";E+=m.path.replace("/v4/","");var I=m.params;return h&&(I=I.filter(function(V){return!V.match(/^access_token=/)})),I.length&&(E+="?"+I.join("&")),E},Xn.prototype.canonicalizeTileset=function(o,h){for(var m=!!h&&Li(h),E=[],I=0,V=o.tiles||[];I<V.length;I+=1){var Z=V[I];Yi(Z)?E.push(this.canonicalizeTileURL(Z,m)):E.push(Z)}return E},Xn.prototype._makeAPIURL=function(o,h){var m="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",E=ea(cr.API_URL);if(o.protocol=E.protocol,o.authority=E.authority,o.protocol==="http"){var I=o.params.indexOf("secure");I>=0&&o.params.splice(I,1)}if(E.path!=="/"&&(o.path=""+E.path+o.path),!cr.REQUIRE_ACCESS_TOKEN)return ya(o);if(!(h=h||cr.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+m);if(h[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+m);return o.params=o.params.filter(function(V){return V.indexOf("access_token")===-1}),o.params.push("access_token="+h),ya(o)},Xn.prototype.setTransformRequest=function(o){this._transformRequestFn=o};var Pi=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Yi(o){return Pi.test(o)}var gi=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ea(o){var h=o.match(gi);if(!h)throw new Error("Unable to parse URL object");return{protocol:h[1],authority:h[2],path:h[3]||"/",params:h[4]?h[4].split("&"):[]}}function ya(o){var h=o.params.length?"?"+o.params.join("&"):"";return o.protocol+"://"+o.authority+o.path+h}function La(o){if(!o)return null;var h=o.split(".");if(!h||h.length!==3)return null;try{return JSON.parse(decodeURIComponent(P.atob(h[1]).split("").map(function(m){return"%"+("00"+m.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Aa=function(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Aa.prototype.getStorageKey=function(o){var h,m=La(cr.ACCESS_TOKEN);return h=m&&m.u?P.btoa(encodeURIComponent(m.u).replace(/%([0-9A-F]{2})/g,function(E,I){return String.fromCharCode(+("0x"+I))})):cr.ACCESS_TOKEN||"",o?"mapbox.eventData."+o+":"+h:"mapbox.eventData:"+h},Aa.prototype.fetchEventData=function(){var o=Kt("localStorage"),h=this.getStorageKey(),m=this.getStorageKey("uuid");if(o)try{var E=P.localStorage.getItem(h);E&&(this.eventData=JSON.parse(E));var I=P.localStorage.getItem(m);I&&(this.anonId=I)}catch{Ie("Unable to read from LocalStorage")}},Aa.prototype.saveEventData=function(){var o=Kt("localStorage"),h=this.getStorageKey(),m=this.getStorageKey("uuid");if(o)try{P.localStorage.setItem(m,this.anonId),Object.keys(this.eventData).length>=1&&P.localStorage.setItem(h,JSON.stringify(this.eventData))}catch{Ie("Unable to write to LocalStorage")}},Aa.prototype.processRequests=function(o){},Aa.prototype.postEvent=function(o,h,m,E){var I=this;if(cr.EVENTS_URL){var V=ea(cr.EVENTS_URL);V.params.push("access_token="+(E||cr.ACCESS_TOKEN||""));var Z={event:this.type,created:new Date(o).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.15.3",skuId:ki,userId:this.anonId},ne=h?H(Z,h):Z,ce={url:ya(V),headers:{"Content-Type":"text/plain"},body:JSON.stringify([ne])};this.pendingRequest=Ae(ce,function(_e){I.pendingRequest=null,m(_e),I.saveEventData(),I.processRequests(E)})}},Aa.prototype.queueRequest=function(o,h){this.queue.push(o),this.processRequests(h)};var $a,ka,Ka=function(o){function h(){o.call(this,"map.load"),this.success={},this.skuToken=""}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.postMapLoadEvent=function(m,E,I,V){this.skuToken=I,(cr.EVENTS_URL&&V||cr.ACCESS_TOKEN&&Array.isArray(m)&&m.some(function(Z){return Li(Z)||Yi(Z)}))&&this.queueRequest({id:E,timestamp:Date.now()},V)},h.prototype.processRequests=function(m){var E=this;if(!this.pendingRequest&&this.queue.length!==0){var I=this.queue.shift(),V=I.id,Z=I.timestamp;V&&this.success[V]||(this.anonId||this.fetchEventData(),z(this.anonId)||(this.anonId=N()),this.postEvent(Z,{skuToken:this.skuToken},function(ne){ne||V&&(E.success[V]=!0)},m))}},h}(Aa),dr=new(function(o){function h(m){o.call(this,"appUserTurnstile"),this._customAccessToken=m}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.postTurnstileEvent=function(m,E){cr.EVENTS_URL&&cr.ACCESS_TOKEN&&Array.isArray(m)&&m.some(function(I){return Li(I)||Yi(I)})&&this.queueRequest(Date.now(),E)},h.prototype.processRequests=function(m){var E=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var I=La(cr.ACCESS_TOKEN),V=I?I.u:cr.ACCESS_TOKEN,Z=V!==this.eventData.tokenU;z(this.anonId)||(this.anonId=N(),Z=!0);var ne=this.queue.shift();if(this.eventData.lastSuccess){var ce=new Date(this.eventData.lastSuccess),_e=new Date(ne),Se=(ne-this.eventData.lastSuccess)/864e5;Z=Z||Se>=1||Se<-1||ce.getDate()!==_e.getDate()}else Z=!0;if(!Z)return this.processRequests();this.postEvent(ne,{"enabled.telemetry":!1},function(Me){Me||(E.eventData.lastSuccess=ne,E.eventData.tokenU=V)},m)}},h}(Aa)),Mt=dr.postTurnstileEvent.bind(dr),yr=new Ka,Xt=yr.postMapLoadEvent.bind(yr),Yt=500,lr=50;function Qr(){P.caches&&!$a&&($a=P.caches.open("mapbox-tiles"))}function Xr(o){var h=o.indexOf("?");return h<0?o:o.slice(0,h)}var En,Rn=1/0;function rr(){return En==null&&(En=P.OffscreenCanvas&&new P.OffscreenCanvas(1,1).getContext("2d")&&typeof P.createImageBitmap=="function"),En}var Lr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Lr);var ur=function(o){function h(m,E,I){E===401&&Yi(I)&&(m+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),o.call(this,m),this.status=E,this.url=I,this.name=this.constructor.name,this.message=m}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},h}(Error),hn=it()?function(){return self.worker&&self.worker.referrer}:function(){return(P.location.protocol==="blob:"?P.parent:P).location.href};function ti(o,h){var m,E=new P.AbortController,I=new P.Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:hn(),signal:E.signal}),V=!1,Z=!1,ne=(m=I.url).indexOf("sku=")>0&&Yi(m);o.type==="json"&&I.headers.set("Accept","application/json");var ce=function(Se,Me,Ve){if(!Z){if(Se&&Se.message!=="SecurityError"&&Ie(Se),Me&&Ve)return _e(Me);var f=Date.now();P.fetch(I).then(function(u){if(u.ok){var p=ne?u.clone():null;return _e(u,p,f)}return h(new ur(u.statusText,u.status,o.url))}).catch(function(u){u.code!==20&&h(new Error(u.message))})}},_e=function(Se,Me,Ve){(o.type==="arrayBuffer"?Se.arrayBuffer():o.type==="json"?Se.json():Se.text()).then(function(f){Z||(Me&&Ve&&function(u,p,x){if(Qr(),$a){var T={status:p.status,statusText:p.statusText,headers:new P.Headers};p.headers.forEach(function(j,J){return T.headers.set(J,j)});var D=Rt(p.headers.get("Cache-Control")||"");D["no-store"]||(D["max-age"]&&T.headers.set("Expires",new Date(x+1e3*D["max-age"]).toUTCString()),new Date(T.headers.get("Expires")).getTime()-x<42e4||function(j,J){if(ka===void 0)try{new Response(new ReadableStream),ka=!0}catch{ka=!1}ka?J(j.body):j.blob().then(J)}(p,function(j){var J=new P.Response(j,T);Qr(),$a&&$a.then(function(ie){return ie.put(Xr(u.url),J)}).catch(function(ie){return Ie(ie.message)})}))}}(I,Me,Ve),V=!0,h(null,f,Se.headers.get("Cache-Control"),Se.headers.get("Expires")))}).catch(function(f){Z||h(new Error(f.message))})};return ne?function(Se,Me){if(Qr(),!$a)return Me(null);var Ve=Xr(Se.url);$a.then(function(f){f.match(Ve).then(function(u){var p=function(x){if(!x)return!1;var T=new Date(x.headers.get("Expires")||0),D=Rt(x.headers.get("Cache-Control")||"");return T>Date.now()&&!D["no-cache"]}(u);f.delete(Ve),p&&f.put(Ve,u.clone()),Me(null,u,p)}).catch(Me)}).catch(Me)}(I,ce):ce(null,null),{cancel:function(){Z=!0,V||E.abort()}}}var Hr,fi,Ci=function(o,h){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(it()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,h);if(!it()){var m=o.url.substring(0,o.url.indexOf("://"));return(cr.REGISTERED_PROTOCOLS[m]||ti)(o,h)}}if(!(/^file:/.test(E=o.url)||/^file:/.test(hn())&&!/^\w+:/.test(E))){if(P.fetch&&P.Request&&P.AbortController&&P.Request.prototype.hasOwnProperty("signal"))return ti(o,h);if(it()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,h,void 0,!0)}var E;return function(I,V){var Z=new P.XMLHttpRequest;for(var ne in Z.open(I.method||"GET",I.url,!0),I.type==="arrayBuffer"&&(Z.responseType="arraybuffer"),I.headers)Z.setRequestHeader(ne,I.headers[ne]);return I.type==="json"&&(Z.responseType="text",Z.setRequestHeader("Accept","application/json")),Z.withCredentials=I.credentials==="include",Z.onerror=function(){V(new Error(Z.statusText))},Z.onload=function(){if((Z.status>=200&&Z.status<300||Z.status===0)&&Z.response!==null){var ce=Z.response;if(I.type==="json")try{ce=JSON.parse(Z.response)}catch(_e){return V(_e)}V(null,ce,Z.getResponseHeader("Cache-Control"),Z.getResponseHeader("Expires"))}else V(new ur(Z.statusText,Z.status,I.url))},Z.send(I.body),{cancel:function(){return Z.abort()}}}(o,h)},zi=function(o,h){return Ci(H(o,{type:"arrayBuffer"}),h)},Ae=function(o,h){return Ci(H(o,{method:"POST"}),h)},$e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Hr=[],fi=0;var je=function(o,h){if(Mn.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),fi>=cr.MAX_PARALLEL_IMAGE_REQUESTS){var m={requestParameters:o,callback:h,cancelled:!1,cancel:function(){this.cancelled=!0}};return Hr.push(m),m}fi++;var E=!1,I=function(){if(!E)for(E=!0,fi--;Hr.length&&fi<cr.MAX_PARALLEL_IMAGE_REQUESTS;){var Z=Hr.shift();Z.cancelled||(Z.cancel=je(Z.requestParameters,Z.callback).cancel)}},V=zi(o,function(Z,ne,ce,_e){I(),Z?h(Z):ne&&(rr()?function(Se,Me){var Ve=new P.Blob([new Uint8Array(Se)],{type:"image/png"});P.createImageBitmap(Ve).then(function(f){Me(null,f)}).catch(function(f){Me(new Error("Could not load image because of "+f.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(ne,h):function(Se,Me,Ve,f){var u=new P.Image,p=P.URL;u.onload=function(){Me(null,u),p.revokeObjectURL(u.src),u.onload=null,P.requestAnimationFrame(function(){u.src=$e})},u.onerror=function(){return Me(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var x=new P.Blob([new Uint8Array(Se)],{type:"image/png"});u.cacheControl=Ve,u.expires=f,u.src=Se.byteLength?p.createObjectURL(x):$e}(ne,h,ce,_e))});return{cancel:function(){V.cancel(),I()}}};function et(o,h,m){m[o]&&m[o].indexOf(h)!==-1||(m[o]=m[o]||[],m[o].push(h))}function ht(o,h,m){if(m&&m[o]){var E=m[o].indexOf(h);E!==-1&&m[o].splice(E,1)}}var Ct=function(o,h){h===void 0&&(h={}),H(this,h),this.type=o},Dt=function(o){function h(m,E){E===void 0&&(E={}),o.call(this,"error",H({error:m},E))}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h}(Ct),Et=function(){};Et.prototype.on=function(o,h){return this._listeners=this._listeners||{},et(o,h,this._listeners),this},Et.prototype.off=function(o,h){return ht(o,h,this._listeners),ht(o,h,this._oneTimeListeners),this},Et.prototype.once=function(o,h){return this._oneTimeListeners=this._oneTimeListeners||{},et(o,h,this._oneTimeListeners),this},Et.prototype.fire=function(o,h){typeof o=="string"&&(o=new Ct(o,h||{}));var m=o.type;if(this.listens(m)){o.target=this;for(var E=0,I=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];E<I.length;E+=1)I[E].call(this,o);for(var V=0,Z=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];V<Z.length;V+=1){var ne=Z[V];ht(m,ne,this._oneTimeListeners),ne.call(this,o)}var ce=this._eventedParent;ce&&(H(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ce.fire(o))}else o instanceof Dt&&console.error(o.error);return this},Et.prototype.listens=function(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)},Et.prototype.setEventedParent=function(o,h){return this._eventedParent=o,this._eventedParentData=h,this};var Je={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ye=function(o,h,m,E){this.message=(o?o+": ":"")+m,E&&(this.identifier=E),h!=null&&h.__line__&&(this.line=h.__line__)};function fe(o){var h=o.value;return h?[new ye(o.key,h,"constants have been deprecated as of v8")]:[]}function we(o){for(var h=[],m=arguments.length-1;m-- >0;)h[m]=arguments[m+1];for(var E=0,I=h;E<I.length;E+=1){var V=I[E];for(var Z in V)o[Z]=V[Z]}return o}function Ce(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Le(o){if(Array.isArray(o))return o.map(Le);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){var h={};for(var m in o)h[m]=Le(o[m]);return h}return Ce(o)}var nt=function(o){function h(m,E){o.call(this,E),this.message=E,this.key=m}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h}(Error),dt=function(o,h){h===void 0&&(h=[]),this.parent=o,this.bindings={};for(var m=0,E=h;m<E.length;m+=1){var I=E[m];this.bindings[I[0]]=I[1]}};dt.prototype.concat=function(o){return new dt(this,o)},dt.prototype.get=function(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(o+" not found in scope.")},dt.prototype.has=function(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)};var ct={kind:"null"},Xe={kind:"number"},pt={kind:"string"},vt={kind:"boolean"},ar={kind:"color"},Vt={kind:"object"},fr={kind:"value"},qr={kind:"collator"},Ar={kind:"formatted"},ln={kind:"resolvedImage"};function gn(o,h){return{kind:"array",itemType:o,N:h}}function An(o){if(o.kind==="array"){var h=An(o.itemType);return typeof o.N=="number"?"array<"+h+", "+o.N+">":o.itemType.kind==="value"?"array":"array<"+h+">"}return o.kind}var wn=[ct,Xe,pt,vt,ar,Ar,Vt,gn(fr),ln];function Dn(o,h){if(h.kind==="error")return null;if(o.kind==="array"){if(h.kind==="array"&&(h.N===0&&h.itemType.kind==="value"||!Dn(o.itemType,h.itemType))&&(typeof o.N!="number"||o.N===h.N))return null}else{if(o.kind===h.kind)return null;if(o.kind==="value"){for(var m=0,E=wn;m<E.length;m+=1)if(!Dn(E[m],h))return null}}return"Expected "+An(o)+" but found "+An(h)+" instead."}function $n(o,h){return h.some(function(m){return m.kind===o.kind})}function kn(o,h){return h.some(function(m){return m==="null"?o===null:m==="array"?Array.isArray(o):m==="object"?o&&!Array.isArray(o)&&typeof o=="object":m===typeof o})}var Qa=s(function(o,h){var m={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function E(ne){return(ne=Math.round(ne))<0?0:ne>255?255:ne}function I(ne){return E(ne[ne.length-1]==="%"?parseFloat(ne)/100*255:parseInt(ne))}function V(ne){return(ce=ne[ne.length-1]==="%"?parseFloat(ne)/100:parseFloat(ne))<0?0:ce>1?1:ce;var ce}function Z(ne,ce,_e){return _e<0?_e+=1:_e>1&&(_e-=1),6*_e<1?ne+(ce-ne)*_e*6:2*_e<1?ce:3*_e<2?ne+(ce-ne)*(2/3-_e)*6:ne}try{h.parseCSSColor=function(ne){var ce,_e=ne.replace(/ /g,"").toLowerCase();if(_e in m)return m[_e].slice();if(_e[0]==="#")return _e.length===4?(ce=parseInt(_e.substr(1),16))>=0&&ce<=4095?[(3840&ce)>>4|(3840&ce)>>8,240&ce|(240&ce)>>4,15&ce|(15&ce)<<4,1]:null:_e.length===7&&(ce=parseInt(_e.substr(1),16))>=0&&ce<=16777215?[(16711680&ce)>>16,(65280&ce)>>8,255&ce,1]:null;var Se=_e.indexOf("("),Me=_e.indexOf(")");if(Se!==-1&&Me+1===_e.length){var Ve=_e.substr(0,Se),f=_e.substr(Se+1,Me-(Se+1)).split(","),u=1;switch(Ve){case"rgba":if(f.length!==4)return null;u=V(f.pop());case"rgb":return f.length!==3?null:[I(f[0]),I(f[1]),I(f[2]),u];case"hsla":if(f.length!==4)return null;u=V(f.pop());case"hsl":if(f.length!==3)return null;var p=(parseFloat(f[0])%360+360)%360/360,x=V(f[1]),T=V(f[2]),D=T<=.5?T*(x+1):T+x-T*x,j=2*T-D;return[E(255*Z(j,D,p+1/3)),E(255*Z(j,D,p)),E(255*Z(j,D,p-1/3)),u];default:return null}}return null}}catch{}}).parseCSSColor,Fn=function(o,h,m,E){E===void 0&&(E=1),this.r=o,this.g=h,this.b=m,this.a=E};Fn.parse=function(o){if(o){if(o instanceof Fn)return o;if(typeof o=="string"){var h=Qa(o);if(h)return new Fn(h[0]/255*h[3],h[1]/255*h[3],h[2]/255*h[3],h[3])}}},Fn.prototype.toString=function(){var o=this.toArray(),h=o[1],m=o[2],E=o[3];return"rgba("+Math.round(o[0])+","+Math.round(h)+","+Math.round(m)+","+E+")"},Fn.prototype.toArray=function(){var o=this.a;return o===0?[0,0,0,0]:[255*this.r/o,255*this.g/o,255*this.b/o,o]},Fn.black=new Fn(0,0,0,1),Fn.white=new Fn(1,1,1,1),Fn.transparent=new Fn(0,0,0,0),Fn.red=new Fn(1,0,0,1);var oo=function(o,h,m){this.sensitivity=o?h?"variant":"case":h?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};oo.prototype.compare=function(o,h){return this.collator.compare(o,h)},oo.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Tl=function(o,h,m,E,I){this.text=o,this.image=h,this.scale=m,this.fontStack=E,this.textColor=I},Ya=function(o){this.sections=o};Ya.fromString=function(o){return new Ya([new Tl(o,null,null,null,null)])},Ya.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(o){return o.text.length!==0||o.image&&o.image.name.length!==0})},Ya.factory=function(o){return o instanceof Ya?o:Ya.fromString(o)},Ya.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(o){return o.text}).join("")},Ya.prototype.serialize=function(){for(var o=["format"],h=0,m=this.sections;h<m.length;h+=1){var E=m[h];if(E.image)o.push(["image",E.image.name]);else{o.push(E.text);var I={};E.fontStack&&(I["text-font"]=["literal",E.fontStack.split(",")]),E.scale&&(I["font-scale"]=E.scale),E.textColor&&(I["text-color"]=["rgba"].concat(E.textColor.toArray())),o.push(I)}}return o};var Oi=function(o){this.name=o.name,this.available=o.available};function ku(o,h,m,E){return typeof o=="number"&&o>=0&&o<=255&&typeof h=="number"&&h>=0&&h<=255&&typeof m=="number"&&m>=0&&m<=255?E===void 0||typeof E=="number"&&E>=0&&E<=1?null:"Invalid rgba value ["+[o,h,m,E].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof E=="number"?[o,h,m,E]:[o,h,m]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Ys(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Fn||o instanceof oo||o instanceof Ya||o instanceof Oi)return!0;if(Array.isArray(o)){for(var h=0,m=o;h<m.length;h+=1)if(!Ys(m[h]))return!1;return!0}if(typeof o=="object"){for(var E in o)if(!Ys(o[E]))return!1;return!0}return!1}function co(o){if(o===null)return ct;if(typeof o=="string")return pt;if(typeof o=="boolean")return vt;if(typeof o=="number")return Xe;if(o instanceof Fn)return ar;if(o instanceof oo)return qr;if(o instanceof Ya)return Ar;if(o instanceof Oi)return ln;if(Array.isArray(o)){for(var h,m=o.length,E=0,I=o;E<I.length;E+=1){var V=co(I[E]);if(h){if(h===V)continue;h=fr;break}h=V}return gn(h||fr,m)}return Vt}function Bs(o){var h=typeof o;return o===null?"":h==="string"||h==="number"||h==="boolean"?String(o):o instanceof Fn||o instanceof Ya||o instanceof Oi?o.toString():JSON.stringify(o)}Oi.prototype.toString=function(){return this.name},Oi.fromString=function(o){return o?new Oi({name:o,available:!1}):null},Oi.prototype.serialize=function(){return["image",this.name]};var $o=function(o,h){this.type=o,this.value=h};$o.parse=function(o,h){if(o.length!==2)return h.error("'literal' expression requires exactly one argument, but found "+(o.length-1)+" instead.");if(!Ys(o[1]))return h.error("invalid value");var m=o[1],E=co(m),I=h.expectedType;return E.kind!=="array"||E.N!==0||!I||I.kind!=="array"||typeof I.N=="number"&&I.N!==0||(E=I),new $o(E,m)},$o.prototype.evaluate=function(){return this.value},$o.prototype.eachChild=function(){},$o.prototype.outputDefined=function(){return!0},$o.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Fn?["rgba"].concat(this.value.toArray()):this.value instanceof Ya?this.value.serialize():this.value};var Pa=function(o){this.name="ExpressionEvaluationError",this.message=o};Pa.prototype.toJSON=function(){return this.message};var Ro={string:pt,number:Xe,boolean:vt,object:Vt},mo=function(o,h){this.type=o,this.args=h};mo.parse=function(o,h){if(o.length<2)return h.error("Expected at least one argument.");var m,E=1,I=o[0];if(I==="array"){var V,Z;if(o.length>2){var ne=o[1];if(typeof ne!="string"||!(ne in Ro)||ne==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);V=Ro[ne],E++}else V=fr;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return h.error('The length argument to "array" must be a positive integer literal',2);Z=o[2],E++}m=gn(V,Z)}else m=Ro[I];for(var ce=[];E<o.length;E++){var _e=h.parse(o[E],E,fr);if(!_e)return null;ce.push(_e)}return new mo(m,ce)},mo.prototype.evaluate=function(o){for(var h=0;h<this.args.length;h++){var m=this.args[h].evaluate(o);if(!Dn(this.type,co(m)))return m;if(h===this.args.length-1)throw new Pa("Expected value to be of type "+An(this.type)+", but found "+An(co(m))+" instead.")}return null},mo.prototype.eachChild=function(o){this.args.forEach(o)},mo.prototype.outputDefined=function(){return this.args.every(function(o){return o.outputDefined()})},mo.prototype.serialize=function(){var o=this.type,h=[o.kind];if(o.kind==="array"){var m=o.itemType;if(m.kind==="string"||m.kind==="number"||m.kind==="boolean"){h.push(m.kind);var E=o.N;(typeof E=="number"||this.args.length>1)&&h.push(E)}}return h.concat(this.args.map(function(I){return I.serialize()}))};var Ko=function(o){this.type=Ar,this.sections=o};Ko.parse=function(o,h){if(o.length<2)return h.error("Expected at least one argument.");var m=o[1];if(!Array.isArray(m)&&typeof m=="object")return h.error("First argument must be an image or text section.");for(var E=[],I=!1,V=1;V<=o.length-1;++V){var Z=o[V];if(I&&typeof Z=="object"&&!Array.isArray(Z)){I=!1;var ne=null;if(Z["font-scale"]&&!(ne=h.parse(Z["font-scale"],1,Xe)))return null;var ce=null;if(Z["text-font"]&&!(ce=h.parse(Z["text-font"],1,gn(pt))))return null;var _e=null;if(Z["text-color"]&&!(_e=h.parse(Z["text-color"],1,ar)))return null;var Se=E[E.length-1];Se.scale=ne,Se.font=ce,Se.textColor=_e}else{var Me=h.parse(o[V],1,fr);if(!Me)return null;var Ve=Me.type.kind;if(Ve!=="string"&&Ve!=="value"&&Ve!=="null"&&Ve!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");I=!0,E.push({content:Me,scale:null,font:null,textColor:null})}}return new Ko(E)},Ko.prototype.evaluate=function(o){return new Ya(this.sections.map(function(h){var m=h.content.evaluate(o);return co(m)===ln?new Tl("",m,null,null,null):new Tl(Bs(m),null,h.scale?h.scale.evaluate(o):null,h.font?h.font.evaluate(o).join(","):null,h.textColor?h.textColor.evaluate(o):null)}))},Ko.prototype.eachChild=function(o){for(var h=0,m=this.sections;h<m.length;h+=1){var E=m[h];o(E.content),E.scale&&o(E.scale),E.font&&o(E.font),E.textColor&&o(E.textColor)}},Ko.prototype.outputDefined=function(){return!1},Ko.prototype.serialize=function(){for(var o=["format"],h=0,m=this.sections;h<m.length;h+=1){var E=m[h];o.push(E.content.serialize());var I={};E.scale&&(I["font-scale"]=E.scale.serialize()),E.font&&(I["text-font"]=E.font.serialize()),E.textColor&&(I["text-color"]=E.textColor.serialize()),o.push(I)}return o};var Fs=function(o){this.type=ln,this.input=o};Fs.parse=function(o,h){if(o.length!==2)return h.error("Expected two arguments.");var m=h.parse(o[1],1,pt);return m?new Fs(m):h.error("No image name provided.")},Fs.prototype.evaluate=function(o){var h=this.input.evaluate(o),m=Oi.fromString(h);return m&&o.availableImages&&(m.available=o.availableImages.indexOf(h)>-1),m},Fs.prototype.eachChild=function(o){o(this.input)},Fs.prototype.outputDefined=function(){return!1},Fs.prototype.serialize=function(){return["image",this.input.serialize()]};var jf={"to-boolean":vt,"to-color":ar,"to-number":Xe,"to-string":pt},bo=function(o,h){this.type=o,this.args=h};bo.parse=function(o,h){if(o.length<2)return h.error("Expected at least one argument.");var m=o[0];if((m==="to-boolean"||m==="to-string")&&o.length!==2)return h.error("Expected one argument.");for(var E=jf[m],I=[],V=1;V<o.length;V++){var Z=h.parse(o[V],V,fr);if(!Z)return null;I.push(Z)}return new bo(E,I)},bo.prototype.evaluate=function(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){for(var h,m,E=0,I=this.args;E<I.length;E+=1){if(m=null,(h=I[E].evaluate(o))instanceof Fn)return h;if(typeof h=="string"){var V=o.parseColor(h);if(V)return V}else if(Array.isArray(h)&&!(m=h.length<3||h.length>4?"Invalid rbga value "+JSON.stringify(h)+": expected an array containing either three or four numeric values.":ku(h[0],h[1],h[2],h[3])))return new Fn(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new Pa(m||"Could not parse color from value '"+(typeof h=="string"?h:String(JSON.stringify(h)))+"'")}if(this.type.kind==="number"){for(var Z=null,ne=0,ce=this.args;ne<ce.length;ne+=1){if((Z=ce[ne].evaluate(o))===null)return 0;var _e=Number(Z);if(!isNaN(_e))return _e}throw new Pa("Could not convert "+JSON.stringify(Z)+" to number.")}return this.type.kind==="formatted"?Ya.fromString(Bs(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?Oi.fromString(Bs(this.args[0].evaluate(o))):Bs(this.args[0].evaluate(o))},bo.prototype.eachChild=function(o){this.args.forEach(o)},bo.prototype.outputDefined=function(){return this.args.every(function(o){return o.outputDefined()})},bo.prototype.serialize=function(){if(this.type.kind==="formatted")return new Ko([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Fs(this.args[0]).serialize();var o=["to-"+this.type.kind];return this.eachChild(function(h){o.push(h.serialize())}),o};var Al=["Unknown","Point","LineString","Polygon"],No=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};No.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},No.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Al[this.feature.type]:this.feature.type:null},No.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},No.prototype.canonicalID=function(){return this.canonical},No.prototype.properties=function(){return this.feature&&this.feature.properties||{}},No.prototype.parseColor=function(o){var h=this._parseColorCache[o];return h||(h=this._parseColorCache[o]=Fn.parse(o)),h};var Ia=function(o,h,m,E){this.name=o,this.type=h,this._evaluate=m,this.args=E};Ia.prototype.evaluate=function(o){return this._evaluate(o,this.args)},Ia.prototype.eachChild=function(o){this.args.forEach(o)},Ia.prototype.outputDefined=function(){return!1},Ia.prototype.serialize=function(){return[this.name].concat(this.args.map(function(o){return o.serialize()}))},Ia.parse=function(o,h){var m,E=o[0],I=Ia.definitions[E];if(!I)return h.error('Unknown expression "'+E+'". If you wanted a literal array, use ["literal", [...]].',0);for(var V=Array.isArray(I)?I[0]:I.type,Z=Array.isArray(I)?[[I[1],I[2]]]:I.overloads,ne=Z.filter(function(Be){var rt=Be[0];return!Array.isArray(rt)||rt.length===o.length-1}),ce=null,_e=0,Se=ne;_e<Se.length;_e+=1){var Me=Se[_e],Ve=Me[0],f=Me[1];ce=new ra(h.registry,h.path,null,h.scope);for(var u=[],p=!1,x=1;x<o.length;x++){var T=o[x],D=Array.isArray(Ve)?Ve[x-1]:Ve.type,j=ce.parse(T,1+u.length,D);if(!j){p=!0;break}u.push(j)}if(!p)if(Array.isArray(Ve)&&Ve.length!==u.length)ce.error("Expected "+Ve.length+" arguments, but found "+u.length+" instead.");else{for(var J=0;J<u.length;J++){var ie=Array.isArray(Ve)?Ve[J]:Ve.type,le=u[J];ce.concat(J+1).checkSubtype(ie,le.type)}if(ce.errors.length===0)return new Ia(E,V,f,u)}}if(ne.length===1)(m=h.errors).push.apply(m,ce.errors);else{for(var me=(ne.length?ne:Z).map(function(Be){var rt;return rt=Be[0],Array.isArray(rt)?"("+rt.map(An).join(", ")+")":"("+An(rt.type)+"...)"}).join(" | "),xe=[],Re=1;Re<o.length;Re++){var De=h.parse(o[Re],1+xe.length);if(!De)return null;xe.push(An(De.type))}h.error("Expected arguments of type "+me+", but found ("+xe.join(", ")+") instead.")}return null},Ia.register=function(o,h){for(var m in Ia.definitions=h,h)o[m]=Ia};var Ga=function(o,h,m){this.type=qr,this.locale=m,this.caseSensitive=o,this.diacriticSensitive=h};function Us(o,h){o[0]=Math.min(o[0],h[0]),o[1]=Math.min(o[1],h[1]),o[2]=Math.max(o[2],h[0]),o[3]=Math.max(o[3],h[1])}function Iu(o,h){return!(o[0]<=h[0]||o[2]>=h[2]||o[1]<=h[1]||o[3]>=h[3])}function Mu(o,h){var m=(180+o[0])/360,E=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,I=Math.pow(2,h.z);return[Math.round(m*I*8192),Math.round(E*I*8192)]}function Ou(o,h,m){return h[1]>o[1]!=m[1]>o[1]&&o[0]<(m[0]-h[0])*(o[1]-h[1])/(m[1]-h[1])+h[0]}function Ma(o,h){for(var m,E,I,V,Z,ne,ce,_e=!1,Se=0,Me=h.length;Se<Me;Se++)for(var Ve=h[Se],f=0,u=Ve.length;f<u-1;f++){if((V=(m=o)[0]-(E=Ve[f])[0])*(ce=m[1]-(I=Ve[f+1])[1])-(ne=m[0]-I[0])*(Z=m[1]-E[1])==0&&V*ne<=0&&Z*ce<=0)return!1;Ou(o,Ve[f],Ve[f+1])&&(_e=!_e)}return _e}function Ru(o,h){for(var m=0;m<h.length;m++)if(Ma(o,h[m]))return!0;return!1}function Pc(o,h,m,E){var I=E[0]-m[0],V=E[1]-m[1],Z=(o[0]-m[0])*V-I*(o[1]-m[1]),ne=(h[0]-m[0])*V-I*(h[1]-m[1]);return Z>0&&ne<0||Z<0&&ne>0}function Vf(o,h,m){for(var E=0,I=m;E<I.length;E+=1)for(var V=I[E],Z=0;Z<V.length-1;++Z)if((Me=[(Se=V[Z+1])[0]-(_e=V[Z])[0],Se[1]-_e[1]])[0]*(Ve=[(ce=h)[0]-(ne=o)[0],ce[1]-ne[1]])[1]-Me[1]*Ve[0]!=0&&Pc(ne,ce,_e,Se)&&Pc(_e,Se,ne,ce))return!0;var ne,ce,_e,Se,Me,Ve;return!1}function nc(o,h){for(var m=0;m<o.length;++m)if(!Ma(o[m],h))return!1;for(var E=0;E<o.length-1;++E)if(Vf(o[E],o[E+1],h))return!1;return!0}function Hl(o,h){for(var m=0;m<h.length;m++)if(nc(o,h[m]))return!0;return!1}function ic(o,h,m){for(var E=[],I=0;I<o.length;I++){for(var V=[],Z=0;Z<o[I].length;Z++){var ne=Mu(o[I][Z],m);Us(h,ne),V.push(ne)}E.push(V)}return E}function cu(o,h,m){for(var E=[],I=0;I<o.length;I++){var V=ic(o[I],h,m);E.push(V)}return E}function ef(o,h,m,E){if(o[0]<m[0]||o[0]>m[2]){var I=.5*E,V=o[0]-m[0]>I?-E:m[0]-o[0]>I?E:0;V===0&&(V=o[0]-m[2]>I?-E:m[2]-o[0]>I?E:0),o[0]+=V}Us(h,o)}function kl(o,h,m,E){for(var I=8192*Math.pow(2,E.z),V=[8192*E.x,8192*E.y],Z=[],ne=0,ce=o;ne<ce.length;ne+=1)for(var _e=0,Se=ce[ne];_e<Se.length;_e+=1){var Me=Se[_e],Ve=[Me.x+V[0],Me.y+V[1]];ef(Ve,h,m,I),Z.push(Ve)}return Z}function Il(o,h,m,E){for(var I,V=8192*Math.pow(2,E.z),Z=[8192*E.x,8192*E.y],ne=[],ce=0,_e=o;ce<_e.length;ce+=1){for(var Se=[],Me=0,Ve=_e[ce];Me<Ve.length;Me+=1){var f=Ve[Me],u=[f.x+Z[0],f.y+Z[1]];Us(h,u),Se.push(u)}ne.push(Se)}if(h[2]-h[0]<=V/2){(I=h)[0]=I[1]=1/0,I[2]=I[3]=-1/0;for(var p=0,x=ne;p<x.length;p+=1)for(var T=0,D=x[p];T<D.length;T+=1)ef(D[T],h,m,V)}return ne}Ga.parse=function(o,h){if(o.length!==2)return h.error("Expected one argument.");var m=o[1];if(typeof m!="object"||Array.isArray(m))return h.error("Collator options argument must be an object.");var E=h.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,vt);if(!E)return null;var I=h.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,vt);if(!I)return null;var V=null;return m.locale&&!(V=h.parse(m.locale,1,pt))?null:new Ga(E,I,V)},Ga.prototype.evaluate=function(o){return new oo(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)},Ga.prototype.eachChild=function(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)},Ga.prototype.outputDefined=function(){return!1},Ga.prototype.serialize=function(){var o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]};var xo=function(o,h){this.type=vt,this.geojson=o,this.geometries=h};function ol(o){if(o instanceof Ia&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof xo)return!1;var h=!0;return o.eachChild(function(m){h&&!ol(m)&&(h=!1)}),h}function $i(o){if(o instanceof Ia&&o.name==="feature-state")return!1;var h=!0;return o.eachChild(function(m){h&&!$i(m)&&(h=!1)}),h}function ac(o,h){if(o instanceof Ia&&h.indexOf(o.name)>=0)return!1;var m=!0;return o.eachChild(function(E){m&&!ac(E,h)&&(m=!1)}),m}xo.parse=function(o,h){if(o.length!==2)return h.error("'within' expression requires exactly one argument, but found "+(o.length-1)+" instead.");if(Ys(o[1])){var m=o[1];if(m.type==="FeatureCollection")for(var E=0;E<m.features.length;++E){var I=m.features[E].geometry.type;if(I==="Polygon"||I==="MultiPolygon")return new xo(m,m.features[E].geometry)}else if(m.type==="Feature"){var V=m.geometry.type;if(V==="Polygon"||V==="MultiPolygon")return new xo(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new xo(m,m)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")},xo.prototype.evaluate=function(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(h,m){var E=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],V=h.canonicalID();if(m.type==="Polygon"){var Z=ic(m.coordinates,I,V),ne=kl(h.geometry(),E,I,V);if(!Iu(E,I))return!1;for(var ce=0,_e=ne;ce<_e.length;ce+=1)if(!Ma(_e[ce],Z))return!1}if(m.type==="MultiPolygon"){var Se=cu(m.coordinates,I,V),Me=kl(h.geometry(),E,I,V);if(!Iu(E,I))return!1;for(var Ve=0,f=Me;Ve<f.length;Ve+=1)if(!Ru(f[Ve],Se))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(h,m){var E=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],V=h.canonicalID();if(m.type==="Polygon"){var Z=ic(m.coordinates,I,V),ne=Il(h.geometry(),E,I,V);if(!Iu(E,I))return!1;for(var ce=0,_e=ne;ce<_e.length;ce+=1)if(!nc(_e[ce],Z))return!1}if(m.type==="MultiPolygon"){var Se=cu(m.coordinates,I,V),Me=Il(h.geometry(),E,I,V);if(!Iu(E,I))return!1;for(var Ve=0,f=Me;Ve<f.length;Ve+=1)if(!Hl(f[Ve],Se))return!1}return!0}(o,this.geometries)}return!1},xo.prototype.eachChild=function(){},xo.prototype.outputDefined=function(){return!0},xo.prototype.serialize=function(){return["within",this.geojson]};var sl=function(o,h){this.type=h.type,this.name=o,this.boundExpression=h};sl.parse=function(o,h){if(o.length!==2||typeof o[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");var m=o[1];return h.scope.has(m)?new sl(m,h.scope.get(m)):h.error('Unknown variable "'+m+'". Make sure "'+m+'" has been bound in an enclosing "let" expression before using it.',1)},sl.prototype.evaluate=function(o){return this.boundExpression.evaluate(o)},sl.prototype.eachChild=function(){},sl.prototype.outputDefined=function(){return!1},sl.prototype.serialize=function(){return["var",this.name]};var ra=function(o,h,m,E,I){h===void 0&&(h=[]),E===void 0&&(E=new dt),I===void 0&&(I=[]),this.registry=o,this.path=h,this.key=h.map(function(V){return"["+V+"]"}).join(""),this.scope=E,this.errors=I,this.expectedType=m};function Ji(o,h){for(var m,E=o.length-1,I=0,V=E,Z=0;I<=V;)if((m=o[Z=Math.floor((I+V)/2)])<=h){if(Z===E||h<o[Z+1])return Z;I=Z+1}else{if(!(m>h))throw new Pa("Input is not a number.");V=Z-1}return 0}ra.prototype.parse=function(o,h,m,E,I){return I===void 0&&(I={}),h?this.concat(h,m,E)._parse(o,I):this._parse(o,I)},ra.prototype._parse=function(o,h){function m(_e,Se,Me){return Me==="assert"?new mo(Se,[_e]):Me==="coerce"?new bo(Se,[_e]):_e}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var E=o[0];if(typeof E!="string")return this.error("Expression name must be a string, but found "+typeof E+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var I=this.registry[E];if(I){var V=I.parse(o,this);if(!V)return null;if(this.expectedType){var Z=this.expectedType,ne=V.type;if(Z.kind!=="string"&&Z.kind!=="number"&&Z.kind!=="boolean"&&Z.kind!=="object"&&Z.kind!=="array"||ne.kind!=="value")if(Z.kind!=="color"&&Z.kind!=="formatted"&&Z.kind!=="resolvedImage"||ne.kind!=="value"&&ne.kind!=="string"){if(this.checkSubtype(Z,ne))return null}else V=m(V,Z,h.typeAnnotation||"coerce");else V=m(V,Z,h.typeAnnotation||"assert")}if(!(V instanceof $o)&&V.type.kind!=="resolvedImage"&&function _e(Se){if(Se instanceof sl)return _e(Se.boundExpression);if(Se instanceof Ia&&Se.name==="error"||Se instanceof Ga||Se instanceof xo)return!1;var Me=Se instanceof bo||Se instanceof mo,Ve=!0;return Se.eachChild(function(f){Ve=Me?Ve&&_e(f):Ve&&f instanceof $o}),!!Ve&&ol(Se)&&ac(Se,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(V)){var ce=new No;try{V=new $o(V.type,V.evaluate(ce))}catch(_e){return this.error(_e.message),null}}return V}return this.error('Unknown expression "'+E+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof o+" instead.")},ra.prototype.concat=function(o,h,m){var E=typeof o=="number"?this.path.concat(o):this.path,I=m?this.scope.concat(m):this.scope;return new ra(this.registry,E,h||null,I,this.errors)},ra.prototype.error=function(o){for(var h=[],m=arguments.length-1;m-- >0;)h[m]=arguments[m+1];var E=""+this.key+h.map(function(I){return"["+I+"]"}).join("");this.errors.push(new nt(E,o))},ra.prototype.checkSubtype=function(o,h){var m=Dn(o,h);return m&&this.error(m),m};var js=function(o,h,m){this.type=o,this.input=h,this.labels=[],this.outputs=[];for(var E=0,I=m;E<I.length;E+=1){var V=I[E],Z=V[1];this.labels.push(V[0]),this.outputs.push(Z)}};function aa(o,h,m){return o*(1-m)+h*m}js.parse=function(o,h){if(o.length-1<4)return h.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if((o.length-1)%2!=0)return h.error("Expected an even number of arguments.");var m=h.parse(o[1],1,Xe);if(!m)return null;var E=[],I=null;h.expectedType&&h.expectedType.kind!=="value"&&(I=h.expectedType);for(var V=1;V<o.length;V+=2){var Z=V===1?-1/0:o[V],ne=o[V+1],ce=V,_e=V+1;if(typeof Z!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ce);if(E.length&&E[E.length-1][0]>=Z)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ce);var Se=h.parse(ne,_e,I);if(!Se)return null;I=I||Se.type,E.push([Z,Se])}return new js(I,m,E)},js.prototype.evaluate=function(o){var h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(o);var E=this.input.evaluate(o);if(E<=h[0])return m[0].evaluate(o);var I=h.length;return E>=h[I-1]?m[I-1].evaluate(o):m[Ji(h,E)].evaluate(o)},js.prototype.eachChild=function(o){o(this.input);for(var h=0,m=this.outputs;h<m.length;h+=1)o(m[h])},js.prototype.outputDefined=function(){return this.outputs.every(function(o){return o.outputDefined()})},js.prototype.serialize=function(){for(var o=["step",this.input.serialize()],h=0;h<this.labels.length;h++)h>0&&o.push(this.labels[h]),o.push(this.outputs[h].serialize());return o};var Du=Object.freeze({__proto__:null,number:aa,color:function(o,h,m){return new Fn(aa(o.r,h.r,m),aa(o.g,h.g,m),aa(o.b,h.b,m),aa(o.a,h.a,m))},array:function(o,h,m){return o.map(function(E,I){return aa(E,h[I],m)})}}),oc=6/29*3*(6/29),Tc=Math.PI/180,tf=180/Math.PI;function Wl(o){return o>.008856451679035631?Math.pow(o,1/3):o/oc+4/29}function oe(o){return o>6/29?o*o*o:oc*(o-4/29)}function ze(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function We(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function tt(o){var h=We(o.r),m=We(o.g),E=We(o.b),I=Wl((.4124564*h+.3575761*m+.1804375*E)/.95047),V=Wl((.2126729*h+.7151522*m+.072175*E)/1);return{l:116*V-16,a:500*(I-V),b:200*(V-Wl((.0193339*h+.119192*m+.9503041*E)/1.08883)),alpha:o.a}}function Ot(o){var h=(o.l+16)/116,m=isNaN(o.a)?h:h+o.a/500,E=isNaN(o.b)?h:h-o.b/200;return h=1*oe(h),m=.95047*oe(m),E=1.08883*oe(E),new Fn(ze(3.2404542*m-1.5371385*h-.4985314*E),ze(-.969266*m+1.8760108*h+.041556*E),ze(.0556434*m-.2040259*h+1.0572252*E),o.alpha)}function _t(o,h,m){var E=h-o;return o+m*(E>180||E<-180?E-360*Math.round(E/360):E)}var Tt={forward:tt,reverse:Ot,interpolate:function(o,h,m){return{l:aa(o.l,h.l,m),a:aa(o.a,h.a,m),b:aa(o.b,h.b,m),alpha:aa(o.alpha,h.alpha,m)}}},xr={forward:function(o){var h=tt(o),m=h.l,E=h.a,I=h.b,V=Math.atan2(I,E)*tf;return{h:V<0?V+360:V,c:Math.sqrt(E*E+I*I),l:m,alpha:o.a}},reverse:function(o){var h=o.h*Tc,m=o.c;return Ot({l:o.l,a:Math.cos(h)*m,b:Math.sin(h)*m,alpha:o.alpha})},interpolate:function(o,h,m){return{h:_t(o.h,h.h,m),c:aa(o.c,h.c,m),l:aa(o.l,h.l,m),alpha:aa(o.alpha,h.alpha,m)}}},Er=Object.freeze({__proto__:null,lab:Tt,hcl:xr}),_r=function(o,h,m,E,I){this.type=o,this.operator=h,this.interpolation=m,this.input=E,this.labels=[],this.outputs=[];for(var V=0,Z=I;V<Z.length;V+=1){var ne=Z[V],ce=ne[1];this.labels.push(ne[0]),this.outputs.push(ce)}};function on(o,h,m,E){var I=E-m,V=o-m;return I===0?0:h===1?V/I:(Math.pow(h,V)-1)/(Math.pow(h,I)-1)}_r.interpolationFactor=function(o,h,m,E){var I=0;if(o.name==="exponential")I=on(h,o.base,m,E);else if(o.name==="linear")I=on(h,1,m,E);else if(o.name==="cubic-bezier"){var V=o.controlPoints;I=new d(V[0],V[1],V[2],V[3]).solve(on(h,1,m,E))}return I},_r.parse=function(o,h){var m=o[0],E=o[1],I=o[2],V=o.slice(3);if(!Array.isArray(E)||E.length===0)return h.error("Expected an interpolation type expression.",1);if(E[0]==="linear")E={name:"linear"};else if(E[0]==="exponential"){var Z=E[1];if(typeof Z!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);E={name:"exponential",base:Z}}else{if(E[0]!=="cubic-bezier")return h.error("Unknown interpolation type "+String(E[0]),1,0);var ne=E.slice(1);if(ne.length!==4||ne.some(function(x){return typeof x!="number"||x<0||x>1}))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);E={name:"cubic-bezier",controlPoints:ne}}if(o.length-1<4)return h.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if((o.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(!(I=h.parse(I,2,Xe)))return null;var ce=[],_e=null;m==="interpolate-hcl"||m==="interpolate-lab"?_e=ar:h.expectedType&&h.expectedType.kind!=="value"&&(_e=h.expectedType);for(var Se=0;Se<V.length;Se+=2){var Me=V[Se],Ve=V[Se+1],f=Se+3,u=Se+4;if(typeof Me!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(ce.length&&ce[ce.length-1][0]>=Me)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var p=h.parse(Ve,u,_e);if(!p)return null;_e=_e||p.type,ce.push([Me,p])}return _e.kind==="number"||_e.kind==="color"||_e.kind==="array"&&_e.itemType.kind==="number"&&typeof _e.N=="number"?new _r(_e,m,E,I,ce):h.error("Type "+An(_e)+" is not interpolatable.")},_r.prototype.evaluate=function(o){var h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(o);var E=this.input.evaluate(o);if(E<=h[0])return m[0].evaluate(o);var I=h.length;if(E>=h[I-1])return m[I-1].evaluate(o);var V=Ji(h,E),Z=_r.interpolationFactor(this.interpolation,E,h[V],h[V+1]),ne=m[V].evaluate(o),ce=m[V+1].evaluate(o);return this.operator==="interpolate"?Du[this.type.kind.toLowerCase()](ne,ce,Z):this.operator==="interpolate-hcl"?xr.reverse(xr.interpolate(xr.forward(ne),xr.forward(ce),Z)):Tt.reverse(Tt.interpolate(Tt.forward(ne),Tt.forward(ce),Z))},_r.prototype.eachChild=function(o){o(this.input);for(var h=0,m=this.outputs;h<m.length;h+=1)o(m[h])},_r.prototype.outputDefined=function(){return this.outputs.every(function(o){return o.outputDefined()})},_r.prototype.serialize=function(){var o;o=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var h=[this.operator,o,this.input.serialize()],m=0;m<this.labels.length;m++)h.push(this.labels[m],this.outputs[m].serialize());return h};var Gr=function(o,h){this.type=o,this.args=h};Gr.parse=function(o,h){if(o.length<2)return h.error("Expectected at least one argument.");var m=null,E=h.expectedType;E&&E.kind!=="value"&&(m=E);for(var I=[],V=0,Z=o.slice(1);V<Z.length;V+=1){var ne=h.parse(Z[V],1+I.length,m,void 0,{typeAnnotation:"omit"});if(!ne)return null;m=m||ne.type,I.push(ne)}var ce=E&&I.some(function(_e){return Dn(E,_e.type)});return new Gr(ce?fr:m,I)},Gr.prototype.evaluate=function(o){for(var h,m=null,E=0,I=0,V=this.args;I<V.length&&(E++,(m=V[I].evaluate(o))&&m instanceof Oi&&!m.available&&(h||(h=m.name),m=null,E===this.args.length&&(m=h)),m===null);I+=1);return m},Gr.prototype.eachChild=function(o){this.args.forEach(o)},Gr.prototype.outputDefined=function(){return this.args.every(function(o){return o.outputDefined()})},Gr.prototype.serialize=function(){var o=["coalesce"];return this.eachChild(function(h){o.push(h.serialize())}),o};var Kr=function(o,h){this.type=h.type,this.bindings=[].concat(o),this.result=h};Kr.prototype.evaluate=function(o){return this.result.evaluate(o)},Kr.prototype.eachChild=function(o){for(var h=0,m=this.bindings;h<m.length;h+=1)o(m[h][1]);o(this.result)},Kr.parse=function(o,h){if(o.length<4)return h.error("Expected at least 3 arguments, but found "+(o.length-1)+" instead.");for(var m=[],E=1;E<o.length-1;E+=2){var I=o[E];if(typeof I!="string")return h.error("Expected string, but found "+typeof I+" instead.",E);if(/[^a-zA-Z0-9_]/.test(I))return h.error("Variable names must contain only alphanumeric characters or '_'.",E);var V=h.parse(o[E+1],E+1);if(!V)return null;m.push([I,V])}var Z=h.parse(o[o.length-1],o.length-1,h.expectedType,m);return Z?new Kr(m,Z):null},Kr.prototype.outputDefined=function(){return this.result.outputDefined()},Kr.prototype.serialize=function(){for(var o=["let"],h=0,m=this.bindings;h<m.length;h+=1){var E=m[h];o.push(E[0],E[1].serialize())}return o.push(this.result.serialize()),o};var Cr=function(o,h,m){this.type=o,this.index=h,this.input=m};Cr.parse=function(o,h){if(o.length!==3)return h.error("Expected 2 arguments, but found "+(o.length-1)+" instead.");var m=h.parse(o[1],1,Xe),E=h.parse(o[2],2,gn(h.expectedType||fr));return m&&E?new Cr(E.type.itemType,m,E):null},Cr.prototype.evaluate=function(o){var h=this.index.evaluate(o),m=this.input.evaluate(o);if(h<0)throw new Pa("Array index out of bounds: "+h+" < 0.");if(h>=m.length)throw new Pa("Array index out of bounds: "+h+" > "+(m.length-1)+".");if(h!==Math.floor(h))throw new Pa("Array index must be an integer, but found "+h+" instead.");return m[h]},Cr.prototype.eachChild=function(o){o(this.index),o(this.input)},Cr.prototype.outputDefined=function(){return!1},Cr.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Wr=function(o,h){this.type=vt,this.needle=o,this.haystack=h};Wr.parse=function(o,h){if(o.length!==3)return h.error("Expected 2 arguments, but found "+(o.length-1)+" instead.");var m=h.parse(o[1],1,fr),E=h.parse(o[2],2,fr);return m&&E?$n(m.type,[vt,pt,Xe,ct,fr])?new Wr(m,E):h.error("Expected first argument to be of type boolean, string, number or null, but found "+An(m.type)+" instead"):null},Wr.prototype.evaluate=function(o){var h=this.needle.evaluate(o),m=this.haystack.evaluate(o);if(!m)return!1;if(!kn(h,["boolean","string","number","null"]))throw new Pa("Expected first argument to be of type boolean, string, number or null, but found "+An(co(h))+" instead.");if(!kn(m,["string","array"]))throw new Pa("Expected second argument to be of type array or string, but found "+An(co(m))+" instead.");return m.indexOf(h)>=0},Wr.prototype.eachChild=function(o){o(this.needle),o(this.haystack)},Wr.prototype.outputDefined=function(){return!0},Wr.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Yr=function(o,h,m){this.type=Xe,this.needle=o,this.haystack=h,this.fromIndex=m};Yr.parse=function(o,h){if(o.length<=2||o.length>=5)return h.error("Expected 3 or 4 arguments, but found "+(o.length-1)+" instead.");var m=h.parse(o[1],1,fr),E=h.parse(o[2],2,fr);if(!m||!E)return null;if(!$n(m.type,[vt,pt,Xe,ct,fr]))return h.error("Expected first argument to be of type boolean, string, number or null, but found "+An(m.type)+" instead");if(o.length===4){var I=h.parse(o[3],3,Xe);return I?new Yr(m,E,I):null}return new Yr(m,E)},Yr.prototype.evaluate=function(o){var h=this.needle.evaluate(o),m=this.haystack.evaluate(o);if(!kn(h,["boolean","string","number","null"]))throw new Pa("Expected first argument to be of type boolean, string, number or null, but found "+An(co(h))+" instead.");if(!kn(m,["string","array"]))throw new Pa("Expected second argument to be of type array or string, but found "+An(co(m))+" instead.");if(this.fromIndex){var E=this.fromIndex.evaluate(o);return m.indexOf(h,E)}return m.indexOf(h)},Yr.prototype.eachChild=function(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)},Yr.prototype.outputDefined=function(){return!1},Yr.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var bn=function(o,h,m,E,I,V){this.inputType=o,this.type=h,this.input=m,this.cases=E,this.outputs=I,this.otherwise=V};bn.parse=function(o,h){if(o.length<5)return h.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if(o.length%2!=1)return h.error("Expected an even number of arguments.");var m,E;h.expectedType&&h.expectedType.kind!=="value"&&(E=h.expectedType);for(var I={},V=[],Z=2;Z<o.length-1;Z+=2){var ne=o[Z],ce=o[Z+1];Array.isArray(ne)||(ne=[ne]);var _e=h.concat(Z);if(ne.length===0)return _e.error("Expected at least one branch label.");for(var Se=0,Me=ne;Se<Me.length;Se+=1){var Ve=Me[Se];if(typeof Ve!="number"&&typeof Ve!="string")return _e.error("Branch labels must be numbers or strings.");if(typeof Ve=="number"&&Math.abs(Ve)>Number.MAX_SAFE_INTEGER)return _e.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Ve=="number"&&Math.floor(Ve)!==Ve)return _e.error("Numeric branch labels must be integer values.");if(m){if(_e.checkSubtype(m,co(Ve)))return null}else m=co(Ve);if(I[String(Ve)]!==void 0)return _e.error("Branch labels must be unique.");I[String(Ve)]=V.length}var f=h.parse(ce,Z,E);if(!f)return null;E=E||f.type,V.push(f)}var u=h.parse(o[1],1,fr);if(!u)return null;var p=h.parse(o[o.length-1],o.length-1,E);return p?u.type.kind!=="value"&&h.concat(1).checkSubtype(m,u.type)?null:new bn(m,E,u,I,V,p):null},bn.prototype.evaluate=function(o){var h=this.input.evaluate(o);return(co(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(o)},bn.prototype.eachChild=function(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)},bn.prototype.outputDefined=function(){return this.outputs.every(function(o){return o.outputDefined()})&&this.otherwise.outputDefined()},bn.prototype.serialize=function(){for(var o=this,h=["match",this.input.serialize()],m=[],E={},I=0,V=Object.keys(this.cases).sort();I<V.length;I+=1){var Z=V[I];(Me=E[this.cases[Z]])===void 0?(E[this.cases[Z]]=m.length,m.push([this.cases[Z],[Z]])):m[Me][1].push(Z)}for(var ne=function(f){return o.inputType.kind==="number"?Number(f):f},ce=0,_e=m;ce<_e.length;ce+=1){var Se=_e[ce],Me=Se[0],Ve=Se[1];h.push(Ve.length===1?ne(Ve[0]):Ve.map(ne)),h.push(this.outputs[outputIndex$1].serialize())}return h.push(this.otherwise.serialize()),h};var On=function(o,h,m){this.type=o,this.branches=h,this.otherwise=m};On.parse=function(o,h){if(o.length<4)return h.error("Expected at least 3 arguments, but found only "+(o.length-1)+".");if(o.length%2!=0)return h.error("Expected an odd number of arguments.");var m;h.expectedType&&h.expectedType.kind!=="value"&&(m=h.expectedType);for(var E=[],I=1;I<o.length-1;I+=2){var V=h.parse(o[I],I,vt);if(!V)return null;var Z=h.parse(o[I+1],I+1,m);if(!Z)return null;E.push([V,Z]),m=m||Z.type}var ne=h.parse(o[o.length-1],o.length-1,m);return ne?new On(m,E,ne):null},On.prototype.evaluate=function(o){for(var h=0,m=this.branches;h<m.length;h+=1){var E=m[h],I=E[1];if(E[0].evaluate(o))return I.evaluate(o)}return this.otherwise.evaluate(o)},On.prototype.eachChild=function(o){for(var h=0,m=this.branches;h<m.length;h+=1){var E=m[h],I=E[1];o(E[0]),o(I)}o(this.otherwise)},On.prototype.outputDefined=function(){return this.branches.every(function(o){return o[1].outputDefined()})&&this.otherwise.outputDefined()},On.prototype.serialize=function(){var o=["case"];return this.eachChild(function(h){o.push(h.serialize())}),o};var ei=function(o,h,m,E){this.type=o,this.input=h,this.beginIndex=m,this.endIndex=E};function jn(o,h){return o==="=="||o==="!="?h.kind==="boolean"||h.kind==="string"||h.kind==="number"||h.kind==="null"||h.kind==="value":h.kind==="string"||h.kind==="number"||h.kind==="value"}function Or(o,h,m,E){return E.compare(h,m)===0}function yn(o,h,m){var E=o!=="=="&&o!=="!=";return function(){function I(V,Z,ne){this.type=vt,this.lhs=V,this.rhs=Z,this.collator=ne,this.hasUntypedArgument=V.type.kind==="value"||Z.type.kind==="value"}return I.parse=function(V,Z){if(V.length!==3&&V.length!==4)return Z.error("Expected two or three arguments.");var ne=V[0],ce=Z.parse(V[1],1,fr);if(!ce)return null;if(!jn(ne,ce.type))return Z.concat(1).error('"'+ne+`" comparisons are not supported for type '`+An(ce.type)+"'.");var _e=Z.parse(V[2],2,fr);if(!_e)return null;if(!jn(ne,_e.type))return Z.concat(2).error('"'+ne+`" comparisons are not supported for type '`+An(_e.type)+"'.");if(ce.type.kind!==_e.type.kind&&ce.type.kind!=="value"&&_e.type.kind!=="value")return Z.error("Cannot compare types '"+An(ce.type)+"' and '"+An(_e.type)+"'.");E&&(ce.type.kind==="value"&&_e.type.kind!=="value"?ce=new mo(_e.type,[ce]):ce.type.kind!=="value"&&_e.type.kind==="value"&&(_e=new mo(ce.type,[_e])));var Se=null;if(V.length===4){if(ce.type.kind!=="string"&&_e.type.kind!=="string"&&ce.type.kind!=="value"&&_e.type.kind!=="value")return Z.error("Cannot use collator to compare non-string types.");if(!(Se=Z.parse(V[3],3,qr)))return null}return new I(ce,_e,Se)},I.prototype.evaluate=function(V){var Z=this.lhs.evaluate(V),ne=this.rhs.evaluate(V);if(E&&this.hasUntypedArgument){var ce=co(Z),_e=co(ne);if(ce.kind!==_e.kind||ce.kind!=="string"&&ce.kind!=="number")throw new Pa('Expected arguments for "'+o+'" to be (string, string) or (number, number), but found ('+ce.kind+", "+_e.kind+") instead.")}if(this.collator&&!E&&this.hasUntypedArgument){var Se=co(Z),Me=co(ne);if(Se.kind!=="string"||Me.kind!=="string")return h(V,Z,ne)}return this.collator?m(V,Z,ne,this.collator.evaluate(V)):h(V,Z,ne)},I.prototype.eachChild=function(V){V(this.lhs),V(this.rhs),this.collator&&V(this.collator)},I.prototype.outputDefined=function(){return!0},I.prototype.serialize=function(){var V=[o];return this.eachChild(function(Z){V.push(Z.serialize())}),V},I}()}ei.parse=function(o,h){if(o.length<=2||o.length>=5)return h.error("Expected 3 or 4 arguments, but found "+(o.length-1)+" instead.");var m=h.parse(o[1],1,fr),E=h.parse(o[2],2,Xe);if(!m||!E)return null;if(!$n(m.type,[gn(fr),pt,fr]))return h.error("Expected first argument to be of type array or string, but found "+An(m.type)+" instead");if(o.length===4){var I=h.parse(o[3],3,Xe);return I?new ei(m.type,m,E,I):null}return new ei(m.type,m,E)},ei.prototype.evaluate=function(o){var h=this.input.evaluate(o),m=this.beginIndex.evaluate(o);if(!kn(h,["string","array"]))throw new Pa("Expected first argument to be of type array or string, but found "+An(co(h))+" instead.");if(this.endIndex){var E=this.endIndex.evaluate(o);return h.slice(m,E)}return h.slice(m)},ei.prototype.eachChild=function(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)},ei.prototype.outputDefined=function(){return!1},ei.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Cn=yn("==",function(o,h,m){return h===m},Or),ri=yn("!=",function(o,h,m){return h!==m},function(o,h,m,E){return!Or(0,h,m,E)}),Gn=yn("<",function(o,h,m){return h<m},function(o,h,m,E){return E.compare(h,m)<0}),ni=yn(">",function(o,h,m){return h>m},function(o,h,m,E){return E.compare(h,m)>0}),sn=yn("<=",function(o,h,m){return h<=m},function(o,h,m,E){return E.compare(h,m)<=0}),Vn=yn(">=",function(o,h,m){return h>=m},function(o,h,m,E){return E.compare(h,m)>=0}),vn=function(o,h,m,E,I){this.type=pt,this.number=o,this.locale=h,this.currency=m,this.minFractionDigits=E,this.maxFractionDigits=I};vn.parse=function(o,h){if(o.length!==3)return h.error("Expected two arguments.");var m=h.parse(o[1],1,Xe);if(!m)return null;var E=o[2];if(typeof E!="object"||Array.isArray(E))return h.error("NumberFormat options argument must be an object.");var I=null;if(E.locale&&!(I=h.parse(E.locale,1,pt)))return null;var V=null;if(E.currency&&!(V=h.parse(E.currency,1,pt)))return null;var Z=null;if(E["min-fraction-digits"]&&!(Z=h.parse(E["min-fraction-digits"],1,Xe)))return null;var ne=null;return E["max-fraction-digits"]&&!(ne=h.parse(E["max-fraction-digits"],1,Xe))?null:new vn(m,I,V,Z,ne)},vn.prototype.evaluate=function(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))},vn.prototype.eachChild=function(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)},vn.prototype.outputDefined=function(){return!1},vn.prototype.serialize=function(){var o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]};var Un=function(o){this.type=Xe,this.input=o};Un.parse=function(o,h){if(o.length!==2)return h.error("Expected 1 argument, but found "+(o.length-1)+" instead.");var m=h.parse(o[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?h.error("Expected argument of type string or array, but found "+An(m.type)+" instead."):new Un(m):null},Un.prototype.evaluate=function(o){var h=this.input.evaluate(o);if(typeof h=="string"||Array.isArray(h))return h.length;throw new Pa("Expected value to be of type string or array, but found "+An(co(h))+" instead.")},Un.prototype.eachChild=function(o){o(this.input)},Un.prototype.outputDefined=function(){return!1},Un.prototype.serialize=function(){var o=["length"];return this.eachChild(function(h){o.push(h.serialize())}),o};var Ti={"==":Cn,"!=":ri,">":ni,"<":Gn,">=":Vn,"<=":sn,array:mo,at:Cr,boolean:mo,case:On,coalesce:Gr,collator:Ga,format:Ko,image:Fs,in:Wr,"index-of":Yr,interpolate:_r,"interpolate-hcl":_r,"interpolate-lab":_r,length:Un,let:Kr,literal:$o,match:bn,number:mo,"number-format":vn,object:mo,slice:ei,step:js,string:mo,"to-boolean":bo,"to-color":bo,"to-number":bo,"to-string":bo,var:sl,within:xo};function Hi(o,h){var m=h[0],E=h[1],I=h[2],V=h[3];m=m.evaluate(o),E=E.evaluate(o),I=I.evaluate(o);var Z=V?V.evaluate(o):1,ne=ku(m,E,I,Z);if(ne)throw new Pa(ne);return new Fn(m/255*Z,E/255*Z,I/255*Z,Z)}function Yn(o,h){return o in h}function Fi(o,h){var m=h[o];return m===void 0?null:m}function xa(o){return{type:o}}function wo(o){return{result:"success",value:o}}function Wn(o){return{result:"error",value:o}}function sa(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Na(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function eo(o){return!!o.expression&&o.expression.interpolated}function wi(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Vs(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function ps(o){return o}function so(o,h,m){return o!==void 0?o:h!==void 0?h:m!==void 0?m:void 0}function rs(o,h,m,E,I){return so(typeof m===I?E[m]:void 0,o.default,h.default)}function zu(o,h,m){if(wi(m)!=="number")return so(o.default,h.default);var E=o.stops.length;if(E===1||m<=o.stops[0][0])return o.stops[0][1];if(m>=o.stops[E-1][0])return o.stops[E-1][1];var I=Ji(o.stops.map(function(V){return V[0]}),m);return o.stops[I][1]}function Js(o,h,m){var E=o.base!==void 0?o.base:1;if(wi(m)!=="number")return so(o.default,h.default);var I=o.stops.length;if(I===1||m<=o.stops[0][0])return o.stops[0][1];if(m>=o.stops[I-1][0])return o.stops[I-1][1];var V=Ji(o.stops.map(function(Me){return Me[0]}),m),Z=function(Me,Ve,f,u){var p=u-f,x=Me-f;return p===0?0:Ve===1?x/p:(Math.pow(Ve,x)-1)/(Math.pow(Ve,p)-1)}(m,E,o.stops[V][0],o.stops[V+1][0]),ne=o.stops[V][1],ce=o.stops[V+1][1],_e=Du[h.type]||ps;if(o.colorSpace&&o.colorSpace!=="rgb"){var Se=Er[o.colorSpace];_e=function(Me,Ve){return Se.reverse(Se.interpolate(Se.forward(Me),Se.forward(Ve),Z))}}return typeof ne.evaluate=="function"?{evaluate:function(){for(var Me=[],Ve=arguments.length;Ve--;)Me[Ve]=arguments[Ve];var f=ne.evaluate.apply(void 0,Me),u=ce.evaluate.apply(void 0,Me);if(f!==void 0&&u!==void 0)return _e(f,u,Z)}}:_e(ne,ce,Z)}function Ac(o,h,m){return h.type==="color"?m=Fn.parse(m):h.type==="formatted"?m=Ya.fromString(m.toString()):h.type==="resolvedImage"?m=Oi.fromString(m.toString()):wi(m)===h.type||h.type==="enum"&&h.values[m]||(m=void 0),so(m,o.default,h.default)}Ia.register(Ti,{error:[{kind:"error"},[pt],function(o,h){throw new Pa(h[0].evaluate(o))}],typeof:[pt,[fr],function(o,h){return An(co(h[0].evaluate(o)))}],"to-rgba":[gn(Xe,4),[ar],function(o,h){return h[0].evaluate(o).toArray()}],rgb:[ar,[Xe,Xe,Xe],Hi],rgba:[ar,[Xe,Xe,Xe,Xe],Hi],has:{type:vt,overloads:[[[pt],function(o,h){return Yn(h[0].evaluate(o),o.properties())}],[[pt,Vt],function(o,h){var m=h[1];return Yn(h[0].evaluate(o),m.evaluate(o))}]]},get:{type:fr,overloads:[[[pt],function(o,h){return Fi(h[0].evaluate(o),o.properties())}],[[pt,Vt],function(o,h){var m=h[1];return Fi(h[0].evaluate(o),m.evaluate(o))}]]},"feature-state":[fr,[pt],function(o,h){return Fi(h[0].evaluate(o),o.featureState||{})}],properties:[Vt,[],function(o){return o.properties()}],"geometry-type":[pt,[],function(o){return o.geometryType()}],id:[fr,[],function(o){return o.id()}],zoom:[Xe,[],function(o){return o.globals.zoom}],"heatmap-density":[Xe,[],function(o){return o.globals.heatmapDensity||0}],"line-progress":[Xe,[],function(o){return o.globals.lineProgress||0}],accumulated:[fr,[],function(o){return o.globals.accumulated===void 0?null:o.globals.accumulated}],"+":[Xe,xa(Xe),function(o,h){for(var m=0,E=0,I=h;E<I.length;E+=1)m+=I[E].evaluate(o);return m}],"*":[Xe,xa(Xe),function(o,h){for(var m=1,E=0,I=h;E<I.length;E+=1)m*=I[E].evaluate(o);return m}],"-":{type:Xe,overloads:[[[Xe,Xe],function(o,h){var m=h[1];return h[0].evaluate(o)-m.evaluate(o)}],[[Xe],function(o,h){return-h[0].evaluate(o)}]]},"/":[Xe,[Xe,Xe],function(o,h){var m=h[1];return h[0].evaluate(o)/m.evaluate(o)}],"%":[Xe,[Xe,Xe],function(o,h){var m=h[1];return h[0].evaluate(o)%m.evaluate(o)}],ln2:[Xe,[],function(){return Math.LN2}],pi:[Xe,[],function(){return Math.PI}],e:[Xe,[],function(){return Math.E}],"^":[Xe,[Xe,Xe],function(o,h){var m=h[1];return Math.pow(h[0].evaluate(o),m.evaluate(o))}],sqrt:[Xe,[Xe],function(o,h){return Math.sqrt(h[0].evaluate(o))}],log10:[Xe,[Xe],function(o,h){return Math.log(h[0].evaluate(o))/Math.LN10}],ln:[Xe,[Xe],function(o,h){return Math.log(h[0].evaluate(o))}],log2:[Xe,[Xe],function(o,h){return Math.log(h[0].evaluate(o))/Math.LN2}],sin:[Xe,[Xe],function(o,h){return Math.sin(h[0].evaluate(o))}],cos:[Xe,[Xe],function(o,h){return Math.cos(h[0].evaluate(o))}],tan:[Xe,[Xe],function(o,h){return Math.tan(h[0].evaluate(o))}],asin:[Xe,[Xe],function(o,h){return Math.asin(h[0].evaluate(o))}],acos:[Xe,[Xe],function(o,h){return Math.acos(h[0].evaluate(o))}],atan:[Xe,[Xe],function(o,h){return Math.atan(h[0].evaluate(o))}],min:[Xe,xa(Xe),function(o,h){return Math.min.apply(Math,h.map(function(m){return m.evaluate(o)}))}],max:[Xe,xa(Xe),function(o,h){return Math.max.apply(Math,h.map(function(m){return m.evaluate(o)}))}],abs:[Xe,[Xe],function(o,h){return Math.abs(h[0].evaluate(o))}],round:[Xe,[Xe],function(o,h){var m=h[0].evaluate(o);return m<0?-Math.round(-m):Math.round(m)}],floor:[Xe,[Xe],function(o,h){return Math.floor(h[0].evaluate(o))}],ceil:[Xe,[Xe],function(o,h){return Math.ceil(h[0].evaluate(o))}],"filter-==":[vt,[pt,fr],function(o,h){var m=h[0],E=h[1];return o.properties()[m.value]===E.value}],"filter-id-==":[vt,[fr],function(o,h){var m=h[0];return o.id()===m.value}],"filter-type-==":[vt,[pt],function(o,h){var m=h[0];return o.geometryType()===m.value}],"filter-<":[vt,[pt,fr],function(o,h){var m=h[0],E=h[1],I=o.properties()[m.value],V=E.value;return typeof I==typeof V&&I<V}],"filter-id-<":[vt,[fr],function(o,h){var m=h[0],E=o.id(),I=m.value;return typeof E==typeof I&&E<I}],"filter->":[vt,[pt,fr],function(o,h){var m=h[0],E=h[1],I=o.properties()[m.value],V=E.value;return typeof I==typeof V&&I>V}],"filter-id->":[vt,[fr],function(o,h){var m=h[0],E=o.id(),I=m.value;return typeof E==typeof I&&E>I}],"filter-<=":[vt,[pt,fr],function(o,h){var m=h[0],E=h[1],I=o.properties()[m.value],V=E.value;return typeof I==typeof V&&I<=V}],"filter-id-<=":[vt,[fr],function(o,h){var m=h[0],E=o.id(),I=m.value;return typeof E==typeof I&&E<=I}],"filter->=":[vt,[pt,fr],function(o,h){var m=h[0],E=h[1],I=o.properties()[m.value],V=E.value;return typeof I==typeof V&&I>=V}],"filter-id->=":[vt,[fr],function(o,h){var m=h[0],E=o.id(),I=m.value;return typeof E==typeof I&&E>=I}],"filter-has":[vt,[fr],function(o,h){return h[0].value in o.properties()}],"filter-has-id":[vt,[],function(o){return o.id()!==null&&o.id()!==void 0}],"filter-type-in":[vt,[gn(pt)],function(o,h){return h[0].value.indexOf(o.geometryType())>=0}],"filter-id-in":[vt,[gn(fr)],function(o,h){return h[0].value.indexOf(o.id())>=0}],"filter-in-small":[vt,[pt,gn(fr)],function(o,h){var m=h[0];return h[1].value.indexOf(o.properties()[m.value])>=0}],"filter-in-large":[vt,[pt,gn(fr)],function(o,h){var m=h[0],E=h[1];return function(I,V,Z,ne){for(;Z<=ne;){var ce=Z+ne>>1;if(V[ce]===I)return!0;V[ce]>I?ne=ce-1:Z=ce+1}return!1}(o.properties()[m.value],E.value,0,E.value.length-1)}],all:{type:vt,overloads:[[[vt,vt],function(o,h){var m=h[1];return h[0].evaluate(o)&&m.evaluate(o)}],[xa(vt),function(o,h){for(var m=0,E=h;m<E.length;m+=1)if(!E[m].evaluate(o))return!1;return!0}]]},any:{type:vt,overloads:[[[vt,vt],function(o,h){var m=h[1];return h[0].evaluate(o)||m.evaluate(o)}],[xa(vt),function(o,h){for(var m=0,E=h;m<E.length;m+=1)if(E[m].evaluate(o))return!0;return!1}]]},"!":[vt,[vt],function(o,h){return!h[0].evaluate(o)}],"is-supported-script":[vt,[pt],function(o,h){var m=o.globals&&o.globals.isSupportedScript;return!m||m(h[0].evaluate(o))}],upcase:[pt,[pt],function(o,h){return h[0].evaluate(o).toUpperCase()}],downcase:[pt,[pt],function(o,h){return h[0].evaluate(o).toLowerCase()}],concat:[pt,xa(fr),function(o,h){return h.map(function(m){return Bs(m.evaluate(o))}).join("")}],"resolved-locale":[pt,[qr],function(o,h){return h[0].evaluate(o).resolvedLocale()}]});var Ts=function(o,h){this.expression=o,this._warningHistory={},this._evaluator=new No,this._defaultValue=h?function(m){return m.type==="color"&&Vs(m.default)?new Fn(0,0,0,0):m.type==="color"?Fn.parse(m.default)||null:m.default===void 0?null:m.default}(h):null,this._enumValues=h&&h.type==="enum"?h.values:null};function Qs(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Ti}function qs(o,h){var m=new ra(Ti,[],h?function(I){var V={color:ar,string:pt,number:Xe,enum:pt,boolean:vt,formatted:Ar,resolvedImage:ln};return I.type==="array"?gn(V[I.value]||fr,I.length):V[I.type]}(h):void 0),E=m.parse(o,void 0,void 0,void 0,h&&h.type==="string"?{typeAnnotation:"coerce"}:void 0);return E?wo(new Ts(E,h)):Wn(m.errors)}Ts.prototype.evaluateWithoutErrorHandling=function(o,h,m,E,I,V){return this._evaluator.globals=o,this._evaluator.feature=h,this._evaluator.featureState=m,this._evaluator.canonical=E,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=V,this.expression.evaluate(this._evaluator)},Ts.prototype.evaluate=function(o,h,m,E,I,V){this._evaluator.globals=o,this._evaluator.feature=h||null,this._evaluator.featureState=m||null,this._evaluator.canonical=E,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=V||null;try{var Z=this.expression.evaluate(this._evaluator);if(Z==null||typeof Z=="number"&&Z!=Z)return this._defaultValue;if(this._enumValues&&!(Z in this._enumValues))throw new Pa("Expected value to be one of "+Object.keys(this._enumValues).map(function(ne){return JSON.stringify(ne)}).join(", ")+", but found "+JSON.stringify(Z)+" instead.");return Z}catch(ne){return this._warningHistory[ne.message]||(this._warningHistory[ne.message]=!0,typeof console<"u"&&console.warn(ne.message)),this._defaultValue}};var Lu=function(o,h){this.kind=o,this._styleExpression=h,this.isStateDependent=o!=="constant"&&!$i(h.expression)};Lu.prototype.evaluateWithoutErrorHandling=function(o,h,m,E,I,V){return this._styleExpression.evaluateWithoutErrorHandling(o,h,m,E,I,V)},Lu.prototype.evaluate=function(o,h,m,E,I,V){return this._styleExpression.evaluate(o,h,m,E,I,V)};var ll=function(o,h,m,E){this.kind=o,this.zoomStops=m,this._styleExpression=h,this.isStateDependent=o!=="camera"&&!$i(h.expression),this.interpolationType=E};function Ml(o,h){if((o=qs(o,h)).result==="error")return o;var m=o.value.expression,E=ol(m);if(!E&&!sa(h))return Wn([new nt("","data expressions not supported")]);var I=ac(m,["zoom"]);if(!I&&!Na(h))return Wn([new nt("","zoom expressions not supported")]);var V=function Z(ne){var ce=null;if(ne instanceof Kr)ce=Z(ne.result);else if(ne instanceof Gr)for(var _e=0,Se=ne.args;_e<Se.length&&!(ce=Z(Se[_e]));_e+=1);else(ne instanceof js||ne instanceof _r)&&ne.input instanceof Ia&&ne.input.name==="zoom"&&(ce=ne);return ce instanceof nt||ne.eachChild(function(Me){var Ve=Z(Me);Ve instanceof nt?ce=Ve:!ce&&Ve?ce=new nt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):ce&&Ve&&ce!==Ve&&(ce=new nt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),ce}(m);return V||I?V instanceof nt?Wn([V]):V instanceof _r&&!eo(h)?Wn([new nt("",'"interpolate" expressions cannot be used with this property')]):wo(V?new ll(E?"camera":"composite",o.value,V.labels,V instanceof _r?V.interpolation:void 0):new Lu(E?"constant":"source",o.value)):Wn([new nt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}ll.prototype.evaluateWithoutErrorHandling=function(o,h,m,E,I,V){return this._styleExpression.evaluateWithoutErrorHandling(o,h,m,E,I,V)},ll.prototype.evaluate=function(o,h,m,E,I,V){return this._styleExpression.evaluate(o,h,m,E,I,V)},ll.prototype.interpolationFactor=function(o,h,m){return this.interpolationType?_r.interpolationFactor(this.interpolationType,o,h,m):0};var $u=function(o,h){this._parameters=o,this._specification=h,we(this,function m(E,I){var V,Z,ne,ce=I.type==="color",_e=E.stops&&typeof E.stops[0][0]=="object",Se=_e||!(_e||E.property!==void 0),Me=E.type||(eo(I)?"exponential":"interval");if(ce&&((E=we({},E)).stops&&(E.stops=E.stops.map(function(De){return[De[0],Fn.parse(De[1])]})),E.default=Fn.parse(E.default?E.default:I.default)),E.colorSpace&&E.colorSpace!=="rgb"&&!Er[E.colorSpace])throw new Error("Unknown color space: "+E.colorSpace);if(Me==="exponential")V=Js;else if(Me==="interval")V=zu;else if(Me==="categorical"){V=rs,Z=Object.create(null);for(var Ve=0,f=E.stops;Ve<f.length;Ve+=1){var u=f[Ve];Z[u[0]]=u[1]}ne=typeof E.stops[0][0]}else{if(Me!=="identity")throw new Error('Unknown function type "'+Me+'"');V=Ac}if(_e){for(var p={},x=[],T=0;T<E.stops.length;T++){var D=E.stops[T],j=D[0].zoom;p[j]===void 0&&(p[j]={zoom:j,type:E.type,property:E.property,default:E.default,stops:[]},x.push(j)),p[j].stops.push([D[0].value,D[1]])}for(var J=[],ie=0,le=x;ie<le.length;ie+=1){var me=le[ie];J.push([p[me].zoom,m(p[me],I)])}var xe={name:"linear"};return{kind:"composite",interpolationType:xe,interpolationFactor:_r.interpolationFactor.bind(void 0,xe),zoomStops:J.map(function(De){return De[0]}),evaluate:function(De,Be){var rt=De.zoom;return Js({stops:J,base:E.base},I,rt).evaluate(rt,Be)}}}if(Se){var Re=Me==="exponential"?{name:"exponential",base:E.base!==void 0?E.base:1}:null;return{kind:"camera",interpolationType:Re,interpolationFactor:_r.interpolationFactor.bind(void 0,Re),zoomStops:E.stops.map(function(De){return De[0]}),evaluate:function(De){return V(E,I,De.zoom,Z,ne)}}}return{kind:"source",evaluate:function(De,Be){var rt=Be&&Be.properties?Be.properties[E.property]:void 0;return rt===void 0?so(E.default,I.default):V(E,I,rt,Z,ne)}}}(this._parameters,this._specification))};function Ua(o){var h=o.key,m=o.value,E=o.valueSpec||{},I=o.objectElementValidators||{},V=o.style,Z=o.styleSpec,ne=[],ce=wi(m);if(ce!=="object")return[new ye(h,m,"object expected, "+ce+" found")];for(var _e in m){var Se=_e.split(".")[0],Me=E[Se]||E["*"],Ve=void 0;if(I[Se])Ve=I[Se];else if(E[Se])Ve=Zi;else if(I["*"])Ve=I["*"];else{if(!E["*"]){ne.push(new ye(h,m[_e],'unknown property "'+_e+'"'));continue}Ve=Zi}ne=ne.concat(Ve({key:(h&&h+".")+_e,value:m[_e],valueSpec:Me,style:V,styleSpec:Z,object:m,objectKey:_e},m))}for(var f in E)I[f]||E[f].required&&E[f].default===void 0&&m[f]===void 0&&ne.push(new ye(h,m,'missing required property "'+f+'"'));return ne}function Zl(o){var h=o.value,m=o.valueSpec,E=o.style,I=o.styleSpec,V=o.key,Z=o.arrayElementValidator||Zi;if(wi(h)!=="array")return[new ye(V,h,"array expected, "+wi(h)+" found")];if(m.length&&h.length!==m.length)return[new ye(V,h,"array length "+m.length+" expected, length "+h.length+" found")];if(m["min-length"]&&h.length<m["min-length"])return[new ye(V,h,"array length at least "+m["min-length"]+" expected, length "+h.length+" found")];var ne={type:m.value,values:m.values};I.$version<7&&(ne.function=m.function),wi(m.value)==="object"&&(ne=m.value);for(var ce=[],_e=0;_e<h.length;_e++)ce=ce.concat(Z({array:h,arrayIndex:_e,value:h[_e],valueSpec:ne,style:E,styleSpec:I,key:V+"["+_e+"]"}));return ce}function Nu(o){var h=o.key,m=o.value,E=o.valueSpec,I=wi(m);return I==="number"&&m!=m&&(I="NaN"),I!=="number"?[new ye(h,m,"number expected, "+I+" found")]:"minimum"in E&&m<E.minimum?[new ye(h,m,m+" is less than the minimum value "+E.minimum)]:"maximum"in E&&m>E.maximum?[new ye(h,m,m+" is greater than the maximum value "+E.maximum)]:[]}function Bo(o){var h,m,E,I=o.valueSpec,V=Ce(o.value.type),Z={},ne=V!=="categorical"&&o.value.property===void 0,ce=!ne,_e=wi(o.value.stops)==="array"&&wi(o.value.stops[0])==="array"&&wi(o.value.stops[0][0])==="object",Se=Ua({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(f){if(V==="identity")return[new ye(f.key,f.value,'identity function may not have a "stops" property')];var u=[],p=f.value;return u=u.concat(Zl({key:f.key,value:p,valueSpec:f.valueSpec,style:f.style,styleSpec:f.styleSpec,arrayElementValidator:Me})),wi(p)==="array"&&p.length===0&&u.push(new ye(f.key,p,"array must have at least one stop")),u},default:function(f){return Zi({key:f.key,value:f.value,valueSpec:I,style:f.style,styleSpec:f.styleSpec})}}});return V==="identity"&&ne&&Se.push(new ye(o.key,o.value,'missing required property "property"')),V==="identity"||o.value.stops||Se.push(new ye(o.key,o.value,'missing required property "stops"')),V==="exponential"&&o.valueSpec.expression&&!eo(o.valueSpec)&&Se.push(new ye(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(ce&&!sa(o.valueSpec)?Se.push(new ye(o.key,o.value,"property functions not supported")):ne&&!Na(o.valueSpec)&&Se.push(new ye(o.key,o.value,"zoom functions not supported"))),V!=="categorical"&&!_e||o.value.property!==void 0||Se.push(new ye(o.key,o.value,'"property" property is required')),Se;function Me(f){var u=[],p=f.value,x=f.key;if(wi(p)!=="array")return[new ye(x,p,"array expected, "+wi(p)+" found")];if(p.length!==2)return[new ye(x,p,"array length 2 expected, length "+p.length+" found")];if(_e){if(wi(p[0])!=="object")return[new ye(x,p,"object expected, "+wi(p[0])+" found")];if(p[0].zoom===void 0)return[new ye(x,p,"object stop key must have zoom")];if(p[0].value===void 0)return[new ye(x,p,"object stop key must have value")];if(E&&E>Ce(p[0].zoom))return[new ye(x,p[0].zoom,"stop zoom values must appear in ascending order")];Ce(p[0].zoom)!==E&&(E=Ce(p[0].zoom),m=void 0,Z={}),u=u.concat(Ua({key:x+"[0]",value:p[0],valueSpec:{zoom:{}},style:f.style,styleSpec:f.styleSpec,objectElementValidators:{zoom:Nu,value:Ve}}))}else u=u.concat(Ve({key:x+"[0]",value:p[0],valueSpec:{},style:f.style,styleSpec:f.styleSpec},p));return Qs(Le(p[1]))?u.concat([new ye(x+"[1]",p[1],"expressions are not allowed in function stops.")]):u.concat(Zi({key:x+"[1]",value:p[1],valueSpec:I,style:f.style,styleSpec:f.styleSpec}))}function Ve(f,u){var p=wi(f.value),x=Ce(f.value),T=f.value!==null?f.value:u;if(h){if(p!==h)return[new ye(f.key,T,p+" stop domain type must match previous stop domain type "+h)]}else h=p;if(p!=="number"&&p!=="string"&&p!=="boolean")return[new ye(f.key,T,"stop domain value must be a number, string, or boolean")];if(p!=="number"&&V!=="categorical"){var D="number expected, "+p+" found";return sa(I)&&V===void 0&&(D+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ye(f.key,T,D)]}return V!=="categorical"||p!=="number"||isFinite(x)&&Math.floor(x)===x?V!=="categorical"&&p==="number"&&m!==void 0&&x<m?[new ye(f.key,T,"stop domain values must appear in ascending order")]:(m=x,V==="categorical"&&x in Z?[new ye(f.key,T,"stop domain values must be unique")]:(Z[x]=!0,[])):[new ye(f.key,T,"integer expected, found "+x)]}}function la(o){var h=(o.expressionContext==="property"?Ml:qs)(Le(o.value),o.valueSpec);if(h.result==="error")return h.value.map(function(E){return new ye(""+o.key+E.key,o.value,E.message)});var m=h.value.expression||h.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!m.outputDefined())return[new ye(o.key,o.value,'Invalid data expression for "'+o.propertyKey+'". Output values must be contained as literals within the expression.')];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!$i(m))return[new ye(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!$i(m))return[new ye(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!ac(m,["zoom","feature-state"]))return[new ye(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!ol(m))return[new ye(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ul(o){var h=o.key,m=o.value,E=o.valueSpec,I=[];return Array.isArray(E.values)?E.values.indexOf(Ce(m))===-1&&I.push(new ye(h,m,"expected one of ["+E.values.join(", ")+"], "+JSON.stringify(m)+" found")):Object.keys(E.values).indexOf(Ce(m))===-1&&I.push(new ye(h,m,"expected one of ["+Object.keys(E.values).join(", ")+"], "+JSON.stringify(m)+" found")),I}function Bu(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(var h=0,m=o.slice(1);h<m.length;h+=1){var E=m[h];if(!Bu(E)&&typeof E!="boolean")return!1}return!0;default:return!0}}$u.deserialize=function(o){return new $u(o._parameters,o._specification)},$u.serialize=function(o){return{_parameters:o._parameters,_specification:o._specification}};var sc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function As(o){if(o==null)return{filter:function(){return!0},needGeometry:!1};Bu(o)||(o=fu(o));var h=qs(o,sc);if(h.result==="error")throw new Error(h.value.map(function(m){return m.key+": "+m.message}).join(", "));return{filter:function(m,E,I){return h.value.evaluate(m,E,{},I)},needGeometry:function m(E){if(!Array.isArray(E))return!1;if(E[0]==="within")return!0;for(var I=1;I<E.length;I++)if(m(E[I]))return!0;return!1}(o)}}function ds(o,h){return o<h?-1:o>h?1:0}function fu(o){if(!o)return!0;var h,m=o[0];return o.length<=1?m!=="any":m==="=="?Fu(o[1],o[2],"=="):m==="!="?Uu(Fu(o[1],o[2],"==")):m==="<"||m===">"||m==="<="||m===">="?Fu(o[1],o[2],m):m==="any"?(h=o.slice(1),["any"].concat(h.map(fu))):m==="all"?["all"].concat(o.slice(1).map(fu)):m==="none"?["all"].concat(o.slice(1).map(fu).map(Uu)):m==="in"?Dh(o[1],o.slice(2)):m==="!in"?Uu(Dh(o[1],o.slice(2))):m==="has"?kc(o[1]):m==="!has"?Uu(kc(o[1])):m!=="within"||o}function Fu(o,h,m){switch(o){case"$type":return["filter-type-"+m,h];case"$id":return["filter-id-"+m,h];default:return["filter-"+m,o,h]}}function Dh(o,h){if(h.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",h]];case"$id":return["filter-id-in",["literal",h]];default:return h.length>200&&!h.some(function(m){return typeof m!=typeof h[0]})?["filter-in-large",o,["literal",h.sort(ds)]]:["filter-in-small",o,["literal",h]]}}function kc(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Uu(o){return["!",o]}function ms(o){return Bu(Le(o.value))?la(we({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function h(m){var E=m.value,I=m.key;if(wi(E)!=="array")return[new ye(I,E,"array expected, "+wi(E)+" found")];var V,Z=m.styleSpec,ne=[];if(E.length<1)return[new ye(I,E,"filter array must have at least 1 element")];switch(ne=ne.concat(ul({key:I+"[0]",value:E[0],valueSpec:Z.filter_operator,style:m.style,styleSpec:m.styleSpec})),Ce(E[0])){case"<":case"<=":case">":case">=":E.length>=2&&Ce(E[1])==="$type"&&ne.push(new ye(I,E,'"$type" cannot be use with operator "'+E[0]+'"'));case"==":case"!=":E.length!==3&&ne.push(new ye(I,E,'filter array for operator "'+E[0]+'" must have 3 elements'));case"in":case"!in":E.length>=2&&(V=wi(E[1]))!=="string"&&ne.push(new ye(I+"[1]",E[1],"string expected, "+V+" found"));for(var ce=2;ce<E.length;ce++)V=wi(E[ce]),Ce(E[1])==="$type"?ne=ne.concat(ul({key:I+"["+ce+"]",value:E[ce],valueSpec:Z.geometry_type,style:m.style,styleSpec:m.styleSpec})):V!=="string"&&V!=="number"&&V!=="boolean"&&ne.push(new ye(I+"["+ce+"]",E[ce],"string, number, or boolean expected, "+V+" found"));break;case"any":case"all":case"none":for(var _e=1;_e<E.length;_e++)ne=ne.concat(h({key:I+"["+_e+"]",value:E[_e],style:m.style,styleSpec:m.styleSpec}));break;case"has":case"!has":V=wi(E[1]),E.length!==2?ne.push(new ye(I,E,'filter array for "'+E[0]+'" operator must have 2 elements')):V!=="string"&&ne.push(new ye(I+"[1]",E[1],"string expected, "+V+" found"));break;case"within":V=wi(E[1]),E.length!==2?ne.push(new ye(I,E,'filter array for "'+E[0]+'" operator must have 2 elements')):V!=="object"&&ne.push(new ye(I+"[1]",E[1],"object expected, "+V+" found"))}return ne}(o)}function cl(o,h){var m=o.key,E=o.style,I=o.styleSpec,V=o.value,Z=o.objectKey,ne=I[h+"_"+o.layerType];if(!ne)return[];var ce=Z.match(/^(.*)-transition$/);if(h==="paint"&&ce&&ne[ce[1]]&&ne[ce[1]].transition)return Zi({key:m,value:V,valueSpec:I.transition,style:E,styleSpec:I});var _e,Se=o.valueSpec||ne[Z];if(!Se)return[new ye(m,V,'unknown property "'+Z+'"')];if(wi(V)==="string"&&sa(Se)&&!Se.tokens&&(_e=/^{([^}]+)}$/.exec(V)))return[new ye(m,V,'"'+Z+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(_e[1])+" }`.")];var Me=[];return o.layerType==="symbol"&&(Z==="text-field"&&E&&!E.glyphs&&Me.push(new ye(m,V,'use of "text-field" requires a style "glyphs" property')),Z==="text-font"&&Vs(Le(V))&&Ce(V.type)==="identity"&&Me.push(new ye(m,V,'"text-font" does not support identity functions'))),Me.concat(Zi({key:o.key,value:V,valueSpec:Se,style:E,styleSpec:I,expressionContext:"property",propertyType:h,propertyKey:Z}))}function jt(o){return cl(o,"paint")}function kr(o){return cl(o,"layout")}function pr(o){var h=[],m=o.value,E=o.key,I=o.style,V=o.styleSpec;m.type||m.ref||h.push(new ye(E,m,'either "type" or "ref" is required'));var Z,ne=Ce(m.type),ce=Ce(m.ref);if(m.id)for(var _e=Ce(m.id),Se=0;Se<o.arrayIndex;Se++){var Me=I.layers[Se];Ce(Me.id)===_e&&h.push(new ye(E,m.id,'duplicate layer id "'+m.id+'", previously used at line '+Me.id.__line__))}if("ref"in m)["type","source","source-layer","filter","layout"].forEach(function(u){u in m&&h.push(new ye(E,m[u],'"'+u+'" is prohibited for ref layers'))}),I.layers.forEach(function(u){Ce(u.id)===ce&&(Z=u)}),Z?Z.ref?h.push(new ye(E,m.ref,"ref cannot reference another ref layer")):ne=Ce(Z.type):h.push(new ye(E,m.ref,'ref layer "'+ce+'" not found'));else if(ne!=="background")if(m.source){var Ve=I.sources&&I.sources[m.source],f=Ve&&Ce(Ve.type);Ve?f==="vector"&&ne==="raster"?h.push(new ye(E,m.source,'layer "'+m.id+'" requires a raster source')):f==="raster"&&ne!=="raster"?h.push(new ye(E,m.source,'layer "'+m.id+'" requires a vector source')):f!=="vector"||m["source-layer"]?f==="raster-dem"&&ne!=="hillshade"?h.push(new ye(E,m.source,"raster-dem source can only be used with layer type 'hillshade'.")):ne!=="line"||!m.paint||!m.paint["line-gradient"]||f==="geojson"&&Ve.lineMetrics||h.push(new ye(E,m,'layer "'+m.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):h.push(new ye(E,m,'layer "'+m.id+'" must specify a "source-layer"')):h.push(new ye(E,m.source,'source "'+m.source+'" not found'))}else h.push(new ye(E,m,'missing required property "source"'));return h=h.concat(Ua({key:E,value:m,valueSpec:V.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Zi({key:E+".type",value:m.type,valueSpec:V.layer.type,style:o.style,styleSpec:o.styleSpec,object:m,objectKey:"type"})},filter:ms,layout:function(u){return Ua({layer:m,key:u.key,value:u.value,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{"*":function(p){return kr(we({layerType:ne},p))}}})},paint:function(u){return Ua({layer:m,key:u.key,value:u.value,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{"*":function(p){return jt(we({layerType:ne},p))}}})}}}))}function Jr(o){var h=o.value,m=o.key,E=wi(h);return E!=="string"?[new ye(m,h,"string expected, "+E+" found")]:[]}var hi={promoteId:function(o){var h=o.key,m=o.value;if(wi(m)==="string")return Jr({key:h,value:m});var E=[];for(var I in m)E.push.apply(E,Jr({key:h+"."+I,value:m[I]}));return E}};function Wi(o){var h=o.value,m=o.key,E=o.styleSpec,I=o.style;if(!h.type)return[new ye(m,h,'"type" is required')];var V,Z=Ce(h.type);switch(Z){case"vector":case"raster":case"raster-dem":return Ua({key:m,value:h,valueSpec:E["source_"+Z.replace("-","_")],style:o.style,styleSpec:E,objectElementValidators:hi});case"geojson":if(V=Ua({key:m,value:h,valueSpec:E.source_geojson,style:I,styleSpec:E,objectElementValidators:hi}),h.cluster)for(var ne in h.clusterProperties){var ce=h.clusterProperties[ne],_e=ce[0],Se=typeof _e=="string"?[_e,["accumulated"],["get",ne]]:_e;V.push.apply(V,la({key:m+"."+ne+".map",value:ce[1],expressionContext:"cluster-map"})),V.push.apply(V,la({key:m+"."+ne+".reduce",value:Se,expressionContext:"cluster-reduce"}))}return V;case"video":return Ua({key:m,value:h,valueSpec:E.source_video,style:I,styleSpec:E});case"image":return Ua({key:m,value:h,valueSpec:E.source_image,style:I,styleSpec:E});case"canvas":return[new ye(m,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ul({key:m+".type",value:h.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:I,styleSpec:E})}}function ja(o){var h=o.value,m=o.styleSpec,E=m.light,I=o.style,V=[],Z=wi(h);if(h===void 0)return V;if(Z!=="object")return V.concat([new ye("light",h,"object expected, "+Z+" found")]);for(var ne in h){var ce=ne.match(/^(.*)-transition$/);V=V.concat(ce&&E[ce[1]]&&E[ce[1]].transition?Zi({key:ne,value:h[ne],valueSpec:m.transition,style:I,styleSpec:m}):E[ne]?Zi({key:ne,value:h[ne],valueSpec:E[ne],style:I,styleSpec:m}):[new ye(ne,h[ne],'unknown property "'+ne+'"')])}return V}var ii={"*":function(){return[]},array:Zl,boolean:function(o){var h=o.value,m=o.key,E=wi(h);return E!=="boolean"?[new ye(m,h,"boolean expected, "+E+" found")]:[]},number:Nu,color:function(o){var h=o.key,m=o.value,E=wi(m);return E!=="string"?[new ye(h,m,"color expected, "+E+" found")]:Qa(m)===null?[new ye(h,m,'color expected, "'+m+'" found')]:[]},constants:fe,enum:ul,filter:ms,function:Bo,layer:pr,object:Ua,source:Wi,light:ja,string:Jr,formatted:function(o){return Jr(o).length===0?[]:la(o)},resolvedImage:function(o){return Jr(o).length===0?[]:la(o)}};function Zi(o){var h=o.value,m=o.valueSpec,E=o.styleSpec;return m.expression&&Vs(Ce(h))?Bo(o):m.expression&&Qs(Le(h))?la(o):m.type&&ii[m.type]?ii[m.type](o):Ua(we({},o,{valueSpec:m.type?E[m.type]:m}))}function Xl(o){var h=o.value,m=o.key,E=Jr(o);return E.length||(h.indexOf("{fontstack}")===-1&&E.push(new ye(m,h,'"glyphs" url must include a "{fontstack}" token')),h.indexOf("{range}")===-1&&E.push(new ye(m,h,'"glyphs" url must include a "{range}" token'))),E}function to(o,h){h===void 0&&(h=Je);var m=[];return m=m.concat(Zi({key:"",value:o,valueSpec:h.$root,styleSpec:h,style:o,objectElementValidators:{glyphs:Xl,"*":function(){return[]}}})),o.constants&&(m=m.concat(fe({key:"constants",value:o.constants,style:o,styleSpec:h}))),el(m)}function el(o){return[].concat(o).sort(function(h,m){return h.line-m.line})}function Pn(o){return function(){for(var h=[],m=arguments.length;m--;)h[m]=arguments[m];return el(o.apply(this,h))}}to.source=Pn(Wi),to.light=Pn(ja),to.layer=Pn(pr),to.filter=Pn(ms),to.paintProperty=Pn(jt),to.layoutProperty=Pn(kr);var Ol=to,Kl=Ol.light,ks=Ol.paintProperty,pa=Ol.layoutProperty;function pn(o,h){var m=!1;if(h&&h.length)for(var E=0,I=h;E<I.length;E+=1)o.fire(new Dt(new Error(I[E].message))),m=!0;return m}var So=gs;function gs(o,h,m){var E=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;var I=new Int32Array(this.arrayBuffer);o=I[0],this.d=(h=I[1])+2*(m=I[2]);for(var V=0;V<this.d*this.d;V++){var Z=I[3+V],ne=I[3+V+1];E.push(Z===ne?null:I.subarray(Z,ne))}var ce=I[3+E.length+1];this.keys=I.subarray(I[3+E.length],ce),this.bboxes=I.subarray(ce),this.insert=this._insertReadonly}else{this.d=h+2*m;for(var _e=0;_e<this.d*this.d;_e++)E.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=o,this.padding=m,this.scale=h/o,this.uid=0;var Se=m/h*o;this.min=-Se,this.max=o+Se}gs.prototype.insert=function(o,h,m,E,I){this._forEachCell(h,m,E,I,this._insertCell,this.uid++),this.keys.push(o),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(E),this.bboxes.push(I)},gs.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},gs.prototype._insertCell=function(o,h,m,E,I,V){this.cells[I].push(V)},gs.prototype.query=function(o,h,m,E,I){var V=this.min,Z=this.max;if(o<=V&&h<=V&&Z<=m&&Z<=E&&!I)return Array.prototype.slice.call(this.keys);var ne=[];return this._forEachCell(o,h,m,E,this._queryCell,ne,{},I),ne},gs.prototype._queryCell=function(o,h,m,E,I,V,Z,ne){var ce=this.cells[I];if(ce!==null)for(var _e=this.keys,Se=this.bboxes,Me=0;Me<ce.length;Me++){var Ve=ce[Me];if(Z[Ve]===void 0){var f=4*Ve;(ne?ne(Se[f+0],Se[f+1],Se[f+2],Se[f+3]):o<=Se[f+2]&&h<=Se[f+3]&&m>=Se[f+0]&&E>=Se[f+1])?(Z[Ve]=!0,V.push(_e[Ve])):Z[Ve]=!1}}},gs.prototype._forEachCell=function(o,h,m,E,I,V,Z,ne){for(var ce=this._convertToCellCoord(o),_e=this._convertToCellCoord(h),Se=this._convertToCellCoord(m),Me=this._convertToCellCoord(E),Ve=ce;Ve<=Se;Ve++)for(var f=_e;f<=Me;f++){var u=this.d*f+Ve;if((!ne||ne(this._convertFromCellCoord(Ve),this._convertFromCellCoord(f),this._convertFromCellCoord(Ve+1),this._convertFromCellCoord(f+1)))&&I.call(this,o,h,m,E,u,V,Z,ne))return}},gs.prototype._convertFromCellCoord=function(o){return(o-this.padding)/this.scale},gs.prototype._convertToCellCoord=function(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))},gs.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var o=this.cells,h=3+this.cells.length+1+1,m=0,E=0;E<this.cells.length;E++)m+=this.cells[E].length;var I=new Int32Array(h+m+this.keys.length+this.bboxes.length);I[0]=this.extent,I[1]=this.n,I[2]=this.padding;for(var V=h,Z=0;Z<o.length;Z++){var ne=o[Z];I[3+Z]=V,I.set(ne,V),V+=ne.length}return I[3+o.length]=V,I.set(this.keys,V),I[3+o.length+1]=V+=this.keys.length,I.set(this.bboxes,V),V+=this.bboxes.length,I.buffer};var qf=P.ImageData,Eo=P.ImageBitmap,Is={};function fn(o,h,m){m===void 0&&(m={}),Object.defineProperty(h,"_classRegistryKey",{value:o,writeable:!1}),Is[o]={klass:h,omit:m.omit||[],shallow:m.shallow||[]}}for(var fl in fn("Object",Object),So.serialize=function(o,h){var m=o.toArrayBuffer();return h&&h.push(m),{buffer:m}},So.deserialize=function(o){return new So(o.buffer)},fn("Grid",So),fn("Color",Fn),fn("Error",Error),fn("ResolvedImage",Oi),fn("StylePropertyFunction",$u),fn("StyleExpression",Ts,{omit:["_evaluator"]}),fn("ZoomDependentExpression",ll),fn("ZoomConstantExpression",Lu),fn("CompoundExpression",Ia,{omit:["_evaluate"]}),Ti)Ti[fl]._classRegistryKey||fn("Expression_"+fl,Ti[fl]);function Yl(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Rl(o){return Eo&&o instanceof Eo}function Fo(o,h){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp)return o;if(Yl(o)||Rl(o))return h&&h.push(o),o;if(ArrayBuffer.isView(o)){var m=o;return h&&h.push(m.buffer),m}if(o instanceof qf)return h&&h.push(o.data.buffer),o;if(Array.isArray(o)){for(var E=[],I=0,V=o;I<V.length;I+=1)E.push(Fo(V[I],h));return E}if(typeof o=="object"){var Z=o.constructor,ne=Z._classRegistryKey;if(!ne)throw new Error("can't serialize object of unregistered class");var ce=Z.serialize?Z.serialize(o,h):{};if(!Z.serialize){for(var _e in o)if(o.hasOwnProperty(_e)&&!(Is[ne].omit.indexOf(_e)>=0)){var Se=o[_e];ce[_e]=Is[ne].shallow.indexOf(_e)>=0?Se:Fo(Se,h)}o instanceof Error&&(ce.message=o.message)}if(ce.$name)throw new Error("$name property is reserved for worker serialization logic.");return ne!=="Object"&&(ce.$name=ne),ce}throw new Error("can't serialize object of type "+typeof o)}function ju(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||Yl(o)||Rl(o)||ArrayBuffer.isView(o)||o instanceof qf)return o;if(Array.isArray(o))return o.map(ju);if(typeof o=="object"){var h=o.$name||"Object",m=Is[h].klass;if(!m)throw new Error("can't deserialize unregistered class "+h);if(m.deserialize)return m.deserialize(o);for(var E=Object.create(m.prototype),I=0,V=Object.keys(o);I<V.length;I+=1){var Z=V[I];if(Z!=="$name"){var ne=o[Z];E[Z]=Is[h].shallow.indexOf(Z)>=0?ne:ju(ne)}}return E}throw new Error("can't deserialize object of type "+typeof o)}var Yo=function(){this.first=!0};Yo.prototype.update=function(o,h){var m=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=h),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=m,!0))};var en={"Latin-1 Supplement":function(o){return o>=128&&o<=255},Arabic:function(o){return o>=1536&&o<=1791},"Arabic Supplement":function(o){return o>=1872&&o<=1919},"Arabic Extended-A":function(o){return o>=2208&&o<=2303},"Hangul Jamo":function(o){return o>=4352&&o<=4607},"Unified Canadian Aboriginal Syllabics":function(o){return o>=5120&&o<=5759},Khmer:function(o){return o>=6016&&o<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(o){return o>=6320&&o<=6399},"General Punctuation":function(o){return o>=8192&&o<=8303},"Letterlike Symbols":function(o){return o>=8448&&o<=8527},"Number Forms":function(o){return o>=8528&&o<=8591},"Miscellaneous Technical":function(o){return o>=8960&&o<=9215},"Control Pictures":function(o){return o>=9216&&o<=9279},"Optical Character Recognition":function(o){return o>=9280&&o<=9311},"Enclosed Alphanumerics":function(o){return o>=9312&&o<=9471},"Geometric Shapes":function(o){return o>=9632&&o<=9727},"Miscellaneous Symbols":function(o){return o>=9728&&o<=9983},"Miscellaneous Symbols and Arrows":function(o){return o>=11008&&o<=11263},"CJK Radicals Supplement":function(o){return o>=11904&&o<=12031},"Kangxi Radicals":function(o){return o>=12032&&o<=12255},"Ideographic Description Characters":function(o){return o>=12272&&o<=12287},"CJK Symbols and Punctuation":function(o){return o>=12288&&o<=12351},Hiragana:function(o){return o>=12352&&o<=12447},Katakana:function(o){return o>=12448&&o<=12543},Bopomofo:function(o){return o>=12544&&o<=12591},"Hangul Compatibility Jamo":function(o){return o>=12592&&o<=12687},Kanbun:function(o){return o>=12688&&o<=12703},"Bopomofo Extended":function(o){return o>=12704&&o<=12735},"CJK Strokes":function(o){return o>=12736&&o<=12783},"Katakana Phonetic Extensions":function(o){return o>=12784&&o<=12799},"Enclosed CJK Letters and Months":function(o){return o>=12800&&o<=13055},"CJK Compatibility":function(o){return o>=13056&&o<=13311},"CJK Unified Ideographs Extension A":function(o){return o>=13312&&o<=19903},"Yijing Hexagram Symbols":function(o){return o>=19904&&o<=19967},"CJK Unified Ideographs":function(o){return o>=19968&&o<=40959},"Yi Syllables":function(o){return o>=40960&&o<=42127},"Yi Radicals":function(o){return o>=42128&&o<=42191},"Hangul Jamo Extended-A":function(o){return o>=43360&&o<=43391},"Hangul Syllables":function(o){return o>=44032&&o<=55215},"Hangul Jamo Extended-B":function(o){return o>=55216&&o<=55295},"Private Use Area":function(o){return o>=57344&&o<=63743},"CJK Compatibility Ideographs":function(o){return o>=63744&&o<=64255},"Arabic Presentation Forms-A":function(o){return o>=64336&&o<=65023},"Vertical Forms":function(o){return o>=65040&&o<=65055},"CJK Compatibility Forms":function(o){return o>=65072&&o<=65103},"Small Form Variants":function(o){return o>=65104&&o<=65135},"Arabic Presentation Forms-B":function(o){return o>=65136&&o<=65279},"Halfwidth and Fullwidth Forms":function(o){return o>=65280&&o<=65519}};function hl(o){for(var h=0,m=o;h<m.length;h+=1)if(hu(m[h].charCodeAt(0)))return!0;return!1}function hu(o){return!(o!==746&&o!==747&&(o<4352||!(en["Bopomofo Extended"](o)||en.Bopomofo(o)||en["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||en["CJK Compatibility Ideographs"](o)||en["CJK Compatibility"](o)||en["CJK Radicals Supplement"](o)||en["CJK Strokes"](o)||!(!en["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||en["CJK Unified Ideographs Extension A"](o)||en["CJK Unified Ideographs"](o)||en["Enclosed CJK Letters and Months"](o)||en["Hangul Compatibility Jamo"](o)||en["Hangul Jamo Extended-A"](o)||en["Hangul Jamo Extended-B"](o)||en["Hangul Jamo"](o)||en["Hangul Syllables"](o)||en.Hiragana(o)||en["Ideographic Description Characters"](o)||en.Kanbun(o)||en["Kangxi Radicals"](o)||en["Katakana Phonetic Extensions"](o)||en.Katakana(o)&&o!==12540||!(!en["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!en["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||en["Unified Canadian Aboriginal Syllabics"](o)||en["Unified Canadian Aboriginal Syllabics Extended"](o)||en["Vertical Forms"](o)||en["Yijing Hexagram Symbols"](o)||en["Yi Syllables"](o)||en["Yi Radicals"](o))))}function fo(o){return!(hu(o)||function(h){return!!(en["Latin-1 Supplement"](h)&&(h===167||h===169||h===174||h===177||h===188||h===189||h===190||h===215||h===247)||en["General Punctuation"](h)&&(h===8214||h===8224||h===8225||h===8240||h===8241||h===8251||h===8252||h===8258||h===8263||h===8264||h===8265||h===8273)||en["Letterlike Symbols"](h)||en["Number Forms"](h)||en["Miscellaneous Technical"](h)&&(h>=8960&&h<=8967||h>=8972&&h<=8991||h>=8996&&h<=9e3||h===9003||h>=9085&&h<=9114||h>=9150&&h<=9165||h===9167||h>=9169&&h<=9179||h>=9186&&h<=9215)||en["Control Pictures"](h)&&h!==9251||en["Optical Character Recognition"](h)||en["Enclosed Alphanumerics"](h)||en["Geometric Shapes"](h)||en["Miscellaneous Symbols"](h)&&!(h>=9754&&h<=9759)||en["Miscellaneous Symbols and Arrows"](h)&&(h>=11026&&h<=11055||h>=11088&&h<=11097||h>=11192&&h<=11243)||en["CJK Symbols and Punctuation"](h)||en.Katakana(h)||en["Private Use Area"](h)||en["CJK Compatibility Forms"](h)||en["Small Form Variants"](h)||en["Halfwidth and Fullwidth Forms"](h)||h===8734||h===8756||h===8757||h>=9984&&h<=10087||h>=10102&&h<=10131||h===65532||h===65533)}(o))}function Do(o){return o>=1424&&o<=2303||en["Arabic Presentation Forms-A"](o)||en["Arabic Presentation Forms-B"](o)}function Vu(o,h){return!(!h&&Do(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||en.Khmer(o))}function zh(o){for(var h=0,m=o;h<m.length;h+=1)if(Do(m[h].charCodeAt(0)))return!0;return!1}var Gs=null,Ui="unavailable",Ms=null,pu=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Ui="error"),Gs&&Gs(o)};function Gf(){rf.fire(new Ct("pluginStateChange",{pluginStatus:Ui,pluginURL:Ms}))}var rf=new Et,pl=function(){return Ui},Cp=function(){if(Ui!=="deferred"||!Ms)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ui="loading",Gf(),Ms&&zi({url:Ms},function(o){o?pu(o):(Ui="loaded",Gf())})},yi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ui==="loaded"||yi.applyArabicShaping!=null},isLoading:function(){return Ui==="loading"},setState:function(o){Ui=o.pluginStatus,Ms=o.pluginURL},isParsed:function(){return yi.applyArabicShaping!=null&&yi.processBidirectionalText!=null&&yi.processStyledBidirectionalText!=null},getPluginURL:function(){return Ms}},vi=function(o,h){this.zoom=o,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Yo,this.transition={})};vi.prototype.isSupportedScript=function(o){return function(h,m){for(var E=0,I=h;E<I.length;E+=1)if(!Vu(I[E].charCodeAt(0),m))return!1;return!0}(o,yi.isLoaded())},vi.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},vi.prototype.getCrossfadeParameters=function(){var o=this.zoom,h=o-Math.floor(o),m=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*h}};var Tn=function(o,h){this.property=o,this.value=h,this.expression=function(m,E){if(Vs(m))return new $u(m,E);if(Qs(m)){var I=Ml(m,E);if(I.result==="error")throw new Error(I.value.map(function(Z){return Z.key+": "+Z.message}).join(", "));return I.value}var V=m;return typeof m=="string"&&E.type==="color"&&(V=Fn.parse(m)),{kind:"constant",evaluate:function(){return V}}}(h===void 0?o.specification.default:h,o.specification)};Tn.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Tn.prototype.possiblyEvaluate=function(o,h,m){return this.property.possiblyEvaluate(this,o,h,m)};var zn=function(o){this.property=o,this.value=new Tn(o,void 0)};zn.prototype.transitioned=function(o,h){return new du(this.property,this.value,h,H({},o.transition,this.transition),o.now)},zn.prototype.untransitioned=function(){return new du(this.property,this.value,null,{},0)};var Uo=function(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)};Uo.prototype.getValue=function(o){return Pe(this._values[o].value.value)},Uo.prototype.setValue=function(o,h){this._values.hasOwnProperty(o)||(this._values[o]=new zn(this._values[o].property)),this._values[o].value=new Tn(this._values[o].property,h===null?void 0:Pe(h))},Uo.prototype.getTransition=function(o){return Pe(this._values[o].transition)},Uo.prototype.setTransition=function(o,h){this._values.hasOwnProperty(o)||(this._values[o]=new zn(this._values[o].property)),this._values[o].transition=Pe(h)||void 0},Uo.prototype.serialize=function(){for(var o={},h=0,m=Object.keys(this._values);h<m.length;h+=1){var E=m[h],I=this.getValue(E);I!==void 0&&(o[E]=I);var V=this.getTransition(E);V!==void 0&&(o[E+"-transition"]=V)}return o},Uo.prototype.transitioned=function(o,h){for(var m=new jo(this._properties),E=0,I=Object.keys(this._values);E<I.length;E+=1){var V=I[E];m._values[V]=this._values[V].transitioned(o,h._values[V])}return m},Uo.prototype.untransitioned=function(){for(var o=new jo(this._properties),h=0,m=Object.keys(this._values);h<m.length;h+=1){var E=m[h];o._values[E]=this._values[E].untransitioned()}return o};var du=function(o,h,m,E,I){this.property=o,this.value=h,this.begin=I+E.delay||0,this.end=this.begin+E.duration||0,o.specification.transition&&(E.delay||E.duration)&&(this.prior=m)};du.prototype.possiblyEvaluate=function(o,h,m){var E=o.now||0,I=this.value.possiblyEvaluate(o,h,m),V=this.prior;if(V){if(E>this.end)return this.prior=null,I;if(this.value.isDataDriven())return this.prior=null,I;if(E<this.begin)return V.possiblyEvaluate(o,h,m);var Z=(E-this.begin)/(this.end-this.begin);return this.property.interpolate(V.possiblyEvaluate(o,h,m),I,function(ne){if(ne<=0)return 0;if(ne>=1)return 1;var ce=ne*ne,_e=ce*ne;return 4*(ne<.5?_e:3*(ne-ce)+_e-.75)}(Z))}return I};var jo=function(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)};jo.prototype.possiblyEvaluate=function(o,h,m){for(var E=new Co(this._properties),I=0,V=Object.keys(this._values);I<V.length;I+=1){var Z=V[I];E._values[Z]=this._values[Z].possiblyEvaluate(o,h,m)}return E},jo.prototype.hasTransition=function(){for(var o=0,h=Object.keys(this._values);o<h.length;o+=1)if(this._values[h[o]].prior)return!0;return!1};var Va=function(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)};Va.prototype.getValue=function(o){return Pe(this._values[o].value)},Va.prototype.setValue=function(o,h){this._values[o]=new Tn(this._values[o].property,h===null?void 0:Pe(h))},Va.prototype.serialize=function(){for(var o={},h=0,m=Object.keys(this._values);h<m.length;h+=1){var E=m[h],I=this.getValue(E);I!==void 0&&(o[E]=I)}return o},Va.prototype.possiblyEvaluate=function(o,h,m){for(var E=new Co(this._properties),I=0,V=Object.keys(this._values);I<V.length;I+=1){var Z=V[I];E._values[Z]=this._values[Z].possiblyEvaluate(o,h,m)}return E};var go=function(o,h,m){this.property=o,this.value=h,this.parameters=m};go.prototype.isConstant=function(){return this.value.kind==="constant"},go.prototype.constantOr=function(o){return this.value.kind==="constant"?this.value.value:o},go.prototype.evaluate=function(o,h,m,E){return this.property.evaluate(this.value,this.parameters,o,h,m,E)};var Co=function(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)};Co.prototype.get=function(o){return this._values[o]};var un=function(o){this.specification=o};un.prototype.possiblyEvaluate=function(o,h){return o.expression.evaluate(h)},un.prototype.interpolate=function(o,h,m){var E=Du[this.specification.type];return E?E(o,h,m):o};var Nn=function(o,h){this.specification=o,this.overrides=h};Nn.prototype.possiblyEvaluate=function(o,h,m,E){return new go(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(h,null,{},m,E)}:o.expression,h)},Nn.prototype.interpolate=function(o,h,m){if(o.value.kind!=="constant"||h.value.kind!=="constant")return o;if(o.value.value===void 0||h.value.value===void 0)return new go(this,{kind:"constant",value:void 0},o.parameters);var E=Du[this.specification.type];return E?new go(this,{kind:"constant",value:E(o.value.value,h.value.value,m)},o.parameters):o},Nn.prototype.evaluate=function(o,h,m,E,I,V){return o.kind==="constant"?o.value:o.evaluate(h,m,E,I,V)};var na=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.possiblyEvaluate=function(m,E,I,V){if(m.value===void 0)return new go(this,{kind:"constant",value:void 0},E);if(m.expression.kind==="constant"){var Z=m.expression.evaluate(E,null,{},I,V),ne=m.property.specification.type==="resolvedImage"&&typeof Z!="string"?Z.name:Z,ce=this._calculate(ne,ne,ne,E);return new go(this,{kind:"constant",value:ce},E)}if(m.expression.kind==="camera"){var _e=this._calculate(m.expression.evaluate({zoom:E.zoom-1}),m.expression.evaluate({zoom:E.zoom}),m.expression.evaluate({zoom:E.zoom+1}),E);return new go(this,{kind:"constant",value:_e},E)}return new go(this,m.expression,E)},h.prototype.evaluate=function(m,E,I,V,Z,ne){if(m.kind==="source"){var ce=m.evaluate(E,I,V,Z,ne);return this._calculate(ce,ce,ce,E)}return m.kind==="composite"?this._calculate(m.evaluate({zoom:Math.floor(E.zoom)-1},I,V),m.evaluate({zoom:Math.floor(E.zoom)},I,V),m.evaluate({zoom:Math.floor(E.zoom)+1},I,V),E):m.value},h.prototype._calculate=function(m,E,I,V){return V.zoom>V.zoomHistory.lastIntegerZoom?{from:m,to:E}:{from:I,to:E}},h.prototype.interpolate=function(m){return m},h}(Nn),ua=function(o){this.specification=o};ua.prototype.possiblyEvaluate=function(o,h,m,E){if(o.value!==void 0){if(o.expression.kind==="constant"){var I=o.expression.evaluate(h,null,{},m,E);return this._calculate(I,I,I,h)}return this._calculate(o.expression.evaluate(new vi(Math.floor(h.zoom-1),h)),o.expression.evaluate(new vi(Math.floor(h.zoom),h)),o.expression.evaluate(new vi(Math.floor(h.zoom+1),h)),h)}},ua.prototype._calculate=function(o,h,m,E){return E.zoom>E.zoomHistory.lastIntegerZoom?{from:o,to:h}:{from:m,to:h}},ua.prototype.interpolate=function(o){return o};var Dl=function(o){this.specification=o};Dl.prototype.possiblyEvaluate=function(o,h,m,E){return!!o.expression.evaluate(h,null,{},m,E)},Dl.prototype.interpolate=function(){return!1};var zo=function(o){for(var h in this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],o){var m=o[h];m.specification.overridable&&this.overridableProperties.push(h);var E=this.defaultPropertyValues[h]=new Tn(m,void 0),I=this.defaultTransitionablePropertyValues[h]=new zn(m);this.defaultTransitioningPropertyValues[h]=I.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=E.possiblyEvaluate({})}};fn("DataDrivenProperty",Nn),fn("DataConstantProperty",un),fn("CrossFadedDataDrivenProperty",na),fn("CrossFadedProperty",ua),fn("ColorRampProperty",Dl);var O=function(o){function h(m,E){if(o.call(this),this.id=m.id,this.type=m.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},m.type!=="custom"&&(this.metadata=(m=m).metadata,this.minzoom=m.minzoom,this.maxzoom=m.maxzoom,m.type!=="background"&&(this.source=m.source,this.sourceLayer=m["source-layer"],this.filter=m.filter),E.layout&&(this._unevaluatedLayout=new Va(E.layout)),E.paint)){for(var I in this._transitionablePaint=new Uo(E.paint),m.paint)this.setPaintProperty(I,m.paint[I],{validate:!1});for(var V in m.layout)this.setLayoutProperty(V,m.layout[V],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Co(E.paint)}}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},h.prototype.getLayoutProperty=function(m){return m==="visibility"?this.visibility:this._unevaluatedLayout.getValue(m)},h.prototype.setLayoutProperty=function(m,E,I){I===void 0&&(I={}),E!=null&&this._validate(pa,"layers."+this.id+".layout."+m,m,E,I)||(m!=="visibility"?this._unevaluatedLayout.setValue(m,E):this.visibility=E)},h.prototype.getPaintProperty=function(m){return te(m,"-transition")?this._transitionablePaint.getTransition(m.slice(0,-11)):this._transitionablePaint.getValue(m)},h.prototype.setPaintProperty=function(m,E,I){if(I===void 0&&(I={}),E!=null&&this._validate(ks,"layers."+this.id+".paint."+m,m,E,I))return!1;if(te(m,"-transition"))return this._transitionablePaint.setTransition(m.slice(0,-11),E||void 0),!1;var V=this._transitionablePaint._values[m],Z=V.property.specification["property-type"]==="cross-faded-data-driven",ne=V.value.isDataDriven(),ce=V.value;this._transitionablePaint.setValue(m,E),this._handleSpecialPaintPropertyUpdate(m);var _e=this._transitionablePaint._values[m].value;return _e.isDataDriven()||ne||Z||this._handleOverridablePaintPropertyUpdate(m,ce,_e)},h.prototype._handleSpecialPaintPropertyUpdate=function(m){},h.prototype._handleOverridablePaintPropertyUpdate=function(m,E,I){return!1},h.prototype.isHidden=function(m){return!!(this.minzoom&&m<this.minzoom)||!!(this.maxzoom&&m>=this.maxzoom)||this.visibility==="none"},h.prototype.updateTransitions=function(m){this._transitioningPaint=this._transitionablePaint.transitioned(m,this._transitioningPaint)},h.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},h.prototype.recalculate=function(m,E){m.getCrossfadeParameters&&(this._crossfadeParameters=m.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(m,void 0,E)),this.paint=this._transitioningPaint.possiblyEvaluate(m,void 0,E)},h.prototype.serialize=function(){var m={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(m.layout=m.layout||{},m.layout.visibility=this.visibility),ke(m,function(E,I){return!(E===void 0||I==="layout"&&!Object.keys(E).length||I==="paint"&&!Object.keys(E).length)})},h.prototype._validate=function(m,E,I,V,Z){return Z===void 0&&(Z={}),(!Z||Z.validate!==!1)&&pn(this,m.call(Ol,{key:E,layerType:this.type,objectKey:I,value:V,styleSpec:Je,style:{glyphs:!0,sprite:!0}}))},h.prototype.is3D=function(){return!1},h.prototype.isTileClipped=function(){return!1},h.prototype.hasOffscreenPass=function(){return!1},h.prototype.resize=function(){},h.prototype.isStateDependent=function(){for(var m in this.paint._values){var E=this.paint.get(m);if(E instanceof go&&sa(E.property.specification)&&(E.value.kind==="source"||E.value.kind==="composite")&&E.value.isStateDependent)return!0}return!1},h}(Et),c={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},_=function(o,h){this._structArray=o,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},k=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function R(o,h){h===void 0&&(h=1);var m=0,E=0;return{members:o.map(function(I){var V=c[I.type].BYTES_PER_ELEMENT,Z=m=W(m,Math.max(h,V)),ne=I.components||1;return E=Math.max(E,V),m+=V*ne,{name:I.name,type:I.type,components:ne,offset:Z}}),size:W(m,Math.max(E,h)),alignment:h}}function W(o,h){return Math.ceil(o/h)*h}k.serialize=function(o,h){return o._trim(),h&&(o.isTransferred=!0,h.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}},k.deserialize=function(o){var h=Object.create(this.prototype);return h.arrayBuffer=o.arrayBuffer,h.length=o.length,h.capacity=o.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h},k.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},k.prototype.clear=function(){this.length=0},k.prototype.resize=function(o){this.reserve(o),this.length=o},k.prototype.reserve=function(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}},k.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var q=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E){var I=this.length;return this.resize(I+1),this.emplace(I,m,E)},h.prototype.emplace=function(m,E,I){var V=2*m;return this.int16[V+0]=E,this.int16[V+1]=I,m},h}(k);q.prototype.bytesPerElement=4,fn("StructArrayLayout2i4",q);var ue=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E,I,V){var Z=this.length;return this.resize(Z+1),this.emplace(Z,m,E,I,V)},h.prototype.emplace=function(m,E,I,V,Z){var ne=4*m;return this.int16[ne+0]=E,this.int16[ne+1]=I,this.int16[ne+2]=V,this.int16[ne+3]=Z,m},h}(k);ue.prototype.bytesPerElement=8,fn("StructArrayLayout4i8",ue);var he=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E,I,V,Z,ne){var ce=this.length;return this.resize(ce+1),this.emplace(ce,m,E,I,V,Z,ne)},h.prototype.emplace=function(m,E,I,V,Z,ne,ce){var _e=6*m;return this.int16[_e+0]=E,this.int16[_e+1]=I,this.int16[_e+2]=V,this.int16[_e+3]=Z,this.int16[_e+4]=ne,this.int16[_e+5]=ce,m},h}(k);he.prototype.bytesPerElement=12,fn("StructArrayLayout2i4i12",he);var be=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E,I,V,Z,ne){var ce=this.length;return this.resize(ce+1),this.emplace(ce,m,E,I,V,Z,ne)},h.prototype.emplace=function(m,E,I,V,Z,ne,ce){var _e=4*m,Se=8*m;return this.int16[_e+0]=E,this.int16[_e+1]=I,this.uint8[Se+4]=V,this.uint8[Se+5]=Z,this.uint8[Se+6]=ne,this.uint8[Se+7]=ce,m},h}(k);be.prototype.bytesPerElement=8,fn("StructArrayLayout2i4ub8",be);var Te=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E){var I=this.length;return this.resize(I+1),this.emplace(I,m,E)},h.prototype.emplace=function(m,E,I){var V=2*m;return this.float32[V+0]=E,this.float32[V+1]=I,m},h}(k);Te.prototype.bytesPerElement=8,fn("StructArrayLayout2f8",Te);var Ue=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E,I,V,Z,ne,ce,_e,Se,Me){var Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,m,E,I,V,Z,ne,ce,_e,Se,Me)},h.prototype.emplace=function(m,E,I,V,Z,ne,ce,_e,Se,Me,Ve){var f=10*m;return this.uint16[f+0]=E,this.uint16[f+1]=I,this.uint16[f+2]=V,this.uint16[f+3]=Z,this.uint16[f+4]=ne,this.uint16[f+5]=ce,this.uint16[f+6]=_e,this.uint16[f+7]=Se,this.uint16[f+8]=Me,this.uint16[f+9]=Ve,m},h}(k);Ue.prototype.bytesPerElement=20,fn("StructArrayLayout10ui20",Ue);var Ke=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E,I,V,Z,ne,ce,_e,Se,Me,Ve,f){var u=this.length;return this.resize(u+1),this.emplace(u,m,E,I,V,Z,ne,ce,_e,Se,Me,Ve,f)},h.prototype.emplace=function(m,E,I,V,Z,ne,ce,_e,Se,Me,Ve,f,u){var p=12*m;return this.int16[p+0]=E,this.int16[p+1]=I,this.int16[p+2]=V,this.int16[p+3]=Z,this.uint16[p+4]=ne,this.uint16[p+5]=ce,this.uint16[p+6]=_e,this.uint16[p+7]=Se,this.int16[p+8]=Me,this.int16[p+9]=Ve,this.int16[p+10]=f,this.int16[p+11]=u,m},h}(k);Ke.prototype.bytesPerElement=24,fn("StructArrayLayout4i4ui4i24",Ke);var yt=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E,I){var V=this.length;return this.resize(V+1),this.emplace(V,m,E,I)},h.prototype.emplace=function(m,E,I,V){var Z=3*m;return this.float32[Z+0]=E,this.float32[Z+1]=I,this.float32[Z+2]=V,m},h}(k);yt.prototype.bytesPerElement=12,fn("StructArrayLayout3f12",yt);var ut=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m){var E=this.length;return this.resize(E+1),this.emplace(E,m)},h.prototype.emplace=function(m,E){return this.uint32[1*m+0]=E,m},h}(k);ut.prototype.bytesPerElement=4,fn("StructArrayLayout1ul4",ut);var gt=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E,I,V,Z,ne,ce,_e,Se){var Me=this.length;return this.resize(Me+1),this.emplace(Me,m,E,I,V,Z,ne,ce,_e,Se)},h.prototype.emplace=function(m,E,I,V,Z,ne,ce,_e,Se,Me){var Ve=10*m,f=5*m;return this.int16[Ve+0]=E,this.int16[Ve+1]=I,this.int16[Ve+2]=V,this.int16[Ve+3]=Z,this.int16[Ve+4]=ne,this.int16[Ve+5]=ce,this.uint32[f+3]=_e,this.uint16[Ve+8]=Se,this.uint16[Ve+9]=Me,m},h}(k);gt.prototype.bytesPerElement=20,fn("StructArrayLayout6i1ul2ui20",gt);var zt=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E,I,V,Z,ne){var ce=this.length;return this.resize(ce+1),this.emplace(ce,m,E,I,V,Z,ne)},h.prototype.emplace=function(m,E,I,V,Z,ne,ce){var _e=6*m;return this.int16[_e+0]=E,this.int16[_e+1]=I,this.int16[_e+2]=V,this.int16[_e+3]=Z,this.int16[_e+4]=ne,this.int16[_e+5]=ce,m},h}(k);zt.prototype.bytesPerElement=12,fn("StructArrayLayout2i2i2i12",zt);var Gt=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E,I,V,Z){var ne=this.length;return this.resize(ne+1),this.emplace(ne,m,E,I,V,Z)},h.prototype.emplace=function(m,E,I,V,Z,ne){var ce=4*m,_e=8*m;return this.float32[ce+0]=E,this.float32[ce+1]=I,this.float32[ce+2]=V,this.int16[_e+6]=Z,this.int16[_e+7]=ne,m},h}(k);Gt.prototype.bytesPerElement=16,fn("StructArrayLayout2f1f2i16",Gt);var Jt=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E,I,V){var Z=this.length;return this.resize(Z+1),this.emplace(Z,m,E,I,V)},h.prototype.emplace=function(m,E,I,V,Z){var ne=12*m,ce=3*m;return this.uint8[ne+0]=E,this.uint8[ne+1]=I,this.float32[ce+1]=V,this.float32[ce+2]=Z,m},h}(k);Jt.prototype.bytesPerElement=12,fn("StructArrayLayout2ub2f12",Jt);var bt=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E,I){var V=this.length;return this.resize(V+1),this.emplace(V,m,E,I)},h.prototype.emplace=function(m,E,I,V){var Z=3*m;return this.uint16[Z+0]=E,this.uint16[Z+1]=I,this.uint16[Z+2]=V,m},h}(k);bt.prototype.bytesPerElement=6,fn("StructArrayLayout3ui6",bt);var nr=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E,I,V,Z,ne,ce,_e,Se,Me,Ve,f,u,p,x,T,D){var j=this.length;return this.resize(j+1),this.emplace(j,m,E,I,V,Z,ne,ce,_e,Se,Me,Ve,f,u,p,x,T,D)},h.prototype.emplace=function(m,E,I,V,Z,ne,ce,_e,Se,Me,Ve,f,u,p,x,T,D,j){var J=24*m,ie=12*m,le=48*m;return this.int16[J+0]=E,this.int16[J+1]=I,this.uint16[J+2]=V,this.uint16[J+3]=Z,this.uint32[ie+2]=ne,this.uint32[ie+3]=ce,this.uint32[ie+4]=_e,this.uint16[J+10]=Se,this.uint16[J+11]=Me,this.uint16[J+12]=Ve,this.float32[ie+7]=f,this.float32[ie+8]=u,this.uint8[le+36]=p,this.uint8[le+37]=x,this.uint8[le+38]=T,this.uint32[ie+10]=D,this.int16[J+22]=j,m},h}(k);nr.prototype.bytesPerElement=48,fn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",nr);var er=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E,I,V,Z,ne,ce,_e,Se,Me,Ve,f,u,p,x,T,D,j,J,ie,le,me,xe,Re,De,Be,rt,ot){var Pt=this.length;return this.resize(Pt+1),this.emplace(Pt,m,E,I,V,Z,ne,ce,_e,Se,Me,Ve,f,u,p,x,T,D,j,J,ie,le,me,xe,Re,De,Be,rt,ot)},h.prototype.emplace=function(m,E,I,V,Z,ne,ce,_e,Se,Me,Ve,f,u,p,x,T,D,j,J,ie,le,me,xe,Re,De,Be,rt,ot,Pt){var kt=34*m,At=17*m;return this.int16[kt+0]=E,this.int16[kt+1]=I,this.int16[kt+2]=V,this.int16[kt+3]=Z,this.int16[kt+4]=ne,this.int16[kt+5]=ce,this.int16[kt+6]=_e,this.int16[kt+7]=Se,this.uint16[kt+8]=Me,this.uint16[kt+9]=Ve,this.uint16[kt+10]=f,this.uint16[kt+11]=u,this.uint16[kt+12]=p,this.uint16[kt+13]=x,this.uint16[kt+14]=T,this.uint16[kt+15]=D,this.uint16[kt+16]=j,this.uint16[kt+17]=J,this.uint16[kt+18]=ie,this.uint16[kt+19]=le,this.uint16[kt+20]=me,this.uint16[kt+21]=xe,this.uint16[kt+22]=Re,this.uint32[At+12]=De,this.float32[At+13]=Be,this.float32[At+14]=rt,this.float32[At+15]=ot,this.float32[At+16]=Pt,m},h}(k);er.prototype.bytesPerElement=68,fn("StructArrayLayout8i15ui1ul4f68",er);var mr=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m){var E=this.length;return this.resize(E+1),this.emplace(E,m)},h.prototype.emplace=function(m,E){return this.float32[1*m+0]=E,m},h}(k);mr.prototype.bytesPerElement=4,fn("StructArrayLayout1f4",mr);var Sr=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E,I){var V=this.length;return this.resize(V+1),this.emplace(V,m,E,I)},h.prototype.emplace=function(m,E,I,V){var Z=3*m;return this.int16[Z+0]=E,this.int16[Z+1]=I,this.int16[Z+2]=V,m},h}(k);Sr.prototype.bytesPerElement=6,fn("StructArrayLayout3i6",Sr);var $r=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E,I){var V=this.length;return this.resize(V+1),this.emplace(V,m,E,I)},h.prototype.emplace=function(m,E,I,V){var Z=4*m;return this.uint32[2*m+0]=E,this.uint16[Z+2]=I,this.uint16[Z+3]=V,m},h}(k);$r.prototype.bytesPerElement=8,fn("StructArrayLayout1ul2ui8",$r);var gr=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E){var I=this.length;return this.resize(I+1),this.emplace(I,m,E)},h.prototype.emplace=function(m,E,I){var V=2*m;return this.uint16[V+0]=E,this.uint16[V+1]=I,m},h}(k);gr.prototype.bytesPerElement=4,fn("StructArrayLayout2ui4",gr);var cn=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m){var E=this.length;return this.resize(E+1),this.emplace(E,m)},h.prototype.emplace=function(m,E){return this.uint16[1*m+0]=E,m},h}(k);cn.prototype.bytesPerElement=2,fn("StructArrayLayout1ui2",cn);var g=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},h.prototype.emplaceBack=function(m,E,I,V){var Z=this.length;return this.resize(Z+1),this.emplace(Z,m,E,I,V)},h.prototype.emplace=function(m,E,I,V,Z){var ne=4*m;return this.float32[ne+0]=E,this.float32[ne+1]=I,this.float32[ne+2]=V,this.float32[ne+3]=Z,m},h}(k);g.prototype.bytesPerElement=16,fn("StructArrayLayout4f16",g);var b=function(o){function h(){o.apply(this,arguments)}o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h;var m={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return m.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},m.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},m.x1.get=function(){return this._structArray.int16[this._pos2+2]},m.y1.get=function(){return this._structArray.int16[this._pos2+3]},m.x2.get=function(){return this._structArray.int16[this._pos2+4]},m.y2.get=function(){return this._structArray.int16[this._pos2+5]},m.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},m.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},m.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},m.anchorPoint.get=function(){return new S(this.anchorPointX,this.anchorPointY)},Object.defineProperties(h.prototype,m),h}(_);b.prototype.size=20;var y=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.get=function(m){return new b(this,m)},h}(gt);fn("CollisionBoxArray",y);var C=function(o){function h(){o.apply(this,arguments)}o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h;var m={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return m.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},m.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},m.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},m.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},m.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},m.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},m.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},m.segment.get=function(){return this._structArray.uint16[this._pos2+10]},m.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},m.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},m.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},m.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},m.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},m.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},m.placedOrientation.set=function(E){this._structArray.uint8[this._pos1+37]=E},m.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},m.hidden.set=function(E){this._structArray.uint8[this._pos1+38]=E},m.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},m.crossTileID.set=function(E){this._structArray.uint32[this._pos4+10]=E},m.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(h.prototype,m),h}(_);C.prototype.size=48;var U=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.get=function(m){return new C(this,m)},h}(nr);fn("PlacedSymbolArray",U);var Y=function(o){function h(){o.apply(this,arguments)}o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h;var m={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return m.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},m.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},m.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},m.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},m.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},m.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},m.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},m.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},m.key.get=function(){return this._structArray.uint16[this._pos2+8]},m.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},m.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},m.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},m.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},m.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},m.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},m.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},m.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},m.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},m.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},m.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},m.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},m.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},m.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},m.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},m.crossTileID.set=function(E){this._structArray.uint32[this._pos4+12]=E},m.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},m.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},m.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},m.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(h.prototype,m),h}(_);Y.prototype.size=68;var ee=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.get=function(m){return new Y(this,m)},h}(er);fn("SymbolInstanceArray",ee);var se=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.getoffsetX=function(m){return this.float32[1*m+0]},h}(mr);fn("GlyphOffsetArray",se);var ve=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.getx=function(m){return this.int16[3*m+0]},h.prototype.gety=function(m){return this.int16[3*m+1]},h.prototype.gettileUnitDistanceFromAnchor=function(m){return this.int16[3*m+2]},h}(Sr);fn("SymbolLineVertexArray",ve);var Oe=function(o){function h(){o.apply(this,arguments)}o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h;var m={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return m.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},m.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},m.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(h.prototype,m),h}(_);Oe.prototype.size=8;var He=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.get=function(m){return new Oe(this,m)},h}($r);fn("FeatureIndexArray",He);var Qe=R([{name:"a_pos",components:2,type:"Int16"}],4).members,Ze=function(o){o===void 0&&(o=[]),this.segments=o};function mt(o,h){return 256*(o=re(Math.floor(o),0,255))+re(Math.floor(h),0,255)}Ze.prototype.prepareSegment=function(o,h,m,E){var I=this.segments[this.segments.length-1];return o>Ze.MAX_VERTEX_ARRAY_LENGTH&&Ie("Max vertices per segment is "+Ze.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+o),(!I||I.vertexLength+o>Ze.MAX_VERTEX_ARRAY_LENGTH||I.sortKey!==E)&&(I={vertexOffset:h.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},E!==void 0&&(I.sortKey=E),this.segments.push(I)),I},Ze.prototype.get=function(){return this.segments},Ze.prototype.destroy=function(){for(var o=0,h=this.segments;o<h.length;o+=1){var m=h[o];for(var E in m.vaos)m.vaos[E].destroy()}},Ze.simpleSegment=function(o,h,m,E){return new Ze([{vertexOffset:o,primitiveOffset:h,vertexLength:m,primitiveLength:E,vaos:{},sortKey:0}])},Ze.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,fn("SegmentVector",Ze);var ft=R([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),xt=s(function(o){o.exports=function(h,m){var E,I,V,Z,ne,ce,_e,Se;for(I=h.length-(E=3&h.length),V=m,ne=3432918353,ce=461845907,Se=0;Se<I;)_e=255&h.charCodeAt(Se)|(255&h.charCodeAt(++Se))<<8|(255&h.charCodeAt(++Se))<<16|(255&h.charCodeAt(++Se))<<24,++Se,V=27492+(65535&(Z=5*(65535&(V=(V^=_e=(65535&(_e=(_e=(65535&_e)*ne+(((_e>>>16)*ne&65535)<<16)&4294967295)<<15|_e>>>17))*ce+(((_e>>>16)*ce&65535)<<16)&4294967295)<<13|V>>>19))+((5*(V>>>16)&65535)<<16)&4294967295))+((58964+(Z>>>16)&65535)<<16);switch(_e=0,E){case 3:_e^=(255&h.charCodeAt(Se+2))<<16;case 2:_e^=(255&h.charCodeAt(Se+1))<<8;case 1:V^=_e=(65535&(_e=(_e=(65535&(_e^=255&h.charCodeAt(Se)))*ne+(((_e>>>16)*ne&65535)<<16)&4294967295)<<15|_e>>>17))*ce+(((_e>>>16)*ce&65535)<<16)&4294967295}return V^=h.length,V=2246822507*(65535&(V^=V>>>16))+((2246822507*(V>>>16)&65535)<<16)&4294967295,V=3266489909*(65535&(V^=V>>>13))+((3266489909*(V>>>16)&65535)<<16)&4294967295,(V^=V>>>16)>>>0}}),st=s(function(o){o.exports=function(h,m){for(var E,I=h.length,V=m^I,Z=0;I>=4;)E=1540483477*(65535&(E=255&h.charCodeAt(Z)|(255&h.charCodeAt(++Z))<<8|(255&h.charCodeAt(++Z))<<16|(255&h.charCodeAt(++Z))<<24))+((1540483477*(E>>>16)&65535)<<16),V=1540483477*(65535&V)+((1540483477*(V>>>16)&65535)<<16)^(E=1540483477*(65535&(E^=E>>>24))+((1540483477*(E>>>16)&65535)<<16)),I-=4,++Z;switch(I){case 3:V^=(255&h.charCodeAt(Z+2))<<16;case 2:V^=(255&h.charCodeAt(Z+1))<<8;case 1:V=1540483477*(65535&(V^=255&h.charCodeAt(Z)))+((1540483477*(V>>>16)&65535)<<16)}return V=1540483477*(65535&(V^=V>>>13))+((1540483477*(V>>>16)&65535)<<16),(V^=V>>>15)>>>0}}),wt=xt,Lt=st;wt.murmur3=xt,wt.murmur2=Lt;var Nt=function(){this.ids=[],this.positions=[],this.indexed=!1};Nt.prototype.add=function(o,h,m,E){this.ids.push(Ht(o)),this.positions.push(h,m,E)},Nt.prototype.getPositions=function(o){for(var h=Ht(o),m=0,E=this.ids.length-1;m<E;){var I=m+E>>1;this.ids[I]>=h?E=I:m=I+1}for(var V=[];this.ids[m]===h;)V.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return V},Nt.serialize=function(o,h){var m=new Float64Array(o.ids),E=new Uint32Array(o.positions);return function I(V,Z,ne,ce){for(;ne<ce;){for(var _e=V[ne+ce>>1],Se=ne-1,Me=ce+1;;){do Se++;while(V[Se]<_e);do Me--;while(V[Me]>_e);if(Se>=Me)break;or(V,Se,Me),or(Z,3*Se,3*Me),or(Z,3*Se+1,3*Me+1),or(Z,3*Se+2,3*Me+2)}Me-ne<ce-Me?(I(V,Z,ne,Me),ne=Me+1):(I(V,Z,Me+1,ce),ce=Me)}}(m,E,0,m.length-1),h&&h.push(m.buffer,E.buffer),{ids:m,positions:E}},Nt.deserialize=function(o){var h=new Nt;return h.ids=o.ids,h.positions=o.positions,h.indexed=!0,h};var qt=Math.pow(2,53)-1;function Ht(o){var h=+o;return!isNaN(h)&&h<=qt?h:wt(String(o))}function or(o,h,m){var E=o[h];o[h]=o[m],o[m]=E}fn("FeaturePositionMap",Nt);var vr=function(o,h){this.gl=o.gl,this.location=h},Pr=function(o){function h(m,E){o.call(this,m,E),this.current=0}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.set=function(m){this.current!==m&&(this.current=m,this.gl.uniform1i(this.location,m))},h}(vr),Mr=function(o){function h(m,E){o.call(this,m,E),this.current=0}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.set=function(m){this.current!==m&&(this.current=m,this.gl.uniform1f(this.location,m))},h}(vr),tn=function(o){function h(m,E){o.call(this,m,E),this.current=[0,0]}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.set=function(m){m[0]===this.current[0]&&m[1]===this.current[1]||(this.current=m,this.gl.uniform2f(this.location,m[0],m[1]))},h}(vr),Sn=function(o){function h(m,E){o.call(this,m,E),this.current=[0,0,0]}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.set=function(m){m[0]===this.current[0]&&m[1]===this.current[1]&&m[2]===this.current[2]||(this.current=m,this.gl.uniform3f(this.location,m[0],m[1],m[2]))},h}(vr),Ln=function(o){function h(m,E){o.call(this,m,E),this.current=[0,0,0,0]}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.set=function(m){m[0]===this.current[0]&&m[1]===this.current[1]&&m[2]===this.current[2]&&m[3]===this.current[3]||(this.current=m,this.gl.uniform4f(this.location,m[0],m[1],m[2],m[3]))},h}(vr),Bn=function(o){function h(m,E){o.call(this,m,E),this.current=Fn.transparent}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.set=function(m){m.r===this.current.r&&m.g===this.current.g&&m.b===this.current.b&&m.a===this.current.a||(this.current=m,this.gl.uniform4f(this.location,m.r,m.g,m.b,m.a))},h}(vr),ji=new Float32Array(16),nn=function(o){function h(m,E){o.call(this,m,E),this.current=ji}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.set=function(m){if(m[12]!==this.current[12]||m[0]!==this.current[0])return this.current=m,void this.gl.uniformMatrix4fv(this.location,!1,m);for(var E=1;E<16;E++)if(m[E]!==this.current[E]){this.current=m,this.gl.uniformMatrix4fv(this.location,!1,m);break}},h}(vr);function Zn(o){return[mt(255*o.r,255*o.g),mt(255*o.b,255*o.a)]}var mi=function(o,h,m){this.value=o,this.uniformNames=h.map(function(E){return"u_"+E}),this.type=m};mi.prototype.setUniform=function(o,h,m){o.set(m.constantOr(this.value))},mi.prototype.getBinding=function(o,h,m){return this.type==="color"?new Bn(o,h):new Mr(o,h)};var pi=function(o,h){this.uniformNames=h.map(function(m){return"u_"+m}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};pi.prototype.setConstantPatternPositions=function(o,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=o.tlbr},pi.prototype.setUniform=function(o,h,m,E){var I=E==="u_pattern_to"?this.patternTo:E==="u_pattern_from"?this.patternFrom:E==="u_pixel_ratio_to"?this.pixelRatioTo:E==="u_pixel_ratio_from"?this.pixelRatioFrom:null;I&&o.set(I)},pi.prototype.getBinding=function(o,h,m){return m.substr(0,9)==="u_pattern"?new Ln(o,h):new Mr(o,h)};var ci=function(o,h,m,E){this.expression=o,this.type=m,this.maxValue=0,this.paintVertexAttributes=h.map(function(I){return{name:"a_"+I,type:"Float32",components:m==="color"?2:1,offset:0}}),this.paintVertexArray=new E};ci.prototype.populatePaintArray=function(o,h,m,E,I){var V=this.paintVertexArray.length,Z=this.expression.evaluate(new vi(0),h,{},E,[],I);this.paintVertexArray.resize(o),this._setPaintValue(V,o,Z)},ci.prototype.updatePaintArray=function(o,h,m,E){var I=this.expression.evaluate({zoom:0},m,E);this._setPaintValue(o,h,I)},ci.prototype._setPaintValue=function(o,h,m){if(this.type==="color")for(var E=Zn(m),I=o;I<h;I++)this.paintVertexArray.emplace(I,E[0],E[1]);else{for(var V=o;V<h;V++)this.paintVertexArray.emplace(V,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}},ci.prototype.upload=function(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ci.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var _i=function(o,h,m,E,I,V){this.expression=o,this.uniformNames=h.map(function(Z){return"u_"+Z+"_t"}),this.type=m,this.useIntegerZoom=E,this.zoom=I,this.maxValue=0,this.paintVertexAttributes=h.map(function(Z){return{name:"a_"+Z,type:"Float32",components:m==="color"?4:2,offset:0}}),this.paintVertexArray=new V};_i.prototype.populatePaintArray=function(o,h,m,E,I){var V=this.expression.evaluate(new vi(this.zoom),h,{},E,[],I),Z=this.expression.evaluate(new vi(this.zoom+1),h,{},E,[],I),ne=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(ne,o,V,Z)},_i.prototype.updatePaintArray=function(o,h,m,E){var I=this.expression.evaluate({zoom:this.zoom},m,E),V=this.expression.evaluate({zoom:this.zoom+1},m,E);this._setPaintValue(o,h,I,V)},_i.prototype._setPaintValue=function(o,h,m,E){if(this.type==="color")for(var I=Zn(m),V=Zn(E),Z=o;Z<h;Z++)this.paintVertexArray.emplace(Z,I[0],I[1],V[0],V[1]);else{for(var ne=o;ne<h;ne++)this.paintVertexArray.emplace(ne,m,E);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(E))}},_i.prototype.upload=function(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},_i.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},_i.prototype.setUniform=function(o,h){var m=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,E=re(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);o.set(E)},_i.prototype.getBinding=function(o,h,m){return new Mr(o,h)};var ai=function(o,h,m,E,I,V){this.expression=o,this.type=h,this.useIntegerZoom=m,this.zoom=E,this.layerId=V,this.zoomInPaintVertexArray=new I,this.zoomOutPaintVertexArray=new I};ai.prototype.populatePaintArray=function(o,h,m){var E=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(E,o,h.patterns&&h.patterns[this.layerId],m)},ai.prototype.updatePaintArray=function(o,h,m,E,I){this._setPaintValues(o,h,m.patterns&&m.patterns[this.layerId],I)},ai.prototype._setPaintValues=function(o,h,m,E){if(E&&m){var I=E[m.min],V=E[m.mid],Z=E[m.max];if(I&&V&&Z)for(var ne=o;ne<h;ne++)this.zoomInPaintVertexArray.emplace(ne,V.tl[0],V.tl[1],V.br[0],V.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],V.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(ne,V.tl[0],V.tl[1],V.br[0],V.br[1],Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],V.pixelRatio,Z.pixelRatio)}},ai.prototype.upload=function(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,ft.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,ft.members,this.expression.isStateDependent))},ai.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var xn=function(o,h,m){this.binders={},this._buffers=[];var E=[];for(var I in o.paint._values)if(m(I)){var V=o.paint.get(I);if(V instanceof go&&sa(V.property.specification)){var Z=Oa(I,o.type),ne=V.value,ce=V.property.specification.type,_e=V.property.useIntegerZoom,Se=V.property.specification["property-type"],Me=Se==="cross-faded"||Se==="cross-faded-data-driven";if(ne.kind==="constant")this.binders[I]=Me?new pi(ne.value,Z):new mi(ne.value,Z,ce),E.push("/u_"+I);else if(ne.kind==="source"||Me){var Ve=va(I,ce,"source");this.binders[I]=Me?new ai(ne,ce,_e,h,Ve,o.id):new ci(ne,Z,ce,Ve),E.push("/a_"+I)}else{var f=va(I,ce,"composite");this.binders[I]=new _i(ne,Z,ce,_e,h,f),E.push("/z_"+I)}}}this.cacheKey=E.sort().join("")};xn.prototype.getMaxValue=function(o){var h=this.binders[o];return h instanceof ci||h instanceof _i?h.maxValue:0},xn.prototype.populatePaintArrays=function(o,h,m,E,I){for(var V in this.binders){var Z=this.binders[V];(Z instanceof ci||Z instanceof _i||Z instanceof ai)&&Z.populatePaintArray(o,h,m,E,I)}},xn.prototype.setConstantPatternPositions=function(o,h){for(var m in this.binders){var E=this.binders[m];E instanceof pi&&E.setConstantPatternPositions(o,h)}},xn.prototype.updatePaintArrays=function(o,h,m,E,I){var V=!1;for(var Z in o)for(var ne=0,ce=h.getPositions(Z);ne<ce.length;ne+=1){var _e=ce[ne],Se=m.feature(_e.index);for(var Me in this.binders){var Ve=this.binders[Me];if((Ve instanceof ci||Ve instanceof _i||Ve instanceof ai)&&Ve.expression.isStateDependent===!0){var f=E.paint.get(Me);Ve.expression=f.value,Ve.updatePaintArray(_e.start,_e.end,Se,o[Z],I),V=!0}}}return V},xn.prototype.defines=function(){var o=[];for(var h in this.binders){var m=this.binders[h];(m instanceof mi||m instanceof pi)&&o.push.apply(o,m.uniformNames.map(function(E){return"#define HAS_UNIFORM_"+E}))}return o},xn.prototype.getBinderAttributes=function(){var o=[];for(var h in this.binders){var m=this.binders[h];if(m instanceof ci||m instanceof _i)for(var E=0;E<m.paintVertexAttributes.length;E++)o.push(m.paintVertexAttributes[E].name);else if(m instanceof ai)for(var I=0;I<ft.members.length;I++)o.push(ft.members[I].name)}return o},xn.prototype.getBinderUniforms=function(){var o=[];for(var h in this.binders){var m=this.binders[h];if(m instanceof mi||m instanceof pi||m instanceof _i)for(var E=0,I=m.uniformNames;E<I.length;E+=1)o.push(I[E])}return o},xn.prototype.getPaintVertexBuffers=function(){return this._buffers},xn.prototype.getUniforms=function(o,h){var m=[];for(var E in this.binders){var I=this.binders[E];if(I instanceof mi||I instanceof pi||I instanceof _i)for(var V=0,Z=I.uniformNames;V<Z.length;V+=1){var ne=Z[V];if(h[ne]){var ce=I.getBinding(o,h[ne],ne);m.push({name:ne,property:E,binding:ce})}}}return m},xn.prototype.setUniforms=function(o,h,m,E){for(var I=0,V=h;I<V.length;I+=1){var Z=V[I],ne=Z.name,ce=Z.property;this.binders[ce].setUniform(Z.binding,E,m.get(ce),ne)}},xn.prototype.updatePaintBuffers=function(o){for(var h in this._buffers=[],this.binders){var m=this.binders[h];if(o&&m instanceof ai){var E=o.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;E&&this._buffers.push(E)}else(m instanceof ci||m instanceof _i)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}},xn.prototype.upload=function(o){for(var h in this.binders){var m=this.binders[h];(m instanceof ci||m instanceof _i||m instanceof ai)&&m.upload(o)}this.updatePaintBuffers()},xn.prototype.destroy=function(){for(var o in this.binders){var h=this.binders[o];(h instanceof ci||h instanceof _i||h instanceof ai)&&h.destroy()}};var ca=function(o,h,m){m===void 0&&(m=function(){return!0}),this.programConfigurations={};for(var E=0,I=o;E<I.length;E+=1){var V=I[E];this.programConfigurations[V.id]=new xn(V,h,m)}this.needsUpload=!1,this._featureMap=new Nt,this._bufferOffset=0};function Oa(o,h){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(h+"-","").replace(/-/g,"_")]}function va(o,h,m){var E={color:{source:Te,composite:g},number:{source:mr,composite:Te}},I=function(V){return{"line-pattern":{source:Ue,composite:Ue},"fill-pattern":{source:Ue,composite:Ue},"fill-extrusion-pattern":{source:Ue,composite:Ue}}[V]}(o);return I&&I[m]||E[h][m]}ca.prototype.populatePaintArrays=function(o,h,m,E,I,V){for(var Z in this.programConfigurations)this.programConfigurations[Z].populatePaintArrays(o,h,E,I,V);h.id!==void 0&&this._featureMap.add(h.id,m,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0},ca.prototype.updatePaintArrays=function(o,h,m,E){for(var I=0,V=m;I<V.length;I+=1){var Z=V[I];this.needsUpload=this.programConfigurations[Z.id].updatePaintArrays(o,this._featureMap,h,Z,E)||this.needsUpload}},ca.prototype.get=function(o){return this.programConfigurations[o]},ca.prototype.upload=function(o){if(this.needsUpload){for(var h in this.programConfigurations)this.programConfigurations[h].upload(o);this.needsUpload=!1}},ca.prototype.destroy=function(){for(var o in this.programConfigurations)this.programConfigurations[o].destroy()},fn("ConstantBinder",mi),fn("CrossFadedConstantBinder",pi),fn("SourceExpressionBinder",ci),fn("CrossFadedCompositeBinder",ai),fn("CompositeExpressionBinder",_i),fn("ProgramConfiguration",xn,{omit:["_buffers"]}),fn("ProgramConfigurationSet",ca);var Ha=Math.pow(2,14)-1,yo=-Ha-1;function _a(o){for(var h=8192/o.extent,m=o.loadGeometry(),E=0;E<m.length;E++)for(var I=m[E],V=0;V<I.length;V++){var Z=I[V],ne=Math.round(Z.x*h),ce=Math.round(Z.y*h);Z.x=re(ne,yo,Ha),Z.y=re(ce,yo,Ha),(ne<Z.x||ne>Z.x+1||ce<Z.y||ce>Z.y+1)&&Ie("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return m}function ys(o,h){return{type:o.type,id:o.id,properties:o.properties,geometry:h?_a(o):[]}}function ho(o,h,m,E,I){o.emplaceBack(2*h+(E+1)/2,2*m+(I+1)/2)}var fa=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(h){return h.id}),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new q,this.indexArray=new bt,this.segments=new Ze,this.programConfigurations=new ca(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(function(h){return h.isStateDependent()}).map(function(h){return h.id})};function vs(o,h){for(var m=0;m<o.length;m++)if(dl(h,o[m]))return!0;for(var E=0;E<h.length;E++)if(dl(o,h[E]))return!0;return!!yu(o,h)}function mu(o,h,m){return!!dl(o,h)||!!lc(h,o,m)}function ns(o,h){if(o.length===1)return nf(h,o[0]);for(var m=0;m<h.length;m++)for(var E=h[m],I=0;I<E.length;I++)if(dl(o,E[I]))return!0;for(var V=0;V<o.length;V++)if(nf(h,o[V]))return!0;for(var Z=0;Z<h.length;Z++)if(yu(o,h[Z]))return!0;return!1}function gu(o,h,m){if(o.length>1){if(yu(o,h))return!0;for(var E=0;E<h.length;E++)if(lc(h[E],o,m))return!0}for(var I=0;I<o.length;I++)if(lc(o[I],h,m))return!0;return!1}function yu(o,h){if(o.length===0||h.length===0)return!1;for(var m=0;m<o.length-1;m++)for(var E=o[m],I=o[m+1],V=0;V<h.length-1;V++)if(Jl(E,I,h[V],h[V+1]))return!0;return!1}function Jl(o,h,m,E){return Ne(o,m,E)!==Ne(h,m,E)&&Ne(o,h,m)!==Ne(o,h,E)}function lc(o,h,m){var E=m*m;if(h.length===1)return o.distSqr(h[0])<E;for(var I=1;I<h.length;I++)if(Lh(o,h[I-1],h[I])<E)return!0;return!1}function Lh(o,h,m){var E=h.distSqr(m);if(E===0)return o.distSqr(h);var I=((o.x-h.x)*(m.x-h.x)+(o.y-h.y)*(m.y-h.y))/E;return o.distSqr(I<0?h:I>1?m:m.sub(h)._mult(I)._add(h))}function nf(o,h){for(var m,E,I,V=!1,Z=0;Z<o.length;Z++)for(var ne=0,ce=(m=o[Z]).length-1;ne<m.length;ce=ne++)(E=m[ne]).y>h.y!=(I=m[ce]).y>h.y&&h.x<(I.x-E.x)*(h.y-E.y)/(I.y-E.y)+E.x&&(V=!V);return V}function dl(o,h){for(var m=!1,E=0,I=o.length-1;E<o.length;I=E++){var V=o[E],Z=o[I];V.y>h.y!=Z.y>h.y&&h.x<(Z.x-V.x)*(h.y-V.y)/(Z.y-V.y)+V.x&&(m=!m)}return m}function Ic(o,h,m){var E=m[0],I=m[2];if(o.x<E.x&&h.x<E.x||o.x>I.x&&h.x>I.x||o.y<E.y&&h.y<E.y||o.y>I.y&&h.y>I.y)return!1;var V=Ne(o,h,m[0]);return V!==Ne(o,h,m[1])||V!==Ne(o,h,m[2])||V!==Ne(o,h,m[3])}function Vo(o,h,m){var E=h.paint.get(o).value;return E.kind==="constant"?E.value:m.programConfigurations.get(h.id).getMaxValue(o)}function zl(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Ll(o,h,m,E,I){if(!h[0]&&!h[1])return o;var V=S.convert(h)._mult(I);m==="viewport"&&V._rotate(-E);for(var Z=[],ne=0;ne<o.length;ne++)Z.push(o[ne].sub(V));return Z}fa.prototype.populate=function(o,h,m){var E=this.layers[0],I=[],V=null,Z=!1;E.type==="circle"&&(Z=!(V=E.layout.get("circle-sort-key")).isConstant());for(var ne=0,ce=o;ne<ce.length;ne+=1){var _e=ce[ne],Se=_e.feature,Me=_e.id,Ve=_e.index,f=_e.sourceLayerIndex,u=this.layers[0]._featureFilter.needGeometry,p=ys(Se,u);if(this.layers[0]._featureFilter.filter(new vi(this.zoom),p,m)){var x=Z?V.evaluate(p,{},m):void 0,T={id:Me,properties:Se.properties,type:Se.type,sourceLayerIndex:f,index:Ve,geometry:u?p.geometry:_a(Se),patterns:{},sortKey:x};I.push(T)}}Z&&I.sort(function(Re,De){return Re.sortKey-De.sortKey});for(var D=0,j=I;D<j.length;D+=1){var J=j[D],ie=J.geometry,le=J.index,me=J.sourceLayerIndex,xe=o[le].feature;this.addFeature(J,ie,le,m),h.featureIndex.insert(xe,ie,le,me,this.index)}},fa.prototype.update=function(o,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,h,this.stateDependentLayers,m)},fa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},fa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},fa.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Qe),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},fa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},fa.prototype.addFeature=function(o,h,m,E){for(var I=0,V=h;I<V.length;I+=1)for(var Z=0,ne=V[I];Z<ne.length;Z+=1){var ce=ne[Z],_e=ce.x,Se=ce.y;if(!(_e<0||_e>=8192||Se<0||Se>=8192)){var Me=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),Ve=Me.vertexLength;ho(this.layoutVertexArray,_e,Se,-1,-1),ho(this.layoutVertexArray,_e,Se,1,-1),ho(this.layoutVertexArray,_e,Se,1,1),ho(this.layoutVertexArray,_e,Se,-1,1),this.indexArray.emplaceBack(Ve,Ve+1,Ve+2),this.indexArray.emplaceBack(Ve,Ve+3,Ve+2),Me.vertexLength+=4,Me.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,m,{},E)},fn("CircleBucket",fa,{omit:["layers"]});var Mc=new zo({"circle-sort-key":new Nn(Je.layout_circle["circle-sort-key"])}),Ja={paint:new zo({"circle-radius":new Nn(Je.paint_circle["circle-radius"]),"circle-color":new Nn(Je.paint_circle["circle-color"]),"circle-blur":new Nn(Je.paint_circle["circle-blur"]),"circle-opacity":new Nn(Je.paint_circle["circle-opacity"]),"circle-translate":new un(Je.paint_circle["circle-translate"]),"circle-translate-anchor":new un(Je.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new un(Je.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new un(Je.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Nn(Je.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Nn(Je.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Nn(Je.paint_circle["circle-stroke-opacity"])}),layout:Mc},vo=typeof Float32Array<"u"?Float32Array:Array;function qo(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function qu(o,h,m){var E=h[0],I=h[1],V=h[2],Z=h[3],ne=h[4],ce=h[5],_e=h[6],Se=h[7],Me=h[8],Ve=h[9],f=h[10],u=h[11],p=h[12],x=h[13],T=h[14],D=h[15],j=m[0],J=m[1],ie=m[2],le=m[3];return o[0]=j*E+J*ne+ie*Me+le*p,o[1]=j*I+J*ce+ie*Ve+le*x,o[2]=j*V+J*_e+ie*f+le*T,o[3]=j*Z+J*Se+ie*u+le*D,o[4]=(j=m[4])*E+(J=m[5])*ne+(ie=m[6])*Me+(le=m[7])*p,o[5]=j*I+J*ce+ie*Ve+le*x,o[6]=j*V+J*_e+ie*f+le*T,o[7]=j*Z+J*Se+ie*u+le*D,o[8]=(j=m[8])*E+(J=m[9])*ne+(ie=m[10])*Me+(le=m[11])*p,o[9]=j*I+J*ce+ie*Ve+le*x,o[10]=j*V+J*_e+ie*f+le*T,o[11]=j*Z+J*Se+ie*u+le*D,o[12]=(j=m[12])*E+(J=m[13])*ne+(ie=m[14])*Me+(le=m[15])*p,o[13]=j*I+J*ce+ie*Ve+le*x,o[14]=j*V+J*_e+ie*f+le*T,o[15]=j*Z+J*Se+ie*u+le*D,o}Math.hypot||(Math.hypot=function(){for(var o=arguments,h=0,m=arguments.length;m--;)h+=o[m]*o[m];return Math.sqrt(h)});var af,hd=qu;function $h(o,h,m){var E=h[0],I=h[1],V=h[2],Z=h[3];return o[0]=m[0]*E+m[4]*I+m[8]*V+m[12]*Z,o[1]=m[1]*E+m[5]*I+m[9]*V+m[13]*Z,o[2]=m[2]*E+m[6]*I+m[10]*V+m[14]*Z,o[3]=m[3]*E+m[7]*I+m[11]*V+m[15]*Z,o}af=new vo(3),vo!=Float32Array&&(af[0]=0,af[1]=0,af[2]=0),function(){var o=new vo(4);vo!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0,o[3]=0)}();var Jo=(function(){var o=new vo(2);vo!=Float32Array&&(o[0]=0,o[1]=0)}(),function(o){function h(m){o.call(this,m,Ja)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.createBucket=function(m){return new fa(m)},h.prototype.queryRadius=function(m){var E=m;return Vo("circle-radius",this,E)+Vo("circle-stroke-width",this,E)+zl(this.paint.get("circle-translate"))},h.prototype.queryIntersectsFeature=function(m,E,I,V,Z,ne,ce,_e){for(var Se=Ll(m,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),ne.angle,ce),Me=this.paint.get("circle-radius").evaluate(E,I)+this.paint.get("circle-stroke-width").evaluate(E,I),Ve=this.paint.get("circle-pitch-alignment")==="map",f=Ve?Se:function(me,xe){return me.map(function(Re){return _s(Re,xe)})}(Se,_e),u=Ve?Me*ce:Me,p=0,x=V;p<x.length;p+=1)for(var T=0,D=x[p];T<D.length;T+=1){var j=D[T],J=Ve?j:_s(j,_e),ie=u,le=$h([],[j.x,j.y,0,1],_e);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ie*=le[3]/ne.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ie*=ne.cameraToCenterDistance/le[3]),mu(f,J,ie))return!0}return!1},h}(O));function _s(o,h){var m=$h([],[o.x,o.y,0,1],h);return new S(m[0]/m[3],m[1]/m[3])}var uc=function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h}(fa);function of(o,h,m,E){var I=h.width,V=h.height;if(E){if(E instanceof Uint8ClampedArray)E=new Uint8Array(E.buffer);else if(E.length!==I*V*m)throw new RangeError("mismatched image size")}else E=new Uint8Array(I*V*m);return o.width=I,o.height=V,o.data=E,o}function ym(o,h,m){var E=h.width,I=h.height;if(E!==o.width||I!==o.height){var V=of({},{width:E,height:I},m);Hf(o,V,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,E),height:Math.min(o.height,I)},m),o.width=E,o.height=I,o.data=V.data}}function Hf(o,h,m,E,I,V){if(I.width===0||I.height===0)return h;if(I.width>o.width||I.height>o.height||m.x>o.width-I.width||m.y>o.height-I.height)throw new RangeError("out of range source coordinates for image copy");if(I.width>h.width||I.height>h.height||E.x>h.width-I.width||E.y>h.height-I.height)throw new RangeError("out of range destination coordinates for image copy");for(var Z=o.data,ne=h.data,ce=0;ce<I.height;ce++)for(var _e=((m.y+ce)*o.width+m.x)*V,Se=((E.y+ce)*h.width+E.x)*V,Me=0;Me<I.width*V;Me++)ne[Se+Me]=Z[_e+Me];return h}fn("HeatmapBucket",uc,{omit:["layers"]});var Nh=function(o,h){of(this,o,1,h)};Nh.prototype.resize=function(o){ym(this,o,1)},Nh.prototype.clone=function(){return new Nh({width:this.width,height:this.height},new Uint8Array(this.data))},Nh.copy=function(o,h,m,E,I){Hf(o,h,m,E,I,1)};var Hs=function(o,h){of(this,o,4,h)};Hs.prototype.resize=function(o){ym(this,o,4)},Hs.prototype.replace=function(o,h){h?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o},Hs.prototype.clone=function(){return new Hs({width:this.width,height:this.height},new Uint8Array(this.data))},Hs.copy=function(o,h,m,E,I){Hf(o,h,m,E,I,4)},fn("AlphaImage",Nh),fn("RGBAImage",Hs);var cv={paint:new zo({"heatmap-radius":new Nn(Je.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Nn(Je.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new un(Je.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Dl(Je.paint_heatmap["heatmap-color"]),"heatmap-opacity":new un(Je.paint_heatmap["heatmap-opacity"])})};function Bh(o){var h={},m=o.resolution||256,E=o.clips?o.clips.length:1,I=o.image||new Hs({width:m,height:E}),V=function(u,p,x){h[o.evaluationKey]=x;var T=o.expression.evaluate(h);I.data[u+p+0]=Math.floor(255*T.r/T.a),I.data[u+p+1]=Math.floor(255*T.g/T.a),I.data[u+p+2]=Math.floor(255*T.b/T.a),I.data[u+p+3]=Math.floor(255*T.a)};if(o.clips)for(var Z=0,ne=0;Z<E;++Z,ne+=4*m)for(var ce=0,_e=0;ce<m;ce++,_e+=4){var Se=ce/(m-1),Me=o.clips[Z];V(ne,_e,Me.start*(1-Se)+Me.end*Se)}else for(var Ve=0,f=0;Ve<m;Ve++,f+=4)V(0,f,Ve/(m-1));return I}var Og=function(o){function h(m){o.call(this,m,cv),this._updateColorRamp()}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.createBucket=function(m){return new uc(m)},h.prototype._handleSpecialPaintPropertyUpdate=function(m){m==="heatmap-color"&&this._updateColorRamp()},h.prototype._updateColorRamp=function(){this.colorRamp=Bh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},h.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},h.prototype.queryRadius=function(){return 0},h.prototype.queryIntersectsFeature=function(){return!1},h.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},h}(O),vm={paint:new zo({"hillshade-illumination-direction":new un(Je.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new un(Je.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new un(Je.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new un(Je.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new un(Je.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new un(Je.paint_hillshade["hillshade-accent-color"])})},fv=function(o){function h(m){o.call(this,m,vm)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},h}(O),Rg=R([{name:"a_pos",components:2,type:"Int16"}],4).members,ta=Pp,hv=Pp;function Pp(o,h,m){m=m||2;var E,I,V,Z,ne,ce,_e,Se=h&&h.length,Me=Se?h[0]*m:o.length,Ve=Oc(o,0,Me,m,!0),f=[];if(!Ve||Ve.next===Ve.prev)return f;if(Se&&(Ve=function(p,x,T,D){var j,J,ie,le=[];for(j=0,J=x.length;j<J;j++)(ie=Oc(p,x[j]*D,j<J-1?x[j+1]*D:p.length,D,!1))===ie.next&&(ie.steiner=!0),le.push(Zf(ie));for(le.sort(Ap),j=0;j<le.length;j++)Dg(le[j],T),T=is(T,T.next);return T}(o,h,Ve,m)),o.length>80*m){E=V=o[0],I=Z=o[1];for(var u=m;u<Me;u+=m)(ne=o[u])<E&&(E=ne),(ce=o[u+1])<I&&(I=ce),ne>V&&(V=ne),ce>Z&&(Z=ce);_e=(_e=Math.max(V-E,Z-I))!==0?1/_e:0}return Tp(Ve,f,m,E,I,_e),f}function Oc(o,h,m,E,I){var V,Z;if(I===md(o,h,m,E)>0)for(V=h;V<m;V+=E)Z=dv(V,o[V],o[V+1],Z);else for(V=m-E;V>=h;V-=E)Z=dv(V,o[V],o[V+1],Z);return Z&&pd(Z,Z.next)&&(Ra(Z),Z=Z.next),Z}function is(o,h){if(!o)return o;h||(h=o);var m,E=o;do if(m=!1,E.steiner||!pd(E,E.next)&&_o(E.prev,E,E.next)!==0)E=E.next;else{if(Ra(E),(E=h=E.prev)===E.next)break;m=!0}while(m||E!==h);return h}function Tp(o,h,m,E,I,V,Z){if(o){!Z&&V&&function(Se,Me,Ve,f){var u=Se;do u.z===null&&(u.z=Os(u.x,u.y,Me,Ve,f)),u.prevZ=u.prev,u.nextZ=u.next,u=u.next;while(u!==Se);u.prevZ.nextZ=null,u.prevZ=null,function(p){var x,T,D,j,J,ie,le,me,xe=1;do{for(T=p,p=null,J=null,ie=0;T;){for(ie++,D=T,le=0,x=0;x<xe&&(le++,D=D.nextZ);x++);for(me=xe;le>0||me>0&&D;)le!==0&&(me===0||!D||T.z<=D.z)?(j=T,T=T.nextZ,le--):(j=D,D=D.nextZ,me--),J?J.nextZ=j:p=j,j.prevZ=J,J=j;T=D}J.nextZ=null,xe*=2}while(ie>1)}(u)}(o,E,I,V);for(var ne,ce,_e=o;o.prev!==o.next;)if(ne=o.prev,ce=o.next,V?Gu(o,E,I,V):Z0(o))h.push(ne.i/m),h.push(o.i/m),h.push(ce.i/m),Ra(o),o=ce.next,_e=ce.next;else if((o=ce)===_e){Z?Z===1?Tp(o=X0(is(o),h,m),h,m,E,I,V,2):Z===2&&Fh(o,h,m,E,I,V):Tp(is(o),h,m,E,I,V,1);break}}}function Z0(o){var h=o.prev,m=o,E=o.next;if(_o(h,m,E)>=0)return!1;for(var I=o.next.next;I!==o.prev;){if(Xf(h.x,h.y,m.x,m.y,E.x,E.y,I.x,I.y)&&_o(I.prev,I,I.next)>=0)return!1;I=I.next}return!0}function Gu(o,h,m,E){var I=o.prev,V=o,Z=o.next;if(_o(I,V,Z)>=0)return!1;for(var ne=I.x>V.x?I.x>Z.x?I.x:Z.x:V.x>Z.x?V.x:Z.x,ce=I.y>V.y?I.y>Z.y?I.y:Z.y:V.y>Z.y?V.y:Z.y,_e=Os(I.x<V.x?I.x<Z.x?I.x:Z.x:V.x<Z.x?V.x:Z.x,I.y<V.y?I.y<Z.y?I.y:Z.y:V.y<Z.y?V.y:Z.y,h,m,E),Se=Os(ne,ce,h,m,E),Me=o.prevZ,Ve=o.nextZ;Me&&Me.z>=_e&&Ve&&Ve.z<=Se;){if(Me!==o.prev&&Me!==o.next&&Xf(I.x,I.y,V.x,V.y,Z.x,Z.y,Me.x,Me.y)&&_o(Me.prev,Me,Me.next)>=0||(Me=Me.prevZ,Ve!==o.prev&&Ve!==o.next&&Xf(I.x,I.y,V.x,V.y,Z.x,Z.y,Ve.x,Ve.y)&&_o(Ve.prev,Ve,Ve.next)>=0))return!1;Ve=Ve.nextZ}for(;Me&&Me.z>=_e;){if(Me!==o.prev&&Me!==o.next&&Xf(I.x,I.y,V.x,V.y,Z.x,Z.y,Me.x,Me.y)&&_o(Me.prev,Me,Me.next)>=0)return!1;Me=Me.prevZ}for(;Ve&&Ve.z<=Se;){if(Ve!==o.prev&&Ve!==o.next&&Xf(I.x,I.y,V.x,V.y,Z.x,Z.y,Ve.x,Ve.y)&&_o(Ve.prev,Ve,Ve.next)>=0)return!1;Ve=Ve.nextZ}return!0}function X0(o,h,m){var E=o;do{var I=E.prev,V=E.next.next;!pd(I,V)&&_m(I,E,E.next,V)&&Uh(I,V)&&Uh(V,I)&&(h.push(I.i/m),h.push(E.i/m),h.push(V.i/m),Ra(E),Ra(E.next),E=o=V),E=E.next}while(E!==o);return is(E)}function Fh(o,h,m,E,I,V){var Z=o;do{for(var ne=Z.next.next;ne!==Z.prev;){if(Z.i!==ne.i&&pv(Z,ne)){var ce=Ql(Z,ne);return Z=is(Z,Z.next),ce=is(ce,ce.next),Tp(Z,h,m,E,I,V),void Tp(ce,h,m,E,I,V)}ne=ne.next}Z=Z.next}while(Z!==o)}function Ap(o,h){return o.x-h.x}function Dg(o,h){if(h=function(E,I){var V,Z=I,ne=E.x,ce=E.y,_e=-1/0;do{if(ce<=Z.y&&ce>=Z.next.y&&Z.next.y!==Z.y){var Se=Z.x+(ce-Z.y)*(Z.next.x-Z.x)/(Z.next.y-Z.y);if(Se<=ne&&Se>_e){if(_e=Se,Se===ne){if(ce===Z.y)return Z;if(ce===Z.next.y)return Z.next}V=Z.x<Z.next.x?Z:Z.next}}Z=Z.next}while(Z!==I);if(!V)return null;if(ne===_e)return V;var Me,Ve=V,f=V.x,u=V.y,p=1/0;Z=V;do ne>=Z.x&&Z.x>=f&&ne!==Z.x&&Xf(ce<u?ne:_e,ce,f,u,ce<u?_e:ne,ce,Z.x,Z.y)&&(Me=Math.abs(ce-Z.y)/(ne-Z.x),Uh(Z,E)&&(Me<p||Me===p&&(Z.x>V.x||Z.x===V.x&&Wf(V,Z)))&&(V=Z,p=Me)),Z=Z.next;while(Z!==Ve);return V}(o,h)){var m=Ql(h,o);is(h,h.next),is(m,m.next)}}function Wf(o,h){return _o(o.prev,o,h.prev)<0&&_o(h.next,o,o.next)<0}function Os(o,h,m,E,I){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=32767*(o-m)*I)|o<<8))|o<<4))|o<<2))|o<<1))|(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=32767*(h-E)*I)|h<<8))|h<<4))|h<<2))|h<<1))<<1}function Zf(o){var h=o,m=o;do(h.x<m.x||h.x===m.x&&h.y<m.y)&&(m=h),h=h.next;while(h!==o);return m}function Xf(o,h,m,E,I,V,Z,ne){return(I-Z)*(h-ne)-(o-Z)*(V-ne)>=0&&(o-Z)*(E-ne)-(m-Z)*(h-ne)>=0&&(m-Z)*(V-ne)-(I-Z)*(E-ne)>=0}function pv(o,h){return o.next.i!==h.i&&o.prev.i!==h.i&&!function(m,E){var I=m;do{if(I.i!==m.i&&I.next.i!==m.i&&I.i!==E.i&&I.next.i!==E.i&&_m(I,I.next,m,E))return!0;I=I.next}while(I!==m);return!1}(o,h)&&(Uh(o,h)&&Uh(h,o)&&function(m,E){var I=m,V=!1,Z=(m.x+E.x)/2,ne=(m.y+E.y)/2;do I.y>ne!=I.next.y>ne&&I.next.y!==I.y&&Z<(I.next.x-I.x)*(ne-I.y)/(I.next.y-I.y)+I.x&&(V=!V),I=I.next;while(I!==m);return V}(o,h)&&(_o(o.prev,o,h.prev)||_o(o,h.prev,h))||pd(o,h)&&_o(o.prev,o,o.next)>0&&_o(h.prev,h,h.next)>0)}function _o(o,h,m){return(h.y-o.y)*(m.x-h.x)-(h.x-o.x)*(m.y-h.y)}function pd(o,h){return o.x===h.x&&o.y===h.y}function _m(o,h,m,E){var I=Kf(_o(o,h,m)),V=Kf(_o(o,h,E)),Z=Kf(_o(m,E,o)),ne=Kf(_o(m,E,h));return I!==V&&Z!==ne||!(I!==0||!dd(o,m,h))||!(V!==0||!dd(o,E,h))||!(Z!==0||!dd(m,o,E))||!(ne!==0||!dd(m,h,E))}function dd(o,h,m){return h.x<=Math.max(o.x,m.x)&&h.x>=Math.min(o.x,m.x)&&h.y<=Math.max(o.y,m.y)&&h.y>=Math.min(o.y,m.y)}function Kf(o){return o>0?1:o<0?-1:0}function Uh(o,h){return _o(o.prev,o,o.next)<0?_o(o,h,o.next)>=0&&_o(o,o.prev,h)>=0:_o(o,h,o.prev)<0||_o(o,o.next,h)<0}function Ql(o,h){var m=new jh(o.i,o.x,o.y),E=new jh(h.i,h.x,h.y),I=o.next,V=h.prev;return o.next=h,h.prev=o,m.next=I,I.prev=m,E.next=m,m.prev=E,V.next=E,E.prev=V,E}function dv(o,h,m,E){var I=new jh(o,h,m);return E?(I.next=E.next,I.prev=E,E.next.prev=I,E.next=I):(I.prev=I,I.next=I),I}function Ra(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function jh(o,h,m){this.i=o,this.x=h,this.y=m,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function md(o,h,m,E){for(var I=0,V=h,Z=m-E;V<m;V+=E)I+=(o[Z]-o[V])*(o[V+1]+o[Z+1]),Z=V;return I}function kp(o,h,m,E,I){(function V(Z,ne,ce,_e,Se){for(;_e>ce;){if(_e-ce>600){var Me=_e-ce+1,Ve=ne-ce+1,f=Math.log(Me),u=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*u*(Me-u)/Me)*(Ve-Me/2<0?-1:1);V(Z,ne,Math.max(ce,Math.floor(ne-Ve*u/Me+p)),Math.min(_e,Math.floor(ne+(Me-Ve)*u/Me+p)),Se)}var x=Z[ne],T=ce,D=_e;for(Yf(Z,ce,ne),Se(Z[_e],x)>0&&Yf(Z,ce,_e);T<D;){for(Yf(Z,T,D),T++,D--;Se(Z[T],x)<0;)T++;for(;Se(Z[D],x)>0;)D--}Se(Z[ce],x)===0?Yf(Z,ce,D):Yf(Z,++D,_e),D<=ne&&(ce=D+1),ne<=D&&(_e=D-1)}})(o,h,m||0,E||o.length-1,I||gd)}function Yf(o,h,m){var E=o[h];o[h]=o[m],o[m]=E}function gd(o,h){return o<h?-1:o>h?1:0}function bm(o,h){var m=o.length;if(m<=1)return[o];for(var E,I,V=[],Z=0;Z<m;Z++){var ne=lt(o[Z]);ne!==0&&(o[Z].area=Math.abs(ne),I===void 0&&(I=ne<0),I===ne<0?(E&&V.push(E),E=[o[Z]]):E.push(o[Z]))}if(E&&V.push(E),h>1)for(var ce=0;ce<V.length;ce++)V[ce].length<=h||(kp(V[ce],h,1,V[ce].length-1,zg),V[ce]=V[ce].slice(0,h));return V}function zg(o,h){return h.area-o.area}function Jf(o,h,m){for(var E=m.patternDependencies,I=!1,V=0,Z=h;V<Z.length;V+=1){var ne=Z[V].paint.get(o+"-pattern");ne.isConstant()||(I=!0);var ce=ne.constantOr(null);ce&&(I=!0,E[ce.to]=!0,E[ce.from]=!0)}return I}function yd(o,h,m,E,I){for(var V=I.patternDependencies,Z=0,ne=h;Z<ne.length;Z+=1){var ce=ne[Z],_e=ce.paint.get(o+"-pattern").value;if(_e.kind!=="constant"){var Se=_e.evaluate({zoom:E-1},m,{},I.availableImages),Me=_e.evaluate({zoom:E},m,{},I.availableImages),Ve=_e.evaluate({zoom:E+1},m,{},I.availableImages);Me=Me&&Me.name?Me.name:Me,Ve=Ve&&Ve.name?Ve.name:Ve,V[Se=Se&&Se.name?Se.name:Se]=!0,V[Me]=!0,V[Ve]=!0,m.patterns[ce.id]={min:Se,mid:Me,max:Ve}}}return m}Pp.deviation=function(o,h,m,E){var I=h&&h.length,V=Math.abs(md(o,0,I?h[0]*m:o.length,m));if(I)for(var Z=0,ne=h.length;Z<ne;Z++)V-=Math.abs(md(o,h[Z]*m,Z<ne-1?h[Z+1]*m:o.length,m));var ce=0;for(Z=0;Z<E.length;Z+=3){var _e=E[Z]*m,Se=E[Z+1]*m,Me=E[Z+2]*m;ce+=Math.abs((o[_e]-o[Me])*(o[Se+1]-o[_e+1])-(o[_e]-o[Se])*(o[Me+1]-o[_e+1]))}return V===0&&ce===0?0:Math.abs((ce-V)/V)},Pp.flatten=function(o){for(var h=o[0][0].length,m={vertices:[],holes:[],dimensions:h},E=0,I=0;I<o.length;I++){for(var V=0;V<o[I].length;V++)for(var Z=0;Z<h;Z++)m.vertices.push(o[I][V][Z]);I>0&&m.holes.push(E+=o[I-1].length)}return m},ta.default=hv;var eu=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(h){return h.id}),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new q,this.indexArray=new bt,this.indexArray2=new gr,this.programConfigurations=new ca(o.layers,o.zoom),this.segments=new Ze,this.segments2=new Ze,this.stateDependentLayerIds=this.layers.filter(function(h){return h.isStateDependent()}).map(function(h){return h.id})};eu.prototype.populate=function(o,h,m){this.hasPattern=Jf("fill",this.layers,h);for(var E=this.layers[0].layout.get("fill-sort-key"),I=!E.isConstant(),V=[],Z=0,ne=o;Z<ne.length;Z+=1){var ce=ne[Z],_e=ce.feature,Se=ce.id,Me=ce.index,Ve=ce.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,u=ys(_e,f);if(this.layers[0]._featureFilter.filter(new vi(this.zoom),u,m)){var p=I?E.evaluate(u,{},m,h.availableImages):void 0,x={id:Se,properties:_e.properties,type:_e.type,sourceLayerIndex:Ve,index:Me,geometry:f?u.geometry:_a(_e),patterns:{},sortKey:p};V.push(x)}}I&&V.sort(function(xe,Re){return xe.sortKey-Re.sortKey});for(var T=0,D=V;T<D.length;T+=1){var j=D[T],J=j.geometry,ie=j.index,le=j.sourceLayerIndex;if(this.hasPattern){var me=yd("fill",this.layers,j,this.zoom,h);this.patternFeatures.push(me)}else this.addFeature(j,J,ie,m,{});h.featureIndex.insert(o[ie].feature,J,ie,le,this.index)}},eu.prototype.update=function(o,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,h,this.stateDependentLayers,m)},eu.prototype.addFeatures=function(o,h,m){for(var E=0,I=this.patternFeatures;E<I.length;E+=1){var V=I[E];this.addFeature(V,V.geometry,V.index,h,m)}},eu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},eu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},eu.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Rg),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0},eu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},eu.prototype.addFeature=function(o,h,m,E,I){for(var V=0,Z=bm(h,500);V<Z.length;V+=1){for(var ne=Z[V],ce=0,_e=0,Se=ne;_e<Se.length;_e+=1)ce+=Se[_e].length;for(var Me=this.segments.prepareSegment(ce,this.layoutVertexArray,this.indexArray),Ve=Me.vertexLength,f=[],u=[],p=0,x=ne;p<x.length;p+=1){var T=x[p];if(T.length!==0){T!==ne[0]&&u.push(f.length/2);var D=this.segments2.prepareSegment(T.length,this.layoutVertexArray,this.indexArray2),j=D.vertexLength;this.layoutVertexArray.emplaceBack(T[0].x,T[0].y),this.indexArray2.emplaceBack(j+T.length-1,j),f.push(T[0].x),f.push(T[0].y);for(var J=1;J<T.length;J++)this.layoutVertexArray.emplaceBack(T[J].x,T[J].y),this.indexArray2.emplaceBack(j+J-1,j+J),f.push(T[J].x),f.push(T[J].y);D.vertexLength+=T.length,D.primitiveLength+=T.length}}for(var ie=ta(f,u),le=0;le<ie.length;le+=3)this.indexArray.emplaceBack(Ve+ie[le],Ve+ie[le+1],Ve+ie[le+2]);Me.vertexLength+=ce,Me.primitiveLength+=ie.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,m,I,E)},fn("FillBucket",eu,{omit:["layers","patternFeatures"]});var mv=new zo({"fill-sort-key":new Nn(Je.layout_fill["fill-sort-key"])}),$l={paint:new zo({"fill-antialias":new un(Je.paint_fill["fill-antialias"]),"fill-opacity":new Nn(Je.paint_fill["fill-opacity"]),"fill-color":new Nn(Je.paint_fill["fill-color"]),"fill-outline-color":new Nn(Je.paint_fill["fill-outline-color"]),"fill-translate":new un(Je.paint_fill["fill-translate"]),"fill-translate-anchor":new un(Je.paint_fill["fill-translate-anchor"]),"fill-pattern":new na(Je.paint_fill["fill-pattern"])}),layout:mv},tu=function(o){function h(m){o.call(this,m,$l)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.recalculate=function(m,E){o.prototype.recalculate.call(this,m,E);var I=this.paint._values["fill-outline-color"];I.value.kind==="constant"&&I.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},h.prototype.createBucket=function(m){return new eu(m)},h.prototype.queryRadius=function(){return zl(this.paint.get("fill-translate"))},h.prototype.queryIntersectsFeature=function(m,E,I,V,Z,ne,ce){return ns(Ll(m,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),ne.angle,ce),V)},h.prototype.isTileClipped=function(){return!0},h}(O),K0=R([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,xm=sf;function sf(o,h,m,E,I){this.properties={},this.extent=m,this.type=0,this._pbf=o,this._geometry=-1,this._keys=E,this._values=I,o.readFields(Qf,this,h)}function Qf(o,h,m){o==1?h.id=m.readVarint():o==2?function(E,I){for(var V=E.readVarint()+E.pos;E.pos<V;){var Z=I._keys[E.readVarint()],ne=I._values[E.readVarint()];I.properties[Z]=ne}}(m,h):o==3?h.type=m.readVarint():o==4&&(h._geometry=m.pos)}function wm(o){for(var h,m,E=0,I=0,V=o.length,Z=V-1;I<V;Z=I++)E+=((m=o[Z]).x-(h=o[I]).x)*(h.y+m.y);return E}sf.types=["Unknown","Point","LineString","Polygon"],sf.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var h,m=o.readVarint()+o.pos,E=1,I=0,V=0,Z=0,ne=[];o.pos<m;){if(I<=0){var ce=o.readVarint();E=7&ce,I=ce>>3}if(I--,E===1||E===2)V+=o.readSVarint(),Z+=o.readSVarint(),E===1&&(h&&ne.push(h),h=[]),h.push(new S(V,Z));else{if(E!==7)throw new Error("unknown command "+E);h&&h.push(h[0].clone())}}return h&&ne.push(h),ne},sf.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var h=o.readVarint()+o.pos,m=1,E=0,I=0,V=0,Z=1/0,ne=-1/0,ce=1/0,_e=-1/0;o.pos<h;){if(E<=0){var Se=o.readVarint();m=7&Se,E=Se>>3}if(E--,m===1||m===2)(I+=o.readSVarint())<Z&&(Z=I),I>ne&&(ne=I),(V+=o.readSVarint())<ce&&(ce=V),V>_e&&(_e=V);else if(m!==7)throw new Error("unknown command "+m)}return[Z,ce,ne,_e]},sf.prototype.toGeoJSON=function(o,h,m){var E,I,V=this.extent*Math.pow(2,m),Z=this.extent*o,ne=this.extent*h,ce=this.loadGeometry(),_e=sf.types[this.type];function Se(f){for(var u=0;u<f.length;u++){var p=f[u];f[u]=[360*(p.x+Z)/V-180,360/Math.PI*Math.atan(Math.exp((180-360*(p.y+ne)/V)*Math.PI/180))-90]}}switch(this.type){case 1:var Me=[];for(E=0;E<ce.length;E++)Me[E]=ce[E][0];Se(ce=Me);break;case 2:for(E=0;E<ce.length;E++)Se(ce[E]);break;case 3:for(ce=function(f){var u=f.length;if(u<=1)return[f];for(var p,x,T=[],D=0;D<u;D++){var j=wm(f[D]);j!==0&&(x===void 0&&(x=j<0),x===j<0?(p&&T.push(p),p=[f[D]]):p.push(f[D]))}return p&&T.push(p),T}(ce),E=0;E<ce.length;E++)for(I=0;I<ce[E].length;I++)Se(ce[E][I])}ce.length===1?ce=ce[0]:_e="Multi"+_e;var Ve={type:"Feature",geometry:{type:_e,coordinates:ce},properties:this.properties};return"id"in this&&(Ve.id=this.id),Ve};var vd=gv;function gv(o,h){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(yv,this,h),this.length=this._features.length}function yv(o,h,m){o===15?h.version=m.readVarint():o===1?h.name=m.readString():o===5?h.extent=m.readVarint():o===2?h._features.push(m.pos):o===3?h._keys.push(m.readString()):o===4&&h._values.push(function(E){for(var I=null,V=E.readVarint()+E.pos;E.pos<V;){var Z=E.readVarint()>>3;I=Z===1?E.readString():Z===2?E.readFloat():Z===3?E.readDouble():Z===4?E.readVarint64():Z===5?E.readVarint():Z===6?E.readSVarint():Z===7?E.readBoolean():null}return I}(m))}function Ip(o,h,m){if(o===3){var E=new vd(m,m.readVarint()+m.pos);E.length&&(h[E.name]=E)}}gv.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var h=this._pbf.readVarint()+this._pbf.pos;return new xm(this._pbf,h,this.extent,this._keys,this._values)};var Rc={VectorTile:function(o,h){this.layers=o.readFields(Ip,{},h)},VectorTileFeature:xm,VectorTileLayer:vd},Y0=Rc.VectorTileFeature.types,cc=Math.pow(2,13);function Mp(o,h,m,E,I,V,Z,ne){o.emplaceBack(h,m,2*Math.floor(E*cc)+Z,I*cc*2,V*cc*2,Math.round(ne))}var Nl=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(h){return h.id}),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new he,this.indexArray=new bt,this.programConfigurations=new ca(o.layers,o.zoom),this.segments=new Ze,this.stateDependentLayerIds=this.layers.filter(function(h){return h.isStateDependent()}).map(function(h){return h.id})};function Vh(o,h){return o.x===h.x&&(o.x<0||o.x>8192)||o.y===h.y&&(o.y<0||o.y>8192)}Nl.prototype.populate=function(o,h,m){this.features=[],this.hasPattern=Jf("fill-extrusion",this.layers,h);for(var E=0,I=o;E<I.length;E+=1){var V=I[E],Z=V.feature,ne=V.id,ce=V.index,_e=V.sourceLayerIndex,Se=this.layers[0]._featureFilter.needGeometry,Me=ys(Z,Se);if(this.layers[0]._featureFilter.filter(new vi(this.zoom),Me,m)){var Ve={id:ne,sourceLayerIndex:_e,index:ce,geometry:Se?Me.geometry:_a(Z),properties:Z.properties,type:Z.type,patterns:{}};this.hasPattern?this.features.push(yd("fill-extrusion",this.layers,Ve,this.zoom,h)):this.addFeature(Ve,Ve.geometry,ce,m,{}),h.featureIndex.insert(Z,Ve.geometry,ce,_e,this.index,!0)}}},Nl.prototype.addFeatures=function(o,h,m){for(var E=0,I=this.features;E<I.length;E+=1){var V=I[E];this.addFeature(V,V.geometry,V.index,h,m)}},Nl.prototype.update=function(o,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,h,this.stateDependentLayers,m)},Nl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Nl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Nl.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,K0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},Nl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Nl.prototype.addFeature=function(o,h,m,E,I){for(var V=0,Z=bm(h,500);V<Z.length;V+=1){for(var ne=Z[V],ce=0,_e=0,Se=ne;_e<Se.length;_e+=1)ce+=Se[_e].length;for(var Me=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Ve=0,f=ne;Ve<f.length;Ve+=1){var u=f[Ve];if(u.length!==0&&!((At=u).every(function($t){return $t.x<0})||At.every(function($t){return $t.x>8192})||At.every(function($t){return $t.y<0})||At.every(function($t){return $t.y>8192})))for(var p=0,x=0;x<u.length;x++){var T=u[x];if(x>=1){var D=u[x-1];if(!Vh(T,D)){Me.vertexLength+4>Ze.MAX_VERTEX_ARRAY_LENGTH&&(Me=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var j=T.sub(D)._perp()._unit(),J=D.dist(T);p+J>32768&&(p=0),Mp(this.layoutVertexArray,T.x,T.y,j.x,j.y,0,0,p),Mp(this.layoutVertexArray,T.x,T.y,j.x,j.y,0,1,p),Mp(this.layoutVertexArray,D.x,D.y,j.x,j.y,0,0,p+=J),Mp(this.layoutVertexArray,D.x,D.y,j.x,j.y,0,1,p);var ie=Me.vertexLength;this.indexArray.emplaceBack(ie,ie+2,ie+1),this.indexArray.emplaceBack(ie+1,ie+2,ie+3),Me.vertexLength+=4,Me.primitiveLength+=2}}}}if(Me.vertexLength+ce>Ze.MAX_VERTEX_ARRAY_LENGTH&&(Me=this.segments.prepareSegment(ce,this.layoutVertexArray,this.indexArray)),Y0[o.type]==="Polygon"){for(var le=[],me=[],xe=Me.vertexLength,Re=0,De=ne;Re<De.length;Re+=1){var Be=De[Re];if(Be.length!==0){Be!==ne[0]&&me.push(le.length/2);for(var rt=0;rt<Be.length;rt++){var ot=Be[rt];Mp(this.layoutVertexArray,ot.x,ot.y,0,0,1,1,0),le.push(ot.x),le.push(ot.y)}}}for(var Pt=ta(le,me),kt=0;kt<Pt.length;kt+=3)this.indexArray.emplaceBack(xe+Pt[kt],xe+Pt[kt+2],xe+Pt[kt+1]);Me.primitiveLength+=Pt.length/3,Me.vertexLength+=ce}}var At;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,m,I,E)},fn("FillExtrusionBucket",Nl,{omit:["layers","features"]});var Sm={paint:new zo({"fill-extrusion-opacity":new un(Je["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Nn(Je["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new un(Je["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new un(Je["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new na(Je["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Nn(Je["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Nn(Je["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new un(Je["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Lg=function(o){function h(m){o.call(this,m,Sm)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.createBucket=function(m){return new Nl(m)},h.prototype.queryRadius=function(){return zl(this.paint.get("fill-extrusion-translate"))},h.prototype.is3D=function(){return!0},h.prototype.queryIntersectsFeature=function(m,E,I,V,Z,ne,ce,_e){var Se=Ll(m,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),ne.angle,ce),Me=this.paint.get("fill-extrusion-height").evaluate(E,I),Ve=this.paint.get("fill-extrusion-base").evaluate(E,I),f=function(p,x,T,D){for(var j=[],J=0,ie=p;J<ie.length;J+=1){var le=ie[J],me=[le.x,le.y,0,1];$h(me,me,x),j.push(new S(me[0]/me[3],me[1]/me[3]))}return j}(Se,_e),u=function(p,x,T,D){for(var j=[],J=[],ie=D[8]*x,le=D[9]*x,me=D[10]*x,xe=D[11]*x,Re=D[8]*T,De=D[9]*T,Be=D[10]*T,rt=D[11]*T,ot=0,Pt=p;ot<Pt.length;ot+=1){for(var kt=[],At=[],$t=0,sr=Pt[ot];$t<sr.length;$t+=1){var Wt=sr[$t],zr=Wt.x,Zr=Wt.y,Br=D[0]*zr+D[4]*Zr+D[12],Nr=D[1]*zr+D[5]*Zr+D[13],Rr=D[2]*zr+D[6]*Zr+D[14],Ur=D[3]*zr+D[7]*Zr+D[15],Vr=Rr+me,Ir=Ur+xe,In=Br+Re,mn=Nr+De,oi=Rr+Be,Ii=Ur+rt,Ni=new S((Br+ie)/Ir,(Nr+le)/Ir);Ni.z=Vr/Ir,kt.push(Ni);var Jn=new S(In/Ii,mn/Ii);Jn.z=oi/Ii,At.push(Jn)}j.push(kt),J.push(At)}return[j,J]}(V,Ve,Me,_e);return function(p,x,T){var D=1/0;ns(T,x)&&(D=$g(T,x[0]));for(var j=0;j<x.length;j++)for(var J=x[j],ie=p[j],le=0;le<J.length-1;le++){var me=J[le],xe=[me,J[le+1],ie[le+1],ie[le],me];vs(T,xe)&&(D=Math.min(D,$g(T,xe)))}return D!==1/0&&D}(u[0],u[1],f)},h}(O);function eh(o,h){return o.x*h.x+o.y*h.y}function $g(o,h){if(o.length===1){for(var m,E=0,I=h[E++];!m||I.equals(m);)if(!(m=h[E++]))return 1/0;for(;E<h.length;E++){var V=h[E],Z=o[0],ne=m.sub(I),ce=V.sub(I),_e=Z.sub(I),Se=eh(ne,ne),Me=eh(ne,ce),Ve=eh(ce,ce),f=eh(_e,ne),u=eh(_e,ce),p=Se*Ve-Me*Me,x=(Ve*f-Me*u)/p,T=(Se*u-Me*f)/p,D=I.z*(1-x-T)+m.z*x+V.z*T;if(isFinite(D))return D}return 1/0}for(var j=1/0,J=0,ie=h;J<ie.length;J+=1)j=Math.min(j,ie[J].z);return j}var Ng=R([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Em=R([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,vv=Rc.VectorTileFeature.types,Bg=Math.cos(Math.PI/180*37.5),_v=Math.pow(2,14)/.5,bs=function(o){var h=this;this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(m){return m.id}),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(m){h.gradients[m.id]={}}),this.layoutVertexArray=new be,this.layoutVertexArray2=new Te,this.indexArray=new bt,this.programConfigurations=new ca(o.layers,o.zoom),this.segments=new Ze,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(m){return m.isStateDependent()}).map(function(m){return m.id})};bs.prototype.populate=function(o,h,m){this.hasPattern=Jf("line",this.layers,h);for(var E=this.layers[0].layout.get("line-sort-key"),I=!E.isConstant(),V=[],Z=0,ne=o;Z<ne.length;Z+=1){var ce=ne[Z],_e=ce.feature,Se=ce.id,Me=ce.index,Ve=ce.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,u=ys(_e,f);if(this.layers[0]._featureFilter.filter(new vi(this.zoom),u,m)){var p=I?E.evaluate(u,{},m):void 0,x={id:Se,properties:_e.properties,type:_e.type,sourceLayerIndex:Ve,index:Me,geometry:f?u.geometry:_a(_e),patterns:{},sortKey:p};V.push(x)}}I&&V.sort(function(xe,Re){return xe.sortKey-Re.sortKey});for(var T=0,D=V;T<D.length;T+=1){var j=D[T],J=j.geometry,ie=j.index,le=j.sourceLayerIndex;if(this.hasPattern){var me=yd("line",this.layers,j,this.zoom,h);this.patternFeatures.push(me)}else this.addFeature(j,J,ie,m,{});h.featureIndex.insert(o[ie].feature,J,ie,le,this.index)}},bs.prototype.update=function(o,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,h,this.stateDependentLayers,m)},bs.prototype.addFeatures=function(o,h,m){for(var E=0,I=this.patternFeatures;E<I.length;E+=1){var V=I[E];this.addFeature(V,V.geometry,V.index,h,m)}},bs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},bs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bs.prototype.upload=function(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,Em)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Ng),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},bs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},bs.prototype.lineFeatureClips=function(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}},bs.prototype.addFeature=function(o,h,m,E,I){var V=this.layers[0].layout,Z=V.get("line-join").evaluate(o,{}),ne=V.get("line-cap"),ce=V.get("line-miter-limit"),_e=V.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(var Se=0,Me=h;Se<Me.length;Se+=1)this.addLine(Me[Se],o,Z,ne,ce,_e);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,m,I,E)},bs.prototype.addLine=function(o,h,m,E,I,V){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var Z=0;Z<o.length-1;Z++)this.totalDistance+=o[Z].dist(o[Z+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var ne=vv[h.type]==="Polygon",ce=o.length;ce>=2&&o[ce-1].equals(o[ce-2]);)ce--;for(var _e=0;_e<ce-1&&o[_e].equals(o[_e+1]);)_e++;if(!(ce<(ne?3:2))){m==="bevel"&&(I=1.05);var Se,Me=this.overscaling<=16?122880/(512*this.overscaling):0,Ve=this.segments.prepareSegment(10*ce,this.layoutVertexArray,this.indexArray),f=void 0,u=void 0,p=void 0,x=void 0;this.e1=this.e2=-1,ne&&(x=o[_e].sub(Se=o[ce-2])._unit()._perp());for(var T=_e;T<ce;T++)if(!(u=T===ce-1?ne?o[_e+1]:void 0:o[T+1])||!o[T].equals(u)){x&&(p=x),Se&&(f=Se),Se=o[T],x=u?u.sub(Se)._unit()._perp():p;var D=(p=p||x).add(x);D.x===0&&D.y===0||D._unit();var j=p.x*x.x+p.y*x.y,J=D.x*x.x+D.y*x.y,ie=J!==0?1/J:1/0,le=2*Math.sqrt(2-2*J),me=J<Bg&&f&&u,xe=p.x*x.y-p.y*x.x>0;if(me&&T>_e){var Re=Se.dist(f);if(Re>2*Me){var De=Se.sub(Se.sub(f)._mult(Me/Re)._round());this.updateDistance(f,De),this.addCurrentVertex(De,p,0,0,Ve),f=De}}var Be=f&&u,rt=Be?m:ne?"butt":E;if(Be&&rt==="round"&&(ie<V?rt="miter":ie<=2&&(rt="fakeround")),rt==="miter"&&ie>I&&(rt="bevel"),rt==="bevel"&&(ie>2&&(rt="flipbevel"),ie<I&&(rt="miter")),f&&this.updateDistance(f,Se),rt==="miter")D._mult(ie),this.addCurrentVertex(Se,D,0,0,Ve);else if(rt==="flipbevel"){if(ie>100)D=x.mult(-1);else{var ot=ie*p.add(x).mag()/p.sub(x).mag();D._perp()._mult(ot*(xe?-1:1))}this.addCurrentVertex(Se,D,0,0,Ve),this.addCurrentVertex(Se,D.mult(-1),0,0,Ve)}else if(rt==="bevel"||rt==="fakeround"){var Pt=-Math.sqrt(ie*ie-1),kt=xe?Pt:0,At=xe?0:Pt;if(f&&this.addCurrentVertex(Se,p,kt,At,Ve),rt==="fakeround")for(var $t=Math.round(180*le/Math.PI/20),sr=1;sr<$t;sr++){var Wt=sr/$t;if(Wt!==.5){var zr=Wt-.5;Wt+=Wt*zr*(Wt-1)*((1.0904+j*(j*(3.55645-1.43519*j)-3.2452))*zr*zr+(.848013+j*(.215638*j-1.06021)))}var Zr=x.sub(p)._mult(Wt)._add(p)._unit()._mult(xe?-1:1);this.addHalfVertex(Se,Zr.x,Zr.y,!1,xe,0,Ve)}u&&this.addCurrentVertex(Se,x,-kt,-At,Ve)}else if(rt==="butt")this.addCurrentVertex(Se,D,0,0,Ve);else if(rt==="square"){var Br=f?1:-1;this.addCurrentVertex(Se,D,Br,Br,Ve)}else rt==="round"&&(f&&(this.addCurrentVertex(Se,p,0,0,Ve),this.addCurrentVertex(Se,p,1,1,Ve,!0)),u&&(this.addCurrentVertex(Se,x,-1,-1,Ve,!0),this.addCurrentVertex(Se,x,0,0,Ve)));if(me&&T<ce-1){var Nr=Se.dist(u);if(Nr>2*Me){var Rr=Se.add(u.sub(Se)._mult(Me/Nr)._round());this.updateDistance(Se,Rr),this.addCurrentVertex(Rr,x,0,0,Ve),Se=Rr}}}}},bs.prototype.addCurrentVertex=function(o,h,m,E,I,V){V===void 0&&(V=!1);var Z=h.y*E-h.x,ne=-h.y-h.x*E;this.addHalfVertex(o,h.x+h.y*m,h.y-h.x*m,V,!1,m,I),this.addHalfVertex(o,Z,ne,V,!0,-E,I),this.distance>_v/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(o,h,m,E,I,V))},bs.prototype.addHalfVertex=function(o,h,m,E,I,V,Z){var ne=.5*(this.lineClips?this.scaledDistance*(_v-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o.x<<1)+(E?1:0),(o.y<<1)+(I?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(V===0?0:V<0?-1:1)|(63&ne)<<2,ne>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var ce=Z.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ce),Z.primitiveLength++),I?this.e2=ce:this.e1=ce},bs.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},bs.prototype.updateDistance=function(o,h){this.distance+=o.dist(h),this.updateScaledDistance()},fn("LineBucket",bs,{omit:["layers","patternFeatures"]});var vu=new zo({"line-cap":new un(Je.layout_line["line-cap"]),"line-join":new Nn(Je.layout_line["line-join"]),"line-miter-limit":new un(Je.layout_line["line-miter-limit"]),"line-round-limit":new un(Je.layout_line["line-round-limit"]),"line-sort-key":new Nn(Je.layout_line["line-sort-key"])}),_d={paint:new zo({"line-opacity":new Nn(Je.paint_line["line-opacity"]),"line-color":new Nn(Je.paint_line["line-color"]),"line-translate":new un(Je.paint_line["line-translate"]),"line-translate-anchor":new un(Je.paint_line["line-translate-anchor"]),"line-width":new Nn(Je.paint_line["line-width"]),"line-gap-width":new Nn(Je.paint_line["line-gap-width"]),"line-offset":new Nn(Je.paint_line["line-offset"]),"line-blur":new Nn(Je.paint_line["line-blur"]),"line-dasharray":new ua(Je.paint_line["line-dasharray"]),"line-pattern":new na(Je.paint_line["line-pattern"]),"line-gradient":new Dl(Je.paint_line["line-gradient"])}),layout:vu},Fg=new(function(o){function h(){o.apply(this,arguments)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.possiblyEvaluate=function(m,E){return E=new vi(Math.floor(E.zoom),{now:E.now,fadeDuration:E.fadeDuration,zoomHistory:E.zoomHistory,transition:E.transition}),o.prototype.possiblyEvaluate.call(this,m,E)},h.prototype.evaluate=function(m,E,I,V){return E=H({},E,{zoom:Math.floor(E.zoom)}),o.prototype.evaluate.call(this,m,E,I,V)},h}(Nn))(_d.paint.properties["line-width"].specification);Fg.useIntegerZoom=!0;var J0=function(o){function h(m){o.call(this,m,_d),this.gradientVersion=0}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype._handleSpecialPaintPropertyUpdate=function(m){m==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof js,this.gradientVersion=(this.gradientVersion+1)%L)},h.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},h.prototype.recalculate=function(m,E){o.prototype.recalculate.call(this,m,E),this.paint._values["line-floorwidth"]=Fg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,m)},h.prototype.createBucket=function(m){return new bs(m)},h.prototype.queryRadius=function(m){var E=m,I=Ug(Vo("line-width",this,E),Vo("line-gap-width",this,E)),V=Vo("line-offset",this,E);return I/2+Math.abs(V)+zl(this.paint.get("line-translate"))},h.prototype.queryIntersectsFeature=function(m,E,I,V,Z,ne,ce){var _e=Ll(m,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),ne.angle,ce),Se=ce/2*Ug(this.paint.get("line-width").evaluate(E,I),this.paint.get("line-gap-width").evaluate(E,I)),Me=this.paint.get("line-offset").evaluate(E,I);return Me&&(V=function(Ve,f){for(var u=[],p=new S(0,0),x=0;x<Ve.length;x++){for(var T=Ve[x],D=[],j=0;j<T.length;j++){var J=T[j],ie=T[j+1],le=j===0?p:J.sub(T[j-1])._unit()._perp(),me=j===T.length-1?p:ie.sub(J)._unit()._perp(),xe=le._add(me)._unit();xe._mult(1/(xe.x*me.x+xe.y*me.y)),D.push(xe._mult(f)._add(J))}u.push(D)}return u}(V,Me*ce)),function(Ve,f,u){for(var p=0;p<f.length;p++){var x=f[p];if(Ve.length>=3){for(var T=0;T<x.length;T++)if(dl(Ve,x[T]))return!0}if(gu(Ve,x,u))return!0}return!1}(_e,V,Se)},h.prototype.isTileClipped=function(){return!0},h}(O);function Ug(o,h){return h>0?h+2*o:o}var bd=R([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),bv=R([{name:"a_projected_pos",components:3,type:"Float32"}],4),lf=(R([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),R([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Cm=(R([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),R([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),jg=R([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Vg(o,h,m){return o.sections.forEach(function(E){E.text=function(I,V,Z){var ne=V.layout.get("text-transform").evaluate(Z,{});return ne==="uppercase"?I=I.toLocaleUpperCase():ne==="lowercase"&&(I=I.toLocaleLowerCase()),yi.applyArabicShaping&&(I=yi.applyArabicShaping(I)),I}(E.text,h,m)}),o}R([{name:"triangle",components:3,type:"Uint16"}]),R([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),R([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),R([{type:"Float32",name:"offsetX"}]),R([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var th={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},qh=function(o,h,m,E,I){var V,Z,ne=8*I-E-1,ce=(1<<ne)-1,_e=ce>>1,Se=-7,Me=m?I-1:0,Ve=m?-1:1,f=o[h+Me];for(Me+=Ve,V=f&(1<<-Se)-1,f>>=-Se,Se+=ne;Se>0;V=256*V+o[h+Me],Me+=Ve,Se-=8);for(Z=V&(1<<-Se)-1,V>>=-Se,Se+=E;Se>0;Z=256*Z+o[h+Me],Me+=Ve,Se-=8);if(V===0)V=1-_e;else{if(V===ce)return Z?NaN:1/0*(f?-1:1);Z+=Math.pow(2,E),V-=_e}return(f?-1:1)*Z*Math.pow(2,V-E)},Ai=function(o,h,m,E,I,V){var Z,ne,ce,_e=8*V-I-1,Se=(1<<_e)-1,Me=Se>>1,Ve=I===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=E?0:V-1,u=E?1:-1,p=h<0||h===0&&1/h<0?1:0;for(h=Math.abs(h),isNaN(h)||h===1/0?(ne=isNaN(h)?1:0,Z=Se):(Z=Math.floor(Math.log(h)/Math.LN2),h*(ce=Math.pow(2,-Z))<1&&(Z--,ce*=2),(h+=Z+Me>=1?Ve/ce:Ve*Math.pow(2,1-Me))*ce>=2&&(Z++,ce/=2),Z+Me>=Se?(ne=0,Z=Se):Z+Me>=1?(ne=(h*ce-1)*Math.pow(2,I),Z+=Me):(ne=h*Math.pow(2,Me-1)*Math.pow(2,I),Z=0));I>=8;o[m+f]=255&ne,f+=u,ne/=256,I-=8);for(Z=Z<<I|ne,_e+=I;_e>0;o[m+f]=255&Z,f+=u,Z/=256,_e-=8);o[m+f-u]|=128*p},uf=Ba;function Ba(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Ba.Varint=0,Ba.Fixed64=1,Ba.Bytes=2,Ba.Fixed32=5;var cf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Dc(o){return o.type===Ba.Bytes?o.readVarint()+o.pos:o.pos+1}function ff(o,h,m){return m?4294967296*h+(o>>>0):4294967296*(h>>>0)+(o>>>0)}function qg(o,h,m){var E=h<=16383?1:h<=2097151?2:h<=268435455?3:Math.floor(Math.log(h)/(7*Math.LN2));m.realloc(E);for(var I=m.pos-1;I>=o;I--)m.buf[I+E]=m.buf[I]}function ml(o,h){for(var m=0;m<o.length;m++)h.writeVarint(o[m])}function Q0(o,h){for(var m=0;m<o.length;m++)h.writeSVarint(o[m])}function xv(o,h){for(var m=0;m<o.length;m++)h.writeFloat(o[m])}function wv(o,h){for(var m=0;m<o.length;m++)h.writeDouble(o[m])}function eb(o,h){for(var m=0;m<o.length;m++)h.writeBoolean(o[m])}function Op(o,h){for(var m=0;m<o.length;m++)h.writeFixed32(o[m])}function Rs(o,h){for(var m=0;m<o.length;m++)h.writeSFixed32(o[m])}function Gg(o,h){for(var m=0;m<o.length;m++)h.writeFixed64(o[m])}function Sv(o,h){for(var m=0;m<o.length;m++)h.writeSFixed64(o[m])}function _u(o,h){return(o[h]|o[h+1]<<8|o[h+2]<<16)+16777216*o[h+3]}function Ri(o,h,m){o[m]=h,o[m+1]=h>>>8,o[m+2]=h>>>16,o[m+3]=h>>>24}function fc(o,h){return(o[h]|o[h+1]<<8|o[h+2]<<16)+(o[h+3]<<24)}function Hg(o,h,m){o===1&&m.readMessage(Pm,h)}function Pm(o,h,m){if(o===3){var E=m.readMessage(Ev,{}),I=E.width,V=E.height,Z=E.left,ne=E.top,ce=E.advance;h.push({id:E.id,bitmap:new Nh({width:I+6,height:V+6},E.bitmap),metrics:{width:I,height:V,left:Z,top:ne,advance:ce}})}}function Ev(o,h,m){o===1?h.id=m.readVarint():o===2?h.bitmap=m.readBytes():o===3?h.width=m.readVarint():o===4?h.height=m.readVarint():o===5?h.left=m.readSVarint():o===6?h.top=m.readSVarint():o===7&&(h.advance=m.readVarint())}function zc(o){for(var h=0,m=0,E=0,I=o;E<I.length;E+=1){var V=I[E];h+=V.w*V.h,m=Math.max(m,V.w)}o.sort(function(p,x){return x.h-p.h});for(var Z=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(h/.95)),m),h:1/0}],ne=0,ce=0,_e=0,Se=o;_e<Se.length;_e+=1)for(var Me=Se[_e],Ve=Z.length-1;Ve>=0;Ve--){var f=Z[Ve];if(!(Me.w>f.w||Me.h>f.h)){if(Me.x=f.x,Me.y=f.y,ce=Math.max(ce,Me.y+Me.h),ne=Math.max(ne,Me.x+Me.w),Me.w===f.w&&Me.h===f.h){var u=Z.pop();Ve<Z.length&&(Z[Ve]=u)}else Me.h===f.h?(f.x+=Me.w,f.w-=Me.w):Me.w===f.w?(f.y+=Me.h,f.h-=Me.h):(Z.push({x:f.x+Me.w,y:f.y,w:f.w-Me.w,h:Me.h}),f.y+=Me.h,f.h-=Me.h);break}}return{w:ne,h:ce,fill:h/(ne*ce)||0}}Ba.prototype={destroy:function(){this.buf=null},readFields:function(o,h,m){for(m=m||this.length;this.pos<m;){var E=this.readVarint(),I=E>>3,V=this.pos;this.type=7&E,o(I,h,this),this.pos===V&&this.skip(E)}return h},readMessage:function(o,h){return this.readFields(o,h,this.readVarint()+this.pos)},readFixed32:function(){var o=_u(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=fc(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=_u(this.buf,this.pos)+4294967296*_u(this.buf,this.pos+4);return this.pos+=8,o},readSFixed64:function(){var o=_u(this.buf,this.pos)+4294967296*fc(this.buf,this.pos+4);return this.pos+=8,o},readFloat:function(){var o=qh(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=qh(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var h,m,E=this.buf;return h=127&(m=E[this.pos++]),m<128?h:(h|=(127&(m=E[this.pos++]))<<7,m<128?h:(h|=(127&(m=E[this.pos++]))<<14,m<128?h:(h|=(127&(m=E[this.pos++]))<<21,m<128?h:function(I,V,Z){var ne,ce,_e=Z.buf;if(ne=(112&(ce=_e[Z.pos++]))>>4,ce<128||(ne|=(127&(ce=_e[Z.pos++]))<<3,ce<128)||(ne|=(127&(ce=_e[Z.pos++]))<<10,ce<128)||(ne|=(127&(ce=_e[Z.pos++]))<<17,ce<128)||(ne|=(127&(ce=_e[Z.pos++]))<<24,ce<128)||(ne|=(1&(ce=_e[Z.pos++]))<<31,ce<128))return ff(I,ne,V);throw new Error("Expected varint not more than 10 bytes")}(h|=(15&(m=E[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,h=this.pos;return this.pos=o,o-h>=12&&cf?function(m,E,I){return cf.decode(m.subarray(E,I))}(this.buf,h,o):function(m,E,I){for(var V="",Z=E;Z<I;){var ne,ce,_e,Se=m[Z],Me=null,Ve=Se>239?4:Se>223?3:Se>191?2:1;if(Z+Ve>I)break;Ve===1?Se<128&&(Me=Se):Ve===2?(192&(ne=m[Z+1]))==128&&(Me=(31&Se)<<6|63&ne)<=127&&(Me=null):Ve===3?(ce=m[Z+2],(192&(ne=m[Z+1]))==128&&(192&ce)==128&&((Me=(15&Se)<<12|(63&ne)<<6|63&ce)<=2047||Me>=55296&&Me<=57343)&&(Me=null)):Ve===4&&(ce=m[Z+2],_e=m[Z+3],(192&(ne=m[Z+1]))==128&&(192&ce)==128&&(192&_e)==128&&((Me=(15&Se)<<18|(63&ne)<<12|(63&ce)<<6|63&_e)<=65535||Me>=1114112)&&(Me=null)),Me===null?(Me=65533,Ve=1):Me>65535&&(Me-=65536,V+=String.fromCharCode(Me>>>10&1023|55296),Me=56320|1023&Me),V+=String.fromCharCode(Me),Z+=Ve}return V}(this.buf,h,o)},readBytes:function(){var o=this.readVarint()+this.pos,h=this.buf.subarray(this.pos,o);return this.pos=o,h},readPackedVarint:function(o,h){if(this.type!==Ba.Bytes)return o.push(this.readVarint(h));var m=Dc(this);for(o=o||[];this.pos<m;)o.push(this.readVarint(h));return o},readPackedSVarint:function(o){if(this.type!==Ba.Bytes)return o.push(this.readSVarint());var h=Dc(this);for(o=o||[];this.pos<h;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Ba.Bytes)return o.push(this.readBoolean());var h=Dc(this);for(o=o||[];this.pos<h;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Ba.Bytes)return o.push(this.readFloat());var h=Dc(this);for(o=o||[];this.pos<h;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Ba.Bytes)return o.push(this.readDouble());var h=Dc(this);for(o=o||[];this.pos<h;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Ba.Bytes)return o.push(this.readFixed32());var h=Dc(this);for(o=o||[];this.pos<h;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Ba.Bytes)return o.push(this.readSFixed32());var h=Dc(this);for(o=o||[];this.pos<h;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Ba.Bytes)return o.push(this.readFixed64());var h=Dc(this);for(o=o||[];this.pos<h;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Ba.Bytes)return o.push(this.readSFixed64());var h=Dc(this);for(o=o||[];this.pos<h;)o.push(this.readSFixed64());return o},skip:function(o){var h=7&o;if(h===Ba.Varint)for(;this.buf[this.pos++]>127;);else if(h===Ba.Bytes)this.pos=this.readVarint()+this.pos;else if(h===Ba.Fixed32)this.pos+=4;else{if(h!==Ba.Fixed64)throw new Error("Unimplemented type: "+h);this.pos+=8}},writeTag:function(o,h){this.writeVarint(o<<3|h)},realloc:function(o){for(var h=this.length||16;h<this.pos+o;)h*=2;if(h!==this.length){var m=new Uint8Array(h);m.set(this.buf),this.buf=m,this.length=h}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Ri(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Ri(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Ri(this.buf,-1&o,this.pos),Ri(this.buf,Math.floor(o*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Ri(this.buf,-1&o,this.pos),Ri(this.buf,Math.floor(o*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(h,m){var E,I;if(h>=0?(E=h%4294967296|0,I=h/4294967296|0):(I=~(-h/4294967296),4294967295^(E=~(-h%4294967296))?E=E+1|0:(E=0,I=I+1|0)),h>=18446744073709552e3||h<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");m.realloc(10),function(V,Z,ne){ne.buf[ne.pos++]=127&V|128,V>>>=7,ne.buf[ne.pos++]=127&V|128,V>>>=7,ne.buf[ne.pos++]=127&V|128,V>>>=7,ne.buf[ne.pos++]=127&V|128,ne.buf[ne.pos]=127&(V>>>=7)}(E,0,m),function(V,Z){var ne=(7&V)<<4;Z.buf[Z.pos++]|=ne|((V>>>=3)?128:0),V&&(Z.buf[Z.pos++]=127&V|((V>>>=7)?128:0),V&&(Z.buf[Z.pos++]=127&V|((V>>>=7)?128:0),V&&(Z.buf[Z.pos++]=127&V|((V>>>=7)?128:0),V&&(Z.buf[Z.pos++]=127&V|((V>>>=7)?128:0),V&&(Z.buf[Z.pos++]=127&V)))))}(I,m)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var h=this.pos;this.pos=function(E,I,V){for(var Z,ne,ce=0;ce<I.length;ce++){if((Z=I.charCodeAt(ce))>55295&&Z<57344){if(!ne){Z>56319||ce+1===I.length?(E[V++]=239,E[V++]=191,E[V++]=189):ne=Z;continue}if(Z<56320){E[V++]=239,E[V++]=191,E[V++]=189,ne=Z;continue}Z=ne-55296<<10|Z-56320|65536,ne=null}else ne&&(E[V++]=239,E[V++]=191,E[V++]=189,ne=null);Z<128?E[V++]=Z:(Z<2048?E[V++]=Z>>6|192:(Z<65536?E[V++]=Z>>12|224:(E[V++]=Z>>18|240,E[V++]=Z>>12&63|128),E[V++]=Z>>6&63|128),E[V++]=63&Z|128)}return V}(this.buf,o,this.pos);var m=this.pos-h;m>=128&&qg(h,m,this),this.pos=h-1,this.writeVarint(m),this.pos+=m},writeFloat:function(o){this.realloc(4),Ai(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Ai(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var h=o.length;this.writeVarint(h),this.realloc(h);for(var m=0;m<h;m++)this.buf[this.pos++]=o[m]},writeRawMessage:function(o,h){this.pos++;var m=this.pos;o(h,this);var E=this.pos-m;E>=128&&qg(m,E,this),this.pos=m-1,this.writeVarint(E),this.pos+=E},writeMessage:function(o,h,m){this.writeTag(o,Ba.Bytes),this.writeRawMessage(h,m)},writePackedVarint:function(o,h){h.length&&this.writeMessage(o,ml,h)},writePackedSVarint:function(o,h){h.length&&this.writeMessage(o,Q0,h)},writePackedBoolean:function(o,h){h.length&&this.writeMessage(o,eb,h)},writePackedFloat:function(o,h){h.length&&this.writeMessage(o,xv,h)},writePackedDouble:function(o,h){h.length&&this.writeMessage(o,wv,h)},writePackedFixed32:function(o,h){h.length&&this.writeMessage(o,Op,h)},writePackedSFixed32:function(o,h){h.length&&this.writeMessage(o,Rs,h)},writePackedFixed64:function(o,h){h.length&&this.writeMessage(o,Gg,h)},writePackedSFixed64:function(o,h){h.length&&this.writeMessage(o,Sv,h)},writeBytesField:function(o,h){this.writeTag(o,Ba.Bytes),this.writeBytes(h)},writeFixed32Field:function(o,h){this.writeTag(o,Ba.Fixed32),this.writeFixed32(h)},writeSFixed32Field:function(o,h){this.writeTag(o,Ba.Fixed32),this.writeSFixed32(h)},writeFixed64Field:function(o,h){this.writeTag(o,Ba.Fixed64),this.writeFixed64(h)},writeSFixed64Field:function(o,h){this.writeTag(o,Ba.Fixed64),this.writeSFixed64(h)},writeVarintField:function(o,h){this.writeTag(o,Ba.Varint),this.writeVarint(h)},writeSVarintField:function(o,h){this.writeTag(o,Ba.Varint),this.writeSVarint(h)},writeStringField:function(o,h){this.writeTag(o,Ba.Bytes),this.writeString(h)},writeFloatField:function(o,h){this.writeTag(o,Ba.Fixed32),this.writeFloat(h)},writeDoubleField:function(o,h){this.writeTag(o,Ba.Fixed64),this.writeDouble(h)},writeBooleanField:function(o,h){this.writeVarintField(o,!!h)}};var bu=function(o,h){var m=h.pixelRatio,E=h.version,I=h.stretchX,V=h.stretchY,Z=h.content;this.paddedRect=o,this.pixelRatio=m,this.stretchX=I,this.stretchY=V,this.content=Z,this.version=E},Gh={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Gh.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Gh.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Gh.tlbr.get=function(){return this.tl.concat(this.br)},Gh.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(bu.prototype,Gh);var Rp=function(o,h){var m={},E={};this.haveRenderCallbacks=[];var I=[];this.addImages(o,m,I),this.addImages(h,E,I);var V=zc(I),Z=new Hs({width:V.w||1,height:V.h||1});for(var ne in o){var ce=o[ne],_e=m[ne].paddedRect;Hs.copy(ce.data,Z,{x:0,y:0},{x:_e.x+1,y:_e.y+1},ce.data)}for(var Se in h){var Me=h[Se],Ve=E[Se].paddedRect,f=Ve.x+1,u=Ve.y+1,p=Me.data.width,x=Me.data.height;Hs.copy(Me.data,Z,{x:0,y:0},{x:f,y:u},Me.data),Hs.copy(Me.data,Z,{x:0,y:x-1},{x:f,y:u-1},{width:p,height:1}),Hs.copy(Me.data,Z,{x:0,y:0},{x:f,y:u+x},{width:p,height:1}),Hs.copy(Me.data,Z,{x:p-1,y:0},{x:f-1,y:u},{width:1,height:x}),Hs.copy(Me.data,Z,{x:0,y:0},{x:f+p,y:u},{width:1,height:x})}this.image=Z,this.iconPositions=m,this.patternPositions=E};Rp.prototype.addImages=function(o,h,m){for(var E in o){var I=o[E],V={x:0,y:0,w:I.data.width+2,h:I.data.height+2};m.push(V),h[E]=new bu(V,I),I.hasRenderCallback&&this.haveRenderCallbacks.push(E)}},Rp.prototype.patchUpdatedImages=function(o,h){for(var m in o.dispatchRenderCallbacks(this.haveRenderCallbacks),o.updatedImages)this.patchUpdatedImage(this.iconPositions[m],o.getImage(m),h),this.patchUpdatedImage(this.patternPositions[m],o.getImage(m),h)},Rp.prototype.patchUpdatedImage=function(o,h,m){if(o&&h&&o.version!==h.version){o.version=h.version;var E=o.tl;m.update(h.data,void 0,{x:E[0],y:E[1]})}},fn("ImagePosition",bu),fn("ImageAtlas",Rp);var ru={horizontal:1,vertical:2,horizontalOnly:3},Dp=function(){this.scale=1,this.fontStack="",this.imageName=null};Dp.forText=function(o,h){var m=new Dp;return m.scale=o||1,m.fontStack=h,m},Dp.forImage=function(o){var h=new Dp;return h.imageName=o,h};var Ws=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Tm(o,h,m,E,I,V,Z,ne,ce,_e,Se,Me,Ve,f,u,p){var x,T=Ws.fromFeature(o,I);Me===ru.vertical&&T.verticalizePunctuation();var D=yi.processBidirectionalText,j=yi.processStyledBidirectionalText;if(D&&T.sections.length===1){x=[];for(var J=0,ie=D(T.toString(),zp(T,_e,V,h,E,f,u));J<ie.length;J+=1){var le=ie[J],me=new Ws;me.text=le,me.sections=T.sections;for(var xe=0;xe<le.length;xe++)me.sectionIndex.push(0);x.push(me)}}else if(j){x=[];for(var Re=0,De=j(T.text,T.sectionIndex,zp(T,_e,V,h,E,f,u));Re<De.length;Re+=1){var Be=De[Re],rt=new Ws;rt.text=Be[0],rt.sectionIndex=Be[1],rt.sections=T.sections,x.push(rt)}}else x=function(kt,At){for(var $t=[],sr=kt.text,Wt=0,zr=0,Zr=At;zr<Zr.length;zr+=1){var Br=Zr[zr];$t.push(kt.substring(Wt,Br)),Wt=Br}return Wt<sr.length&&$t.push(kt.substring(Wt,sr.length)),$t}(T,zp(T,_e,V,h,E,f,u));var ot=[],Pt={positionedLines:ot,text:T.toString(),top:Se[1],bottom:Se[1],left:Se[0],right:Se[0],writingMode:Me,iconsInText:!1,verticalizable:!1};return function(kt,At,$t,sr,Wt,zr,Zr,Br,Nr,Rr,Ur,Vr){for(var Ir=0,In=-17,mn=0,oi=0,Ii=Br==="right"?1:Br==="left"?0:.5,Ni=0,Jn=0,Xi=Wt;Jn<Xi.length;Jn+=1){var Mi=Xi[Jn];Mi.trim();var si=Mi.getMaxScale(),wa=24*(si-1),Sa={positionedGlyphs:[],lineOffset:0};kt.positionedLines[Ni]=Sa;var Si=Sa.positionedGlyphs,da=0;if(Mi.length()){for(var ha=0;ha<Mi.length();ha++){var li=Mi.getSection(ha),Kn=Mi.getSectionIndex(ha),no=Mi.getCharCode(ha),ba=0,di=null,Ta=null,ma=null,Bi=24,xs=!(Nr===ru.horizontal||!Ur&&!hu(no)||Ur&&(xd[no]||(Ki=no,en.Arabic(Ki)||en["Arabic Supplement"](Ki)||en["Arabic Extended-A"](Ki)||en["Arabic Presentation Forms-A"](Ki)||en["Arabic Presentation Forms-B"](Ki))));if(li.imageName){var Ho=sr[li.imageName];if(!Ho)continue;ma=li.imageName,kt.iconsInText=kt.iconsInText||!0,Ta=Ho.paddedRect;var Po=Ho.displaySize;li.scale=24*li.scale/Vr,ba=wa+(24-Po[1]*li.scale),Bi=(di={width:Po[0],height:Po[1],left:1,top:-3,advance:xs?Po[1]:Po[0]}).advance;var tl=xs?Po[0]*li.scale-24*si:Po[1]*li.scale-24*si;tl>0&&tl>da&&(da=tl)}else{var vl=$t[li.fontStack],_l=vl&&vl[no];if(_l&&_l.rect)Ta=_l.rect,di=_l.metrics;else{var as=At[li.fontStack],bl=as&&as[no];if(!bl)continue;di=bl.metrics}ba=24*(si-li.scale)}xs?(kt.verticalizable=!0,Si.push({glyph:no,imageName:ma,x:Ir,y:In+ba,vertical:xs,scale:li.scale,fontStack:li.fontStack,sectionIndex:Kn,metrics:di,rect:Ta}),Ir+=Bi*li.scale+Rr):(Si.push({glyph:no,imageName:ma,x:Ir,y:In+ba,vertical:xs,scale:li.scale,fontStack:li.fontStack,sectionIndex:Kn,metrics:di,rect:Ta}),Ir+=di.advance*li.scale+Rr)}Si.length!==0&&(mn=Math.max(Ir-Rr,mn),Pv(Si,0,Si.length-1,Ii,da)),Ir=0;var Ds=zr*si+da;Sa.lineOffset=Math.max(da,wa),In+=Ds,oi=Math.max(Ds,oi),++Ni}else In+=zr,++Ni}var Ki,za=In- -17,pc=km(Zr),yf=pc.horizontalAlign,ch=pc.verticalAlign;(function(Up,Hu,jp,Jh,Qh,$c,ep,zd,Ld){var vf,xl=(Hu-jp)*Qh;vf=$c!==ep?-zd*Jh- -17:(-Jh*Ld+.5)*ep;for(var dc=0,$d=Up;dc<$d.length;dc+=1)for(var tp=0,Bl=$d[dc].positionedGlyphs;tp<Bl.length;tp+=1){var _f=Bl[tp];_f.x+=xl,_f.y+=vf}})(kt.positionedLines,Ii,yf,ch,mn,oi,zr,za,Wt.length),kt.top+=-ch*za,kt.bottom=kt.top+za,kt.left+=-yf*mn,kt.right=kt.left+mn}(Pt,h,m,E,x,Z,ne,ce,Me,_e,Ve,p),!function(kt){for(var At=0,$t=kt;At<$t.length;At+=1)if($t[At].positionedGlyphs.length!==0)return!1;return!0}(ot)&&Pt}Ws.fromFeature=function(o,h){for(var m=new Ws,E=0;E<o.sections.length;E++){var I=o.sections[E];I.image?m.addImageSection(I):m.addTextSection(I,h)}return m},Ws.prototype.length=function(){return this.text.length},Ws.prototype.getSection=function(o){return this.sections[this.sectionIndex[o]]},Ws.prototype.getSectionIndex=function(o){return this.sectionIndex[o]},Ws.prototype.getCharCode=function(o){return this.text.charCodeAt(o)},Ws.prototype.verticalizePunctuation=function(){this.text=function(o){for(var h="",m=0;m<o.length;m++){var E=o.charCodeAt(m+1)||null,I=o.charCodeAt(m-1)||null;h+=E&&fo(E)&&!th[o[m+1]]||I&&fo(I)&&!th[o[m-1]]||!th[o[m]]?o[m]:th[o[m]]}return h}(this.text)},Ws.prototype.trim=function(){for(var o=0,h=0;h<this.text.length&&xd[this.text.charCodeAt(h)];h++)o++;for(var m=this.text.length,E=this.text.length-1;E>=0&&E>=o&&xd[this.text.charCodeAt(E)];E--)m--;this.text=this.text.substring(o,m),this.sectionIndex=this.sectionIndex.slice(o,m)},Ws.prototype.substring=function(o,h){var m=new Ws;return m.text=this.text.substring(o,h),m.sectionIndex=this.sectionIndex.slice(o,h),m.sections=this.sections,m},Ws.prototype.toString=function(){return this.text},Ws.prototype.getMaxScale=function(){var o=this;return this.sectionIndex.reduce(function(h,m){return Math.max(h,o.sections[m].scale)},0)},Ws.prototype.addTextSection=function(o,h){this.text+=o.text,this.sections.push(Dp.forText(o.scale,o.fontStack||h));for(var m=this.sections.length-1,E=0;E<o.text.length;++E)this.sectionIndex.push(m)},Ws.prototype.addImageSection=function(o){var h=o.image?o.image.name:"";if(h.length!==0){var m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(Dp.forImage(h)),this.sectionIndex.push(this.sections.length-1)):Ie("Reached maximum number of images 6401")}else Ie("Can't add FormattedSection with an empty image.")},Ws.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var xd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},gl={};function Cv(o,h,m,E,I,V){if(h.imageName){var Z=E[h.imageName];return Z?Z.displaySize[0]*h.scale*24/V+I:0}var ne=m[h.fontStack],ce=ne&&ne[o];return ce?ce.metrics.advance*h.scale+I:0}function Am(o,h,m,E){var I=Math.pow(o-h,2);return E?o<h?I/2:2*I:I+Math.abs(m)*m}function wd(o,h,m){var E=0;return o===10&&(E-=1e4),m&&(E+=150),o!==40&&o!==65288||(E+=50),h!==41&&h!==65289||(E+=50),E}function hc(o,h,m,E,I,V){for(var Z=null,ne=Am(h,m,I,V),ce=0,_e=E;ce<_e.length;ce+=1){var Se=_e[ce],Me=Am(h-Se.x,m,I,V)+Se.badness;Me<=ne&&(Z=Se,ne=Me)}return{index:o,x:h,priorBreak:Z,badness:ne}}function zp(o,h,m,E,I,V,Z){if(V!=="point")return[];if(!o)return[];for(var ne,ce=[],_e=function(x,T,D,j,J,ie){for(var le=0,me=0;me<x.length();me++){var xe=x.getSection(me);le+=Cv(x.getCharCode(me),xe,j,J,T,ie)}return le/Math.max(1,Math.ceil(le/D))}(o,h,m,E,I,Z),Se=o.text.indexOf("​")>=0,Me=0,Ve=0;Ve<o.length();Ve++){var f=o.getSection(Ve),u=o.getCharCode(Ve);if(xd[u]||(Me+=Cv(u,f,E,I,h,Z)),Ve<o.length()-1){var p=!((ne=u)<11904||!(en["Bopomofo Extended"](ne)||en.Bopomofo(ne)||en["CJK Compatibility Forms"](ne)||en["CJK Compatibility Ideographs"](ne)||en["CJK Compatibility"](ne)||en["CJK Radicals Supplement"](ne)||en["CJK Strokes"](ne)||en["CJK Symbols and Punctuation"](ne)||en["CJK Unified Ideographs Extension A"](ne)||en["CJK Unified Ideographs"](ne)||en["Enclosed CJK Letters and Months"](ne)||en["Halfwidth and Fullwidth Forms"](ne)||en.Hiragana(ne)||en["Ideographic Description Characters"](ne)||en["Kangxi Radicals"](ne)||en["Katakana Phonetic Extensions"](ne)||en.Katakana(ne)||en["Vertical Forms"](ne)||en["Yi Radicals"](ne)||en["Yi Syllables"](ne)));(gl[u]||p||f.imageName)&&ce.push(hc(Ve+1,Me,_e,ce,wd(u,o.getCharCode(Ve+1),p&&Se),!1))}}return function x(T){return T?x(T.priorBreak).concat(T.index):[]}(hc(o.length(),Me,_e,ce,0,!0))}function km(o){var h=.5,m=.5;switch(o){case"right":case"top-right":case"bottom-right":h=1;break;case"left":case"top-left":case"bottom-left":h=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":m=1;break;case"top":case"top-right":case"top-left":m=0}return{horizontalAlign:h,verticalAlign:m}}function Pv(o,h,m,E,I){if(E||I)for(var V=o[m],Z=(o[m].x+V.metrics.advance*V.scale)*E,ne=h;ne<=m;ne++)o[ne].x-=Z,o[ne].y+=I}function Sd(o,h,m,E,I,V){var Z,ne=o.image;if(ne.content){var ce=ne.content,_e=ne.pixelRatio||1;Z=[ce[0]/_e,ce[1]/_e,ne.displaySize[0]-ce[2]/_e,ne.displaySize[1]-ce[3]/_e]}var Se,Me,Ve,f,u=h.left*V,p=h.right*V;m==="width"||m==="both"?(f=I[0]+u-E[3],Me=I[0]+p+E[1]):Me=(f=I[0]+(u+p-ne.displaySize[0])/2)+ne.displaySize[0];var x=h.top*V,T=h.bottom*V;return m==="height"||m==="both"?(Se=I[1]+x-E[0],Ve=I[1]+T+E[2]):Ve=(Se=I[1]+(x+T-ne.displaySize[1])/2)+ne.displaySize[1],{image:ne,top:Se,right:Me,bottom:Ve,left:f,collisionPadding:Z}}gl[10]=!0,gl[32]=!0,gl[38]=!0,gl[40]=!0,gl[41]=!0,gl[43]=!0,gl[45]=!0,gl[47]=!0,gl[173]=!0,gl[183]=!0,gl[8203]=!0,gl[8208]=!0,gl[8211]=!0,gl[8231]=!0;var rh=function(o){function h(m,E,I,V){o.call(this,m,E),this.angle=I,V!==void 0&&(this.segment=V)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.clone=function(){return new h(this.x,this.y,this.angle,this.segment)},h}(S);function nu(o,h){var m=h.expression;if(m.kind==="constant")return{kind:"constant",layoutSize:m.evaluate(new vi(o+1))};if(m.kind==="source")return{kind:"source"};for(var E=m.zoomStops,I=m.interpolationType,V=0;V<E.length&&E[V]<=o;)V++;for(var Z=V=Math.max(0,V-1);Z<E.length&&E[Z]<o+1;)Z++;Z=Math.min(E.length-1,Z);var ne=E[V],ce=E[Z];return m.kind==="composite"?{kind:"composite",minZoom:ne,maxZoom:ce,interpolationType:I}:{kind:"camera",minZoom:ne,maxZoom:ce,minSize:m.evaluate(new vi(ne)),maxSize:m.evaluate(new vi(ce)),interpolationType:I}}function hf(o,h,m){var E=h.uSize,I=m.lowerSize;return o.kind==="source"?I/128:o.kind==="composite"?aa(I/128,m.upperSize/128,h.uSizeT):E}function Ed(o,h){var m=0,E=0;if(o.kind==="constant")E=o.layoutSize;else if(o.kind!=="source"){var I=o.interpolationType,V=I?re(_r.interpolationFactor(I,h,o.minZoom,o.maxZoom),0,1):0;o.kind==="camera"?E=aa(o.minSize,o.maxSize,V):m=V}return{uSizeT:m,uSize:E}}fn("Anchor",rh);var Lp=Object.freeze({__proto__:null,getSizeData:nu,evaluateSizeForFeature:hf,evaluateSizeForZoom:Ed,SIZE_PACK_FACTOR:128});function Hh(o,h,m,E,I){if(h.segment===void 0)return!0;for(var V=h,Z=h.segment+1,ne=0;ne>-m/2;){if(--Z<0)return!1;ne-=o[Z].dist(V),V=o[Z]}ne+=o[Z].dist(o[Z+1]),Z++;for(var ce=[],_e=0;ne<m/2;){var Se=o[Z],Me=o[Z+1];if(!Me)return!1;var Ve=o[Z-1].angleTo(Se)-Se.angleTo(Me);for(Ve=Math.abs((Ve+3*Math.PI)%(2*Math.PI)-Math.PI),ce.push({distance:ne,angleDelta:Ve}),_e+=Ve;ne-ce[0].distance>E;)_e-=ce.shift().angleDelta;if(_e>I)return!1;Z++,ne+=Se.dist(Me)}return!0}function Cd(o){for(var h=0,m=0;m<o.length-1;m++)h+=o[m].dist(o[m+1]);return h}function Pd(o,h,m){return o?.6*h*m:0}function Tv(o,h){return Math.max(o?o.right-o.left:0,h?h.right-h.left:0)}function Av(o,h,m,E,I,V){for(var Z=Pd(m,I,V),ne=Tv(m,E)*V,ce=0,_e=Cd(o)/2,Se=0;Se<o.length-1;Se++){var Me=o[Se],Ve=o[Se+1],f=Me.dist(Ve);if(ce+f>_e){var u=(_e-ce)/f,p=aa(Me.x,Ve.x,u),x=aa(Me.y,Ve.y,u),T=new rh(p,x,Ve.angleTo(Me),Se);return T._round(),!Z||Hh(o,T,ne,Z,h)?T:void 0}ce+=f}}function kv(o,h,m,E,I,V,Z,ne,ce){var _e=Pd(E,V,Z),Se=Tv(E,I),Me=Se*Z,Ve=o[0].x===0||o[0].x===ce||o[0].y===0||o[0].y===ce;return h-Me<h/4&&(h=Me+h/4),function f(u,p,x,T,D,j,J,ie,le){for(var me=j/2,xe=Cd(u),Re=0,De=p-x,Be=[],rt=0;rt<u.length-1;rt++){for(var ot=u[rt],Pt=u[rt+1],kt=ot.dist(Pt),At=Pt.angleTo(ot);De+x<Re+kt;){var $t=((De+=x)-Re)/kt,sr=aa(ot.x,Pt.x,$t),Wt=aa(ot.y,Pt.y,$t);if(sr>=0&&sr<le&&Wt>=0&&Wt<le&&De-me>=0&&De+me<=xe){var zr=new rh(sr,Wt,At,rt);zr._round(),T&&!Hh(u,zr,j,T,D)||Be.push(zr)}}Re+=kt}return ie||Be.length||J||(Be=f(u,Re/2,x,T,D,j,J,!0,le)),Be}(o,Ve?h/2*ne%h:(Se/2+2*V)*Z*ne%h,h,_e,m,Me,Ve,!1,ce)}function Iv(o,h,m,E,I){for(var V=[],Z=0;Z<o.length;Z++)for(var ne=o[Z],ce=void 0,_e=0;_e<ne.length-1;_e++){var Se=ne[_e],Me=ne[_e+1];Se.x<h&&Me.x<h||(Se.x<h?Se=new S(h,Se.y+(h-Se.x)/(Me.x-Se.x)*(Me.y-Se.y))._round():Me.x<h&&(Me=new S(h,Se.y+(h-Se.x)/(Me.x-Se.x)*(Me.y-Se.y))._round()),Se.y<m&&Me.y<m||(Se.y<m?Se=new S(Se.x+(m-Se.y)/(Me.y-Se.y)*(Me.x-Se.x),m)._round():Me.y<m&&(Me=new S(Se.x+(m-Se.y)/(Me.y-Se.y)*(Me.x-Se.x),m)._round()),Se.x>=E&&Me.x>=E||(Se.x>=E?Se=new S(E,Se.y+(E-Se.x)/(Me.x-Se.x)*(Me.y-Se.y))._round():Me.x>=E&&(Me=new S(E,Se.y+(E-Se.x)/(Me.x-Se.x)*(Me.y-Se.y))._round()),Se.y>=I&&Me.y>=I||(Se.y>=I?Se=new S(Se.x+(I-Se.y)/(Me.y-Se.y)*(Me.x-Se.x),I)._round():Me.y>=I&&(Me=new S(Se.x+(I-Se.y)/(Me.y-Se.y)*(Me.x-Se.x),I)._round()),ce&&Se.equals(ce[ce.length-1])||V.push(ce=[Se]),ce.push(Me)))))}return V}function Wg(o,h,m,E){var I=[],V=o.image,Z=V.pixelRatio,ne=V.paddedRect.w-2,ce=V.paddedRect.h-2,_e=o.right-o.left,Se=o.bottom-o.top,Me=V.stretchX||[[0,ne]],Ve=V.stretchY||[[0,ce]],f=function(sr,Wt){return sr+Wt[1]-Wt[0]},u=Me.reduce(f,0),p=Ve.reduce(f,0),x=ne-u,T=ce-p,D=0,j=u,J=0,ie=p,le=0,me=x,xe=0,Re=T;if(V.content&&E){var De=V.content;D=Td(Me,0,De[0]),J=Td(Ve,0,De[1]),j=Td(Me,De[0],De[2]),ie=Td(Ve,De[1],De[3]),le=De[0]-D,xe=De[1]-J,me=De[2]-De[0]-j,Re=De[3]-De[1]-ie}var Be=function(sr,Wt,zr,Zr){var Br=$p(sr.stretch-D,j,_e,o.left),Nr=Ad(sr.fixed-le,me,sr.stretch,u),Rr=$p(Wt.stretch-J,ie,Se,o.top),Ur=Ad(Wt.fixed-xe,Re,Wt.stretch,p),Vr=$p(zr.stretch-D,j,_e,o.left),Ir=Ad(zr.fixed-le,me,zr.stretch,u),In=$p(Zr.stretch-J,ie,Se,o.top),mn=Ad(Zr.fixed-xe,Re,Zr.stretch,p),oi=new S(Br,Rr),Ii=new S(Vr,Rr),Ni=new S(Vr,In),Jn=new S(Br,In),Xi=new S(Nr/Z,Ur/Z),Mi=new S(Ir/Z,mn/Z),si=h*Math.PI/180;if(si){var wa=Math.sin(si),Sa=Math.cos(si),Si=[Sa,-wa,wa,Sa];oi._matMult(Si),Ii._matMult(Si),Jn._matMult(Si),Ni._matMult(Si)}var da=sr.stretch+sr.fixed,ha=Wt.stretch+Wt.fixed;return{tl:oi,tr:Ii,bl:Jn,br:Ni,tex:{x:V.paddedRect.x+1+da,y:V.paddedRect.y+1+ha,w:zr.stretch+zr.fixed-da,h:Zr.stretch+Zr.fixed-ha},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Xi,pixelOffsetBR:Mi,minFontScaleX:me/Z/_e,minFontScaleY:Re/Z/Se,isSDF:m}};if(E&&(V.stretchX||V.stretchY))for(var rt=Im(Me,x,u),ot=Im(Ve,T,p),Pt=0;Pt<rt.length-1;Pt++)for(var kt=rt[Pt],At=rt[Pt+1],$t=0;$t<ot.length-1;$t++)I.push(Be(kt,ot[$t],At,ot[$t+1]));else I.push(Be({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ne+1},{fixed:0,stretch:ce+1}));return I}function Td(o,h,m){for(var E=0,I=0,V=o;I<V.length;I+=1){var Z=V[I];E+=Math.max(h,Math.min(m,Z[1]))-Math.max(h,Math.min(m,Z[0]))}return E}function Im(o,h,m){for(var E=[{fixed:-1,stretch:0}],I=0,V=o;I<V.length;I+=1){var Z=V[I],ne=Z[0],ce=Z[1],_e=E[E.length-1];E.push({fixed:ne-_e.stretch,stretch:_e.stretch}),E.push({fixed:ne-_e.stretch,stretch:_e.stretch+(ce-ne)})}return E.push({fixed:h+1,stretch:m}),E}function $p(o,h,m,E){return o/h*m+E}function Ad(o,h,m,E){return o-h*m/E}var kd=function(o,h,m,E,I,V,Z,ne,ce,_e){if(this.boxStartIndex=o.length,ce){var Se=V.top,Me=V.bottom,Ve=V.collisionPadding;Ve&&(Se-=Ve[1],Me+=Ve[3]);var f=Me-Se;f>0&&(f=Math.max(10,f),this.circleDiameter=f)}else{var u=V.top*Z-ne,p=V.bottom*Z+ne,x=V.left*Z-ne,T=V.right*Z+ne,D=V.collisionPadding;if(D&&(x-=D[0]*Z,u-=D[1]*Z,T+=D[2]*Z,p+=D[3]*Z),_e){var j=new S(x,u),J=new S(T,u),ie=new S(x,p),le=new S(T,p),me=_e*Math.PI/180;j._rotate(me),J._rotate(me),ie._rotate(me),le._rotate(me),x=Math.min(j.x,J.x,ie.x,le.x),T=Math.max(j.x,J.x,ie.x,le.x),u=Math.min(j.y,J.y,ie.y,le.y),p=Math.max(j.y,J.y,ie.y,le.y)}o.emplaceBack(h.x,h.y,x,u,T,p,m,E,I)}this.boxEndIndex=o.length},nh=function(o,h){if(o===void 0&&(o=[]),h===void 0&&(h=pf),this.data=o,this.length=this.data.length,this.compare=h,this.length>0)for(var m=(this.length>>1)-1;m>=0;m--)this._down(m)};function pf(o,h){return o<h?-1:o>h?1:0}function Mv(o,h,m){h===void 0&&(h=1),m===void 0&&(m=!1);for(var E=1/0,I=1/0,V=-1/0,Z=-1/0,ne=o[0],ce=0;ce<ne.length;ce++){var _e=ne[ce];(!ce||_e.x<E)&&(E=_e.x),(!ce||_e.y<I)&&(I=_e.y),(!ce||_e.x>V)&&(V=_e.x),(!ce||_e.y>Z)&&(Z=_e.y)}var Se=Math.min(V-E,Z-I),Me=Se/2,Ve=new nh([],ih);if(Se===0)return new S(E,I);for(var f=E;f<V;f+=Se)for(var u=I;u<Z;u+=Se)Ve.push(new ah(f+Me,u+Me,Me,o));for(var p=function(D){for(var j=0,J=0,ie=0,le=D[0],me=0,xe=le.length,Re=xe-1;me<xe;Re=me++){var De=le[me],Be=le[Re],rt=De.x*Be.y-Be.x*De.y;J+=(De.x+Be.x)*rt,ie+=(De.y+Be.y)*rt,j+=3*rt}return new ah(J/j,ie/j,0,D)}(o),x=Ve.length;Ve.length;){var T=Ve.pop();(T.d>p.d||!p.d)&&(p=T,m&&console.log("found best %d after %d probes",Math.round(1e4*T.d)/1e4,x)),T.max-p.d<=h||(Ve.push(new ah(T.p.x-(Me=T.h/2),T.p.y-Me,Me,o)),Ve.push(new ah(T.p.x+Me,T.p.y-Me,Me,o)),Ve.push(new ah(T.p.x-Me,T.p.y+Me,Me,o)),Ve.push(new ah(T.p.x+Me,T.p.y+Me,Me,o)),x+=4)}return m&&(console.log("num probes: "+x),console.log("best distance: "+p.d)),p.p}function ih(o,h){return h.max-o.max}function ah(o,h,m,E){this.p=new S(o,h),this.h=m,this.d=function(I,V){for(var Z=!1,ne=1/0,ce=0;ce<V.length;ce++)for(var _e=V[ce],Se=0,Me=_e.length,Ve=Me-1;Se<Me;Ve=Se++){var f=_e[Se],u=_e[Ve];f.y>I.y!=u.y>I.y&&I.x<(u.x-f.x)*(I.y-f.y)/(u.y-f.y)+f.x&&(Z=!Z),ne=Math.min(ne,Lh(I,f,u))}return(Z?1:-1)*Math.sqrt(ne)}(this.p,E),this.max=this.d+this.h*Math.SQRT2}nh.prototype.push=function(o){this.data.push(o),this.length++,this._up(this.length-1)},nh.prototype.pop=function(){if(this.length!==0){var o=this.data[0],h=this.data.pop();return this.length--,this.length>0&&(this.data[0]=h,this._down(0)),o}},nh.prototype.peek=function(){return this.data[0]},nh.prototype._up=function(o){for(var h=this.data,m=this.compare,E=h[o];o>0;){var I=o-1>>1,V=h[I];if(m(E,V)>=0)break;h[o]=V,o=I}h[o]=E},nh.prototype._down=function(o){for(var h=this.data,m=this.compare,E=this.length>>1,I=h[o];o<E;){var V=1+(o<<1),Z=h[V],ne=V+1;if(ne<this.length&&m(h[ne],Z)<0&&(V=ne,Z=h[ne]),m(Z,I)>=0)break;h[o]=Z,o=V}h[o]=I};var Mm=Number.POSITIVE_INFINITY;function Zg(o,h){return h[1]!==Mm?function(m,E,I){var V=0,Z=0;switch(E=Math.abs(E),I=Math.abs(I),m){case"top-right":case"top-left":case"top":Z=I-7;break;case"bottom-right":case"bottom-left":case"bottom":Z=7-I}switch(m){case"top-right":case"bottom-right":case"right":V=-E;break;case"top-left":case"bottom-left":case"left":V=E}return[V,Z]}(o,h[0],h[1]):function(m,E){var I=0,V=0;E<0&&(E=0);var Z=E/Math.sqrt(2);switch(m){case"top-right":case"top-left":V=Z-7;break;case"bottom-right":case"bottom-left":V=7-Z;break;case"bottom":V=7-E;break;case"top":V=E-7}switch(m){case"top-right":case"bottom-right":I=-Z;break;case"top-left":case"bottom-left":I=Z;break;case"left":I=E;break;case"right":I=-E}return[I,V]}(o,h[0])}function Om(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ov(o,h,m,E,I,V,Z,ne,ce,_e,Se,Me,Ve,f,u){var p=function(J,ie,le,me,xe,Re,De,Be){for(var rt=me.layout.get("text-rotate").evaluate(Re,{})*Math.PI/180,ot=[],Pt=0,kt=ie.positionedLines;Pt<kt.length;Pt+=1)for(var At=kt[Pt],$t=0,sr=At.positionedGlyphs;$t<sr.length;$t+=1){var Wt=sr[$t];if(Wt.rect){var zr=Wt.rect||{},Zr=4,Br=!0,Nr=1,Rr=0,Ur=(xe||Be)&&Wt.vertical,Vr=Wt.metrics.advance*Wt.scale/2;if(Be&&ie.verticalizable&&(Rr=At.lineOffset/2-(Wt.imageName?-(24-Wt.metrics.width*Wt.scale)/2:24*(Wt.scale-1))),Wt.imageName){var Ir=De[Wt.imageName];Br=Ir.sdf,Zr=1/(Nr=Ir.pixelRatio)}var In=xe?[Wt.x+Vr,Wt.y]:[0,0],mn=xe?[0,0]:[Wt.x+Vr+le[0],Wt.y+le[1]-Rr],oi=[0,0];Ur&&(oi=mn,mn=[0,0]);var Ii=(Wt.metrics.left-Zr)*Wt.scale-Vr+mn[0],Ni=(-Wt.metrics.top-Zr)*Wt.scale+mn[1],Jn=Ii+zr.w*Wt.scale/Nr,Xi=Ni+zr.h*Wt.scale/Nr,Mi=new S(Ii,Ni),si=new S(Jn,Ni),wa=new S(Ii,Xi),Sa=new S(Jn,Xi);if(Ur){var Si=new S(-Vr,Vr- -17),da=-Math.PI/2,ha=12-Vr,li=new S(22-ha,-(Wt.imageName?ha:0)),Kn=new(Function.prototype.bind.apply(S,[null].concat(oi)));Mi._rotateAround(da,Si)._add(li)._add(Kn),si._rotateAround(da,Si)._add(li)._add(Kn),wa._rotateAround(da,Si)._add(li)._add(Kn),Sa._rotateAround(da,Si)._add(li)._add(Kn)}if(rt){var no=Math.sin(rt),ba=Math.cos(rt),di=[ba,-no,no,ba];Mi._matMult(di),si._matMult(di),wa._matMult(di),Sa._matMult(di)}var Ta=new S(0,0),ma=new S(0,0);ot.push({tl:Mi,tr:si,bl:wa,br:Sa,tex:zr,writingMode:ie.writingMode,glyphOffset:In,sectionIndex:Wt.sectionIndex,isSDF:Br,pixelOffsetTL:Ta,pixelOffsetBR:ma,minFontScaleX:0,minFontScaleY:0})}}return ot}(0,m,ne,I,V,Z,E,o.allowVerticalPlacement),x=o.textSizeData,T=null;x.kind==="source"?(T=[128*I.layout.get("text-size").evaluate(Z,{})])[0]>32640&&Ie(o.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):x.kind==="composite"&&((T=[128*f.compositeTextSizes[0].evaluate(Z,{},u),128*f.compositeTextSizes[1].evaluate(Z,{},u)])[0]>32640||T[1]>32640)&&Ie(o.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),o.addSymbols(o.text,p,T,ne,V,Z,_e,h,ce.lineStartIndex,ce.lineLength,Ve,u);for(var D=0,j=Se;D<j.length;D+=1)Me[j[D]]=o.text.placedSymbolArray.length-1;return 4*p.length}function Rv(o){for(var h in o)return o[h];return null}function Dv(o,h,m,E){var I=o.compareText;if(h in I){for(var V=I[h],Z=V.length-1;Z>=0;Z--)if(E.dist(V[Z])<m)return!0}else I[h]=[];return I[h].push(E),!1}var xu=Rc.VectorTileFeature.types,zv=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Wh(o,h,m,E,I,V,Z,ne,ce,_e,Se,Me,Ve){var f=ne?Math.min(32640,Math.round(ne[0])):0,u=ne?Math.min(32640,Math.round(ne[1])):0;o.emplaceBack(h,m,Math.round(32*E),Math.round(32*I),V,Z,(f<<1)+(ce?1:0),u,16*_e,16*Se,256*Me,256*Ve)}function Rm(o,h,m){o.emplaceBack(h.x,h.y,m),o.emplaceBack(h.x,h.y,m),o.emplaceBack(h.x,h.y,m),o.emplaceBack(h.x,h.y,m)}function Id(o){for(var h=0,m=o.sections;h<m.length;h+=1)if(zh(m[h].text))return!0;return!1}var df=function(o){this.layoutVertexArray=new Ke,this.indexArray=new bt,this.programConfigurations=o,this.segments=new Ze,this.dynamicLayoutVertexArray=new yt,this.opacityVertexArray=new ut,this.placedSymbolArray=new U};df.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},df.prototype.upload=function(o,h,m,E){this.isEmpty()||(m&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,bd.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,bv.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,zv,!0),this.opacityVertexBuffer.itemSize=1),(m||E)&&this.programConfigurations.upload(o))},df.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},fn("SymbolBuffers",df);var oh=function(o,h,m){this.layoutVertexArray=new o,this.layoutAttributes=h,this.indexArray=new m,this.segments=new Ze,this.collisionVertexArray=new Jt};oh.prototype.upload=function(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,lf.members,!0)},oh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},fn("CollisionBuffers",oh);var Da=function(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(V){return V.id}),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=qo([]),this.placementViewportMatrix=qo([]);var h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=nu(this.zoom,h["text-size"]),this.iconSizeData=nu(this.zoom,h["icon-size"]);var m=this.layers[0].layout,E=m.get("symbol-sort-key"),I=m.get("symbol-z-order");this.canOverlap=m.get("text-allow-overlap")||m.get("icon-allow-overlap")||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=I!=="viewport-y"&&!E.isConstant(),this.sortFeaturesByY=(I==="viewport-y"||I==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(function(V){return ru[V]})),this.stateDependentLayerIds=this.layers.filter(function(V){return V.isStateDependent()}).map(function(V){return V.id}),this.sourceID=o.sourceID};Da.prototype.createArrays=function(){this.text=new df(new ca(this.layers,this.zoom,function(o){return/^text/.test(o)})),this.icon=new df(new ca(this.layers,this.zoom,function(o){return/^icon/.test(o)})),this.glyphOffsetArray=new se,this.lineVertexArray=new ve,this.symbolInstances=new ee},Da.prototype.calculateGlyphDependencies=function(o,h,m,E,I){for(var V=0;V<o.length;V++)if(h[o.charCodeAt(V)]=!0,(m||E)&&I){var Z=th[o.charAt(V)];Z&&(h[Z.charCodeAt(0)]=!0)}},Da.prototype.populate=function(o,h,m){var E=this.layers[0],I=E.layout,V=I.get("text-font"),Z=I.get("text-field"),ne=I.get("icon-image"),ce=(Z.value.kind!=="constant"||Z.value.value instanceof Ya&&!Z.value.value.isEmpty()||Z.value.value.toString().length>0)&&(V.value.kind!=="constant"||V.value.value.length>0),_e=ne.value.kind!=="constant"||!!ne.value.value||Object.keys(ne.parameters).length>0,Se=I.get("symbol-sort-key");if(this.features=[],ce||_e){for(var Me=h.iconDependencies,Ve=h.glyphDependencies,f=h.availableImages,u=new vi(this.zoom),p=0,x=o;p<x.length;p+=1){var T=x[p],D=T.feature,j=T.id,J=T.index,ie=T.sourceLayerIndex,le=E._featureFilter.needGeometry,me=ys(D,le);if(E._featureFilter.filter(u,me,m)){le||(me.geometry=_a(D));var xe=void 0;if(ce){var Re=E.getValueAndResolveTokens("text-field",me,m,f),De=Ya.factory(Re);Id(De)&&(this.hasRTLText=!0),(!this.hasRTLText||pl()==="unavailable"||this.hasRTLText&&yi.isParsed())&&(xe=Vg(De,E,me))}var Be=void 0;if(_e){var rt=E.getValueAndResolveTokens("icon-image",me,m,f);Be=rt instanceof Oi?rt:Oi.fromString(rt)}if(xe||Be){var ot=this.sortFeaturesByKey?Se.evaluate(me,{},m):void 0;if(this.features.push({id:j,text:xe,icon:Be,index:J,sourceLayerIndex:ie,geometry:me.geometry,properties:D.properties,type:xu[D.type],sortKey:ot}),Be&&(Me[Be.name]=!0),xe){var Pt=V.evaluate(me,{},m).join(","),kt=I.get("text-rotation-alignment")==="map"&&I.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ru.vertical)>=0;for(var At=0,$t=xe.sections;At<$t.length;At+=1){var sr=$t[At];if(sr.image)Me[sr.image.name]=!0;else{var Wt=hl(xe.toString()),zr=sr.fontStack||Pt,Zr=Ve[zr]=Ve[zr]||{};this.calculateGlyphDependencies(sr.text,Zr,kt,this.allowVerticalPlacement,Wt)}}}}}}I.get("symbol-placement")==="line"&&(this.features=function(Br){var Nr={},Rr={},Ur=[],Vr=0;function Ir(Si){Ur.push(Br[Si]),Vr++}function In(Si,da,ha){var li=Rr[Si];return delete Rr[Si],Rr[da]=li,Ur[li].geometry[0].pop(),Ur[li].geometry[0]=Ur[li].geometry[0].concat(ha[0]),li}function mn(Si,da,ha){var li=Nr[da];return delete Nr[da],Nr[Si]=li,Ur[li].geometry[0].shift(),Ur[li].geometry[0]=ha[0].concat(Ur[li].geometry[0]),li}function oi(Si,da,ha){var li=ha?da[0][da[0].length-1]:da[0][0];return Si+":"+li.x+":"+li.y}for(var Ii=0;Ii<Br.length;Ii++){var Ni=Br[Ii],Jn=Ni.geometry,Xi=Ni.text?Ni.text.toString():null;if(Xi){var Mi=oi(Xi,Jn),si=oi(Xi,Jn,!0);if(Mi in Rr&&si in Nr&&Rr[Mi]!==Nr[si]){var wa=mn(Mi,si,Jn),Sa=In(Mi,si,Ur[wa].geometry);delete Nr[Mi],delete Rr[si],Rr[oi(Xi,Ur[Sa].geometry,!0)]=Sa,Ur[wa].geometry=null}else Mi in Rr?In(Mi,si,Jn):si in Nr?mn(Mi,si,Jn):(Ir(Ii),Nr[Mi]=Vr-1,Rr[si]=Vr-1)}else Ir(Ii)}return Ur.filter(function(Si){return Si.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Br,Nr){return Br.sortKey-Nr.sortKey})}},Da.prototype.update=function(o,h,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,h,this.layers,m),this.icon.programConfigurations.updatePaintArrays(o,h,this.layers,m))},Da.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Da.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Da.prototype.upload=function(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Da.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Da.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Da.prototype.addToLineVertexArray=function(o,h){var m=this.lineVertexArray.length;if(o.segment!==void 0){for(var E=o.dist(h[o.segment+1]),I=o.dist(h[o.segment]),V={},Z=o.segment+1;Z<h.length;Z++)V[Z]={x:h[Z].x,y:h[Z].y,tileUnitDistanceFromAnchor:E},Z<h.length-1&&(E+=h[Z+1].dist(h[Z]));for(var ne=o.segment||0;ne>=0;ne--)V[ne]={x:h[ne].x,y:h[ne].y,tileUnitDistanceFromAnchor:I},ne>0&&(I+=h[ne-1].dist(h[ne]));for(var ce=0;ce<h.length;ce++){var _e=V[ce];this.lineVertexArray.emplaceBack(_e.x,_e.y,_e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}},Da.prototype.addSymbols=function(o,h,m,E,I,V,Z,ne,ce,_e,Se,Me){for(var Ve=o.indexArray,f=o.layoutVertexArray,u=o.segments.prepareSegment(4*h.length,f,Ve,this.canOverlap?V.sortKey:void 0),p=this.glyphOffsetArray.length,x=u.vertexLength,T=this.allowVerticalPlacement&&Z===ru.vertical?Math.PI/2:0,D=V.text&&V.text.sections,j=0;j<h.length;j++){var J=h[j],ie=J.tl,le=J.tr,me=J.bl,xe=J.br,Re=J.tex,De=J.pixelOffsetTL,Be=J.pixelOffsetBR,rt=J.minFontScaleX,ot=J.minFontScaleY,Pt=J.glyphOffset,kt=J.isSDF,At=J.sectionIndex,$t=u.vertexLength,sr=Pt[1];Wh(f,ne.x,ne.y,ie.x,sr+ie.y,Re.x,Re.y,m,kt,De.x,De.y,rt,ot),Wh(f,ne.x,ne.y,le.x,sr+le.y,Re.x+Re.w,Re.y,m,kt,Be.x,De.y,rt,ot),Wh(f,ne.x,ne.y,me.x,sr+me.y,Re.x,Re.y+Re.h,m,kt,De.x,Be.y,rt,ot),Wh(f,ne.x,ne.y,xe.x,sr+xe.y,Re.x+Re.w,Re.y+Re.h,m,kt,Be.x,Be.y,rt,ot),Rm(o.dynamicLayoutVertexArray,ne,T),Ve.emplaceBack($t,$t+1,$t+2),Ve.emplaceBack($t+1,$t+2,$t+3),u.vertexLength+=4,u.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Pt[0]),j!==h.length-1&&At===h[j+1].sectionIndex||o.programConfigurations.populatePaintArrays(f.length,V,V.index,{},Me,D&&D[At])}o.placedSymbolArray.emplaceBack(ne.x,ne.y,p,this.glyphOffsetArray.length-p,x,ce,_e,ne.segment,m?m[0]:0,m?m[1]:0,E[0],E[1],Z,0,!1,0,Se)},Da.prototype._addCollisionDebugVertex=function(o,h,m,E,I,V){return h.emplaceBack(0,0),o.emplaceBack(m.x,m.y,E,I,Math.round(V.x),Math.round(V.y))},Da.prototype.addCollisionDebugVertices=function(o,h,m,E,I,V,Z){var ne=I.segments.prepareSegment(4,I.layoutVertexArray,I.indexArray),ce=ne.vertexLength,_e=I.layoutVertexArray,Se=I.collisionVertexArray,Me=Z.anchorX,Ve=Z.anchorY;this._addCollisionDebugVertex(_e,Se,V,Me,Ve,new S(o,h)),this._addCollisionDebugVertex(_e,Se,V,Me,Ve,new S(m,h)),this._addCollisionDebugVertex(_e,Se,V,Me,Ve,new S(m,E)),this._addCollisionDebugVertex(_e,Se,V,Me,Ve,new S(o,E)),ne.vertexLength+=4;var f=I.indexArray;f.emplaceBack(ce,ce+1),f.emplaceBack(ce+1,ce+2),f.emplaceBack(ce+2,ce+3),f.emplaceBack(ce+3,ce),ne.primitiveLength+=4},Da.prototype.addDebugCollisionBoxes=function(o,h,m,E){for(var I=o;I<h;I++){var V=this.collisionBoxArray.get(I);this.addCollisionDebugVertices(V.x1,V.y1,V.x2,V.y2,E?this.textCollisionBox:this.iconCollisionBox,V.anchorPoint,m)}},Da.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new oh(zt,Cm.members,gr),this.iconCollisionBox=new oh(zt,Cm.members,gr);for(var o=0;o<this.symbolInstances.length;o++){var h=this.symbolInstances.get(o);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}},Da.prototype._deserializeCollisionBoxesForSymbol=function(o,h,m,E,I,V,Z,ne,ce){for(var _e={},Se=h;Se<m;Se++){var Me=o.get(Se);_e.textBox={x1:Me.x1,y1:Me.y1,x2:Me.x2,y2:Me.y2,anchorPointX:Me.anchorPointX,anchorPointY:Me.anchorPointY},_e.textFeatureIndex=Me.featureIndex;break}for(var Ve=E;Ve<I;Ve++){var f=o.get(Ve);_e.verticalTextBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},_e.verticalTextFeatureIndex=f.featureIndex;break}for(var u=V;u<Z;u++){var p=o.get(u);_e.iconBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},_e.iconFeatureIndex=p.featureIndex;break}for(var x=ne;x<ce;x++){var T=o.get(x);_e.verticalIconBox={x1:T.x1,y1:T.y1,x2:T.x2,y2:T.y2,anchorPointX:T.anchorPointX,anchorPointY:T.anchorPointY},_e.verticalIconFeatureIndex=T.featureIndex;break}return _e},Da.prototype.deserializeCollisionBoxes=function(o){this.collisionArrays=[];for(var h=0;h<this.symbolInstances.length;h++){var m=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}},Da.prototype.hasTextData=function(){return this.text.segments.get().length>0},Da.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Da.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Da.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Da.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Da.prototype.addIndicesForPlacedSymbol=function(o,h){for(var m=o.placedSymbolArray.get(h),E=m.vertexStartIndex+4*m.numGlyphs,I=m.vertexStartIndex;I<E;I+=4)o.indexArray.emplaceBack(I,I+1,I+2),o.indexArray.emplaceBack(I+1,I+2,I+3)},Da.prototype.getSortedSymbolIndexes=function(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var h=Math.sin(o),m=Math.cos(o),E=[],I=[],V=[],Z=0;Z<this.symbolInstances.length;++Z){V.push(Z);var ne=this.symbolInstances.get(Z);E.push(0|Math.round(h*ne.anchorX+m*ne.anchorY)),I.push(ne.featureIndex)}return V.sort(function(ce,_e){return E[ce]-E[_e]||I[_e]-I[ce]}),V},Da.prototype.addToSortKeyRanges=function(o,h){var m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===h?m.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:o,symbolInstanceEnd:o+1})},Da.prototype.sortFeatures=function(o){var h=this;if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var m=0,E=this.symbolInstanceIndexes;m<E.length;m+=1){var I=this.symbolInstances.get(E[m]);this.featureSortOrder.push(I.featureIndex),[I.rightJustifiedTextSymbolIndex,I.centerJustifiedTextSymbolIndex,I.leftJustifiedTextSymbolIndex].forEach(function(V,Z,ne){V>=0&&ne.indexOf(V)===Z&&h.addIndicesForPlacedSymbol(h.text,V)}),I.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,I.verticalPlacedTextSymbolIndex),I.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,I.placedIconSymbolIndex),I.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,I.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},fn("SymbolBucket",Da,{omit:["layers","collisionBoxArray","features","compareText"]}),Da.MAX_GLYPHS=65535,Da.addDynamicAttributes=Rm;var tb=new zo({"symbol-placement":new un(Je.layout_symbol["symbol-placement"]),"symbol-spacing":new un(Je.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new un(Je.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Nn(Je.layout_symbol["symbol-sort-key"]),"symbol-z-order":new un(Je.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new un(Je.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new un(Je.layout_symbol["icon-ignore-placement"]),"icon-optional":new un(Je.layout_symbol["icon-optional"]),"icon-rotation-alignment":new un(Je.layout_symbol["icon-rotation-alignment"]),"icon-size":new Nn(Je.layout_symbol["icon-size"]),"icon-text-fit":new un(Je.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new un(Je.layout_symbol["icon-text-fit-padding"]),"icon-image":new Nn(Je.layout_symbol["icon-image"]),"icon-rotate":new Nn(Je.layout_symbol["icon-rotate"]),"icon-padding":new un(Je.layout_symbol["icon-padding"]),"icon-keep-upright":new un(Je.layout_symbol["icon-keep-upright"]),"icon-offset":new Nn(Je.layout_symbol["icon-offset"]),"icon-anchor":new Nn(Je.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new un(Je.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new un(Je.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new un(Je.layout_symbol["text-rotation-alignment"]),"text-field":new Nn(Je.layout_symbol["text-field"]),"text-font":new Nn(Je.layout_symbol["text-font"]),"text-size":new Nn(Je.layout_symbol["text-size"]),"text-max-width":new Nn(Je.layout_symbol["text-max-width"]),"text-line-height":new un(Je.layout_symbol["text-line-height"]),"text-letter-spacing":new Nn(Je.layout_symbol["text-letter-spacing"]),"text-justify":new Nn(Je.layout_symbol["text-justify"]),"text-radial-offset":new Nn(Je.layout_symbol["text-radial-offset"]),"text-variable-anchor":new un(Je.layout_symbol["text-variable-anchor"]),"text-anchor":new Nn(Je.layout_symbol["text-anchor"]),"text-max-angle":new un(Je.layout_symbol["text-max-angle"]),"text-writing-mode":new un(Je.layout_symbol["text-writing-mode"]),"text-rotate":new Nn(Je.layout_symbol["text-rotate"]),"text-padding":new un(Je.layout_symbol["text-padding"]),"text-keep-upright":new un(Je.layout_symbol["text-keep-upright"]),"text-transform":new Nn(Je.layout_symbol["text-transform"]),"text-offset":new Nn(Je.layout_symbol["text-offset"]),"text-allow-overlap":new un(Je.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new un(Je.layout_symbol["text-ignore-placement"]),"text-optional":new un(Je.layout_symbol["text-optional"])}),Md={paint:new zo({"icon-opacity":new Nn(Je.paint_symbol["icon-opacity"]),"icon-color":new Nn(Je.paint_symbol["icon-color"]),"icon-halo-color":new Nn(Je.paint_symbol["icon-halo-color"]),"icon-halo-width":new Nn(Je.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Nn(Je.paint_symbol["icon-halo-blur"]),"icon-translate":new un(Je.paint_symbol["icon-translate"]),"icon-translate-anchor":new un(Je.paint_symbol["icon-translate-anchor"]),"text-opacity":new Nn(Je.paint_symbol["text-opacity"]),"text-color":new Nn(Je.paint_symbol["text-color"],{runtimeType:ar,getOverride:function(o){return o.textColor},hasOverride:function(o){return!!o.textColor}}),"text-halo-color":new Nn(Je.paint_symbol["text-halo-color"]),"text-halo-width":new Nn(Je.paint_symbol["text-halo-width"]),"text-halo-blur":new Nn(Je.paint_symbol["text-halo-blur"]),"text-translate":new un(Je.paint_symbol["text-translate"]),"text-translate-anchor":new un(Je.paint_symbol["text-translate-anchor"])}),layout:tb},Np=function(o){this.type=o.property.overrides?o.property.overrides.runtimeType:ct,this.defaultValue=o};Np.prototype.evaluate=function(o){if(o.formattedSection){var h=this.defaultValue.property.overrides;if(h&&h.hasOverride(o.formattedSection))return h.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default},Np.prototype.eachChild=function(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)},Np.prototype.outputDefined=function(){return!1},Np.prototype.serialize=function(){return null},fn("FormatSectionOverride",Np,{omit:["defaultValue"]});var Bp=function(o){function h(m){o.call(this,m,Md)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.recalculate=function(m,E){if(o.prototype.recalculate.call(this,m,E),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var I=this.layout.get("text-writing-mode");if(I){for(var V=[],Z=0,ne=I;Z<ne.length;Z+=1){var ce=ne[Z];V.indexOf(ce)<0&&V.push(ce)}this.layout._values["text-writing-mode"]=V}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},h.prototype.getValueAndResolveTokens=function(m,E,I,V){var Z=this.layout.get(m).evaluate(E,{},I,V),ne=this._unevaluatedLayout._values[m];return ne.isDataDriven()||Qs(ne.value)||!Z?Z:function(ce,_e){return _e.replace(/{([^{}]+)}/g,function(Se,Me){return Me in ce?String(ce[Me]):""})}(E.properties,Z)},h.prototype.createBucket=function(m){return new Da(m)},h.prototype.queryRadius=function(){return 0},h.prototype.queryIntersectsFeature=function(){return!1},h.prototype._setPaintOverrides=function(){for(var m=0,E=Md.paint.overridableProperties;m<E.length;m+=1){var I=E[m];if(h.hasPaintOverride(this.layout,I)){var V,Z=this.paint.get(I),ne=new Np(Z),ce=new Ts(ne,Z.property.specification);V=Z.value.kind==="constant"||Z.value.kind==="source"?new Lu("source",ce):new ll("composite",ce,Z.value.zoomStops,Z.value._interpolationType),this.paint._values[I]=new go(Z.property,V,Z.parameters)}}},h.prototype._handleOverridablePaintPropertyUpdate=function(m,E,I){return!(!this.layout||E.isDataDriven()||I.isDataDriven())&&h.hasPaintOverride(this.layout,m)},h.hasPaintOverride=function(m,E){var I=m.get("text-field"),V=Md.paint.properties[E],Z=!1,ne=function(Se){for(var Me=0,Ve=Se;Me<Ve.length;Me+=1)if(V.overrides&&V.overrides.hasOverride(Ve[Me]))return void(Z=!0)};if(I.value.kind==="constant"&&I.value.value instanceof Ya)ne(I.value.value.sections);else if(I.value.kind==="source"){var ce=function(Se){Z||(Se instanceof $o&&co(Se.value)===Ar?ne(Se.value.sections):Se instanceof Ko?ne(Se.sections):Se.eachChild(ce))},_e=I.value;_e._styleExpression&&ce(_e._styleExpression.expression)}return Z},h}(O),Xg={paint:new zo({"background-color":new un(Je.paint_background["background-color"]),"background-pattern":new ua(Je.paint_background["background-pattern"]),"background-opacity":new un(Je.paint_background["background-opacity"])})},Lv=function(o){function h(m){o.call(this,m,Xg)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h}(O),Kg={paint:new zo({"raster-opacity":new un(Je.paint_raster["raster-opacity"]),"raster-hue-rotate":new un(Je.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new un(Je.paint_raster["raster-brightness-min"]),"raster-brightness-max":new un(Je.paint_raster["raster-brightness-max"]),"raster-saturation":new un(Je.paint_raster["raster-saturation"]),"raster-contrast":new un(Je.paint_raster["raster-contrast"]),"raster-resampling":new un(Je.paint_raster["raster-resampling"]),"raster-fade-duration":new un(Je.paint_raster["raster-fade-duration"])})},rb=function(o){function h(m){o.call(this,m,Kg)}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h}(O),sh=function(o){function h(m){o.call(this,m,{}),this.implementation=m}return o&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h,h.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},h.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},h.prototype.recalculate=function(){},h.prototype.updateTransitions=function(){},h.prototype.hasTransition=function(){},h.prototype.serialize=function(){},h.prototype.onAdd=function(m){this.implementation.onAdd&&this.implementation.onAdd(m,m.painter.context.gl)},h.prototype.onRemove=function(m){this.implementation.onRemove&&this.implementation.onRemove(m,m.painter.context.gl)},h}(O),$v={circle:Jo,heatmap:Og,hillshade:fv,fill:tu,"fill-extrusion":Lg,line:J0,symbol:Bp,background:Lv,raster:rb},Yg=P.HTMLImageElement,Nv=P.HTMLCanvasElement,Bv=P.HTMLVideoElement,Fv=P.ImageData,Zh=P.ImageBitmap,mf=function(o,h,m,E){this.context=o,this.format=m,this.texture=o.gl.createTexture(),this.update(h,E)};mf.prototype.update=function(o,h,m){var E=o.width,I=o.height,V=!(this.size&&this.size[0]===E&&this.size[1]===I||m),Z=this.context,ne=Z.gl;if(this.useMipmap=!!(h&&h.useMipmap),ne.bindTexture(ne.TEXTURE_2D,this.texture),Z.pixelStoreUnpackFlipY.set(!1),Z.pixelStoreUnpack.set(1),Z.pixelStoreUnpackPremultiplyAlpha.set(this.format===ne.RGBA&&(!h||h.premultiply!==!1)),V)this.size=[E,I],o instanceof Yg||o instanceof Nv||o instanceof Bv||o instanceof Fv||Zh&&o instanceof Zh?ne.texImage2D(ne.TEXTURE_2D,0,this.format,this.format,ne.UNSIGNED_BYTE,o):ne.texImage2D(ne.TEXTURE_2D,0,this.format,E,I,0,this.format,ne.UNSIGNED_BYTE,o.data);else{var ce=m||{x:0,y:0},_e=ce.x,Se=ce.y;o instanceof Yg||o instanceof Nv||o instanceof Bv||o instanceof Fv||Zh&&o instanceof Zh?ne.texSubImage2D(ne.TEXTURE_2D,0,_e,Se,ne.RGBA,ne.UNSIGNED_BYTE,o):ne.texSubImage2D(ne.TEXTURE_2D,0,_e,Se,E,I,ne.RGBA,ne.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ne.generateMipmap(ne.TEXTURE_2D)},mf.prototype.bind=function(o,h,m){var E=this.context.gl;E.bindTexture(E.TEXTURE_2D,this.texture),m!==E.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=E.LINEAR),o!==this.filter&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,o),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,m||o),this.filter=o),h!==this.wrap&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,h),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,h),this.wrap=h)},mf.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},mf.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Jg=function(o){var h=this;this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){h._triggered=!1,h._callback()})};Jg.prototype.trigger=function(){var o=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){o._triggered=!1,o._callback()},0))},Jg.prototype.remove=function(){delete this._channel,this._callback=function(){}};var lh=function(o,h,m){this.target=o,this.parent=h,this.mapId=m,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},X(["receive","process"],this),this.invoker=new Jg(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=it()?o:P};function Dm(o,h,m){var E=2*Math.PI*6378137/256/Math.pow(2,m);return[o*E-2*Math.PI*6378137/2,h*E-2*Math.PI*6378137/2]}lh.prototype.send=function(o,h,m,E,I){var V=this;I===void 0&&(I=!1);var Z=Math.round(1e18*Math.random()).toString(36).substring(0,10);m&&(this.callbacks[Z]=m);var ne=Zt(this.globalScope)?void 0:[];return this.target.postMessage({id:Z,type:o,hasCallback:!!m,targetMapId:E,mustQueue:I,sourceMapId:this.mapId,data:Fo(h,ne)},ne),{cancel:function(){m&&delete V.callbacks[Z],V.target.postMessage({id:Z,type:"<cancel>",targetMapId:E,sourceMapId:V.mapId})}}},lh.prototype.receive=function(o){var h=o.data,m=h.id;if(m&&(!h.targetMapId||this.mapId===h.targetMapId))if(h.type==="<cancel>"){delete this.tasks[m];var E=this.cancelCallbacks[m];delete this.cancelCallbacks[m],E&&E()}else it()||h.mustQueue?(this.tasks[m]=h,this.taskQueue.push(m),this.invoker.trigger()):this.processTask(m,h)},lh.prototype.process=function(){if(this.taskQueue.length){var o=this.taskQueue.shift(),h=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),h&&this.processTask(o,h)}},lh.prototype.processTask=function(o,h){var m=this;if(h.type==="<response>"){var E=this.callbacks[o];delete this.callbacks[o],E&&(h.error?E(ju(h.error)):E(null,ju(h.data)))}else{var I=!1,V=Zt(this.globalScope)?void 0:[],Z=h.hasCallback?function(Se,Me){I=!0,delete m.cancelCallbacks[o],m.target.postMessage({id:o,type:"<response>",sourceMapId:m.mapId,error:Se?Fo(Se):null,data:Fo(Me,V)},V)}:function(Se){I=!0},ne=null,ce=ju(h.data);if(this.parent[h.type])ne=this.parent[h.type](h.sourceMapId,ce,Z);else if(this.parent.getWorkerSource){var _e=h.type.split(".");ne=this.parent.getWorkerSource(h.sourceMapId,_e[0],ce.source)[_e[1]](ce,Z)}else Z(new Error("Could not find function "+h.type));!I&&ne&&ne.cancel&&(this.cancelCallbacks[o]=ne.cancel)}},lh.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var lo=function(o,h){o&&(h?this.setSouthWest(o).setNorthEast(h):o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))};lo.prototype.setNorthEast=function(o){return this._ne=o instanceof ro?new ro(o.lng,o.lat):ro.convert(o),this},lo.prototype.setSouthWest=function(o){return this._sw=o instanceof ro?new ro(o.lng,o.lat):ro.convert(o),this},lo.prototype.extend=function(o){var h,m,E=this._sw,I=this._ne;if(o instanceof ro)h=o,m=o;else{if(!(o instanceof lo))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(lo.convert(o)):this.extend(ro.convert(o)):this;if(m=o._ne,!(h=o._sw)||!m)return this}return E||I?(E.lng=Math.min(h.lng,E.lng),E.lat=Math.min(h.lat,E.lat),I.lng=Math.max(m.lng,I.lng),I.lat=Math.max(m.lat,I.lat)):(this._sw=new ro(h.lng,h.lat),this._ne=new ro(m.lng,m.lat)),this},lo.prototype.getCenter=function(){return new ro((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},lo.prototype.getSouthWest=function(){return this._sw},lo.prototype.getNorthEast=function(){return this._ne},lo.prototype.getNorthWest=function(){return new ro(this.getWest(),this.getNorth())},lo.prototype.getSouthEast=function(){return new ro(this.getEast(),this.getSouth())},lo.prototype.getWest=function(){return this._sw.lng},lo.prototype.getSouth=function(){return this._sw.lat},lo.prototype.getEast=function(){return this._ne.lng},lo.prototype.getNorth=function(){return this._ne.lat},lo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},lo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},lo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},lo.prototype.contains=function(o){var h=ro.convert(o),m=h.lng,E=h.lat,I=this._sw.lng<=m&&m<=this._ne.lng;return this._sw.lng>this._ne.lng&&(I=this._sw.lng>=m&&m>=this._ne.lng),this._sw.lat<=E&&E<=this._ne.lat&&I},lo.convert=function(o){return!o||o instanceof lo?o:new lo(o)};var ro=function(o,h){if(isNaN(o)||isNaN(h))throw new Error("Invalid LngLat object: ("+o+", "+h+")");if(this.lng=+o,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};ro.prototype.wrap=function(){return new ro(G(this.lng,-180,180),this.lat)},ro.prototype.toArray=function(){return[this.lng,this.lat]},ro.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},ro.prototype.distanceTo=function(o){var h=Math.PI/180,m=this.lat*h,E=o.lat*h,I=Math.sin(m)*Math.sin(E)+Math.cos(m)*Math.cos(E)*Math.cos((o.lng-this.lng)*h);return 63710088e-1*Math.acos(Math.min(I,1))},ro.prototype.toBounds=function(o){o===void 0&&(o=0);var h=360*o/40075017,m=h/Math.cos(Math.PI/180*this.lat);return new lo(new ro(this.lng-m,this.lat-h),new ro(this.lng+m,this.lat+h))},ro.convert=function(o){if(o instanceof ro)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new ro(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new ro(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var zm=2*Math.PI*63710088e-1;function Od(o){return zm*Math.cos(o*Math.PI/180)}function Fp(o){return(180+o)/360}function Lm(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Uv(o,h){return o/Od(h)}function Qg(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}var Xh=function(o,h,m){m===void 0&&(m=0),this.x=+o,this.y=+h,this.z=+m};Xh.fromLngLat=function(o,h){h===void 0&&(h=0);var m=ro.convert(o);return new Xh(Fp(m.lng),Lm(m.lat),Uv(h,m.lat))},Xh.prototype.toLngLat=function(){return new ro(360*this.x-180,Qg(this.y))},Xh.prototype.toAltitude=function(){return this.z*Od(Qg(this.y))},Xh.prototype.meterInMercatorCoordinateUnits=function(){return 1/zm*(o=Qg(this.y),1/Math.cos(o*Math.PI/180));var o};var Kh=function(o,h,m){this.z=o,this.x=h,this.y=m,this.key=uo(0,o,o,h,m)};Kh.prototype.equals=function(o){return this.z===o.z&&this.x===o.x&&this.y===o.y},Kh.prototype.url=function(o,h){var m,E,I,V,Z,ne=(E=this.y,I=this.z,V=Dm(256*(m=this.x),256*(E=Math.pow(2,I)-E-1),I),Z=Dm(256*(m+1),256*(E+1),I),V[0]+","+V[1]+","+Z[0]+","+Z[1]),ce=function(_e,Se,Me){for(var Ve,f="",u=_e;u>0;u--)f+=(Se&(Ve=1<<u-1)?1:0)+(Me&Ve?2:0);return f}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ce).replace("{bbox-epsg-3857}",ne)},Kh.prototype.getTilePoint=function(o){var h=Math.pow(2,this.z);return new S(8192*(o.x*h-this.x),8192*(o.y*h-this.y))},Kh.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var jv=function(o,h){this.wrap=o,this.canonical=h,this.key=uo(o,h.z,h.z,h.x,h.y)},Lo=function(o,h,m,E,I){this.overscaledZ=o,this.wrap=h,this.canonical=new Kh(m,+E,+I),this.key=uo(h,o,m,E,I)};function uo(o,h,m,E,I){(o*=2)<0&&(o=-1*o-1);var V=1<<m;return(V*V*o+V*I+E).toString(36)+m.toString(36)+h.toString(36)}Lo.prototype.equals=function(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)},Lo.prototype.scaledTo=function(o){var h=this.canonical.z-o;return o>this.canonical.z?new Lo(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Lo(o,this.wrap,o,this.canonical.x>>h,this.canonical.y>>h)},Lo.prototype.calculateScaledKey=function(o,h){var m=this.canonical.z-o;return o>this.canonical.z?uo(this.wrap*+h,o,this.canonical.z,this.canonical.x,this.canonical.y):uo(this.wrap*+h,o,o,this.canonical.x>>m,this.canonical.y>>m)},Lo.prototype.isChildOf=function(o){if(o.wrap!==this.wrap)return!1;var h=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>h&&o.canonical.y===this.canonical.y>>h},Lo.prototype.children=function(o){if(this.overscaledZ>=o)return[new Lo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var h=this.canonical.z+1,m=2*this.canonical.x,E=2*this.canonical.y;return[new Lo(h,this.wrap,h,m,E),new Lo(h,this.wrap,h,m+1,E),new Lo(h,this.wrap,h,m,E+1),new Lo(h,this.wrap,h,m+1,E+1)]},Lo.prototype.isLessThan=function(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))},Lo.prototype.wrapped=function(){return new Lo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Lo.prototype.unwrapTo=function(o){return new Lo(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)},Lo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Lo.prototype.toUnwrapped=function(){return new jv(this.wrap,this.canonical)},Lo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Lo.prototype.getTilePoint=function(o){return this.canonical.getTilePoint(new Xh(o.x-this.wrap,o.y))},fn("CanonicalTileID",Kh),fn("OverscaledTileID",Lo,{omit:["posMatrix"]});var yl=function(o,h,m){if(this.uid=o,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(m&&m!=="mapbox"&&m!=="terrarium")return Ie('"'+m+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=h.height;var E=this.dim=h.height-2;this.data=new Uint32Array(h.data.buffer),this.encoding=m||"mapbox";for(var I=0;I<E;I++)this.data[this._idx(-1,I)]=this.data[this._idx(0,I)],this.data[this._idx(E,I)]=this.data[this._idx(E-1,I)],this.data[this._idx(I,-1)]=this.data[this._idx(I,0)],this.data[this._idx(I,E)]=this.data[this._idx(I,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)]};yl.prototype.get=function(o,h){var m=new Uint8Array(this.data.buffer),E=4*this._idx(o,h);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(m[E],m[E+1],m[E+2])},yl.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},yl.prototype._idx=function(o,h){if(o<-1||o>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(o+1)},yl.prototype._unpackMapbox=function(o,h,m){return(256*o*256+256*h+m)/10-1e4},yl.prototype._unpackTerrarium=function(o,h,m){return 256*o+h+m/256-32768},yl.prototype.getPixels=function(){return new Hs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},yl.prototype.backfillBorder=function(o,h,m){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");var E=h*this.dim,I=h*this.dim+this.dim,V=m*this.dim,Z=m*this.dim+this.dim;switch(h){case-1:E=I-1;break;case 1:I=E+1}switch(m){case-1:V=Z-1;break;case 1:Z=V+1}for(var ne=-h*this.dim,ce=-m*this.dim,_e=V;_e<Z;_e++)for(var Se=E;Se<I;Se++)this.data[this._idx(Se,_e)]=o.data[this._idx(Se+ne,_e+ce)]},fn("DEMData",yl);var Rd=function(o){this._stringToNumber={},this._numberToString=[];for(var h=0;h<o.length;h++){var m=o[h];this._stringToNumber[m]=h,this._numberToString[h]=m}};Rd.prototype.encode=function(o){return this._stringToNumber[o]},Rd.prototype.decode=function(o){return this._numberToString[o]};var uh=function(o,h,m,E,I){this.type="Feature",this._vectorTileFeature=o,o._z=h,o._x=m,o._y=E,this.properties=o.properties,this.id=I},$m={geometry:{configurable:!0}};$m.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},$m.geometry.set=function(o){this._geometry=o},uh.prototype.toJSON=function(){var o={geometry:this.geometry};for(var h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(o[h]=this[h]);return o},Object.defineProperties(uh.prototype,$m);var Yh=function(){this.state={},this.stateChanges={},this.deletedStates={}};Yh.prototype.updateState=function(o,h,m){var E=String(h);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][E]=this.stateChanges[o][E]||{},H(this.stateChanges[o][E],m),this.deletedStates[o]===null)for(var I in this.deletedStates[o]={},this.state[o])I!==E&&(this.deletedStates[o][I]=null);else if(this.deletedStates[o]&&this.deletedStates[o][E]===null)for(var V in this.deletedStates[o][E]={},this.state[o][E])m[V]||(this.deletedStates[o][E][V]=null);else for(var Z in m)this.deletedStates[o]&&this.deletedStates[o][E]&&this.deletedStates[o][E][Z]===null&&delete this.deletedStates[o][E][Z]},Yh.prototype.removeFeatureState=function(o,h,m){if(this.deletedStates[o]!==null){var E=String(h);if(this.deletedStates[o]=this.deletedStates[o]||{},m&&h!==void 0)this.deletedStates[o][E]!==null&&(this.deletedStates[o][E]=this.deletedStates[o][E]||{},this.deletedStates[o][E][m]=null);else if(h!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][E])for(m in this.deletedStates[o][E]={},this.stateChanges[o][E])this.deletedStates[o][E][m]=null;else this.deletedStates[o][E]=null;else this.deletedStates[o]=null}},Yh.prototype.getState=function(o,h){var m=String(h),E=H({},(this.state[o]||{})[m],(this.stateChanges[o]||{})[m]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){var I=this.deletedStates[o][h];if(I===null)return{};for(var V in I)delete E[V]}return E},Yh.prototype.initializeTileState=function(o,h){o.setFeatureState(this.state,h)},Yh.prototype.coalesceChanges=function(o,h){var m={};for(var E in this.stateChanges){this.state[E]=this.state[E]||{};var I={};for(var V in this.stateChanges[E])this.state[E][V]||(this.state[E][V]={}),H(this.state[E][V],this.stateChanges[E][V]),I[V]=this.state[E][V];m[E]=I}for(var Z in this.deletedStates){this.state[Z]=this.state[Z]||{};var ne={};if(this.deletedStates[Z]===null)for(var ce in this.state[Z])ne[ce]={},this.state[Z][ce]={};else for(var _e in this.deletedStates[Z]){if(this.deletedStates[Z][_e]===null)this.state[Z][_e]={};else for(var Se=0,Me=Object.keys(this.deletedStates[Z][_e]);Se<Me.length;Se+=1)delete this.state[Z][_e][Me[Se]];ne[_e]=this.state[Z][_e]}m[Z]=m[Z]||{},H(m[Z],ne)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(var Ve in o)o[Ve].setFeatureState(m,h)};var Lc=function(o,h){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new So(8192,16,0),this.grid3D=new So(8192,16,0),this.featureIndexArray=new He,this.promoteId=h};function Nm(o,h,m,E,I){return pe(o,function(V,Z){var ne=h instanceof Co?h.get(Z):null;return ne&&ne.evaluate?ne.evaluate(m,E,I):ne})}function Dd(o){for(var h=1/0,m=1/0,E=-1/0,I=-1/0,V=0,Z=o;V<Z.length;V+=1){var ne=Z[V];h=Math.min(h,ne.x),m=Math.min(m,ne.y),E=Math.max(E,ne.x),I=Math.max(I,ne.y)}return{minX:h,minY:m,maxX:E,maxY:I}}function Vv(o,h){return h-o}Lc.prototype.insert=function(o,h,m,E,I,V){var Z=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,E,I);for(var ne=V?this.grid3D:this.grid,ce=0;ce<h.length;ce++){for(var _e=h[ce],Se=[1/0,1/0,-1/0,-1/0],Me=0;Me<_e.length;Me++){var Ve=_e[Me];Se[0]=Math.min(Se[0],Ve.x),Se[1]=Math.min(Se[1],Ve.y),Se[2]=Math.max(Se[2],Ve.x),Se[3]=Math.max(Se[3],Ve.y)}Se[0]<8192&&Se[1]<8192&&Se[2]>=0&&Se[3]>=0&&ne.insert(Z,Se[0],Se[1],Se[2],Se[3])}},Lc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Rc.VectorTile(new uf(this.rawTileData)).layers,this.sourceLayerCoder=new Rd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Lc.prototype.query=function(o,h,m,E){var I=this;this.loadVTLayers();for(var V=o.params||{},Z=8192/o.tileSize/o.scale,ne=As(V.filter),ce=o.queryGeometry,_e=o.queryPadding*Z,Se=Dd(ce),Me=this.grid.query(Se.minX-_e,Se.minY-_e,Se.maxX+_e,Se.maxY+_e),Ve=Dd(o.cameraQueryGeometry),f=this.grid3D.query(Ve.minX-_e,Ve.minY-_e,Ve.maxX+_e,Ve.maxY+_e,function(J,ie,le,me){return function(xe,Re,De,Be,rt){for(var ot=0,Pt=xe;ot<Pt.length;ot+=1){var kt=Pt[ot];if(Re<=kt.x&&De<=kt.y&&Be>=kt.x&&rt>=kt.y)return!0}var At=[new S(Re,De),new S(Re,rt),new S(Be,rt),new S(Be,De)];if(xe.length>2){for(var $t=0,sr=At;$t<sr.length;$t+=1)if(dl(xe,sr[$t]))return!0}for(var Wt=0;Wt<xe.length-1;Wt++)if(Ic(xe[Wt],xe[Wt+1],At))return!0;return!1}(o.cameraQueryGeometry,J-_e,ie-_e,le+_e,me+_e)}),u=0,p=f;u<p.length;u+=1)Me.push(p[u]);Me.sort(Vv);for(var x,T={},D=function(J){var ie=Me[J];if(ie!==x){x=ie;var le=I.featureIndexArray.get(ie),me=null;I.loadMatchingFeature(T,le.bucketIndex,le.sourceLayerIndex,le.featureIndex,ne,V.layers,V.availableImages,h,m,E,function(xe,Re,De){return me||(me=_a(xe)),Re.queryIntersectsFeature(ce,xe,De,me,I.z,o.transform,Z,o.pixelPosMatrix)})}},j=0;j<Me.length;j++)D(j);return T},Lc.prototype.loadMatchingFeature=function(o,h,m,E,I,V,Z,ne,ce,_e,Se){var Me=this.bucketLayerIDs[h];if(!V||function(xe,Re){for(var De=0;De<xe.length;De++)if(Re.indexOf(xe[De])>=0)return!0;return!1}(V,Me)){var Ve=this.sourceLayerCoder.decode(m),f=this.vtLayers[Ve].feature(E);if(I.needGeometry){var u=ys(f,!0);if(!I.filter(new vi(this.tileID.overscaledZ),u,this.tileID.canonical))return}else if(!I.filter(new vi(this.tileID.overscaledZ),f))return;for(var p=this.getId(f,Ve),x=0;x<Me.length;x++){var T=Me[x];if(!(V&&V.indexOf(T)<0)){var D=ne[T];if(D){var j={};p!==void 0&&_e&&(j=_e.getState(D.sourceLayer||"_geojsonTileLayer",p));var J=H({},ce[T]);J.paint=Nm(J.paint,D.paint,f,j,Z),J.layout=Nm(J.layout,D.layout,f,j,Z);var ie=!Se||Se(f,D,j);if(ie){var le=new uh(f,this.z,this.x,this.y,p);le.layer=J;var me=o[T];me===void 0&&(me=o[T]=[]),me.push({featureIndex:E,feature:le,intersectionZ:ie})}}}}}},Lc.prototype.lookupSymbolFeatures=function(o,h,m,E,I,V,Z,ne){var ce={};this.loadVTLayers();for(var _e=As(I),Se=0,Me=o;Se<Me.length;Se+=1)this.loadMatchingFeature(ce,m,E,Me[Se],_e,V,Z,ne,h);return ce},Lc.prototype.hasLayer=function(o){for(var h=0,m=this.bucketLayerIDs;h<m.length;h+=1)for(var E=0,I=m[h];E<I.length;E+=1)if(o===I[E])return!0;return!1},Lc.prototype.getId=function(o,h){var m=o.id;return this.promoteId&&typeof(m=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]])=="boolean"&&(m=Number(m)),m},fn("FeatureIndex",Lc,{omit:["rawTileData","sourceLayerCoder"]});var Go=function(o,h){this.tileID=o,this.uid=$(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Go.prototype.registerFadeDuration=function(o){var h=o+this.timeAdded;h<hr.now()||this.fadeEndTime&&h<this.fadeEndTime||(this.fadeEndTime=h)},Go.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Go.prototype.loadVectorData=function(o,h,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){for(var E in o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(_e,Se){var Me={};if(!Se)return Me;for(var Ve=function(){var p=u[f],x=p.layerIds.map(function(j){return Se.getLayer(j)}).filter(Boolean);if(x.length!==0){p.layers=x,p.stateDependentLayerIds&&(p.stateDependentLayers=p.stateDependentLayerIds.map(function(j){return x.filter(function(J){return J.id===j})[0]}));for(var T=0,D=x;T<D.length;T+=1)Me[D[T].id]=p}},f=0,u=_e;f<u.length;f+=1)Ve();return Me}(o.buckets,h.style),this.hasSymbolBuckets=!1,this.buckets){var I=this.buckets[E];if(I instanceof Da){if(this.hasSymbolBuckets=!0,!m)break;I.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var V in this.buckets){var Z=this.buckets[V];if(Z instanceof Da&&Z.hasRTLText){this.hasRTLText=!0,yi.isLoading()||yi.isLoaded()||pl()!=="deferred"||Cp();break}}for(var ne in this.queryPadding=0,this.buckets){var ce=this.buckets[ne];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(ne).queryRadius(ce))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new y},Go.prototype.unloadVectorData=function(){for(var o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Go.prototype.getBucket=function(o){return this.buckets[o.id]},Go.prototype.upload=function(o){for(var h in this.buckets){var m=this.buckets[h];m.uploadPending()&&m.upload(o)}var E=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new mf(o,this.imageAtlas.image,E.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new mf(o,this.glyphAtlasImage,E.ALPHA),this.glyphAtlasImage=null)},Go.prototype.prepare=function(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)},Go.prototype.queryRenderedFeatures=function(o,h,m,E,I,V,Z,ne,ce,_e){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:E,cameraQueryGeometry:I,scale:V,tileSize:this.tileSize,pixelPosMatrix:_e,transform:ne,params:Z,queryPadding:this.queryPadding*ce},o,h,m):{}},Go.prototype.querySourceFeatures=function(o,h){var m=this.latestFeatureIndex;if(m&&m.rawTileData){var E=m.loadVTLayers(),I=h?h.sourceLayer:"",V=E._geojsonTileLayer||E[I];if(V)for(var Z=As(h&&h.filter),ne=this.tileID.canonical,ce=ne.z,_e=ne.x,Se=ne.y,Me={z:ce,x:_e,y:Se},Ve=0;Ve<V.length;Ve++){var f=V.feature(Ve);if(Z.needGeometry){var u=ys(f,!0);if(!Z.filter(new vi(this.tileID.overscaledZ),u,this.tileID.canonical))continue}else if(!Z.filter(new vi(this.tileID.overscaledZ),f))continue;var p=m.getId(f,I),x=new uh(f,ce,_e,Se,p);x.tile=Me,o.push(x)}}},Go.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Go.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Go.prototype.setExpiryData=function(o){var h=this.expirationTime;if(o.cacheControl){var m=Rt(o.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){var E=Date.now(),I=!1;if(this.expirationTime>E)I=!1;else if(h)if(this.expirationTime<h)I=!0;else{var V=this.expirationTime-h;V?this.expirationTime=E+Math.max(V,3e4):I=!0}else I=!0;I?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Go.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Go.prototype.setFeatureState=function(o,h){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(o).length!==0){var m=this.latestFeatureIndex.loadVTLayers();for(var E in this.buckets)if(h.style.hasLayer(E)){var I=this.buckets[E],V=I.layers[0].sourceLayer||"_geojsonTileLayer",Z=m[V],ne=o[V];if(Z&&ne&&Object.keys(ne).length!==0){I.update(ne,Z,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ce=h&&h.style&&h.style.getLayer(E);ce&&(this.queryPadding=Math.max(this.queryPadding,ce.queryRadius(I)))}}}},Go.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Go.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<hr.now()},Go.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Go.prototype.setHoldDuration=function(o){this.symbolFadeHoldUntil=hr.now()+o},Go.prototype.setDependencies=function(o,h){for(var m={},E=0,I=h;E<I.length;E+=1)m[I[E]]=!0;this.dependencies[o]=m},Go.prototype.hasDependency=function(o,h){for(var m=0,E=o;m<E.length;m+=1){var I=this.dependencies[E[m]];if(I){for(var V=0,Z=h;V<Z.length;V+=1)if(I[Z[V]])return!0}}return!1};var gf=P.performance,iu=function(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},gf.mark(this._marks.start)};iu.prototype.finish=function(){gf.mark(this._marks.end);var o=gf.getEntriesByName(this._marks.measure);return o.length===0&&(gf.measure(this._marks.measure,this._marks.start,this._marks.end),o=gf.getEntriesByName(this._marks.measure),gf.clearMarks(this._marks.start),gf.clearMarks(this._marks.end),gf.clearMeasures(this._marks.measure)),o},a.Actor=lh,a.AlphaImage=Nh,a.CanonicalTileID=Kh,a.CollisionBoxArray=y,a.Color=Fn,a.DEMData=yl,a.DataConstantProperty=un,a.DictionaryCoder=Rd,a.EXTENT=8192,a.ErrorEvent=Dt,a.EvaluationParameters=vi,a.Event=Ct,a.Evented=Et,a.FeatureIndex=Lc,a.FillBucket=eu,a.FillExtrusionBucket=Nl,a.ImageAtlas=Rp,a.ImagePosition=bu,a.LineBucket=bs,a.LngLat=ro,a.LngLatBounds=lo,a.MercatorCoordinate=Xh,a.ONE_EM=24,a.OverscaledTileID=Lo,a.Point=S,a.Point$1=S,a.Properties=zo,a.Protobuf=uf,a.RGBAImage=Hs,a.RequestManager=Xn,a.RequestPerformance=iu,a.ResourceType=Lr,a.SegmentVector=Ze,a.SourceFeatureState=Yh,a.StructArrayLayout1ui2=cn,a.StructArrayLayout2f1f2i16=Gt,a.StructArrayLayout2i4=q,a.StructArrayLayout3ui6=bt,a.StructArrayLayout4i8=ue,a.SymbolBucket=Da,a.Texture=mf,a.Tile=Go,a.Transitionable=Uo,a.Uniform1f=Mr,a.Uniform1i=Pr,a.Uniform2f=tn,a.Uniform3f=Sn,a.Uniform4f=Ln,a.UniformColor=Bn,a.UniformMatrix4f=nn,a.UnwrappedTileID=jv,a.ValidationError=ye,a.WritingMode=ru,a.ZoomHistory=Yo,a.add=function(o,h,m){return o[0]=h[0]+m[0],o[1]=h[1]+m[1],o[2]=h[2]+m[2],o},a.addDynamicAttributes=Rm,a.asyncAll=function(o,h,m){if(!o.length)return m(null,[]);var E=o.length,I=new Array(o.length),V=null;o.forEach(function(Z,ne){h(Z,function(ce,_e){ce&&(V=ce),I[ne]=_e,--E==0&&m(V,I)})})},a.bezier=F,a.bindAll=X,a.browser=hr,a.cacheEntryPossiblyAdded=function(o){++Rn>lr&&(o.getActor().send("enforceCacheSizeLimit",Yt),Rn=0)},a.clamp=re,a.clearTileCache=function(o){var h=P.caches.delete("mapbox-tiles");o&&h.catch(o).then(function(){return o()})},a.clipLine=Iv,a.clone=function(o){var h=new vo(16);return h[0]=o[0],h[1]=o[1],h[2]=o[2],h[3]=o[3],h[4]=o[4],h[5]=o[5],h[6]=o[6],h[7]=o[7],h[8]=o[8],h[9]=o[9],h[10]=o[10],h[11]=o[11],h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15],h},a.clone$1=Pe,a.clone$2=function(o){var h=new vo(3);return h[0]=o[0],h[1]=o[1],h[2]=o[2],h},a.collisionCircleLayout=jg,a.config=cr,a.create=function(){var o=new vo(16);return vo!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},a.create$1=function(){var o=new vo(9);return vo!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o},a.create$2=function(){var o=new vo(4);return vo!=Float32Array&&(o[1]=0,o[2]=0),o[0]=1,o[3]=1,o},a.createCommonjsModule=s,a.createExpression=qs,a.createLayout=R,a.createStyleLayer=function(o){return o.type==="custom"?new sh(o):new $v[o.type](o)},a.cross=function(o,h,m){var E=h[0],I=h[1],V=h[2],Z=m[0],ne=m[1],ce=m[2];return o[0]=I*ce-V*ne,o[1]=V*Z-E*ce,o[2]=E*ne-I*Z,o},a.deepEqual=function o(h,m){if(Array.isArray(h)){if(!Array.isArray(m)||h.length!==m.length)return!1;for(var E=0;E<h.length;E++)if(!o(h[E],m[E]))return!1;return!0}if(typeof h=="object"&&h!==null&&m!==null){if(typeof m!="object"||Object.keys(h).length!==Object.keys(m).length)return!1;for(var I in h)if(!o(h[I],m[I]))return!1;return!0}return h===m},a.dot=function(o,h){return o[0]*h[0]+o[1]*h[1]+o[2]*h[2]},a.dot$1=function(o,h){return o[0]*h[0]+o[1]*h[1]+o[2]*h[2]+o[3]*h[3]},a.ease=K,a.emitValidationErrors=pn,a.endsWith=te,a.enforceCacheSizeLimit=function(o){Qr(),$a&&$a.then(function(h){h.keys().then(function(m){for(var E=0;E<m.length-o;E++)h.delete(m[E])})})},a.evaluateSizeForFeature=hf,a.evaluateSizeForZoom=Ed,a.evaluateVariableOffset=Zg,a.evented=rf,a.extend=H,a.featureFilter=As,a.filterObject=ke,a.fromRotation=function(o,h){var m=Math.sin(h),E=Math.cos(h);return o[0]=E,o[1]=m,o[2]=0,o[3]=-m,o[4]=E,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},a.getAnchorAlignment=km,a.getAnchorJustification=Om,a.getArrayBuffer=zi,a.getImage=je,a.getJSON=function(o,h){return Ci(H(o,{type:"json"}),h)},a.getRTLTextPluginStatus=pl,a.getReferrer=hn,a.getVideo=function(o,h){var m,E,I=P.document.createElement("video");I.muted=!0,I.onloadstart=function(){h(null,I)};for(var V=0;V<o.length;V++){var Z=P.document.createElement("source");m=o[V],E=void 0,(E=P.document.createElement("a")).href=m,(E.protocol!==P.document.location.protocol||E.host!==P.document.location.host)&&(I.crossOrigin="Anonymous"),Z.src=o[V],I.appendChild(Z)}return{cancel:function(){}}},a.identity=qo,a.invert=function(o,h){var m=h[0],E=h[1],I=h[2],V=h[3],Z=h[4],ne=h[5],ce=h[6],_e=h[7],Se=h[8],Me=h[9],Ve=h[10],f=h[11],u=h[12],p=h[13],x=h[14],T=h[15],D=m*ne-E*Z,j=m*ce-I*Z,J=m*_e-V*Z,ie=E*ce-I*ne,le=E*_e-V*ne,me=I*_e-V*ce,xe=Se*p-Me*u,Re=Se*x-Ve*u,De=Se*T-f*u,Be=Me*x-Ve*p,rt=Me*T-f*p,ot=Ve*T-f*x,Pt=D*ot-j*rt+J*Be+ie*De-le*Re+me*xe;return Pt?(o[0]=(ne*ot-ce*rt+_e*Be)*(Pt=1/Pt),o[1]=(I*rt-E*ot-V*Be)*Pt,o[2]=(p*me-x*le+T*ie)*Pt,o[3]=(Ve*le-Me*me-f*ie)*Pt,o[4]=(ce*De-Z*ot-_e*Re)*Pt,o[5]=(m*ot-I*De+V*Re)*Pt,o[6]=(x*J-u*me-T*j)*Pt,o[7]=(Se*me-Ve*J+f*j)*Pt,o[8]=(Z*rt-ne*De+_e*xe)*Pt,o[9]=(E*De-m*rt-V*xe)*Pt,o[10]=(u*le-p*J+T*D)*Pt,o[11]=(Me*J-Se*le-f*D)*Pt,o[12]=(ne*Re-Z*Be-ce*xe)*Pt,o[13]=(m*Be-E*Re+I*xe)*Pt,o[14]=(p*j-u*ie-x*D)*Pt,o[15]=(Se*ie-Me*j+Ve*D)*Pt,o):null},a.isChar=en,a.isMapboxURL=Li,a.keysDifference=function(o,h){var m=[];for(var E in o)E in h||m.push(E);return m},a.makeRequest=Ci,a.mapObject=pe,a.mercatorXfromLng=Fp,a.mercatorYfromLat=Lm,a.mercatorZfromAltitude=Uv,a.mul=hd,a.multiply=qu,a.mvt=Rc,a.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},a.normalize=function(o,h){var m=h[0],E=h[1],I=h[2],V=m*m+E*E+I*I;return V>0&&(V=1/Math.sqrt(V)),o[0]=h[0]*V,o[1]=h[1]*V,o[2]=h[2]*V,o},a.number=aa,a.offscreenCanvasSupported=rr,a.ortho=function(o,h,m,E,I,V,Z){var ne=1/(h-m),ce=1/(E-I),_e=1/(V-Z);return o[0]=-2*ne,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*ce,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*_e,o[11]=0,o[12]=(h+m)*ne,o[13]=(I+E)*ce,o[14]=(Z+V)*_e,o[15]=1,o},a.parseGlyphPBF=function(o){return new uf(o).readFields(Hg,[])},a.pbf=uf,a.performSymbolLayout=function(o,h,m,E,I,V,Z){o.createArrays(),o.tilePixelRatio=8192/(512*o.overscaling),o.compareText={},o.iconsNeedLinear=!1;var ne=o.layers[0].layout,ce=o.layers[0]._unevaluatedLayout._values,_e={};if(o.textSizeData.kind==="composite"){var Se=o.textSizeData,Me=Se.maxZoom;_e.compositeTextSizes=[ce["text-size"].possiblyEvaluate(new vi(Se.minZoom),Z),ce["text-size"].possiblyEvaluate(new vi(Me),Z)]}if(o.iconSizeData.kind==="composite"){var Ve=o.iconSizeData,f=Ve.maxZoom;_e.compositeIconSizes=[ce["icon-size"].possiblyEvaluate(new vi(Ve.minZoom),Z),ce["icon-size"].possiblyEvaluate(new vi(f),Z)]}_e.layoutTextSize=ce["text-size"].possiblyEvaluate(new vi(o.zoom+1),Z),_e.layoutIconSize=ce["icon-size"].possiblyEvaluate(new vi(o.zoom+1),Z),_e.textMaxSize=ce["text-size"].possiblyEvaluate(new vi(18));for(var u=24*ne.get("text-line-height"),p=ne.get("text-rotation-alignment")==="map"&&ne.get("symbol-placement")!=="point",x=ne.get("text-keep-upright"),T=ne.get("text-size"),D=function(){var ie=J[j],le=ne.get("text-font").evaluate(ie,{},Z).join(","),me=T.evaluate(ie,{},Z),xe=_e.layoutTextSize.evaluate(ie,{},Z),Re=_e.layoutIconSize.evaluate(ie,{},Z),De={horizontal:{},vertical:void 0},Be=ie.text,rt=[0,0];if(Be){var ot=Be.toString(),Pt=24*ne.get("text-letter-spacing").evaluate(ie,{},Z),kt=function(Jn){for(var Xi=0,Mi=Jn;Xi<Mi.length;Xi+=1)if(si=Mi[Xi].charCodeAt(0),en.Arabic(si)||en["Arabic Supplement"](si)||en["Arabic Extended-A"](si)||en["Arabic Presentation Forms-A"](si)||en["Arabic Presentation Forms-B"](si))return!1;var si;return!0}(ot)?Pt:0,At=ne.get("text-anchor").evaluate(ie,{},Z),$t=ne.get("text-variable-anchor");if(!$t){var sr=ne.get("text-radial-offset").evaluate(ie,{},Z);rt=sr?Zg(At,[24*sr,Mm]):ne.get("text-offset").evaluate(ie,{},Z).map(function(Jn){return 24*Jn})}var Wt=p?"center":ne.get("text-justify").evaluate(ie,{},Z),zr=ne.get("symbol-placement"),Zr=zr==="point"?24*ne.get("text-max-width").evaluate(ie,{},Z):0,Br=function(){o.allowVerticalPlacement&&hl(ot)&&(De.vertical=Tm(Be,h,m,I,le,Zr,u,At,"left",kt,rt,ru.vertical,!0,zr,xe,me))};if(!p&&$t){for(var Nr=Wt==="auto"?$t.map(function(Jn){return Om(Jn)}):[Wt],Rr=!1,Ur=0;Ur<Nr.length;Ur++){var Vr=Nr[Ur];if(!De.horizontal[Vr])if(Rr)De.horizontal[Vr]=De.horizontal[0];else{var Ir=Tm(Be,h,m,I,le,Zr,u,"center",Vr,kt,rt,ru.horizontal,!1,zr,xe,me);Ir&&(De.horizontal[Vr]=Ir,Rr=Ir.positionedLines.length===1)}}Br()}else{Wt==="auto"&&(Wt=Om(At));var In=Tm(Be,h,m,I,le,Zr,u,At,Wt,kt,rt,ru.horizontal,!1,zr,xe,me);In&&(De.horizontal[Wt]=In),Br(),hl(ot)&&p&&x&&(De.vertical=Tm(Be,h,m,I,le,Zr,u,At,Wt,kt,rt,ru.vertical,!1,zr,xe,me))}}var mn=void 0,oi=!1;if(ie.icon&&ie.icon.name){var Ii=E[ie.icon.name];Ii&&(mn=function(Jn,Xi,Mi){var si=km(Mi),wa=Xi[0]-Jn.displaySize[0]*si.horizontalAlign,Sa=Xi[1]-Jn.displaySize[1]*si.verticalAlign;return{image:Jn,top:Sa,bottom:Sa+Jn.displaySize[1],left:wa,right:wa+Jn.displaySize[0]}}(I[ie.icon.name],ne.get("icon-offset").evaluate(ie,{},Z),ne.get("icon-anchor").evaluate(ie,{},Z)),oi=Ii.sdf,o.sdfIcons===void 0?o.sdfIcons=Ii.sdf:o.sdfIcons!==Ii.sdf&&Ie("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ii.pixelRatio!==o.pixelRatio||ne.get("icon-rotate").constantOr(1)!==0)&&(o.iconsNeedLinear=!0))}var Ni=Rv(De.horizontal)||De.vertical;o.iconsInText=!!Ni&&Ni.iconsInText,(Ni||mn)&&function(Jn,Xi,Mi,si,wa,Sa,Si,da,ha,li,Kn){var no=Sa.textMaxSize.evaluate(Xi,{});no===void 0&&(no=Si);var ba,di=Jn.layers[0].layout,Ta=di.get("icon-offset").evaluate(Xi,{},Kn),ma=Rv(Mi.horizontal),Bi=Si/24,xs=Jn.tilePixelRatio*Bi,Ho=Jn.tilePixelRatio*no/24,Po=Jn.tilePixelRatio*da,tl=Jn.tilePixelRatio*di.get("symbol-spacing"),vl=di.get("text-padding")*Jn.tilePixelRatio,_l=di.get("icon-padding")*Jn.tilePixelRatio,as=di.get("text-max-angle")/180*Math.PI,bl=di.get("text-rotation-alignment")==="map"&&di.get("symbol-placement")!=="point",Ds=di.get("icon-rotation-alignment")==="map"&&di.get("symbol-placement")!=="point",Ki=di.get("symbol-placement"),za=tl/2,pc=di.get("icon-text-fit");si&&pc!=="none"&&(Jn.allowVerticalPlacement&&Mi.vertical&&(ba=Sd(si,Mi.vertical,pc,di.get("icon-text-fit-padding"),Ta,Bi)),ma&&(si=Sd(si,ma,pc,di.get("icon-text-fit-padding"),Ta,Bi)));var yf=function(wu,Wu){Wu.x<0||Wu.x>=8192||Wu.y<0||Wu.y>=8192||function(Wo,ga,bC,rp,Fm,A1,qv,hh,Gv,ey,Hv,Wv,nb,k1,ty,I1,M1,O1,Zv,R1,au,Xv,D1,ph,wl){var Su,Nd,Um,jm,Bd,Vm=Wo.addToLineVertexArray(ga,bC),z1=0,L1=0,ib=0,$1=0,ab=-1,ob=-1,dh={},sb=wt(""),lb=0,ub=0;if(hh._unevaluatedLayout.getValue("text-radial-offset")===void 0?(lb=(Su=hh.layout.get("text-offset").evaluate(au,{},ph).map(function(iy){return 24*iy}))[0],ub=Su[1]):(lb=24*hh.layout.get("text-radial-offset").evaluate(au,{},ph),ub=Mm),Wo.allowVerticalPlacement&&rp.vertical){var N1=hh.layout.get("text-rotate").evaluate(au,{},ph)+90;jm=new kd(Gv,ga,ey,Hv,Wv,rp.vertical,nb,k1,ty,N1),qv&&(Bd=new kd(Gv,ga,ey,Hv,Wv,qv,M1,O1,ty,N1))}if(Fm){var cb=hh.layout.get("icon-rotate").evaluate(au,{}),Fd=hh.layout.get("icon-text-fit")!=="none",B1=Wg(Fm,cb,D1,Fd),fb=qv?Wg(qv,cb,D1,Fd):void 0;Um=new kd(Gv,ga,ey,Hv,Wv,Fm,M1,O1,!1,cb),z1=4*B1.length;var F1=Wo.iconSizeData,ry=null;F1.kind==="source"?(ry=[128*hh.layout.get("icon-size").evaluate(au,{})])[0]>32640&&Ie(Wo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):F1.kind==="composite"&&((ry=[128*Xv.compositeIconSizes[0].evaluate(au,{},ph),128*Xv.compositeIconSizes[1].evaluate(au,{},ph)])[0]>32640||ry[1]>32640)&&Ie(Wo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Wo.addSymbols(Wo.icon,B1,ry,R1,Zv,au,!1,ga,Vm.lineStartIndex,Vm.lineLength,-1,ph),ab=Wo.icon.placedSymbolArray.length-1,fb&&(L1=4*fb.length,Wo.addSymbols(Wo.icon,fb,ry,R1,Zv,au,ru.vertical,ga,Vm.lineStartIndex,Vm.lineLength,-1,ph),ob=Wo.icon.placedSymbolArray.length-1)}for(var U1 in rp.horizontal){var ny=rp.horizontal[U1];if(!Nd){sb=wt(ny.text);var j1=hh.layout.get("text-rotate").evaluate(au,{},ph);Nd=new kd(Gv,ga,ey,Hv,Wv,ny,nb,k1,ty,j1)}var V1=ny.positionedLines.length===1;if(ib+=Ov(Wo,ga,ny,A1,hh,ty,au,I1,Vm,rp.vertical?ru.horizontal:ru.horizontalOnly,V1?Object.keys(rp.horizontal):[U1],dh,ab,Xv,ph),V1)break}rp.vertical&&($1+=Ov(Wo,ga,rp.vertical,A1,hh,ty,au,I1,Vm,ru.vertical,["vertical"],dh,ob,Xv,ph));var xC=Nd?Nd.boxStartIndex:Wo.collisionBoxArray.length,wC=Nd?Nd.boxEndIndex:Wo.collisionBoxArray.length,SC=jm?jm.boxStartIndex:Wo.collisionBoxArray.length,EC=jm?jm.boxEndIndex:Wo.collisionBoxArray.length,CC=Um?Um.boxStartIndex:Wo.collisionBoxArray.length,PC=Um?Um.boxEndIndex:Wo.collisionBoxArray.length,TC=Bd?Bd.boxStartIndex:Wo.collisionBoxArray.length,AC=Bd?Bd.boxEndIndex:Wo.collisionBoxArray.length,mh=-1,Kv=function(iy,G1){return iy&&iy.circleDiameter?Math.max(iy.circleDiameter,G1):G1};mh=Kv(Nd,mh),mh=Kv(jm,mh),mh=Kv(Um,mh);var q1=(mh=Kv(Bd,mh))>-1?1:0;q1&&(mh*=wl/24),Wo.glyphOffsetArray.length>=Da.MAX_GLYPHS&&Ie("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),au.sortKey!==void 0&&Wo.addToSortKeyRanges(Wo.symbolInstances.length,au.sortKey),Wo.symbolInstances.emplaceBack(ga.x,ga.y,dh.right>=0?dh.right:-1,dh.center>=0?dh.center:-1,dh.left>=0?dh.left:-1,dh.vertical||-1,ab,ob,sb,xC,wC,SC,EC,CC,PC,TC,AC,ey,ib,$1,z1,L1,q1,0,nb,lb,ub,mh)}(Jn,Wu,wu,Mi,si,wa,ba,Jn.layers[0],Jn.collisionBoxArray,Xi.index,Xi.sourceLayerIndex,Jn.index,xs,vl,bl,ha,Po,_l,Ds,Ta,Xi,Sa,li,Kn,Si)};if(Ki==="line")for(var ch=0,Up=Iv(Xi.geometry,0,0,8192,8192);ch<Up.length;ch+=1)for(var Hu=Up[ch],jp=0,Jh=kv(Hu,tl,as,Mi.vertical||ma,si,24,Ho,Jn.overscaling,8192);jp<Jh.length;jp+=1){var Qh=Jh[jp];ma&&Dv(Jn,ma.text,za,Qh)||yf(Hu,Qh)}else if(Ki==="line-center")for(var $c=0,ep=Xi.geometry;$c<ep.length;$c+=1){var zd=ep[$c];if(zd.length>1){var Ld=Av(zd,as,Mi.vertical||ma,si,24,Ho);Ld&&yf(zd,Ld)}}else if(Xi.type==="Polygon")for(var vf=0,xl=bm(Xi.geometry,0);vf<xl.length;vf+=1){var dc=xl[vf],$d=Mv(dc,16);yf(dc[0],new rh($d.x,$d.y,0))}else if(Xi.type==="LineString")for(var tp=0,Bl=Xi.geometry;tp<Bl.length;tp+=1){var _f=Bl[tp];yf(_f,new rh(_f[0].x,_f[0].y,0))}else if(Xi.type==="Point")for(var Bm=0,rl=Xi.geometry;Bm<rl.length;Bm+=1)for(var ws=0,Vi=rl[Bm];ws<Vi.length;ws+=1){var fh=Vi[ws];yf([fh],new rh(fh.x,fh.y,0))}}(o,ie,De,mn,E,_e,xe,Re,rt,oi,Z)},j=0,J=o.features;j<J.length;j+=1)D();V&&o.generateCollisionDebugBuffers()},a.perspective=function(o,h,m,E,I){var V,Z=1/Math.tan(h/2);return o[0]=Z/m,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=Z,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,I!=null&&I!==1/0?(o[10]=(I+E)*(V=1/(E-I)),o[14]=2*I*E*V):(o[10]=-1,o[14]=-2*E),o},a.pick=function(o,h){for(var m={},E=0;E<h.length;E++){var I=h[E];I in o&&(m[I]=o[I])}return m},a.plugin=yi,a.polygonIntersectsPolygon=vs,a.postMapLoadEvent=Xt,a.postTurnstileEvent=Mt,a.potpack=zc,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=fn,a.registerForPluginStateChange=function(o){return o({pluginStatus:Ui,pluginURL:Ms}),rf.on("pluginStateChange",o),o},a.renderColorRamp=Bh,a.rotate=function(o,h,m){var E=h[0],I=h[1],V=h[2],Z=h[3],ne=Math.sin(m),ce=Math.cos(m);return o[0]=E*ce+V*ne,o[1]=I*ce+Z*ne,o[2]=E*-ne+V*ce,o[3]=I*-ne+Z*ce,o},a.rotateX=function(o,h,m){var E=Math.sin(m),I=Math.cos(m),V=h[4],Z=h[5],ne=h[6],ce=h[7],_e=h[8],Se=h[9],Me=h[10],Ve=h[11];return h!==o&&(o[0]=h[0],o[1]=h[1],o[2]=h[2],o[3]=h[3],o[12]=h[12],o[13]=h[13],o[14]=h[14],o[15]=h[15]),o[4]=V*I+_e*E,o[5]=Z*I+Se*E,o[6]=ne*I+Me*E,o[7]=ce*I+Ve*E,o[8]=_e*I-V*E,o[9]=Se*I-Z*E,o[10]=Me*I-ne*E,o[11]=Ve*I-ce*E,o},a.rotateZ=function(o,h,m){var E=Math.sin(m),I=Math.cos(m),V=h[0],Z=h[1],ne=h[2],ce=h[3],_e=h[4],Se=h[5],Me=h[6],Ve=h[7];return h!==o&&(o[8]=h[8],o[9]=h[9],o[10]=h[10],o[11]=h[11],o[12]=h[12],o[13]=h[13],o[14]=h[14],o[15]=h[15]),o[0]=V*I+_e*E,o[1]=Z*I+Se*E,o[2]=ne*I+Me*E,o[3]=ce*I+Ve*E,o[4]=_e*I-V*E,o[5]=Se*I-Z*E,o[6]=Me*I-ne*E,o[7]=Ve*I-ce*E,o},a.scale=function(o,h,m){var E=m[0],I=m[1],V=m[2];return o[0]=h[0]*E,o[1]=h[1]*E,o[2]=h[2]*E,o[3]=h[3]*E,o[4]=h[4]*I,o[5]=h[5]*I,o[6]=h[6]*I,o[7]=h[7]*I,o[8]=h[8]*V,o[9]=h[9]*V,o[10]=h[10]*V,o[11]=h[11]*V,o[12]=h[12],o[13]=h[13],o[14]=h[14],o[15]=h[15],o},a.scale$1=function(o,h,m){return o[0]=h[0]*m,o[1]=h[1]*m,o[2]=h[2]*m,o[3]=h[3]*m,o},a.scale$2=function(o,h,m){return o[0]=h[0]*m,o[1]=h[1]*m,o[2]=h[2]*m,o},a.setCacheLimits=function(o,h){Yt=o,lr=h},a.setRTLTextPlugin=function(o,h,m){if(m===void 0&&(m=!1),Ui==="deferred"||Ui==="loading"||Ui==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Ms=hr.resolveURL(o),Ui="deferred",Gs=h,Gf(),m||Cp()},a.sphericalToCartesian=function(o){var h=o[0],m=o[1],E=o[2];return m+=90,m*=Math.PI/180,E*=Math.PI/180,{x:h*Math.cos(m)*Math.sin(E),y:h*Math.sin(m)*Math.sin(E),z:h*Math.cos(E)}},a.sqrLen=function(o){var h=o[0],m=o[1];return h*h+m*m},a.styleSpec=Je,a.sub=function(o,h,m){return o[0]=h[0]-m[0],o[1]=h[1]-m[1],o[2]=h[2]-m[2],o},a.symbolSize=Lp,a.transformMat3=function(o,h,m){var E=h[0],I=h[1],V=h[2];return o[0]=E*m[0]+I*m[3]+V*m[6],o[1]=E*m[1]+I*m[4]+V*m[7],o[2]=E*m[2]+I*m[5]+V*m[8],o},a.transformMat4=$h,a.translate=function(o,h,m){var E,I,V,Z,ne,ce,_e,Se,Me,Ve,f,u,p=m[0],x=m[1],T=m[2];return h===o?(o[12]=h[0]*p+h[4]*x+h[8]*T+h[12],o[13]=h[1]*p+h[5]*x+h[9]*T+h[13],o[14]=h[2]*p+h[6]*x+h[10]*T+h[14],o[15]=h[3]*p+h[7]*x+h[11]*T+h[15]):(I=h[1],V=h[2],Z=h[3],ne=h[4],ce=h[5],_e=h[6],Se=h[7],Me=h[8],Ve=h[9],f=h[10],u=h[11],o[0]=E=h[0],o[1]=I,o[2]=V,o[3]=Z,o[4]=ne,o[5]=ce,o[6]=_e,o[7]=Se,o[8]=Me,o[9]=Ve,o[10]=f,o[11]=u,o[12]=E*p+ne*x+Me*T+h[12],o[13]=I*p+ce*x+Ve*T+h[13],o[14]=V*p+_e*x+f*T+h[14],o[15]=Z*p+Se*x+u*T+h[15]),o},a.triggerPluginCompletionEvent=pu,a.uniqueId=$,a.validateCustomStyleLayer=function(o){var h=[],m=o.id;return m===void 0&&h.push({message:"layers."+m+': missing required property "id"'}),o.render===void 0&&h.push({message:"layers."+m+': missing required method "render"'}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&h.push({message:"layers."+m+': property "renderingMode" must be either "2d" or "3d"'}),h},a.validateLight=Kl,a.validateStyle=Ol,a.values=function(o){var h=[];for(var m in o)h.push(o[m]);return h},a.vectorTile=Rc,a.version="1.15.3",a.warnOnce=Ie,a.webpSupported=Mn,a.window=P,a.wrap=G}),l(["./shared"],function(a){function s(Ae){var $e=typeof Ae;if($e==="number"||$e==="boolean"||$e==="string"||Ae==null)return JSON.stringify(Ae);if(Array.isArray(Ae)){for(var je="[",et=0,ht=Ae;et<ht.length;et+=1)je+=s(ht[et])+",";return je+"]"}for(var Ct=Object.keys(Ae).sort(),Dt="{",Et=0;Et<Ct.length;Et++)Dt+=JSON.stringify(Ct[Et])+":"+s(Ae[Ct[Et]])+",";return Dt+"}"}function d(Ae){for(var $e="",je=0,et=a.refProperties;je<et.length;je+=1)$e+="/"+s(Ae[et[je]]);return $e}var v=function(Ae){this.keyCache={},Ae&&this.replace(Ae)};v.prototype.replace=function(Ae){this._layerConfigs={},this._layers={},this.update(Ae,[])},v.prototype.update=function(Ae,$e){for(var je=this,et=0,ht=Ae;et<ht.length;et+=1){var Ct=ht[et];this._layerConfigs[Ct.id]=Ct;var Dt=this._layers[Ct.id]=a.createStyleLayer(Ct);Dt._featureFilter=a.featureFilter(Dt.filter),this.keyCache[Ct.id]&&delete this.keyCache[Ct.id]}for(var Et=0,Je=$e;Et<Je.length;Et+=1){var ye=Je[Et];delete this.keyCache[ye],delete this._layerConfigs[ye],delete this._layers[ye]}this.familiesBySource={};for(var fe=0,we=function(pt,vt){for(var ar={},Vt=0;Vt<pt.length;Vt++){var fr=vt&&vt[pt[Vt].id]||d(pt[Vt]);vt&&(vt[pt[Vt].id]=fr);var qr=ar[fr];qr||(qr=ar[fr]=[]),qr.push(pt[Vt])}var Ar=[];for(var ln in ar)Ar.push(ar[ln]);return Ar}(a.values(this._layerConfigs),this.keyCache);fe<we.length;fe+=1){var Ce=we[fe].map(function(pt){return je._layers[pt.id]}),Le=Ce[0];if(Le.visibility!=="none"){var nt=Le.source||"",dt=this.familiesBySource[nt];dt||(dt=this.familiesBySource[nt]={});var ct=Le.sourceLayer||"_geojsonTileLayer",Xe=dt[ct];Xe||(Xe=dt[ct]=[]),Xe.push(Ce)}}};var S=function(Ae){var $e={},je=[];for(var et in Ae){var ht=Ae[et],Ct=$e[et]={};for(var Dt in ht){var Et=ht[+Dt];if(Et&&Et.bitmap.width!==0&&Et.bitmap.height!==0){var Je={x:0,y:0,w:Et.bitmap.width+2,h:Et.bitmap.height+2};je.push(Je),Ct[Dt]={rect:Je,metrics:Et.metrics}}}}var ye=a.potpack(je),fe=new a.AlphaImage({width:ye.w||1,height:ye.h||1});for(var we in Ae){var Ce=Ae[we];for(var Le in Ce){var nt=Ce[+Le];if(nt&&nt.bitmap.width!==0&&nt.bitmap.height!==0){var dt=$e[we][Le].rect;a.AlphaImage.copy(nt.bitmap,fe,{x:0,y:0},{x:dt.x+1,y:dt.y+1},nt.bitmap)}}}this.image=fe,this.positions=$e};a.register("GlyphAtlas",S);var A=function(Ae){this.tileID=new a.OverscaledTileID(Ae.tileID.overscaledZ,Ae.tileID.wrap,Ae.tileID.canonical.z,Ae.tileID.canonical.x,Ae.tileID.canonical.y),this.uid=Ae.uid,this.zoom=Ae.zoom,this.pixelRatio=Ae.pixelRatio,this.tileSize=Ae.tileSize,this.source=Ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ae.showCollisionBoxes,this.collectResourceTiming=!!Ae.collectResourceTiming,this.returnDependencies=!!Ae.returnDependencies,this.promoteId=Ae.promoteId};function P(Ae,$e,je){for(var et=new a.EvaluationParameters($e),ht=0,Ct=Ae;ht<Ct.length;ht+=1)Ct[ht].recalculate(et,je)}function L(Ae,$e){var je=a.getArrayBuffer(Ae.request,function(et,ht,Ct,Dt){et?$e(et):ht&&$e(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(ht)),rawData:ht,cacheControl:Ct,expires:Dt})});return function(){je.cancel(),$e()}}A.prototype.parse=function(Ae,$e,je,et,ht){var Ct=this;this.status="parsing",this.data=Ae,this.collisionBoxArray=new a.CollisionBoxArray;var Dt=new a.DictionaryCoder(Object.keys(Ae.layers).sort()),Et=new a.FeatureIndex(this.tileID,this.promoteId);Et.bucketLayerIDs=[];var Je,ye,fe,we,Ce={},Le={featureIndex:Et,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:je},nt=$e.familiesBySource[this.source];for(var dt in nt){var ct=Ae.layers[dt];if(ct){ct.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+dt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Xe=Dt.encode(dt),pt=[],vt=0;vt<ct.length;vt++){var ar=ct.feature(vt),Vt=Et.getId(ar,dt);pt.push({feature:ar,id:Vt,index:vt,sourceLayerIndex:Xe})}for(var fr=0,qr=nt[dt];fr<qr.length;fr+=1){var Ar=qr[fr],ln=Ar[0];ln.minzoom&&this.zoom<Math.floor(ln.minzoom)||ln.maxzoom&&this.zoom>=ln.maxzoom||ln.visibility!=="none"&&(P(Ar,this.zoom,je),(Ce[ln.id]=ln.createBucket({index:Et.bucketLayerIDs.length,layers:Ar,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Xe,sourceID:this.source})).populate(pt,Le,this.tileID.canonical),Et.bucketLayerIDs.push(Ar.map(function($n){return $n.id})))}}}var gn=a.mapObject(Le.glyphDependencies,function($n){return Object.keys($n).map(Number)});Object.keys(gn).length?et.send("getGlyphs",{uid:this.uid,stacks:gn},function($n,kn){Je||(Je=$n,ye=kn,Dn.call(Ct))}):ye={};var An=Object.keys(Le.iconDependencies);An.length?et.send("getImages",{icons:An,source:this.source,tileID:this.tileID,type:"icons"},function($n,kn){Je||(Je=$n,fe=kn,Dn.call(Ct))}):fe={};var wn=Object.keys(Le.patternDependencies);function Dn(){if(Je)return ht(Je);if(ye&&fe&&we){var $n=new S(ye),kn=new a.ImageAtlas(fe,we);for(var Qa in Ce){var Fn=Ce[Qa];Fn instanceof a.SymbolBucket?(P(Fn.layers,this.zoom,je),a.performSymbolLayout(Fn,ye,$n.positions,fe,kn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Fn.hasPattern&&(Fn instanceof a.LineBucket||Fn instanceof a.FillBucket||Fn instanceof a.FillExtrusionBucket)&&(P(Fn.layers,this.zoom,je),Fn.addFeatures(Le,this.tileID.canonical,kn.patternPositions))}this.status="done",ht(null,{buckets:a.values(Ce).filter(function(oo){return!oo.isEmpty()}),featureIndex:Et,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:$n.image,imageAtlas:kn,glyphMap:this.returnDependencies?ye:null,iconMap:this.returnDependencies?fe:null,glyphPositions:this.returnDependencies?$n.positions:null})}}wn.length?et.send("getImages",{icons:wn,source:this.source,tileID:this.tileID,type:"patterns"},function($n,kn){Je||(Je=$n,we=kn,Dn.call(Ct))}):we={},Dn.call(this)};var F=function(Ae,$e,je,et){this.actor=Ae,this.layerIndex=$e,this.availableImages=je,this.loadVectorData=et||L,this.loading={},this.loaded={}};F.prototype.loadTile=function(Ae,$e){var je=this,et=Ae.uid;this.loading||(this.loading={});var ht=!!(Ae&&Ae.request&&Ae.request.collectResourceTiming)&&new a.RequestPerformance(Ae.request),Ct=this.loading[et]=new A(Ae);Ct.abort=this.loadVectorData(Ae,function(Dt,Et){if(delete je.loading[et],Dt||!Et)return Ct.status="done",je.loaded[et]=Ct,$e(Dt);var Je=Et.rawData,ye={};Et.expires&&(ye.expires=Et.expires),Et.cacheControl&&(ye.cacheControl=Et.cacheControl);var fe={};if(ht){var we=ht.finish();we&&(fe.resourceTiming=JSON.parse(JSON.stringify(we)))}Ct.vectorTile=Et.vectorTile,Ct.parse(Et.vectorTile,je.layerIndex,je.availableImages,je.actor,function(Ce,Le){if(Ce||!Le)return $e(Ce);$e(null,a.extend({rawTileData:Je.slice(0)},Le,ye,fe))}),je.loaded=je.loaded||{},je.loaded[et]=Ct})},F.prototype.reloadTile=function(Ae,$e){var je=this,et=this.loaded,ht=Ae.uid,Ct=this;if(et&&et[ht]){var Dt=et[ht];Dt.showCollisionBoxes=Ae.showCollisionBoxes;var Et=function(Je,ye){var fe=Dt.reloadCallback;fe&&(delete Dt.reloadCallback,Dt.parse(Dt.vectorTile,Ct.layerIndex,je.availableImages,Ct.actor,fe)),$e(Je,ye)};Dt.status==="parsing"?Dt.reloadCallback=Et:Dt.status==="done"&&(Dt.vectorTile?Dt.parse(Dt.vectorTile,this.layerIndex,this.availableImages,this.actor,Et):Et())}},F.prototype.abortTile=function(Ae,$e){var je=this.loading,et=Ae.uid;je&&je[et]&&je[et].abort&&(je[et].abort(),delete je[et]),$e()},F.prototype.removeTile=function(Ae,$e){var je=this.loaded,et=Ae.uid;je&&je[et]&&delete je[et],$e()};var K=a.window.ImageBitmap,re=function(){this.loaded={}};function G(Ae,$e){if(Ae.length!==0){H(Ae[0],$e);for(var je=1;je<Ae.length;je++)H(Ae[je],!$e)}}function H(Ae,$e){for(var je=0,et=0,ht=Ae.length,Ct=ht-1;et<ht;Ct=et++)je+=(Ae[et][0]-Ae[Ct][0])*(Ae[Ct][1]+Ae[et][1]);je>=0!=!!$e&&Ae.reverse()}re.prototype.loadTile=function(Ae,$e){var je=Ae.uid,et=Ae.encoding,ht=Ae.rawImageData,Ct=K&&ht instanceof K?this.getImageData(ht):ht,Dt=new a.DEMData(je,Ct,et);this.loaded=this.loaded||{},this.loaded[je]=Dt,$e(null,Dt)},re.prototype.getImageData=function(Ae){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ae.width,Ae.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ae.width,this.offscreenCanvas.height=Ae.height,this.offscreenCanvasContext.drawImage(Ae,0,0,Ae.width,Ae.height);var $e=this.offscreenCanvasContext.getImageData(-1,-1,Ae.width+2,Ae.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:$e.width,height:$e.height},$e.data)},re.prototype.removeTile=function(Ae){var $e=this.loaded,je=Ae.uid;$e&&$e[je]&&delete $e[je]};var B=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,$=function(Ae){this._feature=Ae,this.extent=a.EXTENT,this.type=Ae.type,this.properties=Ae.tags,"id"in Ae&&!isNaN(Ae.id)&&(this.id=parseInt(Ae.id,10))};$.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Ae=[],$e=0,je=this._feature.geometry;$e<je.length;$e+=1){var et=je[$e];Ae.push([new a.Point$1(et[0],et[1])])}return Ae}for(var ht=[],Ct=0,Dt=this._feature.geometry;Ct<Dt.length;Ct+=1){for(var Et=[],Je=0,ye=Dt[Ct];Je<ye.length;Je+=1){var fe=ye[Je];Et.push(new a.Point$1(fe[0],fe[1]))}ht.push(Et)}return ht},$.prototype.toGeoJSON=function(Ae,$e,je){return B.call(this,Ae,$e,je)};var N=function(Ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=Ae.length,this._features=Ae};N.prototype.feature=function(Ae){return new $(this._features[Ae])};var z=a.vectorTile.VectorTileFeature,X=te;function te(Ae,$e){this.options=$e||{},this.features=Ae,this.length=Ae.length}function pe(Ae,$e){this.id=typeof Ae.id=="number"?Ae.id:void 0,this.type=Ae.type,this.rawGeometry=Ae.type===1?[Ae.geometry]:Ae.geometry,this.properties=Ae.tags,this.extent=$e||4096}te.prototype.feature=function(Ae){return new pe(this.features[Ae],this.options.extent)},pe.prototype.loadGeometry=function(){var Ae=this.rawGeometry;this.geometry=[];for(var $e=0;$e<Ae.length;$e++){for(var je=Ae[$e],et=[],ht=0;ht<je.length;ht++)et.push(new a.Point$1(je[ht][0],je[ht][1]));this.geometry.push(et)}return this.geometry},pe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ae=this.geometry,$e=1/0,je=-1/0,et=1/0,ht=-1/0,Ct=0;Ct<Ae.length;Ct++)for(var Dt=Ae[Ct],Et=0;Et<Dt.length;Et++){var Je=Dt[Et];$e=Math.min($e,Je.x),je=Math.max(je,Je.x),et=Math.min(et,Je.y),ht=Math.max(ht,Je.y)}return[$e,et,je,ht]},pe.prototype.toGeoJSON=z.prototype.toGeoJSON;var ke=ge,Pe=X;function ge(Ae){var $e=new a.pbf;return function(je,et){for(var ht in je.layers)et.writeMessage(3,Ie,je.layers[ht])}(Ae,$e),$e.finish()}function Ie(Ae,$e){var je;$e.writeVarintField(15,Ae.version||1),$e.writeStringField(1,Ae.name||""),$e.writeVarintField(5,Ae.extent||4096);var et={keys:[],values:[],keycache:{},valuecache:{}};for(je=0;je<Ae.length;je++)et.feature=Ae.feature(je),$e.writeMessage(2,Ne,et);var ht=et.keys;for(je=0;je<ht.length;je++)$e.writeStringField(3,ht[je]);var Ct=et.values;for(je=0;je<Ct.length;je++)$e.writeMessage(4,Zt,Ct[je])}function Ne(Ae,$e){var je=Ae.feature;je.id!==void 0&&$e.writeVarintField(1,je.id),$e.writeMessage(2,lt,Ae),$e.writeVarintField(3,je.type),$e.writeMessage(4,St,je)}function lt(Ae,$e){var je=Ae.feature,et=Ae.keys,ht=Ae.values,Ct=Ae.keycache,Dt=Ae.valuecache;for(var Et in je.properties){var Je=Ct[Et];Je===void 0&&(et.push(Et),Ct[Et]=Je=et.length-1),$e.writeVarint(Je);var ye=je.properties[Et],fe=typeof ye;fe!=="string"&&fe!=="boolean"&&fe!=="number"&&(ye=JSON.stringify(ye));var we=fe+":"+ye,Ce=Dt[we];Ce===void 0&&(ht.push(ye),Dt[we]=Ce=ht.length-1),$e.writeVarint(Ce)}}function it(Ae,$e){return($e<<3)+(7&Ae)}function Rt(Ae){return Ae<<1^Ae>>31}function St(Ae,$e){for(var je=Ae.loadGeometry(),et=Ae.type,ht=0,Ct=0,Dt=je.length,Et=0;Et<Dt;Et++){var Je=je[Et],ye=1;et===1&&(ye=Je.length),$e.writeVarint(it(1,ye));for(var fe=et===3?Je.length-1:Je.length,we=0;we<fe;we++){we===1&&et!==1&&$e.writeVarint(it(2,fe-1));var Ce=Je[we].x-ht,Le=Je[we].y-Ct;$e.writeVarint(Rt(Ce)),$e.writeVarint(Rt(Le)),ht+=Ce,Ct+=Le}et===3&&$e.writeVarint(it(7,1))}}function Zt(Ae,$e){var je=typeof Ae;je==="string"?$e.writeStringField(1,Ae):je==="boolean"?$e.writeBooleanField(7,Ae):je==="number"&&(Ae%1!=0?$e.writeDoubleField(3,Ae):Ae<0?$e.writeSVarintField(6,Ae):$e.writeVarintField(5,Ae))}function Kt(Ae,$e,je,et){Ge(Ae,je,et),Ge($e,2*je,2*et),Ge($e,2*je+1,2*et+1)}function Ge(Ae,$e,je){var et=Ae[$e];Ae[$e]=Ae[je],Ae[je]=et}function Ye(Ae,$e,je,et){var ht=Ae-je,Ct=$e-et;return ht*ht+Ct*Ct}ke.fromVectorTileJs=ge,ke.fromGeojsonVt=function(Ae,$e){$e=$e||{};var je={};for(var et in Ae)je[et]=new X(Ae[et].features,$e),je[et].name=et,je[et].version=$e.version,je[et].extent=$e.extent;return ge({layers:je})},ke.GeoJSONWrapper=Pe;var Dr=function(Ae){return Ae[0]},wr=function(Ae){return Ae[1]},tr=function(Ae,$e,je,et,ht){$e===void 0&&($e=Dr),je===void 0&&(je=wr),et===void 0&&(et=64),ht===void 0&&(ht=Float64Array),this.nodeSize=et,this.points=Ae;for(var Ct=Ae.length<65536?Uint16Array:Uint32Array,Dt=this.ids=new Ct(Ae.length),Et=this.coords=new ht(2*Ae.length),Je=0;Je<Ae.length;Je++)Dt[Je]=Je,Et[2*Je]=$e(Ae[Je]),Et[2*Je+1]=je(Ae[Je]);(function ye(fe,we,Ce,Le,nt,dt){if(!(nt-Le<=Ce)){var ct=Le+nt>>1;(function Xe(pt,vt,ar,Vt,fr,qr){for(;fr>Vt;){if(fr-Vt>600){var Ar=fr-Vt+1,ln=ar-Vt+1,gn=Math.log(Ar),An=.5*Math.exp(2*gn/3),wn=.5*Math.sqrt(gn*An*(Ar-An)/Ar)*(ln-Ar/2<0?-1:1);Xe(pt,vt,ar,Math.max(Vt,Math.floor(ar-ln*An/Ar+wn)),Math.min(fr,Math.floor(ar+(Ar-ln)*An/Ar+wn)),qr)}var Dn=vt[2*ar+qr],$n=Vt,kn=fr;for(Kt(pt,vt,Vt,ar),vt[2*fr+qr]>Dn&&Kt(pt,vt,Vt,fr);$n<kn;){for(Kt(pt,vt,$n,kn),$n++,kn--;vt[2*$n+qr]<Dn;)$n++;for(;vt[2*kn+qr]>Dn;)kn--}vt[2*Vt+qr]===Dn?Kt(pt,vt,Vt,kn):Kt(pt,vt,++kn,fr),kn<=ar&&(Vt=kn+1),ar<=kn&&(fr=kn-1)}})(fe,we,ct,Le,nt,dt%2),ye(fe,we,Ce,Le,ct-1,dt+1),ye(fe,we,Ce,ct+1,nt,dt+1)}})(Dt,Et,et,0,Dt.length-1,0)};tr.prototype.range=function(Ae,$e,je,et){return function(ht,Ct,Dt,Et,Je,ye,fe){for(var we,Ce,Le=[0,ht.length-1,0],nt=[];Le.length;){var dt=Le.pop(),ct=Le.pop(),Xe=Le.pop();if(ct-Xe<=fe)for(var pt=Xe;pt<=ct;pt++)Ce=Ct[2*pt+1],(we=Ct[2*pt])>=Dt&&we<=Je&&Ce>=Et&&Ce<=ye&&nt.push(ht[pt]);else{var vt=Math.floor((Xe+ct)/2);Ce=Ct[2*vt+1],(we=Ct[2*vt])>=Dt&&we<=Je&&Ce>=Et&&Ce<=ye&&nt.push(ht[vt]);var ar=(dt+1)%2;(dt===0?Dt<=we:Et<=Ce)&&(Le.push(Xe),Le.push(vt-1),Le.push(ar)),(dt===0?Je>=we:ye>=Ce)&&(Le.push(vt+1),Le.push(ct),Le.push(ar))}}return nt}(this.ids,this.coords,Ae,$e,je,et,this.nodeSize)},tr.prototype.within=function(Ae,$e,je){return function(et,ht,Ct,Dt,Et,Je){for(var ye=[0,et.length-1,0],fe=[],we=Et*Et;ye.length;){var Ce=ye.pop(),Le=ye.pop(),nt=ye.pop();if(Le-nt<=Je)for(var dt=nt;dt<=Le;dt++)Ye(ht[2*dt],ht[2*dt+1],Ct,Dt)<=we&&fe.push(et[dt]);else{var ct=Math.floor((nt+Le)/2),Xe=ht[2*ct],pt=ht[2*ct+1];Ye(Xe,pt,Ct,Dt)<=we&&fe.push(et[ct]);var vt=(Ce+1)%2;(Ce===0?Ct-Et<=Xe:Dt-Et<=pt)&&(ye.push(nt),ye.push(ct-1),ye.push(vt)),(Ce===0?Ct+Et>=Xe:Dt+Et>=pt)&&(ye.push(ct+1),ye.push(Le),ye.push(vt))}}return fe}(this.ids,this.coords,Ae,$e,je,this.nodeSize)};var br={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ae){return Ae}},Bt=function(Ae){this.options=ki(Object.create(br),Ae),this.trees=new Array(this.options.maxZoom+1)};function hr(Ae,$e,je,et,ht){return{x:Ae,y:$e,zoom:1/0,id:je,parentId:-1,numPoints:et,properties:ht}}function cr(Ae,$e){var je=Ae.geometry.coordinates,et=je[1];return{x:Qn(je[0]),y:an(et),zoom:1/0,index:$e,parentId:-1}}function Mn(Ae){return{type:"Feature",id:Ae.id,properties:Hn(Ae),geometry:{type:"Point",coordinates:[(et=Ae.x,360*(et-.5)),($e=Ae.y,je=(180-360*$e)*Math.PI/180,360*Math.atan(Math.exp(je))/Math.PI-90)]}};var $e,je,et}function Hn(Ae){var $e=Ae.numPoints,je=$e>=1e4?Math.round($e/1e3)+"k":$e>=1e3?Math.round($e/100)/10+"k":$e;return ki(ki({},Ae.properties),{cluster:!0,cluster_id:Ae.id,point_count:$e,point_count_abbreviated:je})}function Qn(Ae){return Ae/360+.5}function an(Ae){var $e=Math.sin(Ae*Math.PI/180),je=.5-.25*Math.log((1+$e)/(1-$e))/Math.PI;return je<0?0:je>1?1:je}function ki(Ae,$e){for(var je in $e)Ae[je]=$e[je];return Ae}function Xn(Ae){return Ae.x}function Li(Ae){return Ae.y}function Pi(Ae,$e,je,et,ht,Ct){var Dt=ht-je,Et=Ct-et;if(Dt!==0||Et!==0){var Je=((Ae-je)*Dt+($e-et)*Et)/(Dt*Dt+Et*Et);Je>1?(je=ht,et=Ct):Je>0&&(je+=Dt*Je,et+=Et*Je)}return(Dt=Ae-je)*Dt+(Et=$e-et)*Et}function Yi(Ae,$e,je,et){var ht={id:Ae===void 0?null:Ae,type:$e,geometry:je,tags:et,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ct){var Dt=Ct.geometry,Et=Ct.type;if(Et==="Point"||Et==="MultiPoint"||Et==="LineString")gi(Ct,Dt);else if(Et==="Polygon"||Et==="MultiLineString")for(var Je=0;Je<Dt.length;Je++)gi(Ct,Dt[Je]);else if(Et==="MultiPolygon")for(Je=0;Je<Dt.length;Je++)for(var ye=0;ye<Dt[Je].length;ye++)gi(Ct,Dt[Je][ye])}(ht),ht}function gi(Ae,$e){for(var je=0;je<$e.length;je+=3)Ae.minX=Math.min(Ae.minX,$e[je]),Ae.minY=Math.min(Ae.minY,$e[je+1]),Ae.maxX=Math.max(Ae.maxX,$e[je]),Ae.maxY=Math.max(Ae.maxY,$e[je+1])}function ea(Ae,$e,je,et){if($e.geometry){var ht=$e.geometry.coordinates,Ct=$e.geometry.type,Dt=Math.pow(je.tolerance/((1<<je.maxZoom)*je.extent),2),Et=[],Je=$e.id;if(je.promoteId?Je=$e.properties[je.promoteId]:je.generateId&&(Je=et||0),Ct==="Point")ya(ht,Et);else if(Ct==="MultiPoint")for(var ye=0;ye<ht.length;ye++)ya(ht[ye],Et);else if(Ct==="LineString")La(ht,Et,Dt,!1);else if(Ct==="MultiLineString"){if(je.lineMetrics){for(ye=0;ye<ht.length;ye++)La(ht[ye],Et=[],Dt,!1),Ae.push(Yi(Je,"LineString",Et,$e.properties));return}Aa(ht,Et,Dt,!1)}else if(Ct==="Polygon")Aa(ht,Et,Dt,!0);else{if(Ct!=="MultiPolygon"){if(Ct==="GeometryCollection"){for(ye=0;ye<$e.geometry.geometries.length;ye++)ea(Ae,{id:Je,geometry:$e.geometry.geometries[ye],properties:$e.properties},je,et);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ye=0;ye<ht.length;ye++){var fe=[];Aa(ht[ye],fe,Dt,!0),Et.push(fe)}}Ae.push(Yi(Je,Ct,Et,$e.properties))}}function ya(Ae,$e){$e.push($a(Ae[0])),$e.push(ka(Ae[1])),$e.push(0)}function La(Ae,$e,je,et){for(var ht,Ct,Dt=0,Et=0;Et<Ae.length;Et++){var Je=$a(Ae[Et][0]),ye=ka(Ae[Et][1]);$e.push(Je),$e.push(ye),$e.push(0),Et>0&&(Dt+=et?(ht*ye-Je*Ct)/2:Math.sqrt(Math.pow(Je-ht,2)+Math.pow(ye-Ct,2))),ht=Je,Ct=ye}var fe=$e.length-3;$e[2]=1,function we(Ce,Le,nt,dt){for(var ct,Xe=dt,pt=nt-Le>>1,vt=nt-Le,ar=Ce[Le],Vt=Ce[Le+1],fr=Ce[nt],qr=Ce[nt+1],Ar=Le+3;Ar<nt;Ar+=3){var ln=Pi(Ce[Ar],Ce[Ar+1],ar,Vt,fr,qr);if(ln>Xe)ct=Ar,Xe=ln;else if(ln===Xe){var gn=Math.abs(Ar-pt);gn<vt&&(ct=Ar,vt=gn)}}Xe>dt&&(ct-Le>3&&we(Ce,Le,ct,dt),Ce[ct+2]=Xe,nt-ct>3&&we(Ce,ct,nt,dt))}($e,0,fe,je),$e[fe+2]=1,$e.size=Math.abs(Dt),$e.start=0,$e.end=$e.size}function Aa(Ae,$e,je,et){for(var ht=0;ht<Ae.length;ht++){var Ct=[];La(Ae[ht],Ct,je,et),$e.push(Ct)}}function $a(Ae){return Ae/360+.5}function ka(Ae){var $e=Math.sin(Ae*Math.PI/180),je=.5-.25*Math.log((1+$e)/(1-$e))/Math.PI;return je<0?0:je>1?1:je}function Ka(Ae,$e,je,et,ht,Ct,Dt,Et){if(et/=$e,Ct>=(je/=$e)&&Dt<et)return Ae;if(Dt<je||Ct>=et)return null;for(var Je=[],ye=0;ye<Ae.length;ye++){var fe=Ae[ye],we=fe.geometry,Ce=fe.type,Le=ht===0?fe.minX:fe.minY,nt=ht===0?fe.maxX:fe.maxY;if(Le>=je&&nt<et)Je.push(fe);else if(!(nt<je||Le>=et)){var dt=[];if(Ce==="Point"||Ce==="MultiPoint")dr(we,dt,je,et,ht);else if(Ce==="LineString")Mt(we,dt,je,et,ht,!1,Et.lineMetrics);else if(Ce==="MultiLineString")Xt(we,dt,je,et,ht,!1);else if(Ce==="Polygon")Xt(we,dt,je,et,ht,!0);else if(Ce==="MultiPolygon")for(var ct=0;ct<we.length;ct++){var Xe=[];Xt(we[ct],Xe,je,et,ht,!0),Xe.length&&dt.push(Xe)}if(dt.length){if(Et.lineMetrics&&Ce==="LineString"){for(ct=0;ct<dt.length;ct++)Je.push(Yi(fe.id,Ce,dt[ct],fe.tags));continue}Ce!=="LineString"&&Ce!=="MultiLineString"||(dt.length===1?(Ce="LineString",dt=dt[0]):Ce="MultiLineString"),Ce!=="Point"&&Ce!=="MultiPoint"||(Ce=dt.length===3?"Point":"MultiPoint"),Je.push(Yi(fe.id,Ce,dt,fe.tags))}}}return Je.length?Je:null}function dr(Ae,$e,je,et,ht){for(var Ct=0;Ct<Ae.length;Ct+=3){var Dt=Ae[Ct+ht];Dt>=je&&Dt<=et&&($e.push(Ae[Ct]),$e.push(Ae[Ct+1]),$e.push(Ae[Ct+2]))}}function Mt(Ae,$e,je,et,ht,Ct,Dt){for(var Et,Je,ye=yr(Ae),fe=ht===0?lr:Qr,we=Ae.start,Ce=0;Ce<Ae.length-3;Ce+=3){var Le=Ae[Ce],nt=Ae[Ce+1],dt=Ae[Ce+2],ct=Ae[Ce+3],Xe=Ae[Ce+4],pt=ht===0?Le:nt,vt=ht===0?ct:Xe,ar=!1;Dt&&(Et=Math.sqrt(Math.pow(Le-ct,2)+Math.pow(nt-Xe,2))),pt<je?vt>je&&(Je=fe(ye,Le,nt,ct,Xe,je),Dt&&(ye.start=we+Et*Je)):pt>et?vt<et&&(Je=fe(ye,Le,nt,ct,Xe,et),Dt&&(ye.start=we+Et*Je)):Yt(ye,Le,nt,dt),vt<je&&pt>=je&&(Je=fe(ye,Le,nt,ct,Xe,je),ar=!0),vt>et&&pt<=et&&(Je=fe(ye,Le,nt,ct,Xe,et),ar=!0),!Ct&&ar&&(Dt&&(ye.end=we+Et*Je),$e.push(ye),ye=yr(Ae)),Dt&&(we+=Et)}var Vt=Ae.length-3;Le=Ae[Vt],nt=Ae[Vt+1],dt=Ae[Vt+2],(pt=ht===0?Le:nt)>=je&&pt<=et&&Yt(ye,Le,nt,dt),Vt=ye.length-3,Ct&&Vt>=3&&(ye[Vt]!==ye[0]||ye[Vt+1]!==ye[1])&&Yt(ye,ye[0],ye[1],ye[2]),ye.length&&$e.push(ye)}function yr(Ae){var $e=[];return $e.size=Ae.size,$e.start=Ae.start,$e.end=Ae.end,$e}function Xt(Ae,$e,je,et,ht,Ct){for(var Dt=0;Dt<Ae.length;Dt++)Mt(Ae[Dt],$e,je,et,ht,Ct,!1)}function Yt(Ae,$e,je,et){Ae.push($e),Ae.push(je),Ae.push(et)}function lr(Ae,$e,je,et,ht,Ct){var Dt=(Ct-$e)/(et-$e);return Ae.push(Ct),Ae.push(je+(ht-je)*Dt),Ae.push(1),Dt}function Qr(Ae,$e,je,et,ht,Ct){var Dt=(Ct-je)/(ht-je);return Ae.push($e+(et-$e)*Dt),Ae.push(Ct),Ae.push(1),Dt}function Xr(Ae,$e){for(var je=[],et=0;et<Ae.length;et++){var ht,Ct=Ae[et],Dt=Ct.type;if(Dt==="Point"||Dt==="MultiPoint"||Dt==="LineString")ht=En(Ct.geometry,$e);else if(Dt==="MultiLineString"||Dt==="Polygon"){ht=[];for(var Et=0;Et<Ct.geometry.length;Et++)ht.push(En(Ct.geometry[Et],$e))}else if(Dt==="MultiPolygon")for(ht=[],Et=0;Et<Ct.geometry.length;Et++){for(var Je=[],ye=0;ye<Ct.geometry[Et].length;ye++)Je.push(En(Ct.geometry[Et][ye],$e));ht.push(Je)}je.push(Yi(Ct.id,Dt,ht,Ct.tags))}return je}function En(Ae,$e){var je=[];je.size=Ae.size,Ae.start!==void 0&&(je.start=Ae.start,je.end=Ae.end);for(var et=0;et<Ae.length;et+=3)je.push(Ae[et]+$e,Ae[et+1],Ae[et+2]);return je}function Rn(Ae,$e){if(Ae.transformed)return Ae;var je,et,ht,Ct=1<<Ae.z,Dt=Ae.x,Et=Ae.y;for(je=0;je<Ae.features.length;je++){var Je=Ae.features[je],ye=Je.geometry,fe=Je.type;if(Je.geometry=[],fe===1)for(et=0;et<ye.length;et+=2)Je.geometry.push(rr(ye[et],ye[et+1],$e,Ct,Dt,Et));else for(et=0;et<ye.length;et++){var we=[];for(ht=0;ht<ye[et].length;ht+=2)we.push(rr(ye[et][ht],ye[et][ht+1],$e,Ct,Dt,Et));Je.geometry.push(we)}}return Ae.transformed=!0,Ae}function rr(Ae,$e,je,et,ht,Ct){return[Math.round(je*(Ae*et-ht)),Math.round(je*($e*et-Ct))]}function Lr(Ae,$e,je,et,ht){for(var Ct=$e===ht.maxZoom?0:ht.tolerance/((1<<$e)*ht.extent),Dt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:je,y:et,z:$e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Et=0;Et<Ae.length;Et++){Dt.numFeatures++,ur(Dt,Ae[Et],Ct,ht);var Je=Ae[Et].minX,ye=Ae[Et].minY,fe=Ae[Et].maxX,we=Ae[Et].maxY;Je<Dt.minX&&(Dt.minX=Je),ye<Dt.minY&&(Dt.minY=ye),fe>Dt.maxX&&(Dt.maxX=fe),we>Dt.maxY&&(Dt.maxY=we)}return Dt}function ur(Ae,$e,je,et){var ht=$e.geometry,Ct=$e.type,Dt=[];if(Ct==="Point"||Ct==="MultiPoint")for(var Et=0;Et<ht.length;Et+=3)Dt.push(ht[Et]),Dt.push(ht[Et+1]),Ae.numPoints++,Ae.numSimplified++;else if(Ct==="LineString")hn(Dt,ht,Ae,je,!1,!1);else if(Ct==="MultiLineString"||Ct==="Polygon")for(Et=0;Et<ht.length;Et++)hn(Dt,ht[Et],Ae,je,Ct==="Polygon",Et===0);else if(Ct==="MultiPolygon")for(var Je=0;Je<ht.length;Je++){var ye=ht[Je];for(Et=0;Et<ye.length;Et++)hn(Dt,ye[Et],Ae,je,!0,Et===0)}if(Dt.length){var fe=$e.tags||null;if(Ct==="LineString"&&et.lineMetrics){for(var we in fe={},$e.tags)fe[we]=$e.tags[we];fe.mapbox_clip_start=ht.start/ht.size,fe.mapbox_clip_end=ht.end/ht.size}var Ce={geometry:Dt,type:Ct==="Polygon"||Ct==="MultiPolygon"?3:Ct==="LineString"||Ct==="MultiLineString"?2:1,tags:fe};$e.id!==null&&(Ce.id=$e.id),Ae.features.push(Ce)}}function hn(Ae,$e,je,et,ht,Ct){var Dt=et*et;if(et>0&&$e.size<(ht?Dt:et))je.numPoints+=$e.length/3;else{for(var Et=[],Je=0;Je<$e.length;Je+=3)(et===0||$e[Je+2]>Dt)&&(je.numSimplified++,Et.push($e[Je]),Et.push($e[Je+1])),je.numPoints++;ht&&function(ye,fe){for(var we=0,Ce=0,Le=ye.length,nt=Le-2;Ce<Le;nt=Ce,Ce+=2)we+=(ye[Ce]-ye[nt])*(ye[Ce+1]+ye[nt+1]);if(we>0===fe)for(Ce=0,Le=ye.length;Ce<Le/2;Ce+=2){var dt=ye[Ce],ct=ye[Ce+1];ye[Ce]=ye[Le-2-Ce],ye[Ce+1]=ye[Le-1-Ce],ye[Le-2-Ce]=dt,ye[Le-1-Ce]=ct}}(Et,Ct),Ae.push(Et)}}function ti(Ae,$e){var je=($e=this.options=function(ht,Ct){for(var Dt in Ct)ht[Dt]=Ct[Dt];return ht}(Object.create(this.options),$e)).debug;if(je&&console.time("preprocess data"),$e.maxZoom<0||$e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if($e.promoteId&&$e.generateId)throw new Error("promoteId and generateId cannot be used together.");var et=function(ht,Ct){var Dt=[];if(ht.type==="FeatureCollection")for(var Et=0;Et<ht.features.length;Et++)ea(Dt,ht.features[Et],Ct,Et);else ea(Dt,ht.type==="Feature"?ht:{geometry:ht},Ct);return Dt}(Ae,$e);this.tiles={},this.tileCoords=[],je&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",$e.indexMaxZoom,$e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(et=function(ht,Ct){var Dt=Ct.buffer/Ct.extent,Et=ht,Je=Ka(ht,1,-1-Dt,Dt,0,-1,2,Ct),ye=Ka(ht,1,1-Dt,2+Dt,0,-1,2,Ct);return(Je||ye)&&(Et=Ka(ht,1,-Dt,1+Dt,0,-1,2,Ct)||[],Je&&(Et=Xr(Je,1).concat(Et)),ye&&(Et=Et.concat(Xr(ye,-1)))),Et}(et,$e)).length&&this.splitTile(et,0,0,0),je&&(et.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Hr(Ae,$e,je){return 32*((1<<Ae)*je+$e)+Ae}function fi(Ae,$e){var je=Ae.tileID.canonical;if(!this._geoJSONIndex)return $e(null,null);var et=this._geoJSONIndex.getTile(je.z,je.x,je.y);if(!et)return $e(null,null);var ht=new N(et.features),Ct=ke(ht);Ct.byteOffset===0&&Ct.byteLength===Ct.buffer.byteLength||(Ct=new Uint8Array(Ct)),$e(null,{vectorTile:ht,rawData:Ct.buffer})}Bt.prototype.load=function(Ae){var $e=this.options,je=$e.log,et=$e.minZoom,ht=$e.maxZoom,Ct=$e.nodeSize;je&&console.time("total time");var Dt="prepare "+Ae.length+" points";je&&console.time(Dt),this.points=Ae;for(var Et=[],Je=0;Je<Ae.length;Je++)Ae[Je].geometry&&Et.push(cr(Ae[Je],Je));this.trees[ht+1]=new tr(Et,Xn,Li,Ct,Float32Array),je&&console.timeEnd(Dt);for(var ye=ht;ye>=et;ye--){var fe=+Date.now();Et=this._cluster(Et,ye),this.trees[ye]=new tr(Et,Xn,Li,Ct,Float32Array),je&&console.log("z%d: %d clusters in %dms",ye,Et.length,+Date.now()-fe)}return je&&console.timeEnd("total time"),this},Bt.prototype.getClusters=function(Ae,$e){var je=((Ae[0]+180)%360+360)%360-180,et=Math.max(-90,Math.min(90,Ae[1])),ht=Ae[2]===180?180:((Ae[2]+180)%360+360)%360-180,Ct=Math.max(-90,Math.min(90,Ae[3]));if(Ae[2]-Ae[0]>=360)je=-180,ht=180;else if(je>ht){var Dt=this.getClusters([je,et,180,Ct],$e),Et=this.getClusters([-180,et,ht,Ct],$e);return Dt.concat(Et)}for(var Je=this.trees[this._limitZoom($e)],ye=[],fe=0,we=Je.range(Qn(je),an(Ct),Qn(ht),an(et));fe<we.length;fe+=1){var Ce=Je.points[we[fe]];ye.push(Ce.numPoints?Mn(Ce):this.points[Ce.index])}return ye},Bt.prototype.getChildren=function(Ae){var $e=this._getOriginId(Ae),je=this._getOriginZoom(Ae),et="No cluster with the specified id.",ht=this.trees[je];if(!ht)throw new Error(et);var Ct=ht.points[$e];if(!Ct)throw new Error(et);for(var Dt=this.options.radius/(this.options.extent*Math.pow(2,je-1)),Et=[],Je=0,ye=ht.within(Ct.x,Ct.y,Dt);Je<ye.length;Je+=1){var fe=ht.points[ye[Je]];fe.parentId===Ae&&Et.push(fe.numPoints?Mn(fe):this.points[fe.index])}if(Et.length===0)throw new Error(et);return Et},Bt.prototype.getLeaves=function(Ae,$e,je){var et=[];return this._appendLeaves(et,Ae,$e=$e||10,je=je||0,0),et},Bt.prototype.getTile=function(Ae,$e,je){var et=this.trees[this._limitZoom(Ae)],ht=Math.pow(2,Ae),Ct=this.options,Dt=Ct.radius/Ct.extent,Et=(je-Dt)/ht,Je=(je+1+Dt)/ht,ye={features:[]};return this._addTileFeatures(et.range(($e-Dt)/ht,Et,($e+1+Dt)/ht,Je),et.points,$e,je,ht,ye),$e===0&&this._addTileFeatures(et.range(1-Dt/ht,Et,1,Je),et.points,ht,je,ht,ye),$e===ht-1&&this._addTileFeatures(et.range(0,Et,Dt/ht,Je),et.points,-1,je,ht,ye),ye.features.length?ye:null},Bt.prototype.getClusterExpansionZoom=function(Ae){for(var $e=this._getOriginZoom(Ae)-1;$e<=this.options.maxZoom;){var je=this.getChildren(Ae);if($e++,je.length!==1)break;Ae=je[0].properties.cluster_id}return $e},Bt.prototype._appendLeaves=function(Ae,$e,je,et,ht){for(var Ct=0,Dt=this.getChildren($e);Ct<Dt.length;Ct+=1){var Et=Dt[Ct],Je=Et.properties;if(Je&&Je.cluster?ht+Je.point_count<=et?ht+=Je.point_count:ht=this._appendLeaves(Ae,Je.cluster_id,je,et,ht):ht<et?ht++:Ae.push(Et),Ae.length===je)break}return ht},Bt.prototype._addTileFeatures=function(Ae,$e,je,et,ht,Ct){for(var Dt=0,Et=Ae;Dt<Et.length;Dt+=1){var Je=$e[Et[Dt]],ye=Je.numPoints,fe={type:1,geometry:[[Math.round(this.options.extent*(Je.x*ht-je)),Math.round(this.options.extent*(Je.y*ht-et))]],tags:ye?Hn(Je):this.points[Je.index].properties},we=void 0;ye?we=Je.id:this.options.generateId?we=Je.index:this.points[Je.index].id&&(we=this.points[Je.index].id),we!==void 0&&(fe.id=we),Ct.features.push(fe)}},Bt.prototype._limitZoom=function(Ae){return Math.max(this.options.minZoom,Math.min(+Ae,this.options.maxZoom+1))},Bt.prototype._cluster=function(Ae,$e){for(var je=[],et=this.options,ht=et.reduce,Ct=et.minPoints,Dt=et.radius/(et.extent*Math.pow(2,$e)),Et=0;Et<Ae.length;Et++){var Je=Ae[Et];if(!(Je.zoom<=$e)){Je.zoom=$e;for(var ye=this.trees[$e+1],fe=ye.within(Je.x,Je.y,Dt),we=Je.numPoints||1,Ce=we,Le=0,nt=fe;Le<nt.length;Le+=1){var dt=ye.points[nt[Le]];dt.zoom>$e&&(Ce+=dt.numPoints||1)}if(Ce>=Ct){for(var ct=Je.x*we,Xe=Je.y*we,pt=ht&&we>1?this._map(Je,!0):null,vt=(Et<<5)+($e+1)+this.points.length,ar=0,Vt=fe;ar<Vt.length;ar+=1){var fr=ye.points[Vt[ar]];if(!(fr.zoom<=$e)){fr.zoom=$e;var qr=fr.numPoints||1;ct+=fr.x*qr,Xe+=fr.y*qr,fr.parentId=vt,ht&&(pt||(pt=this._map(Je,!0)),ht(pt,this._map(fr)))}}Je.parentId=vt,je.push(hr(ct/Ce,Xe/Ce,vt,Ce,pt))}else if(je.push(Je),Ce>1)for(var Ar=0,ln=fe;Ar<ln.length;Ar+=1){var gn=ye.points[ln[Ar]];gn.zoom<=$e||(gn.zoom=$e,je.push(gn))}}}return je},Bt.prototype._getOriginId=function(Ae){return Ae-this.points.length>>5},Bt.prototype._getOriginZoom=function(Ae){return(Ae-this.points.length)%32},Bt.prototype._map=function(Ae,$e){if(Ae.numPoints)return $e?ki({},Ae.properties):Ae.properties;var je=this.points[Ae.index].properties,et=this.options.map(je);return $e&&et===je?ki({},et):et},ti.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ti.prototype.splitTile=function(Ae,$e,je,et,ht,Ct,Dt){for(var Et=[Ae,$e,je,et],Je=this.options,ye=Je.debug;Et.length;){et=Et.pop(),je=Et.pop(),$e=Et.pop(),Ae=Et.pop();var fe=1<<$e,we=Hr($e,je,et),Ce=this.tiles[we];if(!Ce&&(ye>1&&console.time("creation"),Ce=this.tiles[we]=Lr(Ae,$e,je,et,Je),this.tileCoords.push({z:$e,x:je,y:et}),ye)){ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",$e,je,et,Ce.numFeatures,Ce.numPoints,Ce.numSimplified),console.timeEnd("creation"));var Le="z"+$e;this.stats[Le]=(this.stats[Le]||0)+1,this.total++}if(Ce.source=Ae,ht){if($e===Je.maxZoom||$e===ht)continue;var nt=1<<ht-$e;if(je!==Math.floor(Ct/nt)||et!==Math.floor(Dt/nt))continue}else if($e===Je.indexMaxZoom||Ce.numPoints<=Je.indexMaxPoints)continue;if(Ce.source=null,Ae.length!==0){ye>1&&console.time("clipping");var dt,ct,Xe,pt,vt,ar,Vt=.5*Je.buffer/Je.extent,fr=.5-Vt,qr=.5+Vt,Ar=1+Vt;dt=ct=Xe=pt=null,vt=Ka(Ae,fe,je-Vt,je+qr,0,Ce.minX,Ce.maxX,Je),ar=Ka(Ae,fe,je+fr,je+Ar,0,Ce.minX,Ce.maxX,Je),Ae=null,vt&&(dt=Ka(vt,fe,et-Vt,et+qr,1,Ce.minY,Ce.maxY,Je),ct=Ka(vt,fe,et+fr,et+Ar,1,Ce.minY,Ce.maxY,Je),vt=null),ar&&(Xe=Ka(ar,fe,et-Vt,et+qr,1,Ce.minY,Ce.maxY,Je),pt=Ka(ar,fe,et+fr,et+Ar,1,Ce.minY,Ce.maxY,Je),ar=null),ye>1&&console.timeEnd("clipping"),Et.push(dt||[],$e+1,2*je,2*et),Et.push(ct||[],$e+1,2*je,2*et+1),Et.push(Xe||[],$e+1,2*je+1,2*et),Et.push(pt||[],$e+1,2*je+1,2*et+1)}}},ti.prototype.getTile=function(Ae,$e,je){var et=this.options,ht=et.extent,Ct=et.debug;if(Ae<0||Ae>24)return null;var Dt=1<<Ae,Et=Hr(Ae,$e=($e%Dt+Dt)%Dt,je);if(this.tiles[Et])return Rn(this.tiles[Et],ht);Ct>1&&console.log("drilling down to z%d-%d-%d",Ae,$e,je);for(var Je,ye=Ae,fe=$e,we=je;!Je&&ye>0;)ye--,fe=Math.floor(fe/2),we=Math.floor(we/2),Je=this.tiles[Hr(ye,fe,we)];return Je&&Je.source?(Ct>1&&console.log("found parent tile z%d-%d-%d",ye,fe,we),Ct>1&&console.time("drilling down"),this.splitTile(Je.source,ye,fe,we,Ae,$e,je),Ct>1&&console.timeEnd("drilling down"),this.tiles[Et]?Rn(this.tiles[Et],ht):null):null};var Ci=function(Ae){function $e(je,et,ht,Ct){Ae.call(this,je,et,ht,fi),Ct&&(this.loadGeoJSON=Ct)}return Ae&&($e.__proto__=Ae),($e.prototype=Object.create(Ae&&Ae.prototype)).constructor=$e,$e.prototype.loadData=function(je,et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=et,this._pendingLoadDataParams=je,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},$e.prototype._loadData=function(){var je=this;if(this._pendingCallback&&this._pendingLoadDataParams){var et=this._pendingCallback,ht=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Ct=!!(ht&&ht.request&&ht.request.collectResourceTiming)&&new a.RequestPerformance(ht.request);this.loadGeoJSON(ht,function(Dt,Et){if(Dt||!Et)return et(Dt);if(typeof Et!="object")return et(new Error("Input data given to '"+ht.source+"' is not a valid GeoJSON object."));(function Ce(Le,nt){var dt,ct=Le&&Le.type;if(ct==="FeatureCollection")for(dt=0;dt<Le.features.length;dt++)Ce(Le.features[dt],nt);else if(ct==="GeometryCollection")for(dt=0;dt<Le.geometries.length;dt++)Ce(Le.geometries[dt],nt);else if(ct==="Feature")Ce(Le.geometry,nt);else if(ct==="Polygon")G(Le.coordinates,nt);else if(ct==="MultiPolygon")for(dt=0;dt<Le.coordinates.length;dt++)G(Le.coordinates[dt],nt);return Le})(Et,!0);try{if(ht.filter){var Je=a.createExpression(ht.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Je.result==="error")throw new Error(Je.value.map(function(Ce){return Ce.key+": "+Ce.message}).join(", "));var ye=Et.features.filter(function(Ce){return Je.value.evaluate({zoom:0},Ce)});Et={type:"FeatureCollection",features:ye}}je._geoJSONIndex=ht.cluster?new Bt(function(Ce){var Le=Ce.superclusterOptions,nt=Ce.clusterProperties;if(!nt||!Le)return Le;for(var dt={},ct={},Xe={accumulated:null,zoom:0},pt={properties:null},vt=Object.keys(nt),ar=0,Vt=vt;ar<Vt.length;ar+=1){var fr=Vt[ar],qr=nt[fr],Ar=qr[0],ln=a.createExpression(qr[1]),gn=a.createExpression(typeof Ar=="string"?[Ar,["accumulated"],["get",fr]]:Ar);dt[fr]=ln.value,ct[fr]=gn.value}return Le.map=function(An){pt.properties=An;for(var wn={},Dn=0,$n=vt;Dn<$n.length;Dn+=1){var kn=$n[Dn];wn[kn]=dt[kn].evaluate(Xe,pt)}return wn},Le.reduce=function(An,wn){pt.properties=wn;for(var Dn=0,$n=vt;Dn<$n.length;Dn+=1){var kn=$n[Dn];Xe.accumulated=An[kn],An[kn]=ct[kn].evaluate(Xe,pt)}},Le}(ht)).load(Et.features):function(Ce,Le){return new ti(Ce,Le)}(Et,ht.geojsonVtOptions)}catch(Ce){return et(Ce)}je.loaded={};var fe={};if(Ct){var we=Ct.finish();we&&(fe.resourceTiming={},fe.resourceTiming[ht.source]=JSON.parse(JSON.stringify(we)))}et(null,fe)})}},$e.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},$e.prototype.reloadTile=function(je,et){var ht=this.loaded;return ht&&ht[je.uid]?Ae.prototype.reloadTile.call(this,je,et):this.loadTile(je,et)},$e.prototype.loadGeoJSON=function(je,et){if(je.request)a.getJSON(je.request,et);else{if(typeof je.data!="string")return et(new Error("Input data given to '"+je.source+"' is not a valid GeoJSON object."));try{return et(null,JSON.parse(je.data))}catch{return et(new Error("Input data given to '"+je.source+"' is not a valid GeoJSON object."))}}},$e.prototype.removeSource=function(je,et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),et()},$e.prototype.getClusterExpansionZoom=function(je,et){try{et(null,this._geoJSONIndex.getClusterExpansionZoom(je.clusterId))}catch(ht){et(ht)}},$e.prototype.getClusterChildren=function(je,et){try{et(null,this._geoJSONIndex.getChildren(je.clusterId))}catch(ht){et(ht)}},$e.prototype.getClusterLeaves=function(je,et){try{et(null,this._geoJSONIndex.getLeaves(je.clusterId,je.limit,je.offset))}catch(ht){et(ht)}},$e}(F),zi=function(Ae){var $e=this;this.self=Ae,this.actor=new a.Actor(Ae,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:F,geojson:Ci},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(je,et){if($e.workerSourceTypes[je])throw new Error('Worker source with name "'+je+'" already registered.');$e.workerSourceTypes[je]=et},this.self.registerRTLTextPlugin=function(je){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=je.applyArabicShaping,a.plugin.processBidirectionalText=je.processBidirectionalText,a.plugin.processStyledBidirectionalText=je.processStyledBidirectionalText}};return zi.prototype.setReferrer=function(Ae,$e){this.referrer=$e},zi.prototype.setImages=function(Ae,$e,je){for(var et in this.availableImages[Ae]=$e,this.workerSources[Ae]){var ht=this.workerSources[Ae][et];for(var Ct in ht)ht[Ct].availableImages=$e}je()},zi.prototype.setLayers=function(Ae,$e,je){this.getLayerIndex(Ae).replace($e),je()},zi.prototype.updateLayers=function(Ae,$e,je){this.getLayerIndex(Ae).update($e.layers,$e.removedIds),je()},zi.prototype.loadTile=function(Ae,$e,je){this.getWorkerSource(Ae,$e.type,$e.source).loadTile($e,je)},zi.prototype.loadDEMTile=function(Ae,$e,je){this.getDEMWorkerSource(Ae,$e.source).loadTile($e,je)},zi.prototype.reloadTile=function(Ae,$e,je){this.getWorkerSource(Ae,$e.type,$e.source).reloadTile($e,je)},zi.prototype.abortTile=function(Ae,$e,je){this.getWorkerSource(Ae,$e.type,$e.source).abortTile($e,je)},zi.prototype.removeTile=function(Ae,$e,je){this.getWorkerSource(Ae,$e.type,$e.source).removeTile($e,je)},zi.prototype.removeDEMTile=function(Ae,$e){this.getDEMWorkerSource(Ae,$e.source).removeTile($e)},zi.prototype.removeSource=function(Ae,$e,je){if(this.workerSources[Ae]&&this.workerSources[Ae][$e.type]&&this.workerSources[Ae][$e.type][$e.source]){var et=this.workerSources[Ae][$e.type][$e.source];delete this.workerSources[Ae][$e.type][$e.source],et.removeSource!==void 0?et.removeSource($e,je):je()}},zi.prototype.loadWorkerSource=function(Ae,$e,je){try{this.self.importScripts($e.url),je()}catch(et){je(et.toString())}},zi.prototype.syncRTLPluginState=function(Ae,$e,je){try{a.plugin.setState($e);var et=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&et!=null){this.self.importScripts(et);var ht=a.plugin.isParsed();je(ht?void 0:new Error("RTL Text Plugin failed to import scripts from "+et),ht)}}catch(Ct){je(Ct.toString())}},zi.prototype.getAvailableImages=function(Ae){var $e=this.availableImages[Ae];return $e||($e=[]),$e},zi.prototype.getLayerIndex=function(Ae){var $e=this.layerIndexes[Ae];return $e||($e=this.layerIndexes[Ae]=new v),$e},zi.prototype.getWorkerSource=function(Ae,$e,je){var et=this;return this.workerSources[Ae]||(this.workerSources[Ae]={}),this.workerSources[Ae][$e]||(this.workerSources[Ae][$e]={}),this.workerSources[Ae][$e][je]||(this.workerSources[Ae][$e][je]=new this.workerSourceTypes[$e]({send:function(ht,Ct,Dt){et.actor.send(ht,Ct,Dt,Ae)}},this.getLayerIndex(Ae),this.getAvailableImages(Ae))),this.workerSources[Ae][$e][je]},zi.prototype.getDEMWorkerSource=function(Ae,$e){return this.demWorkerSources[Ae]||(this.demWorkerSources[Ae]={}),this.demWorkerSources[Ae][$e]||(this.demWorkerSources[Ae][$e]=new re),this.demWorkerSources[Ae][$e]},zi.prototype.enforceCacheSizeLimit=function(Ae,$e){a.enforceCacheSizeLimit($e)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new zi(self)),zi}),l(["./shared"],function(a){var s=a.createCommonjsModule(function(g){function b(U){return!y(U)}function y(U){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ee,se,ve=new Blob([""],{type:"text/javascript"}),Oe=URL.createObjectURL(ve);try{se=new Worker(Oe),ee=!0}catch{ee=!1}return se&&se.terminate(),URL.revokeObjectURL(Oe),ee}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ee=document.createElement("canvas");ee.width=ee.height=1;var se=ee.getContext("2d");if(!se)return!1;var ve=se.getImageData(0,0,1,1);return ve&&ve.width===ee.width}()?(C[Y=U&&U.failIfMajorPerformanceCaveat]===void 0&&(C[Y]=function(ee){var se=function(Oe){var He=document.createElement("canvas"),Qe=Object.create(b.webGLContextAttributes);return Qe.failIfMajorPerformanceCaveat=Oe,He.probablySupportsContext?He.probablySupportsContext("webgl",Qe)||He.probablySupportsContext("experimental-webgl",Qe):He.supportsContext?He.supportsContext("webgl",Qe)||He.supportsContext("experimental-webgl",Qe):He.getContext("webgl",Qe)||He.getContext("experimental-webgl",Qe)}(ee);if(!se)return!1;var ve=se.createShader(se.VERTEX_SHADER);return!(!ve||se.isContextLost())&&(se.shaderSource(ve,"void main() {}"),se.compileShader(ve),se.getShaderParameter(ve,se.COMPILE_STATUS)===!0)}(Y)),C[Y]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var Y}g.exports?g.exports=b:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=b,window.mapboxgl.notSupportedReason=y);var C={};b.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),d={create:function(g,b,y){var C=a.window.document.createElement(g);return b!==void 0&&(C.className=b),y&&y.appendChild(C),C},createNS:function(g,b){return a.window.document.createElementNS(g,b)}},v=a.window.document&&a.window.document.documentElement.style;function S(g){if(!v)return g[0];for(var b=0;b<g.length;b++)if(g[b]in v)return g[b];return g[0]}var A,P=S(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);d.disableDrag=function(){v&&P&&(A=v[P],v[P]="none")},d.enableDrag=function(){v&&P&&(v[P]=A)};var L=S(["transform","WebkitTransform"]);d.setTransform=function(g,b){g.style[L]=b};var F=!1;try{var K=Object.defineProperty({},"passive",{get:function(){F=!0}});a.window.addEventListener("test",K,K),a.window.removeEventListener("test",K,K)}catch{F=!1}d.addEventListener=function(g,b,y,C){C===void 0&&(C={}),g.addEventListener(b,y,"passive"in C&&F?C:C.capture)},d.removeEventListener=function(g,b,y,C){C===void 0&&(C={}),g.removeEventListener(b,y,"passive"in C&&F?C:C.capture)};var re=function(g){g.preventDefault(),g.stopPropagation(),a.window.removeEventListener("click",re,!0)};function G(g){var b=g.userImage;return!!(b&&b.render&&b.render())&&(g.data.replace(new Uint8Array(b.data.buffer)),!0)}d.suppressClick=function(){a.window.addEventListener("click",re,!0),a.window.setTimeout(function(){a.window.removeEventListener("click",re,!0)},0)},d.mousePos=function(g,b){var y=g.getBoundingClientRect();return new a.Point(b.clientX-y.left-g.clientLeft,b.clientY-y.top-g.clientTop)},d.touchPos=function(g,b){for(var y=g.getBoundingClientRect(),C=[],U=0;U<b.length;U++)C.push(new a.Point(b[U].clientX-y.left-g.clientLeft,b[U].clientY-y.top-g.clientTop));return C},d.mouseButton=function(g){return a.window.InstallTrigger!==void 0&&g.button===2&&g.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:g.button},d.remove=function(g){g.parentNode&&g.parentNode.removeChild(g)};var H=function(g){function b(){g.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.isLoaded=function(){return this.loaded},b.prototype.setLoaded=function(y){if(this.loaded!==y&&(this.loaded=y,y)){for(var C=0,U=this.requestors;C<U.length;C+=1){var Y=U[C];this._notify(Y.ids,Y.callback)}this.requestors=[]}},b.prototype.getImage=function(y){return this.images[y]},b.prototype.addImage=function(y,C){this._validate(y,C)&&(this.images[y]=C)},b.prototype._validate=function(y,C){var U=!0;return this._validateStretch(C.stretchX,C.data&&C.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+y+'" has invalid "stretchX" value'))),U=!1),this._validateStretch(C.stretchY,C.data&&C.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+y+'" has invalid "stretchY" value'))),U=!1),this._validateContent(C.content,C)||(this.fire(new a.ErrorEvent(new Error('Image "'+y+'" has invalid "content" value'))),U=!1),U},b.prototype._validateStretch=function(y,C){if(!y)return!0;for(var U=0,Y=0,ee=y;Y<ee.length;Y+=1){var se=ee[Y];if(se[0]<U||se[1]<se[0]||C<se[1])return!1;U=se[1]}return!0},b.prototype._validateContent=function(y,C){return!(y&&(y.length!==4||y[0]<0||C.data.width<y[0]||y[1]<0||C.data.height<y[1]||y[2]<0||C.data.width<y[2]||y[3]<0||C.data.height<y[3]||y[2]<y[0]||y[3]<y[1]))},b.prototype.updateImage=function(y,C){C.version=this.images[y].version+1,this.images[y]=C,this.updatedImages[y]=!0},b.prototype.removeImage=function(y){var C=this.images[y];delete this.images[y],delete this.patterns[y],C.userImage&&C.userImage.onRemove&&C.userImage.onRemove()},b.prototype.listImages=function(){return Object.keys(this.images)},b.prototype.getImages=function(y,C){var U=!0;if(!this.isLoaded())for(var Y=0,ee=y;Y<ee.length;Y+=1)this.images[ee[Y]]||(U=!1);this.isLoaded()||U?this._notify(y,C):this.requestors.push({ids:y,callback:C})},b.prototype._notify=function(y,C){for(var U={},Y=0,ee=y;Y<ee.length;Y+=1){var se=ee[Y];this.images[se]||this.fire(new a.Event("styleimagemissing",{id:se}));var ve=this.images[se];ve?U[se]={data:ve.data.clone(),pixelRatio:ve.pixelRatio,sdf:ve.sdf,version:ve.version,stretchX:ve.stretchX,stretchY:ve.stretchY,content:ve.content,hasRenderCallback:!!(ve.userImage&&ve.userImage.render)}:a.warnOnce('Image "'+se+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}C(null,U)},b.prototype.getPixelSize=function(){var y=this.atlasImage;return{width:y.width,height:y.height}},b.prototype.getPattern=function(y){var C=this.patterns[y],U=this.getImage(y);if(!U)return null;if(C&&C.position.version===U.version)return C.position;if(C)C.position.version=U.version;else{var Y={w:U.data.width+2,h:U.data.height+2,x:0,y:0},ee=new a.ImagePosition(Y,U);this.patterns[y]={bin:Y,position:ee}}return this._updatePatternAtlas(),this.patterns[y].position},b.prototype.bind=function(y){var C=y.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(y,this.atlasImage,C.RGBA),this.atlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE)},b.prototype._updatePatternAtlas=function(){var y=[];for(var C in this.patterns)y.push(this.patterns[C].bin);var U=a.potpack(y),Y=U.w,ee=U.h,se=this.atlasImage;for(var ve in se.resize({width:Y||1,height:ee||1}),this.patterns){var Oe=this.patterns[ve].bin,He=Oe.x+1,Qe=Oe.y+1,Ze=this.images[ve].data,mt=Ze.width,ft=Ze.height;a.RGBAImage.copy(Ze,se,{x:0,y:0},{x:He,y:Qe},{width:mt,height:ft}),a.RGBAImage.copy(Ze,se,{x:0,y:ft-1},{x:He,y:Qe-1},{width:mt,height:1}),a.RGBAImage.copy(Ze,se,{x:0,y:0},{x:He,y:Qe+ft},{width:mt,height:1}),a.RGBAImage.copy(Ze,se,{x:mt-1,y:0},{x:He-1,y:Qe},{width:1,height:ft}),a.RGBAImage.copy(Ze,se,{x:0,y:0},{x:He+mt,y:Qe},{width:1,height:ft})}this.dirty=!0},b.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},b.prototype.dispatchRenderCallbacks=function(y){for(var C=0,U=y;C<U.length;C+=1){var Y=U[C];if(!this.callbackDispatchedThisFrame[Y]){this.callbackDispatchedThisFrame[Y]=!0;var ee=this.images[Y];G(ee)&&this.updateImage(Y,ee)}}},b}(a.Evented),B=z,$=z,N=1e20;function z(g,b,y,C,U,Y){this.fontSize=g||24,this.buffer=b===void 0?3:b,this.cutoff=C||.25,this.fontFamily=U||"sans-serif",this.fontWeight=Y||"normal",this.radius=y||8;var ee=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ee,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ee*ee),this.gridInner=new Float64Array(ee*ee),this.f=new Float64Array(ee),this.d=new Float64Array(ee),this.z=new Float64Array(ee+1),this.v=new Int16Array(ee),this.middle=Math.round(ee/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function X(g,b,y,C,U,Y,ee){for(var se=0;se<b;se++){for(var ve=0;ve<y;ve++)C[ve]=g[ve*b+se];for(te(C,U,Y,ee,y),ve=0;ve<y;ve++)g[ve*b+se]=U[ve]}for(ve=0;ve<y;ve++){for(se=0;se<b;se++)C[se]=g[ve*b+se];for(te(C,U,Y,ee,b),se=0;se<b;se++)g[ve*b+se]=Math.sqrt(U[se])}}function te(g,b,y,C,U){y[0]=0,C[0]=-N,C[1]=+N;for(var Y=1,ee=0;Y<U;Y++){for(var se=(g[Y]+Y*Y-(g[y[ee]]+y[ee]*y[ee]))/(2*Y-2*y[ee]);se<=C[ee];)ee--,se=(g[Y]+Y*Y-(g[y[ee]]+y[ee]*y[ee]))/(2*Y-2*y[ee]);y[++ee]=Y,C[ee]=se,C[ee+1]=+N}for(Y=0,ee=0;Y<U;Y++){for(;C[ee+1]<Y;)ee++;b[Y]=(Y-y[ee])*(Y-y[ee])+g[y[ee]]}}z.prototype.draw=function(g){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(g,this.buffer,this.middle);for(var b=this.ctx.getImageData(0,0,this.size,this.size),y=new Uint8ClampedArray(this.size*this.size),C=0;C<this.size*this.size;C++){var U=b.data[4*C+3]/255;this.gridOuter[C]=U===1?0:U===0?N:Math.pow(Math.max(0,.5-U),2),this.gridInner[C]=U===1?N:U===0?0:Math.pow(Math.max(0,U-.5),2)}for(X(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),X(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),C=0;C<this.size*this.size;C++)y[C]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[C]-this.gridInner[C])/this.radius+this.cutoff))));return y},B.default=$;var pe=function(g,b){this.requestManager=g,this.localIdeographFontFamily=b,this.entries={}};pe.prototype.setURL=function(g){this.url=g},pe.prototype.getGlyphs=function(g,b){var y=this,C=[];for(var U in g)for(var Y=0,ee=g[U];Y<ee.length;Y+=1)C.push({stack:U,id:ee[Y]});a.asyncAll(C,function(se,ve){var Oe=se.stack,He=se.id,Qe=y.entries[Oe];Qe||(Qe=y.entries[Oe]={glyphs:{},requests:{},ranges:{}});var Ze=Qe.glyphs[He];if(Ze===void 0){if(Ze=y._tinySDF(Qe,Oe,He))return Qe.glyphs[He]=Ze,void ve(null,{stack:Oe,id:He,glyph:Ze});var mt=Math.floor(He/256);if(256*mt>65535)ve(new Error("glyphs > 65535 not supported"));else if(Qe.ranges[mt])ve(null,{stack:Oe,id:He,glyph:Ze});else{var ft=Qe.requests[mt];ft||(ft=Qe.requests[mt]=[],pe.loadGlyphRange(Oe,mt,y.url,y.requestManager,function(xt,st){if(st){for(var wt in st)y._doesCharSupportLocalGlyph(+wt)||(Qe.glyphs[+wt]=st[+wt]);Qe.ranges[mt]=!0}for(var Lt=0,Nt=ft;Lt<Nt.length;Lt+=1)(0,Nt[Lt])(xt,st);delete Qe.requests[mt]})),ft.push(function(xt,st){xt?ve(xt):st&&ve(null,{stack:Oe,id:He,glyph:st[He]||null})})}}else ve(null,{stack:Oe,id:He,glyph:Ze})},function(se,ve){if(se)b(se);else if(ve){for(var Oe={},He=0,Qe=ve;He<Qe.length;He+=1){var Ze=Qe[He],mt=Ze.stack,ft=Ze.id,xt=Ze.glyph;(Oe[mt]||(Oe[mt]={}))[ft]=xt&&{id:xt.id,bitmap:xt.bitmap.clone(),metrics:xt.metrics}}b(null,Oe)}})},pe.prototype._doesCharSupportLocalGlyph=function(g){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](g)||a.isChar["Hangul Syllables"](g)||a.isChar.Hiragana(g)||a.isChar.Katakana(g))},pe.prototype._tinySDF=function(g,b,y){var C=this.localIdeographFontFamily;if(C&&this._doesCharSupportLocalGlyph(y)){var U=g.tinySDF;if(!U){var Y="400";/bold/i.test(b)?Y="900":/medium/i.test(b)?Y="500":/light/i.test(b)&&(Y="200"),U=g.tinySDF=new pe.TinySDF(24,3,8,.25,C,Y)}return{id:y,bitmap:new a.AlphaImage({width:30,height:30},U.draw(String.fromCharCode(y))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},pe.loadGlyphRange=function(g,b,y,C,U){var Y=256*b,ee=Y+255,se=C.transformRequest(C.normalizeGlyphsURL(y).replace("{fontstack}",g).replace("{range}",Y+"-"+ee),a.ResourceType.Glyphs);a.getArrayBuffer(se,function(ve,Oe){if(ve)U(ve);else if(Oe){for(var He={},Qe=0,Ze=a.parseGlyphPBF(Oe);Qe<Ze.length;Qe+=1){var mt=Ze[Qe];He[mt.id]=mt}U(null,He)}})},pe.TinySDF=B;var ke=function(){this.specification=a.styleSpec.light.position};ke.prototype.possiblyEvaluate=function(g,b){return a.sphericalToCartesian(g.expression.evaluate(b))},ke.prototype.interpolate=function(g,b,y){return{x:a.number(g.x,b.x,y),y:a.number(g.y,b.y,y),z:a.number(g.z,b.z,y)}};var Pe=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new ke,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),ge=function(g){function b(y){g.call(this),this._transitionable=new a.Transitionable(Pe),this.setLight(y),this._transitioning=this._transitionable.untransitioned()}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getLight=function(){return this._transitionable.serialize()},b.prototype.setLight=function(y,C){if(C===void 0&&(C={}),!this._validate(a.validateLight,y,C))for(var U in y){var Y=y[U];a.endsWith(U,"-transition")?this._transitionable.setTransition(U.slice(0,-11),Y):this._transitionable.setValue(U,Y)}},b.prototype.updateTransitions=function(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)},b.prototype.hasTransition=function(){return this._transitioning.hasTransition()},b.prototype.recalculate=function(y){this.properties=this._transitioning.possiblyEvaluate(y)},b.prototype._validate=function(y,C,U){return(!U||U.validate!==!1)&&a.emitValidationErrors(this,y.call(a.validateStyle,a.extend({value:C,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},b}(a.Evented),Ie=function(g,b){this.width=g,this.height=b,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ie.prototype.getDash=function(g,b){var y=g.join(",")+String(b);return this.dashEntry[y]||(this.dashEntry[y]=this.addDash(g,b)),this.dashEntry[y]},Ie.prototype.getDashRanges=function(g,b,y){var C=[],U=g.length%2==1?-g[g.length-1]*y:0,Y=g[0]*y,ee=!0;C.push({left:U,right:Y,isDash:ee,zeroLength:g[0]===0});for(var se=g[0],ve=1;ve<g.length;ve++){var Oe=g[ve];C.push({left:U=se*y,right:Y=(se+=Oe)*y,isDash:ee=!ee,zeroLength:Oe===0})}return C},Ie.prototype.addRoundDash=function(g,b,y){for(var C=b/2,U=-y;U<=y;U++)for(var Y=this.width*(this.nextRow+y+U),ee=0,se=g[ee],ve=0;ve<this.width;ve++){ve/se.right>1&&(se=g[++ee]);var Oe=Math.abs(ve-se.left),He=Math.abs(ve-se.right),Qe=Math.min(Oe,He),Ze=void 0,mt=U/y*(C+1);if(se.isDash){var ft=C-Math.abs(mt);Ze=Math.sqrt(Qe*Qe+ft*ft)}else Ze=C-Math.sqrt(Qe*Qe+mt*mt);this.data[Y+ve]=Math.max(0,Math.min(255,Ze+128))}},Ie.prototype.addRegularDash=function(g){for(var b=g.length-1;b>=0;--b){var y=g[b],C=g[b+1];y.zeroLength?g.splice(b,1):C&&C.isDash===y.isDash&&(C.left=y.left,g.splice(b,1))}var U=g[0],Y=g[g.length-1];U.isDash===Y.isDash&&(U.left=Y.left-this.width,Y.right=U.right+this.width);for(var ee=this.width*this.nextRow,se=0,ve=g[se],Oe=0;Oe<this.width;Oe++){Oe/ve.right>1&&(ve=g[++se]);var He=Math.abs(Oe-ve.left),Qe=Math.abs(Oe-ve.right),Ze=Math.min(He,Qe);this.data[ee+Oe]=Math.max(0,Math.min(255,(ve.isDash?Ze:-Ze)+128))}},Ie.prototype.addDash=function(g,b){var y=b?7:0,C=2*y+1;if(this.nextRow+C>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var U=0,Y=0;Y<g.length;Y++)U+=g[Y];if(U!==0){var ee=this.width/U,se=this.getDashRanges(g,this.width,ee);b?this.addRoundDash(se,ee,y):this.addRegularDash(se)}var ve={y:(this.nextRow+y+.5)/this.height,height:2*y/this.height,width:U};return this.nextRow+=C,this.dirty=!0,ve},Ie.prototype.bind=function(g){var b=g.gl;this.texture?(b.bindTexture(b.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,b.texSubImage2D(b.TEXTURE_2D,0,0,0,this.width,this.height,b.ALPHA,b.UNSIGNED_BYTE,this.data))):(this.texture=b.createTexture(),b.bindTexture(b.TEXTURE_2D,this.texture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texImage2D(b.TEXTURE_2D,0,b.ALPHA,this.width,this.height,0,b.ALPHA,b.UNSIGNED_BYTE,this.data))};var Ne=function g(b,y){this.workerPool=b,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var C=this.workerPool.acquire(this.id),U=0;U<C.length;U++){var Y=new g.Actor(C[U],y,this.id);Y.name="Worker "+U,this.actors.push(Y)}};function lt(g,b,y){var C=function(U,Y){if(U)return y(U);if(Y){var ee=a.pick(a.extend(Y,g),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Y.vector_layers&&(ee.vectorLayers=Y.vector_layers,ee.vectorLayerIds=ee.vectorLayers.map(function(se){return se.id})),ee.tiles=b.canonicalizeTileset(ee,g.url),y(null,ee)}};return g.url?a.getJSON(b.transformRequest(b.normalizeSourceURL(g.url),a.ResourceType.Source),C):a.browser.frame(function(){return C(null,g)})}Ne.prototype.broadcast=function(g,b,y){a.asyncAll(this.actors,function(C,U){C.send(g,b,U)},y=y||function(){})},Ne.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Ne.prototype.remove=function(){this.actors.forEach(function(g){g.remove()}),this.actors=[],this.workerPool.release(this.id)},Ne.Actor=a.Actor;var it=function(g,b,y){this.bounds=a.LngLatBounds.convert(this.validateBounds(g)),this.minzoom=b||0,this.maxzoom=y||24};it.prototype.validateBounds=function(g){return Array.isArray(g)&&g.length===4?[Math.max(-180,g[0]),Math.max(-90,g[1]),Math.min(180,g[2]),Math.min(90,g[3])]:[-180,-90,180,90]},it.prototype.contains=function(g){var b=Math.pow(2,g.z),y=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*b),C=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*b),U=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*b),Y=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*b);return g.x>=y&&g.x<U&&g.y>=C&&g.y<Y};var Rt=function(g){function b(y,C,U,Y){if(g.call(this),this.id=y,this.dispatcher=U,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(C,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},C),this._collectResourceTiming=C.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Y)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.load=function(){var y=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=lt(this._options,this.map._requestManager,function(C,U){y._tileJSONRequest=null,y._loaded=!0,C?y.fire(new a.ErrorEvent(C)):U&&(a.extend(y,U),U.bounds&&(y.tileBounds=new it(U.bounds,y.minzoom,y.maxzoom)),a.postTurnstileEvent(U.tiles,y.map._requestManager._customAccessToken),a.postMapLoadEvent(U.tiles,y.map._getMapId(),y.map._requestManager._skuToken,y.map._requestManager._customAccessToken),y.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),y.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},b.prototype.loaded=function(){return this._loaded},b.prototype.hasTile=function(y){return!this.tileBounds||this.tileBounds.contains(y.canonical)},b.prototype.onAdd=function(y){this.map=y,this.load()},b.prototype.setSourceProperty=function(y){this._tileJSONRequest&&this._tileJSONRequest.cancel(),y(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},b.prototype.setTiles=function(y){var C=this;return this.setSourceProperty(function(){C._options.tiles=y}),this},b.prototype.setUrl=function(y){var C=this;return this.setSourceProperty(function(){C.url=y,C._options.url=y}),this},b.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},b.prototype.serialize=function(){return a.extend({},this._options)},b.prototype.loadTile=function(y,C){var U=this.map._requestManager.normalizeTileURL(y.tileID.canonical.url(this.tiles,this.scheme)),Y={request:this.map._requestManager.transformRequest(U,a.ResourceType.Tile),uid:y.uid,tileID:y.tileID,zoom:y.tileID.overscaledZ,tileSize:this.tileSize*y.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function ee(se,ve){return delete y.request,y.aborted?C(null):se&&se.status!==404?C(se):(ve&&ve.resourceTiming&&(y.resourceTiming=ve.resourceTiming),this.map._refreshExpiredTiles&&ve&&y.setExpiryData(ve),y.loadVectorData(ve,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),C(null),void(y.reloadCallback&&(this.loadTile(y,y.reloadCallback),y.reloadCallback=null)))}Y.request.collectResourceTiming=this._collectResourceTiming,y.actor&&y.state!=="expired"?y.state==="loading"?y.reloadCallback=C:y.request=y.actor.send("reloadTile",Y,ee.bind(this)):(y.actor=this.dispatcher.getActor(),y.request=y.actor.send("loadTile",Y,ee.bind(this)))},b.prototype.abortTile=function(y){y.request&&(y.request.cancel(),delete y.request),y.actor&&y.actor.send("abortTile",{uid:y.uid,type:this.type,source:this.id},void 0)},b.prototype.unloadTile=function(y){y.unloadVectorData(),y.actor&&y.actor.send("removeTile",{uid:y.uid,type:this.type,source:this.id},void 0)},b.prototype.hasTransition=function(){return!1},b}(a.Evented),St=function(g){function b(y,C,U,Y){g.call(this),this.id=y,this.dispatcher=U,this.setEventedParent(Y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},C),a.extend(this,a.pick(C,["url","scheme","tileSize"]))}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.load=function(){var y=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=lt(this._options,this.map._requestManager,function(C,U){y._tileJSONRequest=null,y._loaded=!0,C?y.fire(new a.ErrorEvent(C)):U&&(a.extend(y,U),U.bounds&&(y.tileBounds=new it(U.bounds,y.minzoom,y.maxzoom)),a.postTurnstileEvent(U.tiles),a.postMapLoadEvent(U.tiles,y.map._getMapId(),y.map._requestManager._skuToken),y.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),y.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},b.prototype.loaded=function(){return this._loaded},b.prototype.onAdd=function(y){this.map=y,this.load()},b.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},b.prototype.serialize=function(){return a.extend({},this._options)},b.prototype.hasTile=function(y){return!this.tileBounds||this.tileBounds.contains(y.canonical)},b.prototype.loadTile=function(y,C){var U=this,Y=this.map._requestManager.normalizeTileURL(y.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);y.request=a.getImage(this.map._requestManager.transformRequest(Y,a.ResourceType.Tile),function(ee,se){if(delete y.request,y.aborted)y.state="unloaded",C(null);else if(ee)y.state="errored",C(ee);else if(se){U.map._refreshExpiredTiles&&y.setExpiryData(se),delete se.cacheControl,delete se.expires;var ve=U.map.painter.context,Oe=ve.gl;y.texture=U.map.painter.getTileTexture(se.width),y.texture?y.texture.update(se,{useMipmap:!0}):(y.texture=new a.Texture(ve,se,Oe.RGBA,{useMipmap:!0}),y.texture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE,Oe.LINEAR_MIPMAP_NEAREST),ve.extTextureFilterAnisotropic&&Oe.texParameterf(Oe.TEXTURE_2D,ve.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ve.extTextureFilterAnisotropicMax)),y.state="loaded",a.cacheEntryPossiblyAdded(U.dispatcher),C(null)}})},b.prototype.abortTile=function(y,C){y.request&&(y.request.cancel(),delete y.request),C()},b.prototype.unloadTile=function(y,C){y.texture&&this.map.painter.saveTileTexture(y.texture),C()},b.prototype.hasTransition=function(){return!1},b}(a.Evented),Zt=function(g){function b(y,C,U,Y){g.call(this,y,C,U,Y),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},C),this.encoding=C.encoding||"mapbox"}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},b.prototype.loadTile=function(y,C){var U=this.map._requestManager.normalizeTileURL(y.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Y(ee,se){ee&&(y.state="errored",C(ee)),se&&(y.dem=se,y.needsHillshadePrepare=!0,y.state="loaded",C(null))}y.request=a.getImage(this.map._requestManager.transformRequest(U,a.ResourceType.Tile),function(ee,se){if(delete y.request,y.aborted)y.state="unloaded",C(null);else if(ee)y.state="errored",C(ee);else if(se){this.map._refreshExpiredTiles&&y.setExpiryData(se),delete se.cacheControl,delete se.expires;var ve=a.window.ImageBitmap&&se instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?se:a.browser.getImageData(se,1),Oe={uid:y.uid,coord:y.tileID,source:this.id,rawImageData:ve,encoding:this.encoding};y.actor&&y.state!=="expired"||(y.actor=this.dispatcher.getActor(),y.actor.send("loadDEMTile",Oe,Y.bind(this)))}}.bind(this)),y.neighboringTiles=this._getNeighboringTiles(y.tileID)},b.prototype._getNeighboringTiles=function(y){var C=y.canonical,U=Math.pow(2,C.z),Y=(C.x-1+U)%U,ee=C.x===0?y.wrap-1:y.wrap,se=(C.x+1+U)%U,ve=C.x+1===U?y.wrap+1:y.wrap,Oe={};return Oe[new a.OverscaledTileID(y.overscaledZ,ee,C.z,Y,C.y).key]={backfilled:!1},Oe[new a.OverscaledTileID(y.overscaledZ,ve,C.z,se,C.y).key]={backfilled:!1},C.y>0&&(Oe[new a.OverscaledTileID(y.overscaledZ,ee,C.z,Y,C.y-1).key]={backfilled:!1},Oe[new a.OverscaledTileID(y.overscaledZ,y.wrap,C.z,C.x,C.y-1).key]={backfilled:!1},Oe[new a.OverscaledTileID(y.overscaledZ,ve,C.z,se,C.y-1).key]={backfilled:!1}),C.y+1<U&&(Oe[new a.OverscaledTileID(y.overscaledZ,ee,C.z,Y,C.y+1).key]={backfilled:!1},Oe[new a.OverscaledTileID(y.overscaledZ,y.wrap,C.z,C.x,C.y+1).key]={backfilled:!1},Oe[new a.OverscaledTileID(y.overscaledZ,ve,C.z,se,C.y+1).key]={backfilled:!1}),Oe},b.prototype.unloadTile=function(y){y.demTexture&&this.map.painter.saveTileTexture(y.demTexture),y.fbo&&(y.fbo.destroy(),delete y.fbo),y.dem&&delete y.dem,delete y.neighboringTiles,y.state="unloaded",y.actor&&y.actor.send("removeDEMTile",{uid:y.uid,source:this.id})},b}(St),Kt=function(g){function b(y,C,U,Y){g.call(this),this.id=y,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=U.getActor(),this.setEventedParent(Y),this._data=C.data,this._options=a.extend({},C),this._collectResourceTiming=C.collectResourceTiming,this._resourceTiming=[],C.maxzoom!==void 0&&(this.maxzoom=C.maxzoom),C.type&&(this.type=C.type),C.attribution&&(this.attribution=C.attribution),this.promoteId=C.promoteId;var ee=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:C.cluster||!1,geojsonVtOptions:{buffer:(C.buffer!==void 0?C.buffer:128)*ee,tolerance:(C.tolerance!==void 0?C.tolerance:.375)*ee,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:C.lineMetrics||!1,generateId:C.generateId||!1},superclusterOptions:{maxZoom:C.clusterMaxZoom!==void 0?Math.min(C.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,C.clusterMinPoints||2),extent:a.EXTENT,radius:(C.clusterRadius||50)*ee,log:!1,generateId:C.generateId||!1},clusterProperties:C.clusterProperties,filter:C.filter},C.workerOptions)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.load=function(){var y=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(C){if(C)y.fire(new a.ErrorEvent(C));else{var U={dataType:"source",sourceDataType:"metadata"};y._collectResourceTiming&&y._resourceTiming&&y._resourceTiming.length>0&&(U.resourceTiming=y._resourceTiming,y._resourceTiming=[]),y.fire(new a.Event("data",U))}})},b.prototype.onAdd=function(y){this.map=y,this.load()},b.prototype.setData=function(y){var C=this;return this._data=y,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(U){if(U)C.fire(new a.ErrorEvent(U));else{var Y={dataType:"source",sourceDataType:"content"};C._collectResourceTiming&&C._resourceTiming&&C._resourceTiming.length>0&&(Y.resourceTiming=C._resourceTiming,C._resourceTiming=[]),C.fire(new a.Event("data",Y))}}),this},b.prototype.getClusterExpansionZoom=function(y,C){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:y,source:this.id},C),this},b.prototype.getClusterChildren=function(y,C){return this.actor.send("geojson.getClusterChildren",{clusterId:y,source:this.id},C),this},b.prototype.getClusterLeaves=function(y,C,U,Y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:y,limit:C,offset:U},Y),this},b.prototype._updateWorkerData=function(y){var C=this;this._loaded=!1;var U=a.extend({},this.workerOptions),Y=this._data;typeof Y=="string"?(U.request=this.map._requestManager.transformRequest(a.browser.resolveURL(Y),a.ResourceType.Source),U.request.collectResourceTiming=this._collectResourceTiming):U.data=JSON.stringify(Y),this.actor.send(this.type+".loadData",U,function(ee,se){C._removed||se&&se.abandoned||(C._loaded=!0,se&&se.resourceTiming&&se.resourceTiming[C.id]&&(C._resourceTiming=se.resourceTiming[C.id].slice(0)),C.actor.send(C.type+".coalesce",{source:U.source},null),y(ee))})},b.prototype.loaded=function(){return this._loaded},b.prototype.loadTile=function(y,C){var U=this,Y=y.actor?"reloadTile":"loadTile";y.actor=this.actor,y.request=this.actor.send(Y,{type:this.type,uid:y.uid,tileID:y.tileID,zoom:y.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(ee,se){return delete y.request,y.unloadVectorData(),y.aborted?C(null):ee?C(ee):(y.loadVectorData(se,U.map.painter,Y==="reloadTile"),C(null))})},b.prototype.abortTile=function(y){y.request&&(y.request.cancel(),delete y.request),y.aborted=!0},b.prototype.unloadTile=function(y){y.unloadVectorData(),this.actor.send("removeTile",{uid:y.uid,type:this.type,source:this.id})},b.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},b.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},b.prototype.hasTransition=function(){return!1},b}(a.Evented),Ge=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Ye=function(g){function b(y,C,U,Y){g.call(this),this.id=y,this.dispatcher=U,this.coordinates=C.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Y),this.options=C}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.load=function(y,C){var U=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(Y,ee){U._loaded=!0,Y?U.fire(new a.ErrorEvent(Y)):ee&&(U.image=ee,y&&(U.coordinates=y),C&&C(),U._finishLoading())})},b.prototype.loaded=function(){return this._loaded},b.prototype.updateImage=function(y){var C=this;return this.image&&y.url?(this.options.url=y.url,this.load(y.coordinates,function(){C.texture=null}),this):this},b.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},b.prototype.onAdd=function(y){this.map=y,this.load()},b.prototype.setCoordinates=function(y){var C=this;this.coordinates=y;var U=y.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(ee){for(var se=1/0,ve=1/0,Oe=-1/0,He=-1/0,Qe=0,Ze=ee;Qe<Ze.length;Qe+=1){var mt=Ze[Qe];se=Math.min(se,mt.x),ve=Math.min(ve,mt.y),Oe=Math.max(Oe,mt.x),He=Math.max(He,mt.y)}var ft=Math.max(Oe-se,He-ve),xt=Math.max(0,Math.floor(-Math.log(ft)/Math.LN2)),st=Math.pow(2,xt);return new a.CanonicalTileID(xt,Math.floor((se+Oe)/2*st),Math.floor((ve+He)/2*st))}(U),this.minzoom=this.maxzoom=this.tileID.z;var Y=U.map(function(ee){return C.tileID.getTilePoint(ee)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(Y[0].x,Y[0].y,0,0),this._boundsArray.emplaceBack(Y[1].x,Y[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(Y[3].x,Y[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(Y[2].x,Y[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},b.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var y=this.map.painter.context,C=y.gl;for(var U in this.boundsBuffer||(this.boundsBuffer=y.createVertexBuffer(this._boundsArray,Ge.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(y,this.image,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE)),this.tiles){var Y=this.tiles[U];Y.state!=="loaded"&&(Y.state="loaded",Y.texture=this.texture)}}},b.prototype.loadTile=function(y,C){this.tileID&&this.tileID.equals(y.tileID.canonical)?(this.tiles[String(y.tileID.wrap)]=y,y.buckets={},C(null)):(y.state="errored",C(null))},b.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},b.prototype.hasTransition=function(){return!1},b}(a.Evented),Dr=function(g){function b(y,C,U,Y){g.call(this,y,C,U,Y),this.roundZoom=!0,this.type="video",this.options=C}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.load=function(){var y=this;this._loaded=!1;var C=this.options;this.urls=[];for(var U=0,Y=C.urls;U<Y.length;U+=1)this.urls.push(this.map._requestManager.transformRequest(Y[U],a.ResourceType.Source).url);a.getVideo(this.urls,function(ee,se){y._loaded=!0,ee?y.fire(new a.ErrorEvent(ee)):se&&(y.video=se,y.video.loop=!0,y.video.addEventListener("playing",function(){y.map.triggerRepaint()}),y.map&&y.video.play(),y._finishLoading())})},b.prototype.pause=function(){this.video&&this.video.pause()},b.prototype.play=function(){this.video&&this.video.play()},b.prototype.seek=function(y){if(this.video){var C=this.video.seekable;y<C.start(0)||y>C.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+C.start(0)+" and "+C.end(0)+"-second mark."))):this.video.currentTime=y}},b.prototype.getVideo=function(){return this.video},b.prototype.onAdd=function(y){this.map||(this.map=y,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},b.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var y=this.map.painter.context,C=y.gl;for(var U in this.boundsBuffer||(this.boundsBuffer=y.createVertexBuffer(this._boundsArray,Ge.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.texSubImage2D(C.TEXTURE_2D,0,0,0,C.RGBA,C.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(y,this.video,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE)),this.tiles){var Y=this.tiles[U];Y.state!=="loaded"&&(Y.state="loaded",Y.texture=this.texture)}}},b.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},b.prototype.hasTransition=function(){return this.video&&!this.video.paused},b}(Ye),wr=function(g){function b(y,C,U,Y){g.call(this,y,C,U,Y),C.coordinates?Array.isArray(C.coordinates)&&C.coordinates.length===4&&!C.coordinates.some(function(ee){return!Array.isArray(ee)||ee.length!==2||ee.some(function(se){return typeof se!="number"})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+y,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+y,null,'missing required property "coordinates"'))),C.animate&&typeof C.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+y,null,'optional "animate" property must be a boolean value'))),C.canvas?typeof C.canvas=="string"||C.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+y,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+y,null,'missing required property "canvas"'))),this.options=C,this.animate=C.animate===void 0||C.animate}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},b.prototype.getCanvas=function(){return this.canvas},b.prototype.onAdd=function(y){this.map=y,this.load(),this.canvas&&this.animate&&this.play()},b.prototype.onRemove=function(){this.pause()},b.prototype.prepare=function(){var y=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,y=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,y=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var C=this.map.painter.context,U=C.gl;for(var Y in this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Ge.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(y||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(C,this.canvas,U.RGBA,{premultiply:!0}),this.tiles){var ee=this.tiles[Y];ee.state!=="loaded"&&(ee.state="loaded",ee.texture=this.texture)}}},b.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},b.prototype.hasTransition=function(){return this._playing},b.prototype._hasInvalidDimensions=function(){for(var y=0,C=[this.canvas.width,this.canvas.height];y<C.length;y+=1){var U=C[y];if(isNaN(U)||U<=0)return!0}return!1},b}(Ye),tr={vector:Rt,raster:St,"raster-dem":Zt,geojson:Kt,video:Dr,image:Ye,canvas:wr};function br(g,b){var y=a.identity([]);return a.translate(y,y,[1,1,0]),a.scale(y,y,[.5*g.width,.5*g.height,1]),a.multiply(y,y,g.calculatePosMatrix(b.toUnwrapped()))}function Bt(g,b,y,C,U,Y){var ee=function(xt,st,wt){if(xt)for(var Lt=0,Nt=xt;Lt<Nt.length;Lt+=1){var qt=st[Nt[Lt]];if(qt&&qt.source===wt&&qt.type==="fill-extrusion")return!0}else for(var Ht in st){var or=st[Ht];if(or.source===wt&&or.type==="fill-extrusion")return!0}return!1}(U&&U.layers,b,g.id),se=Y.maxPitchScaleFactor(),ve=g.tilesIn(C,se,ee);ve.sort(hr);for(var Oe=[],He=0,Qe=ve;He<Qe.length;He+=1){var Ze=Qe[He];Oe.push({wrappedTileID:Ze.tileID.wrapped().key,queryResults:Ze.tile.queryRenderedFeatures(b,y,g._state,Ze.queryGeometry,Ze.cameraQueryGeometry,Ze.scale,U,Y,se,br(g.transform,Ze.tileID))})}var mt=function(xt){for(var st={},wt={},Lt=0,Nt=xt;Lt<Nt.length;Lt+=1){var qt=Nt[Lt],Ht=qt.queryResults,or=qt.wrappedTileID,vr=wt[or]=wt[or]||{};for(var Pr in Ht)for(var Mr=Ht[Pr],tn=vr[Pr]=vr[Pr]||{},Sn=st[Pr]=st[Pr]||[],Ln=0,Bn=Mr;Ln<Bn.length;Ln+=1){var ji=Bn[Ln];tn[ji.featureIndex]||(tn[ji.featureIndex]=!0,Sn.push(ji))}}return st}(Oe);for(var ft in mt)mt[ft].forEach(function(xt){var st=xt.feature,wt=g.getFeatureState(st.layer["source-layer"],st.id);st.source=st.layer.source,st.layer["source-layer"]&&(st.sourceLayer=st.layer["source-layer"]),st.state=wt});return mt}function hr(g,b){var y=g.tileID,C=b.tileID;return y.overscaledZ-C.overscaledZ||y.canonical.y-C.canonical.y||y.wrap-C.wrap||y.canonical.x-C.canonical.x}var cr=function(g,b){this.max=g,this.onRemove=b,this.reset()};cr.prototype.reset=function(){for(var g in this.data)for(var b=0,y=this.data[g];b<y.length;b+=1){var C=y[b];C.timeout&&clearTimeout(C.timeout),this.onRemove(C.value)}return this.data={},this.order=[],this},cr.prototype.add=function(g,b,y){var C=this,U=g.wrapped().key;this.data[U]===void 0&&(this.data[U]=[]);var Y={value:b,timeout:void 0};if(y!==void 0&&(Y.timeout=setTimeout(function(){C.remove(g,Y)},y)),this.data[U].push(Y),this.order.push(U),this.order.length>this.max){var ee=this._getAndRemoveByKey(this.order[0]);ee&&this.onRemove(ee)}return this},cr.prototype.has=function(g){return g.wrapped().key in this.data},cr.prototype.getAndRemove=function(g){return this.has(g)?this._getAndRemoveByKey(g.wrapped().key):null},cr.prototype._getAndRemoveByKey=function(g){var b=this.data[g].shift();return b.timeout&&clearTimeout(b.timeout),this.data[g].length===0&&delete this.data[g],this.order.splice(this.order.indexOf(g),1),b.value},cr.prototype.getByKey=function(g){var b=this.data[g];return b?b[0].value:null},cr.prototype.get=function(g){return this.has(g)?this.data[g.wrapped().key][0].value:null},cr.prototype.remove=function(g,b){if(!this.has(g))return this;var y=g.wrapped().key,C=b===void 0?0:this.data[y].indexOf(b),U=this.data[y][C];return this.data[y].splice(C,1),U.timeout&&clearTimeout(U.timeout),this.data[y].length===0&&delete this.data[y],this.onRemove(U.value),this.order.splice(this.order.indexOf(y),1),this},cr.prototype.setMaxSize=function(g){for(this.max=g;this.order.length>this.max;){var b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this},cr.prototype.filter=function(g){var b=[];for(var y in this.data)for(var C=0,U=this.data[y];C<U.length;C+=1){var Y=U[C];g(Y.value)||b.push(Y)}for(var ee=0,se=b;ee<se.length;ee+=1){var ve=se[ee];this.remove(ve.value.tileID,ve)}};var Mn=function(g,b,y){this.context=g;var C=g.gl;this.buffer=C.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),g.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,b.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete b.arrayBuffer};Mn.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Mn.prototype.updateData=function(g){var b=this.context.gl;this.context.unbindVAO(),this.bind(),b.bufferSubData(b.ELEMENT_ARRAY_BUFFER,0,g.arrayBuffer)},Mn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Hn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Qn=function(g,b,y,C){this.length=b.length,this.attributes=y,this.itemSize=b.bytesPerElement,this.dynamicDraw=C,this.context=g;var U=g.gl;this.buffer=U.createBuffer(),g.bindVertexBuffer.set(this.buffer),U.bufferData(U.ARRAY_BUFFER,b.arrayBuffer,this.dynamicDraw?U.DYNAMIC_DRAW:U.STATIC_DRAW),this.dynamicDraw||delete b.arrayBuffer};Qn.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Qn.prototype.updateData=function(g){var b=this.context.gl;this.bind(),b.bufferSubData(b.ARRAY_BUFFER,0,g.arrayBuffer)},Qn.prototype.enableAttributes=function(g,b){for(var y=0;y<this.attributes.length;y++){var C=b.attributes[this.attributes[y].name];C!==void 0&&g.enableVertexAttribArray(C)}},Qn.prototype.setVertexAttribPointers=function(g,b,y){for(var C=0;C<this.attributes.length;C++){var U=this.attributes[C],Y=b.attributes[U.name];Y!==void 0&&g.vertexAttribPointer(Y,U.components,g[Hn[U.type]],!1,this.itemSize,U.offset+this.itemSize*(y||0))}},Qn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var an=function(g){this.gl=g.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};an.prototype.get=function(){return this.current},an.prototype.set=function(g){},an.prototype.getDefault=function(){return this.default},an.prototype.setDefault=function(){this.set(this.default)};var ki=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return a.Color.transparent},b.prototype.set=function(y){var C=this.current;(y.r!==C.r||y.g!==C.g||y.b!==C.b||y.a!==C.a||this.dirty)&&(this.gl.clearColor(y.r,y.g,y.b,y.a),this.current=y,this.dirty=!1)},b}(an),Xn=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return 1},b.prototype.set=function(y){(y!==this.current||this.dirty)&&(this.gl.clearDepth(y),this.current=y,this.dirty=!1)},b}(an),Li=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return 0},b.prototype.set=function(y){(y!==this.current||this.dirty)&&(this.gl.clearStencil(y),this.current=y,this.dirty=!1)},b}(an),Pi=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return[!0,!0,!0,!0]},b.prototype.set=function(y){var C=this.current;(y[0]!==C[0]||y[1]!==C[1]||y[2]!==C[2]||y[3]!==C[3]||this.dirty)&&(this.gl.colorMask(y[0],y[1],y[2],y[3]),this.current=y,this.dirty=!1)},b}(an),Yi=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return!0},b.prototype.set=function(y){(y!==this.current||this.dirty)&&(this.gl.depthMask(y),this.current=y,this.dirty=!1)},b}(an),gi=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return 255},b.prototype.set=function(y){(y!==this.current||this.dirty)&&(this.gl.stencilMask(y),this.current=y,this.dirty=!1)},b}(an),ea=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},b.prototype.set=function(y){var C=this.current;(y.func!==C.func||y.ref!==C.ref||y.mask!==C.mask||this.dirty)&&(this.gl.stencilFunc(y.func,y.ref,y.mask),this.current=y,this.dirty=!1)},b}(an),ya=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){var y=this.gl;return[y.KEEP,y.KEEP,y.KEEP]},b.prototype.set=function(y){var C=this.current;(y[0]!==C[0]||y[1]!==C[1]||y[2]!==C[2]||this.dirty)&&(this.gl.stencilOp(y[0],y[1],y[2]),this.current=y,this.dirty=!1)},b}(an),La=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return!1},b.prototype.set=function(y){if(y!==this.current||this.dirty){var C=this.gl;y?C.enable(C.STENCIL_TEST):C.disable(C.STENCIL_TEST),this.current=y,this.dirty=!1}},b}(an),Aa=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return[0,1]},b.prototype.set=function(y){var C=this.current;(y[0]!==C[0]||y[1]!==C[1]||this.dirty)&&(this.gl.depthRange(y[0],y[1]),this.current=y,this.dirty=!1)},b}(an),$a=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return!1},b.prototype.set=function(y){if(y!==this.current||this.dirty){var C=this.gl;y?C.enable(C.DEPTH_TEST):C.disable(C.DEPTH_TEST),this.current=y,this.dirty=!1}},b}(an),ka=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return this.gl.LESS},b.prototype.set=function(y){(y!==this.current||this.dirty)&&(this.gl.depthFunc(y),this.current=y,this.dirty=!1)},b}(an),Ka=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return!1},b.prototype.set=function(y){if(y!==this.current||this.dirty){var C=this.gl;y?C.enable(C.BLEND):C.disable(C.BLEND),this.current=y,this.dirty=!1}},b}(an),dr=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){var y=this.gl;return[y.ONE,y.ZERO]},b.prototype.set=function(y){var C=this.current;(y[0]!==C[0]||y[1]!==C[1]||this.dirty)&&(this.gl.blendFunc(y[0],y[1]),this.current=y,this.dirty=!1)},b}(an),Mt=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return a.Color.transparent},b.prototype.set=function(y){var C=this.current;(y.r!==C.r||y.g!==C.g||y.b!==C.b||y.a!==C.a||this.dirty)&&(this.gl.blendColor(y.r,y.g,y.b,y.a),this.current=y,this.dirty=!1)},b}(an),yr=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return this.gl.FUNC_ADD},b.prototype.set=function(y){(y!==this.current||this.dirty)&&(this.gl.blendEquation(y),this.current=y,this.dirty=!1)},b}(an),Xt=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return!1},b.prototype.set=function(y){if(y!==this.current||this.dirty){var C=this.gl;y?C.enable(C.CULL_FACE):C.disable(C.CULL_FACE),this.current=y,this.dirty=!1}},b}(an),Yt=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return this.gl.BACK},b.prototype.set=function(y){(y!==this.current||this.dirty)&&(this.gl.cullFace(y),this.current=y,this.dirty=!1)},b}(an),lr=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return this.gl.CCW},b.prototype.set=function(y){(y!==this.current||this.dirty)&&(this.gl.frontFace(y),this.current=y,this.dirty=!1)},b}(an),Qr=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return null},b.prototype.set=function(y){(y!==this.current||this.dirty)&&(this.gl.useProgram(y),this.current=y,this.dirty=!1)},b}(an),Xr=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return this.gl.TEXTURE0},b.prototype.set=function(y){(y!==this.current||this.dirty)&&(this.gl.activeTexture(y),this.current=y,this.dirty=!1)},b}(an),En=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){var y=this.gl;return[0,0,y.drawingBufferWidth,y.drawingBufferHeight]},b.prototype.set=function(y){var C=this.current;(y[0]!==C[0]||y[1]!==C[1]||y[2]!==C[2]||y[3]!==C[3]||this.dirty)&&(this.gl.viewport(y[0],y[1],y[2],y[3]),this.current=y,this.dirty=!1)},b}(an),Rn=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return null},b.prototype.set=function(y){if(y!==this.current||this.dirty){var C=this.gl;C.bindFramebuffer(C.FRAMEBUFFER,y),this.current=y,this.dirty=!1}},b}(an),rr=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return null},b.prototype.set=function(y){if(y!==this.current||this.dirty){var C=this.gl;C.bindRenderbuffer(C.RENDERBUFFER,y),this.current=y,this.dirty=!1}},b}(an),Lr=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return null},b.prototype.set=function(y){if(y!==this.current||this.dirty){var C=this.gl;C.bindTexture(C.TEXTURE_2D,y),this.current=y,this.dirty=!1}},b}(an),ur=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return null},b.prototype.set=function(y){if(y!==this.current||this.dirty){var C=this.gl;C.bindBuffer(C.ARRAY_BUFFER,y),this.current=y,this.dirty=!1}},b}(an),hn=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return null},b.prototype.set=function(y){var C=this.gl;C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,y),this.current=y,this.dirty=!1},b}(an),ti=function(g){function b(y){g.call(this,y),this.vao=y.extVertexArrayObject}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return null},b.prototype.set=function(y){this.vao&&(y!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(y),this.current=y,this.dirty=!1)},b}(an),Hr=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return 4},b.prototype.set=function(y){if(y!==this.current||this.dirty){var C=this.gl;C.pixelStorei(C.UNPACK_ALIGNMENT,y),this.current=y,this.dirty=!1}},b}(an),fi=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return!1},b.prototype.set=function(y){if(y!==this.current||this.dirty){var C=this.gl;C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,y),this.current=y,this.dirty=!1}},b}(an),Ci=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return!1},b.prototype.set=function(y){if(y!==this.current||this.dirty){var C=this.gl;C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,y),this.current=y,this.dirty=!1}},b}(an),zi=function(g){function b(y,C){g.call(this,y),this.context=y,this.parent=C}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getDefault=function(){return null},b}(an),Ae=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.setDirty=function(){this.dirty=!0},b.prototype.set=function(y){if(y!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var C=this.gl;C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,y,0),this.current=y,this.dirty=!1}},b}(zi),$e=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.set=function(y){if(y!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var C=this.gl;C.framebufferRenderbuffer(C.FRAMEBUFFER,C.DEPTH_ATTACHMENT,C.RENDERBUFFER,y),this.current=y,this.dirty=!1}},b}(zi),je=function(g,b,y,C){this.context=g,this.width=b,this.height=y;var U=this.framebuffer=g.gl.createFramebuffer();this.colorAttachment=new Ae(g,U),C&&(this.depthAttachment=new $e(g,U))};je.prototype.destroy=function(){var g=this.context.gl,b=this.colorAttachment.get();if(b&&g.deleteTexture(b),this.depthAttachment){var y=this.depthAttachment.get();y&&g.deleteRenderbuffer(y)}g.deleteFramebuffer(this.framebuffer)};var et=function(g,b,y){this.func=g,this.mask=b,this.range=y};et.ReadOnly=!1,et.ReadWrite=!0,et.disabled=new et(519,et.ReadOnly,[0,1]);var ht=function(g,b,y,C,U,Y){this.test=g,this.ref=b,this.mask=y,this.fail=C,this.depthFail=U,this.pass=Y};ht.disabled=new ht({func:519,mask:0},0,0,7680,7680,7680);var Ct=function(g,b,y){this.blendFunction=g,this.blendColor=b,this.mask=y};Ct.disabled=new Ct(Ct.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]),Ct.unblended=new Ct(Ct.Replace,a.Color.transparent,[!0,!0,!0,!0]),Ct.alphaBlended=new Ct([1,771],a.Color.transparent,[!0,!0,!0,!0]);var Dt=function(g,b,y){this.enable=g,this.mode=b,this.frontFace=y};Dt.disabled=new Dt(!1,1029,2305),Dt.backCCW=new Dt(!0,1029,2305);var Et=function(g){this.gl=g,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ki(this),this.clearDepth=new Xn(this),this.clearStencil=new Li(this),this.colorMask=new Pi(this),this.depthMask=new Yi(this),this.stencilMask=new gi(this),this.stencilFunc=new ea(this),this.stencilOp=new ya(this),this.stencilTest=new La(this),this.depthRange=new Aa(this),this.depthTest=new $a(this),this.depthFunc=new ka(this),this.blend=new Ka(this),this.blendFunc=new dr(this),this.blendColor=new Mt(this),this.blendEquation=new yr(this),this.cullFace=new Xt(this),this.cullFaceSide=new Yt(this),this.frontFace=new lr(this),this.program=new Qr(this),this.activeTexture=new Xr(this),this.viewport=new En(this),this.bindFramebuffer=new Rn(this),this.bindRenderbuffer=new rr(this),this.bindTexture=new Lr(this),this.bindVertexBuffer=new ur(this),this.bindElementBuffer=new hn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ti(this),this.pixelStoreUnpack=new Hr(this),this.pixelStoreUnpackPremultiplyAlpha=new fi(this),this.pixelStoreUnpackFlipY=new Ci(this),this.extTextureFilterAnisotropic=g.getExtension("EXT_texture_filter_anisotropic")||g.getExtension("MOZ_EXT_texture_filter_anisotropic")||g.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=g.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=g.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(g.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=g.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=g.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=g.getParameter(g.MAX_TEXTURE_SIZE)};Et.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Et.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Et.prototype.createIndexBuffer=function(g,b){return new Mn(this,g,b)},Et.prototype.createVertexBuffer=function(g,b,y){return new Qn(this,g,b,y)},Et.prototype.createRenderbuffer=function(g,b,y){var C=this.gl,U=C.createRenderbuffer();return this.bindRenderbuffer.set(U),C.renderbufferStorage(C.RENDERBUFFER,g,b,y),this.bindRenderbuffer.set(null),U},Et.prototype.createFramebuffer=function(g,b,y){return new je(this,g,b,y)},Et.prototype.clear=function(g){var b=g.color,y=g.depth,C=this.gl,U=0;b&&(U|=C.COLOR_BUFFER_BIT,this.clearColor.set(b),this.colorMask.set([!0,!0,!0,!0])),y!==void 0&&(U|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(y),this.depthMask.set(!0)),C.clear(U)},Et.prototype.setCullFace=function(g){g.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(g.mode),this.frontFace.set(g.frontFace))},Et.prototype.setDepthMode=function(g){g.func!==this.gl.ALWAYS||g.mask?(this.depthTest.set(!0),this.depthFunc.set(g.func),this.depthMask.set(g.mask),this.depthRange.set(g.range)):this.depthTest.set(!1)},Et.prototype.setStencilMode=function(g){g.test.func!==this.gl.ALWAYS||g.mask?(this.stencilTest.set(!0),this.stencilMask.set(g.mask),this.stencilOp.set([g.fail,g.depthFail,g.pass]),this.stencilFunc.set({func:g.test.func,ref:g.ref,mask:g.test.mask})):this.stencilTest.set(!1)},Et.prototype.setColorMode=function(g){a.deepEqual(g.blendFunction,Ct.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(g.blendFunction),this.blendColor.set(g.blendColor)),this.colorMask.set(g.mask)},Et.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Je=function(g){function b(y,C,U){var Y=this;g.call(this),this.id=y,this.dispatcher=U,this.on("data",function(ee){ee.dataType==="source"&&ee.sourceDataType==="metadata"&&(Y._sourceLoaded=!0),Y._sourceLoaded&&!Y._paused&&ee.dataType==="source"&&ee.sourceDataType==="content"&&(Y.reload(),Y.transform&&Y.update(Y.transform))}),this.on("error",function(){Y._sourceErrored=!0}),this._source=function(ee,se,ve,Oe){var He=new tr[se.type](ee,se,ve,Oe);if(He.id!==ee)throw new Error("Expected Source id to be "+ee+" instead of "+He.id);return a.bindAll(["load","abort","unload","serialize","prepare"],He),He}(y,C,U,this),this._tiles={},this._cache=new cr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.onAdd=function(y){this.map=y,this._maxTileCacheSize=y?y._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(y)},b.prototype.onRemove=function(y){this._source&&this._source.onRemove&&this._source.onRemove(y)},b.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var y in this._tiles){var C=this._tiles[y];if(C.state!=="loaded"&&C.state!=="errored")return!1}return!0},b.prototype.getSource=function(){return this._source},b.prototype.pause=function(){this._paused=!0},b.prototype.resume=function(){if(this._paused){var y=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,y&&this.reload(),this.transform&&this.update(this.transform)}},b.prototype._loadTile=function(y,C){return this._source.loadTile(y,C)},b.prototype._unloadTile=function(y){if(this._source.unloadTile)return this._source.unloadTile(y,function(){})},b.prototype._abortTile=function(y){if(this._source.abortTile)return this._source.abortTile(y,function(){})},b.prototype.serialize=function(){return this._source.serialize()},b.prototype.prepare=function(y){for(var C in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var U=this._tiles[C];U.upload(y),U.prepare(this.map.style.imageManager)}},b.prototype.getIds=function(){return a.values(this._tiles).map(function(y){return y.tileID}).sort(ye).map(function(y){return y.key})},b.prototype.getRenderableIds=function(y){var C=this,U=[];for(var Y in this._tiles)this._isIdRenderable(Y,y)&&U.push(this._tiles[Y]);return y?U.sort(function(ee,se){var ve=ee.tileID,Oe=se.tileID,He=new a.Point(ve.canonical.x,ve.canonical.y)._rotate(C.transform.angle),Qe=new a.Point(Oe.canonical.x,Oe.canonical.y)._rotate(C.transform.angle);return ve.overscaledZ-Oe.overscaledZ||Qe.y-He.y||Qe.x-He.x}).map(function(ee){return ee.tileID.key}):U.map(function(ee){return ee.tileID}).sort(ye).map(function(ee){return ee.key})},b.prototype.hasRenderableParent=function(y){var C=this.findLoadedParent(y,0);return!!C&&this._isIdRenderable(C.tileID.key)},b.prototype._isIdRenderable=function(y,C){return this._tiles[y]&&this._tiles[y].hasData()&&!this._coveredTiles[y]&&(C||!this._tiles[y].holdingForFade())},b.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var y in this._cache.reset(),this._tiles)this._tiles[y].state!=="errored"&&this._reloadTile(y,"reloading")},b.prototype._reloadTile=function(y,C){var U=this._tiles[y];U&&(U.state!=="loading"&&(U.state=C),this._loadTile(U,this._tileLoaded.bind(this,U,y,C)))},b.prototype._tileLoaded=function(y,C,U,Y){if(Y)return y.state="errored",void(Y.status!==404?this._source.fire(new a.ErrorEvent(Y,{tile:y})):this.update(this.transform));y.timeAdded=a.browser.now(),U==="expired"&&(y.refreshedUponExpiration=!0),this._setTileReloadTimer(C,y),this.getSource().type==="raster-dem"&&y.dem&&this._backfillDEM(y),this._state.initializeTileState(y,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:y,coord:y.tileID}))},b.prototype._backfillDEM=function(y){for(var C=this.getRenderableIds(),U=0;U<C.length;U++){var Y=C[U];if(y.neighboringTiles&&y.neighboringTiles[Y]){var ee=this.getTileByID(Y);se(y,ee),se(ee,y)}}function se(ve,Oe){ve.needsHillshadePrepare=!0;var He=Oe.tileID.canonical.x-ve.tileID.canonical.x,Qe=Oe.tileID.canonical.y-ve.tileID.canonical.y,Ze=Math.pow(2,ve.tileID.canonical.z),mt=Oe.tileID.key;He===0&&Qe===0||Math.abs(Qe)>1||(Math.abs(He)>1&&(Math.abs(He+Ze)===1?He+=Ze:Math.abs(He-Ze)===1&&(He-=Ze)),Oe.dem&&ve.dem&&(ve.dem.backfillBorder(Oe.dem,He,Qe),ve.neighboringTiles&&ve.neighboringTiles[mt]&&(ve.neighboringTiles[mt].backfilled=!0)))}},b.prototype.getTile=function(y){return this.getTileByID(y.key)},b.prototype.getTileByID=function(y){return this._tiles[y]},b.prototype._retainLoadedChildren=function(y,C,U,Y){for(var ee in this._tiles){var se=this._tiles[ee];if(!(Y[ee]||!se.hasData()||se.tileID.overscaledZ<=C||se.tileID.overscaledZ>U)){for(var ve=se.tileID;se&&se.tileID.overscaledZ>C+1;){var Oe=se.tileID.scaledTo(se.tileID.overscaledZ-1);(se=this._tiles[Oe.key])&&se.hasData()&&(ve=Oe)}for(var He=ve;He.overscaledZ>C;)if(y[(He=He.scaledTo(He.overscaledZ-1)).key]){Y[ve.key]=ve;break}}}},b.prototype.findLoadedParent=function(y,C){if(y.key in this._loadedParentTiles){var U=this._loadedParentTiles[y.key];return U&&U.tileID.overscaledZ>=C?U:null}for(var Y=y.overscaledZ-1;Y>=C;Y--){var ee=y.scaledTo(Y),se=this._getLoadedTile(ee);if(se)return se}},b.prototype._getLoadedTile=function(y){var C=this._tiles[y.key];return C&&C.hasData()?C:this._cache.getByKey(y.wrapped().key)},b.prototype.updateCacheSize=function(y){var C=Math.ceil(y.width/this._source.tileSize)+1,U=Math.ceil(y.height/this._source.tileSize)+1,Y=Math.floor(C*U*5),ee=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,Y):Y;this._cache.setMaxSize(ee)},b.prototype.handleWrapJump=function(y){var C=Math.round((y-(this._prevLng===void 0?y:this._prevLng))/360);if(this._prevLng=y,C){var U={};for(var Y in this._tiles){var ee=this._tiles[Y];ee.tileID=ee.tileID.unwrapTo(ee.tileID.wrap+C),U[ee.tileID.key]=ee}for(var se in this._tiles=U,this._timers)clearTimeout(this._timers[se]),delete this._timers[se];for(var ve in this._tiles)this._setTileReloadTimer(ve,this._tiles[ve])}},b.prototype.update=function(y){var C=this;if(this.transform=y,this._sourceLoaded&&!this._paused){var U;this.updateCacheSize(y),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?U=y.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(vr){return new a.OverscaledTileID(vr.canonical.z,vr.wrap,vr.canonical.z,vr.canonical.x,vr.canonical.y)}):(U=y.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(U=U.filter(function(vr){return C._source.hasTile(vr)}))):U=[];var Y=y.coveringZoomLevel(this._source),ee=Math.max(Y-b.maxOverzooming,this._source.minzoom),se=Math.max(Y+b.maxUnderzooming,this._source.minzoom),ve=this._updateRetainedTiles(U,Y);if(fe(this._source.type)){for(var Oe={},He={},Qe=0,Ze=Object.keys(ve);Qe<Ze.length;Qe+=1){var mt=Ze[Qe],ft=ve[mt],xt=this._tiles[mt];if(xt&&!(xt.fadeEndTime&&xt.fadeEndTime<=a.browser.now())){var st=this.findLoadedParent(ft,ee);st&&(this._addTile(st.tileID),Oe[st.tileID.key]=st.tileID),He[mt]=ft}}for(var wt in this._retainLoadedChildren(He,Y,se,ve),Oe)ve[wt]||(this._coveredTiles[wt]=!0,ve[wt]=Oe[wt])}for(var Lt in ve)this._tiles[Lt].clearFadeHold();for(var Nt=0,qt=a.keysDifference(this._tiles,ve);Nt<qt.length;Nt+=1){var Ht=qt[Nt],or=this._tiles[Ht];or.hasSymbolBuckets&&!or.holdingForFade()?or.setHoldDuration(this.map._fadeDuration):or.hasSymbolBuckets&&!or.symbolFadeFinished()||this._removeTile(Ht)}this._updateLoadedParentTileCache()}},b.prototype.releaseSymbolFadeTiles=function(){for(var y in this._tiles)this._tiles[y].holdingForFade()&&this._removeTile(y)},b.prototype._updateRetainedTiles=function(y,C){for(var U={},Y={},ee=Math.max(C-b.maxOverzooming,this._source.minzoom),se=Math.max(C+b.maxUnderzooming,this._source.minzoom),ve={},Oe=0,He=y;Oe<He.length;Oe+=1){var Qe=He[Oe],Ze=this._addTile(Qe);U[Qe.key]=Qe,Ze.hasData()||C<this._source.maxzoom&&(ve[Qe.key]=Qe)}this._retainLoadedChildren(ve,C,se,U);for(var mt=0,ft=y;mt<ft.length;mt+=1){var xt=ft[mt],st=this._tiles[xt.key];if(!st.hasData()){if(C+1>this._source.maxzoom){var wt=xt.children(this._source.maxzoom)[0],Lt=this.getTile(wt);if(Lt&&Lt.hasData()){U[wt.key]=wt;continue}}else{var Nt=xt.children(this._source.maxzoom);if(U[Nt[0].key]&&U[Nt[1].key]&&U[Nt[2].key]&&U[Nt[3].key])continue}for(var qt=st.wasRequested(),Ht=xt.overscaledZ-1;Ht>=ee;--Ht){var or=xt.scaledTo(Ht);if(Y[or.key]||(Y[or.key]=!0,!(st=this.getTile(or))&&qt&&(st=this._addTile(or)),st&&(U[or.key]=or,qt=st.wasRequested(),st.hasData())))break}}}return U},b.prototype._updateLoadedParentTileCache=function(){for(var y in this._loadedParentTiles={},this._tiles){for(var C=[],U=void 0,Y=this._tiles[y].tileID;Y.overscaledZ>0;){if(Y.key in this._loadedParentTiles){U=this._loadedParentTiles[Y.key];break}C.push(Y.key);var ee=Y.scaledTo(Y.overscaledZ-1);if(U=this._getLoadedTile(ee))break;Y=ee}for(var se=0,ve=C;se<ve.length;se+=1)this._loadedParentTiles[ve[se]]=U}},b.prototype._addTile=function(y){var C=this._tiles[y.key];if(C)return C;(C=this._cache.getAndRemove(y))&&(this._setTileReloadTimer(y.key,C),C.tileID=y,this._state.initializeTileState(C,this.map?this.map.painter:null),this._cacheTimers[y.key]&&(clearTimeout(this._cacheTimers[y.key]),delete this._cacheTimers[y.key],this._setTileReloadTimer(y.key,C)));var U=!!C;return U||(C=new a.Tile(y,this._source.tileSize*y.overscaleFactor()),this._loadTile(C,this._tileLoaded.bind(this,C,y.key,C.state))),C?(C.uses++,this._tiles[y.key]=C,U||this._source.fire(new a.Event("dataloading",{tile:C,coord:C.tileID,dataType:"source"})),C):null},b.prototype._setTileReloadTimer=function(y,C){var U=this;y in this._timers&&(clearTimeout(this._timers[y]),delete this._timers[y]);var Y=C.getExpiryTimeout();Y&&(this._timers[y]=setTimeout(function(){U._reloadTile(y,"expired"),delete U._timers[y]},Y))},b.prototype._removeTile=function(y){var C=this._tiles[y];C&&(C.uses--,delete this._tiles[y],this._timers[y]&&(clearTimeout(this._timers[y]),delete this._timers[y]),C.uses>0||(C.hasData()&&C.state!=="reloading"?this._cache.add(C.tileID,C,C.getExpiryTimeout()):(C.aborted=!0,this._abortTile(C),this._unloadTile(C))))},b.prototype.clearTiles=function(){for(var y in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(y);this._cache.reset()},b.prototype.tilesIn=function(y,C,U){var Y=this,ee=[],se=this.transform;if(!se)return ee;for(var ve=U?se.getCameraQueryGeometry(y):y,Oe=y.map(function(Ht){return se.pointCoordinate(Ht)}),He=ve.map(function(Ht){return se.pointCoordinate(Ht)}),Qe=this.getIds(),Ze=1/0,mt=1/0,ft=-1/0,xt=-1/0,st=0,wt=He;st<wt.length;st+=1){var Lt=wt[st];Ze=Math.min(Ze,Lt.x),mt=Math.min(mt,Lt.y),ft=Math.max(ft,Lt.x),xt=Math.max(xt,Lt.y)}for(var Nt=function(Ht){var or=Y._tiles[Qe[Ht]];if(!or.holdingForFade()){var vr=or.tileID,Pr=Math.pow(2,se.zoom-or.tileID.overscaledZ),Mr=C*or.queryPadding*a.EXTENT/or.tileSize/Pr,tn=[vr.getTilePoint(new a.MercatorCoordinate(Ze,mt)),vr.getTilePoint(new a.MercatorCoordinate(ft,xt))];if(tn[0].x-Mr<a.EXTENT&&tn[0].y-Mr<a.EXTENT&&tn[1].x+Mr>=0&&tn[1].y+Mr>=0){var Sn=Oe.map(function(Bn){return vr.getTilePoint(Bn)}),Ln=He.map(function(Bn){return vr.getTilePoint(Bn)});ee.push({tile:or,tileID:vr,queryGeometry:Sn,cameraQueryGeometry:Ln,scale:Pr})}}},qt=0;qt<Qe.length;qt++)Nt(qt);return ee},b.prototype.getVisibleCoordinates=function(y){for(var C=this,U=this.getRenderableIds(y).map(function(ve){return C._tiles[ve].tileID}),Y=0,ee=U;Y<ee.length;Y+=1){var se=ee[Y];se.posMatrix=this.transform.calculatePosMatrix(se.toUnwrapped())}return U},b.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(fe(this._source.type))for(var y in this._tiles){var C=this._tiles[y];if(C.fadeEndTime!==void 0&&C.fadeEndTime>=a.browser.now())return!0}return!1},b.prototype.setFeatureState=function(y,C,U){this._state.updateState(y=y||"_geojsonTileLayer",C,U)},b.prototype.removeFeatureState=function(y,C,U){this._state.removeFeatureState(y=y||"_geojsonTileLayer",C,U)},b.prototype.getFeatureState=function(y,C){return this._state.getState(y=y||"_geojsonTileLayer",C)},b.prototype.setDependencies=function(y,C,U){var Y=this._tiles[y];Y&&Y.setDependencies(C,U)},b.prototype.reloadTilesForDependencies=function(y,C){for(var U in this._tiles)this._tiles[U].hasDependency(y,C)&&this._reloadTile(U,"reloading");this._cache.filter(function(Y){return!Y.hasDependency(y,C)})},b}(a.Evented);function ye(g,b){var y=Math.abs(2*g.wrap)-+(g.wrap<0),C=Math.abs(2*b.wrap)-+(b.wrap<0);return g.overscaledZ-b.overscaledZ||C-y||b.canonical.y-g.canonical.y||b.canonical.x-g.canonical.x}function fe(g){return g==="raster"||g==="image"||g==="video"}function we(){return new a.window.Worker(cn.workerUrl)}Je.maxOverzooming=10,Je.maxUnderzooming=3;var Ce="mapboxgl_preloaded_worker_pool",Le=function(){this.active={}};Le.prototype.acquire=function(g){if(!this.workers)for(this.workers=[];this.workers.length<Le.workerCount;)this.workers.push(new we);return this.active[g]=!0,this.workers.slice()},Le.prototype.release=function(g){delete this.active[g],this.numActive()===0&&(this.workers.forEach(function(b){b.terminate()}),this.workers=null)},Le.prototype.isPreloaded=function(){return!!this.active[Ce]},Le.prototype.numActive=function(){return Object.keys(this.active).length};var nt,dt=Math.floor(a.browser.hardwareConcurrency/2);function ct(){return nt||(nt=new Le),nt}function Xe(g,b){var y={};for(var C in g)C!=="ref"&&(y[C]=g[C]);return a.refProperties.forEach(function(U){U in b&&(y[U]=b[U])}),y}function pt(g){g=g.slice();for(var b=Object.create(null),y=0;y<g.length;y++)b[g[y].id]=g[y];for(var C=0;C<g.length;C++)"ref"in g[C]&&(g[C]=Xe(g[C],b[g[C].ref]));return g}Le.workerCount=Math.max(Math.min(dt,6),1);var vt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ar(g,b,y){y.push({command:vt.addSource,args:[g,b[g]]})}function Vt(g,b,y){b.push({command:vt.removeSource,args:[g]}),y[g]=!0}function fr(g,b,y,C){Vt(g,y,C),ar(g,b,y)}function qr(g,b,y){var C;for(C in g[y])if(g[y].hasOwnProperty(C)&&C!=="data"&&!a.deepEqual(g[y][C],b[y][C]))return!1;for(C in b[y])if(b[y].hasOwnProperty(C)&&C!=="data"&&!a.deepEqual(g[y][C],b[y][C]))return!1;return!0}function Ar(g,b,y,C,U,Y){var ee;for(ee in b=b||{},g=g||{})g.hasOwnProperty(ee)&&(a.deepEqual(g[ee],b[ee])||y.push({command:Y,args:[C,ee,b[ee],U]}));for(ee in b)b.hasOwnProperty(ee)&&!g.hasOwnProperty(ee)&&(a.deepEqual(g[ee],b[ee])||y.push({command:Y,args:[C,ee,b[ee],U]}))}function ln(g){return g.id}function gn(g,b){return g[b.id]=b,g}var An=function(g,b){this.reset(g,b)};An.prototype.reset=function(g,b){this.points=g||[],this._distances=[0];for(var y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(b||0,.5*this.length),this.paddedLength=this.length-2*this.padding},An.prototype.lerp=function(g){if(this.points.length===1)return this.points[0];g=a.clamp(g,0,1);for(var b=1,y=this._distances[b],C=g*this.paddedLength+this.padding;y<C&&b<this._distances.length;)y=this._distances[++b];var U=b-1,Y=this._distances[U],ee=y-Y,se=ee>0?(C-Y)/ee:0;return this.points[U].mult(1-se).add(this.points[b].mult(se))};var wn=function(g,b,y){var C=this.boxCells=[],U=this.circleCells=[];this.xCellCount=Math.ceil(g/y),this.yCellCount=Math.ceil(b/y);for(var Y=0;Y<this.xCellCount*this.yCellCount;Y++)C.push([]),U.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=g,this.height=b,this.xScale=this.xCellCount/g,this.yScale=this.yCellCount/b,this.boxUid=0,this.circleUid=0};function Dn(g,b,y,C,U){var Y=a.create();return b?(a.scale(Y,Y,[1/U,1/U,1]),y||a.rotateZ(Y,Y,C.angle)):a.multiply(Y,C.labelPlaneMatrix,g),Y}function $n(g,b,y,C,U){if(b){var Y=a.clone(g);return a.scale(Y,Y,[U,U,1]),y||a.rotateZ(Y,Y,-C.angle),Y}return C.glCoordMatrix}function kn(g,b){var y=[g.x,g.y,0,1];$o(y,y,b);var C=y[3];return{point:new a.Point(y[0]/C,y[1]/C),signedDistanceFromCamera:C}}function Qa(g,b){return .5+g/b*.5}function Fn(g,b){var y=g[0]/g[3],C=g[1]/g[3];return y>=-b[0]&&y<=b[0]&&C>=-b[1]&&C<=b[1]}function oo(g,b,y,C,U,Y,ee,se){var ve=C?g.textSizeData:g.iconSizeData,Oe=a.evaluateSizeForZoom(ve,y.transform.zoom),He=[256/y.width*2+1,256/y.height*2+1],Qe=C?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;Qe.clear();for(var Ze=g.lineVertexArray,mt=C?g.text.placedSymbolArray:g.icon.placedSymbolArray,ft=y.transform.width/y.transform.height,xt=!1,st=0;st<mt.length;st++){var wt=mt.get(st);if(wt.hidden||wt.writingMode===a.WritingMode.vertical&&!xt)Bs(wt.numGlyphs,Qe);else{xt=!1;var Lt=[wt.anchorX,wt.anchorY,0,1];if(a.transformMat4(Lt,Lt,b),Fn(Lt,He)){var Nt=Qa(y.transform.cameraToCenterDistance,Lt[3]),qt=a.evaluateSizeForFeature(ve,Oe,wt),Ht=ee?qt/Nt:qt*Nt,or=new a.Point(wt.anchorX,wt.anchorY),vr=kn(or,U).point,Pr={},Mr=Oi(wt,Ht,!1,se,b,U,Y,g.glyphOffsetArray,Ze,Qe,vr,or,Pr,ft);xt=Mr.useVertical,(Mr.notEnoughRoom||xt||Mr.needsFlipping&&Oi(wt,Ht,!0,se,b,U,Y,g.glyphOffsetArray,Ze,Qe,vr,or,Pr,ft).notEnoughRoom)&&Bs(wt.numGlyphs,Qe)}else Bs(wt.numGlyphs,Qe)}}C?g.text.dynamicLayoutVertexBuffer.updateData(Qe):g.icon.dynamicLayoutVertexBuffer.updateData(Qe)}function Tl(g,b,y,C,U,Y,ee,se,ve,Oe,He){var Qe=se.glyphStartIndex+se.numGlyphs,Ze=se.lineStartIndex,mt=se.lineStartIndex+se.lineLength,ft=b.getoffsetX(se.glyphStartIndex),xt=b.getoffsetX(Qe-1),st=Ys(g*ft,y,C,U,Y,ee,se.segment,Ze,mt,ve,Oe,He);if(!st)return null;var wt=Ys(g*xt,y,C,U,Y,ee,se.segment,Ze,mt,ve,Oe,He);return wt?{first:st,last:wt}:null}function Ya(g,b,y,C){return g===a.WritingMode.horizontal&&Math.abs(y.y-b.y)>Math.abs(y.x-b.x)*C?{useVertical:!0}:(g===a.WritingMode.vertical?b.y<y.y:b.x>y.x)?{needsFlipping:!0}:null}function Oi(g,b,y,C,U,Y,ee,se,ve,Oe,He,Qe,Ze,mt){var ft,xt=b/24,st=g.lineOffsetX*xt,wt=g.lineOffsetY*xt;if(g.numGlyphs>1){var Lt=g.glyphStartIndex+g.numGlyphs,Nt=g.lineStartIndex,qt=g.lineStartIndex+g.lineLength,Ht=Tl(xt,se,st,wt,y,He,Qe,g,ve,Y,Ze);if(!Ht)return{notEnoughRoom:!0};var or=kn(Ht.first.point,ee).point,vr=kn(Ht.last.point,ee).point;if(C&&!y){var Pr=Ya(g.writingMode,or,vr,mt);if(Pr)return Pr}ft=[Ht.first];for(var Mr=g.glyphStartIndex+1;Mr<Lt-1;Mr++)ft.push(Ys(xt*se.getoffsetX(Mr),st,wt,y,He,Qe,g.segment,Nt,qt,ve,Y,Ze));ft.push(Ht.last)}else{if(C&&!y){var tn=kn(Qe,U).point,Sn=g.lineStartIndex+g.segment+1,Ln=new a.Point(ve.getx(Sn),ve.gety(Sn)),Bn=kn(Ln,U),ji=Bn.signedDistanceFromCamera>0?Bn.point:ku(Qe,Ln,tn,1,U),nn=Ya(g.writingMode,tn,ji,mt);if(nn)return nn}var Zn=Ys(xt*se.getoffsetX(g.glyphStartIndex),st,wt,y,He,Qe,g.segment,g.lineStartIndex,g.lineStartIndex+g.lineLength,ve,Y,Ze);if(!Zn)return{notEnoughRoom:!0};ft=[Zn]}for(var mi=0,pi=ft;mi<pi.length;mi+=1){var ci=pi[mi];a.addDynamicAttributes(Oe,ci.point,ci.angle)}return{}}function ku(g,b,y,C,U){var Y=kn(g.add(g.sub(b)._unit()),U).point,ee=y.sub(Y);return y.add(ee._mult(C/ee.mag()))}function Ys(g,b,y,C,U,Y,ee,se,ve,Oe,He,Qe){var Ze=C?g-b:g+b,mt=Ze>0?1:-1,ft=0;C&&(mt*=-1,ft=Math.PI),mt<0&&(ft+=Math.PI);for(var xt=mt>0?se+ee:se+ee+1,st=U,wt=U,Lt=0,Nt=0,qt=Math.abs(Ze),Ht=[];Lt+Nt<=qt;){if((xt+=mt)<se||xt>=ve)return null;if(wt=st,Ht.push(st),(st=Qe[xt])===void 0){var or=new a.Point(Oe.getx(xt),Oe.gety(xt)),vr=kn(or,He);if(vr.signedDistanceFromCamera>0)st=Qe[xt]=vr.point;else{var Pr=xt-mt;st=ku(Lt===0?Y:new a.Point(Oe.getx(Pr),Oe.gety(Pr)),or,wt,qt-Lt+1,He)}}Lt+=Nt,Nt=wt.dist(st)}var Mr=(qt-Lt)/Nt,tn=st.sub(wt),Sn=tn.mult(Mr)._add(wt);Sn._add(tn._unit()._perp()._mult(y*mt));var Ln=ft+Math.atan2(st.y-wt.y,st.x-wt.x);return Ht.push(Sn),{point:Sn,angle:Ln,path:Ht}}wn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},wn.prototype.insert=function(g,b,y,C,U){this._forEachCell(b,y,C,U,this._insertBoxCell,this.boxUid++),this.boxKeys.push(g),this.bboxes.push(b),this.bboxes.push(y),this.bboxes.push(C),this.bboxes.push(U)},wn.prototype.insertCircle=function(g,b,y,C){this._forEachCell(b-C,y-C,b+C,y+C,this._insertCircleCell,this.circleUid++),this.circleKeys.push(g),this.circles.push(b),this.circles.push(y),this.circles.push(C)},wn.prototype._insertBoxCell=function(g,b,y,C,U,Y){this.boxCells[U].push(Y)},wn.prototype._insertCircleCell=function(g,b,y,C,U,Y){this.circleCells[U].push(Y)},wn.prototype._query=function(g,b,y,C,U,Y){if(y<0||g>this.width||C<0||b>this.height)return!U&&[];var ee=[];if(g<=0&&b<=0&&this.width<=y&&this.height<=C){if(U)return!0;for(var se=0;se<this.boxKeys.length;se++)ee.push({key:this.boxKeys[se],x1:this.bboxes[4*se],y1:this.bboxes[4*se+1],x2:this.bboxes[4*se+2],y2:this.bboxes[4*se+3]});for(var ve=0;ve<this.circleKeys.length;ve++){var Oe=this.circles[3*ve],He=this.circles[3*ve+1],Qe=this.circles[3*ve+2];ee.push({key:this.circleKeys[ve],x1:Oe-Qe,y1:He-Qe,x2:Oe+Qe,y2:He+Qe})}return Y?ee.filter(Y):ee}return this._forEachCell(g,b,y,C,this._queryCell,ee,{hitTest:U,seenUids:{box:{},circle:{}}},Y),U?ee.length>0:ee},wn.prototype._queryCircle=function(g,b,y,C,U){var Y=g-y,ee=g+y,se=b-y,ve=b+y;if(ee<0||Y>this.width||ve<0||se>this.height)return!C&&[];var Oe=[];return this._forEachCell(Y,se,ee,ve,this._queryCellCircle,Oe,{hitTest:C,circle:{x:g,y:b,radius:y},seenUids:{box:{},circle:{}}},U),C?Oe.length>0:Oe},wn.prototype.query=function(g,b,y,C,U){return this._query(g,b,y,C,!1,U)},wn.prototype.hitTest=function(g,b,y,C,U){return this._query(g,b,y,C,!0,U)},wn.prototype.hitTestCircle=function(g,b,y,C){return this._queryCircle(g,b,y,!0,C)},wn.prototype._queryCell=function(g,b,y,C,U,Y,ee,se){var ve=ee.seenUids,Oe=this.boxCells[U];if(Oe!==null)for(var He=this.bboxes,Qe=0,Ze=Oe;Qe<Ze.length;Qe+=1){var mt=Ze[Qe];if(!ve.box[mt]){ve.box[mt]=!0;var ft=4*mt;if(g<=He[ft+2]&&b<=He[ft+3]&&y>=He[ft+0]&&C>=He[ft+1]&&(!se||se(this.boxKeys[mt]))){if(ee.hitTest)return Y.push(!0),!0;Y.push({key:this.boxKeys[mt],x1:He[ft],y1:He[ft+1],x2:He[ft+2],y2:He[ft+3]})}}}var xt=this.circleCells[U];if(xt!==null)for(var st=this.circles,wt=0,Lt=xt;wt<Lt.length;wt+=1){var Nt=Lt[wt];if(!ve.circle[Nt]){ve.circle[Nt]=!0;var qt=3*Nt;if(this._circleAndRectCollide(st[qt],st[qt+1],st[qt+2],g,b,y,C)&&(!se||se(this.circleKeys[Nt]))){if(ee.hitTest)return Y.push(!0),!0;var Ht=st[qt],or=st[qt+1],vr=st[qt+2];Y.push({key:this.circleKeys[Nt],x1:Ht-vr,y1:or-vr,x2:Ht+vr,y2:or+vr})}}}},wn.prototype._queryCellCircle=function(g,b,y,C,U,Y,ee,se){var ve=ee.circle,Oe=ee.seenUids,He=this.boxCells[U];if(He!==null)for(var Qe=this.bboxes,Ze=0,mt=He;Ze<mt.length;Ze+=1){var ft=mt[Ze];if(!Oe.box[ft]){Oe.box[ft]=!0;var xt=4*ft;if(this._circleAndRectCollide(ve.x,ve.y,ve.radius,Qe[xt+0],Qe[xt+1],Qe[xt+2],Qe[xt+3])&&(!se||se(this.boxKeys[ft])))return Y.push(!0),!0}}var st=this.circleCells[U];if(st!==null)for(var wt=this.circles,Lt=0,Nt=st;Lt<Nt.length;Lt+=1){var qt=Nt[Lt];if(!Oe.circle[qt]){Oe.circle[qt]=!0;var Ht=3*qt;if(this._circlesCollide(wt[Ht],wt[Ht+1],wt[Ht+2],ve.x,ve.y,ve.radius)&&(!se||se(this.circleKeys[qt])))return Y.push(!0),!0}}},wn.prototype._forEachCell=function(g,b,y,C,U,Y,ee,se){for(var ve=this._convertToXCellCoord(g),Oe=this._convertToYCellCoord(b),He=this._convertToXCellCoord(y),Qe=this._convertToYCellCoord(C),Ze=ve;Ze<=He;Ze++)for(var mt=Oe;mt<=Qe;mt++)if(U.call(this,g,b,y,C,this.xCellCount*mt+Ze,Y,ee,se))return},wn.prototype._convertToXCellCoord=function(g){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(g*this.xScale)))},wn.prototype._convertToYCellCoord=function(g){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(g*this.yScale)))},wn.prototype._circlesCollide=function(g,b,y,C,U,Y){var ee=C-g,se=U-b,ve=y+Y;return ve*ve>ee*ee+se*se},wn.prototype._circleAndRectCollide=function(g,b,y,C,U,Y,ee){var se=(Y-C)/2,ve=Math.abs(g-(C+se));if(ve>se+y)return!1;var Oe=(ee-U)/2,He=Math.abs(b-(U+Oe));if(He>Oe+y)return!1;if(ve<=se||He<=Oe)return!0;var Qe=ve-se,Ze=He-Oe;return Qe*Qe+Ze*Ze<=y*y};var co=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Bs(g,b){for(var y=0;y<g;y++){var C=b.length;b.resize(C+4),b.float32.set(co,3*C)}}function $o(g,b,y){var C=b[0],U=b[1];return g[0]=y[0]*C+y[4]*U+y[12],g[1]=y[1]*C+y[5]*U+y[13],g[3]=y[3]*C+y[7]*U+y[15],g}var Pa=function(g,b,y){b===void 0&&(b=new wn(g.width+200,g.height+200,25)),y===void 0&&(y=new wn(g.width+200,g.height+200,25)),this.transform=g,this.grid=b,this.ignoredGrid=y,this.pitchfactor=Math.cos(g._pitch)*g.cameraToCenterDistance,this.screenRightBoundary=g.width+100,this.screenBottomBoundary=g.height+100,this.gridRightBoundary=g.width+200,this.gridBottomBoundary=g.height+200};function Ro(g,b,y){return b*(a.EXTENT/(g.tileSize*Math.pow(2,y-g.tileID.overscaledZ)))}Pa.prototype.placeCollisionBox=function(g,b,y,C,U){var Y=this.projectAndGetPerspectiveRatio(C,g.anchorPointX,g.anchorPointY),ee=y*Y.perspectiveRatio,se=g.x1*ee+Y.point.x,ve=g.y1*ee+Y.point.y,Oe=g.x2*ee+Y.point.x,He=g.y2*ee+Y.point.y;return!this.isInsideGrid(se,ve,Oe,He)||!b&&this.grid.hitTest(se,ve,Oe,He,U)?{box:[],offscreen:!1}:{box:[se,ve,Oe,He],offscreen:this.isOffscreen(se,ve,Oe,He)}},Pa.prototype.placeCollisionCircles=function(g,b,y,C,U,Y,ee,se,ve,Oe,He,Qe,Ze){var mt=[],ft=new a.Point(b.anchorX,b.anchorY),xt=kn(ft,Y),st=Qa(this.transform.cameraToCenterDistance,xt.signedDistanceFromCamera),wt=(Oe?U/st:U*st)/a.ONE_EM,Lt=kn(ft,ee).point,Nt=Tl(wt,C,b.lineOffsetX*wt,b.lineOffsetY*wt,!1,Lt,ft,b,y,ee,{}),qt=!1,Ht=!1,or=!0;if(Nt){for(var vr=.5*Qe*st+Ze,Pr=new a.Point(-100,-100),Mr=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),tn=new An,Sn=Nt.first,Ln=Nt.last,Bn=[],ji=Sn.path.length-1;ji>=1;ji--)Bn.push(Sn.path[ji]);for(var nn=1;nn<Ln.path.length;nn++)Bn.push(Ln.path[nn]);var Zn=2.5*vr;if(se){var mi=Bn.map(function(ns){return kn(ns,se)});Bn=mi.some(function(ns){return ns.signedDistanceFromCamera<=0})?[]:mi.map(function(ns){return ns.point})}var pi=[];if(Bn.length>0){for(var ci=Bn[0].clone(),_i=Bn[0].clone(),ai=1;ai<Bn.length;ai++)ci.x=Math.min(ci.x,Bn[ai].x),ci.y=Math.min(ci.y,Bn[ai].y),_i.x=Math.max(_i.x,Bn[ai].x),_i.y=Math.max(_i.y,Bn[ai].y);pi=ci.x>=Pr.x&&_i.x<=Mr.x&&ci.y>=Pr.y&&_i.y<=Mr.y?[Bn]:_i.x<Pr.x||ci.x>Mr.x||_i.y<Pr.y||ci.y>Mr.y?[]:a.clipLine([Bn],Pr.x,Pr.y,Mr.x,Mr.y)}for(var xn=0,ca=pi;xn<ca.length;xn+=1){var Oa;tn.reset(ca[xn],.25*vr),Oa=tn.length<=.5*vr?1:Math.ceil(tn.paddedLength/Zn)+1;for(var va=0;va<Oa;va++){var Ha=va/Math.max(Oa-1,1),yo=tn.lerp(Ha),_a=yo.x+100,ys=yo.y+100;mt.push(_a,ys,vr,0);var ho=_a-vr,fa=ys-vr,vs=_a+vr,mu=ys+vr;if(or=or&&this.isOffscreen(ho,fa,vs,mu),Ht=Ht||this.isInsideGrid(ho,fa,vs,mu),!g&&this.grid.hitTestCircle(_a,ys,vr,He)&&(qt=!0,!ve))return{circles:[],offscreen:!1,collisionDetected:qt}}}}return{circles:!ve&&qt||!Ht?[]:mt,offscreen:or,collisionDetected:qt}},Pa.prototype.queryRenderedSymbols=function(g){if(g.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var b=[],y=1/0,C=1/0,U=-1/0,Y=-1/0,ee=0,se=g;ee<se.length;ee+=1){var ve=se[ee],Oe=new a.Point(ve.x+100,ve.y+100);y=Math.min(y,Oe.x),C=Math.min(C,Oe.y),U=Math.max(U,Oe.x),Y=Math.max(Y,Oe.y),b.push(Oe)}for(var He={},Qe={},Ze=0,mt=this.grid.query(y,C,U,Y).concat(this.ignoredGrid.query(y,C,U,Y));Ze<mt.length;Ze+=1){var ft=mt[Ze],xt=ft.key;if(He[xt.bucketInstanceId]===void 0&&(He[xt.bucketInstanceId]={}),!He[xt.bucketInstanceId][xt.featureIndex]){var st=[new a.Point(ft.x1,ft.y1),new a.Point(ft.x2,ft.y1),new a.Point(ft.x2,ft.y2),new a.Point(ft.x1,ft.y2)];a.polygonIntersectsPolygon(b,st)&&(He[xt.bucketInstanceId][xt.featureIndex]=!0,Qe[xt.bucketInstanceId]===void 0&&(Qe[xt.bucketInstanceId]=[]),Qe[xt.bucketInstanceId].push(xt.featureIndex))}}return Qe},Pa.prototype.insertCollisionBox=function(g,b,y,C,U){(b?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:C,collisionGroupID:U},g[0],g[1],g[2],g[3])},Pa.prototype.insertCollisionCircles=function(g,b,y,C,U){for(var Y=b?this.ignoredGrid:this.grid,ee={bucketInstanceId:y,featureIndex:C,collisionGroupID:U},se=0;se<g.length;se+=4)Y.insertCircle(ee,g[se],g[se+1],g[se+2])},Pa.prototype.projectAndGetPerspectiveRatio=function(g,b,y){var C=[b,y,0,1];return $o(C,C,g),{point:new a.Point((C[0]/C[3]+1)/2*this.transform.width+100,(-C[1]/C[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C[3]*.5}},Pa.prototype.isOffscreen=function(g,b,y,C){return y<100||g>=this.screenRightBoundary||C<100||b>this.screenBottomBoundary},Pa.prototype.isInsideGrid=function(g,b,y,C){return y>=0&&g<this.gridRightBoundary&&C>=0&&b<this.gridBottomBoundary},Pa.prototype.getViewportMatrix=function(){var g=a.identity([]);return a.translate(g,g,[-100,-100,0]),g};var mo=function(g,b,y,C){this.opacity=g?Math.max(0,Math.min(1,g.opacity+(g.placed?b:-b))):C&&y?1:0,this.placed=y};mo.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Ko=function(g,b,y,C,U){this.text=new mo(g?g.text:null,b,y,U),this.icon=new mo(g?g.icon:null,b,C,U)};Ko.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Fs=function(g,b,y){this.text=g,this.icon=b,this.skipFade=y},jf=function(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]},bo=function(g,b,y,C,U){this.bucketInstanceId=g,this.featureIndex=b,this.sourceLayerIndex=y,this.bucketIndex=C,this.tileID=U},Al=function(g){this.crossSourceCollisions=g,this.maxGroupID=0,this.collisionGroups={}};function No(g,b,y,C,U){var Y=a.getAnchorAlignment(g),ee=-(Y.horizontalAlign-.5)*b,se=-(Y.verticalAlign-.5)*y,ve=a.evaluateVariableOffset(g,C);return new a.Point(ee+ve[0]*U,se+ve[1]*U)}function Ia(g,b,y,C,U,Y){var ee=g.x1,se=g.x2,ve=g.y1,Oe=g.y2,He=g.anchorPointX,Qe=g.anchorPointY,Ze=new a.Point(b,y);return C&&Ze._rotate(U?Y:-Y),{x1:ee+Ze.x,y1:ve+Ze.y,x2:se+Ze.x,y2:Oe+Ze.y,anchorPointX:He,anchorPointY:Qe}}Al.prototype.get=function(g){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[g]){var b=++this.maxGroupID;this.collisionGroups[g]={ID:b,predicate:function(y){return y.collisionGroupID===b}}}return this.collisionGroups[g]};var Ga=function(g,b,y,C){this.transform=g.clone(),this.collisionIndex=new Pa(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=b,this.retainedQueryData={},this.collisionGroups=new Al(y),this.collisionCircleArrays={},this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}};function Us(g,b,y,C,U){g.emplaceBack(b?1:0,y?1:0,C||0,U||0),g.emplaceBack(b?1:0,y?1:0,C||0,U||0),g.emplaceBack(b?1:0,y?1:0,C||0,U||0),g.emplaceBack(b?1:0,y?1:0,C||0,U||0)}Ga.prototype.getBucketParts=function(g,b,y,C){var U=y.getBucket(b),Y=y.latestFeatureIndex;if(U&&Y&&b.id===U.layerIds[0]){var ee=y.collisionBoxArray,se=U.layers[0].layout,ve=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),Oe=y.tileSize/a.EXTENT,He=this.transform.calculatePosMatrix(y.tileID.toUnwrapped()),Qe=se.get("text-pitch-alignment")==="map",Ze=se.get("text-rotation-alignment")==="map",mt=Ro(y,1,this.transform.zoom),ft=Dn(He,Qe,Ze,this.transform,mt),xt=null;if(Qe){var st=$n(He,Qe,Ze,this.transform,mt);xt=a.multiply([],this.transform.labelPlaneMatrix,st)}this.retainedQueryData[U.bucketInstanceId]=new bo(U.bucketInstanceId,Y,U.sourceLayerIndex,U.index,y.tileID);var wt={bucket:U,layout:se,posMatrix:He,textLabelPlaneMatrix:ft,labelToScreenMatrix:xt,scale:ve,textPixelRatio:Oe,holdingForFade:y.holdingForFade(),collisionBoxArray:ee,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(U.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(U.sourceID)};if(C)for(var Lt=0,Nt=U.sortKeyRanges;Lt<Nt.length;Lt+=1){var qt=Nt[Lt];g.push({sortKey:qt.sortKey,symbolInstanceStart:qt.symbolInstanceStart,symbolInstanceEnd:qt.symbolInstanceEnd,parameters:wt})}else g.push({symbolInstanceStart:0,symbolInstanceEnd:U.symbolInstances.length,parameters:wt})}},Ga.prototype.attemptAnchorPlacement=function(g,b,y,C,U,Y,ee,se,ve,Oe,He,Qe,Ze,mt,ft){var xt,st=[Qe.textOffset0,Qe.textOffset1],wt=No(g,y,C,st,U),Lt=this.collisionIndex.placeCollisionBox(Ia(b,wt.x,wt.y,Y,ee,this.transform.angle),He,se,ve,Oe.predicate);if(!ft||this.collisionIndex.placeCollisionBox(Ia(ft,wt.x,wt.y,Y,ee,this.transform.angle),He,se,ve,Oe.predicate).box.length!==0)return Lt.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Qe.crossTileID]&&this.prevPlacement.placements[Qe.crossTileID]&&this.prevPlacement.placements[Qe.crossTileID].text&&(xt=this.prevPlacement.variableOffsets[Qe.crossTileID].anchor),this.variableOffsets[Qe.crossTileID]={textOffset:st,width:y,height:C,anchor:g,textBoxScale:U,prevAnchor:xt},this.markUsedJustification(Ze,g,Qe,mt),Ze.allowVerticalPlacement&&(this.markUsedOrientation(Ze,mt,Qe),this.placedOrientations[Qe.crossTileID]=mt),{shift:wt,placedGlyphBoxes:Lt}):void 0},Ga.prototype.placeLayerBucketPart=function(g,b,y){var C=this,U=g.parameters,Y=U.bucket,ee=U.layout,se=U.posMatrix,ve=U.textLabelPlaneMatrix,Oe=U.labelToScreenMatrix,He=U.textPixelRatio,Qe=U.holdingForFade,Ze=U.collisionBoxArray,mt=U.partiallyEvaluatedTextSize,ft=U.collisionGroup,xt=ee.get("text-optional"),st=ee.get("icon-optional"),wt=ee.get("text-allow-overlap"),Lt=ee.get("icon-allow-overlap"),Nt=ee.get("text-rotation-alignment")==="map",qt=ee.get("text-pitch-alignment")==="map",Ht=ee.get("icon-text-fit")!=="none",or=ee.get("symbol-z-order")==="viewport-y",vr=wt&&(Lt||!Y.hasIconData()||st),Pr=Lt&&(wt||!Y.hasTextData()||xt);!Y.collisionArrays&&Ze&&Y.deserializeCollisionBoxes(Ze);var Mr=function(nn,Zn){if(!b[nn.crossTileID])if(Qe)C.placements[nn.crossTileID]=new Fs(!1,!1,!1);else{var mi,pi=!1,ci=!1,_i=!0,ai=null,xn={box:null,offscreen:null},ca={box:null,offscreen:null},Oa=null,va=null,Ha=0,yo=0,_a=0;Zn.textFeatureIndex?Ha=Zn.textFeatureIndex:nn.useRuntimeCollisionCircles&&(Ha=nn.featureIndex),Zn.verticalTextFeatureIndex&&(yo=Zn.verticalTextFeatureIndex);var ys=Zn.textBox;if(ys){var ho=function(Ja){var vo=a.WritingMode.horizontal;if(Y.allowVerticalPlacement&&!Ja&&C.prevPlacement){var qo=C.prevPlacement.placedOrientations[nn.crossTileID];qo&&(C.placedOrientations[nn.crossTileID]=qo,C.markUsedOrientation(Y,vo=qo,nn))}return vo},fa=function(Ja,vo){if(Y.allowVerticalPlacement&&nn.numVerticalGlyphVertices>0&&Zn.verticalTextBox)for(var qo=0,qu=Y.writingModes;qo<qu.length&&(qu[qo]===a.WritingMode.vertical?(xn=vo(),ca=xn):xn=Ja(),!(xn&&xn.box&&xn.box.length));qo+=1);else xn=Ja()};if(ee.get("text-variable-anchor")){var vs=ee.get("text-variable-anchor");if(C.prevPlacement&&C.prevPlacement.variableOffsets[nn.crossTileID]){var mu=C.prevPlacement.variableOffsets[nn.crossTileID];vs.indexOf(mu.anchor)>0&&(vs=vs.filter(function(Ja){return Ja!==mu.anchor})).unshift(mu.anchor)}var ns=function(Ja,vo,qo){for(var qu=Ja.x2-Ja.x1,af=Ja.y2-Ja.y1,hd=nn.textBoxScale,$h=Ht&&!Lt?vo:null,Jo={box:[],offscreen:!1},_s=wt?2*vs.length:vs.length,uc=0;uc<_s;++uc){var of=C.attemptAnchorPlacement(vs[uc%vs.length],Ja,qu,af,hd,Nt,qt,He,se,ft,uc>=vs.length,nn,Y,qo,$h);if(of&&(Jo=of.placedGlyphBoxes)&&Jo.box&&Jo.box.length){pi=!0,ai=of.shift;break}}return Jo};fa(function(){return ns(ys,Zn.iconBox,a.WritingMode.horizontal)},function(){var Ja=Zn.verticalTextBox;return Y.allowVerticalPlacement&&!(xn&&xn.box&&xn.box.length)&&nn.numVerticalGlyphVertices>0&&Ja?ns(Ja,Zn.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),xn&&(pi=xn.box,_i=xn.offscreen);var gu=ho(xn&&xn.box);if(!pi&&C.prevPlacement){var yu=C.prevPlacement.variableOffsets[nn.crossTileID];yu&&(C.variableOffsets[nn.crossTileID]=yu,C.markUsedJustification(Y,yu.anchor,nn,gu))}}else{var Jl=function(Ja,vo){var qo=C.collisionIndex.placeCollisionBox(Ja,wt,He,se,ft.predicate);return qo&&qo.box&&qo.box.length&&(C.markUsedOrientation(Y,vo,nn),C.placedOrientations[nn.crossTileID]=vo),qo};fa(function(){return Jl(ys,a.WritingMode.horizontal)},function(){var Ja=Zn.verticalTextBox;return Y.allowVerticalPlacement&&nn.numVerticalGlyphVertices>0&&Ja?Jl(Ja,a.WritingMode.vertical):{box:null,offscreen:null}}),ho(xn&&xn.box&&xn.box.length)}}if(pi=(mi=xn)&&mi.box&&mi.box.length>0,_i=mi&&mi.offscreen,nn.useRuntimeCollisionCircles){var lc=Y.text.placedSymbolArray.get(nn.centerJustifiedTextSymbolIndex),Lh=a.evaluateSizeForFeature(Y.textSizeData,mt,lc),nf=ee.get("text-padding");Oa=C.collisionIndex.placeCollisionCircles(wt,lc,Y.lineVertexArray,Y.glyphOffsetArray,Lh,se,ve,Oe,y,qt,ft.predicate,nn.collisionCircleDiameter,nf),pi=wt||Oa.circles.length>0&&!Oa.collisionDetected,_i=_i&&Oa.offscreen}if(Zn.iconFeatureIndex&&(_a=Zn.iconFeatureIndex),Zn.iconBox){var dl=function(Ja){var vo=Ht&&ai?Ia(Ja,ai.x,ai.y,Nt,qt,C.transform.angle):Ja;return C.collisionIndex.placeCollisionBox(vo,Lt,He,se,ft.predicate)};ci=ca&&ca.box&&ca.box.length&&Zn.verticalIconBox?(va=dl(Zn.verticalIconBox)).box.length>0:(va=dl(Zn.iconBox)).box.length>0,_i=_i&&va.offscreen}var Ic=xt||nn.numHorizontalGlyphVertices===0&&nn.numVerticalGlyphVertices===0,Vo=st||nn.numIconVertices===0;if(Ic||Vo?Vo?Ic||(ci=ci&&pi):pi=ci&&pi:ci=pi=ci&&pi,pi&&mi&&mi.box&&C.collisionIndex.insertCollisionBox(mi.box,ee.get("text-ignore-placement"),Y.bucketInstanceId,ca&&ca.box&&yo?yo:Ha,ft.ID),ci&&va&&C.collisionIndex.insertCollisionBox(va.box,ee.get("icon-ignore-placement"),Y.bucketInstanceId,_a,ft.ID),Oa&&(pi&&C.collisionIndex.insertCollisionCircles(Oa.circles,ee.get("text-ignore-placement"),Y.bucketInstanceId,Ha,ft.ID),y)){var zl=Y.bucketInstanceId,Ll=C.collisionCircleArrays[zl];Ll===void 0&&(Ll=C.collisionCircleArrays[zl]=new jf);for(var Mc=0;Mc<Oa.circles.length;Mc+=4)Ll.circles.push(Oa.circles[Mc+0]),Ll.circles.push(Oa.circles[Mc+1]),Ll.circles.push(Oa.circles[Mc+2]),Ll.circles.push(Oa.collisionDetected?1:0)}C.placements[nn.crossTileID]=new Fs(pi||vr,ci||Pr,_i||Y.justReloaded),b[nn.crossTileID]=!0}};if(or)for(var tn=Y.getSortedSymbolIndexes(this.transform.angle),Sn=tn.length-1;Sn>=0;--Sn){var Ln=tn[Sn];Mr(Y.symbolInstances.get(Ln),Y.collisionArrays[Ln])}else for(var Bn=g.symbolInstanceStart;Bn<g.symbolInstanceEnd;Bn++)Mr(Y.symbolInstances.get(Bn),Y.collisionArrays[Bn]);if(y&&Y.bucketInstanceId in this.collisionCircleArrays){var ji=this.collisionCircleArrays[Y.bucketInstanceId];a.invert(ji.invProjMatrix,se),ji.viewportMatrix=this.collisionIndex.getViewportMatrix()}Y.justReloaded=!1},Ga.prototype.markUsedJustification=function(g,b,y,C){var U;U=C===a.WritingMode.vertical?y.verticalPlacedTextSymbolIndex:{left:y.leftJustifiedTextSymbolIndex,center:y.centerJustifiedTextSymbolIndex,right:y.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(b)];for(var Y=0,ee=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex,y.verticalPlacedTextSymbolIndex];Y<ee.length;Y+=1){var se=ee[Y];se>=0&&(g.text.placedSymbolArray.get(se).crossTileID=U>=0&&se!==U?0:y.crossTileID)}},Ga.prototype.markUsedOrientation=function(g,b,y){for(var C=b===a.WritingMode.horizontal||b===a.WritingMode.horizontalOnly?b:0,U=b===a.WritingMode.vertical?b:0,Y=0,ee=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex];Y<ee.length;Y+=1)g.text.placedSymbolArray.get(ee[Y]).placedOrientation=C;y.verticalPlacedTextSymbolIndex&&(g.text.placedSymbolArray.get(y.verticalPlacedTextSymbolIndex).placedOrientation=U)},Ga.prototype.commit=function(g){this.commitTime=g,this.zoomAtLastRecencyCheck=this.transform.zoom;var b=this.prevPlacement,y=!1;this.prevZoomAdjustment=b?b.zoomAdjustment(this.transform.zoom):0;var C=b?b.symbolFadeChange(g):1,U=b?b.opacities:{},Y=b?b.variableOffsets:{},ee=b?b.placedOrientations:{};for(var se in this.placements){var ve=this.placements[se],Oe=U[se];Oe?(this.opacities[se]=new Ko(Oe,C,ve.text,ve.icon),y=y||ve.text!==Oe.text.placed||ve.icon!==Oe.icon.placed):(this.opacities[se]=new Ko(null,C,ve.text,ve.icon,ve.skipFade),y=y||ve.text||ve.icon)}for(var He in U){var Qe=U[He];if(!this.opacities[He]){var Ze=new Ko(Qe,C,!1,!1);Ze.isHidden()||(this.opacities[He]=Ze,y=y||Qe.text.placed||Qe.icon.placed)}}for(var mt in Y)this.variableOffsets[mt]||!this.opacities[mt]||this.opacities[mt].isHidden()||(this.variableOffsets[mt]=Y[mt]);for(var ft in ee)this.placedOrientations[ft]||!this.opacities[ft]||this.opacities[ft].isHidden()||(this.placedOrientations[ft]=ee[ft]);y?this.lastPlacementChangeTime=g:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=b?b.lastPlacementChangeTime:g)},Ga.prototype.updateLayerOpacities=function(g,b){for(var y={},C=0,U=b;C<U.length;C+=1){var Y=U[C],ee=Y.getBucket(g);ee&&Y.latestFeatureIndex&&g.id===ee.layerIds[0]&&this.updateBucketOpacities(ee,y,Y.collisionBoxArray)}},Ga.prototype.updateBucketOpacities=function(g,b,y){var C=this;g.hasTextData()&&g.text.opacityVertexArray.clear(),g.hasIconData()&&g.icon.opacityVertexArray.clear(),g.hasIconCollisionBoxData()&&g.iconCollisionBox.collisionVertexArray.clear(),g.hasTextCollisionBoxData()&&g.textCollisionBox.collisionVertexArray.clear();var U=g.layers[0].layout,Y=new Ko(null,0,!1,!1,!0),ee=U.get("text-allow-overlap"),se=U.get("icon-allow-overlap"),ve=U.get("text-variable-anchor"),Oe=U.get("text-rotation-alignment")==="map",He=U.get("text-pitch-alignment")==="map",Qe=U.get("icon-text-fit")!=="none",Ze=new Ko(null,0,ee&&(se||!g.hasIconData()||U.get("icon-optional")),se&&(ee||!g.hasTextData()||U.get("text-optional")),!0);!g.collisionArrays&&y&&(g.hasIconCollisionBoxData()||g.hasTextCollisionBoxData())&&g.deserializeCollisionBoxes(y);for(var mt=function(wt,Lt,Nt){for(var qt=0;qt<Lt/4;qt++)wt.opacityVertexArray.emplaceBack(Nt)},ft=function(wt){var Lt=g.symbolInstances.get(wt),Nt=Lt.numHorizontalGlyphVertices,qt=Lt.numVerticalGlyphVertices,Ht=Lt.crossTileID,or=C.opacities[Ht];b[Ht]?or=Y:or||(C.opacities[Ht]=or=Ze),b[Ht]=!0;var vr=Lt.numIconVertices>0,Pr=C.placedOrientations[Lt.crossTileID],Mr=Pr===a.WritingMode.vertical,tn=Pr===a.WritingMode.horizontal||Pr===a.WritingMode.horizontalOnly;if(Nt>0||qt>0){var Sn=nc(or.text);mt(g.text,Nt,Mr?Hl:Sn),mt(g.text,qt,tn?Hl:Sn);var Ln=or.text.isHidden();[Lt.rightJustifiedTextSymbolIndex,Lt.centerJustifiedTextSymbolIndex,Lt.leftJustifiedTextSymbolIndex].forEach(function(xn){xn>=0&&(g.text.placedSymbolArray.get(xn).hidden=Ln||Mr?1:0)}),Lt.verticalPlacedTextSymbolIndex>=0&&(g.text.placedSymbolArray.get(Lt.verticalPlacedTextSymbolIndex).hidden=Ln||tn?1:0);var Bn=C.variableOffsets[Lt.crossTileID];Bn&&C.markUsedJustification(g,Bn.anchor,Lt,Pr);var ji=C.placedOrientations[Lt.crossTileID];ji&&(C.markUsedJustification(g,"left",Lt,ji),C.markUsedOrientation(g,ji,Lt))}if(vr){var nn=nc(or.icon),Zn=!(Qe&&Lt.verticalPlacedIconSymbolIndex&&Mr);Lt.placedIconSymbolIndex>=0&&(mt(g.icon,Lt.numIconVertices,Zn?nn:Hl),g.icon.placedSymbolArray.get(Lt.placedIconSymbolIndex).hidden=or.icon.isHidden()),Lt.verticalPlacedIconSymbolIndex>=0&&(mt(g.icon,Lt.numVerticalIconVertices,Zn?Hl:nn),g.icon.placedSymbolArray.get(Lt.verticalPlacedIconSymbolIndex).hidden=or.icon.isHidden())}if(g.hasIconCollisionBoxData()||g.hasTextCollisionBoxData()){var mi=g.collisionArrays[wt];if(mi){var pi=new a.Point(0,0);if(mi.textBox||mi.verticalTextBox){var ci=!0;if(ve){var _i=C.variableOffsets[Ht];_i?(pi=No(_i.anchor,_i.width,_i.height,_i.textOffset,_i.textBoxScale),Oe&&pi._rotate(He?C.transform.angle:-C.transform.angle)):ci=!1}mi.textBox&&Us(g.textCollisionBox.collisionVertexArray,or.text.placed,!ci||Mr,pi.x,pi.y),mi.verticalTextBox&&Us(g.textCollisionBox.collisionVertexArray,or.text.placed,!ci||tn,pi.x,pi.y)}var ai=!!(!tn&&mi.verticalIconBox);mi.iconBox&&Us(g.iconCollisionBox.collisionVertexArray,or.icon.placed,ai,Qe?pi.x:0,Qe?pi.y:0),mi.verticalIconBox&&Us(g.iconCollisionBox.collisionVertexArray,or.icon.placed,!ai,Qe?pi.x:0,Qe?pi.y:0)}}},xt=0;xt<g.symbolInstances.length;xt++)ft(xt);if(g.sortFeatures(this.transform.angle),this.retainedQueryData[g.bucketInstanceId]&&(this.retainedQueryData[g.bucketInstanceId].featureSortOrder=g.featureSortOrder),g.hasTextData()&&g.text.opacityVertexBuffer&&g.text.opacityVertexBuffer.updateData(g.text.opacityVertexArray),g.hasIconData()&&g.icon.opacityVertexBuffer&&g.icon.opacityVertexBuffer.updateData(g.icon.opacityVertexArray),g.hasIconCollisionBoxData()&&g.iconCollisionBox.collisionVertexBuffer&&g.iconCollisionBox.collisionVertexBuffer.updateData(g.iconCollisionBox.collisionVertexArray),g.hasTextCollisionBoxData()&&g.textCollisionBox.collisionVertexBuffer&&g.textCollisionBox.collisionVertexBuffer.updateData(g.textCollisionBox.collisionVertexArray),g.bucketInstanceId in this.collisionCircleArrays){var st=this.collisionCircleArrays[g.bucketInstanceId];g.placementInvProjMatrix=st.invProjMatrix,g.placementViewportMatrix=st.viewportMatrix,g.collisionCircleArray=st.circles,delete this.collisionCircleArrays[g.bucketInstanceId]}},Ga.prototype.symbolFadeChange=function(g){return this.fadeDuration===0?1:(g-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Ga.prototype.zoomAdjustment=function(g){return Math.max(0,(this.transform.zoom-g)/1.5)},Ga.prototype.hasTransitions=function(g){return this.stale||g-this.lastPlacementChangeTime<this.fadeDuration},Ga.prototype.stillRecent=function(g,b){var y=this.zoomAtLastRecencyCheck===b?1-this.zoomAdjustment(b):1;return this.zoomAtLastRecencyCheck=b,this.commitTime+this.fadeDuration*y>g},Ga.prototype.setStale=function(){this.stale=!0};var Iu=Math.pow(2,25),Mu=Math.pow(2,24),Ou=Math.pow(2,17),Ma=Math.pow(2,16),Ru=Math.pow(2,9),Pc=Math.pow(2,8),Vf=Math.pow(2,1);function nc(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;var b=g.placed?1:0,y=Math.floor(127*g.opacity);return y*Iu+b*Mu+y*Ou+b*Ma+y*Ru+b*Pc+y*Vf+b}var Hl=0,ic=function(g){this._sortAcrossTiles=g.layout.get("symbol-z-order")!=="viewport-y"&&!g.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};ic.prototype.continuePlacement=function(g,b,y,C,U){for(var Y=this._bucketParts;this._currentTileIndex<g.length;)if(b.getBucketParts(Y,C,g[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,U())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Y.sort(function(ee,se){return ee.sortKey-se.sortKey}));this._currentPartIndex<Y.length;)if(b.placeLayerBucketPart(Y[this._currentPartIndex],this._seenCrossTileIDs,y),this._currentPartIndex++,U())return!0;return!1};var cu=function(g,b,y,C,U,Y,ee){this.placement=new Ga(g,U,Y,ee),this._currentPlacementIndex=b.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=C,this._done=!1};cu.prototype.isDone=function(){return this._done},cu.prototype.continuePlacement=function(g,b,y){for(var C=this,U=a.browser.now(),Y=function(){var ve=a.browser.now()-U;return!C._forceFullPlacement&&ve>2};this._currentPlacementIndex>=0;){var ee=b[g[this._currentPlacementIndex]],se=this.placement.collisionIndex.transform.zoom;if(ee.type==="symbol"&&(!ee.minzoom||ee.minzoom<=se)&&(!ee.maxzoom||ee.maxzoom>se)){if(this._inProgressLayer||(this._inProgressLayer=new ic(ee)),this._inProgressLayer.continuePlacement(y[ee.source],this.placement,this._showCollisionBoxes,ee,Y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},cu.prototype.commit=function(g){return this.placement.commit(g),this.placement};var ef=512/a.EXTENT/2,kl=function(g,b,y){this.tileID=g,this.indexedSymbolInstances={},this.bucketInstanceId=y;for(var C=0;C<b.length;C++){var U=b.get(C),Y=U.key;this.indexedSymbolInstances[Y]||(this.indexedSymbolInstances[Y]=[]),this.indexedSymbolInstances[Y].push({crossTileID:U.crossTileID,coord:this.getScaledCoordinates(U,g)})}};kl.prototype.getScaledCoordinates=function(g,b){var y=ef/Math.pow(2,b.canonical.z-this.tileID.canonical.z);return{x:Math.floor((b.canonical.x*a.EXTENT+g.anchorX)*y),y:Math.floor((b.canonical.y*a.EXTENT+g.anchorY)*y)}},kl.prototype.findMatches=function(g,b,y){for(var C=this.tileID.canonical.z<b.canonical.z?1:Math.pow(2,this.tileID.canonical.z-b.canonical.z),U=0;U<g.length;U++){var Y=g.get(U);if(!Y.crossTileID){var ee=this.indexedSymbolInstances[Y.key];if(ee)for(var se=this.getScaledCoordinates(Y,b),ve=0,Oe=ee;ve<Oe.length;ve+=1){var He=Oe[ve];if(Math.abs(He.coord.x-se.x)<=C&&Math.abs(He.coord.y-se.y)<=C&&!y[He.crossTileID]){y[He.crossTileID]=!0,Y.crossTileID=He.crossTileID;break}}}}};var Il=function(){this.maxCrossTileID=0};Il.prototype.generate=function(){return++this.maxCrossTileID};var xo=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};xo.prototype.handleWrapJump=function(g){var b=Math.round((g-this.lng)/360);if(b!==0)for(var y in this.indexes){var C=this.indexes[y],U={};for(var Y in C){var ee=C[Y];ee.tileID=ee.tileID.unwrapTo(ee.tileID.wrap+b),U[ee.tileID.key]=ee}this.indexes[y]=U}this.lng=g},xo.prototype.addBucket=function(g,b,y){if(this.indexes[g.overscaledZ]&&this.indexes[g.overscaledZ][g.key]){if(this.indexes[g.overscaledZ][g.key].bucketInstanceId===b.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(g.overscaledZ,this.indexes[g.overscaledZ][g.key])}for(var C=0;C<b.symbolInstances.length;C++)b.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[g.overscaledZ]||(this.usedCrossTileIDs[g.overscaledZ]={});var U=this.usedCrossTileIDs[g.overscaledZ];for(var Y in this.indexes){var ee=this.indexes[Y];if(Number(Y)>g.overscaledZ)for(var se in ee){var ve=ee[se];ve.tileID.isChildOf(g)&&ve.findMatches(b.symbolInstances,g,U)}else{var Oe=ee[g.scaledTo(Number(Y)).key];Oe&&Oe.findMatches(b.symbolInstances,g,U)}}for(var He=0;He<b.symbolInstances.length;He++){var Qe=b.symbolInstances.get(He);Qe.crossTileID||(Qe.crossTileID=y.generate(),U[Qe.crossTileID]=!0)}return this.indexes[g.overscaledZ]===void 0&&(this.indexes[g.overscaledZ]={}),this.indexes[g.overscaledZ][g.key]=new kl(g,b.symbolInstances,b.bucketInstanceId),!0},xo.prototype.removeBucketCrossTileIDs=function(g,b){for(var y in b.indexedSymbolInstances)for(var C=0,U=b.indexedSymbolInstances[y];C<U.length;C+=1)delete this.usedCrossTileIDs[g][U[C].crossTileID]},xo.prototype.removeStaleBuckets=function(g){var b=!1;for(var y in this.indexes){var C=this.indexes[y];for(var U in C)g[C[U].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,C[U]),delete C[U],b=!0)}return b};var ol=function(){this.layerIndexes={},this.crossTileIDs=new Il,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ol.prototype.addLayer=function(g,b,y){var C=this.layerIndexes[g.id];C===void 0&&(C=this.layerIndexes[g.id]=new xo);var U=!1,Y={};C.handleWrapJump(y);for(var ee=0,se=b;ee<se.length;ee+=1){var ve=se[ee],Oe=ve.getBucket(g);Oe&&g.id===Oe.layerIds[0]&&(Oe.bucketInstanceId||(Oe.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(ve.tileID,Oe,this.crossTileIDs)&&(U=!0),Y[Oe.bucketInstanceId]=!0)}return C.removeStaleBuckets(Y)&&(U=!0),U},ol.prototype.pruneUnusedLayers=function(g){var b={};for(var y in g.forEach(function(C){b[C]=!0}),this.layerIndexes)b[y]||delete this.layerIndexes[y]};var $i=function(g,b){return a.emitValidationErrors(g,b&&b.filter(function(y){return y.identifier!=="source.canvas"}))},ac=a.pick(vt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),sl=a.pick(vt,["setCenter","setZoom","setBearing","setPitch"]),ra=function(){var g={},b=a.styleSpec.$version;for(var y in a.styleSpec.$root){var C,U=a.styleSpec.$root[y];U.required&&(C=y==="version"?b:U.type==="array"?[]:{})!=null&&(g[y]=C)}return g}(),Ji=function(g){function b(y,C){var U=this;C===void 0&&(C={}),g.call(this),this.map=y,this.dispatcher=new Ne(ct(),this),this.imageManager=new H,this.imageManager.setEventedParent(this),this.glyphManager=new pe(y._requestManager,C.localIdeographFontFamily),this.lineAtlas=new Ie(256,512),this.crossTileSymbolIndex=new ol,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var Y=this;this._rtlTextPluginCallback=b.registerForPluginStateChange(function(ee){Y.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:ee.pluginStatus,pluginURL:ee.pluginURL},function(se,ve){if(a.triggerPluginCompletionEvent(se),ve&&ve.every(function(He){return He}))for(var Oe in Y.sourceCaches)Y.sourceCaches[Oe].reload()})}),this.on("data",function(ee){if(ee.dataType==="source"&&ee.sourceDataType==="metadata"){var se=U.sourceCaches[ee.sourceId];if(se){var ve=se.getSource();if(ve&&ve.vectorLayerIds)for(var Oe in U._layers){var He=U._layers[Oe];He.source===ve.id&&U._validateLayer(He)}}}})}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.loadURL=function(y,C){var U=this;C===void 0&&(C={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var Y=typeof C.validate=="boolean"?C.validate:!a.isMapboxURL(y);y=this.map._requestManager.normalizeStyleURL(y,C.accessToken);var ee=this.map._requestManager.transformRequest(y,a.ResourceType.Style);this._request=a.getJSON(ee,function(se,ve){U._request=null,se?U.fire(new a.ErrorEvent(se)):ve&&U._load(ve,Y)})},b.prototype.loadJSON=function(y,C){var U=this;C===void 0&&(C={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(function(){U._request=null,U._load(y,C.validate!==!1)})},b.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(ra,!1)},b.prototype._load=function(y,C){if(!C||!$i(this,a.validateStyle(y))){for(var U in this._loaded=!0,this.stylesheet=y,y.sources)this.addSource(U,y.sources[U],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs);var Y=pt(this.stylesheet.layers);this._order=Y.map(function(Oe){return Oe.id}),this._layers={},this._serializedLayers={};for(var ee=0,se=Y;ee<se.length;ee+=1){var ve=se[ee];(ve=a.createStyleLayer(ve)).setEventedParent(this,{layer:{id:ve.id}}),this._layers[ve.id]=ve,this._serializedLayers[ve.id]=ve.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ge(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},b.prototype._loadSprite=function(y){var C=this;this._spriteRequest=function(U,Y,ee){var se,ve,Oe,He=a.browser.devicePixelRatio>1?"@2x":"",Qe=a.getJSON(Y.transformRequest(Y.normalizeSpriteURL(U,He,".json"),a.ResourceType.SpriteJSON),function(ft,xt){Qe=null,Oe||(Oe=ft,se=xt,mt())}),Ze=a.getImage(Y.transformRequest(Y.normalizeSpriteURL(U,He,".png"),a.ResourceType.SpriteImage),function(ft,xt){Ze=null,Oe||(Oe=ft,ve=xt,mt())});function mt(){if(Oe)ee(Oe);else if(se&&ve){var ft=a.browser.getImageData(ve),xt={};for(var st in se){var wt=se[st],Lt=wt.width,Nt=wt.height,qt=wt.x,Ht=wt.y,or=wt.sdf,vr=wt.pixelRatio,Pr=wt.stretchX,Mr=wt.stretchY,tn=wt.content,Sn=new a.RGBAImage({width:Lt,height:Nt});a.RGBAImage.copy(ft,Sn,{x:qt,y:Ht},{x:0,y:0},{width:Lt,height:Nt}),xt[st]={data:Sn,pixelRatio:vr,sdf:or,stretchX:Pr,stretchY:Mr,content:tn}}ee(null,xt)}}return{cancel:function(){Qe&&(Qe.cancel(),Qe=null),Ze&&(Ze.cancel(),Ze=null)}}}(y,this.map._requestManager,function(U,Y){if(C._spriteRequest=null,U)C.fire(new a.ErrorEvent(U));else if(Y)for(var ee in Y)C.imageManager.addImage(ee,Y[ee]);C.imageManager.setLoaded(!0),C._availableImages=C.imageManager.listImages(),C.dispatcher.broadcast("setImages",C._availableImages),C.fire(new a.Event("data",{dataType:"style"}))})},b.prototype._validateLayer=function(y){var C=this.sourceCaches[y.source];if(C){var U=y.sourceLayer;if(U){var Y=C.getSource();(Y.type==="geojson"||Y.vectorLayerIds&&Y.vectorLayerIds.indexOf(U)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+U+'" does not exist on source "'+Y.id+'" as specified by style layer "'+y.id+'"')))}}},b.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var y in this.sourceCaches)if(!this.sourceCaches[y].loaded())return!1;return!!this.imageManager.isLoaded()},b.prototype._serializeLayers=function(y){for(var C=[],U=0,Y=y;U<Y.length;U+=1){var ee=this._layers[Y[U]];ee.type!=="custom"&&C.push(ee.serialize())}return C},b.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var y in this.sourceCaches)if(this.sourceCaches[y].hasTransition())return!0;for(var C in this._layers)if(this._layers[C].hasTransition())return!0;return!1},b.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},b.prototype.update=function(y){if(this._loaded){var C=this._changed;if(this._changed){var U=Object.keys(this._updatedLayers),Y=Object.keys(this._removedLayers);for(var ee in(U.length||Y.length)&&this._updateWorkerLayers(U,Y),this._updatedSources){var se=this._updatedSources[ee];se==="reload"?this._reloadSource(ee):se==="clear"&&this._clearSource(ee)}for(var ve in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[ve].updateTransitions(y);this.light.updateTransitions(y),this._resetUpdates()}var Oe={};for(var He in this.sourceCaches){var Qe=this.sourceCaches[He];Oe[He]=Qe.used,Qe.used=!1}for(var Ze=0,mt=this._order;Ze<mt.length;Ze+=1){var ft=this._layers[mt[Ze]];ft.recalculate(y,this._availableImages),!ft.isHidden(y.zoom)&&ft.source&&(this.sourceCaches[ft.source].used=!0)}for(var xt in Oe){var st=this.sourceCaches[xt];Oe[xt]!==st.used&&st.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:xt}))}this.light.recalculate(y),this.z=y.zoom,C&&this.fire(new a.Event("data",{dataType:"style"}))}},b.prototype._updateTilesForChangedImages=function(){var y=Object.keys(this._changedImages);if(y.length){for(var C in this.sourceCaches)this.sourceCaches[C].reloadTilesForDependencies(["icons","patterns"],y);this._changedImages={}}},b.prototype._updateWorkerLayers=function(y,C){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(y),removedIds:C})},b.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},b.prototype.setState=function(y){var C=this;if(this._checkLoaded(),$i(this,a.validateStyle(y)))return!1;(y=a.clone$1(y)).layers=pt(y.layers);var U=function(ee,se){if(!ee)return[{command:vt.setStyle,args:[se]}];var ve=[];try{if(!a.deepEqual(ee.version,se.version))return[{command:vt.setStyle,args:[se]}];a.deepEqual(ee.center,se.center)||ve.push({command:vt.setCenter,args:[se.center]}),a.deepEqual(ee.zoom,se.zoom)||ve.push({command:vt.setZoom,args:[se.zoom]}),a.deepEqual(ee.bearing,se.bearing)||ve.push({command:vt.setBearing,args:[se.bearing]}),a.deepEqual(ee.pitch,se.pitch)||ve.push({command:vt.setPitch,args:[se.pitch]}),a.deepEqual(ee.sprite,se.sprite)||ve.push({command:vt.setSprite,args:[se.sprite]}),a.deepEqual(ee.glyphs,se.glyphs)||ve.push({command:vt.setGlyphs,args:[se.glyphs]}),a.deepEqual(ee.transition,se.transition)||ve.push({command:vt.setTransition,args:[se.transition]}),a.deepEqual(ee.light,se.light)||ve.push({command:vt.setLight,args:[se.light]});var Oe={},He=[];(function(Ze,mt,ft,xt){var st;for(st in mt=mt||{},Ze=Ze||{})Ze.hasOwnProperty(st)&&(mt.hasOwnProperty(st)||Vt(st,ft,xt));for(st in mt)mt.hasOwnProperty(st)&&(Ze.hasOwnProperty(st)?a.deepEqual(Ze[st],mt[st])||(Ze[st].type==="geojson"&&mt[st].type==="geojson"&&qr(Ze,mt,st)?ft.push({command:vt.setGeoJSONSourceData,args:[st,mt[st].data]}):fr(st,mt,ft,xt)):ar(st,mt,ft))})(ee.sources,se.sources,He,Oe);var Qe=[];ee.layers&&ee.layers.forEach(function(Ze){Oe[Ze.source]?ve.push({command:vt.removeLayer,args:[Ze.id]}):Qe.push(Ze)}),ve=ve.concat(He),function(Ze,mt,ft){mt=mt||[];var xt,st,wt,Lt,Nt,qt,Ht,or=(Ze=Ze||[]).map(ln),vr=mt.map(ln),Pr=Ze.reduce(gn,{}),Mr=mt.reduce(gn,{}),tn=or.slice(),Sn=Object.create(null);for(xt=0,st=0;xt<or.length;xt++)Mr.hasOwnProperty(wt=or[xt])?st++:(ft.push({command:vt.removeLayer,args:[wt]}),tn.splice(tn.indexOf(wt,st),1));for(xt=0,st=0;xt<vr.length;xt++)tn[tn.length-1-xt]!==(wt=vr[vr.length-1-xt])&&(Pr.hasOwnProperty(wt)?(ft.push({command:vt.removeLayer,args:[wt]}),tn.splice(tn.lastIndexOf(wt,tn.length-st),1)):st++,ft.push({command:vt.addLayer,args:[Mr[wt],qt=tn[tn.length-xt]]}),tn.splice(tn.length-xt,0,wt),Sn[wt]=!0);for(xt=0;xt<vr.length;xt++)if(Lt=Pr[wt=vr[xt]],Nt=Mr[wt],!Sn[wt]&&!a.deepEqual(Lt,Nt))if(a.deepEqual(Lt.source,Nt.source)&&a.deepEqual(Lt["source-layer"],Nt["source-layer"])&&a.deepEqual(Lt.type,Nt.type)){for(Ht in Ar(Lt.layout,Nt.layout,ft,wt,null,vt.setLayoutProperty),Ar(Lt.paint,Nt.paint,ft,wt,null,vt.setPaintProperty),a.deepEqual(Lt.filter,Nt.filter)||ft.push({command:vt.setFilter,args:[wt,Nt.filter]}),a.deepEqual(Lt.minzoom,Nt.minzoom)&&a.deepEqual(Lt.maxzoom,Nt.maxzoom)||ft.push({command:vt.setLayerZoomRange,args:[wt,Nt.minzoom,Nt.maxzoom]}),Lt)Lt.hasOwnProperty(Ht)&&Ht!=="layout"&&Ht!=="paint"&&Ht!=="filter"&&Ht!=="metadata"&&Ht!=="minzoom"&&Ht!=="maxzoom"&&(Ht.indexOf("paint.")===0?Ar(Lt[Ht],Nt[Ht],ft,wt,Ht.slice(6),vt.setPaintProperty):a.deepEqual(Lt[Ht],Nt[Ht])||ft.push({command:vt.setLayerProperty,args:[wt,Ht,Nt[Ht]]}));for(Ht in Nt)Nt.hasOwnProperty(Ht)&&!Lt.hasOwnProperty(Ht)&&Ht!=="layout"&&Ht!=="paint"&&Ht!=="filter"&&Ht!=="metadata"&&Ht!=="minzoom"&&Ht!=="maxzoom"&&(Ht.indexOf("paint.")===0?Ar(Lt[Ht],Nt[Ht],ft,wt,Ht.slice(6),vt.setPaintProperty):a.deepEqual(Lt[Ht],Nt[Ht])||ft.push({command:vt.setLayerProperty,args:[wt,Ht,Nt[Ht]]}))}else ft.push({command:vt.removeLayer,args:[wt]}),qt=tn[tn.lastIndexOf(wt)+1],ft.push({command:vt.addLayer,args:[Nt,qt]})}(Qe,se.layers,ve)}catch(Ze){console.warn("Unable to compute style diff:",Ze),ve=[{command:vt.setStyle,args:[se]}]}return ve}(this.serialize(),y).filter(function(ee){return!(ee.command in sl)});if(U.length===0)return!1;var Y=U.filter(function(ee){return!(ee.command in ac)});if(Y.length>0)throw new Error("Unimplemented: "+Y.map(function(ee){return ee.command}).join(", ")+".");return U.forEach(function(ee){ee.command!=="setTransition"&&C[ee.command].apply(C,ee.args)}),this.stylesheet=y,!0},b.prototype.addImage=function(y,C){if(this.getImage(y))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(y,C),this._afterImageUpdated(y)},b.prototype.updateImage=function(y,C){this.imageManager.updateImage(y,C)},b.prototype.getImage=function(y){return this.imageManager.getImage(y)},b.prototype.removeImage=function(y){if(!this.getImage(y))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(y),this._afterImageUpdated(y)},b.prototype._afterImageUpdated=function(y){this._availableImages=this.imageManager.listImages(),this._changedImages[y]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))},b.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},b.prototype.addSource=function(y,C,U){var Y=this;if(U===void 0&&(U={}),this._checkLoaded(),this.sourceCaches[y]!==void 0)throw new Error("There is already a source with this ID");if(!C.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(C).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(C.type)>=0&&this._validate(a.validateStyle.source,"sources."+y,C,null,U))){this.map&&this.map._collectResourceTiming&&(C.collectResourceTiming=!0);var ee=this.sourceCaches[y]=new Je(y,C,this.dispatcher);ee.style=this,ee.setEventedParent(this,function(){return{isSourceLoaded:Y.loaded(),source:ee.serialize(),sourceId:y}}),ee.onAdd(this.map),this._changed=!0}},b.prototype.removeSource=function(y){if(this._checkLoaded(),this.sourceCaches[y]===void 0)throw new Error("There is no source with this ID");for(var C in this._layers)if(this._layers[C].source===y)return this.fire(new a.ErrorEvent(new Error('Source "'+y+'" cannot be removed while layer "'+C+'" is using it.')));var U=this.sourceCaches[y];delete this.sourceCaches[y],delete this._updatedSources[y],U.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:y})),U.setEventedParent(null),U.clearTiles(),U.onRemove&&U.onRemove(this.map),this._changed=!0},b.prototype.setGeoJSONSourceData=function(y,C){this._checkLoaded(),this.sourceCaches[y].getSource().setData(C),this._changed=!0},b.prototype.getSource=function(y){return this.sourceCaches[y]&&this.sourceCaches[y].getSource()},b.prototype.addLayer=function(y,C,U){U===void 0&&(U={}),this._checkLoaded();var Y=y.id;if(this.getLayer(Y))this.fire(new a.ErrorEvent(new Error('Layer with id "'+Y+'" already exists on this map')));else{var ee;if(y.type==="custom"){if($i(this,a.validateCustomStyleLayer(y)))return;ee=a.createStyleLayer(y)}else{if(typeof y.source=="object"&&(this.addSource(Y,y.source),y=a.clone$1(y),y=a.extend(y,{source:Y})),this._validate(a.validateStyle.layer,"layers."+Y,y,{arrayIndex:-1},U))return;ee=a.createStyleLayer(y),this._validateLayer(ee),ee.setEventedParent(this,{layer:{id:Y}}),this._serializedLayers[ee.id]=ee.serialize()}var se=C?this._order.indexOf(C):this._order.length;if(C&&se===-1)this.fire(new a.ErrorEvent(new Error('Layer with id "'+C+'" does not exist on this map.')));else{if(this._order.splice(se,0,Y),this._layerOrderChanged=!0,this._layers[Y]=ee,this._removedLayers[Y]&&ee.source&&ee.type!=="custom"){var ve=this._removedLayers[Y];delete this._removedLayers[Y],ve.type!==ee.type?this._updatedSources[ee.source]="clear":(this._updatedSources[ee.source]="reload",this.sourceCaches[ee.source].pause())}this._updateLayer(ee),ee.onAdd&&ee.onAdd(this.map)}}},b.prototype.moveLayer=function(y,C){if(this._checkLoaded(),this._changed=!0,this._layers[y]){if(y!==C){var U=this._order.indexOf(y);this._order.splice(U,1);var Y=C?this._order.indexOf(C):this._order.length;C&&Y===-1?this.fire(new a.ErrorEvent(new Error('Layer with id "'+C+'" does not exist on this map.'))):(this._order.splice(Y,0,y),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(new Error("The layer '"+y+"' does not exist in the map's style and cannot be moved.")))},b.prototype.removeLayer=function(y){this._checkLoaded();var C=this._layers[y];if(C){C.setEventedParent(null);var U=this._order.indexOf(y);this._order.splice(U,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[y]=C,delete this._layers[y],delete this._serializedLayers[y],delete this._updatedLayers[y],delete this._updatedPaintProps[y],C.onRemove&&C.onRemove(this.map)}else this.fire(new a.ErrorEvent(new Error("The layer '"+y+"' does not exist in the map's style and cannot be removed.")))},b.prototype.getLayer=function(y){return this._layers[y]},b.prototype.hasLayer=function(y){return y in this._layers},b.prototype.setLayerZoomRange=function(y,C,U){this._checkLoaded();var Y=this.getLayer(y);Y?Y.minzoom===C&&Y.maxzoom===U||(C!=null&&(Y.minzoom=C),U!=null&&(Y.maxzoom=U),this._updateLayer(Y)):this.fire(new a.ErrorEvent(new Error("The layer '"+y+"' does not exist in the map's style and cannot have zoom extent.")))},b.prototype.setFilter=function(y,C,U){U===void 0&&(U={}),this._checkLoaded();var Y=this.getLayer(y);if(Y){if(!a.deepEqual(Y.filter,C))return C==null?(Y.filter=void 0,void this._updateLayer(Y)):void(this._validate(a.validateStyle.filter,"layers."+Y.id+".filter",C,null,U)||(Y.filter=a.clone$1(C),this._updateLayer(Y)))}else this.fire(new a.ErrorEvent(new Error("The layer '"+y+"' does not exist in the map's style and cannot be filtered.")))},b.prototype.getFilter=function(y){return a.clone$1(this.getLayer(y).filter)},b.prototype.setLayoutProperty=function(y,C,U,Y){Y===void 0&&(Y={}),this._checkLoaded();var ee=this.getLayer(y);ee?a.deepEqual(ee.getLayoutProperty(C),U)||(ee.setLayoutProperty(C,U,Y),this._updateLayer(ee)):this.fire(new a.ErrorEvent(new Error("The layer '"+y+"' does not exist in the map's style and cannot be styled.")))},b.prototype.getLayoutProperty=function(y,C){var U=this.getLayer(y);if(U)return U.getLayoutProperty(C);this.fire(new a.ErrorEvent(new Error("The layer '"+y+"' does not exist in the map's style.")))},b.prototype.setPaintProperty=function(y,C,U,Y){Y===void 0&&(Y={}),this._checkLoaded();var ee=this.getLayer(y);ee?a.deepEqual(ee.getPaintProperty(C),U)||(ee.setPaintProperty(C,U,Y)&&this._updateLayer(ee),this._changed=!0,this._updatedPaintProps[y]=!0):this.fire(new a.ErrorEvent(new Error("The layer '"+y+"' does not exist in the map's style and cannot be styled.")))},b.prototype.getPaintProperty=function(y,C){return this.getLayer(y).getPaintProperty(C)},b.prototype.setFeatureState=function(y,C){this._checkLoaded();var U=y.source,Y=y.sourceLayer,ee=this.sourceCaches[U];if(ee!==void 0){var se=ee.getSource().type;se==="geojson"&&Y?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):se!=="vector"||Y?(y.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),ee.setFeatureState(Y,y.id,C)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+U+"' does not exist in the map's style.")))},b.prototype.removeFeatureState=function(y,C){this._checkLoaded();var U=y.source,Y=this.sourceCaches[U];if(Y!==void 0){var ee=Y.getSource().type,se=ee==="vector"?y.sourceLayer:void 0;ee!=="vector"||se?C&&typeof y.id!="string"&&typeof y.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):Y.removeFeatureState(se,y.id,C):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+U+"' does not exist in the map's style.")))},b.prototype.getFeatureState=function(y){this._checkLoaded();var C=y.source,U=y.sourceLayer,Y=this.sourceCaches[C];if(Y!==void 0){if(Y.getSource().type!=="vector"||U)return y.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),Y.getFeatureState(U,y.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+C+"' does not exist in the map's style.")))},b.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},b.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(y){return y.serialize()}),layers:this._serializeLayers(this._order)},function(y){return y!==void 0})},b.prototype._updateLayer=function(y){this._updatedLayers[y.id]=!0,y.source&&!this._updatedSources[y.source]&&this.sourceCaches[y.source].getSource().type!=="raster"&&(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause()),this._changed=!0},b.prototype._flattenAndSortRenderedFeatures=function(y){for(var C=this,U=function(Pr){return C._layers[Pr].type==="fill-extrusion"},Y={},ee=[],se=this._order.length-1;se>=0;se--){var ve=this._order[se];if(U(ve)){Y[ve]=se;for(var Oe=0,He=y;Oe<He.length;Oe+=1){var Qe=He[Oe][ve];if(Qe)for(var Ze=0,mt=Qe;Ze<mt.length;Ze+=1)ee.push(mt[Ze])}}}ee.sort(function(Pr,Mr){return Mr.intersectionZ-Pr.intersectionZ});for(var ft=[],xt=this._order.length-1;xt>=0;xt--){var st=this._order[xt];if(U(st))for(var wt=ee.length-1;wt>=0;wt--){var Lt=ee[wt].feature;if(Y[Lt.layer.id]<xt)break;ft.push(Lt),ee.pop()}else for(var Nt=0,qt=y;Nt<qt.length;Nt+=1){var Ht=qt[Nt][st];if(Ht)for(var or=0,vr=Ht;or<vr.length;or+=1)ft.push(vr[or].feature)}}return ft},b.prototype.queryRenderedFeatures=function(y,C,U){C&&C.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",C.filter,null,C);var Y={};if(C&&C.layers){if(!Array.isArray(C.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ee=0,se=C.layers;ee<se.length;ee+=1){var ve=se[ee],Oe=this._layers[ve];if(!Oe)return this.fire(new a.ErrorEvent(new Error("The layer '"+ve+"' does not exist in the map's style and cannot be queried for features."))),[];Y[Oe.source]=!0}}var He=[];for(var Qe in C.availableImages=this._availableImages,this.sourceCaches)C.layers&&!Y[Qe]||He.push(Bt(this.sourceCaches[Qe],this._layers,this._serializedLayers,y,C,U));return this.placement&&He.push(function(Ze,mt,ft,xt,st,wt,Lt){for(var Nt={},qt=wt.queryRenderedSymbols(xt),Ht=[],or=0,vr=Object.keys(qt).map(Number);or<vr.length;or+=1)Ht.push(Lt[vr[or]]);Ht.sort(hr);for(var Pr=function(){var Bn=tn[Mr],ji=Bn.featureIndex.lookupSymbolFeatures(qt[Bn.bucketInstanceId],mt,Bn.bucketIndex,Bn.sourceLayerIndex,st.filter,st.layers,st.availableImages,Ze);for(var nn in ji){var Zn=Nt[nn]=Nt[nn]||[],mi=ji[nn];mi.sort(function(_i,ai){var xn=Bn.featureSortOrder;if(xn){var ca=xn.indexOf(_i.featureIndex);return xn.indexOf(ai.featureIndex)-ca}return ai.featureIndex-_i.featureIndex});for(var pi=0,ci=mi;pi<ci.length;pi+=1)Zn.push(ci[pi])}},Mr=0,tn=Ht;Mr<tn.length;Mr+=1)Pr();var Sn=function(Bn){Nt[Bn].forEach(function(ji){var nn=ji.feature,Zn=ft[Ze[Bn].source].getFeatureState(nn.layer["source-layer"],nn.id);nn.source=nn.layer.source,nn.layer["source-layer"]&&(nn.sourceLayer=nn.layer["source-layer"]),nn.state=Zn})};for(var Ln in Nt)Sn(Ln);return Nt}(this._layers,this._serializedLayers,this.sourceCaches,y,C,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(He)},b.prototype.querySourceFeatures=function(y,C){C&&C.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",C.filter,null,C);var U=this.sourceCaches[y];return U?function(Y,ee){for(var se=Y.getRenderableIds().map(function(mt){return Y.getTileByID(mt)}),ve=[],Oe={},He=0;He<se.length;He++){var Qe=se[He],Ze=Qe.tileID.canonical.key;Oe[Ze]||(Oe[Ze]=!0,Qe.querySourceFeatures(ve,ee))}return ve}(U,C):[]},b.prototype.addSourceType=function(y,C,U){return b.getSourceType(y)?U(new Error('A source type called "'+y+'" already exists.')):(b.setSourceType(y,C),C.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:y,url:C.workerSourceURL},U):U(null,null))},b.prototype.getLight=function(){return this.light.getLight()},b.prototype.setLight=function(y,C){C===void 0&&(C={}),this._checkLoaded();var U=this.light.getLight(),Y=!1;for(var ee in y)if(!a.deepEqual(y[ee],U[ee])){Y=!0;break}if(Y){var se={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(y,C),this.light.updateTransitions(se)}},b.prototype._validate=function(y,C,U,Y,ee){return ee===void 0&&(ee={}),(!ee||ee.validate!==!1)&&$i(this,y.call(a.validateStyle,a.extend({key:C,style:this.serialize(),value:U,styleSpec:a.styleSpec},Y)))},b.prototype._remove=function(){for(var y in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[y].setEventedParent(null);for(var C in this.sourceCaches)this.sourceCaches[C].clearTiles(),this.sourceCaches[C].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},b.prototype._clearSource=function(y){this.sourceCaches[y].clearTiles()},b.prototype._reloadSource=function(y){this.sourceCaches[y].resume(),this.sourceCaches[y].reload()},b.prototype._updateSources=function(y){for(var C in this.sourceCaches)this.sourceCaches[C].update(y)},b.prototype._generateCollisionBoxes=function(){for(var y in this.sourceCaches)this._reloadSource(y)},b.prototype._updatePlacement=function(y,C,U,Y,ee){ee===void 0&&(ee=!1);for(var se=!1,ve=!1,Oe={},He=0,Qe=this._order;He<Qe.length;He+=1){var Ze=this._layers[Qe[He]];if(Ze.type==="symbol"){if(!Oe[Ze.source]){var mt=this.sourceCaches[Ze.source];Oe[Ze.source]=mt.getRenderableIds(!0).map(function(Lt){return mt.getTileByID(Lt)}).sort(function(Lt,Nt){return Nt.tileID.overscaledZ-Lt.tileID.overscaledZ||(Lt.tileID.isLessThan(Nt.tileID)?-1:1)})}var ft=this.crossTileSymbolIndex.addLayer(Ze,Oe[Ze.source],y.center.lng);se=se||ft}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ee=ee||this._layerOrderChanged||U===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),y.zoom))&&(this.pauseablePlacement=new cu(y,this._order,ee,C,U,Y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Oe),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),ve=!0),se&&this.pauseablePlacement.placement.setStale()),ve||se)for(var xt=0,st=this._order;xt<st.length;xt+=1){var wt=this._layers[st[xt]];wt.type==="symbol"&&this.placement.updateLayerOpacities(wt,Oe[wt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},b.prototype._releaseSymbolFadeTiles=function(){for(var y in this.sourceCaches)this.sourceCaches[y].releaseSymbolFadeTiles()},b.prototype.getImages=function(y,C,U){this.imageManager.getImages(C.icons,U),this._updateTilesForChangedImages();var Y=this.sourceCaches[C.source];Y&&Y.setDependencies(C.tileID.key,C.type,C.icons)},b.prototype.getGlyphs=function(y,C,U){this.glyphManager.getGlyphs(C.stacks,U)},b.prototype.getResource=function(y,C,U){return a.makeRequest(C,U)},b}(a.Evented);Ji.getSourceType=function(g){return tr[g]},Ji.setSourceType=function(g,b){tr[g]=b},Ji.registerForPluginStateChange=a.registerForPluginStateChange;var js=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),aa=Or(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Du=Or(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),oc=Or(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Tc=Or(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),tf=Or("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Wl=Or(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),oe=Or(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ze=Or("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),We=Or("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),tt=Or("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Ot=Or(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),_t=Or(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Tt=Or(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),xr=Or(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Er=Or(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),_r=Or(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),on=Or(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Gr=Or(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Kr=Or(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Cr=Or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Wr=Or(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Yr=Or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),bn=Or(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),On=Or(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),ei=Or(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),jn=Or(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Or(g,b){var y=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,C=b.match(/attribute ([\w]+) ([\w]+)/g),U=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Y=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ee=Y?Y.concat(U):U,se={};return{fragmentSource:g=g.replace(y,function(ve,Oe,He,Qe,Ze){return se[Ze]=!0,Oe==="define"?`
#ifndef HAS_UNIFORM_u_`+Ze+`
varying `+He+" "+Qe+" "+Ze+`;
#else
uniform `+He+" "+Qe+" u_"+Ze+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Ze+`
    `+He+" "+Qe+" "+Ze+" = u_"+Ze+`;
#endif
`}),vertexSource:b=b.replace(y,function(ve,Oe,He,Qe,Ze){var mt=Qe==="float"?"vec2":"vec4",ft=Ze.match(/color/)?"color":mt;return se[Ze]?Oe==="define"?`
#ifndef HAS_UNIFORM_u_`+Ze+`
uniform lowp float u_`+Ze+`_t;
attribute `+He+" "+mt+" a_"+Ze+`;
varying `+He+" "+Qe+" "+Ze+`;
#else
uniform `+He+" "+Qe+" u_"+Ze+`;
#endif
`:ft==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ze+`
    `+Ze+" = a_"+Ze+`;
#else
    `+He+" "+Qe+" "+Ze+" = u_"+Ze+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ze+`
    `+Ze+" = unpack_mix_"+ft+"(a_"+Ze+", u_"+Ze+`_t);
#else
    `+He+" "+Qe+" "+Ze+" = u_"+Ze+`;
#endif
`:Oe==="define"?`
#ifndef HAS_UNIFORM_u_`+Ze+`
uniform lowp float u_`+Ze+`_t;
attribute `+He+" "+mt+" a_"+Ze+`;
#else
uniform `+He+" "+Qe+" u_"+Ze+`;
#endif
`:ft==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ze+`
    `+He+" "+Qe+" "+Ze+" = a_"+Ze+`;
#else
    `+He+" "+Qe+" "+Ze+" = u_"+Ze+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ze+`
    `+He+" "+Qe+" "+Ze+" = unpack_mix_"+ft+"(a_"+Ze+", u_"+Ze+`_t);
#else
    `+He+" "+Qe+" "+Ze+" = u_"+Ze+`;
#endif
`}),staticAttributes:C,staticUniforms:ee}}var yn=Object.freeze({__proto__:null,prelude:aa,background:Du,backgroundPattern:oc,circle:Tc,clippingMask:tf,heatmap:Wl,heatmapTexture:oe,collisionBox:ze,collisionCircle:We,debug:tt,fill:Ot,fillOutline:_t,fillOutlinePattern:Tt,fillPattern:xr,fillExtrusion:Er,fillExtrusionPattern:_r,hillshadePrepare:on,hillshade:Gr,line:Kr,lineGradient:Cr,linePattern:Wr,lineSDF:Yr,raster:bn,symbolIcon:On,symbolSDF:ei,symbolTextAndIcon:jn}),Cn=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function ri(g){for(var b=[],y=0;y<g.length;y++)if(g[y]!==null){var C=g[y].split(" ");b.push(C.pop())}return b}Cn.prototype.bind=function(g,b,y,C,U,Y,ee,se){this.context=g;for(var ve=this.boundPaintVertexBuffers.length!==C.length,Oe=0;!ve&&Oe<C.length;Oe++)this.boundPaintVertexBuffers[Oe]!==C[Oe]&&(ve=!0);g.extVertexArrayObject&&this.vao&&this.boundProgram===b&&this.boundLayoutVertexBuffer===y&&!ve&&this.boundIndexBuffer===U&&this.boundVertexOffset===Y&&this.boundDynamicVertexBuffer===ee&&this.boundDynamicVertexBuffer2===se?(g.bindVertexArrayOES.set(this.vao),ee&&ee.bind(),U&&U.dynamicDraw&&U.bind(),se&&se.bind()):this.freshBind(b,y,C,U,Y,ee,se)},Cn.prototype.freshBind=function(g,b,y,C,U,Y,ee){var se,ve=g.numAttributes,Oe=this.context,He=Oe.gl;if(Oe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Oe.extVertexArrayObject.createVertexArrayOES(),Oe.bindVertexArrayOES.set(this.vao),se=0,this.boundProgram=g,this.boundLayoutVertexBuffer=b,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=C,this.boundVertexOffset=U,this.boundDynamicVertexBuffer=Y,this.boundDynamicVertexBuffer2=ee;else{se=Oe.currentNumAttributes||0;for(var Qe=ve;Qe<se;Qe++)He.disableVertexAttribArray(Qe)}b.enableAttributes(He,g);for(var Ze=0,mt=y;Ze<mt.length;Ze+=1)mt[Ze].enableAttributes(He,g);Y&&Y.enableAttributes(He,g),ee&&ee.enableAttributes(He,g),b.bind(),b.setVertexAttribPointers(He,g,U);for(var ft=0,xt=y;ft<xt.length;ft+=1){var st=xt[ft];st.bind(),st.setVertexAttribPointers(He,g,U)}Y&&(Y.bind(),Y.setVertexAttribPointers(He,g,U)),C&&C.bind(),ee&&(ee.bind(),ee.setVertexAttribPointers(He,g,U)),Oe.currentNumAttributes=ve},Cn.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Gn=function(g,b,y,C,U,Y){var ee=g.gl;this.program=ee.createProgram();for(var se=ri(y.staticAttributes),ve=C?C.getBinderAttributes():[],Oe=se.concat(ve),He=y.staticUniforms?ri(y.staticUniforms):[],Qe=C?C.getBinderUniforms():[],Ze=[],mt=0,ft=He.concat(Qe);mt<ft.length;mt+=1){var xt=ft[mt];Ze.indexOf(xt)<0&&Ze.push(xt)}var st=C?C.defines():[];Y&&st.push("#define OVERDRAW_INSPECTOR;");var wt=st.concat(aa.fragmentSource,y.fragmentSource).join(`
`),Lt=st.concat(aa.vertexSource,y.vertexSource).join(`
`),Nt=ee.createShader(ee.FRAGMENT_SHADER);if(ee.isContextLost())this.failedToCreate=!0;else{ee.shaderSource(Nt,wt),ee.compileShader(Nt),ee.attachShader(this.program,Nt);var qt=ee.createShader(ee.VERTEX_SHADER);if(ee.isContextLost())this.failedToCreate=!0;else{ee.shaderSource(qt,Lt),ee.compileShader(qt),ee.attachShader(this.program,qt),this.attributes={};var Ht={};this.numAttributes=Oe.length;for(var or=0;or<this.numAttributes;or++)Oe[or]&&(ee.bindAttribLocation(this.program,or,Oe[or]),this.attributes[Oe[or]]=or);ee.linkProgram(this.program),ee.deleteShader(qt),ee.deleteShader(Nt);for(var vr=0;vr<Ze.length;vr++){var Pr=Ze[vr];if(Pr&&!Ht[Pr]){var Mr=ee.getUniformLocation(this.program,Pr);Mr&&(Ht[Pr]=Mr)}}this.fixedUniforms=U(g,Ht),this.binderUniforms=C?C.getUniforms(g,Ht):[]}}};function ni(g,b,y){var C=1/Ro(y,1,b.transform.tileZoom),U=Math.pow(2,y.tileID.overscaledZ),Y=y.tileSize*Math.pow(2,b.transform.tileZoom)/U,ee=Y*(y.tileID.canonical.x+y.tileID.wrap*U),se=Y*y.tileID.canonical.y;return{u_image:0,u_texsize:y.imageAtlasTexture.size,u_scale:[C,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[ee>>16,se>>16],u_pixel_coord_lower:[65535&ee,65535&se]}}Gn.prototype.draw=function(g,b,y,C,U,Y,ee,se,ve,Oe,He,Qe,Ze,mt,ft,xt){var st,wt=g.gl;if(!this.failedToCreate){for(var Lt in g.program.set(this.program),g.setDepthMode(y),g.setStencilMode(C),g.setColorMode(U),g.setCullFace(Y),this.fixedUniforms)this.fixedUniforms[Lt].set(ee[Lt]);mt&&mt.setUniforms(g,this.binderUniforms,Qe,{zoom:Ze});for(var Nt=(st={},st[wt.LINES]=2,st[wt.TRIANGLES]=3,st[wt.LINE_STRIP]=1,st)[b],qt=0,Ht=He.get();qt<Ht.length;qt+=1){var or=Ht[qt],vr=or.vaos||(or.vaos={});(vr[se]||(vr[se]=new Cn)).bind(g,this,ve,mt?mt.getPaintVertexBuffers():[],Oe,or.vertexOffset,ft,xt),wt.drawElements(b,or.primitiveLength*Nt,wt.UNSIGNED_SHORT,or.primitiveOffset*Nt*2)}}};var sn=function(g,b,y,C){var U=b.style.light,Y=U.properties.get("position"),ee=[Y.x,Y.y,Y.z],se=a.create$1();U.properties.get("anchor")==="viewport"&&a.fromRotation(se,-b.transform.angle),a.transformMat3(ee,ee,se);var ve=U.properties.get("color");return{u_matrix:g,u_lightpos:ee,u_lightintensity:U.properties.get("intensity"),u_lightcolor:[ve.r,ve.g,ve.b],u_vertical_gradient:+y,u_opacity:C}},Vn=function(g,b,y,C,U,Y,ee){return a.extend(sn(g,b,y,C),ni(Y,b,ee),{u_height_factor:-Math.pow(2,U.overscaledZ)/ee.tileSize/8})},vn=function(g){return{u_matrix:g}},Un=function(g,b,y,C){return a.extend(vn(g),ni(y,b,C))},Ti=function(g,b){return{u_matrix:g,u_world:b}},Hi=function(g,b,y,C,U){return a.extend(Un(g,b,y,C),{u_world:U})},Yn=function(g,b,y,C){var U,Y,ee=g.transform;if(C.paint.get("circle-pitch-alignment")==="map"){var se=Ro(y,1,ee.zoom);U=!0,Y=[se,se]}else U=!1,Y=ee.pixelsToGLUnits;return{u_camera_to_center_distance:ee.cameraToCenterDistance,u_scale_with_map:+(C.paint.get("circle-pitch-scale")==="map"),u_matrix:g.translatePosMatrix(b.posMatrix,y,C.paint.get("circle-translate"),C.paint.get("circle-translate-anchor")),u_pitch_with_map:+U,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:Y}},Fi=function(g,b,y){var C=Ro(y,1,b.zoom),U=Math.pow(2,b.zoom-y.tileID.overscaledZ),Y=y.tileID.overscaleFactor();return{u_matrix:g,u_camera_to_center_distance:b.cameraToCenterDistance,u_pixels_to_tile_units:C,u_extrude_scale:[b.pixelsToGLUnits[0]/(C*U),b.pixelsToGLUnits[1]/(C*U)],u_overscale_factor:Y}},xa=function(g,b,y){return{u_matrix:g,u_inv_matrix:b,u_camera_to_center_distance:y.cameraToCenterDistance,u_viewport_size:[y.width,y.height]}},wo=function(g,b,y){return y===void 0&&(y=1),{u_matrix:g,u_color:b,u_overlay:0,u_overlay_scale:y}},Wn=function(g){return{u_matrix:g}},sa=function(g,b,y,C){return{u_matrix:g,u_extrude_scale:Ro(b,1,y),u_intensity:C}},Na=function(g,b,y){var C=g.transform;return{u_matrix:so(g,b,y),u_ratio:1/Ro(b,1,C.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},eo=function(g,b,y,C){return a.extend(Na(g,b,y),{u_image:0,u_image_height:C})},wi=function(g,b,y,C){var U=g.transform,Y=ps(b,U);return{u_matrix:so(g,b,y),u_texsize:b.imageAtlasTexture.size,u_ratio:1/Ro(b,1,U.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[Y,C.fromScale,C.toScale],u_fade:C.t,u_units_to_pixels:[1/U.pixelsToGLUnits[0],1/U.pixelsToGLUnits[1]]}},Vs=function(g,b,y,C,U){var Y=g.lineAtlas,ee=ps(b,g.transform),se=y.layout.get("line-cap")==="round",ve=Y.getDash(C.from,se),Oe=Y.getDash(C.to,se),He=ve.width*U.fromScale,Qe=Oe.width*U.toScale;return a.extend(Na(g,b,y),{u_patternscale_a:[ee/He,-ve.height/2],u_patternscale_b:[ee/Qe,-Oe.height/2],u_sdfgamma:Y.width/(256*Math.min(He,Qe)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:ve.y,u_tex_y_b:Oe.y,u_mix:U.t})};function ps(g,b){return 1/Ro(g,1,b.tileZoom)}function so(g,b,y){return g.translatePosMatrix(b.tileID.posMatrix,b,y.paint.get("line-translate"),y.paint.get("line-translate-anchor"))}var rs=function(g,b,y,C,U){return{u_matrix:g,u_tl_parent:b,u_scale_parent:y,u_buffer_scale:1,u_fade_t:C.mix,u_opacity:C.opacity*U.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:U.paint.get("raster-brightness-min"),u_brightness_high:U.paint.get("raster-brightness-max"),u_saturation_factor:(ee=U.paint.get("raster-saturation"),ee>0?1-1/(1.001-ee):-ee),u_contrast_factor:(Y=U.paint.get("raster-contrast"),Y>0?1/(1-Y):1+Y),u_spin_weights:zu(U.paint.get("raster-hue-rotate"))};var Y,ee};function zu(g){g*=Math.PI/180;var b=Math.sin(g),y=Math.cos(g);return[(2*y+1)/3,(-Math.sqrt(3)*b-y+1)/3,(Math.sqrt(3)*b-y+1)/3]}var Js,Ac=function(g,b,y,C,U,Y,ee,se,ve,Oe){var He=U.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:b?b.uSizeT:0,u_size:b?b.uSize:0,u_camera_to_center_distance:He.cameraToCenterDistance,u_pitch:He.pitch/360*2*Math.PI,u_rotate_symbol:+y,u_aspect_ratio:He.width/He.height,u_fade_change:U.options.fadeDuration?U.symbolFadeChange:1,u_matrix:Y,u_label_plane_matrix:ee,u_coord_matrix:se,u_is_text:+ve,u_pitch_with_map:+C,u_texsize:Oe,u_texture:0}},Ts=function(g,b,y,C,U,Y,ee,se,ve,Oe,He){var Qe=U.transform;return a.extend(Ac(g,b,y,C,U,Y,ee,se,ve,Oe),{u_gamma_scale:C?Math.cos(Qe._pitch)*Qe.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+He})},Qs=function(g,b,y,C,U,Y,ee,se,ve,Oe){return a.extend(Ts(g,b,y,C,U,Y,ee,se,!0,ve,!0),{u_texsize_icon:Oe,u_texture_icon:1})},qs=function(g,b,y){return{u_matrix:g,u_opacity:b,u_color:y}},Lu=function(g,b,y,C,U,Y){return a.extend(function(ee,se,ve,Oe){var He=ve.imageManager.getPattern(ee.from.toString()),Qe=ve.imageManager.getPattern(ee.to.toString()),Ze=ve.imageManager.getPixelSize(),mt=Ze.width,ft=Ze.height,xt=Math.pow(2,Oe.tileID.overscaledZ),st=Oe.tileSize*Math.pow(2,ve.transform.tileZoom)/xt,wt=st*(Oe.tileID.canonical.x+Oe.tileID.wrap*xt),Lt=st*Oe.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:He.tl,u_pattern_br_a:He.br,u_pattern_tl_b:Qe.tl,u_pattern_br_b:Qe.br,u_texsize:[mt,ft],u_mix:se.t,u_pattern_size_a:He.displaySize,u_pattern_size_b:Qe.displaySize,u_scale_a:se.fromScale,u_scale_b:se.toScale,u_tile_units_to_pixels:1/Ro(Oe,1,ve.transform.tileZoom),u_pixel_coord_upper:[wt>>16,Lt>>16],u_pixel_coord_lower:[65535&wt,65535&Lt]}}(C,Y,y,U),{u_matrix:g,u_opacity:b})},ll={fillExtrusion:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_lightpos:new a.Uniform3f(g,b.u_lightpos),u_lightintensity:new a.Uniform1f(g,b.u_lightintensity),u_lightcolor:new a.Uniform3f(g,b.u_lightcolor),u_vertical_gradient:new a.Uniform1f(g,b.u_vertical_gradient),u_opacity:new a.Uniform1f(g,b.u_opacity)}},fillExtrusionPattern:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_lightpos:new a.Uniform3f(g,b.u_lightpos),u_lightintensity:new a.Uniform1f(g,b.u_lightintensity),u_lightcolor:new a.Uniform3f(g,b.u_lightcolor),u_vertical_gradient:new a.Uniform1f(g,b.u_vertical_gradient),u_height_factor:new a.Uniform1f(g,b.u_height_factor),u_image:new a.Uniform1i(g,b.u_image),u_texsize:new a.Uniform2f(g,b.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,b.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,b.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,b.u_scale),u_fade:new a.Uniform1f(g,b.u_fade),u_opacity:new a.Uniform1f(g,b.u_opacity)}},fill:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix)}},fillPattern:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_image:new a.Uniform1i(g,b.u_image),u_texsize:new a.Uniform2f(g,b.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,b.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,b.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,b.u_scale),u_fade:new a.Uniform1f(g,b.u_fade)}},fillOutline:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_world:new a.Uniform2f(g,b.u_world)}},fillOutlinePattern:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_world:new a.Uniform2f(g,b.u_world),u_image:new a.Uniform1i(g,b.u_image),u_texsize:new a.Uniform2f(g,b.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,b.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,b.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,b.u_scale),u_fade:new a.Uniform1f(g,b.u_fade)}},circle:function(g,b){return{u_camera_to_center_distance:new a.Uniform1f(g,b.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(g,b.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(g,b.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(g,b.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(g,b.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(g,b.u_matrix)}},collisionBox:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_camera_to_center_distance:new a.Uniform1f(g,b.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(g,b.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(g,b.u_extrude_scale),u_overscale_factor:new a.Uniform1f(g,b.u_overscale_factor)}},collisionCircle:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_inv_matrix:new a.UniformMatrix4f(g,b.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(g,b.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(g,b.u_viewport_size)}},debug:function(g,b){return{u_color:new a.UniformColor(g,b.u_color),u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_overlay:new a.Uniform1i(g,b.u_overlay),u_overlay_scale:new a.Uniform1f(g,b.u_overlay_scale)}},clippingMask:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix)}},heatmap:function(g,b){return{u_extrude_scale:new a.Uniform1f(g,b.u_extrude_scale),u_intensity:new a.Uniform1f(g,b.u_intensity),u_matrix:new a.UniformMatrix4f(g,b.u_matrix)}},heatmapTexture:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_world:new a.Uniform2f(g,b.u_world),u_image:new a.Uniform1i(g,b.u_image),u_color_ramp:new a.Uniform1i(g,b.u_color_ramp),u_opacity:new a.Uniform1f(g,b.u_opacity)}},hillshade:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_image:new a.Uniform1i(g,b.u_image),u_latrange:new a.Uniform2f(g,b.u_latrange),u_light:new a.Uniform2f(g,b.u_light),u_shadow:new a.UniformColor(g,b.u_shadow),u_highlight:new a.UniformColor(g,b.u_highlight),u_accent:new a.UniformColor(g,b.u_accent)}},hillshadePrepare:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_image:new a.Uniform1i(g,b.u_image),u_dimension:new a.Uniform2f(g,b.u_dimension),u_zoom:new a.Uniform1f(g,b.u_zoom),u_unpack:new a.Uniform4f(g,b.u_unpack)}},line:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_ratio:new a.Uniform1f(g,b.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,b.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,b.u_units_to_pixels)}},lineGradient:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_ratio:new a.Uniform1f(g,b.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,b.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,b.u_units_to_pixels),u_image:new a.Uniform1i(g,b.u_image),u_image_height:new a.Uniform1f(g,b.u_image_height)}},linePattern:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_texsize:new a.Uniform2f(g,b.u_texsize),u_ratio:new a.Uniform1f(g,b.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,b.u_device_pixel_ratio),u_image:new a.Uniform1i(g,b.u_image),u_units_to_pixels:new a.Uniform2f(g,b.u_units_to_pixels),u_scale:new a.Uniform3f(g,b.u_scale),u_fade:new a.Uniform1f(g,b.u_fade)}},lineSDF:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_ratio:new a.Uniform1f(g,b.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,b.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,b.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(g,b.u_patternscale_a),u_patternscale_b:new a.Uniform2f(g,b.u_patternscale_b),u_sdfgamma:new a.Uniform1f(g,b.u_sdfgamma),u_image:new a.Uniform1i(g,b.u_image),u_tex_y_a:new a.Uniform1f(g,b.u_tex_y_a),u_tex_y_b:new a.Uniform1f(g,b.u_tex_y_b),u_mix:new a.Uniform1f(g,b.u_mix)}},raster:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_tl_parent:new a.Uniform2f(g,b.u_tl_parent),u_scale_parent:new a.Uniform1f(g,b.u_scale_parent),u_buffer_scale:new a.Uniform1f(g,b.u_buffer_scale),u_fade_t:new a.Uniform1f(g,b.u_fade_t),u_opacity:new a.Uniform1f(g,b.u_opacity),u_image0:new a.Uniform1i(g,b.u_image0),u_image1:new a.Uniform1i(g,b.u_image1),u_brightness_low:new a.Uniform1f(g,b.u_brightness_low),u_brightness_high:new a.Uniform1f(g,b.u_brightness_high),u_saturation_factor:new a.Uniform1f(g,b.u_saturation_factor),u_contrast_factor:new a.Uniform1f(g,b.u_contrast_factor),u_spin_weights:new a.Uniform3f(g,b.u_spin_weights)}},symbolIcon:function(g,b){return{u_is_size_zoom_constant:new a.Uniform1i(g,b.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,b.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,b.u_size_t),u_size:new a.Uniform1f(g,b.u_size),u_camera_to_center_distance:new a.Uniform1f(g,b.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,b.u_pitch),u_rotate_symbol:new a.Uniform1i(g,b.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,b.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,b.u_fade_change),u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,b.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,b.u_coord_matrix),u_is_text:new a.Uniform1i(g,b.u_is_text),u_pitch_with_map:new a.Uniform1i(g,b.u_pitch_with_map),u_texsize:new a.Uniform2f(g,b.u_texsize),u_texture:new a.Uniform1i(g,b.u_texture)}},symbolSDF:function(g,b){return{u_is_size_zoom_constant:new a.Uniform1i(g,b.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,b.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,b.u_size_t),u_size:new a.Uniform1f(g,b.u_size),u_camera_to_center_distance:new a.Uniform1f(g,b.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,b.u_pitch),u_rotate_symbol:new a.Uniform1i(g,b.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,b.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,b.u_fade_change),u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,b.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,b.u_coord_matrix),u_is_text:new a.Uniform1i(g,b.u_is_text),u_pitch_with_map:new a.Uniform1i(g,b.u_pitch_with_map),u_texsize:new a.Uniform2f(g,b.u_texsize),u_texture:new a.Uniform1i(g,b.u_texture),u_gamma_scale:new a.Uniform1f(g,b.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(g,b.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(g,b.u_is_halo)}},symbolTextAndIcon:function(g,b){return{u_is_size_zoom_constant:new a.Uniform1i(g,b.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,b.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,b.u_size_t),u_size:new a.Uniform1f(g,b.u_size),u_camera_to_center_distance:new a.Uniform1f(g,b.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,b.u_pitch),u_rotate_symbol:new a.Uniform1i(g,b.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,b.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,b.u_fade_change),u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,b.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,b.u_coord_matrix),u_is_text:new a.Uniform1i(g,b.u_is_text),u_pitch_with_map:new a.Uniform1i(g,b.u_pitch_with_map),u_texsize:new a.Uniform2f(g,b.u_texsize),u_texsize_icon:new a.Uniform2f(g,b.u_texsize_icon),u_texture:new a.Uniform1i(g,b.u_texture),u_texture_icon:new a.Uniform1i(g,b.u_texture_icon),u_gamma_scale:new a.Uniform1f(g,b.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(g,b.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(g,b.u_is_halo)}},background:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_opacity:new a.Uniform1f(g,b.u_opacity),u_color:new a.UniformColor(g,b.u_color)}},backgroundPattern:function(g,b){return{u_matrix:new a.UniformMatrix4f(g,b.u_matrix),u_opacity:new a.Uniform1f(g,b.u_opacity),u_image:new a.Uniform1i(g,b.u_image),u_pattern_tl_a:new a.Uniform2f(g,b.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(g,b.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(g,b.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(g,b.u_pattern_br_b),u_texsize:new a.Uniform2f(g,b.u_texsize),u_mix:new a.Uniform1f(g,b.u_mix),u_pattern_size_a:new a.Uniform2f(g,b.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(g,b.u_pattern_size_b),u_scale_a:new a.Uniform1f(g,b.u_scale_a),u_scale_b:new a.Uniform1f(g,b.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(g,b.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,b.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(g,b.u_tile_units_to_pixels)}}};function Ml(g,b,y,C,U,Y,ee){for(var se=g.context,ve=se.gl,Oe=g.useProgram("collisionBox"),He=[],Qe=0,Ze=0,mt=0;mt<C.length;mt++){var ft=C[mt],xt=b.getTile(ft),st=xt.getBucket(y);if(st){var wt=ft.posMatrix;U[0]===0&&U[1]===0||(wt=g.translatePosMatrix(ft.posMatrix,xt,U,Y));var Lt=ee?st.textCollisionBox:st.iconCollisionBox,Nt=st.collisionCircleArray;if(Nt.length>0){var qt=a.create(),Ht=wt;a.mul(qt,st.placementInvProjMatrix,g.transform.glCoordMatrix),a.mul(qt,qt,st.placementViewportMatrix),He.push({circleArray:Nt,circleOffset:Ze,transform:Ht,invTransform:qt}),Ze=Qe+=Nt.length/4}Lt&&Oe.draw(se,ve.LINES,et.disabled,ht.disabled,g.colorModeForRenderPass(),Dt.disabled,Fi(wt,g.transform,xt),y.id,Lt.layoutVertexBuffer,Lt.indexBuffer,Lt.segments,null,g.transform.zoom,null,null,Lt.collisionVertexBuffer)}}if(ee&&He.length){var or=g.useProgram("collisionCircle"),vr=new a.StructArrayLayout2f1f2i16;vr.resize(4*Qe),vr._trim();for(var Pr=0,Mr=0,tn=He;Mr<tn.length;Mr+=1)for(var Sn=tn[Mr],Ln=0;Ln<Sn.circleArray.length/4;Ln++){var Bn=4*Ln,ji=Sn.circleArray[Bn+0],nn=Sn.circleArray[Bn+1],Zn=Sn.circleArray[Bn+2],mi=Sn.circleArray[Bn+3];vr.emplace(Pr++,ji,nn,Zn,mi,0),vr.emplace(Pr++,ji,nn,Zn,mi,1),vr.emplace(Pr++,ji,nn,Zn,mi,2),vr.emplace(Pr++,ji,nn,Zn,mi,3)}(!Js||Js.length<2*Qe)&&(Js=function(Oa){var va=2*Oa,Ha=new a.StructArrayLayout3ui6;Ha.resize(va),Ha._trim();for(var yo=0;yo<va;yo++){var _a=6*yo;Ha.uint16[_a+0]=4*yo+0,Ha.uint16[_a+1]=4*yo+1,Ha.uint16[_a+2]=4*yo+2,Ha.uint16[_a+3]=4*yo+2,Ha.uint16[_a+4]=4*yo+3,Ha.uint16[_a+5]=4*yo+0}return Ha}(Qe));for(var pi=se.createIndexBuffer(Js,!0),ci=se.createVertexBuffer(vr,a.collisionCircleLayout.members,!0),_i=0,ai=He;_i<ai.length;_i+=1){var xn=ai[_i],ca=xa(xn.transform,xn.invTransform,g.transform);or.draw(se,ve.TRIANGLES,et.disabled,ht.disabled,g.colorModeForRenderPass(),Dt.disabled,ca,y.id,ci,pi,a.SegmentVector.simpleSegment(0,2*xn.circleOffset,xn.circleArray.length,xn.circleArray.length/2),null,g.transform.zoom,null,null,null)}ci.destroy(),pi.destroy()}}var $u=a.identity(new Float32Array(16));function Ua(g,b,y,C,U,Y){var ee=a.getAnchorAlignment(g),se=-(ee.horizontalAlign-.5)*b,ve=-(ee.verticalAlign-.5)*y,Oe=a.evaluateVariableOffset(g,C);return new a.Point((se/U+Oe[0])*Y,(ve/U+Oe[1])*Y)}function Zl(g,b,y,C,U,Y,ee,se,ve,Oe,He){var Qe=g.text.placedSymbolArray,Ze=g.text.dynamicLayoutVertexArray,mt=g.icon.dynamicLayoutVertexArray,ft={};Ze.clear();for(var xt=0;xt<Qe.length;xt++){var st=Qe.get(xt),wt=st.hidden||!st.crossTileID||g.allowVerticalPlacement&&!st.placedOrientation?null:C[st.crossTileID];if(wt){var Lt=new a.Point(st.anchorX,st.anchorY),Nt=kn(Lt,y?se:ee),qt=Qa(Y.cameraToCenterDistance,Nt.signedDistanceFromCamera),Ht=U.evaluateSizeForFeature(g.textSizeData,Oe,st)*qt/a.ONE_EM;y&&(Ht*=g.tilePixelRatio/ve);for(var or=Ua(wt.anchor,wt.width,wt.height,wt.textOffset,wt.textBoxScale,Ht),vr=y?kn(Lt.add(or),ee).point:Nt.point.add(b?or.rotate(-Y.angle):or),Pr=g.allowVerticalPlacement&&st.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,Mr=0;Mr<st.numGlyphs;Mr++)a.addDynamicAttributes(Ze,vr,Pr);He&&st.associatedIconIndex>=0&&(ft[st.associatedIconIndex]={shiftedAnchor:vr,angle:Pr})}else Bs(st.numGlyphs,Ze)}if(He){mt.clear();for(var tn=g.icon.placedSymbolArray,Sn=0;Sn<tn.length;Sn++){var Ln=tn.get(Sn);if(Ln.hidden)Bs(Ln.numGlyphs,mt);else{var Bn=ft[Sn];if(Bn)for(var ji=0;ji<Ln.numGlyphs;ji++)a.addDynamicAttributes(mt,Bn.shiftedAnchor,Bn.angle);else Bs(Ln.numGlyphs,mt)}}g.icon.dynamicLayoutVertexBuffer.updateData(mt)}g.text.dynamicLayoutVertexBuffer.updateData(Ze)}function Nu(g,b,y){return y.iconsInText&&b?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function Bo(g,b,y,C,U,Y,ee,se,ve,Oe,He,Qe){for(var Ze=g.context,mt=Ze.gl,ft=g.transform,xt=se==="map",st=ve==="map",wt=xt&&y.layout.get("symbol-placement")!=="point",Lt=xt&&!st&&!wt,Nt=!y.layout.get("symbol-sort-key").isConstant(),qt=!1,Ht=g.depthModeForSublayer(0,et.ReadOnly),or=y.layout.get("text-variable-anchor"),vr=[],Pr=0,Mr=C;Pr<Mr.length;Pr+=1){var tn=Mr[Pr],Sn=b.getTile(tn),Ln=Sn.getBucket(y);if(Ln){var Bn=U?Ln.text:Ln.icon;if(Bn&&Bn.segments.get().length){var ji=Bn.programConfigurations.get(y.id),nn=U||Ln.sdfIcons,Zn=U?Ln.textSizeData:Ln.iconSizeData,mi=st||ft.pitch!==0,pi=g.useProgram(Nu(nn,U,Ln),ji),ci=a.evaluateSizeForZoom(Zn,ft.zoom),_i=void 0,ai=[0,0],xn=void 0,ca=void 0,Oa=null,va=void 0;if(U)xn=Sn.glyphAtlasTexture,ca=mt.LINEAR,_i=Sn.glyphAtlasTexture.size,Ln.iconsInText&&(ai=Sn.imageAtlasTexture.size,Oa=Sn.imageAtlasTexture,va=mi||g.options.rotating||g.options.zooming||Zn.kind==="composite"||Zn.kind==="camera"?mt.LINEAR:mt.NEAREST);else{var Ha=y.layout.get("icon-size").constantOr(0)!==1||Ln.iconsNeedLinear;xn=Sn.imageAtlasTexture,ca=nn||g.options.rotating||g.options.zooming||Ha||mi?mt.LINEAR:mt.NEAREST,_i=Sn.imageAtlasTexture.size}var yo=Ro(Sn,1,g.transform.zoom),_a=Dn(tn.posMatrix,st,xt,g.transform,yo),ys=$n(tn.posMatrix,st,xt,g.transform,yo),ho=or&&Ln.hasTextData(),fa=y.layout.get("icon-text-fit")!=="none"&&ho&&Ln.hasIconData();wt&&oo(Ln,tn.posMatrix,g,U,_a,ys,st,Oe);var vs=g.translatePosMatrix(tn.posMatrix,Sn,Y,ee),mu=wt||U&&or||fa?$u:_a,ns=g.translatePosMatrix(ys,Sn,Y,ee,!0),gu=nn&&y.paint.get(U?"text-halo-width":"icon-halo-width").constantOr(1)!==0,yu={program:pi,buffers:Bn,uniformValues:nn?Ln.iconsInText?Qs(Zn.kind,ci,Lt,st,g,vs,mu,ns,_i,ai):Ts(Zn.kind,ci,Lt,st,g,vs,mu,ns,U,_i,!0):Ac(Zn.kind,ci,Lt,st,g,vs,mu,ns,U,_i),atlasTexture:xn,atlasTextureIcon:Oa,atlasInterpolation:ca,atlasInterpolationIcon:va,isSDF:nn,hasHalo:gu};if(Nt&&Ln.canOverlap){qt=!0;for(var Jl=0,lc=Bn.segments.get();Jl<lc.length;Jl+=1){var Lh=lc[Jl];vr.push({segments:new a.SegmentVector([Lh]),sortKey:Lh.sortKey,state:yu})}}else vr.push({segments:Bn.segments,sortKey:0,state:yu})}}}qt&&vr.sort(function(Ll,Mc){return Ll.sortKey-Mc.sortKey});for(var nf=0,dl=vr;nf<dl.length;nf+=1){var Ic=dl[nf],Vo=Ic.state;if(Ze.activeTexture.set(mt.TEXTURE0),Vo.atlasTexture.bind(Vo.atlasInterpolation,mt.CLAMP_TO_EDGE),Vo.atlasTextureIcon&&(Ze.activeTexture.set(mt.TEXTURE1),Vo.atlasTextureIcon&&Vo.atlasTextureIcon.bind(Vo.atlasInterpolationIcon,mt.CLAMP_TO_EDGE)),Vo.isSDF){var zl=Vo.uniformValues;Vo.hasHalo&&(zl.u_is_halo=1,la(Vo.buffers,Ic.segments,y,g,Vo.program,Ht,He,Qe,zl)),zl.u_is_halo=0}la(Vo.buffers,Ic.segments,y,g,Vo.program,Ht,He,Qe,Vo.uniformValues)}}function la(g,b,y,C,U,Y,ee,se,ve){var Oe=C.context;U.draw(Oe,Oe.gl.TRIANGLES,Y,ee,se,Dt.disabled,ve,y.id,g.layoutVertexBuffer,g.indexBuffer,b,y.paint,C.transform.zoom,g.programConfigurations.get(y.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function ul(g,b,y,C,U,Y,ee){var se,ve,Oe,He,Qe,Ze=g.context.gl,mt=y.paint.get("fill-pattern"),ft=mt&&mt.constantOr(1),xt=y.getCrossfadeParameters();ee?(ve=ft&&!y.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",se=Ze.LINES):(ve=ft?"fillPattern":"fill",se=Ze.TRIANGLES);for(var st=0,wt=C;st<wt.length;st+=1){var Lt=wt[st],Nt=b.getTile(Lt);if(!ft||Nt.patternsLoaded()){var qt=Nt.getBucket(y);if(qt){var Ht=qt.programConfigurations.get(y.id),or=g.useProgram(ve,Ht);ft&&(g.context.activeTexture.set(Ze.TEXTURE0),Nt.imageAtlasTexture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE),Ht.updatePaintBuffers(xt));var vr=mt.constantOr(null);if(vr&&Nt.imageAtlas){var Pr=Nt.imageAtlas,Mr=Pr.patternPositions[vr.to.toString()],tn=Pr.patternPositions[vr.from.toString()];Mr&&tn&&Ht.setConstantPatternPositions(Mr,tn)}var Sn=g.translatePosMatrix(Lt.posMatrix,Nt,y.paint.get("fill-translate"),y.paint.get("fill-translate-anchor"));if(ee){He=qt.indexBuffer2,Qe=qt.segments2;var Ln=[Ze.drawingBufferWidth,Ze.drawingBufferHeight];Oe=ve==="fillOutlinePattern"&&ft?Hi(Sn,g,xt,Nt,Ln):Ti(Sn,Ln)}else He=qt.indexBuffer,Qe=qt.segments,Oe=ft?Un(Sn,g,xt,Nt):vn(Sn);or.draw(g.context,se,U,g.stencilModeForClipping(Lt),Y,Dt.disabled,Oe,y.id,qt.layoutVertexBuffer,He,Qe,y.paint,g.transform.zoom,Ht)}}}}function Bu(g,b,y,C,U,Y,ee){for(var se=g.context,ve=se.gl,Oe=y.paint.get("fill-extrusion-pattern"),He=Oe.constantOr(1),Qe=y.getCrossfadeParameters(),Ze=y.paint.get("fill-extrusion-opacity"),mt=0,ft=C;mt<ft.length;mt+=1){var xt=ft[mt],st=b.getTile(xt),wt=st.getBucket(y);if(wt){var Lt=wt.programConfigurations.get(y.id),Nt=g.useProgram(He?"fillExtrusionPattern":"fillExtrusion",Lt);He&&(g.context.activeTexture.set(ve.TEXTURE0),st.imageAtlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),Lt.updatePaintBuffers(Qe));var qt=Oe.constantOr(null);if(qt&&st.imageAtlas){var Ht=st.imageAtlas,or=Ht.patternPositions[qt.to.toString()],vr=Ht.patternPositions[qt.from.toString()];or&&vr&&Lt.setConstantPatternPositions(or,vr)}var Pr=g.translatePosMatrix(xt.posMatrix,st,y.paint.get("fill-extrusion-translate"),y.paint.get("fill-extrusion-translate-anchor")),Mr=y.paint.get("fill-extrusion-vertical-gradient"),tn=He?Vn(Pr,g,Mr,Ze,xt,Qe,st):sn(Pr,g,Mr,Ze);Nt.draw(se,se.gl.TRIANGLES,U,Y,ee,Dt.backCCW,tn,y.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,y.paint,g.transform.zoom,Lt)}}}function sc(g,b,y,C,U,Y){var ee=g.context,se=ee.gl,ve=b.fbo;if(ve){var Oe=g.useProgram("hillshade");ee.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_2D,ve.colorAttachment.get());var He=function(Qe,Ze,mt){var ft=mt.paint.get("hillshade-shadow-color"),xt=mt.paint.get("hillshade-highlight-color"),st=mt.paint.get("hillshade-accent-color"),wt=mt.paint.get("hillshade-illumination-direction")*(Math.PI/180);mt.paint.get("hillshade-illumination-anchor")==="viewport"&&(wt-=Qe.transform.angle);var Lt,Nt,qt,Ht=!Qe.options.moving;return{u_matrix:Qe.transform.calculatePosMatrix(Ze.tileID.toUnwrapped(),Ht),u_image:0,u_latrange:(Lt=Ze.tileID,Nt=Math.pow(2,Lt.canonical.z),qt=Lt.canonical.y,[new a.MercatorCoordinate(0,qt/Nt).toLngLat().lat,new a.MercatorCoordinate(0,(qt+1)/Nt).toLngLat().lat]),u_light:[mt.paint.get("hillshade-exaggeration"),wt],u_shadow:ft,u_highlight:xt,u_accent:st}}(g,b,y);Oe.draw(ee,se.TRIANGLES,C,U,Y,Dt.disabled,He,y.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}}function As(g,b,y,C,U,Y){var ee=g.context,se=ee.gl,ve=b.dem;if(ve&&ve.data){var Oe=ve.dim,He=ve.stride,Qe=ve.getPixels();if(ee.activeTexture.set(se.TEXTURE1),ee.pixelStoreUnpackPremultiplyAlpha.set(!1),b.demTexture=b.demTexture||g.getTileTexture(He),b.demTexture){var Ze=b.demTexture;Ze.update(Qe,{premultiply:!1}),Ze.bind(se.NEAREST,se.CLAMP_TO_EDGE)}else b.demTexture=new a.Texture(ee,Qe,se.RGBA,{premultiply:!1}),b.demTexture.bind(se.NEAREST,se.CLAMP_TO_EDGE);ee.activeTexture.set(se.TEXTURE0);var mt=b.fbo;if(!mt){var ft=new a.Texture(ee,{width:Oe,height:Oe,data:null},se.RGBA);ft.bind(se.LINEAR,se.CLAMP_TO_EDGE),(mt=b.fbo=ee.createFramebuffer(Oe,Oe,!0)).colorAttachment.set(ft.texture)}ee.bindFramebuffer.set(mt.framebuffer),ee.viewport.set([0,0,Oe,Oe]),g.useProgram("hillshadePrepare").draw(ee,se.TRIANGLES,C,U,Y,Dt.disabled,function(xt,st){var wt=st.stride,Lt=a.create();return a.ortho(Lt,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(Lt,Lt,[0,-a.EXTENT,0]),{u_matrix:Lt,u_image:1,u_dimension:[wt,wt],u_zoom:xt.overscaledZ,u_unpack:st.getUnpackVector()}}(b.tileID,ve),y.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments),b.needsHillshadePrepare=!1}}function ds(g,b,y,C,U){var Y=C.paint.get("raster-fade-duration");if(Y>0){var ee=a.browser.now(),se=(ee-g.timeAdded)/Y,ve=b?(ee-b.timeAdded)/Y:-1,Oe=y.getSource(),He=U.coveringZoomLevel({tileSize:Oe.tileSize,roundZoom:Oe.roundZoom}),Qe=!b||Math.abs(b.tileID.overscaledZ-He)>Math.abs(g.tileID.overscaledZ-He),Ze=Qe&&g.refreshedUponExpiration?1:a.clamp(Qe?se:1-ve,0,1);return g.refreshedUponExpiration&&se>=1&&(g.refreshedUponExpiration=!1),b?{opacity:1,mix:1-Ze}:{opacity:Ze,mix:0}}return{opacity:1,mix:0}}var fu=new a.Color(1,0,0,1),Fu=new a.Color(0,1,0,1),Dh=new a.Color(0,0,1,1),kc=new a.Color(1,0,1,1),Uu=new a.Color(0,1,1,1);function ms(g,b,y,C){jt(g,0,b+y/2,g.transform.width,y,C)}function cl(g,b,y,C){jt(g,b-y/2,0,y,g.transform.height,C)}function jt(g,b,y,C,U,Y){var ee=g.context,se=ee.gl;se.enable(se.SCISSOR_TEST),se.scissor(b*a.browser.devicePixelRatio,y*a.browser.devicePixelRatio,C*a.browser.devicePixelRatio,U*a.browser.devicePixelRatio),ee.clear({color:Y}),se.disable(se.SCISSOR_TEST)}function kr(g,b,y){var C=g.context,U=C.gl,Y=y.posMatrix,ee=g.useProgram("debug"),se=et.disabled,ve=ht.disabled,Oe=g.colorModeForRenderPass();C.activeTexture.set(U.TEXTURE0),g.emptyTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),ee.draw(C,U.LINE_STRIP,se,ve,Oe,Dt.disabled,wo(Y,a.Color.red),"$debug",g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments);var He=b.getTileByID(y.key).latestRawTileData,Qe=Math.floor((He&&He.byteLength||0)/1024),Ze=b.getTile(y).tileSize,mt=512/Math.min(Ze,512)*(y.overscaledZ/g.transform.zoom)*.5,ft=y.canonical.toString();y.overscaledZ!==y.canonical.z&&(ft+=" => "+y.overscaledZ),function(xt,st){xt.initDebugOverlayCanvas();var wt=xt.debugOverlayCanvas,Lt=xt.context.gl,Nt=xt.debugOverlayCanvas.getContext("2d");Nt.clearRect(0,0,wt.width,wt.height),Nt.shadowColor="white",Nt.shadowBlur=2,Nt.lineWidth=1.5,Nt.strokeStyle="white",Nt.textBaseline="top",Nt.font="bold 36px Open Sans, sans-serif",Nt.fillText(st,5,5),Nt.strokeText(st,5,5),xt.debugOverlayTexture.update(wt),xt.debugOverlayTexture.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE)}(g,ft+" "+Qe+"kb"),ee.draw(C,U.TRIANGLES,se,ve,Ct.alphaBlended,Dt.disabled,wo(Y,a.Color.transparent,mt),"$debug",g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments)}var pr={symbol:function(g,b,y,C,U){if(g.renderPass==="translucent"){var Y=ht.disabled,ee=g.colorModeForRenderPass();y.layout.get("text-variable-anchor")&&function(se,ve,Oe,He,Qe,Ze,mt){for(var ft=ve.transform,xt=Qe==="map",st=Ze==="map",wt=0,Lt=se;wt<Lt.length;wt+=1){var Nt=Lt[wt],qt=He.getTile(Nt),Ht=qt.getBucket(Oe);if(Ht&&Ht.text&&Ht.text.segments.get().length){var or=a.evaluateSizeForZoom(Ht.textSizeData,ft.zoom),vr=Ro(qt,1,ve.transform.zoom),Pr=Dn(Nt.posMatrix,st,xt,ve.transform,vr),Mr=Oe.layout.get("icon-text-fit")!=="none"&&Ht.hasIconData();if(or){var tn=Math.pow(2,ft.zoom-qt.tileID.overscaledZ);Zl(Ht,xt,st,mt,a.symbolSize,ft,Pr,Nt.posMatrix,tn,or,Mr)}}}}(C,g,y,b,y.layout.get("text-rotation-alignment"),y.layout.get("text-pitch-alignment"),U),y.paint.get("icon-opacity").constantOr(1)!==0&&Bo(g,b,y,C,!1,y.paint.get("icon-translate"),y.paint.get("icon-translate-anchor"),y.layout.get("icon-rotation-alignment"),y.layout.get("icon-pitch-alignment"),y.layout.get("icon-keep-upright"),Y,ee),y.paint.get("text-opacity").constantOr(1)!==0&&Bo(g,b,y,C,!0,y.paint.get("text-translate"),y.paint.get("text-translate-anchor"),y.layout.get("text-rotation-alignment"),y.layout.get("text-pitch-alignment"),y.layout.get("text-keep-upright"),Y,ee),b.map.showCollisionBoxes&&(Ml(g,b,y,C,y.paint.get("text-translate"),y.paint.get("text-translate-anchor"),!0),Ml(g,b,y,C,y.paint.get("icon-translate"),y.paint.get("icon-translate-anchor"),!1))}},circle:function(g,b,y,C){if(g.renderPass==="translucent"){var U=y.paint.get("circle-opacity"),Y=y.paint.get("circle-stroke-width"),ee=y.paint.get("circle-stroke-opacity"),se=!y.layout.get("circle-sort-key").isConstant();if(U.constantOr(1)!==0||Y.constantOr(1)!==0&&ee.constantOr(1)!==0){for(var ve=g.context,Oe=ve.gl,He=g.depthModeForSublayer(0,et.ReadOnly),Qe=ht.disabled,Ze=g.colorModeForRenderPass(),mt=[],ft=0;ft<C.length;ft++){var xt=C[ft],st=b.getTile(xt),wt=st.getBucket(y);if(wt){var Lt=wt.programConfigurations.get(y.id),Nt={programConfiguration:Lt,program:g.useProgram("circle",Lt),layoutVertexBuffer:wt.layoutVertexBuffer,indexBuffer:wt.indexBuffer,uniformValues:Yn(g,xt,st,y)};if(se)for(var qt=0,Ht=wt.segments.get();qt<Ht.length;qt+=1){var or=Ht[qt];mt.push({segments:new a.SegmentVector([or]),sortKey:or.sortKey,state:Nt})}else mt.push({segments:wt.segments,sortKey:0,state:Nt})}}se&&mt.sort(function(Sn,Ln){return Sn.sortKey-Ln.sortKey});for(var vr=0,Pr=mt;vr<Pr.length;vr+=1){var Mr=Pr[vr],tn=Mr.state;tn.program.draw(ve,Oe.TRIANGLES,He,Qe,Ze,Dt.disabled,tn.uniformValues,y.id,tn.layoutVertexBuffer,tn.indexBuffer,Mr.segments,y.paint,g.transform.zoom,tn.programConfiguration)}}}},heatmap:function(g,b,y,C){if(y.paint.get("heatmap-opacity")!==0)if(g.renderPass==="offscreen"){var U=g.context,Y=U.gl,ee=ht.disabled,se=new Ct([Y.ONE,Y.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(mt,ft,xt){var st=mt.gl;mt.activeTexture.set(st.TEXTURE1),mt.viewport.set([0,0,ft.width/4,ft.height/4]);var wt=xt.heatmapFbo;if(wt)st.bindTexture(st.TEXTURE_2D,wt.colorAttachment.get()),mt.bindFramebuffer.set(wt.framebuffer);else{var Lt=st.createTexture();st.bindTexture(st.TEXTURE_2D,Lt),st.texParameteri(st.TEXTURE_2D,st.TEXTURE_WRAP_S,st.CLAMP_TO_EDGE),st.texParameteri(st.TEXTURE_2D,st.TEXTURE_WRAP_T,st.CLAMP_TO_EDGE),st.texParameteri(st.TEXTURE_2D,st.TEXTURE_MIN_FILTER,st.LINEAR),st.texParameteri(st.TEXTURE_2D,st.TEXTURE_MAG_FILTER,st.LINEAR),wt=xt.heatmapFbo=mt.createFramebuffer(ft.width/4,ft.height/4,!1),function(Nt,qt,Ht,or){var vr=Nt.gl;vr.texImage2D(vr.TEXTURE_2D,0,vr.RGBA,qt.width/4,qt.height/4,0,vr.RGBA,Nt.extRenderToTextureHalfFloat?Nt.extTextureHalfFloat.HALF_FLOAT_OES:vr.UNSIGNED_BYTE,null),or.colorAttachment.set(Ht)}(mt,ft,Lt,wt)}})(U,g,y),U.clear({color:a.Color.transparent});for(var ve=0;ve<C.length;ve++){var Oe=C[ve];if(!b.hasRenderableParent(Oe)){var He=b.getTile(Oe),Qe=He.getBucket(y);if(Qe){var Ze=Qe.programConfigurations.get(y.id);g.useProgram("heatmap",Ze).draw(U,Y.TRIANGLES,et.disabled,ee,se,Dt.disabled,sa(Oe.posMatrix,He,g.transform.zoom,y.paint.get("heatmap-intensity")),y.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,y.paint,g.transform.zoom,Ze)}}}U.viewport.set([0,0,g.width,g.height])}else g.renderPass==="translucent"&&(g.context.setColorMode(g.colorModeForRenderPass()),function(mt,ft){var xt=mt.context,st=xt.gl,wt=ft.heatmapFbo;if(wt){xt.activeTexture.set(st.TEXTURE0),st.bindTexture(st.TEXTURE_2D,wt.colorAttachment.get()),xt.activeTexture.set(st.TEXTURE1);var Lt=ft.colorRampTexture;Lt||(Lt=ft.colorRampTexture=new a.Texture(xt,ft.colorRamp,st.RGBA)),Lt.bind(st.LINEAR,st.CLAMP_TO_EDGE),mt.useProgram("heatmapTexture").draw(xt,st.TRIANGLES,et.disabled,ht.disabled,mt.colorModeForRenderPass(),Dt.disabled,function(Nt,qt,Ht,or){var vr=a.create();a.ortho(vr,0,Nt.width,Nt.height,0,0,1);var Pr=Nt.context.gl;return{u_matrix:vr,u_world:[Pr.drawingBufferWidth,Pr.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:qt.paint.get("heatmap-opacity")}}(mt,ft),ft.id,mt.viewportBuffer,mt.quadTriangleIndexBuffer,mt.viewportSegments,ft.paint,mt.transform.zoom)}}(g,y))},line:function(g,b,y,C){if(g.renderPass==="translucent"){var U=y.paint.get("line-opacity"),Y=y.paint.get("line-width");if(U.constantOr(1)!==0&&Y.constantOr(1)!==0)for(var ee=g.depthModeForSublayer(0,et.ReadOnly),se=g.colorModeForRenderPass(),ve=y.paint.get("line-dasharray"),Oe=y.paint.get("line-pattern"),He=Oe.constantOr(1),Qe=y.paint.get("line-gradient"),Ze=y.getCrossfadeParameters(),mt=He?"linePattern":ve?"lineSDF":Qe?"lineGradient":"line",ft=g.context,xt=ft.gl,st=!0,wt=0,Lt=C;wt<Lt.length;wt+=1){var Nt=Lt[wt],qt=b.getTile(Nt);if(!He||qt.patternsLoaded()){var Ht=qt.getBucket(y);if(Ht){var or=Ht.programConfigurations.get(y.id),vr=g.context.program.get(),Pr=g.useProgram(mt,or),Mr=st||Pr.program!==vr,tn=Oe.constantOr(null);if(tn&&qt.imageAtlas){var Sn=qt.imageAtlas,Ln=Sn.patternPositions[tn.to.toString()],Bn=Sn.patternPositions[tn.from.toString()];Ln&&Bn&&or.setConstantPatternPositions(Ln,Bn)}var ji=He?wi(g,qt,y,Ze):ve?Vs(g,qt,y,ve,Ze):Qe?eo(g,qt,y,Ht.lineClipsArray.length):Na(g,qt,y);if(He)ft.activeTexture.set(xt.TEXTURE0),qt.imageAtlasTexture.bind(xt.LINEAR,xt.CLAMP_TO_EDGE),or.updatePaintBuffers(Ze);else if(ve&&(Mr||g.lineAtlas.dirty))ft.activeTexture.set(xt.TEXTURE0),g.lineAtlas.bind(ft);else if(Qe){var nn=Ht.gradients[y.id],Zn=nn.texture;if(y.gradientVersion!==nn.version){var mi=256;if(y.stepInterpolant){var pi=b.getSource().maxzoom,ci=Nt.canonical.z===pi?Math.ceil(1<<g.transform.maxZoom-Nt.canonical.z):1;mi=a.clamp(a.nextPowerOfTwo(Ht.maxLineLength/a.EXTENT*1024*ci),256,ft.maxTextureSize)}nn.gradient=a.renderColorRamp({expression:y.gradientExpression(),evaluationKey:"lineProgress",resolution:mi,image:nn.gradient||void 0,clips:Ht.lineClipsArray}),nn.texture?nn.texture.update(nn.gradient):nn.texture=new a.Texture(ft,nn.gradient,xt.RGBA),nn.version=y.gradientVersion,Zn=nn.texture}ft.activeTexture.set(xt.TEXTURE0),Zn.bind(y.stepInterpolant?xt.NEAREST:xt.LINEAR,xt.CLAMP_TO_EDGE)}Pr.draw(ft,xt.TRIANGLES,ee,g.stencilModeForClipping(Nt),se,Dt.disabled,ji,y.id,Ht.layoutVertexBuffer,Ht.indexBuffer,Ht.segments,y.paint,g.transform.zoom,or,Ht.layoutVertexBuffer2),st=!1}}}}},fill:function(g,b,y,C){var U=y.paint.get("fill-color"),Y=y.paint.get("fill-opacity");if(Y.constantOr(1)!==0){var ee=g.colorModeForRenderPass(),se=y.paint.get("fill-pattern"),ve=g.opaquePassEnabledForLayer()&&!se.constantOr(1)&&U.constantOr(a.Color.transparent).a===1&&Y.constantOr(0)===1?"opaque":"translucent";if(g.renderPass===ve){var Oe=g.depthModeForSublayer(1,g.renderPass==="opaque"?et.ReadWrite:et.ReadOnly);ul(g,b,y,C,Oe,ee,!1)}if(g.renderPass==="translucent"&&y.paint.get("fill-antialias")){var He=g.depthModeForSublayer(y.getPaintProperty("fill-outline-color")?2:0,et.ReadOnly);ul(g,b,y,C,He,ee,!0)}}},"fill-extrusion":function(g,b,y,C){var U=y.paint.get("fill-extrusion-opacity");if(U!==0&&g.renderPass==="translucent"){var Y=new et(g.context.gl.LEQUAL,et.ReadWrite,g.depthRangeFor3D);if(U!==1||y.paint.get("fill-extrusion-pattern").constantOr(1))Bu(g,b,y,C,Y,ht.disabled,Ct.disabled),Bu(g,b,y,C,Y,g.stencilModeFor3D(),g.colorModeForRenderPass());else{var ee=g.colorModeForRenderPass();Bu(g,b,y,C,Y,ht.disabled,ee)}}},hillshade:function(g,b,y,C){if(g.renderPass==="offscreen"||g.renderPass==="translucent"){for(var U=g.context,Y=g.depthModeForSublayer(0,et.ReadOnly),ee=g.colorModeForRenderPass(),se=g.renderPass==="translucent"?g.stencilConfigForOverlap(C):[{},C],ve=se[0],Oe=0,He=se[1];Oe<He.length;Oe+=1){var Qe=He[Oe],Ze=b.getTile(Qe);Ze.needsHillshadePrepare&&g.renderPass==="offscreen"?As(g,Ze,y,Y,ht.disabled,ee):g.renderPass==="translucent"&&sc(g,Ze,y,Y,ve[Qe.overscaledZ],ee)}U.viewport.set([0,0,g.width,g.height])}},raster:function(g,b,y,C){if(g.renderPass==="translucent"&&y.paint.get("raster-opacity")!==0&&C.length)for(var U=g.context,Y=U.gl,ee=b.getSource(),se=g.useProgram("raster"),ve=g.colorModeForRenderPass(),Oe=ee instanceof Ye?[{},C]:g.stencilConfigForOverlap(C),He=Oe[0],Qe=Oe[1],Ze=Qe[Qe.length-1].overscaledZ,mt=!g.options.moving,ft=0,xt=Qe;ft<xt.length;ft+=1){var st=xt[ft],wt=g.depthModeForSublayer(st.overscaledZ-Ze,y.paint.get("raster-opacity")===1?et.ReadWrite:et.ReadOnly,Y.LESS),Lt=b.getTile(st),Nt=g.transform.calculatePosMatrix(st.toUnwrapped(),mt);Lt.registerFadeDuration(y.paint.get("raster-fade-duration"));var qt=b.findLoadedParent(st,0),Ht=ds(Lt,qt,b,y,g.transform),or=void 0,vr=void 0,Pr=y.paint.get("raster-resampling")==="nearest"?Y.NEAREST:Y.LINEAR;U.activeTexture.set(Y.TEXTURE0),Lt.texture.bind(Pr,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST),U.activeTexture.set(Y.TEXTURE1),qt?(qt.texture.bind(Pr,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST),or=Math.pow(2,qt.tileID.overscaledZ-Lt.tileID.overscaledZ),vr=[Lt.tileID.canonical.x*or%1,Lt.tileID.canonical.y*or%1]):Lt.texture.bind(Pr,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST);var Mr=rs(Nt,vr||[0,0],or||1,Ht,y);ee instanceof Ye?se.draw(U,Y.TRIANGLES,wt,ht.disabled,ve,Dt.disabled,Mr,y.id,ee.boundsBuffer,g.quadTriangleIndexBuffer,ee.boundsSegments):se.draw(U,Y.TRIANGLES,wt,He[st.overscaledZ],ve,Dt.disabled,Mr,y.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}},background:function(g,b,y){var C=y.paint.get("background-color"),U=y.paint.get("background-opacity");if(U!==0){var Y=g.context,ee=Y.gl,se=g.transform,ve=se.tileSize,Oe=y.paint.get("background-pattern");if(!g.isPatternMissing(Oe)){var He=!Oe&&C.a===1&&U===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass===He){var Qe=ht.disabled,Ze=g.depthModeForSublayer(0,He==="opaque"?et.ReadWrite:et.ReadOnly),mt=g.colorModeForRenderPass(),ft=g.useProgram(Oe?"backgroundPattern":"background"),xt=se.coveringTiles({tileSize:ve});Oe&&(Y.activeTexture.set(ee.TEXTURE0),g.imageManager.bind(g.context));for(var st=y.getCrossfadeParameters(),wt=0,Lt=xt;wt<Lt.length;wt+=1){var Nt=Lt[wt],qt=g.transform.calculatePosMatrix(Nt.toUnwrapped()),Ht=Oe?Lu(qt,U,g,Oe,{tileID:Nt,tileSize:ve},st):qs(qt,U,C);ft.draw(Y,ee.TRIANGLES,Ze,Qe,mt,Dt.disabled,Ht,y.id,g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}}}}},debug:function(g,b,y){for(var C=0;C<y.length;C++)kr(g,b,y[C])},custom:function(g,b,y){var C=g.context,U=y.implementation;if(g.renderPass==="offscreen"){var Y=U.prerender;Y&&(g.setCustomLayerDefaults(),C.setColorMode(g.colorModeForRenderPass()),Y.call(U,C.gl,g.transform.customLayerMatrix()),C.setDirty(),g.setBaseState())}else if(g.renderPass==="translucent"){g.setCustomLayerDefaults(),C.setColorMode(g.colorModeForRenderPass()),C.setStencilMode(ht.disabled);var ee=U.renderingMode==="3d"?new et(g.context.gl.LEQUAL,et.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,et.ReadOnly);C.setDepthMode(ee),U.render(C.gl,g.transform.customLayerMatrix()),C.setDirty(),g.setBaseState(),C.bindFramebuffer.set(null)}}},Jr=function(g,b){this.context=new Et(g),this.transform=b,this._tileTextures={},this.setup(),this.numSublayers=Je.maxUnderzooming+Je.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ol,this.gpuTimers={}};Jr.prototype.resize=function(g,b){if(this.width=g*a.browser.devicePixelRatio,this.height=b*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var y=0,C=this.style._order;y<C.length;y+=1)this.style._layers[C[y]].resize()},Jr.prototype.setup=function(){var g=this.context,b=new a.StructArrayLayout2i4;b.emplaceBack(0,0),b.emplaceBack(a.EXTENT,0),b.emplaceBack(0,a.EXTENT),b.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=g.createVertexBuffer(b,js.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var y=new a.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(a.EXTENT,0),y.emplaceBack(0,a.EXTENT),y.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=g.createVertexBuffer(y,js.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var C=new a.StructArrayLayout4i8;C.emplaceBack(0,0,0,0),C.emplaceBack(a.EXTENT,0,a.EXTENT,0),C.emplaceBack(0,a.EXTENT,0,a.EXTENT),C.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=g.createVertexBuffer(C,Ge.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var U=new a.StructArrayLayout2i4;U.emplaceBack(0,0),U.emplaceBack(1,0),U.emplaceBack(0,1),U.emplaceBack(1,1),this.viewportBuffer=g.createVertexBuffer(U,js.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var Y=new a.StructArrayLayout1ui2;Y.emplaceBack(0),Y.emplaceBack(1),Y.emplaceBack(3),Y.emplaceBack(2),Y.emplaceBack(0),this.tileBorderIndexBuffer=g.createIndexBuffer(Y);var ee=new a.StructArrayLayout3ui6;ee.emplaceBack(0,1,2),ee.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=g.createIndexBuffer(ee),this.emptyTexture=new a.Texture(g,{width:1,height:1,data:new Uint8Array([0,0,0,0])},g.gl.RGBA);var se=this.context.gl;this.stencilClearMode=new ht({func:se.ALWAYS,mask:0},0,255,se.ZERO,se.ZERO,se.ZERO)},Jr.prototype.clearStencil=function(){var g=this.context,b=g.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var y=a.create();a.ortho(y,0,this.width,this.height,0,0,1),a.scale(y,y,[b.drawingBufferWidth,b.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(g,b.TRIANGLES,et.disabled,this.stencilClearMode,Ct.disabled,Dt.disabled,Wn(y),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Jr.prototype._renderTileClippingMasks=function(g,b){if(this.currentStencilSource!==g.source&&g.isTileClipped()&&b&&b.length){this.currentStencilSource=g.source;var y=this.context,C=y.gl;this.nextStencilID+b.length>256&&this.clearStencil(),y.setColorMode(Ct.disabled),y.setDepthMode(et.disabled);var U=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Y=0,ee=b;Y<ee.length;Y+=1){var se=ee[Y],ve=this._tileClippingMaskIDs[se.key]=this.nextStencilID++;U.draw(y,C.TRIANGLES,et.disabled,new ht({func:C.ALWAYS,mask:0},ve,255,C.KEEP,C.KEEP,C.REPLACE),Ct.disabled,Dt.disabled,Wn(se.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Jr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var g=this.nextStencilID++,b=this.context.gl;return new ht({func:b.NOTEQUAL,mask:255},g,255,b.KEEP,b.KEEP,b.REPLACE)},Jr.prototype.stencilModeForClipping=function(g){var b=this.context.gl;return new ht({func:b.EQUAL,mask:255},this._tileClippingMaskIDs[g.key],0,b.KEEP,b.KEEP,b.REPLACE)},Jr.prototype.stencilConfigForOverlap=function(g){var b,y=this.context.gl,C=g.sort(function(ve,Oe){return Oe.overscaledZ-ve.overscaledZ}),U=C[C.length-1].overscaledZ,Y=C[0].overscaledZ-U+1;if(Y>1){this.currentStencilSource=void 0,this.nextStencilID+Y>256&&this.clearStencil();for(var ee={},se=0;se<Y;se++)ee[se+U]=new ht({func:y.GEQUAL,mask:255},se+this.nextStencilID,255,y.KEEP,y.KEEP,y.REPLACE);return this.nextStencilID+=Y,[ee,C]}return[(b={},b[U]=ht.disabled,b),C]},Jr.prototype.colorModeForRenderPass=function(){var g=this.context.gl;return this._showOverdrawInspector?new Ct([g.CONSTANT_COLOR,g.ONE],new a.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ct.unblended:Ct.alphaBlended},Jr.prototype.depthModeForSublayer=function(g,b,y){if(!this.opaquePassEnabledForLayer())return et.disabled;var C=1-((1+this.currentLayer)*this.numSublayers+g)*this.depthEpsilon;return new et(y||this.context.gl.LEQUAL,b,[C,C])},Jr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Jr.prototype.render=function(g,b){var y=this;this.style=g,this.options=b,this.lineAtlas=g.lineAtlas,this.imageManager=g.imageManager,this.glyphManager=g.glyphManager,this.symbolFadeChange=g.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var C=this.style._order,U=this.style.sourceCaches;for(var Y in U){var ee=U[Y];ee.used&&ee.prepare(this.context)}var se,ve,Oe={},He={},Qe={};for(var Ze in U){var mt=U[Ze];Oe[Ze]=mt.getVisibleCoordinates(),He[Ze]=Oe[Ze].slice().reverse(),Qe[Ze]=mt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ft=0;ft<C.length;ft++)if(this.style._layers[C[ft]].is3D()){this.opaquePassCutoff=ft;break}this.renderPass="offscreen";for(var xt=0,st=C;xt<st.length;xt+=1){var wt=this.style._layers[st[xt]];if(wt.hasOffscreenPass()&&!wt.isHidden(this.transform.zoom)){var Lt=He[wt.source];(wt.type==="custom"||Lt.length)&&this.renderLayer(this,U[wt.source],wt,Lt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:b.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=b.showOverdrawInspector,this.depthRangeFor3D=[0,1-(g._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=C.length-1;this.currentLayer>=0;this.currentLayer--){var Nt=this.style._layers[C[this.currentLayer]],qt=U[Nt.source],Ht=Oe[Nt.source];this._renderTileClippingMasks(Nt,Ht),this.renderLayer(this,qt,Nt,Ht)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<C.length;this.currentLayer++){var or=this.style._layers[C[this.currentLayer]],vr=U[or.source],Pr=(or.type==="symbol"?Qe:He)[or.source];this._renderTileClippingMasks(or,Oe[or.source]),this.renderLayer(this,vr,or,Pr)}this.options.showTileBoundaries&&(a.values(this.style._layers).forEach(function(Mr){Mr.source&&!Mr.isHidden(y.transform.zoom)&&(Mr.source!==(ve&&ve.id)&&(ve=y.style.sourceCaches[Mr.source]),(!se||se.getSource().maxzoom<ve.getSource().maxzoom)&&(se=ve))}),se&&pr.debug(this,se,se.getVisibleCoordinates())),this.options.showPadding&&function(Mr){var tn=Mr.transform.padding;ms(Mr,Mr.transform.height-(tn.top||0),3,fu),ms(Mr,tn.bottom||0,3,Fu),cl(Mr,tn.left||0,3,Dh),cl(Mr,Mr.transform.width-(tn.right||0),3,kc);var Sn=Mr.transform.centerPoint;(function(Ln,Bn,ji,nn){jt(Ln,Bn-1,ji-10,2,20,nn),jt(Ln,Bn-10,ji-1,20,2,nn)})(Mr,Sn.x,Mr.transform.height-Sn.y,Uu)}(this),this.context.setDefault()},Jr.prototype.renderLayer=function(g,b,y,C){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="custom"||C.length)&&(this.id=y.id,this.gpuTimingStart(y),pr[y.type](g,b,y,C,this.style.placement.variableOffsets),this.gpuTimingEnd())},Jr.prototype.gpuTimingStart=function(g){if(this.options.gpuTiming){var b=this.context.extTimerQuery,y=this.gpuTimers[g.id];y||(y=this.gpuTimers[g.id]={calls:0,cpuTime:0,query:b.createQueryEXT()}),y.calls++,b.beginQueryEXT(b.TIME_ELAPSED_EXT,y.query)}},Jr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var g=this.context.extTimerQuery;g.endQueryEXT(g.TIME_ELAPSED_EXT)}},Jr.prototype.collectGpuTimers=function(){var g=this.gpuTimers;return this.gpuTimers={},g},Jr.prototype.queryGpuTimers=function(g){var b={};for(var y in g){var C=g[y],U=this.context.extTimerQuery,Y=U.getQueryObjectEXT(C.query,U.QUERY_RESULT_EXT)/1e6;U.deleteQueryEXT(C.query),b[y]=Y}return b},Jr.prototype.translatePosMatrix=function(g,b,y,C,U){if(!y[0]&&!y[1])return g;var Y=U?C==="map"?this.transform.angle:0:C==="viewport"?-this.transform.angle:0;if(Y){var ee=Math.sin(Y),se=Math.cos(Y);y=[y[0]*se-y[1]*ee,y[0]*ee+y[1]*se]}var ve=[U?y[0]:Ro(b,y[0],this.transform.zoom),U?y[1]:Ro(b,y[1],this.transform.zoom),0],Oe=new Float32Array(16);return a.translate(Oe,g,ve),Oe},Jr.prototype.saveTileTexture=function(g){var b=this._tileTextures[g.size[0]];b?b.push(g):this._tileTextures[g.size[0]]=[g]},Jr.prototype.getTileTexture=function(g){var b=this._tileTextures[g];return b&&b.length>0?b.pop():null},Jr.prototype.isPatternMissing=function(g){if(!g)return!1;if(!g.from||!g.to)return!0;var b=this.imageManager.getPattern(g.from.toString()),y=this.imageManager.getPattern(g.to.toString());return!b||!y},Jr.prototype.useProgram=function(g,b){this.cache=this.cache||{};var y=""+g+(b?b.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[y]||(this.cache[y]=new Gn(this.context,g,yn[g],b,ll[g],this._showOverdrawInspector)),this.cache[y]},Jr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Jr.prototype.setBaseState=function(){var g=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(g.FUNC_ADD)},Jr.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Jr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var hi=function(g,b){this.points=g,this.planes=b};hi.fromInvProjectionMatrix=function(g,b,y){var C=Math.pow(2,y),U=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(ee){return a.transformMat4([],ee,g)}).map(function(ee){return a.scale$1([],ee,1/ee[3]/b*C)}),Y=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(ee){var se=a.sub([],U[ee[0]],U[ee[1]]),ve=a.sub([],U[ee[2]],U[ee[1]]),Oe=a.normalize([],a.cross([],se,ve)),He=-a.dot(Oe,U[ee[1]]);return Oe.concat(He)});return new hi(U,Y)};var Wi=function(g,b){this.min=g,this.max=b,this.center=a.scale$2([],a.add([],this.min,this.max),.5)};Wi.prototype.quadrant=function(g){for(var b=[g%2==0,g<2],y=a.clone$2(this.min),C=a.clone$2(this.max),U=0;U<b.length;U++)y[U]=b[U]?this.min[U]:this.center[U],C[U]=b[U]?this.center[U]:this.max[U];return C[2]=this.max[2],new Wi(y,C)},Wi.prototype.distanceX=function(g){return Math.max(Math.min(this.max[0],g[0]),this.min[0])-g[0]},Wi.prototype.distanceY=function(g){return Math.max(Math.min(this.max[1],g[1]),this.min[1])-g[1]},Wi.prototype.intersects=function(g){for(var b=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],y=!0,C=0;C<g.planes.length;C++){for(var U=g.planes[C],Y=0,ee=0;ee<b.length;ee++)Y+=a.dot$1(U,b[ee])>=0;if(Y===0)return 0;Y!==b.length&&(y=!1)}if(y)return 2;for(var se=0;se<3;se++){for(var ve=Number.MAX_VALUE,Oe=-Number.MAX_VALUE,He=0;He<g.points.length;He++){var Qe=g.points[He][se]-this.min[se];ve=Math.min(ve,Qe),Oe=Math.max(Oe,Qe)}if(Oe<0||ve>this.max[se]-this.min[se])return 0}return 1};var ja=function(g,b,y,C){if(g===void 0&&(g=0),b===void 0&&(b=0),y===void 0&&(y=0),C===void 0&&(C=0),isNaN(g)||g<0||isNaN(b)||b<0||isNaN(y)||y<0||isNaN(C)||C<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=g,this.bottom=b,this.left=y,this.right=C};ja.prototype.interpolate=function(g,b,y){return b.top!=null&&g.top!=null&&(this.top=a.number(g.top,b.top,y)),b.bottom!=null&&g.bottom!=null&&(this.bottom=a.number(g.bottom,b.bottom,y)),b.left!=null&&g.left!=null&&(this.left=a.number(g.left,b.left,y)),b.right!=null&&g.right!=null&&(this.right=a.number(g.right,b.right,y)),this},ja.prototype.getCenter=function(g,b){var y=a.clamp((this.left+g-this.right)/2,0,g),C=a.clamp((this.top+b-this.bottom)/2,0,b);return new a.Point(y,C)},ja.prototype.equals=function(g){return this.top===g.top&&this.bottom===g.bottom&&this.left===g.left&&this.right===g.right},ja.prototype.clone=function(){return new ja(this.top,this.bottom,this.left,this.right)},ja.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ii=function(g,b,y,C,U){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=U===void 0||U,this._minZoom=g||0,this._maxZoom=b||22,this._minPitch=y??0,this._maxPitch=C??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ja,this._posMatrixCache={},this._alignedPosMatrixCache={}},Zi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ii.prototype.clone=function(){var g=new ii(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return g.tileSize=this.tileSize,g.latRange=this.latRange,g.width=this.width,g.height=this.height,g._center=this._center,g.zoom=this.zoom,g.angle=this.angle,g._fov=this._fov,g._pitch=this._pitch,g._unmodified=this._unmodified,g._edgeInsets=this._edgeInsets.clone(),g._calcMatrices(),g},Zi.minZoom.get=function(){return this._minZoom},Zi.minZoom.set=function(g){this._minZoom!==g&&(this._minZoom=g,this.zoom=Math.max(this.zoom,g))},Zi.maxZoom.get=function(){return this._maxZoom},Zi.maxZoom.set=function(g){this._maxZoom!==g&&(this._maxZoom=g,this.zoom=Math.min(this.zoom,g))},Zi.minPitch.get=function(){return this._minPitch},Zi.minPitch.set=function(g){this._minPitch!==g&&(this._minPitch=g,this.pitch=Math.max(this.pitch,g))},Zi.maxPitch.get=function(){return this._maxPitch},Zi.maxPitch.set=function(g){this._maxPitch!==g&&(this._maxPitch=g,this.pitch=Math.min(this.pitch,g))},Zi.renderWorldCopies.get=function(){return this._renderWorldCopies},Zi.renderWorldCopies.set=function(g){g===void 0?g=!0:g===null&&(g=!1),this._renderWorldCopies=g},Zi.worldSize.get=function(){return this.tileSize*this.scale},Zi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Zi.size.get=function(){return new a.Point(this.width,this.height)},Zi.bearing.get=function(){return-this.angle/Math.PI*180},Zi.bearing.set=function(g){var b=-a.wrap(g,-180,180)*Math.PI/180;this.angle!==b&&(this._unmodified=!1,this.angle=b,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Zi.pitch.get=function(){return this._pitch/Math.PI*180},Zi.pitch.set=function(g){var b=a.clamp(g,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==b&&(this._unmodified=!1,this._pitch=b,this._calcMatrices())},Zi.fov.get=function(){return this._fov/Math.PI*180},Zi.fov.set=function(g){g=Math.max(.01,Math.min(60,g)),this._fov!==g&&(this._unmodified=!1,this._fov=g/180*Math.PI,this._calcMatrices())},Zi.zoom.get=function(){return this._zoom},Zi.zoom.set=function(g){var b=Math.min(Math.max(g,this.minZoom),this.maxZoom);this._zoom!==b&&(this._unmodified=!1,this._zoom=b,this.scale=this.zoomScale(b),this.tileZoom=Math.floor(b),this.zoomFraction=b-this.tileZoom,this._constrain(),this._calcMatrices())},Zi.center.get=function(){return this._center},Zi.center.set=function(g){g.lat===this._center.lat&&g.lng===this._center.lng||(this._unmodified=!1,this._center=g,this._constrain(),this._calcMatrices())},Zi.padding.get=function(){return this._edgeInsets.toJSON()},Zi.padding.set=function(g){this._edgeInsets.equals(g)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,g,1),this._calcMatrices())},Zi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ii.prototype.isPaddingEqual=function(g){return this._edgeInsets.equals(g)},ii.prototype.interpolatePadding=function(g,b,y){this._unmodified=!1,this._edgeInsets.interpolate(g,b,y),this._constrain(),this._calcMatrices()},ii.prototype.coveringZoomLevel=function(g){var b=(g.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/g.tileSize));return Math.max(0,b)},ii.prototype.getVisibleUnwrappedCoordinates=function(g){var b=[new a.UnwrappedTileID(0,g)];if(this._renderWorldCopies)for(var y=this.pointCoordinate(new a.Point(0,0)),C=this.pointCoordinate(new a.Point(this.width,0)),U=this.pointCoordinate(new a.Point(this.width,this.height)),Y=this.pointCoordinate(new a.Point(0,this.height)),ee=Math.floor(Math.min(y.x,C.x,U.x,Y.x)),se=Math.floor(Math.max(y.x,C.x,U.x,Y.x)),ve=ee-1;ve<=se+1;ve++)ve!==0&&b.push(new a.UnwrappedTileID(ve,g));return b},ii.prototype.coveringTiles=function(g){var b=this.coveringZoomLevel(g),y=b;if(g.minzoom!==void 0&&b<g.minzoom)return[];g.maxzoom!==void 0&&b>g.maxzoom&&(b=g.maxzoom);var C=a.MercatorCoordinate.fromLngLat(this.center),U=Math.pow(2,b),Y=[U*C.x,U*C.y,0],ee=hi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,b),se=g.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(se=b);var ve=function(Mr){return{aabb:new Wi([Mr*U,0,0],[(Mr+1)*U,U,0]),zoom:0,x:0,y:0,wrap:Mr,fullyVisible:!1}},Oe=[],He=[],Qe=b,Ze=g.reparseOverscaled?y:b;if(this._renderWorldCopies)for(var mt=1;mt<=3;mt++)Oe.push(ve(-mt)),Oe.push(ve(mt));for(Oe.push(ve(0));Oe.length>0;){var ft=Oe.pop(),xt=ft.x,st=ft.y,wt=ft.fullyVisible;if(!wt){var Lt=ft.aabb.intersects(ee);if(Lt===0)continue;wt=Lt===2}var Nt=ft.aabb.distanceX(Y),qt=ft.aabb.distanceY(Y),Ht=Math.max(Math.abs(Nt),Math.abs(qt));if(ft.zoom===Qe||Ht>3+(1<<Qe-ft.zoom)-2&&ft.zoom>=se)He.push({tileID:new a.OverscaledTileID(ft.zoom===Qe?Ze:ft.zoom,ft.wrap,ft.zoom,xt,st),distanceSq:a.sqrLen([Y[0]-.5-xt,Y[1]-.5-st])});else for(var or=0;or<4;or++){var vr=(xt<<1)+or%2,Pr=(st<<1)+(or>>1);Oe.push({aabb:ft.aabb.quadrant(or),zoom:ft.zoom+1,x:vr,y:Pr,wrap:ft.wrap,fullyVisible:wt})}}return He.sort(function(Mr,tn){return Mr.distanceSq-tn.distanceSq}).map(function(Mr){return Mr.tileID})},ii.prototype.resize=function(g,b){this.width=g,this.height=b,this.pixelsToGLUnits=[2/g,-2/b],this._constrain(),this._calcMatrices()},Zi.unmodified.get=function(){return this._unmodified},ii.prototype.zoomScale=function(g){return Math.pow(2,g)},ii.prototype.scaleZoom=function(g){return Math.log(g)/Math.LN2},ii.prototype.project=function(g){var b=a.clamp(g.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(g.lng)*this.worldSize,a.mercatorYfromLat(b)*this.worldSize)},ii.prototype.unproject=function(g){return new a.MercatorCoordinate(g.x/this.worldSize,g.y/this.worldSize).toLngLat()},Zi.point.get=function(){return this.project(this.center)},ii.prototype.setLocationAtPoint=function(g,b){var y=this.pointCoordinate(b),C=this.pointCoordinate(this.centerPoint),U=this.locationCoordinate(g),Y=new a.MercatorCoordinate(U.x-(y.x-C.x),U.y-(y.y-C.y));this.center=this.coordinateLocation(Y),this._renderWorldCopies&&(this.center=this.center.wrap())},ii.prototype.locationPoint=function(g){return this.coordinatePoint(this.locationCoordinate(g))},ii.prototype.pointLocation=function(g){return this.coordinateLocation(this.pointCoordinate(g))},ii.prototype.locationCoordinate=function(g){return a.MercatorCoordinate.fromLngLat(g)},ii.prototype.coordinateLocation=function(g){return g.toLngLat()},ii.prototype.pointCoordinate=function(g){var b=[g.x,g.y,0,1],y=[g.x,g.y,1,1];a.transformMat4(b,b,this.pixelMatrixInverse),a.transformMat4(y,y,this.pixelMatrixInverse);var C=b[3],U=y[3],Y=b[1]/C,ee=y[1]/U,se=b[2]/C,ve=y[2]/U,Oe=se===ve?0:(0-se)/(ve-se);return new a.MercatorCoordinate(a.number(b[0]/C,y[0]/U,Oe)/this.worldSize,a.number(Y,ee,Oe)/this.worldSize)},ii.prototype.coordinatePoint=function(g){var b=[g.x*this.worldSize,g.y*this.worldSize,0,1];return a.transformMat4(b,b,this.pixelMatrix),new a.Point(b[0]/b[3],b[1]/b[3])},ii.prototype.getBounds=function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},ii.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},ii.prototype.setMaxBounds=function(g){g?(this.lngRange=[g.getWest(),g.getEast()],this.latRange=[g.getSouth(),g.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ii.prototype.calculatePosMatrix=function(g,b){b===void 0&&(b=!1);var y=g.key,C=b?this._alignedPosMatrixCache:this._posMatrixCache;if(C[y])return C[y];var U=g.canonical,Y=this.worldSize/this.zoomScale(U.z),ee=U.x+Math.pow(2,U.z)*g.wrap,se=a.identity(new Float64Array(16));return a.translate(se,se,[ee*Y,U.y*Y,0]),a.scale(se,se,[Y/a.EXTENT,Y/a.EXTENT,1]),a.multiply(se,b?this.alignedProjMatrix:this.projMatrix,se),C[y]=new Float32Array(se),C[y]},ii.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ii.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var g,b,y,C,U=-90,Y=90,ee=-180,se=180,ve=this.size,Oe=this._unmodified;if(this.latRange){var He=this.latRange;U=a.mercatorYfromLat(He[1])*this.worldSize,g=(Y=a.mercatorYfromLat(He[0])*this.worldSize)-U<ve.y?ve.y/(Y-U):0}if(this.lngRange){var Qe=this.lngRange;ee=a.mercatorXfromLng(Qe[0])*this.worldSize,b=(se=a.mercatorXfromLng(Qe[1])*this.worldSize)-ee<ve.x?ve.x/(se-ee):0}var Ze=this.point,mt=Math.max(b||0,g||0);if(mt)return this.center=this.unproject(new a.Point(b?(se+ee)/2:Ze.x,g?(Y+U)/2:Ze.y)),this.zoom+=this.scaleZoom(mt),this._unmodified=Oe,void(this._constraining=!1);if(this.latRange){var ft=Ze.y,xt=ve.y/2;ft-xt<U&&(C=U+xt),ft+xt>Y&&(C=Y-xt)}if(this.lngRange){var st=Ze.x,wt=ve.x/2;st-wt<ee&&(y=ee+wt),st+wt>se&&(y=se-wt)}y===void 0&&C===void 0||(this.center=this.unproject(new a.Point(y!==void 0?y:Ze.x,C!==void 0?C:Ze.y))),this._unmodified=Oe,this._constraining=!1}},ii.prototype._calcMatrices=function(){if(this.height){var g=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var b=Math.PI/2+this._pitch,y=this._fov*(.5+g.y/this.height),C=Math.sin(y)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-b-y,.01,Math.PI-.01)),U=this.point,Y=U.x,ee=U.y,se=1.01*(Math.cos(Math.PI/2-this._pitch)*C+this.cameraToCenterDistance),ve=this.height/50,Oe=new Float64Array(16);a.perspective(Oe,this._fov,this.width/this.height,ve,se),Oe[8]=2*-g.x/this.width,Oe[9]=2*g.y/this.height,a.scale(Oe,Oe,[1,-1,1]),a.translate(Oe,Oe,[0,0,-this.cameraToCenterDistance]),a.rotateX(Oe,Oe,this._pitch),a.rotateZ(Oe,Oe,this.angle),a.translate(Oe,Oe,[-Y,-ee,0]),this.mercatorMatrix=a.scale([],Oe,[this.worldSize,this.worldSize,this.worldSize]),a.scale(Oe,Oe,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Oe,this.invProjMatrix=a.invert([],this.projMatrix);var He=this.width%2/2,Qe=this.height%2/2,Ze=Math.cos(this.angle),mt=Math.sin(this.angle),ft=Y-Math.round(Y)+Ze*He+mt*Qe,xt=ee-Math.round(ee)+Ze*Qe+mt*He,st=new Float64Array(Oe);if(a.translate(st,st,[ft>.5?ft-1:ft,xt>.5?xt-1:xt,0]),this.alignedProjMatrix=st,Oe=a.create(),a.scale(Oe,Oe,[this.width/2,-this.height/2,1]),a.translate(Oe,Oe,[1,-1,0]),this.labelPlaneMatrix=Oe,Oe=a.create(),a.scale(Oe,Oe,[1,-1,1]),a.translate(Oe,Oe,[-1,-1,0]),a.scale(Oe,Oe,[2/this.width,2/this.height,1]),this.glCoordMatrix=Oe,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Oe=a.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Oe,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ii.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var g=this.pointCoordinate(new a.Point(0,0)),b=[g.x*this.worldSize,g.y*this.worldSize,0,1];return a.transformMat4(b,b,this.pixelMatrix)[3]/this.cameraToCenterDistance},ii.prototype.getCameraPoint=function(){var g=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,g))},ii.prototype.getCameraQueryGeometry=function(g){var b=this.getCameraPoint();if(g.length===1)return[g[0],b];for(var y=b.x,C=b.y,U=b.x,Y=b.y,ee=0,se=g;ee<se.length;ee+=1){var ve=se[ee];y=Math.min(y,ve.x),C=Math.min(C,ve.y),U=Math.max(U,ve.x),Y=Math.max(Y,ve.y)}return[new a.Point(y,C),new a.Point(U,C),new a.Point(U,Y),new a.Point(y,Y),new a.Point(y,C)]},Object.defineProperties(ii.prototype,Zi);var Xl=function(g){var b,y,C,U;this._hashName=g&&encodeURIComponent(g),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(b=this._updateHashUnthrottled.bind(this),y=!1,C=null,U=function(){C=null,y&&(b(),C=setTimeout(U,300),y=!1)},function(){return y=!0,C||U(),C})};Xl.prototype.addTo=function(g){return this._map=g,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Xl.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Xl.prototype.getHashString=function(g){var b=this._map.getCenter(),y=Math.round(100*this._map.getZoom())/100,C=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),U=Math.pow(10,C),Y=Math.round(b.lng*U)/U,ee=Math.round(b.lat*U)/U,se=this._map.getBearing(),ve=this._map.getPitch(),Oe="";if(Oe+=g?"/"+Y+"/"+ee+"/"+y:y+"/"+ee+"/"+Y,(se||ve)&&(Oe+="/"+Math.round(10*se)/10),ve&&(Oe+="/"+Math.round(ve)),this._hashName){var He=this._hashName,Qe=!1,Ze=a.window.location.hash.slice(1).split("&").map(function(mt){var ft=mt.split("=")[0];return ft===He?(Qe=!0,ft+"="+Oe):mt}).filter(function(mt){return mt});return Qe||Ze.push(He+"="+Oe),"#"+Ze.join("&")}return"#"+Oe},Xl.prototype._getCurrentHash=function(){var g,b=this,y=a.window.location.hash.replace("#","");return this._hashName?(y.split("&").map(function(C){return C.split("=")}).forEach(function(C){C[0]===b._hashName&&(g=C)}),(g&&g[1]||"").split("/")):y.split("/")},Xl.prototype._onHashChange=function(){var g=this._getCurrentHash();if(g.length>=3&&!g.some(function(y){return isNaN(y)})){var b=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(g[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+g[2],+g[1]],zoom:+g[0],bearing:b,pitch:+(g[4]||0)}),!0}return!1},Xl.prototype._updateHashUnthrottled=function(){var g=a.window.location.href.replace(/(#.+)?$/,this.getHashString());try{a.window.history.replaceState(a.window.history.state,null,g)}catch{}};var to={linearity:.3,easing:a.bezier(0,0,.3,1)},el=a.extend({deceleration:2500,maxSpeed:1400},to),Pn=a.extend({deceleration:20,maxSpeed:1400},to),Ol=a.extend({deceleration:1e3,maxSpeed:360},to),Kl=a.extend({deceleration:1e3,maxSpeed:90},to),ks=function(g){this._map=g,this.clear()};function pa(g,b){(!g.duration||g.duration<b.duration)&&(g.duration=b.duration,g.easing=b.easing)}function pn(g,b,y){var C=y.maxSpeed,U=y.linearity,Y=y.deceleration,ee=a.clamp(g*U/(b/1e3),-C,C),se=Math.abs(ee)/(Y*U);return{easing:y.easing,duration:1e3*se,amount:ee*(se/2)}}ks.prototype.clear=function(){this._inertiaBuffer=[]},ks.prototype.record=function(g){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:g})},ks.prototype._drainInertiaBuffer=function(){for(var g=this._inertiaBuffer,b=a.browser.now();g.length>0&&b-g[0].time>160;)g.shift()},ks.prototype._onMoveEnd=function(g){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var b={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0},y=0,C=this._inertiaBuffer;y<C.length;y+=1){var U=C[y].settings;b.zoom+=U.zoomDelta||0,b.bearing+=U.bearingDelta||0,b.pitch+=U.pitchDelta||0,U.panDelta&&b.pan._add(U.panDelta),U.around&&(b.around=U.around),U.pinchAround&&(b.pinchAround=U.pinchAround)}var Y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,ee={};if(b.pan.mag()){var se=pn(b.pan.mag(),Y,a.extend({},el,g||{}));ee.offset=b.pan.mult(se.amount/b.pan.mag()),ee.center=this._map.transform.center,pa(ee,se)}if(b.zoom){var ve=pn(b.zoom,Y,Pn);ee.zoom=this._map.transform.zoom+ve.amount,pa(ee,ve)}if(b.bearing){var Oe=pn(b.bearing,Y,Ol);ee.bearing=this._map.transform.bearing+a.clamp(Oe.amount,-179,179),pa(ee,Oe)}if(b.pitch){var He=pn(b.pitch,Y,Kl);ee.pitch=this._map.transform.pitch+He.amount,pa(ee,He)}if(ee.zoom||ee.bearing){var Qe=b.pinchAround===void 0?b.around:b.pinchAround;ee.around=Qe?this._map.unproject(Qe):this._map.getCenter()}return this.clear(),a.extend(ee,{noMoveStart:!0})}};var So=function(g){function b(C,U,Y,ee){ee===void 0&&(ee={});var se=d.mousePos(U.getCanvasContainer(),Y),ve=U.unproject(se);g.call(this,C,a.extend({point:se,lngLat:ve,originalEvent:Y},ee)),this._defaultPrevented=!1,this.target=U}g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b;var y={defaultPrevented:{configurable:!0}};return b.prototype.preventDefault=function(){this._defaultPrevented=!0},y.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(b.prototype,y),b}(a.Event),gs=function(g){function b(C,U,Y){var ee=C==="touchend"?Y.changedTouches:Y.touches,se=d.touchPos(U.getCanvasContainer(),ee),ve=se.map(function(Qe){return U.unproject(Qe)}),Oe=se.reduce(function(Qe,Ze,mt,ft){return Qe.add(Ze.div(ft.length))},new a.Point(0,0)),He=U.unproject(Oe);g.call(this,C,{points:se,point:Oe,lngLats:ve,lngLat:He,originalEvent:Y}),this._defaultPrevented=!1}g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b;var y={defaultPrevented:{configurable:!0}};return b.prototype.preventDefault=function(){this._defaultPrevented=!0},y.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(b.prototype,y),b}(a.Event),qf=function(g){function b(C,U,Y){g.call(this,C,{originalEvent:Y}),this._defaultPrevented=!1}g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b;var y={defaultPrevented:{configurable:!0}};return b.prototype.preventDefault=function(){this._defaultPrevented=!0},y.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(b.prototype,y),b}(a.Event),Eo=function(g,b){this._map=g,this._clickTolerance=b.clickTolerance};Eo.prototype.reset=function(){delete this._mousedownPos},Eo.prototype.wheel=function(g){return this._firePreventable(new qf(g.type,this._map,g))},Eo.prototype.mousedown=function(g,b){return this._mousedownPos=b,this._firePreventable(new So(g.type,this._map,g))},Eo.prototype.mouseup=function(g){this._map.fire(new So(g.type,this._map,g))},Eo.prototype.click=function(g,b){this._mousedownPos&&this._mousedownPos.dist(b)>=this._clickTolerance||this._map.fire(new So(g.type,this._map,g))},Eo.prototype.dblclick=function(g){return this._firePreventable(new So(g.type,this._map,g))},Eo.prototype.mouseover=function(g){this._map.fire(new So(g.type,this._map,g))},Eo.prototype.mouseout=function(g){this._map.fire(new So(g.type,this._map,g))},Eo.prototype.touchstart=function(g){return this._firePreventable(new gs(g.type,this._map,g))},Eo.prototype.touchmove=function(g){this._map.fire(new gs(g.type,this._map,g))},Eo.prototype.touchend=function(g){this._map.fire(new gs(g.type,this._map,g))},Eo.prototype.touchcancel=function(g){this._map.fire(new gs(g.type,this._map,g))},Eo.prototype._firePreventable=function(g){if(this._map.fire(g),g.defaultPrevented)return{}},Eo.prototype.isEnabled=function(){return!0},Eo.prototype.isActive=function(){return!1},Eo.prototype.enable=function(){},Eo.prototype.disable=function(){};var Is=function(g){this._map=g};Is.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Is.prototype.mousemove=function(g){this._map.fire(new So(g.type,this._map,g))},Is.prototype.mousedown=function(){this._delayContextMenu=!0},Is.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new So("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Is.prototype.contextmenu=function(g){this._delayContextMenu?this._contextMenuEvent=g:this._map.fire(new So(g.type,this._map,g)),this._map.listens("contextmenu")&&g.preventDefault()},Is.prototype.isEnabled=function(){return!0},Is.prototype.isActive=function(){return!1},Is.prototype.enable=function(){},Is.prototype.disable=function(){};var fn=function(g,b){this._map=g,this._el=g.getCanvasContainer(),this._container=g.getContainer(),this._clickTolerance=b.clickTolerance||1};function fl(g,b){for(var y={},C=0;C<g.length;C++)y[g[C].identifier]=b[C];return y}fn.prototype.isEnabled=function(){return!!this._enabled},fn.prototype.isActive=function(){return!!this._active},fn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},fn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},fn.prototype.mousedown=function(g,b){this.isEnabled()&&g.shiftKey&&g.button===0&&(d.disableDrag(),this._startPos=this._lastPos=b,this._active=!0)},fn.prototype.mousemoveWindow=function(g,b){if(this._active){var y=b;if(!(this._lastPos.equals(y)||!this._box&&y.dist(this._startPos)<this._clickTolerance)){var C=this._startPos;this._lastPos=y,this._box||(this._box=d.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",g));var U=Math.min(C.x,y.x),Y=Math.max(C.x,y.x),ee=Math.min(C.y,y.y),se=Math.max(C.y,y.y);d.setTransform(this._box,"translate("+U+"px,"+ee+"px)"),this._box.style.width=Y-U+"px",this._box.style.height=se-ee+"px"}}},fn.prototype.mouseupWindow=function(g,b){var y=this;if(this._active&&g.button===0){var C=this._startPos,U=b;if(this.reset(),d.suppressClick(),C.x!==U.x||C.y!==U.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:g})),{cameraAnimation:function(Y){return Y.fitScreenCoordinates(C,U,y._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",g)}},fn.prototype.keydown=function(g){this._active&&g.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",g))},fn.prototype.reset=function(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(d.remove(this._box),this._box=null),d.enableDrag(),delete this._startPos,delete this._lastPos},fn.prototype._fireEvent=function(g,b){return this._map.fire(new a.Event(g,{originalEvent:b}))};var Yl=function(g){this.reset(),this.numTouches=g.numTouches};Yl.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Yl.prototype.touchstart=function(g,b,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=g.timeStamp),y.length===this.numTouches&&(this.centroid=function(C){for(var U=new a.Point(0,0),Y=0,ee=C;Y<ee.length;Y+=1)U._add(ee[Y]);return U.div(C.length)}(b),this.touches=fl(y,b)))},Yl.prototype.touchmove=function(g,b,y){if(!this.aborted&&this.centroid){var C=fl(y,b);for(var U in this.touches){var Y=C[U];(!Y||Y.dist(this.touches[U])>30)&&(this.aborted=!0)}}},Yl.prototype.touchend=function(g,b,y){if((!this.centroid||g.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){var C=!this.aborted&&this.centroid;if(this.reset(),C)return C}};var Rl=function(g){this.singleTap=new Yl(g),this.numTaps=g.numTaps,this.reset()};Rl.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Rl.prototype.touchstart=function(g,b,y){this.singleTap.touchstart(g,b,y)},Rl.prototype.touchmove=function(g,b,y){this.singleTap.touchmove(g,b,y)},Rl.prototype.touchend=function(g,b,y){var C=this.singleTap.touchend(g,b,y);if(C){var U=g.timeStamp-this.lastTime<500,Y=!this.lastTap||this.lastTap.dist(C)<30;if(U&&Y||this.reset(),this.count++,this.lastTime=g.timeStamp,this.lastTap=C,this.count===this.numTaps)return this.reset(),C}};var Fo=function(){this._zoomIn=new Rl({numTouches:1,numTaps:2}),this._zoomOut=new Rl({numTouches:2,numTaps:1}),this.reset()};Fo.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Fo.prototype.touchstart=function(g,b,y){this._zoomIn.touchstart(g,b,y),this._zoomOut.touchstart(g,b,y)},Fo.prototype.touchmove=function(g,b,y){this._zoomIn.touchmove(g,b,y),this._zoomOut.touchmove(g,b,y)},Fo.prototype.touchend=function(g,b,y){var C=this,U=this._zoomIn.touchend(g,b,y),Y=this._zoomOut.touchend(g,b,y);return U?(this._active=!0,g.preventDefault(),setTimeout(function(){return C.reset()},0),{cameraAnimation:function(ee){return ee.easeTo({duration:300,zoom:ee.getZoom()+1,around:ee.unproject(U)},{originalEvent:g})}}):Y?(this._active=!0,g.preventDefault(),setTimeout(function(){return C.reset()},0),{cameraAnimation:function(ee){return ee.easeTo({duration:300,zoom:ee.getZoom()-1,around:ee.unproject(Y)},{originalEvent:g})}}):void 0},Fo.prototype.touchcancel=function(){this.reset()},Fo.prototype.enable=function(){this._enabled=!0},Fo.prototype.disable=function(){this._enabled=!1,this.reset()},Fo.prototype.isEnabled=function(){return this._enabled},Fo.prototype.isActive=function(){return this._active};var ju={0:1,2:2},Yo=function(g){this.reset(),this._clickTolerance=g.clickTolerance||1};Yo.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Yo.prototype._correctButton=function(g,b){return!1},Yo.prototype._move=function(g,b){return{}},Yo.prototype.mousedown=function(g,b){if(!this._lastPoint){var y=d.mouseButton(g);this._correctButton(g,y)&&(this._lastPoint=b,this._eventButton=y)}},Yo.prototype.mousemoveWindow=function(g,b){var y=this._lastPoint;if(y){if(g.preventDefault(),function(C,U){var Y=ju[U];return C.buttons===void 0||(C.buttons&Y)!==Y}(g,this._eventButton))this.reset();else if(this._moved||!(b.dist(y)<this._clickTolerance))return this._moved=!0,this._lastPoint=b,this._move(y,b)}},Yo.prototype.mouseupWindow=function(g){this._lastPoint&&d.mouseButton(g)===this._eventButton&&(this._moved&&d.suppressClick(),this.reset())},Yo.prototype.enable=function(){this._enabled=!0},Yo.prototype.disable=function(){this._enabled=!1,this.reset()},Yo.prototype.isEnabled=function(){return this._enabled},Yo.prototype.isActive=function(){return this._active};var en=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.mousedown=function(y,C){g.prototype.mousedown.call(this,y,C),this._lastPoint&&(this._active=!0)},b.prototype._correctButton=function(y,C){return C===0&&!y.ctrlKey},b.prototype._move=function(y,C){return{around:C,panDelta:C.sub(y)}},b}(Yo),hl=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype._correctButton=function(y,C){return C===0&&y.ctrlKey||C===2},b.prototype._move=function(y,C){var U=.8*(C.x-y.x);if(U)return this._active=!0,{bearingDelta:U}},b.prototype.contextmenu=function(y){y.preventDefault()},b}(Yo),hu=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype._correctButton=function(y,C){return C===0&&y.ctrlKey||C===2},b.prototype._move=function(y,C){var U=-.5*(C.y-y.y);if(U)return this._active=!0,{pitchDelta:U}},b.prototype.contextmenu=function(y){y.preventDefault()},b}(Yo),fo=function(g){this._minTouches=1,this._clickTolerance=g.clickTolerance||1,this.reset()};fo.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)},fo.prototype.touchstart=function(g,b,y){return this._calculateTransform(g,b,y)},fo.prototype.touchmove=function(g,b,y){if(this._active&&!(y.length<this._minTouches))return g.preventDefault(),this._calculateTransform(g,b,y)},fo.prototype.touchend=function(g,b,y){this._calculateTransform(g,b,y),this._active&&y.length<this._minTouches&&this.reset()},fo.prototype.touchcancel=function(){this.reset()},fo.prototype._calculateTransform=function(g,b,y){y.length>0&&(this._active=!0);var C=fl(y,b),U=new a.Point(0,0),Y=new a.Point(0,0),ee=0;for(var se in C){var ve=C[se],Oe=this._touches[se];Oe&&(U._add(ve),Y._add(ve.sub(Oe)),ee++,C[se]=ve)}if(this._touches=C,!(ee<this._minTouches)&&Y.mag()){var He=Y.div(ee);if(this._sum._add(He),!(this._sum.mag()<this._clickTolerance))return{around:U.div(ee),panDelta:He}}},fo.prototype.enable=function(){this._enabled=!0},fo.prototype.disable=function(){this._enabled=!1,this.reset()},fo.prototype.isEnabled=function(){return this._enabled},fo.prototype.isActive=function(){return this._active};var Do=function(){this.reset()};function Vu(g,b,y){for(var C=0;C<g.length;C++)if(g[C].identifier===y)return b[C]}function zh(g,b){return Math.log(g/b)/Math.LN2}Do.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Do.prototype._start=function(g){},Do.prototype._move=function(g,b,y){return{}},Do.prototype.touchstart=function(g,b,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([b[0],b[1]]))},Do.prototype.touchmove=function(g,b,y){if(this._firstTwoTouches){g.preventDefault();var C=this._firstTwoTouches,U=C[1],Y=Vu(y,b,C[0]),ee=Vu(y,b,U);if(Y&&ee){var se=this._aroundCenter?null:Y.add(ee).div(2);return this._move([Y,ee],se,g)}}},Do.prototype.touchend=function(g,b,y){if(this._firstTwoTouches){var C=this._firstTwoTouches,U=C[1],Y=Vu(y,b,C[0]),ee=Vu(y,b,U);Y&&ee||(this._active&&d.suppressClick(),this.reset())}},Do.prototype.touchcancel=function(){this.reset()},Do.prototype.enable=function(g){this._enabled=!0,this._aroundCenter=!!g&&g.around==="center"},Do.prototype.disable=function(){this._enabled=!1,this.reset()},Do.prototype.isEnabled=function(){return this._enabled},Do.prototype.isActive=function(){return this._active};var Gs=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.reset=function(){g.prototype.reset.call(this),delete this._distance,delete this._startDistance},b.prototype._start=function(y){this._startDistance=this._distance=y[0].dist(y[1])},b.prototype._move=function(y,C){var U=this._distance;if(this._distance=y[0].dist(y[1]),this._active||!(Math.abs(zh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:zh(this._distance,U),pinchAround:C}},b}(Do);function Ui(g,b){return 180*g.angleWith(b)/Math.PI}var Ms=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.reset=function(){g.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},b.prototype._start=function(y){this._startVector=this._vector=y[0].sub(y[1]),this._minDiameter=y[0].dist(y[1])},b.prototype._move=function(y,C){var U=this._vector;if(this._vector=y[0].sub(y[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ui(this._vector,U),pinchAround:C}},b.prototype._isBelowThreshold=function(y){this._minDiameter=Math.min(this._minDiameter,y.mag());var C=25/(Math.PI*this._minDiameter)*360,U=Ui(y,this._startVector);return Math.abs(U)<C},b}(Do);function pu(g){return Math.abs(g.y)>Math.abs(g.x)}var Gf=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.reset=function(){g.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},b.prototype._start=function(y){this._lastPoints=y,pu(y[0].sub(y[1]))&&(this._valid=!1)},b.prototype._move=function(y,C,U){var Y=y[0].sub(this._lastPoints[0]),ee=y[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Y,ee,U.timeStamp),this._valid)return this._lastPoints=y,this._active=!0,{pitchDelta:(Y.y+ee.y)/2*-.5}},b.prototype.gestureBeginsVertically=function(y,C,U){if(this._valid!==void 0)return this._valid;var Y=y.mag()>=2,ee=C.mag()>=2;if(Y||ee){if(!Y||!ee)return this._firstMove===void 0&&(this._firstMove=U),U-this._firstMove<100&&void 0;var se=y.y>0==C.y>0;return pu(y)&&pu(C)&&se}},b}(Do),rf={panStep:100,bearingStep:15,pitchStep:10},pl=function(){var g=rf;this._panStep=g.panStep,this._bearingStep=g.bearingStep,this._pitchStep=g.pitchStep,this._rotationDisabled=!1};function Cp(g){return g*(2-g)}pl.prototype.reset=function(){this._active=!1},pl.prototype.keydown=function(g){var b=this;if(!(g.altKey||g.ctrlKey||g.metaKey)){var y=0,C=0,U=0,Y=0,ee=0;switch(g.keyCode){case 61:case 107:case 171:case 187:y=1;break;case 189:case 109:case 173:y=-1;break;case 37:g.shiftKey?C=-1:(g.preventDefault(),Y=-1);break;case 39:g.shiftKey?C=1:(g.preventDefault(),Y=1);break;case 38:g.shiftKey?U=1:(g.preventDefault(),ee=-1);break;case 40:g.shiftKey?U=-1:(g.preventDefault(),ee=1);break;default:return}return this._rotationDisabled&&(C=0,U=0),{cameraAnimation:function(se){var ve=se.getZoom();se.easeTo({duration:300,easeId:"keyboardHandler",easing:Cp,zoom:y?Math.round(ve)+y*(g.shiftKey?2:1):ve,bearing:se.getBearing()+C*b._bearingStep,pitch:se.getPitch()+U*b._pitchStep,offset:[-Y*b._panStep,-ee*b._panStep],center:se.getCenter()},{originalEvent:g})}}}},pl.prototype.enable=function(){this._enabled=!0},pl.prototype.disable=function(){this._enabled=!1,this.reset()},pl.prototype.isEnabled=function(){return this._enabled},pl.prototype.isActive=function(){return this._active},pl.prototype.disableRotation=function(){this._rotationDisabled=!0},pl.prototype.enableRotation=function(){this._rotationDisabled=!1};var yi=function(g,b){this._map=g,this._el=g.getCanvasContainer(),this._handler=b,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,a.bindAll(["_onTimeout"],this)};yi.prototype.setZoomRate=function(g){this._defaultZoomRate=g},yi.prototype.setWheelZoomRate=function(g){this._wheelZoomRate=g},yi.prototype.isEnabled=function(){return!!this._enabled},yi.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},yi.prototype.isZooming=function(){return!!this._zooming},yi.prototype.enable=function(g){this.isEnabled()||(this._enabled=!0,this._aroundCenter=g&&g.around==="center")},yi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},yi.prototype.wheel=function(g){if(this.isEnabled()){var b=g.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*g.deltaY:g.deltaY,y=a.browser.now(),C=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,b!==0&&b%4.000244140625==0?this._type="wheel":b!==0&&Math.abs(b)<4?this._type="trackpad":C>400?(this._type=null,this._lastValue=b,this._timeout=setTimeout(this._onTimeout,40,g)):this._type||(this._type=Math.abs(C*b)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,b+=this._lastValue)),g.shiftKey&&b&&(b/=4),this._type&&(this._lastWheelEvent=g,this._delta-=b,this._active||this._start(g)),g.preventDefault()}},yi.prototype._onTimeout=function(g){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(g)},yi.prototype._start=function(g){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var b=d.mousePos(this._el,g);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(b)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},yi.prototype.renderFrame=function(){var g=this;if(this._frameId&&(this._frameId=null,this.isActive())){var b=this._map.transform;if(this._delta!==0){var y=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,C=2/(1+Math.exp(-Math.abs(this._delta*y)));this._delta<0&&C!==0&&(C=1/C);var U=typeof this._targetZoom=="number"?b.zoomScale(this._targetZoom):b.scale;this._targetZoom=Math.min(b.maxZoom,Math.max(b.minZoom,b.scaleZoom(U*C))),this._type==="wheel"&&(this._startZoom=b.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Y,ee=typeof this._targetZoom=="number"?this._targetZoom:b.zoom,se=this._startZoom,ve=this._easing,Oe=!1;if(this._type==="wheel"&&se&&ve){var He=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),Qe=ve(He);Y=a.number(se,ee,Qe),He<1?this._frameId||(this._frameId=!0):Oe=!0}else Y=ee,Oe=!0;return this._active=!0,Oe&&(this._active=!1,this._finishTimeout=setTimeout(function(){g._zooming=!1,g._handler._triggerRenderFrame(),delete g._targetZoom,delete g._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Oe,zoomDelta:Y-b.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},yi.prototype._smoothOutEasing=function(g){var b=a.ease;if(this._prevEase){var y=this._prevEase,C=(a.browser.now()-y.start)/y.duration,U=y.easing(C+.01)-y.easing(C),Y=.27/Math.sqrt(U*U+1e-4)*.01,ee=Math.sqrt(.0729-Y*Y);b=a.bezier(Y,ee,.25,1)}return this._prevEase={start:a.browser.now(),duration:g,easing:b},b},yi.prototype.reset=function(){this._active=!1};var vi=function(g,b){this._clickZoom=g,this._tapZoom=b};vi.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},vi.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},vi.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},vi.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Tn=function(){this.reset()};Tn.prototype.reset=function(){this._active=!1},Tn.prototype.dblclick=function(g,b){return g.preventDefault(),{cameraAnimation:function(y){y.easeTo({duration:300,zoom:y.getZoom()+(g.shiftKey?-1:1),around:y.unproject(b)},{originalEvent:g})}}},Tn.prototype.enable=function(){this._enabled=!0},Tn.prototype.disable=function(){this._enabled=!1,this.reset()},Tn.prototype.isEnabled=function(){return this._enabled},Tn.prototype.isActive=function(){return this._active};var zn=function(){this._tap=new Rl({numTouches:1,numTaps:1}),this.reset()};zn.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},zn.prototype.touchstart=function(g,b,y){this._swipePoint||(this._tapTime&&g.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?y.length>0&&(this._swipePoint=b[0],this._swipeTouch=y[0].identifier):this._tap.touchstart(g,b,y))},zn.prototype.touchmove=function(g,b,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;var C=b[0],U=C.y-this._swipePoint.y;return this._swipePoint=C,g.preventDefault(),this._active=!0,{zoomDelta:U/128}}}else this._tap.touchmove(g,b,y)},zn.prototype.touchend=function(g,b,y){this._tapTime?this._swipePoint&&y.length===0&&this.reset():this._tap.touchend(g,b,y)&&(this._tapTime=g.timeStamp)},zn.prototype.touchcancel=function(){this.reset()},zn.prototype.enable=function(){this._enabled=!0},zn.prototype.disable=function(){this._enabled=!1,this.reset()},zn.prototype.isEnabled=function(){return this._enabled},zn.prototype.isActive=function(){return this._active};var Uo=function(g,b,y){this._el=g,this._mousePan=b,this._touchPan=y};Uo.prototype.enable=function(g){this._inertiaOptions=g||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")},Uo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")},Uo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Uo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var du=function(g,b,y){this._pitchWithRotate=g.pitchWithRotate,this._mouseRotate=b,this._mousePitch=y};du.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},du.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},du.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},du.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var jo=function(g,b,y,C){this._el=g,this._touchZoom=b,this._touchRotate=y,this._tapDragZoom=C,this._rotationDisabled=!1,this._enabled=!0};jo.prototype.enable=function(g){this._touchZoom.enable(g),this._rotationDisabled||this._touchRotate.enable(g),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")},jo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")},jo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},jo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},jo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},jo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Va=function(g){return g.zoom||g.drag||g.pitch||g.rotate},go=function(g){function b(){g.apply(this,arguments)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b}(a.Event);function Co(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}var un=function(g,b){this._map=g,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ks(g),this._bearingSnap=b.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(b),a.bindAll(["handleEvent","handleWindowEvent"],this);var y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[a.window,"blur",void 0]];for(var C=0,U=this._listeners;C<U.length;C+=1){var Y=U[C],ee=Y[0];d.addEventListener(ee,Y[1],ee===a.window.document?this.handleWindowEvent:this.handleEvent,Y[2])}};un.prototype.destroy=function(){for(var g=0,b=this._listeners;g<b.length;g+=1){var y=b[g],C=y[0];d.removeEventListener(C,y[1],C===a.window.document?this.handleWindowEvent:this.handleEvent,y[2])}},un.prototype._addDefaultHandlers=function(g){var b=this._map,y=b.getCanvasContainer();this._add("mapEvent",new Eo(b,g));var C=b.boxZoom=new fn(b,g);this._add("boxZoom",C);var U=new Fo,Y=new Tn;b.doubleClickZoom=new vi(Y,U),this._add("tapZoom",U),this._add("clickZoom",Y);var ee=new zn;this._add("tapDragZoom",ee);var se=b.touchPitch=new Gf;this._add("touchPitch",se);var ve=new hl(g),Oe=new hu(g);b.dragRotate=new du(g,ve,Oe),this._add("mouseRotate",ve,["mousePitch"]),this._add("mousePitch",Oe,["mouseRotate"]);var He=new en(g),Qe=new fo(g);b.dragPan=new Uo(y,He,Qe),this._add("mousePan",He),this._add("touchPan",Qe,["touchZoom","touchRotate"]);var Ze=new Ms,mt=new Gs;b.touchZoomRotate=new jo(y,mt,Ze,ee),this._add("touchRotate",Ze,["touchPan","touchZoom"]),this._add("touchZoom",mt,["touchPan","touchRotate"]);var ft=b.scrollZoom=new yi(b,this);this._add("scrollZoom",ft,["mousePan"]);var xt=b.keyboard=new pl;this._add("keyboard",xt),this._add("blockableMapEvent",new Is(b));for(var st=0,wt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];st<wt.length;st+=1){var Lt=wt[st];g.interactive&&g[Lt]&&b[Lt].enable(g[Lt])}},un.prototype._add=function(g,b,y){this._handlers.push({handlerName:g,handler:b,allowed:y}),this._handlersById[g]=b},un.prototype.stop=function(g){if(!this._updatingCamera){for(var b=0,y=this._handlers;b<y.length;b+=1)y[b].handler.reset();this._inertia.clear(),this._fireEvents({},{},g),this._changes=[]}},un.prototype.isActive=function(){for(var g=0,b=this._handlers;g<b.length;g+=1)if(b[g].handler.isActive())return!0;return!1},un.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},un.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},un.prototype.isMoving=function(){return!!Va(this._eventsInProgress)||this.isZooming()},un.prototype._blockedByActive=function(g,b,y){for(var C in g)if(C!==y&&(!b||b.indexOf(C)<0))return!0;return!1},un.prototype.handleWindowEvent=function(g){this.handleEvent(g,g.type+"Window")},un.prototype._getMapTouches=function(g){for(var b=[],y=0,C=g;y<C.length;y+=1){var U=C[y];this._el.contains(U.target)&&b.push(U)}return b},un.prototype.handleEvent=function(g,b){if(g.type!=="blur"){this._updatingCamera=!0;for(var y=g.type==="renderFrame"?void 0:g,C={needsRenderFrame:!1},U={},Y={},ee=g.touches?this._getMapTouches(g.touches):void 0,se=ee?d.touchPos(this._el,ee):d.mousePos(this._el,g),ve=0,Oe=this._handlers;ve<Oe.length;ve+=1){var He=Oe[ve],Qe=He.handlerName,Ze=He.handler,mt=He.allowed;if(Ze.isEnabled()){var ft=void 0;this._blockedByActive(Y,mt,Qe)?Ze.reset():Ze[b||g.type]&&(ft=Ze[b||g.type](g,se,ee),this.mergeHandlerResult(C,U,ft,Qe,y),ft&&ft.needsRenderFrame&&this._triggerRenderFrame()),(ft||Ze.isActive())&&(Y[Qe]=Ze)}}var xt={};for(var st in this._previousActiveHandlers)Y[st]||(xt[st]=y);this._previousActiveHandlers=Y,(Object.keys(xt).length||Co(C))&&(this._changes.push([C,U,xt]),this._triggerRenderFrame()),(Object.keys(Y).length||Co(C))&&this._map._stop(!0),this._updatingCamera=!1;var wt=C.cameraAnimation;wt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],wt(this._map))}else this.stop(!0)},un.prototype.mergeHandlerResult=function(g,b,y,C,U){if(y){a.extend(g,y);var Y={handlerName:C,originalEvent:y.originalEvent||U};y.zoomDelta!==void 0&&(b.zoom=Y),y.panDelta!==void 0&&(b.drag=Y),y.pitchDelta!==void 0&&(b.pitch=Y),y.bearingDelta!==void 0&&(b.rotate=Y)}},un.prototype._applyChanges=function(){for(var g={},b={},y={},C=0,U=this._changes;C<U.length;C+=1){var Y=U[C],ee=Y[0],se=Y[1],ve=Y[2];ee.panDelta&&(g.panDelta=(g.panDelta||new a.Point(0,0))._add(ee.panDelta)),ee.zoomDelta&&(g.zoomDelta=(g.zoomDelta||0)+ee.zoomDelta),ee.bearingDelta&&(g.bearingDelta=(g.bearingDelta||0)+ee.bearingDelta),ee.pitchDelta&&(g.pitchDelta=(g.pitchDelta||0)+ee.pitchDelta),ee.around!==void 0&&(g.around=ee.around),ee.pinchAround!==void 0&&(g.pinchAround=ee.pinchAround),ee.noInertia&&(g.noInertia=ee.noInertia),a.extend(b,se),a.extend(y,ve)}this._updateMapTransform(g,b,y),this._changes=[]},un.prototype._updateMapTransform=function(g,b,y){var C=this._map,U=C.transform;if(!Co(g))return this._fireEvents(b,y,!0);var Y=g.panDelta,ee=g.zoomDelta,se=g.bearingDelta,ve=g.pitchDelta,Oe=g.around,He=g.pinchAround;He!==void 0&&(Oe=He),C._stop(!0),Oe=Oe||C.transform.centerPoint;var Qe=U.pointLocation(Y?Oe.sub(Y):Oe);se&&(U.bearing+=se),ve&&(U.pitch+=ve),ee&&(U.zoom+=ee),U.setLocationAtPoint(Qe,Oe),this._map._update(),g.noInertia||this._inertia.record(g),this._fireEvents(b,y,!0)},un.prototype._fireEvents=function(g,b,y){var C=this,U=Va(this._eventsInProgress),Y=Va(g),ee={};for(var se in g)this._eventsInProgress[se]||(ee[se+"start"]=g[se].originalEvent),this._eventsInProgress[se]=g[se];for(var ve in!U&&Y&&this._fireEvent("movestart",Y.originalEvent),ee)this._fireEvent(ve,ee[ve]);for(var Oe in Y&&this._fireEvent("move",Y.originalEvent),g)this._fireEvent(Oe,g[Oe].originalEvent);var He,Qe={};for(var Ze in this._eventsInProgress){var mt=this._eventsInProgress[Ze],ft=mt.handlerName,xt=mt.originalEvent;this._handlersById[ft].isActive()||(delete this._eventsInProgress[Ze],Qe[Ze+"end"]=He=b[ft]||xt)}for(var st in Qe)this._fireEvent(st,Qe[st]);var wt=Va(this._eventsInProgress);if(y&&(U||Y)&&!wt){this._updatingCamera=!0;var Lt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Nt=function(qt){return qt!==0&&-C._bearingSnap<qt&&qt<C._bearingSnap};Lt?(Nt(Lt.bearing||this._map.getBearing())&&(Lt.bearing=0),this._map.easeTo(Lt,{originalEvent:He})):(this._map.fire(new a.Event("moveend",{originalEvent:He})),Nt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},un.prototype._fireEvent=function(g,b){this._map.fire(new a.Event(g,b?{originalEvent:b}:{}))},un.prototype._requestFrame=function(){var g=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(b){delete g._frameId,g.handleEvent(new go("renderFrame",{timeStamp:b})),g._applyChanges()})},un.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Nn=function(g){function b(y,C){g.call(this),this._moving=!1,this._zooming=!1,this.transform=y,this._bearingSnap=C.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},b.prototype.setCenter=function(y,C){return this.jumpTo({center:y},C)},b.prototype.panBy=function(y,C,U){return y=a.Point.convert(y).mult(-1),this.panTo(this.transform.center,a.extend({offset:y},C),U)},b.prototype.panTo=function(y,C,U){return this.easeTo(a.extend({center:y},C),U)},b.prototype.getZoom=function(){return this.transform.zoom},b.prototype.setZoom=function(y,C){return this.jumpTo({zoom:y},C),this},b.prototype.zoomTo=function(y,C,U){return this.easeTo(a.extend({zoom:y},C),U)},b.prototype.zoomIn=function(y,C){return this.zoomTo(this.getZoom()+1,y,C),this},b.prototype.zoomOut=function(y,C){return this.zoomTo(this.getZoom()-1,y,C),this},b.prototype.getBearing=function(){return this.transform.bearing},b.prototype.setBearing=function(y,C){return this.jumpTo({bearing:y},C),this},b.prototype.getPadding=function(){return this.transform.padding},b.prototype.setPadding=function(y,C){return this.jumpTo({padding:y},C),this},b.prototype.rotateTo=function(y,C,U){return this.easeTo(a.extend({bearing:y},C),U)},b.prototype.resetNorth=function(y,C){return this.rotateTo(0,a.extend({duration:1e3},y),C),this},b.prototype.resetNorthPitch=function(y,C){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},y),C),this},b.prototype.snapToNorth=function(y,C){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(y,C):this},b.prototype.getPitch=function(){return this.transform.pitch},b.prototype.setPitch=function(y,C){return this.jumpTo({pitch:y},C),this},b.prototype.cameraForBounds=function(y,C){y=a.LngLatBounds.convert(y);var U=C&&C.bearing||0;return this._cameraForBoxAndBearing(y.getNorthWest(),y.getSouthEast(),U,C)},b.prototype._cameraForBoxAndBearing=function(y,C,U,Y){var ee={top:0,bottom:0,right:0,left:0};if(typeof(Y=a.extend({padding:ee,offset:[0,0],maxZoom:this.transform.maxZoom},Y)).padding=="number"){var se=Y.padding;Y.padding={top:se,bottom:se,right:se,left:se}}Y.padding=a.extend(ee,Y.padding);var ve=this.transform,Oe=ve.padding,He=ve.project(a.LngLat.convert(y)),Qe=ve.project(a.LngLat.convert(C)),Ze=He.rotate(-U*Math.PI/180),mt=Qe.rotate(-U*Math.PI/180),ft=new a.Point(Math.max(Ze.x,mt.x),Math.max(Ze.y,mt.y)),xt=new a.Point(Math.min(Ze.x,mt.x),Math.min(Ze.y,mt.y)),st=ft.sub(xt),wt=(ve.width-(Oe.left+Oe.right+Y.padding.left+Y.padding.right))/st.x,Lt=(ve.height-(Oe.top+Oe.bottom+Y.padding.top+Y.padding.bottom))/st.y;if(!(Lt<0||wt<0)){var Nt=Math.min(ve.scaleZoom(ve.scale*Math.min(wt,Lt)),Y.maxZoom),qt=typeof Y.offset.x=="number"?new a.Point(Y.offset.x,Y.offset.y):a.Point.convert(Y.offset),Ht=new a.Point((Y.padding.left-Y.padding.right)/2,(Y.padding.top-Y.padding.bottom)/2).rotate(U*Math.PI/180),or=qt.add(Ht).mult(ve.scale/ve.zoomScale(Nt));return{center:ve.unproject(He.add(Qe).div(2).sub(or)),zoom:Nt,bearing:U}}a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},b.prototype.fitBounds=function(y,C,U){return this._fitInternal(this.cameraForBounds(y,C),C,U)},b.prototype.fitScreenCoordinates=function(y,C,U,Y,ee){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(y)),this.transform.pointLocation(a.Point.convert(C)),U,Y),Y,ee)},b.prototype._fitInternal=function(y,C,U){return y?(delete(C=a.extend(y,C)).padding,C.linear?this.easeTo(C,U):this.flyTo(C,U)):this},b.prototype.jumpTo=function(y,C){this.stop();var U=this.transform,Y=!1,ee=!1,se=!1;return"zoom"in y&&U.zoom!==+y.zoom&&(Y=!0,U.zoom=+y.zoom),y.center!==void 0&&(U.center=a.LngLat.convert(y.center)),"bearing"in y&&U.bearing!==+y.bearing&&(ee=!0,U.bearing=+y.bearing),"pitch"in y&&U.pitch!==+y.pitch&&(se=!0,U.pitch=+y.pitch),y.padding==null||U.isPaddingEqual(y.padding)||(U.padding=y.padding),this.fire(new a.Event("movestart",C)).fire(new a.Event("move",C)),Y&&this.fire(new a.Event("zoomstart",C)).fire(new a.Event("zoom",C)).fire(new a.Event("zoomend",C)),ee&&this.fire(new a.Event("rotatestart",C)).fire(new a.Event("rotate",C)).fire(new a.Event("rotateend",C)),se&&this.fire(new a.Event("pitchstart",C)).fire(new a.Event("pitch",C)).fire(new a.Event("pitchend",C)),this.fire(new a.Event("moveend",C))},b.prototype.easeTo=function(y,C){var U=this;this._stop(!1,y.easeId),((y=a.extend({offset:[0,0],duration:500,easing:a.ease},y)).animate===!1||!y.essential&&a.browser.prefersReducedMotion)&&(y.duration=0);var Y=this.transform,ee=this.getZoom(),se=this.getBearing(),ve=this.getPitch(),Oe=this.getPadding(),He="zoom"in y?+y.zoom:ee,Qe="bearing"in y?this._normalizeBearing(y.bearing,se):se,Ze="pitch"in y?+y.pitch:ve,mt="padding"in y?y.padding:Y.padding,ft=a.Point.convert(y.offset),xt=Y.centerPoint.add(ft),st=Y.pointLocation(xt),wt=a.LngLat.convert(y.center||st);this._normalizeCenter(wt);var Lt,Nt,qt=Y.project(st),Ht=Y.project(wt).sub(qt),or=Y.zoomScale(He-ee);y.around&&(Lt=a.LngLat.convert(y.around),Nt=Y.locationPoint(Lt));var vr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||He!==ee,this._rotating=this._rotating||se!==Qe,this._pitching=this._pitching||Ze!==ve,this._padding=!Y.isPaddingEqual(mt),this._easeId=y.easeId,this._prepareEase(C,y.noMoveStart,vr),this._ease(function(Pr){if(U._zooming&&(Y.zoom=a.number(ee,He,Pr)),U._rotating&&(Y.bearing=a.number(se,Qe,Pr)),U._pitching&&(Y.pitch=a.number(ve,Ze,Pr)),U._padding&&(Y.interpolatePadding(Oe,mt,Pr),xt=Y.centerPoint.add(ft)),Lt)Y.setLocationAtPoint(Lt,Nt);else{var Mr=Y.zoomScale(Y.zoom-ee),tn=He>ee?Math.min(2,or):Math.max(.5,or),Sn=Math.pow(tn,1-Pr),Ln=Y.unproject(qt.add(Ht.mult(Pr*Sn)).mult(Mr));Y.setLocationAtPoint(Y.renderWorldCopies?Ln.wrap():Ln,xt)}U._fireMoveEvents(C)},function(Pr){U._afterEase(C,Pr)},y),this},b.prototype._prepareEase=function(y,C,U){U===void 0&&(U={}),this._moving=!0,C||U.moving||this.fire(new a.Event("movestart",y)),this._zooming&&!U.zooming&&this.fire(new a.Event("zoomstart",y)),this._rotating&&!U.rotating&&this.fire(new a.Event("rotatestart",y)),this._pitching&&!U.pitching&&this.fire(new a.Event("pitchstart",y))},b.prototype._fireMoveEvents=function(y){this.fire(new a.Event("move",y)),this._zooming&&this.fire(new a.Event("zoom",y)),this._rotating&&this.fire(new a.Event("rotate",y)),this._pitching&&this.fire(new a.Event("pitch",y))},b.prototype._afterEase=function(y,C){if(!this._easeId||!C||this._easeId!==C){delete this._easeId;var U=this._zooming,Y=this._rotating,ee=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,U&&this.fire(new a.Event("zoomend",y)),Y&&this.fire(new a.Event("rotateend",y)),ee&&this.fire(new a.Event("pitchend",y)),this.fire(new a.Event("moveend",y))}},b.prototype.flyTo=function(y,C){var U=this;if(!y.essential&&a.browser.prefersReducedMotion){var Y=a.pick(y,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Y,C)}this.stop(),y=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},y);var ee=this.transform,se=this.getZoom(),ve=this.getBearing(),Oe=this.getPitch(),He=this.getPadding(),Qe="zoom"in y?a.clamp(+y.zoom,ee.minZoom,ee.maxZoom):se,Ze="bearing"in y?this._normalizeBearing(y.bearing,ve):ve,mt="pitch"in y?+y.pitch:Oe,ft="padding"in y?y.padding:ee.padding,xt=ee.zoomScale(Qe-se),st=a.Point.convert(y.offset),wt=ee.centerPoint.add(st),Lt=ee.pointLocation(wt),Nt=a.LngLat.convert(y.center||Lt);this._normalizeCenter(Nt);var qt=ee.project(Lt),Ht=ee.project(Nt).sub(qt),or=y.curve,vr=Math.max(ee.width,ee.height),Pr=vr/xt,Mr=Ht.mag();if("minZoom"in y){var tn=a.clamp(Math.min(y.minZoom,se,Qe),ee.minZoom,ee.maxZoom),Sn=vr/ee.zoomScale(tn-se);or=Math.sqrt(Sn/Mr*2)}var Ln=or*or;function Bn(ai){var xn=(Pr*Pr-vr*vr+(ai?-1:1)*Ln*Ln*Mr*Mr)/(2*(ai?Pr:vr)*Ln*Mr);return Math.log(Math.sqrt(xn*xn+1)-xn)}function ji(ai){return(Math.exp(ai)-Math.exp(-ai))/2}function nn(ai){return(Math.exp(ai)+Math.exp(-ai))/2}var Zn=Bn(0),mi=function(ai){return nn(Zn)/nn(Zn+or*ai)},pi=function(ai){return vr*((nn(Zn)*(ji(xn=Zn+or*ai)/nn(xn))-ji(Zn))/Ln)/Mr;var xn},ci=(Bn(1)-Zn)/or;if(Math.abs(Mr)<1e-6||!isFinite(ci)){if(Math.abs(vr-Pr)<1e-6)return this.easeTo(y,C);var _i=Pr<vr?-1:1;ci=Math.abs(Math.log(Pr/vr))/or,pi=function(){return 0},mi=function(ai){return Math.exp(_i*or*ai)}}return y.duration="duration"in y?+y.duration:1e3*ci/("screenSpeed"in y?+y.screenSpeed/or:+y.speed),y.maxDuration&&y.duration>y.maxDuration&&(y.duration=0),this._zooming=!0,this._rotating=ve!==Ze,this._pitching=mt!==Oe,this._padding=!ee.isPaddingEqual(ft),this._prepareEase(C,!1),this._ease(function(ai){var xn=ai*ci,ca=1/mi(xn);ee.zoom=ai===1?Qe:se+ee.scaleZoom(ca),U._rotating&&(ee.bearing=a.number(ve,Ze,ai)),U._pitching&&(ee.pitch=a.number(Oe,mt,ai)),U._padding&&(ee.interpolatePadding(He,ft,ai),wt=ee.centerPoint.add(st));var Oa=ai===1?Nt:ee.unproject(qt.add(Ht.mult(pi(xn))).mult(ca));ee.setLocationAtPoint(ee.renderWorldCopies?Oa.wrap():Oa,wt),U._fireMoveEvents(C)},function(){return U._afterEase(C)},y),this},b.prototype.isEasing=function(){return!!this._easeFrameId},b.prototype.stop=function(){return this._stop()},b.prototype._stop=function(y,C){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var U=this._onEaseEnd;delete this._onEaseEnd,U.call(this,C)}if(!y){var Y=this.handlers;Y&&Y.stop(!1)}return this},b.prototype._ease=function(y,C,U){U.animate===!1||U.duration===0?(y(1),C()):(this._easeStart=a.browser.now(),this._easeOptions=U,this._onEaseFrame=y,this._onEaseEnd=C,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},b.prototype._renderFrameCallback=function(){var y=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(y)),y<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},b.prototype._normalizeBearing=function(y,C){y=a.wrap(y,-180,180);var U=Math.abs(y-C);return Math.abs(y-360-C)<U&&(y-=360),Math.abs(y+360-C)<U&&(y+=360),y},b.prototype._normalizeCenter=function(y){var C=this.transform;if(C.renderWorldCopies&&!C.lngRange){var U=y.lng-C.center.lng;y.lng+=U>180?-360:U<-180?360:0}},b}(a.Evented),na=function(g){g===void 0&&(g={}),this.options=g,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};na.prototype.getDefaultPosition=function(){return"bottom-right"},na.prototype.onAdd=function(g){var b=this.options&&this.options.compact;return this._map=g,this._container=d.create("div","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=d.create("button","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.type="button",this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=d.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),b&&this._container.classList.add("maplibregl-compact","mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),b===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},na.prototype.onRemove=function(){d.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},na.prototype._setElementTitle=function(g,b){var y=this._map._getUIString("AttributionControl."+b);g.title=y,g.setAttribute("aria-label",y)},na.prototype._toggleAttribution=function(){this._container.classList.contains("maplibregl-compact-show")||this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},na.prototype._updateEditLink=function(){var g=this._editLink;g||(g=this._editLink=this._container.querySelector(".mapbox-improve-map"));var b=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(g){var y=b.reduce(function(C,U,Y){return U.value&&(C+=U.key+"="+U.value+(Y<b.length-1?"&":"")),C},"?");g.href=a.config.FEEDBACK_URL+"/"+y+(this._map._hash?this._map._hash.getHashString(!0):""),g.rel="noopener nofollow",this._setElementTitle(g,"MapFeedback")}},na.prototype._updateData=function(g){!g||g.sourceDataType!=="metadata"&&g.sourceDataType!=="visibility"&&g.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},na.prototype._updateAttributions=function(){if(this._map.style){var g=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?g=g.concat(this.options.customAttribution.map(function(se){return typeof se!="string"?"":se})):typeof this.options.customAttribution=="string"&&g.push(this.options.customAttribution)),this._map.style.stylesheet){var b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}var y=this._map.style.sourceCaches;for(var C in y){var U=y[C];if(U.used){var Y=U.getSource();Y.attribution&&g.indexOf(Y.attribution)<0&&g.push(Y.attribution)}}g.sort(function(se,ve){return se.length-ve.length});var ee=(g=g.filter(function(se,ve){for(var Oe=ve+1;Oe<g.length;Oe++)if(g[Oe].indexOf(se)>=0)return!1;return!0})).join(" | ");ee!==this._attribHTML&&(this._attribHTML=ee,g.length?(this._innerContainer.innerHTML=ee,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._editLink=null)}},na.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("maplibregl-compact","mapboxgl-compact"):this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show")};var ua=function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)};ua.prototype.onAdd=function(g){this._map=g,this._container=d.create("div","maplibregl-ctrl mapboxgl-ctrl");var b=d.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return b.target="_blank",b.rel="noopener nofollow",b.href="https://maplibre.org/",b.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),b.setAttribute("rel","noopener nofollow"),this._container.appendChild(b),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ua.prototype.onRemove=function(){d.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ua.prototype.getDefaultPosition=function(){return"bottom-left"},ua.prototype._updateLogo=function(g){g&&g.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},ua.prototype._logoRequired=function(){if(this._map.style){var g=this._map.style.sourceCaches;for(var b in g)if(g[b].getSource().mapbox_logo)return!0;return!1}},ua.prototype._updateCompact=function(){var g=this._container.children;if(g.length){var b=g[0];this._map.getCanvasContainer().offsetWidth<250?b.classList.add("maplibregl-compact","mapboxgl-compact"):b.classList.remove("maplibregl-compact","mapboxgl-compact")}};var Dl=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Dl.prototype.add=function(g){var b=++this._id;return this._queue.push({callback:g,id:b,cancelled:!1}),b},Dl.prototype.remove=function(g){for(var b=this._currentlyRunning,y=0,C=b?this._queue.concat(b):this._queue;y<C.length;y+=1){var U=C[y];if(U.id===g)return void(U.cancelled=!0)}},Dl.prototype.run=function(g){g===void 0&&(g=0);var b=this._currentlyRunning=this._queue;this._queue=[];for(var y=0,C=b;y<C.length;y+=1){var U=C[y];if(!U.cancelled&&(U.callback(g),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Dl.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var zo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},O=a.window.HTMLImageElement,c=a.window.HTMLElement,_=a.window.ImageBitmap,k={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},R=function(g){function b(C){var U=this;if((C=a.extend({},k,C)).minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var Y=new ii(C.minZoom,C.maxZoom,C.minPitch,C.maxPitch,C.renderWorldCopies);if(g.call(this,Y,C),this._interactive=C.interactive,this._maxTileCacheSize=C.maxTileCacheSize,this._failIfMajorPerformanceCaveat=C.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=C.preserveDrawingBuffer,this._antialias=C.antialias,this._trackResize=C.trackResize,this._bearingSnap=C.bearingSnap,this._refreshExpiredTiles=C.refreshExpiredTiles,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=C.collectResourceTiming,this._renderTaskQueue=new Dl,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},zo,C.locale),this._clickTolerance=C.clickTolerance,this._requestManager=new a.RequestManager(C.transformRequest,C.accessToken),typeof C.container=="string"){if(this._container=a.window.document.getElementById(C.container),!this._container)throw new Error("Container '"+C.container+"' not found.")}else{if(!(C.container instanceof c))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return U._update(!1)}),this.on("moveend",function(){return U._update(!1)}),this.on("zoom",function(){return U._update(!0)}),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new un(this,C),this._hash=C.hash&&new Xl(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,a.extend({},C.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=C.localIdeographFontFamily,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new na({customAttribution:C.customAttribution})),this.addControl(new ua,C.logoPosition),this.on("style.load",function(){U.transform.unmodified&&U.jumpTo(U.style.stylesheet)}),this.on("data",function(ee){U._update(ee.dataType==="style"),U.fire(new a.Event(ee.dataType+"data",ee))}),this.on("dataloading",function(ee){U.fire(new a.Event(ee.dataType+"dataloading",ee))})}g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b;var y={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return b.prototype._getMapId=function(){return this._mapId},b.prototype.addControl=function(C,U){if(U===void 0&&(U=C.getDefaultPosition?C.getDefaultPosition():"top-right"),!C||!C.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Y=C.onAdd(this);this._controls.push(C);var ee=this._controlPositions[U];return U.indexOf("bottom")!==-1?ee.insertBefore(Y,ee.firstChild):ee.appendChild(Y),this},b.prototype.removeControl=function(C){if(!C||!C.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var U=this._controls.indexOf(C);return U>-1&&this._controls.splice(U,1),C.onRemove(this),this},b.prototype.hasControl=function(C){return this._controls.indexOf(C)>-1},b.prototype.resize=function(C){var U=this._containerDimensions(),Y=U[0],ee=U[1];this._resizeCanvas(Y,ee),this.transform.resize(Y,ee),this.painter.resize(Y,ee);var se=!this._moving;return se&&(this.stop(),this.fire(new a.Event("movestart",C)).fire(new a.Event("move",C))),this.fire(new a.Event("resize",C)),se&&this.fire(new a.Event("moveend",C)),this},b.prototype.getBounds=function(){return this.transform.getBounds()},b.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},b.prototype.setMaxBounds=function(C){return this.transform.setMaxBounds(a.LngLatBounds.convert(C)),this._update()},b.prototype.setMinZoom=function(C){if((C=C??-2)>=-2&&C<=this.transform.maxZoom)return this.transform.minZoom=C,this._update(),this.getZoom()<C&&this.setZoom(C),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},b.prototype.getMinZoom=function(){return this.transform.minZoom},b.prototype.setMaxZoom=function(C){if((C=C??22)>=this.transform.minZoom)return this.transform.maxZoom=C,this._update(),this.getZoom()>C&&this.setZoom(C),this;throw new Error("maxZoom must be greater than the current minZoom")},b.prototype.getMaxZoom=function(){return this.transform.maxZoom},b.prototype.setMinPitch=function(C){if((C=C??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(C>=0&&C<=this.transform.maxPitch)return this.transform.minPitch=C,this._update(),this.getPitch()<C&&this.setPitch(C),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},b.prototype.getMinPitch=function(){return this.transform.minPitch},b.prototype.setMaxPitch=function(C){if((C=C??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(C>=this.transform.minPitch)return this.transform.maxPitch=C,this._update(),this.getPitch()>C&&this.setPitch(C),this;throw new Error("maxPitch must be greater than the current minPitch")},b.prototype.getMaxPitch=function(){return this.transform.maxPitch},b.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},b.prototype.setRenderWorldCopies=function(C){return this.transform.renderWorldCopies=C,this._update()},b.prototype.project=function(C){return this.transform.locationPoint(a.LngLat.convert(C))},b.prototype.unproject=function(C){return this.transform.pointLocation(a.Point.convert(C))},b.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},b.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},b.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},b.prototype._createDelegatedListener=function(C,U,Y){var ee,se=this;if(C==="mouseenter"||C==="mouseover"){var ve=!1;return{layer:U,listener:Y,delegates:{mousemove:function(He){var Qe=se.getLayer(U)?se.queryRenderedFeatures(He.point,{layers:[U]}):[];Qe.length?ve||(ve=!0,Y.call(se,new So(C,se,He.originalEvent,{features:Qe}))):ve=!1},mouseout:function(){ve=!1}}}}if(C==="mouseleave"||C==="mouseout"){var Oe=!1;return{layer:U,listener:Y,delegates:{mousemove:function(He){(se.getLayer(U)?se.queryRenderedFeatures(He.point,{layers:[U]}):[]).length?Oe=!0:Oe&&(Oe=!1,Y.call(se,new So(C,se,He.originalEvent)))},mouseout:function(He){Oe&&(Oe=!1,Y.call(se,new So(C,se,He.originalEvent)))}}}}return{layer:U,listener:Y,delegates:(ee={},ee[C]=function(He){var Qe=se.getLayer(U)?se.queryRenderedFeatures(He.point,{layers:[U]}):[];Qe.length&&(He.features=Qe,Y.call(se,He),delete He.features)},ee)}},b.prototype.on=function(C,U,Y){if(Y===void 0)return g.prototype.on.call(this,C,U);var ee=this._createDelegatedListener(C,U,Y);for(var se in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(ee),ee.delegates)this.on(se,ee.delegates[se]);return this},b.prototype.once=function(C,U,Y){if(Y===void 0)return g.prototype.once.call(this,C,U);var ee=this._createDelegatedListener(C,U,Y);for(var se in ee.delegates)this.once(se,ee.delegates[se]);return this},b.prototype.off=function(C,U,Y){var ee=this;return Y===void 0?g.prototype.off.call(this,C,U):(this._delegatedListeners&&this._delegatedListeners[C]&&function(se){for(var ve=se[C],Oe=0;Oe<ve.length;Oe++){var He=ve[Oe];if(He.layer===U&&He.listener===Y){for(var Qe in He.delegates)ee.off(Qe,He.delegates[Qe]);return ve.splice(Oe,1),ee}}}(this._delegatedListeners),this)},b.prototype.queryRenderedFeatures=function(C,U){if(!this.style)return[];var Y;if(U!==void 0||C===void 0||C instanceof a.Point||Array.isArray(C)||(U=C,C=void 0),U=U||{},(C=C||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||typeof C[0]=="number")Y=[a.Point.convert(C)];else{var ee=a.Point.convert(C[0]),se=a.Point.convert(C[1]);Y=[ee,new a.Point(se.x,ee.y),se,new a.Point(ee.x,se.y),ee]}return this.style.queryRenderedFeatures(Y,U,this.transform)},b.prototype.querySourceFeatures=function(C,U){return this.style.querySourceFeatures(C,U)},b.prototype.setStyle=function(C,U){return(U=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},U)).diff!==!1&&U.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&C?(this._diffStyle(C,U),this):(this._localIdeographFontFamily=U.localIdeographFontFamily,this._updateStyle(C,U))},b.prototype.setTransformRequest=function(C){return this._requestManager.setTransformRequest(C),this},b.prototype._getUIString=function(C){var U=this._locale[C];if(U==null)throw new Error("Missing UI string '"+C+"'");return U},b.prototype._updateStyle=function(C,U){return this.style&&(this.style.setEventedParent(null),this.style._remove()),C?(this.style=new Ji(this,U||{}),this.style.setEventedParent(this,{style:this.style}),typeof C=="string"?this.style.loadURL(C):this.style.loadJSON(C),this):(delete this.style,this)},b.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ji(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},b.prototype._diffStyle=function(C,U){var Y=this;if(typeof C=="string"){var ee=this._requestManager.normalizeStyleURL(C),se=this._requestManager.transformRequest(ee,a.ResourceType.Style);a.getJSON(se,function(ve,Oe){ve?Y.fire(new a.ErrorEvent(ve)):Oe&&Y._updateDiff(Oe,U)})}else typeof C=="object"&&this._updateDiff(C,U)},b.prototype._updateDiff=function(C,U){try{this.style.setState(C)&&this._update(!0)}catch(Y){a.warnOnce("Unable to perform style diff: "+(Y.message||Y.error||Y)+".  Rebuilding the style from scratch."),this._updateStyle(C,U)}},b.prototype.getStyle=function(){if(this.style)return this.style.serialize()},b.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},b.prototype.addSource=function(C,U){return this._lazyInitEmptyStyle(),this.style.addSource(C,U),this._update(!0)},b.prototype.isSourceLoaded=function(C){var U=this.style&&this.style.sourceCaches[C];if(U!==void 0)return U.loaded();this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+C+"'")))},b.prototype.areTilesLoaded=function(){var C=this.style&&this.style.sourceCaches;for(var U in C){var Y=C[U]._tiles;for(var ee in Y){var se=Y[ee];if(se.state!=="loaded"&&se.state!=="errored")return!1}}return!0},b.prototype.addSourceType=function(C,U,Y){return this._lazyInitEmptyStyle(),this.style.addSourceType(C,U,Y)},b.prototype.removeSource=function(C){return this.style.removeSource(C),this._update(!0)},b.prototype.getSource=function(C){return this.style.getSource(C)},b.prototype.addImage=function(C,U,Y){Y===void 0&&(Y={});var ee=Y.pixelRatio;ee===void 0&&(ee=1);var se=Y.sdf;se===void 0&&(se=!1);var ve=Y.stretchX,Oe=Y.stretchY,He=Y.content;if(this._lazyInitEmptyStyle(),U instanceof O||_&&U instanceof _){var Qe=a.browser.getImageData(U);this.style.addImage(C,{data:new a.RGBAImage({width:Qe.width,height:Qe.height},Qe.data),pixelRatio:ee,stretchX:ve,stretchY:Oe,content:He,sdf:se,version:0})}else{if(U.width===void 0||U.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Ze=U;this.style.addImage(C,{data:new a.RGBAImage({width:U.width,height:U.height},new Uint8Array(U.data)),pixelRatio:ee,stretchX:ve,stretchY:Oe,content:He,sdf:se,version:0,userImage:Ze}),Ze.onAdd&&Ze.onAdd(this,C)}},b.prototype.updateImage=function(C,U){var Y=this.style.getImage(C);if(!Y)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ee=U instanceof O||_&&U instanceof _?a.browser.getImageData(U):U,se=ee.width,ve=ee.height,Oe=ee.data;return se===void 0||ve===void 0?this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):se!==Y.data.width||ve!==Y.data.height?this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(Y.data.replace(Oe,!(U instanceof O||_&&U instanceof _)),void this.style.updateImage(C,Y))},b.prototype.hasImage=function(C){return C?!!this.style.getImage(C):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},b.prototype.removeImage=function(C){this.style.removeImage(C)},b.prototype.loadImage=function(C,U){a.getImage(this._requestManager.transformRequest(C,a.ResourceType.Image),U)},b.prototype.listImages=function(){return this.style.listImages()},b.prototype.addLayer=function(C,U){return this._lazyInitEmptyStyle(),this.style.addLayer(C,U),this._update(!0)},b.prototype.moveLayer=function(C,U){return this.style.moveLayer(C,U),this._update(!0)},b.prototype.removeLayer=function(C){return this.style.removeLayer(C),this._update(!0)},b.prototype.getLayer=function(C){return this.style.getLayer(C)},b.prototype.setLayerZoomRange=function(C,U,Y){return this.style.setLayerZoomRange(C,U,Y),this._update(!0)},b.prototype.setFilter=function(C,U,Y){return Y===void 0&&(Y={}),this.style.setFilter(C,U,Y),this._update(!0)},b.prototype.getFilter=function(C){return this.style.getFilter(C)},b.prototype.setPaintProperty=function(C,U,Y,ee){return ee===void 0&&(ee={}),this.style.setPaintProperty(C,U,Y,ee),this._update(!0)},b.prototype.getPaintProperty=function(C,U){return this.style.getPaintProperty(C,U)},b.prototype.setLayoutProperty=function(C,U,Y,ee){return ee===void 0&&(ee={}),this.style.setLayoutProperty(C,U,Y,ee),this._update(!0)},b.prototype.getLayoutProperty=function(C,U){return this.style.getLayoutProperty(C,U)},b.prototype.setLight=function(C,U){return U===void 0&&(U={}),this._lazyInitEmptyStyle(),this.style.setLight(C,U),this._update(!0)},b.prototype.getLight=function(){return this.style.getLight()},b.prototype.setFeatureState=function(C,U){return this.style.setFeatureState(C,U),this._update()},b.prototype.removeFeatureState=function(C,U){return this.style.removeFeatureState(C,U),this._update()},b.prototype.getFeatureState=function(C){return this.style.getFeatureState(C)},b.prototype.getContainer=function(){return this._container},b.prototype.getCanvasContainer=function(){return this._canvasContainer},b.prototype.getCanvas=function(){return this._canvas},b.prototype._containerDimensions=function(){var C=0,U=0;return this._container&&(C=this._container.clientWidth||400,U=this._container.clientHeight||300),[C,U]},b.prototype._setupContainer=function(){var C=this._container;C.classList.add("maplibregl-map","mapboxgl-map");var U=this._canvasContainer=d.create("div","maplibregl-canvas-container mapboxgl-canvas-container",C);this._interactive&&U.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=d.create("canvas","maplibregl-canvas mapboxgl-canvas",U),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var Y=this._containerDimensions();this._resizeCanvas(Y[0],Y[1]);var ee=this._controlContainer=d.create("div","maplibregl-control-container mapboxgl-control-container",C),se=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(ve){se[ve]=d.create("div","maplibregl-ctrl-"+ve+" mapboxgl-ctrl-"+ve,ee)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},b.prototype._resizeCanvas=function(C,U){var Y=a.browser.devicePixelRatio||1;this._canvas.width=Y*C,this._canvas.height=Y*U,this._canvas.style.width=C+"px",this._canvas.style.height=U+"px"},b.prototype._setupPainter=function(){var C=a.extend({},s.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),U=this._canvas.getContext("webgl",C)||this._canvas.getContext("experimental-webgl",C);U?(this.painter=new Jr(U,this.transform),a.webpSupported.testSupport(U)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))},b.prototype._contextLost=function(C){C.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:C}))},b.prototype._contextRestored=function(C){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:C}))},b.prototype._onMapScroll=function(C){if(C.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},b.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},b.prototype._update=function(C){return this.style?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this},b.prototype._requestRenderFrame=function(C){return this._update(),this._renderTaskQueue.add(C)},b.prototype._cancelRenderFrame=function(C){this._renderTaskQueue.remove(C)},b.prototype._render=function(C){var U,Y=this,ee=0,se=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(U=se.createQueryEXT(),se.beginQueryEXT(se.TIME_ELAPSED_EXT,U),ee=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(C),!this._removed){var ve=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Oe=this.transform.zoom,He=a.browser.now();this.style.zoomHistory.update(Oe,He);var Qe=new a.EvaluationParameters(Oe,{now:He,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ze=Qe.crossFadingFactor();Ze===1&&Ze===this._crossFadingFactor||(ve=!0,this._crossFadingFactor=Ze),this.style.update(Qe)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||ve)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var mt=a.browser.now()-ee;se.endQueryEXT(se.TIME_ELAPSED_EXT,U),setTimeout(function(){var st=se.getQueryObjectEXT(U,se.QUERY_RESULT_EXT)/1e6;se.deleteQueryEXT(U),Y.fire(new a.Event("gpu-timing-frame",{cpuTime:mt,gpuTime:st}))},50)}if(this.listens("gpu-timing-layer")){var ft=this.painter.collectGpuTimers();setTimeout(function(){var st=Y.painter.queryGpuTimers(ft);Y.fire(new a.Event("gpu-timing-layer",{layerTimes:st}))},50)}var xt=this._sourcesDirty||this._styleDirty||this._placementDirty;return xt||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||xt||(this._fullyLoaded=!0),this}},b.prototype.remove=function(){this._hash&&this._hash.remove();for(var C=0,U=this._controls;C<U.length;C+=1)U[C].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var Y=this.painter.context.gl.getExtension("WEBGL_lose_context");Y&&Y.loseContext(),W(this._canvasContainer),W(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),this._removed=!0,this.fire(new a.Event("remove"))},b.prototype.triggerRepaint=function(){var C=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(U){C._frame=null,C._render(U)}))},b.prototype._onWindowOnline=function(){this._update()},b.prototype._onWindowResize=function(C){this._trackResize&&this.resize({originalEvent:C})._update()},y.showTileBoundaries.get=function(){return!!this._showTileBoundaries},y.showTileBoundaries.set=function(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._update())},y.showPadding.get=function(){return!!this._showPadding},y.showPadding.set=function(C){this._showPadding!==C&&(this._showPadding=C,this._update())},y.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},y.showCollisionBoxes.set=function(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,C?this.style._generateCollisionBoxes():this._update())},y.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},y.showOverdrawInspector.set=function(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._update())},y.repaint.get=function(){return!!this._repaint},y.repaint.set=function(C){this._repaint!==C&&(this._repaint=C,this.triggerRepaint())},y.vertices.get=function(){return!!this._vertices},y.vertices.set=function(C){this._vertices=C,this._update()},b.prototype._setCacheLimits=function(C,U){a.setCacheLimits(C,U)},y.version.get=function(){return a.version},Object.defineProperties(b.prototype,y),b}(Nn);function W(g){g.parentNode&&g.parentNode.removeChild(g)}var q={showCompass:!0,showZoom:!0,visualizePitch:!1},ue=function(g){var b=this;this.options=a.extend({},q,g),this._container=d.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(y){return y.preventDefault()}),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",function(y){return b._map.zoomIn({},{originalEvent:y})}),d.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",function(y){return b._map.zoomOut({},{originalEvent:y})}),d.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",function(y){b.options.visualizePitch?b._map.resetNorthPitch({},{originalEvent:y}):b._map.resetNorth({},{originalEvent:y})}),this._compassIcon=d.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ue.prototype._updateZoomButtons=function(){var g=this._map.getZoom(),b=g===this._map.getMaxZoom(),y=g===this._map.getMinZoom();this._zoomInButton.disabled=b,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",b.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())},ue.prototype._rotateCompassArrow=function(){var g=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=g},ue.prototype.onAdd=function(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new he(this._map,this._compass,this.options.visualizePitch)),this._container},ue.prototype.onRemove=function(){d.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ue.prototype._createButton=function(g,b){var y=d.create("button",g,this._container);return y.type="button",y.addEventListener("click",b),y},ue.prototype._setButtonTitle=function(g,b){var y=this._map._getUIString("NavigationControl."+b);g.title=y,g.setAttribute("aria-label",y)};var he=function(g,b,y){y===void 0&&(y=!1),this._clickTolerance=10,this.element=b,this.mouseRotate=new hl({clickTolerance:g.dragRotate._mouseRotate._clickTolerance}),this.map=g,y&&(this.mousePitch=new hu({clickTolerance:g.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener(b,"mousedown",this.mousedown),d.addEventListener(b,"touchstart",this.touchstart,{passive:!1}),d.addEventListener(b,"touchmove",this.touchmove),d.addEventListener(b,"touchend",this.touchend),d.addEventListener(b,"touchcancel",this.reset)};function be(g,b,y){if(g=new a.LngLat(g.lng,g.lat),b){var C=new a.LngLat(g.lng-360,g.lat),U=new a.LngLat(g.lng+360,g.lat),Y=y.locationPoint(g).distSqr(b);y.locationPoint(C).distSqr(b)<Y?g=C:y.locationPoint(U).distSqr(b)<Y&&(g=U)}for(;Math.abs(g.lng-y.center.lng)>180;){var ee=y.locationPoint(g);if(ee.x>=0&&ee.y>=0&&ee.x<=y.width&&ee.y<=y.height)break;g.lng>y.center.lng?g.lng-=360:g.lng+=360}return g}he.prototype.down=function(g,b){this.mouseRotate.mousedown(g,b),this.mousePitch&&this.mousePitch.mousedown(g,b),d.disableDrag()},he.prototype.move=function(g,b){var y=this.map,C=this.mouseRotate.mousemoveWindow(g,b);if(C&&C.bearingDelta&&y.setBearing(y.getBearing()+C.bearingDelta),this.mousePitch){var U=this.mousePitch.mousemoveWindow(g,b);U&&U.pitchDelta&&y.setPitch(y.getPitch()+U.pitchDelta)}},he.prototype.off=function(){var g=this.element;d.removeEventListener(g,"mousedown",this.mousedown),d.removeEventListener(g,"touchstart",this.touchstart,{passive:!1}),d.removeEventListener(g,"touchmove",this.touchmove),d.removeEventListener(g,"touchend",this.touchend),d.removeEventListener(g,"touchcancel",this.reset),this.offTemp()},he.prototype.offTemp=function(){d.enableDrag(),d.removeEventListener(a.window,"mousemove",this.mousemove),d.removeEventListener(a.window,"mouseup",this.mouseup)},he.prototype.mousedown=function(g){this.down(a.extend({},g,{ctrlKey:!0,preventDefault:function(){return g.preventDefault()}}),d.mousePos(this.element,g)),d.addEventListener(a.window,"mousemove",this.mousemove),d.addEventListener(a.window,"mouseup",this.mouseup)},he.prototype.mousemove=function(g){this.move(g,d.mousePos(this.element,g))},he.prototype.mouseup=function(g){this.mouseRotate.mouseupWindow(g),this.mousePitch&&this.mousePitch.mouseupWindow(g),this.offTemp()},he.prototype.touchstart=function(g){g.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=d.touchPos(this.element,g.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return g.preventDefault()}},this._startPos))},he.prototype.touchmove=function(g){g.targetTouches.length!==1?this.reset():(this._lastPos=d.touchPos(this.element,g.targetTouches)[0],this.move({preventDefault:function(){return g.preventDefault()}},this._lastPos))},he.prototype.touchend=function(g){g.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},he.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Te={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ue(g,b,y){var C=g.classList;for(var U in Te)C.remove("maplibregl-"+y+"-anchor-"+U,"mapboxgl-"+y+"-anchor-"+U);C.add("maplibregl-"+y+"-anchor-"+b,"mapboxgl-"+y+"-anchor-"+b)}var Ke,yt=function(g){function b(y,C){if(g.call(this),(y instanceof a.window.HTMLElement||C)&&(y=a.extend({element:y},C)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=y&&y.anchor||"center",this._color=y&&y.color||"#3FB1CE",this._scale=y&&y.scale||1,this._draggable=y&&y.draggable||!1,this._clickTolerance=y&&y.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=y&&y.rotation||0,this._rotationAlignment=y&&y.rotationAlignment||"auto",this._pitchAlignment=y&&y.pitchAlignment&&y.pitchAlignment!=="auto"?y.pitchAlignment:this._rotationAlignment,y&&y.element)this._element=y.element,this._offset=a.Point.convert(y&&y.offset||[0,0]);else{this._defaultMarker=!0,this._element=d.create("div"),this._element.setAttribute("aria-label","Map marker");var U=d.createNS("http://www.w3.org/2000/svg","svg");U.setAttributeNS(null,"display","block"),U.setAttributeNS(null,"height","41px"),U.setAttributeNS(null,"width","27px"),U.setAttributeNS(null,"viewBox","0 0 27 41");var Y=d.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"stroke","none"),Y.setAttributeNS(null,"stroke-width","1"),Y.setAttributeNS(null,"fill","none"),Y.setAttributeNS(null,"fill-rule","evenodd");var ee=d.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"fill-rule","nonzero");var se=d.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"transform","translate(3.0, 29.0)"),se.setAttributeNS(null,"fill","#000000");for(var ve=0,Oe=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];ve<Oe.length;ve+=1){var He=Oe[ve],Qe=d.createNS("http://www.w3.org/2000/svg","ellipse");Qe.setAttributeNS(null,"opacity","0.04"),Qe.setAttributeNS(null,"cx","10.5"),Qe.setAttributeNS(null,"cy","5.80029008"),Qe.setAttributeNS(null,"rx",He.rx),Qe.setAttributeNS(null,"ry",He.ry),se.appendChild(Qe)}var Ze=d.createNS("http://www.w3.org/2000/svg","g");Ze.setAttributeNS(null,"fill",this._color);var mt=d.createNS("http://www.w3.org/2000/svg","path");mt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ze.appendChild(mt);var ft=d.createNS("http://www.w3.org/2000/svg","g");ft.setAttributeNS(null,"opacity","0.25"),ft.setAttributeNS(null,"fill","#000000");var xt=d.createNS("http://www.w3.org/2000/svg","path");xt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ft.appendChild(xt);var st=d.createNS("http://www.w3.org/2000/svg","g");st.setAttributeNS(null,"transform","translate(6.0, 7.0)"),st.setAttributeNS(null,"fill","#FFFFFF");var wt=d.createNS("http://www.w3.org/2000/svg","g");wt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Lt=d.createNS("http://www.w3.org/2000/svg","circle");Lt.setAttributeNS(null,"fill","#000000"),Lt.setAttributeNS(null,"opacity","0.25"),Lt.setAttributeNS(null,"cx","5.5"),Lt.setAttributeNS(null,"cy","5.5"),Lt.setAttributeNS(null,"r","5.4999962");var Nt=d.createNS("http://www.w3.org/2000/svg","circle");Nt.setAttributeNS(null,"fill","#FFFFFF"),Nt.setAttributeNS(null,"cx","5.5"),Nt.setAttributeNS(null,"cy","5.5"),Nt.setAttributeNS(null,"r","5.4999962"),wt.appendChild(Lt),wt.appendChild(Nt),ee.appendChild(se),ee.appendChild(Ze),ee.appendChild(ft),ee.appendChild(st),ee.appendChild(wt),U.appendChild(ee),U.setAttributeNS(null,"height",41*this._scale+"px"),U.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(U),this._offset=a.Point.convert(y&&y.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",function(qt){qt.preventDefault()}),this._element.addEventListener("mousedown",function(qt){qt.preventDefault()}),Ue(this._element,this._anchor,"marker"),this._popup=null}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.addTo=function(y){return this.remove(),this._map=y,y.getCanvasContainer().appendChild(this._element),y.on("move",this._update),y.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},b.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),d.remove(this._element),this._popup&&this._popup.remove(),this},b.prototype.getLngLat=function(){return this._lngLat},b.prototype.setLngLat=function(y){return this._lngLat=a.LngLat.convert(y),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},b.prototype.getElement=function(){return this._element},b.prototype.setPopup=function(y){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),y){if(!("offset"in y.options)){var C=Math.sqrt(Math.pow(13.5,2)/2);y.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[C,-1*(24.6+C)],"bottom-right":[-C,-1*(24.6+C)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=y,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},b.prototype._onKeyPress=function(y){var C=y.code,U=y.charCode||y.keyCode;C!=="Space"&&C!=="Enter"&&U!==32&&U!==13||this.togglePopup()},b.prototype._onMapClick=function(y){var C=y.originalEvent.target,U=this._element;this._popup&&(C===U||U.contains(C))&&this.togglePopup()},b.prototype.getPopup=function(){return this._popup},b.prototype.togglePopup=function(){var y=this._popup;return y?(y.isOpen()?y.remove():y.addTo(this._map),this):this},b.prototype._update=function(y){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=be(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var C="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?C="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(C="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var U="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?U="rotateX(0deg)":this._pitchAlignment==="map"&&(U="rotateX("+this._map.getPitch()+"deg)"),y&&y.type!=="moveend"||(this._pos=this._pos.round()),d.setTransform(this._element,Te[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+U+" "+C)}},b.prototype.getOffset=function(){return this._offset},b.prototype.setOffset=function(y){return this._offset=a.Point.convert(y),this._update(),this},b.prototype._onMove=function(y){if(!this._isDragging){var C=this._clickTolerance||this._map._clickTolerance;this._isDragging=y.point.dist(this._pointerdownPos)>=C}this._isDragging&&(this._pos=y.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))},b.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},b.prototype._addDragHandler=function(y){this._element.contains(y.originalEvent.target)&&(y.preventDefault(),this._positionDelta=y.point.sub(this._pos).add(this._offset),this._pointerdownPos=y.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},b.prototype.setDraggable=function(y){return this._draggable=!!y,this._map&&(y?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},b.prototype.isDraggable=function(){return this._draggable},b.prototype.setRotation=function(y){return this._rotation=y||0,this._update(),this},b.prototype.getRotation=function(){return this._rotation},b.prototype.setRotationAlignment=function(y){return this._rotationAlignment=y||"auto",this._update(),this},b.prototype.getRotationAlignment=function(){return this._rotationAlignment},b.prototype.setPitchAlignment=function(y){return this._pitchAlignment=y&&y!=="auto"?y:this._rotationAlignment,this._update(),this},b.prototype.getPitchAlignment=function(){return this._pitchAlignment},b}(a.Evented),ut={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},gt=0,zt=!1,Gt=function(g){function b(y){g.call(this),this.options=a.extend({},ut,y),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.onAdd=function(y){var C;return this._map=y,this._container=d.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),C=this._setupUI,Ke!==void 0?C(Ke):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(function(U){C(Ke=U.state!=="denied")}):C(Ke=!!a.window.navigator.geolocation),this._container},b.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),d.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,gt=0,zt=!1},b.prototype._isOutOfMapMaxBounds=function(y){var C=this._map.getMaxBounds(),U=y.coords;return C&&(U.longitude<C.getWest()||U.longitude>C.getEast()||U.latitude<C.getSouth()||U.latitude>C.getNorth())},b.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}},b.prototype._onSuccess=function(y){if(this._map){if(this._isOutOfMapMaxBounds(y))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",y)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=y,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(y),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(y),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",y)),this._finish()}},b.prototype._updateCamera=function(y){var C=new a.LngLat(y.coords.longitude,y.coords.latitude),U=y.coords.accuracy,Y=this._map.getBearing(),ee=a.extend({bearing:Y},this.options.fitBoundsOptions);this._map.fitBounds(C.toBounds(U),ee,{geolocateSource:!0})},b.prototype._updateMarker=function(y){if(y){var C=new a.LngLat(y.coords.longitude,y.coords.latitude);this._accuracyCircleMarker.setLngLat(C).addTo(this._map),this._userLocationDotMarker.setLngLat(C).addTo(this._map),this._accuracy=y.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},b.prototype._updateCircleRadius=function(){var y=this._map._container.clientHeight/2,C=this._map.unproject([0,y]),U=this._map.unproject([1,y]),Y=C.distanceTo(U),ee=Math.ceil(2*this._accuracy/Y);this._circleElement.style.width=ee+"px",this._circleElement.style.height=ee+"px"},b.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},b.prototype._onError=function(y){if(this._map){if(this.options.trackUserLocation)if(y.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var C=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=C,this._geolocateButton.setAttribute("aria-label",C),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(y.code===3&&zt)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",y)),this._finish()}},b.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},b.prototype._setupUI=function(y){var C=this;if(this._container.addEventListener("contextmenu",function(ee){return ee.preventDefault()}),this._geolocateButton=d.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),d.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",y===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var U=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=U,this._geolocateButton.setAttribute("aria-label",U)}else{var Y=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Y,this._geolocateButton.setAttribute("aria-label",Y)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=d.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new yt(this._dotElement),this._circleElement=d.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new yt({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ee){ee.geolocateSource||C._watchState!=="ACTIVE_LOCK"||ee.originalEvent&&ee.originalEvent.type==="resize"||(C._watchState="BACKGROUND",C._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),C._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),C.fire(new a.Event("trackuserlocationend")))})},b.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":gt--,zt=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++gt>1?(y={maximumAge:6e5,timeout:0},zt=!0):(y=this.options.positionOptions,zt=!1),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},b.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},b}(a.Evented),Jt={maxWidth:100,unit:"metric"},bt=function(g){this.options=a.extend({},Jt,g),a.bindAll(["_onMove","setUnit"],this)};function nr(g,b,y){var C=y&&y.maxWidth||100,U=g._container.clientHeight/2,Y=g.unproject([0,U]),ee=g.unproject([C,U]),se=Y.distanceTo(ee);if(y&&y.unit==="imperial"){var ve=3.2808*se;ve>5280?er(b,C,ve/5280,g._getUIString("ScaleControl.Miles")):er(b,C,ve,g._getUIString("ScaleControl.Feet"))}else y&&y.unit==="nautical"?er(b,C,se/1852,g._getUIString("ScaleControl.NauticalMiles")):se>=1e3?er(b,C,se/1e3,g._getUIString("ScaleControl.Kilometers")):er(b,C,se,g._getUIString("ScaleControl.Meters"))}function er(g,b,y,C){var U,Y,ee,se=(U=y,(Y=Math.pow(10,(""+Math.floor(U)).length-1))*(ee=(ee=U/Y)>=10?10:ee>=5?5:ee>=3?3:ee>=2?2:ee>=1?1:function(ve){var Oe=Math.pow(10,Math.ceil(-Math.log(ve)/Math.LN10));return Math.round(ve*Oe)/Oe}(ee)));g.style.width=b*(se/y)+"px",g.innerHTML=se+"&nbsp;"+C}bt.prototype.getDefaultPosition=function(){return"bottom-left"},bt.prototype._onMove=function(){nr(this._map,this._container,this.options)},bt.prototype.onAdd=function(g){return this._map=g,this._container=d.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},bt.prototype.onRemove=function(){d.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},bt.prototype.setUnit=function(g){this.options.unit=g,nr(this._map,this._container,this.options)};var mr=function(g){this._fullscreen=!1,g&&g.container&&(g.container instanceof a.window.HTMLElement?this._container=g.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};mr.prototype.onAdd=function(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=d.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},mr.prototype.onRemove=function(){d.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},mr.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},mr.prototype._setupUI=function(){var g=this._fullscreenButton=d.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);d.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",g).setAttribute("aria-hidden",!0),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},mr.prototype._updateTitle=function(){var g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g},mr.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},mr.prototype._isFullscreen=function(){return this._fullscreen},mr.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},mr.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Sr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},$r=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),gr=function(g){function b(y){g.call(this),this.options=a.extend(Object.create(Sr),y),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return g&&(b.__proto__=g),(b.prototype=Object.create(g&&g.prototype)).constructor=b,b.prototype.addTo=function(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},b.prototype.isOpen=function(){return!!this._map},b.prototype.remove=function(){return this._content&&d.remove(this._content),this._container&&(d.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},b.prototype.getLngLat=function(){return this._lngLat},b.prototype.setLngLat=function(y){return this._lngLat=a.LngLat.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this},b.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this},b.prototype.getElement=function(){return this._container},b.prototype.setText=function(y){return this.setDOMContent(a.window.document.createTextNode(y))},b.prototype.setHTML=function(y){var C,U=a.window.document.createDocumentFragment(),Y=a.window.document.createElement("body");for(Y.innerHTML=y;C=Y.firstChild;)U.appendChild(C);return this.setDOMContent(U)},b.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},b.prototype.setMaxWidth=function(y){return this.options.maxWidth=y,this._update(),this},b.prototype.setDOMContent=function(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=d.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this},b.prototype.addClassName=function(y){this._container&&this._container.classList.add(y)},b.prototype.removeClassName=function(y){this._container&&this._container.classList.remove(y)},b.prototype.setOffset=function(y){return this.options.offset=y,this._update(),this},b.prototype.toggleClassName=function(y){if(this._container)return this._container.classList.toggle(y)},b.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=d.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},b.prototype._onMouseUp=function(y){this._update(y.point)},b.prototype._onMouseMove=function(y){this._update(y.point)},b.prototype._onDrag=function(y){this._update(y.point)},b.prototype._update=function(y){var C=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=d.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=d.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Qe){return C._container.classList.add(Qe)}),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=be(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||y)){var U=this._pos=this._trackPointer&&y?y:this._map.project(this._lngLat),Y=this.options.anchor,ee=function Qe(Ze){if(Ze){if(typeof Ze=="number"){var mt=Math.round(Math.sqrt(.5*Math.pow(Ze,2)));return{center:new a.Point(0,0),top:new a.Point(0,Ze),"top-left":new a.Point(mt,mt),"top-right":new a.Point(-mt,mt),bottom:new a.Point(0,-Ze),"bottom-left":new a.Point(mt,-mt),"bottom-right":new a.Point(-mt,-mt),left:new a.Point(Ze,0),right:new a.Point(-Ze,0)}}if(Ze instanceof a.Point||Array.isArray(Ze)){var ft=a.Point.convert(Ze);return{center:ft,top:ft,"top-left":ft,"top-right":ft,bottom:ft,"bottom-left":ft,"bottom-right":ft,left:ft,right:ft}}return{center:a.Point.convert(Ze.center||[0,0]),top:a.Point.convert(Ze.top||[0,0]),"top-left":a.Point.convert(Ze["top-left"]||[0,0]),"top-right":a.Point.convert(Ze["top-right"]||[0,0]),bottom:a.Point.convert(Ze.bottom||[0,0]),"bottom-left":a.Point.convert(Ze["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(Ze["bottom-right"]||[0,0]),left:a.Point.convert(Ze.left||[0,0]),right:a.Point.convert(Ze.right||[0,0])}}return Qe(new a.Point(0,0))}(this.options.offset);if(!Y){var se,ve=this._container.offsetWidth,Oe=this._container.offsetHeight;se=U.y+ee.bottom.y<Oe?["top"]:U.y>this._map.transform.height-Oe?["bottom"]:[],U.x<ve/2?se.push("left"):U.x>this._map.transform.width-ve/2&&se.push("right"),Y=se.length===0?"bottom":se.join("-")}var He=U.add(ee[Y]).round();d.setTransform(this._container,Te[Y]+" translate("+He.x+"px,"+He.y+"px)"),Ue(this._container,Y,"popup")}},b.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var y=this._container.querySelector($r);y&&y.focus()}},b.prototype._onClose=function(){this.remove()},b}(a.Evented),cn={version:a.version,supported:s,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:R,NavigationControl:ue,GeolocateControl:Gt,AttributionControl:na,ScaleControl:bt,FullscreenControl:mr,Popup:gr,Marker:yt,Style:Ji,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){ct().acquire(Ce)},clearPrewarmedResources:function(){var g=nt;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(Ce),nt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(g){a.config.ACCESS_TOKEN=g},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(g){a.config.API_URL=g},get workerCount(){return Le.workerCount},set workerCount(g){Le.workerCount=g},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(g){a.config.MAX_PARALLEL_IMAGE_REQUESTS=g},clearStorage:function(g){a.clearTileCache(g)},workerUrl:"",addProtocol:function(g,b){a.config.REGISTERED_PROTOCOLS[g]=b},removeProtocol:function(g){delete a.config.REGISTERED_PROTOCOLS[g]}};return cn}),i})})(JV);var $5e=JV.exports;const N5e=Xs($5e),hS=e=>e==null||typeof e=="string"&&!e.length?!1:Array.isArray(e)?e.reduce((t,r)=>t||hS(r),!1):typeof e=="number"&&isNaN(e)?!1:typeof e=="object"?Object.values(e).reduce((t,r)=>t||hS(r),!1):!0,B5e=({data:e,layer:t})=>{const r=e.reduce((n,i,l)=>{(l===0||i.length===1)&&n.push([]);const a=n.length-1;return n[a].push(i),n},[]);return ae("div",{className:`
      bg-white p-1 rounded relative z-20 grid grid-cols-1 gap-1
    `,children:r.map((n,i)=>ae("div",{className:"rounded relative px-1 bg-white",children:n.map((l,a)=>ae("div",{className:"flex",children:l.map((s,d)=>ae("div",{className:`
                          ${d===0?"flex-1 font-bold":"flex-0"}
                          ${l.length>1&&d===0?"mr-4":""}
                          ${l.length===1&&d===0?`border-b-2 text-lg ${a>0?"mt-1":""}`:""}
                        `,children:s},d))},a))},i))})};let F5e=-1;const U5e=()=>`avl-layer-${++F5e}`,j5e=()=>null,V5e={setActive:!0,isDynamic:!1,filters:{},modals:{},mapActions:[],sources:[],layers:[],isVisible:!0,toolbar:["toggle-visibility"],legend:null,infoBoxes:[],props:{},state:{},mapboxMap:null,onHover:!1,onClick:!1,onBoxSelect:!1};class q5e{constructor(t={}){const r={...V5e,...t};for(const n in r)this[n]=r[n];this.id=U5e(),this.layerVisibility={},this.needsRender=this.setActive,this.callbacks=[],this.hoveredFeatures=new Map,this.dispatchStateUpdate=()=>{},this.updateState=this.updateState.bind(this)}_init(t,r){return this.mapboxMap=t,this.falcor=r,this.init(t,r)}init(t,r){return Promise.resolve()}updateState(t){typeof t=="function"?this.state=t(this.state):this.state={...this.state,...t},this.dispatchStateUpdate(this,this.state)}_onAdd(t,r,n){return this.sources.forEach(({id:i,source:l})=>{t.getSource(i)||t.addSource(i,l)}),this.layers.forEach(i=>{t.getLayer(i.id)||(i.beneath&&t.getLayer(i.beneath)?t.addLayer(i,i.beneath):t.addLayer(i),this.isVisible||this._setVisibilityNone(t,i.id),this.layerVisibility[i.id]=t.getLayoutProperty(i.id,"visibility"))}),this.onHover&&this.addHover(t,n),this.onClick&&this.addClick(t),this.onBoxSelect&&(this.state={...this.state,selection:[]},this.addBoxSelect(t)),this.onAdd(t,r)}onAdd(t,r){return Promise.resolve()}addClick(t){function r(n,{point:i,features:l,lngLat:a}){this.onClick.callback.call(this,n,l,a,i)}this.onClick.layers.forEach(n=>{if(n==="mapboxMap"){const i=r.bind(this,n);this.callbacks.push({action:"click",callback:i}),t.on("click",i)}else{const i=r.bind(this,n);this.callbacks.push({action:"click",callback:i,layerId:n}),t.on("click",n,i)}})}hoverLeave(t,r){this.hoveredFeatures.has(r)&&(this.hoveredFeatures.get(r).forEach(n=>{t.setFeatureState(n,{hover:!1})}),this.hoveredFeatures.delete(r))}addHover(t,r){const n=Qt(this,["onHover","callback"],j5e).bind(this),i=Qt(this,["onHover","HoverComp"],B5e),l=Qt(this,["onHover","property"],null),a=Qt(this,["onHover","filterFunc"],null),s=Qt(this,["onHover","pinnable"],!0),d=Qt(this,["onHover","sortOrder"],1/0),v=(A,{point:P,features:L,lngLat:F})=>{const K=this.hoveredFeatures.get(A)||new Map;this.hoveredFeatures.set(A,new Map);const re=B=>{B.forEach(({id:$,source:N,sourceLayer:z})=>{if($!=null)if(K.has($))this.hoveredFeatures.get(A).set($,K.get($)),K.delete($);else{const X={id:$,source:N,sourceLayer:z};this.hoveredFeatures.get(A).set($,X),t.setFeatureState(X,{hover:!0})}})},G=new Map;if(l){const B=L.reduce(($,N)=>{const z=Qt(N,["properties",l],null);return z&&($[z]=!0),$},{});t.queryRenderedFeatures({layers:[A],filter:["in",["get",l],["literal",Object.keys(B)]]}).forEach($=>{G.set($.id,$)})}if(a){const B=a.call(this,A,L,F,P);hS(B)&&t.queryRenderedFeatures({layers:[A],filter:B}).forEach($=>{G.set($.id,$)})}L.forEach(B=>{G.set(B.id,B)}),re([...G.values()]),K.forEach(B=>{t.setFeatureState(B,{hover:!1})});const H=n(A,L,F,P);hS(H)&&r({pos:[P.x,P.y],type:"hover-layer-move",HoverComp:i,layer:this,pinnable:s,sortOrder:d,lngLat:F,data:H})},S=(A,P)=>{this.hoverLeave(t,A),r({type:"hover-layer-leave",layer:this})};this.onHover.layers.forEach(A=>{let P=v.bind(this,A);this.callbacks.push({action:"mousemove",callback:P,layerId:A}),t.on("mousemove",A,P),P=S.bind(this,A),this.callbacks.push({action:"mouseleave",callback:P,layerId:A}),t.on("mouseleave",A,P)},this)}addBoxSelect(t){let r,n,i;const l=t.getCanvasContainer(),a=P=>{const L=l.getBoundingClientRect();return new N5e.Point(P.clientX-L.left-l.clientLeft,P.clientY-L.top-l.clientTop)},s=P=>{if(P.preventDefault(),n=a(P),!i){const G=Qt(this,["onBoxSelect","className"],"bg-black bg-opacity-50 border-2 border-black");i=document.createElement("div"),i.className="absolute top-0 left-0 w-0 h-0 "+G,l.appendChild(i)}var L=Math.min(r.x,n.x),F=Math.max(r.x,n.x),K=Math.min(r.y,n.y),re=Math.max(r.y,n.y);i.style.transform=`translate( ${L}px, ${K}px)`,i.style.width=`${F-L}px`,i.style.height=`${re-K}px`},d=P=>{S([r,a(P)])},v=P=>{(P.keyCode===27||P.which===27||P.code==="Escape")&&S()},S=P=>{if(document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",d),document.removeEventListener("keydown",v),t.dragPan.enable(),i&&(i.parentNode.removeChild(i),i=null),P){const F=t.queryRenderedFeatures(P,{layers:Qt(this,["onBoxSelect","layers"]),filter:Qt(this,["onBoxSelect","filter"])}).reduce((G,H)=>(G[H.id]=H,G),{}),K=Object.values(F),re=[];K.forEach(G=>{re.push({id:G.id,source:G.source,sourceLayer:G.sourceLayer})}),Qt(this,["onBoxSelect","selectedValues"],[]).forEach(G=>{t.setFeatureState(G,{select:!1})}),this.onBoxSelect.selectedValues=re,re.forEach(G=>{t.setFeatureState(G,{select:!0})}),this.updateState({selection:K})}},A=P=>{P.shiftKey&&P.button===0&&(document.addEventListener("mousemove",s),document.addEventListener("mouseup",d),document.addEventListener("keydown",v),t.dragPan.disable(),r=a(P))};this.callbacks.push({action:"mousemove",callback:s,element:l}),l.addEventListener("mousedown",A,!0),t.boxZoom.disable(),this.onBoxSelect.selectedValues=[]}_onRemove(t){for(;this.callbacks.length;){const{action:r,layerId:n,callback:i,element:l}=this.callbacks.pop();l?l.removeEventListener(r,i):n?this.mapboxMap.off(r,n,i):this.mapboxMap.off(r,i)}this.layers.forEach(({id:r})=>{this.mapboxMap.removeLayer(r)}),this.onRemove(this.mapboxMap)}onRemove(t){}fetchData(t){return Promise.resolve()}render(t,r){}toggleVisibility(t){this.isVisible=!this.isVisible,this.layers.forEach(({id:r})=>{this.isVisible?this._setVisibilityVisible(t,r):this._setVisibilityNone(t,r)})}_setVisibilityVisible(t,r){this.layerVisibility[r]!=="none"&&t.setLayoutProperty(r,"visibility","visible")}_setVisibilityNone(t,r){t.getLayoutProperty(r,"visibility")==="none"?this.layerVisibility[r]="none":t.setLayoutProperty(r,"visibility","none")}setLayerVisibility(t,r,n){const i=this.isVisible&&n==="visible";this.layerVisibility[r.id]=n,n=i?"visible":"none",t.setLayoutProperty(r.id,"visibility",n)}onFilterChange(t,r,n){}onMapStyleChange(t,r,n){this._onAdd(t,r,n).then(()=>this.render(t,r))}}function G5e(e){return e.slice().sort(function(t,r){return t-r})}function H5e(e){for(var t=0,r,n=0;n<e.length;n++)(n===0||e[n]!==r)&&(r=e[n],t++);return t}function xN(e,t){for(var r=[],n=0;n<e;n++){for(var i=[],l=0;l<t;l++)i.push(0);r.push(i)}return r}function Kk(e,t,r,n){var i;if(e>0){var l=(r[t]-r[e-1])/(t-e+1);i=n[t]-n[e-1]-(t-e+1)*l*l}else i=n[t]-r[t]*r[t]/(t+1);return i<0?0:i}function Yk(e,t,r,n,i,l,a){if(!(e>t)){var s=Math.floor((e+t)/2);n[r][s]=n[r-1][s-1],i[r][s]=s;var d=r;e>r&&(d=Math.max(d,i[r][e-1]||0)),d=Math.max(d,i[r-1][s]||0);var v=s-1;t<n[0].length-1&&(v=Math.min(v,i[r][t+1]||0));for(var S,A,P,L,F=v;F>=d&&(S=Kk(F,s,l,a),!(S+n[r-1][d-1]>=n[r][s]));--F)A=Kk(d,s,l,a),P=A+n[r-1][d-1],P<n[r][s]&&(n[r][s]=P,i[r][s]=d),d++,L=S+n[r-1][F-1],L<n[r][s]&&(n[r][s]=L,i[r][s]=F);Yk(e,s-1,r,n,i,l,a),Yk(s+1,t,r,n,i,l,a)}}function W5e(e,t,r){for(var n=t[0].length,i=new Array(n),l=new Array(n),a=e[Math.floor(n/2)],s=0;s<n;++s)s===0?(i[0]=e[0]-a,l[0]=(e[0]-a)*(e[0]-a)):(i[s]=i[s-1]+e[s]-a,l[s]=l[s-1]+(e[s]-a)*(e[s]-a)),t[0][s]=Kk(0,s,i,l),r[0][s]=0;for(var d,v=1;v<t.length;++v)v<t.length-1?d=v:d=n-1,Yk(d,n-1,v,t,r,i,l)}function Z5e(e,t){if(t>e.length)throw new Error("Cannot generate more classes than there are data values");var r=e.length,n=G5e(e),i=H5e(n);if(i===1)return[n[0]];t=Math.min(i,t);var l=xN(t,r),a=xN(t,r);W5e(n,l,a);for(var s=[],d=a[0].length-1,v=a.length-1;v>=0;v--){var S=a[v][d];s[v]=n[S],v>0&&(d=S-1)}return s}const t2={};for(const e in nm.schemeGroups)nm.schemeGroups[e].forEach(t=>{const r=nm[t];for(const n in r)n in t2||(t2[n]=[]),t2[n].push({type:`${e[0].toUpperCase()}${e.slice(1)}`,name:t,category:"Colorbrewer",colors:r[n]})});const X5e=(e,t)=>Qt(t2,[e],[]).reduce((r,n)=>n.name===t?n.colors:r,[]).slice(),K5e="pk.eyJ1IjoiYW0zMDgxIiwiYSI6IkxzS0FpU0UifQ.rYv6mHCcNd7KKMs7yhY3rw",Y5e={name:"google_streets_style",style:{version:8,sources:{"raster-tiles":{type:"raster",tiles:["https://maps.googleapis.com/maps/vt?pb=!1m5!1m4!1i{z}!2i{x}!3i{y}!4i256!2m3!1e0!2sm!3i640378921!3m12!2sen-US!3sUS!5e18!12m4!1e68!2m2!1sset!2sRoadmap!12m3!1e37!2m1!1ssmartmaps!4e0!23i1379903&key=AIzaSyBeCuOz-Vi_XafgtR0xaJZ1kQUz0ZJQl_E&token=121892"],tileSize:256,attribution:""}},layers:[{id:"simple-tiles",type:"raster",source:"raster-tiles",minzoom:0,maxzoom:22}]}},J5e={name:"google_terrain_style",style:{version:8,sources:{"raster-tiles":{type:"raster",tiles:["https://maps.googleapis.com/maps/vt?pb=!1m5!1m4!1i{z}!2i{x}!3i{y}!4i256!2m3!1e4!2st!3i640!2m3!1e0!2sr!3i640378921!3m12!2sen-US!3sUS!5e18!12m4!1e68!2m2!1sset!2sTerrain!12m3!1e37!2m1!1ssmartmaps!4e0!23i1379903&key=AIzaSyBeCuOz-Vi_XafgtR0xaJZ1kQUz0ZJQl_E&token=127654"],tileSize:256,attribution:""}},layers:[{id:"simple-tiles",type:"raster",source:"raster-tiles",minzoom:0,maxzoom:22}]}},Q5e={name:"google_sattelite",style:{version:8,sources:{"raster-tiles":{type:"raster",tiles:["https://khms0.googleapis.com/kh?v=944&hl=en-US&x={x}&y={y}&z={z}"],tileSize:256,attribution:""}},layers:[{id:"simple-tiles",type:"raster",source:"raster-tiles",minzoom:0,maxzoom:22}]}},eDe={MAPBOX_TOKEN:K5e,google_streets_style:Y5e,google_terrain_style:J5e,google_sattelite_style:Q5e},tDe=({data:e,layer:t})=>{const{falcor:r,falcorCache:n}=Gl(),{attributes:i,activeViewId:l}=t,a=Ps(Ks),s=Ee.useMemo(()=>Qt(e,"[0]",null),[e]);Ee.useEffect(()=>{r.get(["dama",a,"viewsbyId",l,"databyId",s,i])},[r,a,l,s,i]);const d=Ee.useMemo(()=>Qt(n,["dama",a,"viewsbyId",l,"databyId",s],{}),[s,n,l,a]);return Ft("div",{className:"bg-white p-4 max-h-64 scrollbar-xs overflow-y-scroll",children:[ae("div",{className:"font-medium pb-1 w-full border-b ",children:t.source.display_name}),Object.keys(d).length===0?`Fetching Attributes ${s}`:"",Object.keys(d).map((v,S)=>Ft("div",{className:"flex border-b pt-1",children:[ae("div",{className:"flex-1 font-medium text-sm pl-1",children:v}),ae("div",{className:"flex-1 text-right font-thin pl-4 pr-1",children:d==null?void 0:d[v]})]},S))]})};class rDe extends q5e{constructor(){super(...arguments);hb(this,"state",{showLegend:!1});hb(this,"legend",{type:"threshold",domain:[0,150],range:[],format:".2s",show:!1,Title:""});hb(this,"onHover",{layers:this.layers.map(r=>r.id),callback:(r,n,i)=>[n[0].id,r],HoverComp:this.hoverComp||tDe});hb(this,"infoBoxes",[{Component:()=>Ft("div",{className:"bg-white w-[320px] p-2",children:[ae("div",{className:"pb-1 text-sm font-medium",children:this.legend.title}),ae(UTe,{...this.legend})]}),show:r=>(console.log("show",r,r.state.showLegend),r.state.showLegend)}])}init(r,n){console.log("init freight atlas layer",this.id,this.activeViewId,this)}getColorScale(r,n=5,i="Reds"){return JE().domain(Z5e(r,n)).range(X5e(n,i))}fetchData(r){return Promise.resolve()}render(r){const{filters:n,activeViewId:i,symbology:l}=this.props,a=Qt(n,"activeVar.value","");Object.keys(l).filter(s=>Qt(l,`[${s}][${a}]`,!1)||Qt(l,`[${s}][default]`,!1)).forEach(s=>{let d=Qt(l,`[${s}][${a}]`,"")||Qt(l,`[${s}][default]`,"");d.settings?(this.legend.domain=d.settings.domain,this.legend.range=d.settings.range,this.legend.title=d.settings.title,this.legend.show=!0,this.updateState({showLegend:!0})):this.updateState({showLegend:!1}),d.value&&r.setPaintProperty(this.layers[0].id,s,d.value)})}}const nDe=(e={})=>new rDe(e);var QV={exports:{}};(function(e,t){(function({},r){e.exports=r()})(_S,function(){var r,n,i;function l(s,d){if(!r)r=d;else if(!n)n=d;else{var v="var sharedChunk = {}; ("+r+")(sharedChunk); ("+n+")(sharedChunk);",S={};r(S),i=d(S),typeof window<"u"&&(i.workerUrl=window.URL.createObjectURL(new Blob([v],{type:"text/javascript"})))}}l(["exports"],function(s){var d=v;function v(f,u,p,x){this.cx=3*f,this.bx=3*(p-f)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(x-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=f,this.p1y=u,this.p2x=p,this.p2y=x}function S(f,u,p,x){const T=new d(f,u,p,x);return function(D){return T.solve(D)}}v.prototype={sampleCurveX:function(f){return((this.ax*f+this.bx)*f+this.cx)*f},sampleCurveY:function(f){return((this.ay*f+this.by)*f+this.cy)*f},sampleCurveDerivativeX:function(f){return(3*this.ax*f+2*this.bx)*f+this.cx},solveCurveX:function(f,u){if(u===void 0&&(u=1e-6),f<0)return 0;if(f>1)return 1;for(var p=f,x=0;x<8;x++){var T=this.sampleCurveX(p)-f;if(Math.abs(T)<u)return p;var D=this.sampleCurveDerivativeX(p);if(Math.abs(D)<1e-6)break;p-=T/D}var j=0,J=1;for(p=f,x=0;x<20&&(T=this.sampleCurveX(p),!(Math.abs(T-f)<u));x++)f>T?j=p:J=p,p=.5*(J-j)+j;return p},solve:function(f,u){return this.sampleCurveY(this.solveCurveX(f,u))}};const A=S(.25,.1,.25,1);function P(f,u,p){return Math.min(p,Math.max(u,f))}function L(f,u,p){const x=p-u,T=((f-u)%x+x)%x+u;return T===u?p:T}function F(f,...u){for(const p of u)for(const x in p)f[x]=p[x];return f}let K=1;function re(f,u){f.forEach(p=>{u[p]&&(u[p]=u[p].bind(u))})}function G(f,u,p){const x={};for(const T in f)x[T]=u.call(p||this,f[T],T,f);return x}function H(f,u,p){const x={};for(const T in f)u.call(p||this,f[T],T,f)&&(x[T]=f[T]);return x}function B(f){return Array.isArray(f)?f.map(B):typeof f=="object"&&f?G(f,B):f}const $={};function N(f){$[f]||(typeof console<"u"&&console.warn(f),$[f]=!0)}function z(f,u,p){return(p.y-f.y)*(u.x-f.x)>(u.y-f.y)*(p.x-f.x)}function X(f){let u=0;for(let p,x,T=0,D=f.length,j=D-1;T<D;j=T++)p=f[T],x=f[j],u+=(x.x-p.x)*(p.y+x.y);return u}function te(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function pe(f){const u={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(p,x,T,D)=>{const j=T||D;return u[x]=!j||j.toLowerCase(),""}),u["max-age"]){const p=parseInt(u["max-age"],10);isNaN(p)?delete u["max-age"]:u["max-age"]=p}return u}let ke,Pe,ge=null;function Ie(f){if(ge==null){const u=f.navigator?f.navigator.userAgent:null;ge=!!f.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return ge}function Ne(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const lt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(f){const u=requestAnimationFrame(f);return{cancel:()=>cancelAnimationFrame(u)}},getImageData(f,u=0){const p=window.document.createElement("canvas"),x=p.getContext("2d");if(!x)throw new Error("failed to create canvas 2d context");return p.width=f.width,p.height=f.height,x.drawImage(f,0,0,f.width,f.height),x.getImageData(-u,-u,f.width+2*u,f.height+2*u)},resolveURL:f=>(ke||(ke=document.createElement("a")),ke.href=f,ke.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Pe==null&&(Pe=matchMedia("(prefers-reduced-motion: reduce)")),Pe.matches)}};var it=Rt;function Rt(f,u){this.x=f,this.y=u}Rt.prototype={clone:function(){return new Rt(this.x,this.y)},add:function(f){return this.clone()._add(f)},sub:function(f){return this.clone()._sub(f)},multByPoint:function(f){return this.clone()._multByPoint(f)},divByPoint:function(f){return this.clone()._divByPoint(f)},mult:function(f){return this.clone()._mult(f)},div:function(f){return this.clone()._div(f)},rotate:function(f){return this.clone()._rotate(f)},rotateAround:function(f,u){return this.clone()._rotateAround(f,u)},matMult:function(f){return this.clone()._matMult(f)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(f){return this.x===f.x&&this.y===f.y},dist:function(f){return Math.sqrt(this.distSqr(f))},distSqr:function(f){var u=f.x-this.x,p=f.y-this.y;return u*u+p*p},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith:function(f){return this.angleWithSep(f.x,f.y)},angleWithSep:function(f,u){return Math.atan2(this.x*u-this.y*f,this.x*f+this.y*u)},_matMult:function(f){var u=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=u,this},_add:function(f){return this.x+=f.x,this.y+=f.y,this},_sub:function(f){return this.x-=f.x,this.y-=f.y,this},_mult:function(f){return this.x*=f,this.y*=f,this},_div:function(f){return this.x/=f,this.y/=f,this},_multByPoint:function(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint:function(f){return this.x/=f.x,this.y/=f.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var f=this.y;return this.y=this.x,this.x=-f,this},_rotate:function(f){var u=Math.cos(f),p=Math.sin(f),x=p*this.x+u*this.y;return this.x=u*this.x-p*this.y,this.y=x,this},_rotateAround:function(f,u){var p=Math.cos(f),x=Math.sin(f),T=u.y+x*(this.x-u.x)+p*(this.y-u.y);return this.x=u.x+p*(this.x-u.x)-x*(this.y-u.y),this.y=T,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Rt.convert=function(f){return f instanceof Rt?f:Array.isArray(f)?new Rt(f[0],f[1]):f};const St={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},Zt="mapbox-tiles";let Kt,Ge,Ye=500,Dr=50;function wr(){typeof caches>"u"||Kt||(Kt=caches.open(Zt))}let tr=1/0;const br={supported:!1,testSupport:function(f){!cr&&hr&&(Mn?Hn(f):Bt=f)}};let Bt,hr,cr=!1,Mn=!1;function Hn(f){const u=f.createTexture();f.bindTexture(f.TEXTURE_2D,u);try{if(f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,hr),f.isContextLost())return;br.supported=!0}catch{}f.deleteTexture(u),cr=!0}typeof document<"u"&&(hr=document.createElement("img"),hr.onload=function(){Bt&&Hn(Bt),Bt=null,Mn=!0},hr.onerror=function(){cr=!0,Bt=null},hr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Qn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Qn);class an extends Error{constructor(u,p,x,T){super(`AJAXError: ${p} (${u}): ${x}`),this.status=u,this.statusText=p,this.url=x,this.body=T}}const ki=te()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function Xn(f,u){const p=new AbortController,x=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:ki(),signal:p.signal});let T=!1,D=!1;return f.type==="json"&&x.headers.set("Accept","application/json"),((j,J,ie)=>{if(D)return;const le=Date.now();fetch(x).then(me=>me.ok?((xe,Re,De)=>{(f.type==="arrayBuffer"?xe.arrayBuffer():f.type==="json"?xe.json():xe.text()).then(Be=>{D||(Re&&De&&function(rt,ot,Pt){if(wr(),!Kt)return;const kt={status:ot.status,statusText:ot.statusText,headers:new Headers};ot.headers.forEach(($t,sr)=>kt.headers.set(sr,$t));const At=pe(ot.headers.get("Cache-Control")||"");At["no-store"]||(At["max-age"]&&kt.headers.set("Expires",new Date(Pt+1e3*At["max-age"]).toUTCString()),new Date(kt.headers.get("Expires")).getTime()-Pt<42e4||function($t,sr){if(Ge===void 0)try{new Response(new ReadableStream),Ge=!0}catch{Ge=!1}Ge?sr($t.body):$t.blob().then(sr)}(ot,$t=>{const sr=new Response($t,kt);wr(),Kt&&Kt.then(Wt=>Wt.put(function(zr){const Zr=zr.indexOf("?");return Zr<0?zr:zr.slice(0,Zr)}(rt.url),sr)).catch(Wt=>N(Wt.message))}))}(x,Re,De),T=!0,u(null,Be,xe.headers.get("Cache-Control"),xe.headers.get("Expires")))}).catch(Be=>{D||u(new Error(Be.message))})})(me,null,le):me.blob().then(xe=>u(new an(me.status,me.statusText,f.url,xe)))).catch(me=>{me.code!==20&&u(new Error(me.message))})})(),{cancel:()=>{D=!0,T||p.abort()}}}const Li=function(f,u){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){if(te()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",f,u);if(!te()){const x=f.url.substring(0,f.url.indexOf("://"));return(St.REGISTERED_PROTOCOLS[x]||Xn)(f,u)}}if(!(/^file:/.test(p=f.url)||/^file:/.test(ki())&&!/^\w+:/.test(p))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Xn(f,u);if(te()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",f,u,void 0,!0)}var p;return function(x,T){const D=new XMLHttpRequest;D.open(x.method||"GET",x.url,!0),x.type==="arrayBuffer"&&(D.responseType="arraybuffer");for(const j in x.headers)D.setRequestHeader(j,x.headers[j]);return x.type==="json"&&(D.responseType="text",D.setRequestHeader("Accept","application/json")),D.withCredentials=x.credentials==="include",D.onerror=()=>{T(new Error(D.statusText))},D.onload=()=>{if((D.status>=200&&D.status<300||D.status===0)&&D.response!==null){let j=D.response;if(x.type==="json")try{j=JSON.parse(D.response)}catch(J){return T(J)}T(null,j,D.getResponseHeader("Cache-Control"),D.getResponseHeader("Expires"))}else{const j=new Blob([D.response],{type:D.getResponseHeader("Content-Type")});T(new an(D.status,D.statusText,x.url,j))}},D.send(x.body),{cancel:()=>D.abort()}}(f,u)},Pi=function(f,u){return Li(F(f,{type:"arrayBuffer"}),u)};function Yi(f){const u=window.document.createElement("a");return u.href=f,u.protocol===window.document.location.protocol&&u.host===window.document.location.host}const gi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ea,ya;ea=[],ya=0;const La=function(f,u){if(br.supported&&(f.headers||(f.headers={}),f.headers.accept="image/webp,*/*"),ya>=St.MAX_PARALLEL_IMAGE_REQUESTS){const D={requestParameters:f,callback:u,cancelled:!1,cancel(){this.cancelled=!0}};return ea.push(D),D}ya++;let p=!1;const x=()=>{if(!p)for(p=!0,ya--;ea.length&&ya<St.MAX_PARALLEL_IMAGE_REQUESTS;){const D=ea.shift(),{requestParameters:j,callback:J,cancelled:ie}=D;ie||(D.cancel=La(j,J).cancel)}},T=Pi(f,(D,j,J,ie)=>{x(),D?u(D):j&&function(le,me){typeof createImageBitmap=="function"?function(xe,Re){const De=new Blob([new Uint8Array(xe)],{type:"image/png"});createImageBitmap(De).then(Be=>{Re(null,Be)}).catch(Be=>{Re(new Error(`Could not load image because of ${Be.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(le,me):function(xe,Re){const De=new Image;De.onload=()=>{Re(null,De),URL.revokeObjectURL(De.src),De.onload=null,window.requestAnimationFrame(()=>{De.src=gi})},De.onerror=()=>Re(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Be=new Blob([new Uint8Array(xe)],{type:"image/png"});De.src=xe.byteLength?URL.createObjectURL(Be):gi}(le,me)}(j,(le,me)=>{le!=null?u(le):me!=null&&u(null,me,{cacheControl:J,expires:ie})})});return{cancel:()=>{T.cancel(),x()}}};function Aa(f,u,p){p[f]&&p[f].indexOf(u)!==-1||(p[f]=p[f]||[],p[f].push(u))}function $a(f,u,p){if(p&&p[f]){const x=p[f].indexOf(u);x!==-1&&p[f].splice(x,1)}}class ka{constructor(u,p={}){F(this,p),this.type=u}}class Ka extends ka{constructor(u,p={}){super("error",F({error:u},p))}}class dr{on(u,p){return this._listeners=this._listeners||{},Aa(u,p,this._listeners),this}off(u,p){return $a(u,p,this._listeners),$a(u,p,this._oneTimeListeners),this}once(u,p){return this._oneTimeListeners=this._oneTimeListeners||{},Aa(u,p,this._oneTimeListeners),this}fire(u,p){typeof u=="string"&&(u=new ka(u,p||{}));const x=u.type;if(this.listens(x)){u.target=this;const T=this._listeners&&this._listeners[x]?this._listeners[x].slice():[];for(const J of T)J.call(this,u);const D=this._oneTimeListeners&&this._oneTimeListeners[x]?this._oneTimeListeners[x].slice():[];for(const J of D)$a(x,J,this._oneTimeListeners),J.call(this,u);const j=this._eventedParent;j&&(F(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),j.fire(u))}else u instanceof Ka&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,p){return this._eventedParent=u,this._eventedParentData=p,this}}var Mt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class yr{constructor(u,p,x,T){this.message=(u?`${u}: `:"")+x,T&&(this.identifier=T),p!=null&&p.__line__&&(this.line=p.__line__)}}function Xt(f){const u=f.value;return u?[new yr(f.key,u,"constants have been deprecated as of v8")]:[]}function Yt(f,...u){for(const p of u)for(const x in p)f[x]=p[x];return f}function lr(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Qr(f){if(Array.isArray(f))return f.map(Qr);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const u={};for(const p in f)u[p]=Qr(f[p]);return u}return lr(f)}class Xr extends Error{constructor(u,p){super(p),this.message=p,this.key=u}}class En{constructor(u,p=[]){this.parent=u,this.bindings={};for(const[x,T]of p)this.bindings[x]=T}concat(u){return new En(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const Rn={kind:"null"},rr={kind:"number"},Lr={kind:"string"},ur={kind:"boolean"},hn={kind:"color"},ti={kind:"object"},Hr={kind:"value"},fi={kind:"collator"},Ci={kind:"formatted"},zi={kind:"padding"},Ae={kind:"resolvedImage"};function $e(f,u){return{kind:"array",itemType:f,N:u}}function je(f){if(f.kind==="array"){const u=je(f.itemType);return typeof f.N=="number"?`array<${u}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${u}>`}return f.kind}const et=[Rn,rr,Lr,ur,hn,Ci,ti,$e(Hr),zi,Ae];function ht(f,u){if(u.kind==="error")return null;if(f.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!ht(f.itemType,u.itemType))&&(typeof f.N!="number"||f.N===u.N))return null}else{if(f.kind===u.kind)return null;if(f.kind==="value"){for(const p of et)if(!ht(p,u))return null}}return`Expected ${je(f)} but found ${je(u)} instead.`}function Ct(f,u){return u.some(p=>p.kind===f.kind)}function Dt(f,u){return u.some(p=>p==="null"?f===null:p==="array"?Array.isArray(f):p==="object"?f&&!Array.isArray(f)&&typeof f=="object":p===typeof f)}var Et,Je={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ye(f){return(f=Math.round(f))<0?0:f>255?255:f}function fe(f){return ye(f[f.length-1]==="%"?parseFloat(f)/100*255:parseInt(f))}function we(f){return(u=f[f.length-1]==="%"?parseFloat(f)/100:parseFloat(f))<0?0:u>1?1:u;var u}function Ce(f,u,p){return p<0?p+=1:p>1&&(p-=1),6*p<1?f+(u-f)*p*6:2*p<1?u:3*p<2?f+(u-f)*(2/3-p)*6:f}try{Et={}.parseCSSColor=function(f){var u,p=f.replace(/ /g,"").toLowerCase();if(p in Je)return Je[p].slice();if(p[0]==="#")return p.length===4?(u=parseInt(p.substr(1),16))>=0&&u<=4095?[(3840&u)>>4|(3840&u)>>8,240&u|(240&u)>>4,15&u|(15&u)<<4,1]:null:p.length===7&&(u=parseInt(p.substr(1),16))>=0&&u<=16777215?[(16711680&u)>>16,(65280&u)>>8,255&u,1]:null;var x=p.indexOf("("),T=p.indexOf(")");if(x!==-1&&T+1===p.length){var D=p.substr(0,x),j=p.substr(x+1,T-(x+1)).split(","),J=1;switch(D){case"rgba":if(j.length!==4)return null;J=we(j.pop());case"rgb":return j.length!==3?null:[fe(j[0]),fe(j[1]),fe(j[2]),J];case"hsla":if(j.length!==4)return null;J=we(j.pop());case"hsl":if(j.length!==3)return null;var ie=(parseFloat(j[0])%360+360)%360/360,le=we(j[1]),me=we(j[2]),xe=me<=.5?me*(le+1):me+le-me*le,Re=2*me-xe;return[ye(255*Ce(Re,xe,ie+1/3)),ye(255*Ce(Re,xe,ie)),ye(255*Ce(Re,xe,ie-1/3)),J];default:return null}}return null}}catch{}class Le{constructor(u,p,x,T=1){this.r=u,this.g=p,this.b=x,this.a=T}static parse(u){if(!u)return;if(u instanceof Le)return u;if(typeof u!="string")return;const p=Et(u);return p?new Le(p[0]/255*p[3],p[1]/255*p[3],p[2]/255*p[3],p[3]):void 0}toString(){const[u,p,x,T]=this.toArray();return`rgba(${Math.round(u)},${Math.round(p)},${Math.round(x)},${T})`}toArray(){const{r:u,g:p,b:x,a:T}=this;return T===0?[0,0,0,0]:[255*u/T,255*p/T,255*x/T,T]}}Le.black=new Le(0,0,0,1),Le.white=new Le(1,1,1,1),Le.transparent=new Le(0,0,0,0),Le.red=new Le(1,0,0,1);class nt{constructor(u,p,x){this.sensitivity=u?p?"variant":"case":p?"accent":"base",this.locale=x,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,p){return this.collator.compare(u,p)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class dt{constructor(u,p,x,T,D){this.text=u,this.image=p,this.scale=x,this.fontStack=T,this.textColor=D}}class ct{constructor(u){this.sections=u}static fromString(u){return new ct([new dt(u,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(u=>u.text.length!==0||u.image&&u.image.name.length!==0)}static factory(u){return u instanceof ct?u:ct.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map(u=>u.text).join("")}}class Xe{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Xe)return u;if(typeof u=="number")return new Xe([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const p of u)if(typeof p!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new Xe(u)}}toString(){return JSON.stringify(this.values)}}class pt{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new pt({name:u,available:!1}):null}}function vt(f,u,p,x){return typeof f=="number"&&f>=0&&f<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof p=="number"&&p>=0&&p<=255?x===void 0||typeof x=="number"&&x>=0&&x<=1?null:`Invalid rgba value [${[f,u,p,x].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof x=="number"?[f,u,p,x]:[f,u,p]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ar(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof Le||f instanceof nt||f instanceof ct||f instanceof Xe||f instanceof pt)return!0;if(Array.isArray(f)){for(const u of f)if(!ar(u))return!1;return!0}if(typeof f=="object"){for(const u in f)if(!ar(f[u]))return!1;return!0}return!1}function Vt(f){if(f===null)return Rn;if(typeof f=="string")return Lr;if(typeof f=="boolean")return ur;if(typeof f=="number")return rr;if(f instanceof Le)return hn;if(f instanceof nt)return fi;if(f instanceof ct)return Ci;if(f instanceof Xe)return zi;if(f instanceof pt)return Ae;if(Array.isArray(f)){const u=f.length;let p;for(const x of f){const T=Vt(x);if(p){if(p===T)continue;p=Hr;break}p=T}return $e(p||Hr,u)}return ti}function fr(f){const u=typeof f;return f===null?"":u==="string"||u==="number"||u==="boolean"?String(f):f instanceof Le||f instanceof ct||f instanceof Xe||f instanceof pt?f.toString():JSON.stringify(f)}class qr{constructor(u,p){this.type=u,this.value=p}static parse(u,p){if(u.length!==2)return p.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!ar(u[1]))return p.error("invalid value");const x=u[1];let T=Vt(x);const D=p.expectedType;return T.kind!=="array"||T.N!==0||!D||D.kind!=="array"||typeof D.N=="number"&&D.N!==0||(T=D),new qr(T,x)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Ar{constructor(u){this.name="ExpressionEvaluationError",this.message=u}toJSON(){return this.message}}const ln={string:Lr,number:rr,boolean:ur,object:ti};class gn{constructor(u,p){this.type=u,this.args=p}static parse(u,p){if(u.length<2)return p.error("Expected at least one argument.");let x,T=1;const D=u[0];if(D==="array"){let J,ie;if(u.length>2){const le=u[1];if(typeof le!="string"||!(le in ln)||le==="object")return p.error('The item type argument of "array" must be one of string, number, boolean',1);J=ln[le],T++}else J=Hr;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return p.error('The length argument to "array" must be a positive integer literal',2);ie=u[2],T++}x=$e(J,ie)}else{if(!ln[D])throw new Error(`Types doesn't contain name = ${D}`);x=ln[D]}const j=[];for(;T<u.length;T++){const J=p.parse(u[T],T,Hr);if(!J)return null;j.push(J)}return new gn(x,j)}evaluate(u){for(let p=0;p<this.args.length;p++){const x=this.args[p].evaluate(u);if(!ht(this.type,Vt(x)))return x;if(p===this.args.length-1)throw new Ar(`Expected value to be of type ${je(this.type)}, but found ${je(Vt(x))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const An={"to-boolean":ur,"to-color":hn,"to-number":rr,"to-string":Lr};class wn{constructor(u,p){this.type=u,this.args=p}static parse(u,p){if(u.length<2)return p.error("Expected at least one argument.");const x=u[0];if(!An[x])throw new Error(`Can't parse ${x} as it is not part of the known types`);if((x==="to-boolean"||x==="to-string")&&u.length!==2)return p.error("Expected one argument.");const T=An[x],D=[];for(let j=1;j<u.length;j++){const J=p.parse(u[j],j,Hr);if(!J)return null;D.push(J)}return new wn(T,D)}evaluate(u){if(this.type.kind==="boolean")return!!this.args[0].evaluate(u);if(this.type.kind==="color"){let p,x;for(const T of this.args){if(p=T.evaluate(u),x=null,p instanceof Le)return p;if(typeof p=="string"){const D=u.parseColor(p);if(D)return D}else if(Array.isArray(p)&&(x=p.length<3||p.length>4?`Invalid rbga value ${JSON.stringify(p)}: expected an array containing either three or four numeric values.`:vt(p[0],p[1],p[2],p[3]),!x))return new Le(p[0]/255,p[1]/255,p[2]/255,p[3])}throw new Ar(x||`Could not parse color from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}if(this.type.kind==="padding"){let p;for(const x of this.args){p=x.evaluate(u);const T=Xe.parse(p);if(T)return T}throw new Ar(`Could not parse padding from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}if(this.type.kind==="number"){let p=null;for(const x of this.args){if(p=x.evaluate(u),p===null)return 0;const T=Number(p);if(!isNaN(T))return T}throw new Ar(`Could not convert ${JSON.stringify(p)} to number.`)}return this.type.kind==="formatted"?ct.fromString(fr(this.args[0].evaluate(u))):this.type.kind==="resolvedImage"?pt.fromString(fr(this.args[0].evaluate(u))):fr(this.args[0].evaluate(u))}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const Dn=["Unknown","Point","LineString","Polygon"];class $n{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Dn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let p=this._parseColorCache[u];return p||(p=this._parseColorCache[u]=Le.parse(u)),p}}class kn{constructor(u,p,x,T){this.name=u,this.type=p,this._evaluate=x,this.args=T}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,p){const x=u[0],T=kn.definitions[x];if(!T)return p.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0);const D=Array.isArray(T)?T[0]:T.type,j=Array.isArray(T)?[[T[1],T[2]]]:T.overloads,J=j.filter(([le])=>!Array.isArray(le)||le.length===u.length-1);let ie=null;for(const[le,me]of J){ie=new Us(p.registry,p.path,null,p.scope);const xe=[];let Re=!1;for(let De=1;De<u.length;De++){const Be=u[De],rt=Array.isArray(le)?le[De-1]:le.type,ot=ie.parse(Be,1+xe.length,rt);if(!ot){Re=!0;break}xe.push(ot)}if(!Re)if(Array.isArray(le)&&le.length!==xe.length)ie.error(`Expected ${le.length} arguments, but found ${xe.length} instead.`);else{for(let De=0;De<xe.length;De++){const Be=Array.isArray(le)?le[De]:le.type,rt=xe[De];ie.concat(De+1).checkSubtype(Be,rt.type)}if(ie.errors.length===0)return new kn(x,D,me,xe)}}if(J.length===1)p.errors.push(...ie.errors);else{const le=(J.length?J:j).map(([xe])=>{return Re=xe,Array.isArray(Re)?`(${Re.map(je).join(", ")})`:`(${je(Re.type)}...)`;var Re}).join(" | "),me=[];for(let xe=1;xe<u.length;xe++){const Re=p.parse(u[xe],1+me.length);if(!Re)return null;me.push(je(Re.type))}p.error(`Expected arguments of type ${le}, but found (${me.join(", ")}) instead.`)}return null}static register(u,p){kn.definitions=p;for(const x in p)u[x]=kn}}class Qa{constructor(u,p,x){this.type=fi,this.locale=x,this.caseSensitive=u,this.diacriticSensitive=p}static parse(u,p){if(u.length!==2)return p.error("Expected one argument.");const x=u[1];if(typeof x!="object"||Array.isArray(x))return p.error("Collator options argument must be an object.");const T=p.parse(x["case-sensitive"]!==void 0&&x["case-sensitive"],1,ur);if(!T)return null;const D=p.parse(x["diacritic-sensitive"]!==void 0&&x["diacritic-sensitive"],1,ur);if(!D)return null;let j=null;return x.locale&&(j=p.parse(x.locale,1,Lr),!j)?null:new Qa(T,D,j)}evaluate(u){return new nt(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}const Fn=8192;function oo(f,u){f[0]=Math.min(f[0],u[0]),f[1]=Math.min(f[1],u[1]),f[2]=Math.max(f[2],u[0]),f[3]=Math.max(f[3],u[1])}function Tl(f,u){return!(f[0]<=u[0]||f[2]>=u[2]||f[1]<=u[1]||f[3]>=u[3])}function Ya(f,u){const p=(180+f[0])/360,x=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,T=Math.pow(2,u.z);return[Math.round(p*T*Fn),Math.round(x*T*Fn)]}function Oi(f,u,p){const x=f[0]-u[0],T=f[1]-u[1],D=f[0]-p[0],j=f[1]-p[1];return x*j-D*T==0&&x*D<=0&&T*j<=0}function ku(f,u){let p=!1;for(let j=0,J=u.length;j<J;j++){const ie=u[j];for(let le=0,me=ie.length;le<me-1;le++){if(Oi(f,ie[le],ie[le+1]))return!1;(T=ie[le])[1]>(x=f)[1]!=(D=ie[le+1])[1]>x[1]&&x[0]<(D[0]-T[0])*(x[1]-T[1])/(D[1]-T[1])+T[0]&&(p=!p)}}var x,T,D;return p}function Ys(f,u){for(let p=0;p<u.length;p++)if(ku(f,u[p]))return!0;return!1}function co(f,u,p,x){const T=x[0]-p[0],D=x[1]-p[1],j=(f[0]-p[0])*D-T*(f[1]-p[1]),J=(u[0]-p[0])*D-T*(u[1]-p[1]);return j>0&&J<0||j<0&&J>0}function Bs(f,u,p){for(const le of p)for(let me=0;me<le.length-1;++me)if((J=[(j=le[me+1])[0]-(D=le[me])[0],j[1]-D[1]])[0]*(ie=[(T=u)[0]-(x=f)[0],T[1]-x[1]])[1]-J[1]*ie[0]!=0&&co(x,T,D,j)&&co(D,j,x,T))return!0;var x,T,D,j,J,ie;return!1}function $o(f,u){for(let p=0;p<f.length;++p)if(!ku(f[p],u))return!1;for(let p=0;p<f.length-1;++p)if(Bs(f[p],f[p+1],u))return!1;return!0}function Pa(f,u){for(let p=0;p<u.length;p++)if($o(f,u[p]))return!0;return!1}function Ro(f,u,p){const x=[];for(let T=0;T<f.length;T++){const D=[];for(let j=0;j<f[T].length;j++){const J=Ya(f[T][j],p);oo(u,J),D.push(J)}x.push(D)}return x}function mo(f,u,p){const x=[];for(let T=0;T<f.length;T++){const D=Ro(f[T],u,p);x.push(D)}return x}function Ko(f,u,p,x){if(f[0]<p[0]||f[0]>p[2]){const T=.5*x;let D=f[0]-p[0]>T?-x:p[0]-f[0]>T?x:0;D===0&&(D=f[0]-p[2]>T?-x:p[2]-f[0]>T?x:0),f[0]+=D}oo(u,f)}function Fs(f,u,p,x){const T=Math.pow(2,x.z)*Fn,D=[x.x*Fn,x.y*Fn],j=[];for(const J of f)for(const ie of J){const le=[ie.x+D[0],ie.y+D[1]];Ko(le,u,p,T),j.push(le)}return j}function jf(f,u,p,x){const T=Math.pow(2,x.z)*Fn,D=[x.x*Fn,x.y*Fn],j=[];for(const ie of f){const le=[];for(const me of ie){const xe=[me.x+D[0],me.y+D[1]];oo(u,xe),le.push(xe)}j.push(le)}if(u[2]-u[0]<=T/2){(J=u)[0]=J[1]=1/0,J[2]=J[3]=-1/0;for(const ie of j)for(const le of ie)Ko(le,u,p,T)}var J;return j}class bo{constructor(u,p){this.type=ur,this.geojson=u,this.geometries=p}static parse(u,p){if(u.length!==2)return p.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(ar(u[1])){const x=u[1];if(x.type==="FeatureCollection")for(let T=0;T<x.features.length;++T){const D=x.features[T].geometry.type;if(D==="Polygon"||D==="MultiPolygon")return new bo(x,x.features[T].geometry)}else if(x.type==="Feature"){const T=x.geometry.type;if(T==="Polygon"||T==="MultiPolygon")return new bo(x,x.geometry)}else if(x.type==="Polygon"||x.type==="MultiPolygon")return new bo(x,x)}return p.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(p,x){const T=[1/0,1/0,-1/0,-1/0],D=[1/0,1/0,-1/0,-1/0],j=p.canonicalID();if(x.type==="Polygon"){const J=Ro(x.coordinates,D,j),ie=Fs(p.geometry(),T,D,j);if(!Tl(T,D))return!1;for(const le of ie)if(!ku(le,J))return!1}if(x.type==="MultiPolygon"){const J=mo(x.coordinates,D,j),ie=Fs(p.geometry(),T,D,j);if(!Tl(T,D))return!1;for(const le of ie)if(!Ys(le,J))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(p,x){const T=[1/0,1/0,-1/0,-1/0],D=[1/0,1/0,-1/0,-1/0],j=p.canonicalID();if(x.type==="Polygon"){const J=Ro(x.coordinates,D,j),ie=jf(p.geometry(),T,D,j);if(!Tl(T,D))return!1;for(const le of ie)if(!$o(le,J))return!1}if(x.type==="MultiPolygon"){const J=mo(x.coordinates,D,j),ie=jf(p.geometry(),T,D,j);if(!Tl(T,D))return!1;for(const le of ie)if(!Pa(le,J))return!1}return!0}(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function Al(f){if(f instanceof kn&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof bo)return!1;let u=!0;return f.eachChild(p=>{u&&!Al(p)&&(u=!1)}),u}function No(f){if(f instanceof kn&&f.name==="feature-state")return!1;let u=!0;return f.eachChild(p=>{u&&!No(p)&&(u=!1)}),u}function Ia(f,u){if(f instanceof kn&&u.indexOf(f.name)>=0)return!1;let p=!0;return f.eachChild(x=>{p&&!Ia(x,u)&&(p=!1)}),p}class Ga{constructor(u,p){this.type=p.type,this.name=u,this.boundExpression=p}static parse(u,p){if(u.length!==2||typeof u[1]!="string")return p.error("'var' expression requires exactly one string literal argument.");const x=u[1];return p.scope.has(x)?new Ga(x,p.scope.get(x)):p.error(`Unknown variable "${x}". Make sure "${x}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class Us{constructor(u,p=[],x,T=new En,D=[]){this.registry=u,this.path=p,this.key=p.map(j=>`[${j}]`).join(""),this.scope=T,this.errors=D,this.expectedType=x}parse(u,p,x,T,D={}){return p?this.concat(p,x,T)._parse(u,D):this._parse(u,D)}_parse(u,p){function x(T,D,j){return j==="assert"?new gn(D,[T]):j==="coerce"?new wn(D,[T]):T}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const T=u[0];if(typeof T!="string")return this.error(`Expression name must be a string, but found ${typeof T} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const D=this.registry[T];if(D){let j=D.parse(u,this);if(!j)return null;if(this.expectedType){const J=this.expectedType,ie=j.type;if(J.kind!=="string"&&J.kind!=="number"&&J.kind!=="boolean"&&J.kind!=="object"&&J.kind!=="array"||ie.kind!=="value")if(J.kind!=="color"&&J.kind!=="formatted"&&J.kind!=="resolvedImage"||ie.kind!=="value"&&ie.kind!=="string")if(J.kind!=="padding"||ie.kind!=="value"&&ie.kind!=="number"&&ie.kind!=="array"){if(this.checkSubtype(J,ie))return null}else j=x(j,J,p.typeAnnotation||"coerce");else j=x(j,J,p.typeAnnotation||"coerce");else j=x(j,J,p.typeAnnotation||"assert")}if(!(j instanceof qr)&&j.type.kind!=="resolvedImage"&&Iu(j)){const J=new $n;try{j=new qr(j.type,j.evaluate(J))}catch(ie){return this.error(ie.message),null}}return j}return this.error(`Unknown expression "${T}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,p,x){const T=typeof u=="number"?this.path.concat(u):this.path,D=x?this.scope.concat(x):this.scope;return new Us(this.registry,T,p||null,D,this.errors)}error(u,...p){const x=`${this.key}${p.map(T=>`[${T}]`).join("")}`;this.errors.push(new Xr(x,u))}checkSubtype(u,p){const x=ht(u,p);return x&&this.error(x),x}}function Iu(f){if(f instanceof Ga)return Iu(f.boundExpression);if(f instanceof kn&&f.name==="error"||f instanceof Qa||f instanceof bo)return!1;const u=f instanceof wn||f instanceof gn;let p=!0;return f.eachChild(x=>{p=u?p&&Iu(x):p&&x instanceof qr}),!!p&&Al(f)&&Ia(f,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Mu(f,u){const p=f.length-1;let x,T,D=0,j=p,J=0;for(;D<=j;)if(J=Math.floor((D+j)/2),x=f[J],T=f[J+1],x<=u){if(J===p||u<T)return J;D=J+1}else{if(!(x>u))throw new Ar("Input is not a number.");j=J-1}return 0}class Ou{constructor(u,p,x){this.type=u,this.input=p,this.labels=[],this.outputs=[];for(const[T,D]of x)this.labels.push(T),this.outputs.push(D)}static parse(u,p){if(u.length-1<4)return p.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return p.error("Expected an even number of arguments.");const x=p.parse(u[1],1,rr);if(!x)return null;const T=[];let D=null;p.expectedType&&p.expectedType.kind!=="value"&&(D=p.expectedType);for(let j=1;j<u.length;j+=2){const J=j===1?-1/0:u[j],ie=u[j+1],le=j,me=j+1;if(typeof J!="number")return p.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',le);if(T.length&&T[T.length-1][0]>=J)return p.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',le);const xe=p.parse(ie,me,D);if(!xe)return null;D=D||xe.type,T.push([J,xe])}return new Ou(D,x,T)}evaluate(u){const p=this.labels,x=this.outputs;if(p.length===1)return x[0].evaluate(u);const T=this.input.evaluate(u);if(T<=p[0])return x[0].evaluate(u);const D=p.length;return T>=p[D-1]?x[D-1].evaluate(u):x[Mu(p,T)].evaluate(u)}eachChild(u){u(this.input);for(const p of this.outputs)u(p)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function Ma(f,u,p){return f*(1-p)+u*p}var Ru=Object.freeze({__proto__:null,number:Ma,color:function(f,u,p){return new Le(Ma(f.r,u.r,p),Ma(f.g,u.g,p),Ma(f.b,u.b,p),Ma(f.a,u.a,p))},array:function(f,u,p){return f.map((x,T)=>Ma(x,u[T],p))},padding:function(f,u,p){const x=f.values,T=u.values;return new Xe([Ma(x[0],T[0],p),Ma(x[1],T[1],p),Ma(x[2],T[2],p),Ma(x[3],T[3],p)])}});const Pc=.95047,Vf=1.08883,nc=4/29,Hl=6/29,ic=3*Hl*Hl,cu=Math.PI/180,ef=180/Math.PI;function kl(f){return f>.008856451679035631?Math.pow(f,1/3):f/ic+nc}function Il(f){return f>Hl?f*f*f:ic*(f-nc)}function xo(f){return 255*(f<=.0031308?12.92*f:1.055*Math.pow(f,1/2.4)-.055)}function ol(f){return(f/=255)<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function $i(f){const u=ol(f.r),p=ol(f.g),x=ol(f.b),T=kl((.4124564*u+.3575761*p+.1804375*x)/Pc),D=kl((.2126729*u+.7151522*p+.072175*x)/1);return{l:116*D-16,a:500*(T-D),b:200*(D-kl((.0193339*u+.119192*p+.9503041*x)/Vf)),alpha:f.a}}function ac(f){let u=(f.l+16)/116,p=isNaN(f.a)?u:u+f.a/500,x=isNaN(f.b)?u:u-f.b/200;return u=1*Il(u),p=Pc*Il(p),x=Vf*Il(x),new Le(xo(3.2404542*p-1.5371385*u-.4985314*x),xo(-.969266*p+1.8760108*u+.041556*x),xo(.0556434*p-.2040259*u+1.0572252*x),f.alpha)}function sl(f,u,p){const x=u-f;return f+p*(x>180||x<-180?x-360*Math.round(x/360):x)}const ra={forward:$i,reverse:ac,interpolate:function(f,u,p){return{l:Ma(f.l,u.l,p),a:Ma(f.a,u.a,p),b:Ma(f.b,u.b,p),alpha:Ma(f.alpha,u.alpha,p)}}},Ji={forward:function(f){const{l:u,a:p,b:x}=$i(f),T=Math.atan2(x,p)*ef;return{h:T<0?T+360:T,c:Math.sqrt(p*p+x*x),l:u,alpha:f.a}},reverse:function(f){const u=f.h*cu,p=f.c;return ac({l:f.l,a:Math.cos(u)*p,b:Math.sin(u)*p,alpha:f.alpha})},interpolate:function(f,u,p){return{h:sl(f.h,u.h,p),c:Ma(f.c,u.c,p),l:Ma(f.l,u.l,p),alpha:Ma(f.alpha,u.alpha,p)}}};var js=Object.freeze({__proto__:null,lab:ra,hcl:Ji});class aa{constructor(u,p,x,T,D){this.type=u,this.operator=p,this.interpolation=x,this.input=T,this.labels=[],this.outputs=[];for(const[j,J]of D)this.labels.push(j),this.outputs.push(J)}static interpolationFactor(u,p,x,T){let D=0;if(u.name==="exponential")D=Du(p,u.base,x,T);else if(u.name==="linear")D=Du(p,1,x,T);else if(u.name==="cubic-bezier"){const j=u.controlPoints;D=new d(j[0],j[1],j[2],j[3]).solve(Du(p,1,x,T))}return D}static parse(u,p){let[x,T,D,...j]=u;if(!Array.isArray(T)||T.length===0)return p.error("Expected an interpolation type expression.",1);if(T[0]==="linear")T={name:"linear"};else if(T[0]==="exponential"){const le=T[1];if(typeof le!="number")return p.error("Exponential interpolation requires a numeric base.",1,1);T={name:"exponential",base:le}}else{if(T[0]!=="cubic-bezier")return p.error(`Unknown interpolation type ${String(T[0])}`,1,0);{const le=T.slice(1);if(le.length!==4||le.some(me=>typeof me!="number"||me<0||me>1))return p.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);T={name:"cubic-bezier",controlPoints:le}}}if(u.length-1<4)return p.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return p.error("Expected an even number of arguments.");if(D=p.parse(D,2,rr),!D)return null;const J=[];let ie=null;x==="interpolate-hcl"||x==="interpolate-lab"?ie=hn:p.expectedType&&p.expectedType.kind!=="value"&&(ie=p.expectedType);for(let le=0;le<j.length;le+=2){const me=j[le],xe=j[le+1],Re=le+3,De=le+4;if(typeof me!="number")return p.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Re);if(J.length&&J[J.length-1][0]>=me)return p.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Re);const Be=p.parse(xe,De,ie);if(!Be)return null;ie=ie||Be.type,J.push([me,Be])}return ie.kind==="number"||ie.kind==="color"||ie.kind==="padding"||ie.kind==="array"&&ie.itemType.kind==="number"&&typeof ie.N=="number"?new aa(ie,x,T,D,J):p.error(`Type ${je(ie)} is not interpolatable.`)}evaluate(u){const p=this.labels,x=this.outputs;if(p.length===1)return x[0].evaluate(u);const T=this.input.evaluate(u);if(T<=p[0])return x[0].evaluate(u);const D=p.length;if(T>=p[D-1])return x[D-1].evaluate(u);const j=Mu(p,T),J=aa.interpolationFactor(this.interpolation,T,p[j],p[j+1]),ie=x[j].evaluate(u),le=x[j+1].evaluate(u);return this.operator==="interpolate"?Ru[this.type.kind.toLowerCase()](ie,le,J):this.operator==="interpolate-hcl"?Ji.reverse(Ji.interpolate(Ji.forward(ie),Ji.forward(le),J)):ra.reverse(ra.interpolate(ra.forward(ie),ra.forward(le),J))}eachChild(u){u(this.input);for(const p of this.outputs)u(p)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function Du(f,u,p,x){const T=x-p,D=f-p;return T===0?0:u===1?D/T:(Math.pow(u,D)-1)/(Math.pow(u,T)-1)}class oc{constructor(u,p){this.type=u,this.args=p}static parse(u,p){if(u.length<2)return p.error("Expectected at least one argument.");let x=null;const T=p.expectedType;T&&T.kind!=="value"&&(x=T);const D=[];for(const J of u.slice(1)){const ie=p.parse(J,1+D.length,x,void 0,{typeAnnotation:"omit"});if(!ie)return null;x=x||ie.type,D.push(ie)}if(!x)throw new Error("No output type");const j=T&&D.some(J=>ht(T,J.type));return new oc(j?Hr:x,D)}evaluate(u){let p,x=null,T=0;for(const D of this.args)if(T++,x=D.evaluate(u),x&&x instanceof pt&&!x.available&&(p||(p=x.name),x=null,T===this.args.length&&(x=p)),x!==null)break;return x}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}class Tc{constructor(u,p){this.type=p.type,this.bindings=[].concat(u),this.result=p}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const p of this.bindings)u(p[1]);u(this.result)}static parse(u,p){if(u.length<4)return p.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const x=[];for(let D=1;D<u.length-1;D+=2){const j=u[D];if(typeof j!="string")return p.error(`Expected string, but found ${typeof j} instead.`,D);if(/[^a-zA-Z0-9_]/.test(j))return p.error("Variable names must contain only alphanumeric characters or '_'.",D);const J=p.parse(u[D+1],D+1);if(!J)return null;x.push([j,J])}const T=p.parse(u[u.length-1],u.length-1,p.expectedType,x);return T?new Tc(x,T):null}outputDefined(){return this.result.outputDefined()}}class tf{constructor(u,p,x){this.type=u,this.index=p,this.input=x}static parse(u,p){if(u.length!==3)return p.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const x=p.parse(u[1],1,rr),T=p.parse(u[2],2,$e(p.expectedType||Hr));return x&&T?new tf(T.type.itemType,x,T):null}evaluate(u){const p=this.index.evaluate(u),x=this.input.evaluate(u);if(p<0)throw new Ar(`Array index out of bounds: ${p} < 0.`);if(p>=x.length)throw new Ar(`Array index out of bounds: ${p} > ${x.length-1}.`);if(p!==Math.floor(p))throw new Ar(`Array index must be an integer, but found ${p} instead.`);return x[p]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class Wl{constructor(u,p){this.type=ur,this.needle=u,this.haystack=p}static parse(u,p){if(u.length!==3)return p.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const x=p.parse(u[1],1,Hr),T=p.parse(u[2],2,Hr);return x&&T?Ct(x.type,[ur,Lr,rr,Rn,Hr])?new Wl(x,T):p.error(`Expected first argument to be of type boolean, string, number or null, but found ${je(x.type)} instead`):null}evaluate(u){const p=this.needle.evaluate(u),x=this.haystack.evaluate(u);if(!x)return!1;if(!Dt(p,["boolean","string","number","null"]))throw new Ar(`Expected first argument to be of type boolean, string, number or null, but found ${je(Vt(p))} instead.`);if(!Dt(x,["string","array"]))throw new Ar(`Expected second argument to be of type array or string, but found ${je(Vt(x))} instead.`);return x.indexOf(p)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class oe{constructor(u,p,x){this.type=rr,this.needle=u,this.haystack=p,this.fromIndex=x}static parse(u,p){if(u.length<=2||u.length>=5)return p.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const x=p.parse(u[1],1,Hr),T=p.parse(u[2],2,Hr);if(!x||!T)return null;if(!Ct(x.type,[ur,Lr,rr,Rn,Hr]))return p.error(`Expected first argument to be of type boolean, string, number or null, but found ${je(x.type)} instead`);if(u.length===4){const D=p.parse(u[3],3,rr);return D?new oe(x,T,D):null}return new oe(x,T)}evaluate(u){const p=this.needle.evaluate(u),x=this.haystack.evaluate(u);if(!Dt(p,["boolean","string","number","null"]))throw new Ar(`Expected first argument to be of type boolean, string, number or null, but found ${je(Vt(p))} instead.`);if(!Dt(x,["string","array"]))throw new Ar(`Expected second argument to be of type array or string, but found ${je(Vt(x))} instead.`);if(this.fromIndex){const T=this.fromIndex.evaluate(u);return x.indexOf(p,T)}return x.indexOf(p)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class ze{constructor(u,p,x,T,D,j){this.inputType=u,this.type=p,this.input=x,this.cases=T,this.outputs=D,this.otherwise=j}static parse(u,p){if(u.length<5)return p.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return p.error("Expected an even number of arguments.");let x,T;p.expectedType&&p.expectedType.kind!=="value"&&(T=p.expectedType);const D={},j=[];for(let le=2;le<u.length-1;le+=2){let me=u[le];const xe=u[le+1];Array.isArray(me)||(me=[me]);const Re=p.concat(le);if(me.length===0)return Re.error("Expected at least one branch label.");for(const Be of me){if(typeof Be!="number"&&typeof Be!="string")return Re.error("Branch labels must be numbers or strings.");if(typeof Be=="number"&&Math.abs(Be)>Number.MAX_SAFE_INTEGER)return Re.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Be=="number"&&Math.floor(Be)!==Be)return Re.error("Numeric branch labels must be integer values.");if(x){if(Re.checkSubtype(x,Vt(Be)))return null}else x=Vt(Be);if(D[String(Be)]!==void 0)return Re.error("Branch labels must be unique.");D[String(Be)]=j.length}const De=p.parse(xe,le,T);if(!De)return null;T=T||De.type,j.push(De)}const J=p.parse(u[1],1,Hr);if(!J)return null;const ie=p.parse(u[u.length-1],u.length-1,T);return ie?J.type.kind!=="value"&&p.concat(1).checkSubtype(x,J.type)?null:new ze(x,T,J,D,j,ie):null}evaluate(u){const p=this.input.evaluate(u);return(Vt(p)===this.inputType&&this.outputs[this.cases[p]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every(u=>u.outputDefined())&&this.otherwise.outputDefined()}}class We{constructor(u,p,x){this.type=u,this.branches=p,this.otherwise=x}static parse(u,p){if(u.length<4)return p.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return p.error("Expected an odd number of arguments.");let x;p.expectedType&&p.expectedType.kind!=="value"&&(x=p.expectedType);const T=[];for(let j=1;j<u.length-1;j+=2){const J=p.parse(u[j],j,ur);if(!J)return null;const ie=p.parse(u[j+1],j+1,x);if(!ie)return null;T.push([J,ie]),x=x||ie.type}const D=p.parse(u[u.length-1],u.length-1,x);if(!D)return null;if(!x)throw new Error("Can't infer output type");return new We(x,T,D)}evaluate(u){for(const[p,x]of this.branches)if(p.evaluate(u))return x.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[p,x]of this.branches)u(p),u(x);u(this.otherwise)}outputDefined(){return this.branches.every(([u,p])=>p.outputDefined())&&this.otherwise.outputDefined()}}class tt{constructor(u,p,x,T){this.type=u,this.input=p,this.beginIndex=x,this.endIndex=T}static parse(u,p){if(u.length<=2||u.length>=5)return p.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const x=p.parse(u[1],1,Hr),T=p.parse(u[2],2,rr);if(!x||!T)return null;if(!Ct(x.type,[$e(Hr),Lr,Hr]))return p.error(`Expected first argument to be of type array or string, but found ${je(x.type)} instead`);if(u.length===4){const D=p.parse(u[3],3,rr);return D?new tt(x.type,x,T,D):null}return new tt(x.type,x,T)}evaluate(u){const p=this.input.evaluate(u),x=this.beginIndex.evaluate(u);if(!Dt(p,["string","array"]))throw new Ar(`Expected first argument to be of type array or string, but found ${je(Vt(p))} instead.`);if(this.endIndex){const T=this.endIndex.evaluate(u);return p.slice(x,T)}return p.slice(x)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function Ot(f,u){return f==="=="||f==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function _t(f,u,p,x){return x.compare(u,p)===0}function Tt(f,u,p){const x=f!=="=="&&f!=="!=";return class eq{constructor(D,j,J){this.type=ur,this.lhs=D,this.rhs=j,this.collator=J,this.hasUntypedArgument=D.type.kind==="value"||j.type.kind==="value"}static parse(D,j){if(D.length!==3&&D.length!==4)return j.error("Expected two or three arguments.");const J=D[0];let ie=j.parse(D[1],1,Hr);if(!ie)return null;if(!Ot(J,ie.type))return j.concat(1).error(`"${J}" comparisons are not supported for type '${je(ie.type)}'.`);let le=j.parse(D[2],2,Hr);if(!le)return null;if(!Ot(J,le.type))return j.concat(2).error(`"${J}" comparisons are not supported for type '${je(le.type)}'.`);if(ie.type.kind!==le.type.kind&&ie.type.kind!=="value"&&le.type.kind!=="value")return j.error(`Cannot compare types '${je(ie.type)}' and '${je(le.type)}'.`);x&&(ie.type.kind==="value"&&le.type.kind!=="value"?ie=new gn(le.type,[ie]):ie.type.kind!=="value"&&le.type.kind==="value"&&(le=new gn(ie.type,[le])));let me=null;if(D.length===4){if(ie.type.kind!=="string"&&le.type.kind!=="string"&&ie.type.kind!=="value"&&le.type.kind!=="value")return j.error("Cannot use collator to compare non-string types.");if(me=j.parse(D[3],3,fi),!me)return null}return new eq(ie,le,me)}evaluate(D){const j=this.lhs.evaluate(D),J=this.rhs.evaluate(D);if(x&&this.hasUntypedArgument){const ie=Vt(j),le=Vt(J);if(ie.kind!==le.kind||ie.kind!=="string"&&ie.kind!=="number")throw new Ar(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${ie.kind}, ${le.kind}) instead.`)}if(this.collator&&!x&&this.hasUntypedArgument){const ie=Vt(j),le=Vt(J);if(ie.kind!=="string"||le.kind!=="string")return u(D,j,J)}return this.collator?p(D,j,J,this.collator.evaluate(D)):u(D,j,J)}eachChild(D){D(this.lhs),D(this.rhs),this.collator&&D(this.collator)}outputDefined(){return!0}}}const xr=Tt("==",function(f,u,p){return u===p},_t),Er=Tt("!=",function(f,u,p){return u!==p},function(f,u,p,x){return!_t(0,u,p,x)}),_r=Tt("<",function(f,u,p){return u<p},function(f,u,p,x){return x.compare(u,p)<0}),on=Tt(">",function(f,u,p){return u>p},function(f,u,p,x){return x.compare(u,p)>0}),Gr=Tt("<=",function(f,u,p){return u<=p},function(f,u,p,x){return x.compare(u,p)<=0}),Kr=Tt(">=",function(f,u,p){return u>=p},function(f,u,p,x){return x.compare(u,p)>=0});class Cr{constructor(u,p,x,T,D){this.type=Lr,this.number=u,this.locale=p,this.currency=x,this.minFractionDigits=T,this.maxFractionDigits=D}static parse(u,p){if(u.length!==3)return p.error("Expected two arguments.");const x=p.parse(u[1],1,rr);if(!x)return null;const T=u[2];if(typeof T!="object"||Array.isArray(T))return p.error("NumberFormat options argument must be an object.");let D=null;if(T.locale&&(D=p.parse(T.locale,1,Lr),!D))return null;let j=null;if(T.currency&&(j=p.parse(T.currency,1,Lr),!j))return null;let J=null;if(T["min-fraction-digits"]&&(J=p.parse(T["min-fraction-digits"],1,rr),!J))return null;let ie=null;return T["max-fraction-digits"]&&(ie=p.parse(T["max-fraction-digits"],1,rr),!ie)?null:new Cr(x,D,j,J,ie)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class Wr{constructor(u){this.type=Ci,this.sections=u}static parse(u,p){if(u.length<2)return p.error("Expected at least one argument.");const x=u[1];if(!Array.isArray(x)&&typeof x=="object")return p.error("First argument must be an image or text section.");const T=[];let D=!1;for(let j=1;j<=u.length-1;++j){const J=u[j];if(D&&typeof J=="object"&&!Array.isArray(J)){D=!1;let ie=null;if(J["font-scale"]&&(ie=p.parse(J["font-scale"],1,rr),!ie))return null;let le=null;if(J["text-font"]&&(le=p.parse(J["text-font"],1,$e(Lr)),!le))return null;let me=null;if(J["text-color"]&&(me=p.parse(J["text-color"],1,hn),!me))return null;const xe=T[T.length-1];xe.scale=ie,xe.font=le,xe.textColor=me}else{const ie=p.parse(u[j],1,Hr);if(!ie)return null;const le=ie.type.kind;if(le!=="string"&&le!=="value"&&le!=="null"&&le!=="resolvedImage")return p.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");D=!0,T.push({content:ie,scale:null,font:null,textColor:null})}}return new Wr(T)}evaluate(u){return new ct(this.sections.map(p=>{const x=p.content.evaluate(u);return Vt(x)===Ae?new dt("",x,null,null,null):new dt(fr(x),null,p.scale?p.scale.evaluate(u):null,p.font?p.font.evaluate(u).join(","):null,p.textColor?p.textColor.evaluate(u):null)}))}eachChild(u){for(const p of this.sections)u(p.content),p.scale&&u(p.scale),p.font&&u(p.font),p.textColor&&u(p.textColor)}outputDefined(){return!1}}class Yr{constructor(u){this.type=Ae,this.input=u}static parse(u,p){if(u.length!==2)return p.error("Expected two arguments.");const x=p.parse(u[1],1,Lr);return x?new Yr(x):p.error("No image name provided.")}evaluate(u){const p=this.input.evaluate(u),x=pt.fromString(p);return x&&u.availableImages&&(x.available=u.availableImages.indexOf(p)>-1),x}eachChild(u){u(this.input)}outputDefined(){return!1}}class bn{constructor(u){this.type=rr,this.input=u}static parse(u,p){if(u.length!==2)return p.error(`Expected 1 argument, but found ${u.length-1} instead.`);const x=p.parse(u[1],1);return x?x.type.kind!=="array"&&x.type.kind!=="string"&&x.type.kind!=="value"?p.error(`Expected argument of type string or array, but found ${je(x.type)} instead.`):new bn(x):null}evaluate(u){const p=this.input.evaluate(u);if(typeof p=="string"||Array.isArray(p))return p.length;throw new Ar(`Expected value to be of type string or array, but found ${je(Vt(p))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const On={"==":xr,"!=":Er,">":on,"<":_r,">=":Kr,"<=":Gr,array:gn,at:tf,boolean:gn,case:We,coalesce:oc,collator:Qa,format:Wr,image:Yr,in:Wl,"index-of":oe,interpolate:aa,"interpolate-hcl":aa,"interpolate-lab":aa,length:bn,let:Tc,literal:qr,match:ze,number:gn,"number-format":Cr,object:gn,slice:tt,step:Ou,string:gn,"to-boolean":wn,"to-color":wn,"to-number":wn,"to-string":wn,var:Ga,within:bo};function ei(f,[u,p,x,T]){u=u.evaluate(f),p=p.evaluate(f),x=x.evaluate(f);const D=T?T.evaluate(f):1,j=vt(u,p,x,D);if(j)throw new Ar(j);return new Le(u/255*D,p/255*D,x/255*D,D)}function jn(f,u){return f in u}function Or(f,u){const p=u[f];return p===void 0?null:p}function yn(f){return{type:f}}function Cn(f){return{result:"success",value:f}}function ri(f){return{result:"error",value:f}}function Gn(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function ni(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function sn(f){return!!f.expression&&f.expression.interpolated}function Vn(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function vn(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)}function Un(f){return f}function Ti(f,u){const p=u.type==="color",x=f.stops&&typeof f.stops[0][0]=="object",T=x||!(x||f.property!==void 0),D=f.type||(sn(u)?"exponential":"interval");if(p||u.type==="padding"){const le=p?Le.parse:Xe.parse;(f=Yt({},f)).stops&&(f.stops=f.stops.map(me=>[me[0],le(me[1])])),f.default=le(f.default?f.default:u.default)}if(f.colorSpace&&f.colorSpace!=="rgb"&&!js[f.colorSpace])throw new Error(`Unknown color space: ${f.colorSpace}`);let j,J,ie;if(D==="exponential")j=xa;else if(D==="interval")j=Fi;else if(D==="categorical"){j=Yn,J=Object.create(null);for(const le of f.stops)J[le[0]]=le[1];ie=typeof f.stops[0][0]}else{if(D!=="identity")throw new Error(`Unknown function type "${D}"`);j=wo}if(x){const le={},me=[];for(let De=0;De<f.stops.length;De++){const Be=f.stops[De],rt=Be[0].zoom;le[rt]===void 0&&(le[rt]={zoom:rt,type:f.type,property:f.property,default:f.default,stops:[]},me.push(rt)),le[rt].stops.push([Be[0].value,Be[1]])}const xe=[];for(const De of me)xe.push([le[De].zoom,Ti(le[De],u)]);const Re={name:"linear"};return{kind:"composite",interpolationType:Re,interpolationFactor:aa.interpolationFactor.bind(void 0,Re),zoomStops:xe.map(De=>De[0]),evaluate:({zoom:De},Be)=>xa({stops:xe,base:f.base},u,De).evaluate(De,Be)}}if(T){const le=D==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:le,interpolationFactor:aa.interpolationFactor.bind(void 0,le),zoomStops:f.stops.map(me=>me[0]),evaluate:({zoom:me})=>j(f,u,me,J,ie)}}return{kind:"source",evaluate(le,me){const xe=me&&me.properties?me.properties[f.property]:void 0;return xe===void 0?Hi(f.default,u.default):j(f,u,xe,J,ie)}}}function Hi(f,u,p){return f!==void 0?f:u!==void 0?u:p!==void 0?p:void 0}function Yn(f,u,p,x,T){return Hi(typeof p===T?x[p]:void 0,f.default,u.default)}function Fi(f,u,p){if(Vn(p)!=="number")return Hi(f.default,u.default);const x=f.stops.length;if(x===1||p<=f.stops[0][0])return f.stops[0][1];if(p>=f.stops[x-1][0])return f.stops[x-1][1];const T=Mu(f.stops.map(D=>D[0]),p);return f.stops[T][1]}function xa(f,u,p){const x=f.base!==void 0?f.base:1;if(Vn(p)!=="number")return Hi(f.default,u.default);const T=f.stops.length;if(T===1||p<=f.stops[0][0])return f.stops[0][1];if(p>=f.stops[T-1][0])return f.stops[T-1][1];const D=Mu(f.stops.map(me=>me[0]),p),j=function(me,xe,Re,De){const Be=De-Re,rt=me-Re;return Be===0?0:xe===1?rt/Be:(Math.pow(xe,rt)-1)/(Math.pow(xe,Be)-1)}(p,x,f.stops[D][0],f.stops[D+1][0]),J=f.stops[D][1],ie=f.stops[D+1][1];let le=Ru[u.type]||Un;if(f.colorSpace&&f.colorSpace!=="rgb"){const me=js[f.colorSpace];le=(xe,Re)=>me.reverse(me.interpolate(me.forward(xe),me.forward(Re),j))}return typeof J.evaluate=="function"?{evaluate(...me){const xe=J.evaluate.apply(void 0,me),Re=ie.evaluate.apply(void 0,me);if(xe!==void 0&&Re!==void 0)return le(xe,Re,j)}}:le(J,ie,j)}function wo(f,u,p){switch(u.type){case"color":p=Le.parse(p);break;case"formatted":p=ct.fromString(p.toString());break;case"resolvedImage":p=pt.fromString(p.toString());break;case"padding":p=Xe.parse(p);break;default:Vn(p)===u.type||u.type==="enum"&&u.values[p]||(p=void 0)}return Hi(p,f.default,u.default)}kn.register(On,{error:[{kind:"error"},[Lr],(f,[u])=>{throw new Ar(u.evaluate(f))}],typeof:[Lr,[Hr],(f,[u])=>je(Vt(u.evaluate(f)))],"to-rgba":[$e(rr,4),[hn],(f,[u])=>u.evaluate(f).toArray()],rgb:[hn,[rr,rr,rr],ei],rgba:[hn,[rr,rr,rr,rr],ei],has:{type:ur,overloads:[[[Lr],(f,[u])=>jn(u.evaluate(f),f.properties())],[[Lr,ti],(f,[u,p])=>jn(u.evaluate(f),p.evaluate(f))]]},get:{type:Hr,overloads:[[[Lr],(f,[u])=>Or(u.evaluate(f),f.properties())],[[Lr,ti],(f,[u,p])=>Or(u.evaluate(f),p.evaluate(f))]]},"feature-state":[Hr,[Lr],(f,[u])=>Or(u.evaluate(f),f.featureState||{})],properties:[ti,[],f=>f.properties()],"geometry-type":[Lr,[],f=>f.geometryType()],id:[Hr,[],f=>f.id()],zoom:[rr,[],f=>f.globals.zoom],"heatmap-density":[rr,[],f=>f.globals.heatmapDensity||0],"line-progress":[rr,[],f=>f.globals.lineProgress||0],accumulated:[Hr,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[rr,yn(rr),(f,u)=>{let p=0;for(const x of u)p+=x.evaluate(f);return p}],"*":[rr,yn(rr),(f,u)=>{let p=1;for(const x of u)p*=x.evaluate(f);return p}],"-":{type:rr,overloads:[[[rr,rr],(f,[u,p])=>u.evaluate(f)-p.evaluate(f)],[[rr],(f,[u])=>-u.evaluate(f)]]},"/":[rr,[rr,rr],(f,[u,p])=>u.evaluate(f)/p.evaluate(f)],"%":[rr,[rr,rr],(f,[u,p])=>u.evaluate(f)%p.evaluate(f)],ln2:[rr,[],()=>Math.LN2],pi:[rr,[],()=>Math.PI],e:[rr,[],()=>Math.E],"^":[rr,[rr,rr],(f,[u,p])=>Math.pow(u.evaluate(f),p.evaluate(f))],sqrt:[rr,[rr],(f,[u])=>Math.sqrt(u.evaluate(f))],log10:[rr,[rr],(f,[u])=>Math.log(u.evaluate(f))/Math.LN10],ln:[rr,[rr],(f,[u])=>Math.log(u.evaluate(f))],log2:[rr,[rr],(f,[u])=>Math.log(u.evaluate(f))/Math.LN2],sin:[rr,[rr],(f,[u])=>Math.sin(u.evaluate(f))],cos:[rr,[rr],(f,[u])=>Math.cos(u.evaluate(f))],tan:[rr,[rr],(f,[u])=>Math.tan(u.evaluate(f))],asin:[rr,[rr],(f,[u])=>Math.asin(u.evaluate(f))],acos:[rr,[rr],(f,[u])=>Math.acos(u.evaluate(f))],atan:[rr,[rr],(f,[u])=>Math.atan(u.evaluate(f))],min:[rr,yn(rr),(f,u)=>Math.min(...u.map(p=>p.evaluate(f)))],max:[rr,yn(rr),(f,u)=>Math.max(...u.map(p=>p.evaluate(f)))],abs:[rr,[rr],(f,[u])=>Math.abs(u.evaluate(f))],round:[rr,[rr],(f,[u])=>{const p=u.evaluate(f);return p<0?-Math.round(-p):Math.round(p)}],floor:[rr,[rr],(f,[u])=>Math.floor(u.evaluate(f))],ceil:[rr,[rr],(f,[u])=>Math.ceil(u.evaluate(f))],"filter-==":[ur,[Lr,Hr],(f,[u,p])=>f.properties()[u.value]===p.value],"filter-id-==":[ur,[Hr],(f,[u])=>f.id()===u.value],"filter-type-==":[ur,[Lr],(f,[u])=>f.geometryType()===u.value],"filter-<":[ur,[Lr,Hr],(f,[u,p])=>{const x=f.properties()[u.value],T=p.value;return typeof x==typeof T&&x<T}],"filter-id-<":[ur,[Hr],(f,[u])=>{const p=f.id(),x=u.value;return typeof p==typeof x&&p<x}],"filter->":[ur,[Lr,Hr],(f,[u,p])=>{const x=f.properties()[u.value],T=p.value;return typeof x==typeof T&&x>T}],"filter-id->":[ur,[Hr],(f,[u])=>{const p=f.id(),x=u.value;return typeof p==typeof x&&p>x}],"filter-<=":[ur,[Lr,Hr],(f,[u,p])=>{const x=f.properties()[u.value],T=p.value;return typeof x==typeof T&&x<=T}],"filter-id-<=":[ur,[Hr],(f,[u])=>{const p=f.id(),x=u.value;return typeof p==typeof x&&p<=x}],"filter->=":[ur,[Lr,Hr],(f,[u,p])=>{const x=f.properties()[u.value],T=p.value;return typeof x==typeof T&&x>=T}],"filter-id->=":[ur,[Hr],(f,[u])=>{const p=f.id(),x=u.value;return typeof p==typeof x&&p>=x}],"filter-has":[ur,[Hr],(f,[u])=>u.value in f.properties()],"filter-has-id":[ur,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[ur,[$e(Lr)],(f,[u])=>u.value.indexOf(f.geometryType())>=0],"filter-id-in":[ur,[$e(Hr)],(f,[u])=>u.value.indexOf(f.id())>=0],"filter-in-small":[ur,[Lr,$e(Hr)],(f,[u,p])=>p.value.indexOf(f.properties()[u.value])>=0],"filter-in-large":[ur,[Lr,$e(Hr)],(f,[u,p])=>function(x,T,D,j){for(;D<=j;){const J=D+j>>1;if(T[J]===x)return!0;T[J]>x?j=J-1:D=J+1}return!1}(f.properties()[u.value],p.value,0,p.value.length-1)],all:{type:ur,overloads:[[[ur,ur],(f,[u,p])=>u.evaluate(f)&&p.evaluate(f)],[yn(ur),(f,u)=>{for(const p of u)if(!p.evaluate(f))return!1;return!0}]]},any:{type:ur,overloads:[[[ur,ur],(f,[u,p])=>u.evaluate(f)||p.evaluate(f)],[yn(ur),(f,u)=>{for(const p of u)if(p.evaluate(f))return!0;return!1}]]},"!":[ur,[ur],(f,[u])=>!u.evaluate(f)],"is-supported-script":[ur,[Lr],(f,[u])=>{const p=f.globals&&f.globals.isSupportedScript;return!p||p(u.evaluate(f))}],upcase:[Lr,[Lr],(f,[u])=>u.evaluate(f).toUpperCase()],downcase:[Lr,[Lr],(f,[u])=>u.evaluate(f).toLowerCase()],concat:[Lr,yn(Hr),(f,u)=>u.map(p=>fr(p.evaluate(f))).join("")],"resolved-locale":[Lr,[fi],(f,[u])=>u.evaluate(f).resolvedLocale()]});class Wn{constructor(u,p){this.expression=u,this._warningHistory={},this._evaluator=new $n,this._defaultValue=p?function(x){return x.type==="color"&&vn(x.default)?new Le(0,0,0,0):x.type==="color"?Le.parse(x.default)||null:x.type==="padding"?Xe.parse(x.default)||null:x.default===void 0?null:x.default}(p):null,this._enumValues=p&&p.type==="enum"?p.values:null}evaluateWithoutErrorHandling(u,p,x,T,D,j){return this._evaluator.globals=u,this._evaluator.feature=p,this._evaluator.featureState=x,this._evaluator.canonical=T,this._evaluator.availableImages=D||null,this._evaluator.formattedSection=j,this.expression.evaluate(this._evaluator)}evaluate(u,p,x,T,D,j){this._evaluator.globals=u,this._evaluator.feature=p||null,this._evaluator.featureState=x||null,this._evaluator.canonical=T,this._evaluator.availableImages=D||null,this._evaluator.formattedSection=j||null;try{const J=this.expression.evaluate(this._evaluator);if(J==null||typeof J=="number"&&J!=J)return this._defaultValue;if(this._enumValues&&!(J in this._enumValues))throw new Ar(`Expected value to be one of ${Object.keys(this._enumValues).map(ie=>JSON.stringify(ie)).join(", ")}, but found ${JSON.stringify(J)} instead.`);return J}catch(J){return this._warningHistory[J.message]||(this._warningHistory[J.message]=!0,typeof console<"u"&&console.warn(J.message)),this._defaultValue}}}function sa(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in On}function Na(f,u){const p=new Us(On,[],u?function(T){const D={color:hn,string:Lr,number:rr,enum:Lr,boolean:ur,formatted:Ci,padding:zi,resolvedImage:Ae};return T.type==="array"?$e(D[T.value]||Hr,T.length):D[T.type]}(u):void 0),x=p.parse(f,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return x?Cn(new Wn(x,u)):ri(p.errors)}class eo{constructor(u,p){this.kind=u,this._styleExpression=p,this.isStateDependent=u!=="constant"&&!No(p.expression)}evaluateWithoutErrorHandling(u,p,x,T,D,j){return this._styleExpression.evaluateWithoutErrorHandling(u,p,x,T,D,j)}evaluate(u,p,x,T,D,j){return this._styleExpression.evaluate(u,p,x,T,D,j)}}class wi{constructor(u,p,x,T){this.kind=u,this.zoomStops=x,this._styleExpression=p,this.isStateDependent=u!=="camera"&&!No(p.expression),this.interpolationType=T}evaluateWithoutErrorHandling(u,p,x,T,D,j){return this._styleExpression.evaluateWithoutErrorHandling(u,p,x,T,D,j)}evaluate(u,p,x,T,D,j){return this._styleExpression.evaluate(u,p,x,T,D,j)}interpolationFactor(u,p,x){return this.interpolationType?aa.interpolationFactor(this.interpolationType,u,p,x):0}}function Vs(f,u){const p=Na(f,u);if(p.result==="error")return p;const x=p.value.expression,T=Al(x);if(!T&&!Gn(u))return ri([new Xr("","data expressions not supported")]);const D=Ia(x,["zoom"]);if(!D&&!ni(u))return ri([new Xr("","zoom expressions not supported")]);const j=so(x);return j||D?j instanceof Xr?ri([j]):j instanceof aa&&!sn(u)?ri([new Xr("",'"interpolate" expressions cannot be used with this property')]):Cn(j?new wi(T?"camera":"composite",p.value,j.labels,j instanceof aa?j.interpolation:void 0):new eo(T?"constant":"source",p.value)):ri([new Xr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ps{constructor(u,p){this._parameters=u,this._specification=p,Yt(this,Ti(this._parameters,this._specification))}static deserialize(u){return new ps(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function so(f){let u=null;if(f instanceof Tc)u=so(f.result);else if(f instanceof oc){for(const p of f.args)if(u=so(p),u)break}else(f instanceof Ou||f instanceof aa)&&f.input instanceof kn&&f.input.name==="zoom"&&(u=f);return u instanceof Xr||f.eachChild(p=>{const x=so(p);x instanceof Xr?u=x:!u&&x?u=new Xr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&x&&u!==x&&(u=new Xr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),u}function rs(f){const u=f.key,p=f.value,x=f.valueSpec||{},T=f.objectElementValidators||{},D=f.style,j=f.styleSpec;let J=[];const ie=Vn(p);if(ie!=="object")return[new yr(u,p,`object expected, ${ie} found`)];for(const le in p){const me=le.split(".")[0],xe=x[me]||x["*"];let Re;if(T[me])Re=T[me];else if(x[me])Re=jt;else if(T["*"])Re=T["*"];else{if(!x["*"]){J.push(new yr(u,p[le],`unknown property "${le}"`));continue}Re=jt}J=J.concat(Re({key:(u&&`${u}.`)+le,value:p[le],valueSpec:xe,style:D,styleSpec:j,object:p,objectKey:le},p))}for(const le in x)T[le]||x[le].required&&x[le].default===void 0&&p[le]===void 0&&J.push(new yr(u,p,`missing required property "${le}"`));return J}function zu(f){const u=f.value,p=f.valueSpec,x=f.style,T=f.styleSpec,D=f.key,j=f.arrayElementValidator||jt;if(Vn(u)!=="array")return[new yr(D,u,`array expected, ${Vn(u)} found`)];if(p.length&&u.length!==p.length)return[new yr(D,u,`array length ${p.length} expected, length ${u.length} found`)];if(p["min-length"]&&u.length<p["min-length"])return[new yr(D,u,`array length at least ${p["min-length"]} expected, length ${u.length} found`)];let J={type:p.value,values:p.values};T.$version<7&&(J.function=p.function),Vn(p.value)==="object"&&(J=p.value);let ie=[];for(let le=0;le<u.length;le++)ie=ie.concat(j({array:u,arrayIndex:le,value:u[le],valueSpec:J,style:x,styleSpec:T,key:`${D}[${le}]`}));return ie}function Js(f){const u=f.key,p=f.value,x=f.valueSpec;let T=Vn(p);return T==="number"&&p!=p&&(T="NaN"),T!=="number"?[new yr(u,p,`number expected, ${T} found`)]:"minimum"in x&&p<x.minimum?[new yr(u,p,`${p} is less than the minimum value ${x.minimum}`)]:"maximum"in x&&p>x.maximum?[new yr(u,p,`${p} is greater than the maximum value ${x.maximum}`)]:[]}function Ac(f){const u=f.valueSpec,p=lr(f.value.type);let x,T,D,j={};const J=p!=="categorical"&&f.value.property===void 0,ie=!J,le=Vn(f.value.stops)==="array"&&Vn(f.value.stops[0])==="array"&&Vn(f.value.stops[0][0])==="object",me=rs({key:f.key,value:f.value,valueSpec:f.styleSpec.function,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(De){if(p==="identity")return[new yr(De.key,De.value,'identity function may not have a "stops" property')];let Be=[];const rt=De.value;return Be=Be.concat(zu({key:De.key,value:rt,valueSpec:De.valueSpec,style:De.style,styleSpec:De.styleSpec,arrayElementValidator:xe})),Vn(rt)==="array"&&rt.length===0&&Be.push(new yr(De.key,rt,"array must have at least one stop")),Be},default:function(De){return jt({key:De.key,value:De.value,valueSpec:u,style:De.style,styleSpec:De.styleSpec})}}});return p==="identity"&&J&&me.push(new yr(f.key,f.value,'missing required property "property"')),p==="identity"||f.value.stops||me.push(new yr(f.key,f.value,'missing required property "stops"')),p==="exponential"&&f.valueSpec.expression&&!sn(f.valueSpec)&&me.push(new yr(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(ie&&!Gn(f.valueSpec)?me.push(new yr(f.key,f.value,"property functions not supported")):J&&!ni(f.valueSpec)&&me.push(new yr(f.key,f.value,"zoom functions not supported"))),p!=="categorical"&&!le||f.value.property!==void 0||me.push(new yr(f.key,f.value,'"property" property is required')),me;function xe(De){let Be=[];const rt=De.value,ot=De.key;if(Vn(rt)!=="array")return[new yr(ot,rt,`array expected, ${Vn(rt)} found`)];if(rt.length!==2)return[new yr(ot,rt,`array length 2 expected, length ${rt.length} found`)];if(le){if(Vn(rt[0])!=="object")return[new yr(ot,rt,`object expected, ${Vn(rt[0])} found`)];if(rt[0].zoom===void 0)return[new yr(ot,rt,"object stop key must have zoom")];if(rt[0].value===void 0)return[new yr(ot,rt,"object stop key must have value")];if(D&&D>lr(rt[0].zoom))return[new yr(ot,rt[0].zoom,"stop zoom values must appear in ascending order")];lr(rt[0].zoom)!==D&&(D=lr(rt[0].zoom),T=void 0,j={}),Be=Be.concat(rs({key:`${ot}[0]`,value:rt[0],valueSpec:{zoom:{}},style:De.style,styleSpec:De.styleSpec,objectElementValidators:{zoom:Js,value:Re}}))}else Be=Be.concat(Re({key:`${ot}[0]`,value:rt[0],valueSpec:{},style:De.style,styleSpec:De.styleSpec},rt));return sa(Qr(rt[1]))?Be.concat([new yr(`${ot}[1]`,rt[1],"expressions are not allowed in function stops.")]):Be.concat(jt({key:`${ot}[1]`,value:rt[1],valueSpec:u,style:De.style,styleSpec:De.styleSpec}))}function Re(De,Be){const rt=Vn(De.value),ot=lr(De.value),Pt=De.value!==null?De.value:Be;if(x){if(rt!==x)return[new yr(De.key,Pt,`${rt} stop domain type must match previous stop domain type ${x}`)]}else x=rt;if(rt!=="number"&&rt!=="string"&&rt!=="boolean")return[new yr(De.key,Pt,"stop domain value must be a number, string, or boolean")];if(rt!=="number"&&p!=="categorical"){let kt=`number expected, ${rt} found`;return Gn(u)&&p===void 0&&(kt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new yr(De.key,Pt,kt)]}return p!=="categorical"||rt!=="number"||isFinite(ot)&&Math.floor(ot)===ot?p!=="categorical"&&rt==="number"&&T!==void 0&&ot<T?[new yr(De.key,Pt,"stop domain values must appear in ascending order")]:(T=ot,p==="categorical"&&ot in j?[new yr(De.key,Pt,"stop domain values must be unique")]:(j[ot]=!0,[])):[new yr(De.key,Pt,`integer expected, found ${ot}`)]}}function Ts(f){const u=(f.expressionContext==="property"?Vs:Na)(Qr(f.value),f.valueSpec);if(u.result==="error")return u.value.map(x=>new yr(`${f.key}${x.key}`,f.value,x.message));const p=u.value.expression||u.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!p.outputDefined())return[new yr(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!No(p))return[new yr(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!No(p))return[new yr(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!Ia(p,["zoom","feature-state"]))return[new yr(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!Al(p))return[new yr(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Qs(f){const u=f.key,p=f.value,x=f.valueSpec,T=[];return Array.isArray(x.values)?x.values.indexOf(lr(p))===-1&&T.push(new yr(u,p,`expected one of [${x.values.join(", ")}], ${JSON.stringify(p)} found`)):Object.keys(x.values).indexOf(lr(p))===-1&&T.push(new yr(u,p,`expected one of [${Object.keys(x.values).join(", ")}], ${JSON.stringify(p)} found`)),T}function qs(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const u of f.slice(1))if(!qs(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const Lu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ll(f){if(f==null)return{filter:()=>!0,needGeometry:!1};qs(f)||(f=Ua(f));const u=Na(f,Lu);if(u.result==="error")throw new Error(u.value.map(p=>`${p.key}: ${p.message}`).join(", "));return{filter:(p,x,T)=>u.value.evaluate(p,x,{},T),needGeometry:$u(f)}}function Ml(f,u){return f<u?-1:f>u?1:0}function $u(f){if(!Array.isArray(f))return!1;if(f[0]==="within")return!0;for(let u=1;u<f.length;u++)if($u(f[u]))return!0;return!1}function Ua(f){if(!f)return!0;const u=f[0];return f.length<=1?u!=="any":u==="=="?Zl(f[1],f[2],"=="):u==="!="?la(Zl(f[1],f[2],"==")):u==="<"||u===">"||u==="<="||u===">="?Zl(f[1],f[2],u):u==="any"?(p=f.slice(1),["any"].concat(p.map(Ua))):u==="all"?["all"].concat(f.slice(1).map(Ua)):u==="none"?["all"].concat(f.slice(1).map(Ua).map(la)):u==="in"?Nu(f[1],f.slice(2)):u==="!in"?la(Nu(f[1],f.slice(2))):u==="has"?Bo(f[1]):u==="!has"?la(Bo(f[1])):u!=="within"||f;var p}function Zl(f,u,p){switch(f){case"$type":return[`filter-type-${p}`,u];case"$id":return[`filter-id-${p}`,u];default:return[`filter-${p}`,f,u]}}function Nu(f,u){if(u.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some(p=>typeof p!=typeof u[0])?["filter-in-large",f,["literal",u.sort(Ml)]]:["filter-in-small",f,["literal",u]]}}function Bo(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function la(f){return["!",f]}function ul(f){return qs(Qr(f.value))?Ts(Yt({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Bu(f)}function Bu(f){const u=f.value,p=f.key;if(Vn(u)!=="array")return[new yr(p,u,`array expected, ${Vn(u)} found`)];const x=f.styleSpec;let T,D=[];if(u.length<1)return[new yr(p,u,"filter array must have at least 1 element")];switch(D=D.concat(Qs({key:`${p}[0]`,value:u[0],valueSpec:x.filter_operator,style:f.style,styleSpec:f.styleSpec})),lr(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&lr(u[1])==="$type"&&D.push(new yr(p,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&D.push(new yr(p,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(T=Vn(u[1]),T!=="string"&&D.push(new yr(`${p}[1]`,u[1],`string expected, ${T} found`)));for(let j=2;j<u.length;j++)T=Vn(u[j]),lr(u[1])==="$type"?D=D.concat(Qs({key:`${p}[${j}]`,value:u[j],valueSpec:x.geometry_type,style:f.style,styleSpec:f.styleSpec})):T!=="string"&&T!=="number"&&T!=="boolean"&&D.push(new yr(`${p}[${j}]`,u[j],`string, number, or boolean expected, ${T} found`));break;case"any":case"all":case"none":for(let j=1;j<u.length;j++)D=D.concat(Bu({key:`${p}[${j}]`,value:u[j],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":T=Vn(u[1]),u.length!==2?D.push(new yr(p,u,`filter array for "${u[0]}" operator must have 2 elements`)):T!=="string"&&D.push(new yr(`${p}[1]`,u[1],`string expected, ${T} found`));break;case"within":T=Vn(u[1]),u.length!==2?D.push(new yr(p,u,`filter array for "${u[0]}" operator must have 2 elements`)):T!=="object"&&D.push(new yr(`${p}[1]`,u[1],`object expected, ${T} found`))}return D}function sc(f,u){const p=f.key,x=f.style,T=f.styleSpec,D=f.value,j=f.objectKey,J=T[`${u}_${f.layerType}`];if(!J)return[];const ie=j.match(/^(.*)-transition$/);if(u==="paint"&&ie&&J[ie[1]]&&J[ie[1]].transition)return jt({key:p,value:D,valueSpec:T.transition,style:x,styleSpec:T});const le=f.valueSpec||J[j];if(!le)return[new yr(p,D,`unknown property "${j}"`)];let me;if(Vn(D)==="string"&&Gn(le)&&!le.tokens&&(me=/^{([^}]+)}$/.exec(D)))return[new yr(p,D,`"${j}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(me[1])} }\`.`)];const xe=[];return f.layerType==="symbol"&&(j==="text-field"&&x&&!x.glyphs&&xe.push(new yr(p,D,'use of "text-field" requires a style "glyphs" property')),j==="text-font"&&vn(Qr(D))&&lr(D.type)==="identity"&&xe.push(new yr(p,D,'"text-font" does not support identity functions'))),xe.concat(jt({key:f.key,value:D,valueSpec:le,style:x,styleSpec:T,expressionContext:"property",propertyType:u,propertyKey:j}))}function As(f){return sc(f,"paint")}function ds(f){return sc(f,"layout")}function fu(f){let u=[];const p=f.value,x=f.key,T=f.style,D=f.styleSpec;p.type||p.ref||u.push(new yr(x,p,'either "type" or "ref" is required'));let j=lr(p.type);const J=lr(p.ref);if(p.id){const ie=lr(p.id);for(let le=0;le<f.arrayIndex;le++){const me=T.layers[le];lr(me.id)===ie&&u.push(new yr(x,p.id,`duplicate layer id "${p.id}", previously used at line ${me.id.__line__}`))}}if("ref"in p){let ie;["type","source","source-layer","filter","layout"].forEach(le=>{le in p&&u.push(new yr(x,p[le],`"${le}" is prohibited for ref layers`))}),T.layers.forEach(le=>{lr(le.id)===J&&(ie=le)}),ie?ie.ref?u.push(new yr(x,p.ref,"ref cannot reference another ref layer")):j=lr(ie.type):u.push(new yr(x,p.ref,`ref layer "${J}" not found`))}else if(j!=="background")if(p.source){const ie=T.sources&&T.sources[p.source],le=ie&&lr(ie.type);ie?le==="vector"&&j==="raster"?u.push(new yr(x,p.source,`layer "${p.id}" requires a raster source`)):le==="raster"&&j!=="raster"?u.push(new yr(x,p.source,`layer "${p.id}" requires a vector source`)):le!=="vector"||p["source-layer"]?le==="raster-dem"&&j!=="hillshade"?u.push(new yr(x,p.source,"raster-dem source can only be used with layer type 'hillshade'.")):j!=="line"||!p.paint||!p.paint["line-gradient"]||le==="geojson"&&ie.lineMetrics||u.push(new yr(x,p,`layer "${p.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new yr(x,p,`layer "${p.id}" must specify a "source-layer"`)):u.push(new yr(x,p.source,`source "${p.source}" not found`))}else u.push(new yr(x,p,'missing required property "source"'));return u=u.concat(rs({key:x,value:p,valueSpec:D.layer,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{"*":()=>[],type:()=>jt({key:`${x}.type`,value:p.type,valueSpec:D.layer.type,style:f.style,styleSpec:f.styleSpec,object:p,objectKey:"type"}),filter:ul,layout:ie=>rs({layer:p,key:ie.key,value:ie.value,style:ie.style,styleSpec:ie.styleSpec,objectElementValidators:{"*":le=>ds(Yt({layerType:j},le))}}),paint:ie=>rs({layer:p,key:ie.key,value:ie.value,style:ie.style,styleSpec:ie.styleSpec,objectElementValidators:{"*":le=>As(Yt({layerType:j},le))}})}})),u}function Fu(f){const u=f.value,p=f.key,x=Vn(u);return x!=="string"?[new yr(p,u,`string expected, ${x} found`)]:[]}const Dh={promoteId:function({key:f,value:u}){if(Vn(u)==="string")return Fu({key:f,value:u});{const p=[];for(const x in u)p.push(...Fu({key:`${f}.${x}`,value:u[x]}));return p}}};function kc(f){const u=f.value,p=f.key,x=f.styleSpec,T=f.style;if(!u.type)return[new yr(p,u,'"type" is required')];const D=lr(u.type);let j;switch(D){case"vector":case"raster":case"raster-dem":return j=rs({key:p,value:u,valueSpec:x[`source_${D.replace("-","_")}`],style:f.style,styleSpec:x,objectElementValidators:Dh}),j;case"geojson":if(j=rs({key:p,value:u,valueSpec:x.source_geojson,style:T,styleSpec:x,objectElementValidators:Dh}),u.cluster)for(const J in u.clusterProperties){const[ie,le]=u.clusterProperties[J],me=typeof ie=="string"?[ie,["accumulated"],["get",J]]:ie;j.push(...Ts({key:`${p}.${J}.map`,value:le,expressionContext:"cluster-map"})),j.push(...Ts({key:`${p}.${J}.reduce`,value:me,expressionContext:"cluster-reduce"}))}return j;case"video":return rs({key:p,value:u,valueSpec:x.source_video,style:T,styleSpec:x});case"image":return rs({key:p,value:u,valueSpec:x.source_image,style:T,styleSpec:x});case"canvas":return[new yr(p,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Qs({key:`${p}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:T,styleSpec:x})}}function Uu(f){const u=f.value,p=f.styleSpec,x=p.light,T=f.style;let D=[];const j=Vn(u);if(u===void 0)return D;if(j!=="object")return D=D.concat([new yr("light",u,`object expected, ${j} found`)]),D;for(const J in u){const ie=J.match(/^(.*)-transition$/);D=D.concat(ie&&x[ie[1]]&&x[ie[1]].transition?jt({key:J,value:u[J],valueSpec:p.transition,style:T,styleSpec:p}):x[J]?jt({key:J,value:u[J],valueSpec:x[J],style:T,styleSpec:p}):[new yr(J,u[J],`unknown property "${J}"`)])}return D}function ms(f){const u=f.value,p=f.styleSpec,x=p.terrain,T=f.style;let D=[];const j=Vn(u);if(u===void 0)return D;if(j!=="object")return D=D.concat([new yr("terrain",u,`object expected, ${j} found`)]),D;for(const J in u)D=D.concat(x[J]?jt({key:J,value:u[J],valueSpec:x[J],style:T,styleSpec:p}):[new yr(J,u[J],`unknown property "${J}"`)]);return D}const cl={"*":()=>[],array:zu,boolean:function(f){const u=f.value,p=f.key,x=Vn(u);return x!=="boolean"?[new yr(p,u,`boolean expected, ${x} found`)]:[]},number:Js,color:function(f){const u=f.key,p=f.value,x=Vn(p);return x!=="string"?[new yr(u,p,`color expected, ${x} found`)]:Et(p)===null?[new yr(u,p,`color expected, "${p}" found`)]:[]},constants:Xt,enum:Qs,filter:ul,function:Ac,layer:fu,object:rs,source:kc,light:Uu,terrain:ms,string:Fu,formatted:function(f){return Fu(f).length===0?[]:Ts(f)},resolvedImage:function(f){return Fu(f).length===0?[]:Ts(f)},padding:function(f){const u=f.key,p=f.value;if(Vn(p)==="array"){if(p.length<1||p.length>4)return[new yr(u,p,`padding requires 1 to 4 values; ${p.length} values found`)];const x={type:"number"};let T=[];for(let D=0;D<p.length;D++)T=T.concat(jt({key:`${u}[${D}]`,value:p[D],valueSpec:x}));return T}return Js({key:u,value:p,valueSpec:{}})}};function jt(f){const u=f.value,p=f.valueSpec,x=f.styleSpec;return p.expression&&vn(lr(u))?Ac(f):p.expression&&sa(Qr(u))?Ts(f):p.type&&cl[p.type]?cl[p.type](f):rs(Yt({},f,{valueSpec:p.type?x[p.type]:p}))}function kr(f){const u=f.value,p=f.key,x=Fu(f);return x.length||(u.indexOf("{fontstack}")===-1&&x.push(new yr(p,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&x.push(new yr(p,u,'"glyphs" url must include a "{range}" token'))),x}function pr(f,u=Mt){let p=[];return p=p.concat(jt({key:"",value:f,valueSpec:u.$root,styleSpec:u,style:f,objectElementValidators:{glyphs:kr,"*":()=>[]}})),f.constants&&(p=p.concat(Xt({key:"constants",value:f.constants,style:f,styleSpec:u}))),Jr(p)}function Jr(f){return[].concat(f).sort((u,p)=>u.line-p.line)}function hi(f){return function(...u){return Jr(f.apply(this,u))}}pr.source=hi(kc),pr.light=hi(Uu),pr.terrain=hi(ms),pr.layer=hi(fu),pr.filter=hi(ul),pr.paintProperty=hi(As),pr.layoutProperty=hi(ds);const Wi=pr,ja=Wi.light,ii=Wi.paintProperty,Zi=Wi.layoutProperty;function Xl(f,u){let p=!1;if(u&&u.length)for(const x of u)f.fire(new Ka(new Error(x.message))),p=!0;return p}class to{constructor(u,p,x){const T=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const j=new Int32Array(this.arrayBuffer);u=j[0],this.d=(p=j[1])+2*(x=j[2]);for(let ie=0;ie<this.d*this.d;ie++){const le=j[3+ie],me=j[3+ie+1];T.push(le===me?null:j.subarray(le,me))}const J=j[3+T.length+1];this.keys=j.subarray(j[3+T.length],J),this.bboxes=j.subarray(J),this.insert=this._insertReadonly}else{this.d=p+2*x;for(let j=0;j<this.d*this.d;j++)T.push([]);this.keys=[],this.bboxes=[]}this.n=p,this.extent=u,this.padding=x,this.scale=p/u,this.uid=0;const D=x/p*u;this.min=-D,this.max=u+D}insert(u,p,x,T,D){this._forEachCell(p,x,T,D,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(p),this.bboxes.push(x),this.bboxes.push(T),this.bboxes.push(D)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,p,x,T,D,j){this.cells[D].push(j)}query(u,p,x,T,D){const j=this.min,J=this.max;if(u<=j&&p<=j&&J<=x&&J<=T&&!D)return Array.prototype.slice.call(this.keys);{const ie=[];return this._forEachCell(u,p,x,T,this._queryCell,ie,{},D),ie}}_queryCell(u,p,x,T,D,j,J,ie){const le=this.cells[D];if(le!==null){const me=this.keys,xe=this.bboxes;for(let Re=0;Re<le.length;Re++){const De=le[Re];if(J[De]===void 0){const Be=4*De;(ie?ie(xe[Be+0],xe[Be+1],xe[Be+2],xe[Be+3]):u<=xe[Be+2]&&p<=xe[Be+3]&&x>=xe[Be+0]&&T>=xe[Be+1])?(J[De]=!0,j.push(me[De])):J[De]=!1}}}}_forEachCell(u,p,x,T,D,j,J,ie){const le=this._convertToCellCoord(u),me=this._convertToCellCoord(p),xe=this._convertToCellCoord(x),Re=this._convertToCellCoord(T);for(let De=le;De<=xe;De++)for(let Be=me;Be<=Re;Be++){const rt=this.d*Be+De;if((!ie||ie(this._convertFromCellCoord(De),this._convertFromCellCoord(Be),this._convertFromCellCoord(De+1),this._convertFromCellCoord(Be+1)))&&D.call(this,u,p,x,T,rt,j,J,ie))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,p=3+this.cells.length+1+1;let x=0;for(let j=0;j<this.cells.length;j++)x+=this.cells[j].length;const T=new Int32Array(p+x+this.keys.length+this.bboxes.length);T[0]=this.extent,T[1]=this.n,T[2]=this.padding;let D=p;for(let j=0;j<u.length;j++){const J=u[j];T[3+j]=D,T.set(J,D),D+=J.length}return T[3+u.length]=D,T.set(this.keys,D),D+=this.keys.length,T[3+u.length+1]=D,T.set(this.bboxes,D),D+=this.bboxes.length,T.buffer}static serialize(u,p){const x=u.toArrayBuffer();return p&&p.push(x),{buffer:x}}static deserialize(u){return new to(u.buffer)}}const el={};function Pn(f,u,p={}){if(el[f])throw new Error(`${f} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:f,writeable:!1}),el[f]={klass:u,omit:p.omit||[],shallow:p.shallow||[]}}Pn("Object",Object),Pn("TransferableGridIndex",to),Pn("Color",Le),Pn("Error",Error),Pn("AJAXError",an),Pn("ResolvedImage",pt),Pn("StylePropertyFunction",ps),Pn("StyleExpression",Wn,{omit:["_evaluator"]}),Pn("ZoomDependentExpression",wi),Pn("ZoomConstantExpression",eo),Pn("CompoundExpression",kn,{omit:["_evaluate"]});for(const f in On)On[f]._classRegistryKey||Pn(`Expression_${f}`,On[f]);function Ol(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function Kl(f,u){if(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob)return f;if(Ol(f)||Ne(f))return u&&u.push(f),f;if(ArrayBuffer.isView(f)){const p=f;return u&&u.push(p.buffer),p}if(f instanceof ImageData)return u&&u.push(f.data.buffer),f;if(Array.isArray(f)){const p=[];for(const x of f)p.push(Kl(x,u));return p}if(typeof f=="object"){const p=f.constructor,x=p._classRegistryKey;if(!x)throw new Error("can't serialize object of unregistered class");if(!el[x])throw new Error(`${x} is not registered.`);const T=p.serialize?p.serialize(f,u):{};if(p.serialize){if(u&&T===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const D in f){if(!f.hasOwnProperty(D)||el[x].omit.indexOf(D)>=0)continue;const j=f[D];T[D]=el[x].shallow.indexOf(D)>=0?j:Kl(j,u)}f instanceof Error&&(T.message=f.message)}if(T.$name)throw new Error("$name property is reserved for worker serialization logic.");return x!=="Object"&&(T.$name=x),T}throw new Error("can't serialize object of type "+typeof f)}function ks(f){if(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||Ol(f)||Ne(f)||ArrayBuffer.isView(f)||f instanceof ImageData)return f;if(Array.isArray(f))return f.map(ks);if(typeof f=="object"){const u=f.$name||"Object";if(!el[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:p}=el[u];if(!p)throw new Error(`can't deserialize unregistered class ${u}`);if(p.deserialize)return p.deserialize(f);const x=Object.create(p.prototype);for(const T of Object.keys(f)){if(T==="$name")continue;const D=f[T];x[T]=el[u].shallow.indexOf(T)>=0?D:ks(D)}return x}throw new Error("can't deserialize object of type "+typeof f)}class pa{constructor(){this.first=!0}update(u,p){const x=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=x,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=x,!0):(this.lastFloorZoom>x?(this.lastIntegerZoom=x+1,this.lastIntegerZoomTime=p):this.lastFloorZoom<x&&(this.lastIntegerZoom=x,this.lastIntegerZoomTime=p),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=x,!0))}}const pn={"Latin-1 Supplement":f=>f>=128&&f<=255,Arabic:f=>f>=1536&&f<=1791,"Arabic Supplement":f=>f>=1872&&f<=1919,"Arabic Extended-A":f=>f>=2208&&f<=2303,"Hangul Jamo":f=>f>=4352&&f<=4607,"Unified Canadian Aboriginal Syllabics":f=>f>=5120&&f<=5759,Khmer:f=>f>=6016&&f<=6143,"Unified Canadian Aboriginal Syllabics Extended":f=>f>=6320&&f<=6399,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"CJK Radicals Supplement":f=>f>=11904&&f<=12031,"Kangxi Radicals":f=>f>=12032&&f<=12255,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Bopomofo:f=>f>=12544&&f<=12591,"Hangul Compatibility Jamo":f=>f>=12592&&f<=12687,Kanbun:f=>f>=12688&&f<=12703,"Bopomofo Extended":f=>f>=12704&&f<=12735,"CJK Strokes":f=>f>=12736&&f<=12783,"Katakana Phonetic Extensions":f=>f>=12784&&f<=12799,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"CJK Unified Ideographs Extension A":f=>f>=13312&&f<=19903,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Yi Syllables":f=>f>=40960&&f<=42127,"Yi Radicals":f=>f>=42128&&f<=42191,"Hangul Jamo Extended-A":f=>f>=43360&&f<=43391,"Hangul Syllables":f=>f>=44032&&f<=55215,"Hangul Jamo Extended-B":f=>f>=55216&&f<=55295,"Private Use Area":f=>f>=57344&&f<=63743,"CJK Compatibility Ideographs":f=>f>=63744&&f<=64255,"Arabic Presentation Forms-A":f=>f>=64336&&f<=65023,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Arabic Presentation Forms-B":f=>f>=65136&&f<=65279,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function So(f){for(const u of f)if(Eo(u.charCodeAt(0)))return!0;return!1}function gs(f){for(const u of f)if(!qf(u.charCodeAt(0)))return!1;return!0}function qf(f){return!(pn.Arabic(f)||pn["Arabic Supplement"](f)||pn["Arabic Extended-A"](f)||pn["Arabic Presentation Forms-A"](f)||pn["Arabic Presentation Forms-B"](f))}function Eo(f){return!(f!==746&&f!==747&&(f<4352||!(pn["Bopomofo Extended"](f)||pn.Bopomofo(f)||pn["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||pn["CJK Compatibility Ideographs"](f)||pn["CJK Compatibility"](f)||pn["CJK Radicals Supplement"](f)||pn["CJK Strokes"](f)||!(!pn["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||pn["CJK Unified Ideographs Extension A"](f)||pn["CJK Unified Ideographs"](f)||pn["Enclosed CJK Letters and Months"](f)||pn["Hangul Compatibility Jamo"](f)||pn["Hangul Jamo Extended-A"](f)||pn["Hangul Jamo Extended-B"](f)||pn["Hangul Jamo"](f)||pn["Hangul Syllables"](f)||pn.Hiragana(f)||pn["Ideographic Description Characters"](f)||pn.Kanbun(f)||pn["Kangxi Radicals"](f)||pn["Katakana Phonetic Extensions"](f)||pn.Katakana(f)&&f!==12540||!(!pn["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!pn["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||pn["Unified Canadian Aboriginal Syllabics"](f)||pn["Unified Canadian Aboriginal Syllabics Extended"](f)||pn["Vertical Forms"](f)||pn["Yijing Hexagram Symbols"](f)||pn["Yi Syllables"](f)||pn["Yi Radicals"](f))))}function Is(f){return!(Eo(f)||function(u){return!!(pn["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||pn["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||pn["Letterlike Symbols"](u)||pn["Number Forms"](u)||pn["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||pn["Control Pictures"](u)&&u!==9251||pn["Optical Character Recognition"](u)||pn["Enclosed Alphanumerics"](u)||pn["Geometric Shapes"](u)||pn["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||pn["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||pn["CJK Symbols and Punctuation"](u)||pn.Katakana(u)||pn["Private Use Area"](u)||pn["CJK Compatibility Forms"](u)||pn["Small Form Variants"](u)||pn["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)}(f))}function fn(f){return f>=1424&&f<=2303||pn["Arabic Presentation Forms-A"](f)||pn["Arabic Presentation Forms-B"](f)}function fl(f,u){return!(!u&&fn(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||pn.Khmer(f))}function Yl(f){for(const u of f)if(fn(u.charCodeAt(0)))return!0;return!1}const Rl="deferred",Fo="loading",ju="loaded";let Yo=null,en="unavailable",hl=null;const hu=function(f){f&&typeof f=="string"&&f.indexOf("NetworkError")>-1&&(en="error"),Yo&&Yo(f)};function fo(){Do.fire(new ka("pluginStateChange",{pluginStatus:en,pluginURL:hl}))}const Do=new dr,Vu=function(){return en},zh=function(){if(en!==Rl||!hl)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");en=Fo,fo(),hl&&Pi({url:hl},f=>{f?hu(f):(en=ju,fo())})},Gs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>en===ju||Gs.applyArabicShaping!=null,isLoading:()=>en===Fo,setState(f){if(!te())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");en=f.pluginStatus,hl=f.pluginURL},isParsed(){if(!te())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Gs.applyArabicShaping!=null&&Gs.processBidirectionalText!=null&&Gs.processStyledBidirectionalText!=null},getPluginURL(){if(!te())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return hl}};class Ui{constructor(u,p){this.zoom=u,p?(this.now=p.now,this.fadeDuration=p.fadeDuration,this.zoomHistory=p.zoomHistory,this.transition=p.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new pa,this.transition={})}isSupportedScript(u){return function(p,x){for(const T of p)if(!fl(T.charCodeAt(0),x))return!1;return!0}(u,Gs.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,p=u-Math.floor(u),x=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:p+(1-p)*x}:{fromScale:.5,toScale:1,t:1-(1-x)*p}}}class Ms{constructor(u,p){this.property=u,this.value=p,this.expression=function(x,T){if(vn(x))return new ps(x,T);if(sa(x)){const D=Vs(x,T);if(D.result==="error")throw new Error(D.value.map(j=>`${j.key}: ${j.message}`).join(", "));return D.value}{let D=x;return T.type==="color"&&typeof x=="string"?D=Le.parse(x):T.type!=="padding"||typeof x!="number"&&!Array.isArray(x)||(D=Xe.parse(x)),{kind:"constant",evaluate:()=>D}}}(p===void 0?u.specification.default:p,u.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(u,p,x){return this.property.possiblyEvaluate(this,u,p,x)}}class pu{constructor(u){this.property=u,this.value=new Ms(u,void 0)}transitioned(u,p){return new rf(this.property,this.value,p,F({},u.transition,this.transition),u.now)}untransitioned(){return new rf(this.property,this.value,null,{},0)}}class Gf{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)}getValue(u){return B(this._values[u].value.value)}setValue(u,p){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new pu(this._values[u].property)),this._values[u].value=new Ms(this._values[u].property,p===null?void 0:B(p))}getTransition(u){return B(this._values[u].transition)}setTransition(u,p){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new pu(this._values[u].property)),this._values[u].transition=B(p)||void 0}serialize(){const u={};for(const p of Object.keys(this._values)){const x=this.getValue(p);x!==void 0&&(u[p]=x);const T=this.getTransition(p);T!==void 0&&(u[`${p}-transition`]=T)}return u}transitioned(u,p){const x=new pl(this._properties);for(const T of Object.keys(this._values))x._values[T]=this._values[T].transitioned(u,p._values[T]);return x}untransitioned(){const u=new pl(this._properties);for(const p of Object.keys(this._values))u._values[p]=this._values[p].untransitioned();return u}}class rf{constructor(u,p,x,T,D){this.property=u,this.value=p,this.begin=D+T.delay||0,this.end=this.begin+T.duration||0,u.specification.transition&&(T.delay||T.duration)&&(this.prior=x)}possiblyEvaluate(u,p,x){const T=u.now||0,D=this.value.possiblyEvaluate(u,p,x),j=this.prior;if(j){if(T>this.end)return this.prior=null,D;if(this.value.isDataDriven())return this.prior=null,D;if(T<this.begin)return j.possiblyEvaluate(u,p,x);{const J=(T-this.begin)/(this.end-this.begin);return this.property.interpolate(j.possiblyEvaluate(u,p,x),D,function(ie){if(ie<=0)return 0;if(ie>=1)return 1;const le=ie*ie,me=le*ie;return 4*(ie<.5?me:3*(ie-le)+me-.75)}(J))}}return D}}class pl{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,p,x){const T=new vi(this._properties);for(const D of Object.keys(this._values))T._values[D]=this._values[D].possiblyEvaluate(u,p,x);return T}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class Cp{constructor(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)}getValue(u){return B(this._values[u].value)}setValue(u,p){this._values[u]=new Ms(this._values[u].property,p===null?void 0:B(p))}serialize(){const u={};for(const p of Object.keys(this._values)){const x=this.getValue(p);x!==void 0&&(u[p]=x)}return u}possiblyEvaluate(u,p,x){const T=new vi(this._properties);for(const D of Object.keys(this._values))T._values[D]=this._values[D].possiblyEvaluate(u,p,x);return T}}class yi{constructor(u,p,x){this.property=u,this.value=p,this.parameters=x}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,p,x,T){return this.property.evaluate(this.value,this.parameters,u,p,x,T)}}class vi{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class Tn{constructor(u){this.specification=u}possiblyEvaluate(u,p){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(p)}interpolate(u,p,x){const T=Ru[this.specification.type];return T?T(u,p,x):u}}class zn{constructor(u,p){this.specification=u,this.overrides=p}possiblyEvaluate(u,p,x,T){return new yi(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(p,null,{},x,T)}:u.expression,p)}interpolate(u,p,x){if(u.value.kind!=="constant"||p.value.kind!=="constant")return u;if(u.value.value===void 0||p.value.value===void 0)return new yi(this,{kind:"constant",value:void 0},u.parameters);const T=Ru[this.specification.type];return T?new yi(this,{kind:"constant",value:T(u.value.value,p.value.value,x)},u.parameters):u}evaluate(u,p,x,T,D,j){return u.kind==="constant"?u.value:u.evaluate(p,x,T,D,j)}}class Uo extends zn{possiblyEvaluate(u,p,x,T){if(u.value===void 0)return new yi(this,{kind:"constant",value:void 0},p);if(u.expression.kind==="constant"){const D=u.expression.evaluate(p,null,{},x,T),j=u.property.specification.type==="resolvedImage"&&typeof D!="string"?D.name:D,J=this._calculate(j,j,j,p);return new yi(this,{kind:"constant",value:J},p)}if(u.expression.kind==="camera"){const D=this._calculate(u.expression.evaluate({zoom:p.zoom-1}),u.expression.evaluate({zoom:p.zoom}),u.expression.evaluate({zoom:p.zoom+1}),p);return new yi(this,{kind:"constant",value:D},p)}return new yi(this,u.expression,p)}evaluate(u,p,x,T,D,j){if(u.kind==="source"){const J=u.evaluate(p,x,T,D,j);return this._calculate(J,J,J,p)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(p.zoom)-1},x,T),u.evaluate({zoom:Math.floor(p.zoom)},x,T),u.evaluate({zoom:Math.floor(p.zoom)+1},x,T),p):u.value}_calculate(u,p,x,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:u,to:p}:{from:x,to:p}}interpolate(u){return u}}class du{constructor(u){this.specification=u}possiblyEvaluate(u,p,x,T){if(u.value!==void 0){if(u.expression.kind==="constant"){const D=u.expression.evaluate(p,null,{},x,T);return this._calculate(D,D,D,p)}return this._calculate(u.expression.evaluate(new Ui(Math.floor(p.zoom-1),p)),u.expression.evaluate(new Ui(Math.floor(p.zoom),p)),u.expression.evaluate(new Ui(Math.floor(p.zoom+1),p)),p)}}_calculate(u,p,x,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:u,to:p}:{from:x,to:p}}interpolate(u){return u}}class jo{constructor(u){this.specification=u}possiblyEvaluate(u,p,x,T){return!!u.expression.evaluate(p,null,{},x,T)}interpolate(){return!1}}class Va{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const p in u){const x=u[p];x.specification.overridable&&this.overridableProperties.push(p);const T=this.defaultPropertyValues[p]=new Ms(x,void 0),D=this.defaultTransitionablePropertyValues[p]=new pu(x);this.defaultTransitioningPropertyValues[p]=D.untransitioned(),this.defaultPossiblyEvaluatedValues[p]=T.possiblyEvaluate({})}}}Pn("DataDrivenProperty",zn),Pn("DataConstantProperty",Tn),Pn("CrossFadedDataDrivenProperty",Uo),Pn("CrossFadedProperty",du),Pn("ColorRampProperty",jo);const go="-transition";class Co extends dr{constructor(u,p){if(super(),this.id=u.id,this.type=u.type,this._featureFilter={filter:()=>!0,needGeometry:!1},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),p.layout&&(this._unevaluatedLayout=new Cp(p.layout)),p.paint)){this._transitionablePaint=new Gf(p.paint);for(const x in u.paint)this.setPaintProperty(x,u.paint[x],{validate:!1});for(const x in u.layout)this.setLayoutProperty(x,u.layout[x],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new vi(p.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}setLayoutProperty(u,p,x={}){p!=null&&this._validate(Zi,`layers.${this.id}.layout.${u}`,u,p,x)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,p):this.visibility=p)}getPaintProperty(u){return u.endsWith(go)?this._transitionablePaint.getTransition(u.slice(0,-go.length)):this._transitionablePaint.getValue(u)}setPaintProperty(u,p,x={}){if(p!=null&&this._validate(ii,`layers.${this.id}.paint.${u}`,u,p,x))return!1;if(u.endsWith(go))return this._transitionablePaint.setTransition(u.slice(0,-go.length),p||void 0),!1;{const T=this._transitionablePaint._values[u],D=T.property.specification["property-type"]==="cross-faded-data-driven",j=T.value.isDataDriven(),J=T.value;this._transitionablePaint.setValue(u,p),this._handleSpecialPaintPropertyUpdate(u);const ie=this._transitionablePaint._values[u].value;return ie.isDataDriven()||j||D||this._handleOverridablePaintPropertyUpdate(u,J,ie)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,p,x){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,p){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,p)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,p)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),H(u,(p,x)=>!(p===void 0||x==="layout"&&!Object.keys(p).length||x==="paint"&&!Object.keys(p).length))}_validate(u,p,x,T,D={}){return(!D||D.validate!==!1)&&Xl(this,u.call(Wi,{key:p,layerType:this.type,objectKey:x,value:T,styleSpec:Mt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const p=this.paint.get(u);if(p instanceof yi&&Gn(p.property.specification)&&(p.value.kind==="source"||p.value.kind==="composite")&&p.value.isStateDependent)return!0}return!1}}const un={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Nn{constructor(u,p){this._structArray=u,this._pos1=p*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class na{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,p){return u._trim(),p&&(u.isTransferred=!0,p.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const p=Object.create(this.prototype);return p.arrayBuffer=u.arrayBuffer,p.length=u.length,p.capacity=u.arrayBuffer.byteLength/p.bytesPerElement,p._refreshViews(),p}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const p=this.uint8;this._refreshViews(),p&&this.uint8.set(p)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ua(f,u=1){let p=0,x=0;return{members:f.map(T=>{const D=un[T.type].BYTES_PER_ELEMENT,j=p=Dl(p,Math.max(u,D)),J=T.components||1;return x=Math.max(x,D),p+=D*J,{name:T.name,type:T.type,components:J,offset:j}}),size:Dl(p,Math.max(x,u)),alignment:u}}function Dl(f,u){return Math.ceil(f/u)*u}class zo extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p){const x=this.length;return this.resize(x+1),this.emplace(x,u,p)}emplace(u,p,x){const T=2*u;return this.int16[T+0]=p,this.int16[T+1]=x,u}}zo.prototype.bytesPerElement=4,Pn("StructArrayLayout2i4",zo);class O extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,x,T){const D=this.length;return this.resize(D+1),this.emplace(D,u,p,x,T)}emplace(u,p,x,T,D){const j=4*u;return this.int16[j+0]=p,this.int16[j+1]=x,this.int16[j+2]=T,this.int16[j+3]=D,u}}O.prototype.bytesPerElement=8,Pn("StructArrayLayout4i8",O);class c extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,x,T,D,j){const J=this.length;return this.resize(J+1),this.emplace(J,u,p,x,T,D,j)}emplace(u,p,x,T,D,j,J){const ie=6*u;return this.int16[ie+0]=p,this.int16[ie+1]=x,this.int16[ie+2]=T,this.int16[ie+3]=D,this.int16[ie+4]=j,this.int16[ie+5]=J,u}}c.prototype.bytesPerElement=12,Pn("StructArrayLayout2i4i12",c);class _ extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,x,T,D,j){const J=this.length;return this.resize(J+1),this.emplace(J,u,p,x,T,D,j)}emplace(u,p,x,T,D,j,J){const ie=4*u,le=8*u;return this.int16[ie+0]=p,this.int16[ie+1]=x,this.uint8[le+4]=T,this.uint8[le+5]=D,this.uint8[le+6]=j,this.uint8[le+7]=J,u}}_.prototype.bytesPerElement=8,Pn("StructArrayLayout2i4ub8",_);class k extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,p){const x=this.length;return this.resize(x+1),this.emplace(x,u,p)}emplace(u,p,x){const T=2*u;return this.float32[T+0]=p,this.float32[T+1]=x,u}}k.prototype.bytesPerElement=8,Pn("StructArrayLayout2f8",k);class R extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,p,x,T,D,j,J,ie,le,me){const xe=this.length;return this.resize(xe+1),this.emplace(xe,u,p,x,T,D,j,J,ie,le,me)}emplace(u,p,x,T,D,j,J,ie,le,me,xe){const Re=10*u;return this.uint16[Re+0]=p,this.uint16[Re+1]=x,this.uint16[Re+2]=T,this.uint16[Re+3]=D,this.uint16[Re+4]=j,this.uint16[Re+5]=J,this.uint16[Re+6]=ie,this.uint16[Re+7]=le,this.uint16[Re+8]=me,this.uint16[Re+9]=xe,u}}R.prototype.bytesPerElement=20,Pn("StructArrayLayout10ui20",R);class W extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,p,x,T,D,j,J,ie,le,me,xe,Re){const De=this.length;return this.resize(De+1),this.emplace(De,u,p,x,T,D,j,J,ie,le,me,xe,Re)}emplace(u,p,x,T,D,j,J,ie,le,me,xe,Re,De){const Be=12*u;return this.int16[Be+0]=p,this.int16[Be+1]=x,this.int16[Be+2]=T,this.int16[Be+3]=D,this.uint16[Be+4]=j,this.uint16[Be+5]=J,this.uint16[Be+6]=ie,this.uint16[Be+7]=le,this.int16[Be+8]=me,this.int16[Be+9]=xe,this.int16[Be+10]=Re,this.int16[Be+11]=De,u}}W.prototype.bytesPerElement=24,Pn("StructArrayLayout4i4ui4i24",W);class q extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,p,x){const T=this.length;return this.resize(T+1),this.emplace(T,u,p,x)}emplace(u,p,x,T){const D=3*u;return this.float32[D+0]=p,this.float32[D+1]=x,this.float32[D+2]=T,u}}q.prototype.bytesPerElement=12,Pn("StructArrayLayout3f12",q);class ue extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const p=this.length;return this.resize(p+1),this.emplace(p,u)}emplace(u,p){return this.uint32[1*u+0]=p,u}}ue.prototype.bytesPerElement=4,Pn("StructArrayLayout1ul4",ue);class he extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,p,x,T,D,j,J,ie,le){const me=this.length;return this.resize(me+1),this.emplace(me,u,p,x,T,D,j,J,ie,le)}emplace(u,p,x,T,D,j,J,ie,le,me){const xe=10*u,Re=5*u;return this.int16[xe+0]=p,this.int16[xe+1]=x,this.int16[xe+2]=T,this.int16[xe+3]=D,this.int16[xe+4]=j,this.int16[xe+5]=J,this.uint32[Re+3]=ie,this.uint16[xe+8]=le,this.uint16[xe+9]=me,u}}he.prototype.bytesPerElement=20,Pn("StructArrayLayout6i1ul2ui20",he);class be extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,x,T,D,j){const J=this.length;return this.resize(J+1),this.emplace(J,u,p,x,T,D,j)}emplace(u,p,x,T,D,j,J){const ie=6*u;return this.int16[ie+0]=p,this.int16[ie+1]=x,this.int16[ie+2]=T,this.int16[ie+3]=D,this.int16[ie+4]=j,this.int16[ie+5]=J,u}}be.prototype.bytesPerElement=12,Pn("StructArrayLayout2i2i2i12",be);class Te extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,x,T,D){const j=this.length;return this.resize(j+1),this.emplace(j,u,p,x,T,D)}emplace(u,p,x,T,D,j){const J=4*u,ie=8*u;return this.float32[J+0]=p,this.float32[J+1]=x,this.float32[J+2]=T,this.int16[ie+6]=D,this.int16[ie+7]=j,u}}Te.prototype.bytesPerElement=16,Pn("StructArrayLayout2f1f2i16",Te);class Ue extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,p,x,T){const D=this.length;return this.resize(D+1),this.emplace(D,u,p,x,T)}emplace(u,p,x,T,D){const j=12*u,J=3*u;return this.uint8[j+0]=p,this.uint8[j+1]=x,this.float32[J+1]=T,this.float32[J+2]=D,u}}Ue.prototype.bytesPerElement=12,Pn("StructArrayLayout2ub2f12",Ue);class Ke extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,p,x){const T=this.length;return this.resize(T+1),this.emplace(T,u,p,x)}emplace(u,p,x,T){const D=3*u;return this.uint16[D+0]=p,this.uint16[D+1]=x,this.uint16[D+2]=T,u}}Ke.prototype.bytesPerElement=6,Pn("StructArrayLayout3ui6",Ke);class yt extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,p,x,T,D,j,J,ie,le,me,xe,Re,De,Be,rt,ot,Pt){const kt=this.length;return this.resize(kt+1),this.emplace(kt,u,p,x,T,D,j,J,ie,le,me,xe,Re,De,Be,rt,ot,Pt)}emplace(u,p,x,T,D,j,J,ie,le,me,xe,Re,De,Be,rt,ot,Pt,kt){const At=24*u,$t=12*u,sr=48*u;return this.int16[At+0]=p,this.int16[At+1]=x,this.uint16[At+2]=T,this.uint16[At+3]=D,this.uint32[$t+2]=j,this.uint32[$t+3]=J,this.uint32[$t+4]=ie,this.uint16[At+10]=le,this.uint16[At+11]=me,this.uint16[At+12]=xe,this.float32[$t+7]=Re,this.float32[$t+8]=De,this.uint8[sr+36]=Be,this.uint8[sr+37]=rt,this.uint8[sr+38]=ot,this.uint32[$t+10]=Pt,this.int16[At+22]=kt,u}}yt.prototype.bytesPerElement=48,Pn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",yt);class ut extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,p,x,T,D,j,J,ie,le,me,xe,Re,De,Be,rt,ot,Pt,kt,At,$t,sr,Wt,zr,Zr,Br,Nr,Rr,Ur){const Vr=this.length;return this.resize(Vr+1),this.emplace(Vr,u,p,x,T,D,j,J,ie,le,me,xe,Re,De,Be,rt,ot,Pt,kt,At,$t,sr,Wt,zr,Zr,Br,Nr,Rr,Ur)}emplace(u,p,x,T,D,j,J,ie,le,me,xe,Re,De,Be,rt,ot,Pt,kt,At,$t,sr,Wt,zr,Zr,Br,Nr,Rr,Ur,Vr){const Ir=34*u,In=17*u;return this.int16[Ir+0]=p,this.int16[Ir+1]=x,this.int16[Ir+2]=T,this.int16[Ir+3]=D,this.int16[Ir+4]=j,this.int16[Ir+5]=J,this.int16[Ir+6]=ie,this.int16[Ir+7]=le,this.uint16[Ir+8]=me,this.uint16[Ir+9]=xe,this.uint16[Ir+10]=Re,this.uint16[Ir+11]=De,this.uint16[Ir+12]=Be,this.uint16[Ir+13]=rt,this.uint16[Ir+14]=ot,this.uint16[Ir+15]=Pt,this.uint16[Ir+16]=kt,this.uint16[Ir+17]=At,this.uint16[Ir+18]=$t,this.uint16[Ir+19]=sr,this.uint16[Ir+20]=Wt,this.uint16[Ir+21]=zr,this.uint16[Ir+22]=Zr,this.uint32[In+12]=Br,this.float32[In+13]=Nr,this.float32[In+14]=Rr,this.float32[In+15]=Ur,this.float32[In+16]=Vr,u}}ut.prototype.bytesPerElement=68,Pn("StructArrayLayout8i15ui1ul4f68",ut);class gt extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const p=this.length;return this.resize(p+1),this.emplace(p,u)}emplace(u,p){return this.float32[1*u+0]=p,u}}gt.prototype.bytesPerElement=4,Pn("StructArrayLayout1f4",gt);class zt extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,x){const T=this.length;return this.resize(T+1),this.emplace(T,u,p,x)}emplace(u,p,x,T){const D=3*u;return this.int16[D+0]=p,this.int16[D+1]=x,this.int16[D+2]=T,u}}zt.prototype.bytesPerElement=6,Pn("StructArrayLayout3i6",zt);class Gt extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,p,x){const T=this.length;return this.resize(T+1),this.emplace(T,u,p,x)}emplace(u,p,x,T){const D=4*u;return this.uint32[2*u+0]=p,this.uint16[D+2]=x,this.uint16[D+3]=T,u}}Gt.prototype.bytesPerElement=8,Pn("StructArrayLayout1ul2ui8",Gt);class Jt extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,p){const x=this.length;return this.resize(x+1),this.emplace(x,u,p)}emplace(u,p,x){const T=2*u;return this.uint16[T+0]=p,this.uint16[T+1]=x,u}}Jt.prototype.bytesPerElement=4,Pn("StructArrayLayout2ui4",Jt);class bt extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const p=this.length;return this.resize(p+1),this.emplace(p,u)}emplace(u,p){return this.uint16[1*u+0]=p,u}}bt.prototype.bytesPerElement=2,Pn("StructArrayLayout1ui2",bt);class nr extends na{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,p,x,T){const D=this.length;return this.resize(D+1),this.emplace(D,u,p,x,T)}emplace(u,p,x,T,D){const j=4*u;return this.float32[j+0]=p,this.float32[j+1]=x,this.float32[j+2]=T,this.float32[j+3]=D,u}}nr.prototype.bytesPerElement=16,Pn("StructArrayLayout4f16",nr);class er extends Nn{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new it(this.anchorPointX,this.anchorPointY)}}er.prototype.size=20;class mr extends he{get(u){return new er(this,u)}}Pn("CollisionBoxArray",mr);class Sr extends Nn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Sr.prototype.size=48;class $r extends yt{get(u){return new Sr(this,u)}}Pn("PlacedSymbolArray",$r);class gr extends Nn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}gr.prototype.size=68;class cn extends ut{get(u){return new gr(this,u)}}Pn("SymbolInstanceArray",cn);class g extends gt{getoffsetX(u){return this.float32[1*u+0]}}Pn("GlyphOffsetArray",g);class b extends zt{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}Pn("SymbolLineVertexArray",b);class y extends Nn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}y.prototype.size=8;class C extends Gt{get(u){return new y(this,u)}}Pn("FeatureIndexArray",C);class U extends zo{}class Y extends zo{}class ee extends zo{}class se extends c{}class ve extends _{}class Oe extends k{}class He extends R{}class Qe extends W{}class Ze extends q{}class mt extends ue{}class ft extends be{}class xt extends Ue{}class st extends Ke{}class wt extends Jt{}const Lt=ua([{name:"a_pos",components:2,type:"Int16"}],4),{members:Nt}=Lt;class qt{constructor(u=[]){this.segments=u}prepareSegment(u,p,x,T){let D=this.segments[this.segments.length-1];return u>qt.MAX_VERTEX_ARRAY_LENGTH&&N(`Max vertices per segment is ${qt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}`),(!D||D.vertexLength+u>qt.MAX_VERTEX_ARRAY_LENGTH||D.sortKey!==T)&&(D={vertexOffset:p.length,primitiveOffset:x.length,vertexLength:0,primitiveLength:0},T!==void 0&&(D.sortKey=T),this.segments.push(D)),D}get(){return this.segments}destroy(){for(const u of this.segments)for(const p in u.vaos)u.vaos[p].destroy()}static simpleSegment(u,p,x,T){return new qt([{vertexOffset:u,primitiveOffset:p,vertexLength:x,primitiveLength:T,vaos:{},sortKey:0}])}}function Ht(f,u){return 256*(f=P(Math.floor(f),0,255))+P(Math.floor(u),0,255)}qt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pn("SegmentVector",qt);const or=ua([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var vr={exports:{}},Pr={exports:{}};Pr.exports=function(f,u){var p,x,T,D,j,J,ie,le;for(x=f.length-(p=3&f.length),T=u,j=3432918353,J=461845907,le=0;le<x;)ie=255&f.charCodeAt(le)|(255&f.charCodeAt(++le))<<8|(255&f.charCodeAt(++le))<<16|(255&f.charCodeAt(++le))<<24,++le,T=27492+(65535&(D=5*(65535&(T=(T^=ie=(65535&(ie=(ie=(65535&ie)*j+(((ie>>>16)*j&65535)<<16)&4294967295)<<15|ie>>>17))*J+(((ie>>>16)*J&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(D>>>16)&65535)<<16);switch(ie=0,p){case 3:ie^=(255&f.charCodeAt(le+2))<<16;case 2:ie^=(255&f.charCodeAt(le+1))<<8;case 1:T^=ie=(65535&(ie=(ie=(65535&(ie^=255&f.charCodeAt(le)))*j+(((ie>>>16)*j&65535)<<16)&4294967295)<<15|ie>>>17))*J+(((ie>>>16)*J&65535)<<16)&4294967295}return T^=f.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0};var Mr={exports:{}};Mr.exports=function(f,u){for(var p,x=f.length,T=u^x,D=0;x>=4;)p=1540483477*(65535&(p=255&f.charCodeAt(D)|(255&f.charCodeAt(++D))<<8|(255&f.charCodeAt(++D))<<16|(255&f.charCodeAt(++D))<<24))+((1540483477*(p>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),x-=4,++D;switch(x){case 3:T^=(255&f.charCodeAt(D+2))<<16;case 2:T^=(255&f.charCodeAt(D+1))<<8;case 1:T=1540483477*(65535&(T^=255&f.charCodeAt(D)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0};var tn=Pr.exports,Sn=Mr.exports;vr.exports=tn,vr.exports.murmur3=tn,vr.exports.murmur2=Sn;class Ln{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,p,x,T){this.ids.push(Bn(u)),this.positions.push(p,x,T)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const p=Bn(u);let x=0,T=this.ids.length-1;for(;x<T;){const j=x+T>>1;this.ids[j]>=p?T=j:x=j+1}const D=[];for(;this.ids[x]===p;)D.push({index:this.positions[3*x],start:this.positions[3*x+1],end:this.positions[3*x+2]}),x++;return D}static serialize(u,p){const x=new Float64Array(u.ids),T=new Uint32Array(u.positions);return ji(x,T,0,x.length-1),p&&p.push(x.buffer,T.buffer),{ids:x,positions:T}}static deserialize(u){const p=new Ln;return p.ids=u.ids,p.positions=u.positions,p.indexed=!0,p}}function Bn(f){const u=+f;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:vr.exports(String(f))}function ji(f,u,p,x){for(;p<x;){const T=f[p+x>>1];let D=p-1,j=x+1;for(;;){do D++;while(f[D]<T);do j--;while(f[j]>T);if(D>=j)break;nn(f,D,j),nn(u,3*D,3*j),nn(u,3*D+1,3*j+1),nn(u,3*D+2,3*j+2)}j-p<x-j?(ji(f,u,p,j),p=j+1):(ji(f,u,j+1,x),x=j)}}function nn(f,u,p){const x=f[u];f[u]=f[p],f[p]=x}Pn("FeaturePositionMap",Ln);class Zn{constructor(u,p){this.gl=u.gl,this.location=p}}class mi extends Zn{constructor(u,p){super(u,p),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class pi extends Zn{constructor(u,p){super(u,p),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class ci extends Zn{constructor(u,p){super(u,p),this.current=Le.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const _i=new Float32Array(16);function ai(f){return[Ht(255*f.r,255*f.g),Ht(255*f.b,255*f.a)]}class xn{constructor(u,p,x){this.value=u,this.uniformNames=p.map(T=>`u_${T}`),this.type=x}setUniform(u,p,x){u.set(x.constantOr(this.value))}getBinding(u,p,x){return this.type==="color"?new ci(u,p):new mi(u,p)}}class ca{constructor(u,p){this.uniformNames=p.map(x=>`u_${x}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,p){this.pixelRatioFrom=p.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=p.tlbr,this.patternTo=u.tlbr}setUniform(u,p,x,T){const D=T==="u_pattern_to"?this.patternTo:T==="u_pattern_from"?this.patternFrom:T==="u_pixel_ratio_to"?this.pixelRatioTo:T==="u_pixel_ratio_from"?this.pixelRatioFrom:null;D&&u.set(D)}getBinding(u,p,x){return x.substr(0,9)==="u_pattern"?new pi(u,p):new mi(u,p)}}class Oa{constructor(u,p,x,T){this.expression=u,this.type=x,this.maxValue=0,this.paintVertexAttributes=p.map(D=>({name:`a_${D}`,type:"Float32",components:x==="color"?2:1,offset:0})),this.paintVertexArray=new T}populatePaintArray(u,p,x,T,D){const j=this.paintVertexArray.length,J=this.expression.evaluate(new Ui(0),p,{},T,[],D);this.paintVertexArray.resize(u),this._setPaintValue(j,u,J)}updatePaintArray(u,p,x,T){const D=this.expression.evaluate({zoom:0},x,T);this._setPaintValue(u,p,D)}_setPaintValue(u,p,x){if(this.type==="color"){const T=ai(x);for(let D=u;D<p;D++)this.paintVertexArray.emplace(D,T[0],T[1])}else{for(let T=u;T<p;T++)this.paintVertexArray.emplace(T,x);this.maxValue=Math.max(this.maxValue,Math.abs(x))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class va{constructor(u,p,x,T,D,j){this.expression=u,this.uniformNames=p.map(J=>`u_${J}_t`),this.type=x,this.useIntegerZoom=T,this.zoom=D,this.maxValue=0,this.paintVertexAttributes=p.map(J=>({name:`a_${J}`,type:"Float32",components:x==="color"?4:2,offset:0})),this.paintVertexArray=new j}populatePaintArray(u,p,x,T,D){const j=this.expression.evaluate(new Ui(this.zoom),p,{},T,[],D),J=this.expression.evaluate(new Ui(this.zoom+1),p,{},T,[],D),ie=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(ie,u,j,J)}updatePaintArray(u,p,x,T){const D=this.expression.evaluate({zoom:this.zoom},x,T),j=this.expression.evaluate({zoom:this.zoom+1},x,T);this._setPaintValue(u,p,D,j)}_setPaintValue(u,p,x,T){if(this.type==="color"){const D=ai(x),j=ai(T);for(let J=u;J<p;J++)this.paintVertexArray.emplace(J,D[0],D[1],j[0],j[1])}else{for(let D=u;D<p;D++)this.paintVertexArray.emplace(D,x,T);this.maxValue=Math.max(this.maxValue,Math.abs(x),Math.abs(T))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,p){const x=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,T=P(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);u.set(T)}getBinding(u,p,x){return new mi(u,p)}}class Ha{constructor(u,p,x,T,D,j){this.expression=u,this.type=p,this.useIntegerZoom=x,this.zoom=T,this.layerId=j,this.zoomInPaintVertexArray=new D,this.zoomOutPaintVertexArray=new D}populatePaintArray(u,p,x){const T=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(T,u,p.patterns&&p.patterns[this.layerId],x)}updatePaintArray(u,p,x,T,D){this._setPaintValues(u,p,x.patterns&&x.patterns[this.layerId],D)}_setPaintValues(u,p,x,T){if(!T||!x)return;const{min:D,mid:j,max:J}=x,ie=T[D],le=T[j],me=T[J];if(ie&&le&&me)for(let xe=u;xe<p;xe++)this.zoomInPaintVertexArray.emplace(xe,le.tl[0],le.tl[1],le.br[0],le.br[1],ie.tl[0],ie.tl[1],ie.br[0],ie.br[1],le.pixelRatio,ie.pixelRatio),this.zoomOutPaintVertexArray.emplace(xe,le.tl[0],le.tl[1],le.br[0],le.br[1],me.tl[0],me.tl[1],me.br[0],me.br[1],le.pixelRatio,me.pixelRatio)}upload(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,or.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,or.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class yo{constructor(u,p,x){this.binders={},this._buffers=[];const T=[];for(const D in u.paint._values){if(!x(D))continue;const j=u.paint.get(D);if(!(j instanceof yi&&Gn(j.property.specification)))continue;const J=ys(D,u.type),ie=j.value,le=j.property.specification.type,me=j.property.useIntegerZoom,xe=j.property.specification["property-type"],Re=xe==="cross-faded"||xe==="cross-faded-data-driven";if(ie.kind==="constant")this.binders[D]=Re?new ca(ie.value,J):new xn(ie.value,J,le),T.push(`/u_${D}`);else if(ie.kind==="source"||Re){const De=ho(D,le,"source");this.binders[D]=Re?new Ha(ie,le,me,p,De,u.id):new Oa(ie,J,le,De),T.push(`/a_${D}`)}else{const De=ho(D,le,"composite");this.binders[D]=new va(ie,J,le,me,p,De),T.push(`/z_${D}`)}}this.cacheKey=T.sort().join("")}getMaxValue(u){const p=this.binders[u];return p instanceof Oa||p instanceof va?p.maxValue:0}populatePaintArrays(u,p,x,T,D){for(const j in this.binders){const J=this.binders[j];(J instanceof Oa||J instanceof va||J instanceof Ha)&&J.populatePaintArray(u,p,x,T,D)}}setConstantPatternPositions(u,p){for(const x in this.binders){const T=this.binders[x];T instanceof ca&&T.setConstantPatternPositions(u,p)}}updatePaintArrays(u,p,x,T,D){let j=!1;for(const J in u){const ie=p.getPositions(J);for(const le of ie){const me=x.feature(le.index);for(const xe in this.binders){const Re=this.binders[xe];if((Re instanceof Oa||Re instanceof va||Re instanceof Ha)&&Re.expression.isStateDependent===!0){const De=T.paint.get(xe);Re.expression=De.value,Re.updatePaintArray(le.start,le.end,me,u[J],D),j=!0}}}}return j}defines(){const u=[];for(const p in this.binders){const x=this.binders[p];(x instanceof xn||x instanceof ca)&&u.push(...x.uniformNames.map(T=>`#define HAS_UNIFORM_${T}`))}return u}getBinderAttributes(){const u=[];for(const p in this.binders){const x=this.binders[p];if(x instanceof Oa||x instanceof va)for(let T=0;T<x.paintVertexAttributes.length;T++)u.push(x.paintVertexAttributes[T].name);else if(x instanceof Ha)for(let T=0;T<or.members.length;T++)u.push(or.members[T].name)}return u}getBinderUniforms(){const u=[];for(const p in this.binders){const x=this.binders[p];if(x instanceof xn||x instanceof ca||x instanceof va)for(const T of x.uniformNames)u.push(T)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,p){const x=[];for(const T in this.binders){const D=this.binders[T];if(D instanceof xn||D instanceof ca||D instanceof va){for(const j of D.uniformNames)if(p[j]){const J=D.getBinding(u,p[j],j);x.push({name:j,property:T,binding:J})}}}return x}setUniforms(u,p,x,T){for(const{name:D,property:j,binding:J}of p)this.binders[j].setUniform(J,T,x.get(j),D)}updatePaintBuffers(u){this._buffers=[];for(const p in this.binders){const x=this.binders[p];if(u&&x instanceof Ha){const T=u.fromScale===2?x.zoomInPaintVertexBuffer:x.zoomOutPaintVertexBuffer;T&&this._buffers.push(T)}else(x instanceof Oa||x instanceof va)&&x.paintVertexBuffer&&this._buffers.push(x.paintVertexBuffer)}}upload(u){for(const p in this.binders){const x=this.binders[p];(x instanceof Oa||x instanceof va||x instanceof Ha)&&x.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const p=this.binders[u];(p instanceof Oa||p instanceof va||p instanceof Ha)&&p.destroy()}}}class _a{constructor(u,p,x=()=>!0){this.programConfigurations={};for(const T of u)this.programConfigurations[T.id]=new yo(T,p,x);this.needsUpload=!1,this._featureMap=new Ln,this._bufferOffset=0}populatePaintArrays(u,p,x,T,D,j){for(const J in this.programConfigurations)this.programConfigurations[J].populatePaintArrays(u,p,T,D,j);p.id!==void 0&&this._featureMap.add(p.id,x,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,p,x,T){for(const D of x)this.needsUpload=this.programConfigurations[D.id].updatePaintArrays(u,this._featureMap,p,D,T)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const p in this.programConfigurations)this.programConfigurations[p].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function ys(f,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${u}-`,"").replace(/-/g,"_")]}function ho(f,u,p){const x={color:{source:k,composite:nr},number:{source:gt,composite:k}},T=function(D){return{"line-pattern":{source:He,composite:He},"fill-pattern":{source:He,composite:He},"fill-extrusion-pattern":{source:He,composite:He}}[D]}(f);return T&&T[p]||x[u][p]}Pn("ConstantBinder",xn),Pn("CrossFadedConstantBinder",ca),Pn("SourceExpressionBinder",Oa),Pn("CrossFadedCompositeBinder",Ha),Pn("CompositeExpressionBinder",va),Pn("ProgramConfiguration",yo,{omit:["_buffers"]}),Pn("ProgramConfigurationSet",_a);var fa=8192;const vs=Math.pow(2,14)-1,mu=-vs-1;function ns(f){const u=fa/f.extent,p=f.loadGeometry();for(let x=0;x<p.length;x++){const T=p[x];for(let D=0;D<T.length;D++){const j=T[D],J=Math.round(j.x*u),ie=Math.round(j.y*u);j.x=P(J,mu,vs),j.y=P(ie,mu,vs),(J<j.x||J>j.x+1||ie<j.y||ie>j.y+1)&&N("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return p}function gu(f,u){return{type:f.type,id:f.id,properties:f.properties,geometry:u?ns(f):[]}}function yu(f,u,p,x,T){f.emplaceBack(2*u+(x+1)/2,2*p+(T+1)/2)}class Jl{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(p=>p.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Y,this.indexArray=new st,this.segments=new qt,this.programConfigurations=new _a(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(u,p,x){const T=this.layers[0],D=[];let j=null,J=!1;T.type==="circle"&&(j=T.layout.get("circle-sort-key"),J=!j.isConstant());for(const{feature:ie,id:le,index:me,sourceLayerIndex:xe}of u){const Re=this.layers[0]._featureFilter.needGeometry,De=gu(ie,Re);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),De,x))continue;const Be=J?j.evaluate(De,{},x):void 0,rt={id:le,properties:ie.properties,type:ie.type,sourceLayerIndex:xe,index:me,geometry:Re?De.geometry:ns(ie),patterns:{},sortKey:Be};D.push(rt)}J&&D.sort((ie,le)=>ie.sortKey-le.sortKey);for(const ie of D){const{geometry:le,index:me,sourceLayerIndex:xe}=ie,Re=u[me].feature;this.addFeature(ie,le,me,x),p.featureIndex.insert(Re,le,me,xe,this.index)}}update(u,p,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,p,this.stateDependentLayers,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Nt),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,p,x,T){for(const D of p)for(const j of D){const J=j.x,ie=j.y;if(J<0||J>=fa||ie<0||ie>=fa)continue;const le=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,u.sortKey),me=le.vertexLength;yu(this.layoutVertexArray,J,ie,-1,-1),yu(this.layoutVertexArray,J,ie,1,-1),yu(this.layoutVertexArray,J,ie,1,1),yu(this.layoutVertexArray,J,ie,-1,1),this.indexArray.emplaceBack(me,me+1,me+2),this.indexArray.emplaceBack(me,me+3,me+2),le.vertexLength+=4,le.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,x,{},T)}}function lc(f,u){for(let p=0;p<f.length;p++)if(Ja(u,f[p]))return!0;for(let p=0;p<u.length;p++)if(Ja(f,u[p]))return!0;return!!Ic(f,u)}function Lh(f,u,p){return!!Ja(f,u)||!!zl(u,f,p)}function nf(f,u){if(f.length===1)return Mc(u,f[0]);for(let p=0;p<u.length;p++){const x=u[p];for(let T=0;T<x.length;T++)if(Ja(f,x[T]))return!0}for(let p=0;p<f.length;p++)if(Mc(u,f[p]))return!0;for(let p=0;p<u.length;p++)if(Ic(f,u[p]))return!0;return!1}function dl(f,u,p){if(f.length>1){if(Ic(f,u))return!0;for(let x=0;x<u.length;x++)if(zl(u[x],f,p))return!0}for(let x=0;x<f.length;x++)if(zl(f[x],u,p))return!0;return!1}function Ic(f,u){if(f.length===0||u.length===0)return!1;for(let p=0;p<f.length-1;p++){const x=f[p],T=f[p+1];for(let D=0;D<u.length-1;D++)if(Vo(x,T,u[D],u[D+1]))return!0}return!1}function Vo(f,u,p,x){return z(f,p,x)!==z(u,p,x)&&z(f,u,p)!==z(f,u,x)}function zl(f,u,p){const x=p*p;if(u.length===1)return f.distSqr(u[0])<x;for(let T=1;T<u.length;T++)if(Ll(f,u[T-1],u[T])<x)return!0;return!1}function Ll(f,u,p){const x=u.distSqr(p);if(x===0)return f.distSqr(u);const T=((f.x-u.x)*(p.x-u.x)+(f.y-u.y)*(p.y-u.y))/x;return f.distSqr(T<0?u:T>1?p:p.sub(u)._mult(T)._add(u))}function Mc(f,u){let p,x,T,D=!1;for(let j=0;j<f.length;j++){p=f[j];for(let J=0,ie=p.length-1;J<p.length;ie=J++)x=p[J],T=p[ie],x.y>u.y!=T.y>u.y&&u.x<(T.x-x.x)*(u.y-x.y)/(T.y-x.y)+x.x&&(D=!D)}return D}function Ja(f,u){let p=!1;for(let x=0,T=f.length-1;x<f.length;T=x++){const D=f[x],j=f[T];D.y>u.y!=j.y>u.y&&u.x<(j.x-D.x)*(u.y-D.y)/(j.y-D.y)+D.x&&(p=!p)}return p}function vo(f,u,p){const x=p[0],T=p[2];if(f.x<x.x&&u.x<x.x||f.x>T.x&&u.x>T.x||f.y<x.y&&u.y<x.y||f.y>T.y&&u.y>T.y)return!1;const D=z(f,u,p[0]);return D!==z(f,u,p[1])||D!==z(f,u,p[2])||D!==z(f,u,p[3])}function qo(f,u,p){const x=u.paint.get(f).value;return x.kind==="constant"?x.value:p.programConfigurations.get(u.id).getMaxValue(f)}function qu(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function af(f,u,p,x,T){if(!u[0]&&!u[1])return f;const D=it.convert(u)._mult(T);p==="viewport"&&D._rotate(-x);const j=[];for(let J=0;J<f.length;J++)j.push(f[J].sub(D));return j}Pn("CircleBucket",Jl,{omit:["layers"]});const hd=new Va({"circle-sort-key":new zn(Mt.layout_circle["circle-sort-key"])});var $h={paint:new Va({"circle-radius":new zn(Mt.paint_circle["circle-radius"]),"circle-color":new zn(Mt.paint_circle["circle-color"]),"circle-blur":new zn(Mt.paint_circle["circle-blur"]),"circle-opacity":new zn(Mt.paint_circle["circle-opacity"]),"circle-translate":new Tn(Mt.paint_circle["circle-translate"]),"circle-translate-anchor":new Tn(Mt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Tn(Mt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Tn(Mt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new zn(Mt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new zn(Mt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new zn(Mt.paint_circle["circle-stroke-opacity"])}),layout:hd},Jo=1e-6,_s=typeof Float32Array<"u"?Float32Array:Array;function uc(){var f=new _s(9);return _s!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function of(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function ym(f,u,p){var x=u[0],T=u[1],D=u[2],j=u[3],J=u[4],ie=u[5],le=u[6],me=u[7],xe=u[8],Re=u[9],De=u[10],Be=u[11],rt=u[12],ot=u[13],Pt=u[14],kt=u[15],At=p[0],$t=p[1],sr=p[2],Wt=p[3];return f[0]=At*x+$t*J+sr*xe+Wt*rt,f[1]=At*T+$t*ie+sr*Re+Wt*ot,f[2]=At*D+$t*le+sr*De+Wt*Pt,f[3]=At*j+$t*me+sr*Be+Wt*kt,f[4]=(At=p[4])*x+($t=p[5])*J+(sr=p[6])*xe+(Wt=p[7])*rt,f[5]=At*T+$t*ie+sr*Re+Wt*ot,f[6]=At*D+$t*le+sr*De+Wt*Pt,f[7]=At*j+$t*me+sr*Be+Wt*kt,f[8]=(At=p[8])*x+($t=p[9])*J+(sr=p[10])*xe+(Wt=p[11])*rt,f[9]=At*T+$t*ie+sr*Re+Wt*ot,f[10]=At*D+$t*le+sr*De+Wt*Pt,f[11]=At*j+$t*me+sr*Be+Wt*kt,f[12]=(At=p[12])*x+($t=p[13])*J+(sr=p[14])*xe+(Wt=p[15])*rt,f[13]=At*T+$t*ie+sr*Re+Wt*ot,f[14]=At*D+$t*le+sr*De+Wt*Pt,f[15]=At*j+$t*me+sr*Be+Wt*kt,f}Math.hypot||(Math.hypot=function(){for(var f=0,u=arguments.length;u--;)f+=arguments[u]*arguments[u];return Math.sqrt(f)});var Hf,Nh=ym;function Hs(){var f=new _s(3);return _s!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function cv(f,u,p){var x=new _s(3);return x[0]=f,x[1]=u,x[2]=p,x}function Bh(f,u,p){var x=u[0],T=u[1],D=u[2],j=u[3];return f[0]=p[0]*x+p[4]*T+p[8]*D+p[12]*j,f[1]=p[1]*x+p[5]*T+p[9]*D+p[13]*j,f[2]=p[2]*x+p[6]*T+p[10]*D+p[14]*j,f[3]=p[3]*x+p[7]*T+p[11]*D+p[15]*j,f}function Og(){var f=new _s(4);return _s!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function vm(f,u){const p=Bh([],[f.x,f.y,0,1],u);return new it(p[0]/p[3],p[1]/p[3])}Hs(),Hf=new _s(4),_s!=Float32Array&&(Hf[0]=0,Hf[1]=0,Hf[2]=0,Hf[3]=0),Hs(),cv(1,0,0),cv(0,1,0),Og(),Og(),uc(),function(){var f;f=new _s(2),_s!=Float32Array&&(f[0]=0,f[1]=0)}();class fv extends Jl{}Pn("HeatmapBucket",fv,{omit:["layers"]});var Rg={paint:new Va({"heatmap-radius":new zn(Mt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new zn(Mt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Tn(Mt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new jo(Mt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Tn(Mt.paint_heatmap["heatmap-opacity"])})};function ta(f,{width:u,height:p},x,T){if(T){if(T instanceof Uint8ClampedArray)T=new Uint8Array(T.buffer);else if(T.length!==u*p*x)throw new RangeError(`mismatched image size. expected: ${T.length} but got: ${u*p*x}`)}else T=new Uint8Array(u*p*x);return f.width=u,f.height=p,f.data=T,f}function hv(f,{width:u,height:p},x){if(u===f.width&&p===f.height)return;const T=ta({},{width:u,height:p},x);Pp(f,T,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,u),height:Math.min(f.height,p)},x),f.width=u,f.height=p,f.data=T.data}function Pp(f,u,p,x,T,D){if(T.width===0||T.height===0)return u;if(T.width>f.width||T.height>f.height||p.x>f.width-T.width||p.y>f.height-T.height)throw new RangeError("out of range source coordinates for image copy");if(T.width>u.width||T.height>u.height||x.x>u.width-T.width||x.y>u.height-T.height)throw new RangeError("out of range destination coordinates for image copy");const j=f.data,J=u.data;if(j===J)throw new Error("srcData equals dstData, so image is already copied");for(let ie=0;ie<T.height;ie++){const le=((p.y+ie)*f.width+p.x)*D,me=((x.y+ie)*u.width+x.x)*D;for(let xe=0;xe<T.width*D;xe++)J[me+xe]=j[le+xe]}return u}class Oc{constructor(u,p){ta(this,u,1,p)}resize(u){hv(this,u,1)}clone(){return new Oc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,p,x,T,D){Pp(u,p,x,T,D,1)}}class is{constructor(u,p){ta(this,u,4,p)}resize(u){hv(this,u,4)}replace(u,p){p?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new is({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,p,x,T,D){Pp(u,p,x,T,D,4)}}function Tp(f){const u={},p=f.resolution||256,x=f.clips?f.clips.length:1,T=f.image||new is({width:p,height:x});if(Math.log(p)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${p}`);const D=(j,J,ie)=>{u[f.evaluationKey]=ie;const le=f.expression.evaluate(u);T.data[j+J+0]=Math.floor(255*le.r/le.a),T.data[j+J+1]=Math.floor(255*le.g/le.a),T.data[j+J+2]=Math.floor(255*le.b/le.a),T.data[j+J+3]=Math.floor(255*le.a)};if(f.clips)for(let j=0,J=0;j<x;++j,J+=4*p)for(let ie=0,le=0;ie<p;ie++,le+=4){const me=ie/(p-1),{start:xe,end:Re}=f.clips[j];D(J,le,xe*(1-me)+Re*me)}else for(let j=0,J=0;j<p;j++,J+=4)D(0,J,j/(p-1));return T}Pn("AlphaImage",Oc),Pn("RGBAImage",is);var Z0={paint:new Va({"hillshade-illumination-direction":new Tn(Mt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Tn(Mt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Tn(Mt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Tn(Mt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Tn(Mt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Tn(Mt.paint_hillshade["hillshade-accent-color"])})};const Gu=ua([{name:"a_pos",components:2,type:"Int16"}],4),{members:X0}=Gu;var Fh={exports:{}};function Ap(f,u,p){p=p||2;var x,T,D,j,J,ie,le,me=u&&u.length,xe=me?u[0]*p:f.length,Re=Dg(f,0,xe,p,!0),De=[];if(!Re||Re.next===Re.prev)return De;if(me&&(Re=function(rt,ot,Pt,kt){var At,$t,sr,Wt=[];for(At=0,$t=ot.length;At<$t;At++)(sr=Dg(rt,ot[At]*kt,At<$t-1?ot[At+1]*kt:rt.length,kt,!1))===sr.next&&(sr.steiner=!0),Wt.push(Uh(sr));for(Wt.sort(pd),At=0;At<Wt.length;At++)Pt=_m(Wt[At],Pt);return Pt}(f,u,Re,p)),f.length>80*p){x=D=f[0],T=j=f[1];for(var Be=p;Be<xe;Be+=p)(J=f[Be])<x&&(x=J),(ie=f[Be+1])<T&&(T=ie),J>D&&(D=J),ie>j&&(j=ie);le=(le=Math.max(D-x,j-T))!==0?32767/le:0}return Os(Re,De,p,x,T,le,0),De}function Dg(f,u,p,x,T){var D,j;if(T===eu(f,u,p,x)>0)for(D=u;D<p;D+=x)j=zg(D,f[D],f[D+1],j);else for(D=p-x;D>=u;D-=x)j=zg(D,f[D],f[D+1],j);return j&&jh(j,j.next)&&(Jf(j),j=j.next),j}function Wf(f,u){if(!f)return f;u||(u=f);var p,x=f;do if(p=!1,x.steiner||!jh(x,x.next)&&Ra(x.prev,x,x.next)!==0)x=x.next;else{if(Jf(x),(x=u=x.prev)===x.next)break;p=!0}while(p||x!==u);return u}function Os(f,u,p,x,T,D,j){if(f){!j&&D&&function(me,xe,Re,De){var Be=me;do Be.z===0&&(Be.z=Kf(Be.x,Be.y,xe,Re,De)),Be.prevZ=Be.prev,Be.nextZ=Be.next,Be=Be.next;while(Be!==me);Be.prevZ.nextZ=null,Be.prevZ=null,function(rt){var ot,Pt,kt,At,$t,sr,Wt,zr,Zr=1;do{for(Pt=rt,rt=null,$t=null,sr=0;Pt;){for(sr++,kt=Pt,Wt=0,ot=0;ot<Zr&&(Wt++,kt=kt.nextZ);ot++);for(zr=Zr;Wt>0||zr>0&&kt;)Wt!==0&&(zr===0||!kt||Pt.z<=kt.z)?(At=Pt,Pt=Pt.nextZ,Wt--):(At=kt,kt=kt.nextZ,zr--),$t?$t.nextZ=At:rt=At,At.prevZ=$t,$t=At;Pt=kt}$t.nextZ=null,Zr*=2}while(sr>1)}(Be)}(f,x,T,D);for(var J,ie,le=f;f.prev!==f.next;)if(J=f.prev,ie=f.next,D?Xf(f,x,T,D):Zf(f))u.push(J.i/p|0),u.push(f.i/p|0),u.push(ie.i/p|0),Jf(f),f=ie.next,le=ie.next;else if((f=ie)===le){j?j===1?Os(f=pv(Wf(f),u,p),u,p,x,T,D,2):j===2&&_o(f,u,p,x,T,D):Os(Wf(f),u,p,x,T,D,1);break}}}function Zf(f){var u=f.prev,p=f,x=f.next;if(Ra(u,p,x)>=0)return!1;for(var T=u.x,D=p.x,j=x.x,J=u.y,ie=p.y,le=x.y,me=T<D?T<j?T:j:D<j?D:j,xe=J<ie?J<le?J:le:ie<le?ie:le,Re=T>D?T>j?T:j:D>j?D:j,De=J>ie?J>le?J:le:ie>le?ie:le,Be=x.next;Be!==u;){if(Be.x>=me&&Be.x<=Re&&Be.y>=xe&&Be.y<=De&&Ql(T,J,D,ie,j,le,Be.x,Be.y)&&Ra(Be.prev,Be,Be.next)>=0)return!1;Be=Be.next}return!0}function Xf(f,u,p,x){var T=f.prev,D=f,j=f.next;if(Ra(T,D,j)>=0)return!1;for(var J=T.x,ie=D.x,le=j.x,me=T.y,xe=D.y,Re=j.y,De=J<ie?J<le?J:le:ie<le?ie:le,Be=me<xe?me<Re?me:Re:xe<Re?xe:Re,rt=J>ie?J>le?J:le:ie>le?ie:le,ot=me>xe?me>Re?me:Re:xe>Re?xe:Re,Pt=Kf(De,Be,u,p,x),kt=Kf(rt,ot,u,p,x),At=f.prevZ,$t=f.nextZ;At&&At.z>=Pt&&$t&&$t.z<=kt;){if(At.x>=De&&At.x<=rt&&At.y>=Be&&At.y<=ot&&At!==T&&At!==j&&Ql(J,me,ie,xe,le,Re,At.x,At.y)&&Ra(At.prev,At,At.next)>=0||(At=At.prevZ,$t.x>=De&&$t.x<=rt&&$t.y>=Be&&$t.y<=ot&&$t!==T&&$t!==j&&Ql(J,me,ie,xe,le,Re,$t.x,$t.y)&&Ra($t.prev,$t,$t.next)>=0))return!1;$t=$t.nextZ}for(;At&&At.z>=Pt;){if(At.x>=De&&At.x<=rt&&At.y>=Be&&At.y<=ot&&At!==T&&At!==j&&Ql(J,me,ie,xe,le,Re,At.x,At.y)&&Ra(At.prev,At,At.next)>=0)return!1;At=At.prevZ}for(;$t&&$t.z<=kt;){if($t.x>=De&&$t.x<=rt&&$t.y>=Be&&$t.y<=ot&&$t!==T&&$t!==j&&Ql(J,me,ie,xe,le,Re,$t.x,$t.y)&&Ra($t.prev,$t,$t.next)>=0)return!1;$t=$t.nextZ}return!0}function pv(f,u,p){var x=f;do{var T=x.prev,D=x.next.next;!jh(T,D)&&md(T,x,x.next,D)&&gd(T,D)&&gd(D,T)&&(u.push(T.i/p|0),u.push(x.i/p|0),u.push(D.i/p|0),Jf(x),Jf(x.next),x=f=D),x=x.next}while(x!==f);return Wf(x)}function _o(f,u,p,x,T,D){var j=f;do{for(var J=j.next.next;J!==j.prev;){if(j.i!==J.i&&dv(j,J)){var ie=bm(j,J);return j=Wf(j,j.next),ie=Wf(ie,ie.next),Os(j,u,p,x,T,D,0),void Os(ie,u,p,x,T,D,0)}J=J.next}j=j.next}while(j!==f)}function pd(f,u){return f.x-u.x}function _m(f,u){var p=function(T,D){var j,J=D,ie=T.x,le=T.y,me=-1/0;do{if(le<=J.y&&le>=J.next.y&&J.next.y!==J.y){var xe=J.x+(le-J.y)*(J.next.x-J.x)/(J.next.y-J.y);if(xe<=ie&&xe>me&&(me=xe,j=J.x<J.next.x?J:J.next,xe===ie))return j}J=J.next}while(J!==D);if(!j)return null;var Re,De=j,Be=j.x,rt=j.y,ot=1/0;J=j;do ie>=J.x&&J.x>=Be&&ie!==J.x&&Ql(le<rt?ie:me,le,Be,rt,le<rt?me:ie,le,J.x,J.y)&&(Re=Math.abs(le-J.y)/(ie-J.x),gd(J,T)&&(Re<ot||Re===ot&&(J.x>j.x||J.x===j.x&&dd(j,J)))&&(j=J,ot=Re)),J=J.next;while(J!==De);return j}(f,u);if(!p)return u;var x=bm(p,f);return Wf(x,x.next),Wf(p,p.next)}function dd(f,u){return Ra(f.prev,f,u.prev)<0&&Ra(u.next,f,f.next)<0}function Kf(f,u,p,x,T){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-p)*T|0)|f<<8))|f<<4))|f<<2))|f<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-x)*T|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function Uh(f){var u=f,p=f;do(u.x<p.x||u.x===p.x&&u.y<p.y)&&(p=u),u=u.next;while(u!==f);return p}function Ql(f,u,p,x,T,D,j,J){return(T-j)*(u-J)>=(f-j)*(D-J)&&(f-j)*(x-J)>=(p-j)*(u-J)&&(p-j)*(D-J)>=(T-j)*(x-J)}function dv(f,u){return f.next.i!==u.i&&f.prev.i!==u.i&&!function(p,x){var T=p;do{if(T.i!==p.i&&T.next.i!==p.i&&T.i!==x.i&&T.next.i!==x.i&&md(T,T.next,p,x))return!0;T=T.next}while(T!==p);return!1}(f,u)&&(gd(f,u)&&gd(u,f)&&function(p,x){var T=p,D=!1,j=(p.x+x.x)/2,J=(p.y+x.y)/2;do T.y>J!=T.next.y>J&&T.next.y!==T.y&&j<(T.next.x-T.x)*(J-T.y)/(T.next.y-T.y)+T.x&&(D=!D),T=T.next;while(T!==p);return D}(f,u)&&(Ra(f.prev,f,u.prev)||Ra(f,u.prev,u))||jh(f,u)&&Ra(f.prev,f,f.next)>0&&Ra(u.prev,u,u.next)>0)}function Ra(f,u,p){return(u.y-f.y)*(p.x-u.x)-(u.x-f.x)*(p.y-u.y)}function jh(f,u){return f.x===u.x&&f.y===u.y}function md(f,u,p,x){var T=Yf(Ra(f,u,p)),D=Yf(Ra(f,u,x)),j=Yf(Ra(p,x,f)),J=Yf(Ra(p,x,u));return T!==D&&j!==J||!(T!==0||!kp(f,p,u))||!(D!==0||!kp(f,x,u))||!(j!==0||!kp(p,f,x))||!(J!==0||!kp(p,u,x))}function kp(f,u,p){return u.x<=Math.max(f.x,p.x)&&u.x>=Math.min(f.x,p.x)&&u.y<=Math.max(f.y,p.y)&&u.y>=Math.min(f.y,p.y)}function Yf(f){return f>0?1:f<0?-1:0}function gd(f,u){return Ra(f.prev,f,f.next)<0?Ra(f,u,f.next)>=0&&Ra(f,f.prev,u)>=0:Ra(f,u,f.prev)<0||Ra(f,f.next,u)<0}function bm(f,u){var p=new yd(f.i,f.x,f.y),x=new yd(u.i,u.x,u.y),T=f.next,D=u.prev;return f.next=u,u.prev=f,p.next=T,T.prev=p,x.next=p,p.prev=x,D.next=x,x.prev=D,x}function zg(f,u,p,x){var T=new yd(f,u,p);return x?(T.next=x.next,T.prev=x,x.next.prev=T,x.next=T):(T.prev=T,T.next=T),T}function Jf(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function yd(f,u,p){this.i=f,this.x=u,this.y=p,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function eu(f,u,p,x){for(var T=0,D=u,j=p-x;D<p;D+=x)T+=(f[j]-f[D])*(f[D+1]+f[j+1]),j=D;return T}function mv(f,u,p,x,T){$l(f,u,p||0,x||f.length-1,T||K0)}function $l(f,u,p,x,T){for(;x>p;){if(x-p>600){var D=x-p+1,j=u-p+1,J=Math.log(D),ie=.5*Math.exp(2*J/3),le=.5*Math.sqrt(J*ie*(D-ie)/D)*(j-D/2<0?-1:1);$l(f,u,Math.max(p,Math.floor(u-j*ie/D+le)),Math.min(x,Math.floor(u+(D-j)*ie/D+le)),T)}var me=f[u],xe=p,Re=x;for(tu(f,p,u),T(f[x],me)>0&&tu(f,p,x);xe<Re;){for(tu(f,xe,Re),xe++,Re--;T(f[xe],me)<0;)xe++;for(;T(f[Re],me)>0;)Re--}T(f[p],me)===0?tu(f,p,Re):tu(f,++Re,x),Re<=u&&(p=Re+1),u<=Re&&(x=Re-1)}}function tu(f,u,p){var x=f[u];f[u]=f[p],f[p]=x}function K0(f,u){return f<u?-1:f>u?1:0}function xm(f,u){const p=f.length;if(p<=1)return[f];const x=[];let T,D;for(let j=0;j<p;j++){const J=X(f[j]);J!==0&&(f[j].area=Math.abs(J),D===void 0&&(D=J<0),D===J<0?(T&&x.push(T),T=[f[j]]):T.push(f[j]))}if(T&&x.push(T),u>1)for(let j=0;j<x.length;j++)x[j].length<=u||(mv(x[j],u,1,x[j].length-1,sf),x[j]=x[j].slice(0,u));return x}function sf(f,u){return u.area-f.area}function Qf(f,u,p){const x=p.patternDependencies;let T=!1;for(const D of u){const j=D.paint.get(`${f}-pattern`);j.isConstant()||(T=!0);const J=j.constantOr(null);J&&(T=!0,x[J.to]=!0,x[J.from]=!0)}return T}function wm(f,u,p,x,T){const D=T.patternDependencies;for(const j of u){const J=j.paint.get(`${f}-pattern`).value;if(J.kind!=="constant"){let ie=J.evaluate({zoom:x-1},p,{},T.availableImages),le=J.evaluate({zoom:x},p,{},T.availableImages),me=J.evaluate({zoom:x+1},p,{},T.availableImages);ie=ie&&ie.name?ie.name:ie,le=le&&le.name?le.name:le,me=me&&me.name?me.name:me,D[ie]=!0,D[le]=!0,D[me]=!0,p.patterns[j.id]={min:ie,mid:le,max:me}}}return p}Fh.exports=Ap,Fh.exports.default=Ap,Ap.deviation=function(f,u,p,x){var T=u&&u.length,D=Math.abs(eu(f,0,T?u[0]*p:f.length,p));if(T)for(var j=0,J=u.length;j<J;j++)D-=Math.abs(eu(f,u[j]*p,j<J-1?u[j+1]*p:f.length,p));var ie=0;for(j=0;j<x.length;j+=3){var le=x[j]*p,me=x[j+1]*p,xe=x[j+2]*p;ie+=Math.abs((f[le]-f[xe])*(f[me+1]-f[le+1])-(f[le]-f[me])*(f[xe+1]-f[le+1]))}return D===0&&ie===0?0:Math.abs((ie-D)/D)},Ap.flatten=function(f){for(var u=f[0][0].length,p={vertices:[],holes:[],dimensions:u},x=0,T=0;T<f.length;T++){for(var D=0;D<f[T].length;D++)for(var j=0;j<u;j++)p.vertices.push(f[T][D][j]);T>0&&p.holes.push(x+=f[T-1].length)}return p};class vd{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(p=>p.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ee,this.indexArray=new st,this.indexArray2=new wt,this.programConfigurations=new _a(u.layers,u.zoom),this.segments=new qt,this.segments2=new qt,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(u,p,x){this.hasPattern=Qf("fill",this.layers,p);const T=this.layers[0].layout.get("fill-sort-key"),D=!T.isConstant(),j=[];for(const{feature:J,id:ie,index:le,sourceLayerIndex:me}of u){const xe=this.layers[0]._featureFilter.needGeometry,Re=gu(J,xe);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),Re,x))continue;const De=D?T.evaluate(Re,{},x,p.availableImages):void 0,Be={id:ie,properties:J.properties,type:J.type,sourceLayerIndex:me,index:le,geometry:xe?Re.geometry:ns(J),patterns:{},sortKey:De};j.push(Be)}D&&j.sort((J,ie)=>J.sortKey-ie.sortKey);for(const J of j){const{geometry:ie,index:le,sourceLayerIndex:me}=J;if(this.hasPattern){const xe=wm("fill",this.layers,J,this.zoom,p);this.patternFeatures.push(xe)}else this.addFeature(J,ie,le,x,{});p.featureIndex.insert(u[le].feature,ie,le,me,this.index)}}update(u,p,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,p,this.stateDependentLayers,x)}addFeatures(u,p,x){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,p,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,X0),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,p,x,T,D){for(const j of xm(p,500)){let J=0;for(const De of j)J+=De.length;const ie=this.segments.prepareSegment(J,this.layoutVertexArray,this.indexArray),le=ie.vertexLength,me=[],xe=[];for(const De of j){if(De.length===0)continue;De!==j[0]&&xe.push(me.length/2);const Be=this.segments2.prepareSegment(De.length,this.layoutVertexArray,this.indexArray2),rt=Be.vertexLength;this.layoutVertexArray.emplaceBack(De[0].x,De[0].y),this.indexArray2.emplaceBack(rt+De.length-1,rt),me.push(De[0].x),me.push(De[0].y);for(let ot=1;ot<De.length;ot++)this.layoutVertexArray.emplaceBack(De[ot].x,De[ot].y),this.indexArray2.emplaceBack(rt+ot-1,rt+ot),me.push(De[ot].x),me.push(De[ot].y);Be.vertexLength+=De.length,Be.primitiveLength+=De.length}const Re=Fh.exports(me,xe);for(let De=0;De<Re.length;De+=3)this.indexArray.emplaceBack(le+Re[De],le+Re[De+1],le+Re[De+2]);ie.vertexLength+=J,ie.primitiveLength+=Re.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,x,D,T)}}Pn("FillBucket",vd,{omit:["layers","patternFeatures"]});const gv=new Va({"fill-sort-key":new zn(Mt.layout_fill["fill-sort-key"])});var yv={paint:new Va({"fill-antialias":new Tn(Mt.paint_fill["fill-antialias"]),"fill-opacity":new zn(Mt.paint_fill["fill-opacity"]),"fill-color":new zn(Mt.paint_fill["fill-color"]),"fill-outline-color":new zn(Mt.paint_fill["fill-outline-color"]),"fill-translate":new Tn(Mt.paint_fill["fill-translate"]),"fill-translate-anchor":new Tn(Mt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Uo(Mt.paint_fill["fill-pattern"])}),layout:gv};const Ip=ua([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Rc=ua([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Y0}=Ip;var cc={},Mp=it,Nl=Vh;function Vh(f,u,p,x,T){this.properties={},this.extent=p,this.type=0,this._pbf=f,this._geometry=-1,this._keys=x,this._values=T,f.readFields(Sm,this,u)}function Sm(f,u,p){f==1?u.id=p.readVarint():f==2?function(x,T){for(var D=x.readVarint()+x.pos;x.pos<D;){var j=T._keys[x.readVarint()],J=T._values[x.readVarint()];T.properties[j]=J}}(p,u):f==3?u.type=p.readVarint():f==4&&(u._geometry=p.pos)}function Lg(f){for(var u,p,x=0,T=0,D=f.length,j=D-1;T<D;j=T++)x+=((p=f[j]).x-(u=f[T]).x)*(u.y+p.y);return x}Vh.types=["Unknown","Point","LineString","Polygon"],Vh.prototype.loadGeometry=function(){var f=this._pbf;f.pos=this._geometry;for(var u,p=f.readVarint()+f.pos,x=1,T=0,D=0,j=0,J=[];f.pos<p;){if(T<=0){var ie=f.readVarint();x=7&ie,T=ie>>3}if(T--,x===1||x===2)D+=f.readSVarint(),j+=f.readSVarint(),x===1&&(u&&J.push(u),u=[]),u.push(new Mp(D,j));else{if(x!==7)throw new Error("unknown command "+x);u&&u.push(u[0].clone())}}return u&&J.push(u),J},Vh.prototype.bbox=function(){var f=this._pbf;f.pos=this._geometry;for(var u=f.readVarint()+f.pos,p=1,x=0,T=0,D=0,j=1/0,J=-1/0,ie=1/0,le=-1/0;f.pos<u;){if(x<=0){var me=f.readVarint();p=7&me,x=me>>3}if(x--,p===1||p===2)(T+=f.readSVarint())<j&&(j=T),T>J&&(J=T),(D+=f.readSVarint())<ie&&(ie=D),D>le&&(le=D);else if(p!==7)throw new Error("unknown command "+p)}return[j,ie,J,le]},Vh.prototype.toGeoJSON=function(f,u,p){var x,T,D=this.extent*Math.pow(2,p),j=this.extent*f,J=this.extent*u,ie=this.loadGeometry(),le=Vh.types[this.type];function me(De){for(var Be=0;Be<De.length;Be++){var rt=De[Be];De[Be]=[360*(rt.x+j)/D-180,360/Math.PI*Math.atan(Math.exp((180-360*(rt.y+J)/D)*Math.PI/180))-90]}}switch(this.type){case 1:var xe=[];for(x=0;x<ie.length;x++)xe[x]=ie[x][0];me(ie=xe);break;case 2:for(x=0;x<ie.length;x++)me(ie[x]);break;case 3:for(ie=function(De){var Be=De.length;if(Be<=1)return[De];for(var rt,ot,Pt=[],kt=0;kt<Be;kt++){var At=Lg(De[kt]);At!==0&&(ot===void 0&&(ot=At<0),ot===At<0?(rt&&Pt.push(rt),rt=[De[kt]]):rt.push(De[kt]))}return rt&&Pt.push(rt),Pt}(ie),x=0;x<ie.length;x++)for(T=0;T<ie[x].length;T++)me(ie[x][T])}ie.length===1?ie=ie[0]:le="Multi"+le;var Re={type:"Feature",geometry:{type:le,coordinates:ie},properties:this.properties};return"id"in this&&(Re.id=this.id),Re};var eh=Nl,$g=Ng;function Ng(f,u){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(Em,this,u),this.length=this._features.length}function Em(f,u,p){f===15?u.version=p.readVarint():f===1?u.name=p.readString():f===5?u.extent=p.readVarint():f===2?u._features.push(p.pos):f===3?u._keys.push(p.readString()):f===4&&u._values.push(function(x){for(var T=null,D=x.readVarint()+x.pos;x.pos<D;){var j=x.readVarint()>>3;T=j===1?x.readString():j===2?x.readFloat():j===3?x.readDouble():j===4?x.readVarint64():j===5?x.readVarint():j===6?x.readSVarint():j===7?x.readBoolean():null}return T}(p))}Ng.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var u=this._pbf.readVarint()+this._pbf.pos;return new eh(this._pbf,u,this.extent,this._keys,this._values)};var vv=$g;function Bg(f,u,p){if(f===3){var x=new vv(p,p.readVarint()+p.pos);x.length&&(u[x.name]=x)}}cc.VectorTile=function(f,u){this.layers=f.readFields(Bg,{},u)},cc.VectorTileFeature=Nl,cc.VectorTileLayer=$g;const _v=cc.VectorTileFeature.types,bs=Math.pow(2,13);function vu(f,u,p,x,T,D,j,J){f.emplaceBack(u,p,2*Math.floor(x*bs)+j,T*bs*2,D*bs*2,Math.round(J))}class _d{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(p=>p.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new se,this.centroidVertexArray=new U,this.indexArray=new st,this.programConfigurations=new _a(u.layers,u.zoom),this.segments=new qt,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(u,p,x){this.features=[],this.hasPattern=Qf("fill-extrusion",this.layers,p);for(const{feature:T,id:D,index:j,sourceLayerIndex:J}of u){const ie=this.layers[0]._featureFilter.needGeometry,le=gu(T,ie);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),le,x))continue;const me={id:D,sourceLayerIndex:J,index:j,geometry:ie?le.geometry:ns(T),properties:T.properties,type:T.type,patterns:{}};this.hasPattern?this.features.push(wm("fill-extrusion",this.layers,me,this.zoom,p)):this.addFeature(me,me.geometry,j,x,{}),p.featureIndex.insert(T,me.geometry,j,J,this.index,!0)}}addFeatures(u,p,x){for(const T of this.features){const{geometry:D}=T;this.addFeature(T,D,T.index,p,x)}}update(u,p,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,p,this.stateDependentLayers,x)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Y0),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,Rc.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,p,x,T,D){const j={x:0,y:0,vertexCount:0};for(const J of xm(p,500)){let ie=0;for(const Be of J)ie+=Be.length;let le=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Be of J){if(Be.length===0||J0(Be))continue;let rt=0;for(let ot=0;ot<Be.length;ot++){const Pt=Be[ot];if(ot>=1){const kt=Be[ot-1];if(!Fg(Pt,kt)){le.vertexLength+4>qt.MAX_VERTEX_ARRAY_LENGTH&&(le=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const At=Pt.sub(kt)._perp()._unit(),$t=kt.dist(Pt);rt+$t>32768&&(rt=0),vu(this.layoutVertexArray,Pt.x,Pt.y,At.x,At.y,0,0,rt),vu(this.layoutVertexArray,Pt.x,Pt.y,At.x,At.y,0,1,rt),j.x+=2*Pt.x,j.y+=2*Pt.y,j.vertexCount+=2,rt+=$t,vu(this.layoutVertexArray,kt.x,kt.y,At.x,At.y,0,0,rt),vu(this.layoutVertexArray,kt.x,kt.y,At.x,At.y,0,1,rt),j.x+=2*kt.x,j.y+=2*kt.y,j.vertexCount+=2;const sr=le.vertexLength;this.indexArray.emplaceBack(sr,sr+2,sr+1),this.indexArray.emplaceBack(sr+1,sr+2,sr+3),le.vertexLength+=4,le.primitiveLength+=2}}}}if(le.vertexLength+ie>qt.MAX_VERTEX_ARRAY_LENGTH&&(le=this.segments.prepareSegment(ie,this.layoutVertexArray,this.indexArray)),_v[u.type]!=="Polygon")continue;const me=[],xe=[],Re=le.vertexLength;for(const Be of J)if(Be.length!==0){Be!==J[0]&&xe.push(me.length/2);for(let rt=0;rt<Be.length;rt++){const ot=Be[rt];vu(this.layoutVertexArray,ot.x,ot.y,0,0,1,1,0),j.x+=ot.x,j.y+=ot.y,j.vertexCount+=1,me.push(ot.x),me.push(ot.y)}}const De=Fh.exports(me,xe);for(let Be=0;Be<De.length;Be+=3)this.indexArray.emplaceBack(Re+De[Be],Re+De[Be+2],Re+De[Be+1]);le.primitiveLength+=De.length/3,le.vertexLength+=ie}for(let J=0;J<j.vertexCount;J++)this.centroidVertexArray.emplaceBack(Math.floor(j.x/j.vertexCount),Math.floor(j.y/j.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,x,D,T)}}function Fg(f,u){return f.x===u.x&&(f.x<0||f.x>fa)||f.y===u.y&&(f.y<0||f.y>fa)}function J0(f){return f.every(u=>u.x<0)||f.every(u=>u.x>fa)||f.every(u=>u.y<0)||f.every(u=>u.y>fa)}Pn("FillExtrusionBucket",_d,{omit:["layers","features"]});var Ug={paint:new Va({"fill-extrusion-opacity":new Tn(Mt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new zn(Mt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Tn(Mt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Tn(Mt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Uo(Mt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new zn(Mt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new zn(Mt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Tn(Mt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function bd(f,u){return f.x*u.x+f.y*u.y}function bv(f,u){if(f.length===1){let p=0;const x=u[p++];let T;for(;!T||x.equals(T);)if(T=u[p++],!T)return 1/0;for(;p<u.length;p++){const D=u[p],j=f[0],J=T.sub(x),ie=D.sub(x),le=j.sub(x),me=bd(J,J),xe=bd(J,ie),Re=bd(ie,ie),De=bd(le,J),Be=bd(le,ie),rt=me*Re-xe*xe,ot=(Re*De-xe*Be)/rt,Pt=(me*Be-xe*De)/rt,kt=x.z*(1-ot-Pt)+T.z*ot+D.z*Pt;if(isFinite(kt))return kt}return 1/0}{let p=1/0;for(const x of u)p=Math.min(p,x.z);return p}}const lf=ua([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Cm}=lf,jg=ua([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Vg}=jg,th=cc.VectorTileFeature.types,qh=Math.cos(Math.PI/180*37.5),Ai=Math.pow(2,14)/.5;class uf{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(p=>p.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(p=>{this.gradients[p.id]={}}),this.layoutVertexArray=new ve,this.layoutVertexArray2=new Oe,this.indexArray=new st,this.programConfigurations=new _a(u.layers,u.zoom),this.segments=new qt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(u,p,x){this.hasPattern=Qf("line",this.layers,p);const T=this.layers[0].layout.get("line-sort-key"),D=!T.isConstant(),j=[];for(const{feature:J,id:ie,index:le,sourceLayerIndex:me}of u){const xe=this.layers[0]._featureFilter.needGeometry,Re=gu(J,xe);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),Re,x))continue;const De=D?T.evaluate(Re,{},x):void 0,Be={id:ie,properties:J.properties,type:J.type,sourceLayerIndex:me,index:le,geometry:xe?Re.geometry:ns(J),patterns:{},sortKey:De};j.push(Be)}D&&j.sort((J,ie)=>J.sortKey-ie.sortKey);for(const J of j){const{geometry:ie,index:le,sourceLayerIndex:me}=J;if(this.hasPattern){const xe=wm("line",this.layers,J,this.zoom,p);this.patternFeatures.push(xe)}else this.addFeature(J,ie,le,x,{});p.featureIndex.insert(u[le].feature,ie,le,me,this.index)}}update(u,p,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,p,this.stateDependentLayers,x)}addFeatures(u,p,x){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,p,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,Vg)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Cm),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,p,x,T,D){const j=this.layers[0].layout,J=j.get("line-join").evaluate(u,{}),ie=j.get("line-cap"),le=j.get("line-miter-limit"),me=j.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const xe of p)this.addLine(xe,u,J,ie,le,me);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,x,D,T)}addLine(u,p,x,T,D,j){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Pt=0;Pt<u.length-1;Pt++)this.totalDistance+=u[Pt].dist(u[Pt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const J=th[p.type]==="Polygon";let ie=u.length;for(;ie>=2&&u[ie-1].equals(u[ie-2]);)ie--;let le=0;for(;le<ie-1&&u[le].equals(u[le+1]);)le++;if(ie<(J?3:2))return;x==="bevel"&&(D=1.05);const me=this.overscaling<=16?122880/(512*this.overscaling):0,xe=this.segments.prepareSegment(10*ie,this.layoutVertexArray,this.indexArray);let Re,De,Be,rt,ot;this.e1=this.e2=-1,J&&(Re=u[ie-2],ot=u[le].sub(Re)._unit()._perp());for(let Pt=le;Pt<ie;Pt++){if(Be=Pt===ie-1?J?u[le+1]:void 0:u[Pt+1],Be&&u[Pt].equals(Be))continue;ot&&(rt=ot),Re&&(De=Re),Re=u[Pt],ot=Be?Be.sub(Re)._unit()._perp():rt,rt=rt||ot;let kt=rt.add(ot);kt.x===0&&kt.y===0||kt._unit();const At=rt.x*ot.x+rt.y*ot.y,$t=kt.x*ot.x+kt.y*ot.y,sr=$t!==0?1/$t:1/0,Wt=2*Math.sqrt(2-2*$t),zr=$t<qh&&De&&Be,Zr=rt.x*ot.y-rt.y*ot.x>0;if(zr&&Pt>le){const Rr=Re.dist(De);if(Rr>2*me){const Ur=Re.sub(Re.sub(De)._mult(me/Rr)._round());this.updateDistance(De,Ur),this.addCurrentVertex(Ur,rt,0,0,xe),De=Ur}}const Br=De&&Be;let Nr=Br?x:J?"butt":T;if(Br&&Nr==="round"&&(sr<j?Nr="miter":sr<=2&&(Nr="fakeround")),Nr==="miter"&&sr>D&&(Nr="bevel"),Nr==="bevel"&&(sr>2&&(Nr="flipbevel"),sr<D&&(Nr="miter")),De&&this.updateDistance(De,Re),Nr==="miter")kt._mult(sr),this.addCurrentVertex(Re,kt,0,0,xe);else if(Nr==="flipbevel"){if(sr>100)kt=ot.mult(-1);else{const Rr=sr*rt.add(ot).mag()/rt.sub(ot).mag();kt._perp()._mult(Rr*(Zr?-1:1))}this.addCurrentVertex(Re,kt,0,0,xe),this.addCurrentVertex(Re,kt.mult(-1),0,0,xe)}else if(Nr==="bevel"||Nr==="fakeround"){const Rr=-Math.sqrt(sr*sr-1),Ur=Zr?Rr:0,Vr=Zr?0:Rr;if(De&&this.addCurrentVertex(Re,rt,Ur,Vr,xe),Nr==="fakeround"){const Ir=Math.round(180*Wt/Math.PI/20);for(let In=1;In<Ir;In++){let mn=In/Ir;if(mn!==.5){const Ii=mn-.5;mn+=mn*Ii*(mn-1)*((1.0904+At*(At*(3.55645-1.43519*At)-3.2452))*Ii*Ii+(.848013+At*(.215638*At-1.06021)))}const oi=ot.sub(rt)._mult(mn)._add(rt)._unit()._mult(Zr?-1:1);this.addHalfVertex(Re,oi.x,oi.y,!1,Zr,0,xe)}}Be&&this.addCurrentVertex(Re,ot,-Ur,-Vr,xe)}else if(Nr==="butt")this.addCurrentVertex(Re,kt,0,0,xe);else if(Nr==="square"){const Rr=De?1:-1;this.addCurrentVertex(Re,kt,Rr,Rr,xe)}else Nr==="round"&&(De&&(this.addCurrentVertex(Re,rt,0,0,xe),this.addCurrentVertex(Re,rt,1,1,xe,!0)),Be&&(this.addCurrentVertex(Re,ot,-1,-1,xe,!0),this.addCurrentVertex(Re,ot,0,0,xe)));if(zr&&Pt<ie-1){const Rr=Re.dist(Be);if(Rr>2*me){const Ur=Re.add(Be.sub(Re)._mult(me/Rr)._round());this.updateDistance(Re,Ur),this.addCurrentVertex(Ur,ot,0,0,xe),Re=Ur}}}}addCurrentVertex(u,p,x,T,D,j=!1){const J=p.y*T-p.x,ie=-p.y-p.x*T;this.addHalfVertex(u,p.x+p.y*x,p.y-p.x*x,j,!1,x,D),this.addHalfVertex(u,J,ie,j,!0,-T,D),this.distance>Ai/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(u,p,x,T,D,j))}addHalfVertex({x:u,y:p},x,T,D,j,J,ie){const le=.5*(this.lineClips?this.scaledDistance*(Ai-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(D?1:0),(p<<1)+(j?1:0),Math.round(63*x)+128,Math.round(63*T)+128,1+(J===0?0:J<0?-1:1)|(63&le)<<2,le>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const me=ie.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,me),ie.primitiveLength++),j?this.e2=me:this.e1=me}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,p){this.distance+=u.dist(p),this.updateScaledDistance()}}Pn("LineBucket",uf,{omit:["layers","patternFeatures"]});const Ba=new Va({"line-cap":new Tn(Mt.layout_line["line-cap"]),"line-join":new zn(Mt.layout_line["line-join"]),"line-miter-limit":new Tn(Mt.layout_line["line-miter-limit"]),"line-round-limit":new Tn(Mt.layout_line["line-round-limit"]),"line-sort-key":new zn(Mt.layout_line["line-sort-key"])});var cf={paint:new Va({"line-opacity":new zn(Mt.paint_line["line-opacity"]),"line-color":new zn(Mt.paint_line["line-color"]),"line-translate":new Tn(Mt.paint_line["line-translate"]),"line-translate-anchor":new Tn(Mt.paint_line["line-translate-anchor"]),"line-width":new zn(Mt.paint_line["line-width"]),"line-gap-width":new zn(Mt.paint_line["line-gap-width"]),"line-offset":new zn(Mt.paint_line["line-offset"]),"line-blur":new zn(Mt.paint_line["line-blur"]),"line-dasharray":new du(Mt.paint_line["line-dasharray"]),"line-pattern":new Uo(Mt.paint_line["line-pattern"]),"line-gradient":new jo(Mt.paint_line["line-gradient"])}),layout:Ba};const Dc=new class extends zn{possiblyEvaluate(f,u){return u=new Ui(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(f,u)}evaluate(f,u,p,x){return u=F({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(f,u,p,x)}}(cf.paint.properties["line-width"].specification);function ff(f,u){return u>0?u+2*f:f}Dc.useIntegerZoom=!0;const qg=ua([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ml=ua([{name:"a_projected_pos",components:3,type:"Float32"}],4);ua([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Q0=ua([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ua([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const xv=ua([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),wv=ua([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function eb(f,u,p){return f.sections.forEach(x=>{x.text=function(T,D,j){const J=D.layout.get("text-transform").evaluate(j,{});return J==="uppercase"?T=T.toLocaleUpperCase():J==="lowercase"&&(T=T.toLocaleLowerCase()),Gs.applyArabicShaping&&(T=Gs.applyArabicShaping(T)),T}(x.text,u,p)}),f}ua([{name:"triangle",components:3,type:"Uint16"}]),ua([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ua([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ua([{type:"Float32",name:"offsetX"}]),ua([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Op={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Rs=24,Gg=Ri,Sv=function(f,u,p,x,T){var D,j,J=8*T-x-1,ie=(1<<J)-1,le=ie>>1,me=-7,xe=p?T-1:0,Re=p?-1:1,De=f[u+xe];for(xe+=Re,D=De&(1<<-me)-1,De>>=-me,me+=J;me>0;D=256*D+f[u+xe],xe+=Re,me-=8);for(j=D&(1<<-me)-1,D>>=-me,me+=x;me>0;j=256*j+f[u+xe],xe+=Re,me-=8);if(D===0)D=1-le;else{if(D===ie)return j?NaN:1/0*(De?-1:1);j+=Math.pow(2,x),D-=le}return(De?-1:1)*j*Math.pow(2,D-x)},_u=function(f,u,p,x,T,D){var j,J,ie,le=8*D-T-1,me=(1<<le)-1,xe=me>>1,Re=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,De=x?0:D-1,Be=x?1:-1,rt=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(J=isNaN(u)?1:0,j=me):(j=Math.floor(Math.log(u)/Math.LN2),u*(ie=Math.pow(2,-j))<1&&(j--,ie*=2),(u+=j+xe>=1?Re/ie:Re*Math.pow(2,1-xe))*ie>=2&&(j++,ie/=2),j+xe>=me?(J=0,j=me):j+xe>=1?(J=(u*ie-1)*Math.pow(2,T),j+=xe):(J=u*Math.pow(2,xe-1)*Math.pow(2,T),j=0));T>=8;f[p+De]=255&J,De+=Be,J/=256,T-=8);for(j=j<<T|J,le+=T;le>0;f[p+De]=255&j,De+=Be,j/=256,le-=8);f[p+De-Be]|=128*rt};function Ri(f){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(f)?f:new Uint8Array(f||0),this.pos=0,this.type=0,this.length=this.buf.length}Ri.Varint=0,Ri.Fixed64=1,Ri.Bytes=2,Ri.Fixed32=5;var fc,Hg=4294967296,Pm=1/Hg,Ev=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function zc(f){return f.type===Ri.Bytes?f.readVarint()+f.pos:f.pos+1}function bu(f,u,p){return p?4294967296*u+(f>>>0):4294967296*(u>>>0)+(f>>>0)}function Gh(f,u,p){var x=u<=16383?1:u<=2097151?2:u<=268435455?3:Math.floor(Math.log(u)/(7*Math.LN2));p.realloc(x);for(var T=p.pos-1;T>=f;T--)p.buf[T+x]=p.buf[T]}function Rp(f,u){for(var p=0;p<f.length;p++)u.writeVarint(f[p])}function ru(f,u){for(var p=0;p<f.length;p++)u.writeSVarint(f[p])}function Dp(f,u){for(var p=0;p<f.length;p++)u.writeFloat(f[p])}function Ws(f,u){for(var p=0;p<f.length;p++)u.writeDouble(f[p])}function Tm(f,u){for(var p=0;p<f.length;p++)u.writeBoolean(f[p])}function xd(f,u){for(var p=0;p<f.length;p++)u.writeFixed32(f[p])}function gl(f,u){for(var p=0;p<f.length;p++)u.writeSFixed32(f[p])}function Cv(f,u){for(var p=0;p<f.length;p++)u.writeFixed64(f[p])}function Am(f,u){for(var p=0;p<f.length;p++)u.writeSFixed64(f[p])}function wd(f,u){return(f[u]|f[u+1]<<8|f[u+2]<<16)+16777216*f[u+3]}function hc(f,u,p){f[p]=u,f[p+1]=u>>>8,f[p+2]=u>>>16,f[p+3]=u>>>24}function zp(f,u){return(f[u]|f[u+1]<<8|f[u+2]<<16)+(f[u+3]<<24)}function km(f,u,p){f===1&&p.readMessage(Pv,u)}function Pv(f,u,p){if(f===3){const{id:x,bitmap:T,width:D,height:j,left:J,top:ie,advance:le}=p.readMessage(Sd,{});u.push({id:x,bitmap:new Oc({width:D+6,height:j+6},T),metrics:{width:D,height:j,left:J,top:ie,advance:le}})}}function Sd(f,u,p){f===1?u.id=p.readVarint():f===2?u.bitmap=p.readBytes():f===3?u.width=p.readVarint():f===4?u.height=p.readVarint():f===5?u.left=p.readSVarint():f===6?u.top=p.readSVarint():f===7&&(u.advance=p.readVarint())}function rh(f){let u=0,p=0;for(const j of f)u+=j.w*j.h,p=Math.max(p,j.w);f.sort((j,J)=>J.h-j.h);const x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),p),h:1/0}];let T=0,D=0;for(const j of f)for(let J=x.length-1;J>=0;J--){const ie=x[J];if(!(j.w>ie.w||j.h>ie.h)){if(j.x=ie.x,j.y=ie.y,D=Math.max(D,j.y+j.h),T=Math.max(T,j.x+j.w),j.w===ie.w&&j.h===ie.h){const le=x.pop();J<x.length&&(x[J]=le)}else j.h===ie.h?(ie.x+=j.w,ie.w-=j.w):j.w===ie.w?(ie.y+=j.h,ie.h-=j.h):(x.push({x:ie.x+j.w,y:ie.y,w:ie.w-j.w,h:j.h}),ie.y+=j.h,ie.h-=j.h);break}}return{w:T,h:D,fill:u/(T*D)||0}}Ri.prototype={destroy:function(){this.buf=null},readFields:function(f,u,p){for(p=p||this.length;this.pos<p;){var x=this.readVarint(),T=x>>3,D=this.pos;this.type=7&x,f(T,u,this),this.pos===D&&this.skip(x)}return u},readMessage:function(f,u){return this.readFields(f,u,this.readVarint()+this.pos)},readFixed32:function(){var f=wd(this.buf,this.pos);return this.pos+=4,f},readSFixed32:function(){var f=zp(this.buf,this.pos);return this.pos+=4,f},readFixed64:function(){var f=wd(this.buf,this.pos)+wd(this.buf,this.pos+4)*Hg;return this.pos+=8,f},readSFixed64:function(){var f=wd(this.buf,this.pos)+zp(this.buf,this.pos+4)*Hg;return this.pos+=8,f},readFloat:function(){var f=Sv(this.buf,this.pos,!0,23,4);return this.pos+=4,f},readDouble:function(){var f=Sv(this.buf,this.pos,!0,52,8);return this.pos+=8,f},readVarint:function(f){var u,p,x=this.buf;return u=127&(p=x[this.pos++]),p<128?u:(u|=(127&(p=x[this.pos++]))<<7,p<128?u:(u|=(127&(p=x[this.pos++]))<<14,p<128?u:(u|=(127&(p=x[this.pos++]))<<21,p<128?u:function(T,D,j){var J,ie,le=j.buf;if(J=(112&(ie=le[j.pos++]))>>4,ie<128||(J|=(127&(ie=le[j.pos++]))<<3,ie<128)||(J|=(127&(ie=le[j.pos++]))<<10,ie<128)||(J|=(127&(ie=le[j.pos++]))<<17,ie<128)||(J|=(127&(ie=le[j.pos++]))<<24,ie<128)||(J|=(1&(ie=le[j.pos++]))<<31,ie<128))return bu(T,J,D);throw new Error("Expected varint not more than 10 bytes")}(u|=(15&(p=x[this.pos]))<<28,f,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var f=this.readVarint();return f%2==1?(f+1)/-2:f/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var f=this.readVarint()+this.pos,u=this.pos;return this.pos=f,f-u>=12&&Ev?function(p,x,T){return Ev.decode(p.subarray(x,T))}(this.buf,u,f):function(p,x,T){for(var D="",j=x;j<T;){var J,ie,le,me=p[j],xe=null,Re=me>239?4:me>223?3:me>191?2:1;if(j+Re>T)break;Re===1?me<128&&(xe=me):Re===2?(192&(J=p[j+1]))==128&&(xe=(31&me)<<6|63&J)<=127&&(xe=null):Re===3?(ie=p[j+2],(192&(J=p[j+1]))==128&&(192&ie)==128&&((xe=(15&me)<<12|(63&J)<<6|63&ie)<=2047||xe>=55296&&xe<=57343)&&(xe=null)):Re===4&&(ie=p[j+2],le=p[j+3],(192&(J=p[j+1]))==128&&(192&ie)==128&&(192&le)==128&&((xe=(15&me)<<18|(63&J)<<12|(63&ie)<<6|63&le)<=65535||xe>=1114112)&&(xe=null)),xe===null?(xe=65533,Re=1):xe>65535&&(xe-=65536,D+=String.fromCharCode(xe>>>10&1023|55296),xe=56320|1023&xe),D+=String.fromCharCode(xe),j+=Re}return D}(this.buf,u,f)},readBytes:function(){var f=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,f);return this.pos=f,u},readPackedVarint:function(f,u){if(this.type!==Ri.Bytes)return f.push(this.readVarint(u));var p=zc(this);for(f=f||[];this.pos<p;)f.push(this.readVarint(u));return f},readPackedSVarint:function(f){if(this.type!==Ri.Bytes)return f.push(this.readSVarint());var u=zc(this);for(f=f||[];this.pos<u;)f.push(this.readSVarint());return f},readPackedBoolean:function(f){if(this.type!==Ri.Bytes)return f.push(this.readBoolean());var u=zc(this);for(f=f||[];this.pos<u;)f.push(this.readBoolean());return f},readPackedFloat:function(f){if(this.type!==Ri.Bytes)return f.push(this.readFloat());var u=zc(this);for(f=f||[];this.pos<u;)f.push(this.readFloat());return f},readPackedDouble:function(f){if(this.type!==Ri.Bytes)return f.push(this.readDouble());var u=zc(this);for(f=f||[];this.pos<u;)f.push(this.readDouble());return f},readPackedFixed32:function(f){if(this.type!==Ri.Bytes)return f.push(this.readFixed32());var u=zc(this);for(f=f||[];this.pos<u;)f.push(this.readFixed32());return f},readPackedSFixed32:function(f){if(this.type!==Ri.Bytes)return f.push(this.readSFixed32());var u=zc(this);for(f=f||[];this.pos<u;)f.push(this.readSFixed32());return f},readPackedFixed64:function(f){if(this.type!==Ri.Bytes)return f.push(this.readFixed64());var u=zc(this);for(f=f||[];this.pos<u;)f.push(this.readFixed64());return f},readPackedSFixed64:function(f){if(this.type!==Ri.Bytes)return f.push(this.readSFixed64());var u=zc(this);for(f=f||[];this.pos<u;)f.push(this.readSFixed64());return f},skip:function(f){var u=7&f;if(u===Ri.Varint)for(;this.buf[this.pos++]>127;);else if(u===Ri.Bytes)this.pos=this.readVarint()+this.pos;else if(u===Ri.Fixed32)this.pos+=4;else{if(u!==Ri.Fixed64)throw new Error("Unimplemented type: "+u);this.pos+=8}},writeTag:function(f,u){this.writeVarint(f<<3|u)},realloc:function(f){for(var u=this.length||16;u<this.pos+f;)u*=2;if(u!==this.length){var p=new Uint8Array(u);p.set(this.buf),this.buf=p,this.length=u}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(f){this.realloc(4),hc(this.buf,f,this.pos),this.pos+=4},writeSFixed32:function(f){this.realloc(4),hc(this.buf,f,this.pos),this.pos+=4},writeFixed64:function(f){this.realloc(8),hc(this.buf,-1&f,this.pos),hc(this.buf,Math.floor(f*Pm),this.pos+4),this.pos+=8},writeSFixed64:function(f){this.realloc(8),hc(this.buf,-1&f,this.pos),hc(this.buf,Math.floor(f*Pm),this.pos+4),this.pos+=8},writeVarint:function(f){(f=+f||0)>268435455||f<0?function(u,p){var x,T;if(u>=0?(x=u%4294967296|0,T=u/4294967296|0):(T=~(-u/4294967296),4294967295^(x=~(-u%4294967296))?x=x+1|0:(x=0,T=T+1|0)),u>=18446744073709552e3||u<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");p.realloc(10),function(D,j,J){J.buf[J.pos++]=127&D|128,D>>>=7,J.buf[J.pos++]=127&D|128,D>>>=7,J.buf[J.pos++]=127&D|128,D>>>=7,J.buf[J.pos++]=127&D|128,J.buf[J.pos]=127&(D>>>=7)}(x,0,p),function(D,j){var J=(7&D)<<4;j.buf[j.pos++]|=J|((D>>>=3)?128:0),D&&(j.buf[j.pos++]=127&D|((D>>>=7)?128:0),D&&(j.buf[j.pos++]=127&D|((D>>>=7)?128:0),D&&(j.buf[j.pos++]=127&D|((D>>>=7)?128:0),D&&(j.buf[j.pos++]=127&D|((D>>>=7)?128:0),D&&(j.buf[j.pos++]=127&D)))))}(T,p)}(f,this):(this.realloc(4),this.buf[this.pos++]=127&f|(f>127?128:0),f<=127||(this.buf[this.pos++]=127&(f>>>=7)|(f>127?128:0),f<=127||(this.buf[this.pos++]=127&(f>>>=7)|(f>127?128:0),f<=127||(this.buf[this.pos++]=f>>>7&127))))},writeSVarint:function(f){this.writeVarint(f<0?2*-f-1:2*f)},writeBoolean:function(f){this.writeVarint(!!f)},writeString:function(f){f=String(f),this.realloc(4*f.length),this.pos++;var u=this.pos;this.pos=function(x,T,D){for(var j,J,ie=0;ie<T.length;ie++){if((j=T.charCodeAt(ie))>55295&&j<57344){if(!J){j>56319||ie+1===T.length?(x[D++]=239,x[D++]=191,x[D++]=189):J=j;continue}if(j<56320){x[D++]=239,x[D++]=191,x[D++]=189,J=j;continue}j=J-55296<<10|j-56320|65536,J=null}else J&&(x[D++]=239,x[D++]=191,x[D++]=189,J=null);j<128?x[D++]=j:(j<2048?x[D++]=j>>6|192:(j<65536?x[D++]=j>>12|224:(x[D++]=j>>18|240,x[D++]=j>>12&63|128),x[D++]=j>>6&63|128),x[D++]=63&j|128)}return D}(this.buf,f,this.pos);var p=this.pos-u;p>=128&&Gh(u,p,this),this.pos=u-1,this.writeVarint(p),this.pos+=p},writeFloat:function(f){this.realloc(4),_u(this.buf,f,this.pos,!0,23,4),this.pos+=4},writeDouble:function(f){this.realloc(8),_u(this.buf,f,this.pos,!0,52,8),this.pos+=8},writeBytes:function(f){var u=f.length;this.writeVarint(u),this.realloc(u);for(var p=0;p<u;p++)this.buf[this.pos++]=f[p]},writeRawMessage:function(f,u){this.pos++;var p=this.pos;f(u,this);var x=this.pos-p;x>=128&&Gh(p,x,this),this.pos=p-1,this.writeVarint(x),this.pos+=x},writeMessage:function(f,u,p){this.writeTag(f,Ri.Bytes),this.writeRawMessage(u,p)},writePackedVarint:function(f,u){u.length&&this.writeMessage(f,Rp,u)},writePackedSVarint:function(f,u){u.length&&this.writeMessage(f,ru,u)},writePackedBoolean:function(f,u){u.length&&this.writeMessage(f,Tm,u)},writePackedFloat:function(f,u){u.length&&this.writeMessage(f,Dp,u)},writePackedDouble:function(f,u){u.length&&this.writeMessage(f,Ws,u)},writePackedFixed32:function(f,u){u.length&&this.writeMessage(f,xd,u)},writePackedSFixed32:function(f,u){u.length&&this.writeMessage(f,gl,u)},writePackedFixed64:function(f,u){u.length&&this.writeMessage(f,Cv,u)},writePackedSFixed64:function(f,u){u.length&&this.writeMessage(f,Am,u)},writeBytesField:function(f,u){this.writeTag(f,Ri.Bytes),this.writeBytes(u)},writeFixed32Field:function(f,u){this.writeTag(f,Ri.Fixed32),this.writeFixed32(u)},writeSFixed32Field:function(f,u){this.writeTag(f,Ri.Fixed32),this.writeSFixed32(u)},writeFixed64Field:function(f,u){this.writeTag(f,Ri.Fixed64),this.writeFixed64(u)},writeSFixed64Field:function(f,u){this.writeTag(f,Ri.Fixed64),this.writeSFixed64(u)},writeVarintField:function(f,u){this.writeTag(f,Ri.Varint),this.writeVarint(u)},writeSVarintField:function(f,u){this.writeTag(f,Ri.Varint),this.writeSVarint(u)},writeStringField:function(f,u){this.writeTag(f,Ri.Bytes),this.writeString(u)},writeFloatField:function(f,u){this.writeTag(f,Ri.Fixed32),this.writeFloat(u)},writeDoubleField:function(f,u){this.writeTag(f,Ri.Fixed64),this.writeDouble(u)},writeBooleanField:function(f,u){this.writeVarintField(f,!!u)}};class nu{constructor(u,{pixelRatio:p,version:x,stretchX:T,stretchY:D,content:j}){this.paddedRect=u,this.pixelRatio=p,this.stretchX=T,this.stretchY=D,this.content=j,this.version=x}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class hf{constructor(u,p){const x={},T={};this.haveRenderCallbacks=[];const D=[];this.addImages(u,x,D),this.addImages(p,T,D);const{w:j,h:J}=rh(D),ie=new is({width:j||1,height:J||1});for(const le in u){const me=u[le],xe=x[le].paddedRect;is.copy(me.data,ie,{x:0,y:0},{x:xe.x+1,y:xe.y+1},me.data)}for(const le in p){const me=p[le],xe=T[le].paddedRect,Re=xe.x+1,De=xe.y+1,Be=me.data.width,rt=me.data.height;is.copy(me.data,ie,{x:0,y:0},{x:Re,y:De},me.data),is.copy(me.data,ie,{x:0,y:rt-1},{x:Re,y:De-1},{width:Be,height:1}),is.copy(me.data,ie,{x:0,y:0},{x:Re,y:De+rt},{width:Be,height:1}),is.copy(me.data,ie,{x:Be-1,y:0},{x:Re-1,y:De},{width:1,height:rt}),is.copy(me.data,ie,{x:0,y:0},{x:Re+Be,y:De},{width:1,height:rt})}this.image=ie,this.iconPositions=x,this.patternPositions=T}addImages(u,p,x){for(const T in u){const D=u[T],j={x:0,y:0,w:D.data.width+2,h:D.data.height+2};x.push(j),p[T]=new nu(j,D),D.hasRenderCallback&&this.haveRenderCallbacks.push(T)}}patchUpdatedImages(u,p){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const x in u.updatedImages)this.patchUpdatedImage(this.iconPositions[x],u.getImage(x),p),this.patchUpdatedImage(this.patternPositions[x],u.getImage(x),p)}patchUpdatedImage(u,p,x){if(!u||!p||u.version===p.version)return;u.version=p.version;const[T,D]=u.tl;x.update(p.data,void 0,{x:T,y:D})}}Pn("ImagePosition",nu),Pn("ImageAtlas",hf),s.WritingMode=void 0,(fc=s.WritingMode||(s.WritingMode={}))[fc.none=0]="none",fc[fc.horizontal=1]="horizontal",fc[fc.vertical=2]="vertical",fc[fc.horizontalOnly=3]="horizontalOnly";const Ed=-17;class Lp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(u,p){const x=new Lp;return x.scale=u||1,x.fontStack=p,x}static forImage(u){const p=new Lp;return p.imageName=u,p}}class Hh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,p){const x=new Hh;for(let T=0;T<u.sections.length;T++){const D=u.sections[T];D.image?x.addImageSection(D):x.addTextSection(D,p)}return x}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=function(u){let p="";for(let x=0;x<u.length;x++){const T=u.charCodeAt(x+1)||null,D=u.charCodeAt(x-1)||null;p+=T&&Is(T)&&!Op[u[x+1]]||D&&Is(D)&&!Op[u[x-1]]||!Op[u[x]]?u[x]:Op[u[x]]}return p}(this.text)}trim(){let u=0;for(let x=0;x<this.text.length&&Pd[this.text.charCodeAt(x)];x++)u++;let p=this.text.length;for(let x=this.text.length-1;x>=0&&x>=u&&Pd[this.text.charCodeAt(x)];x--)p--;this.text=this.text.substring(u,p),this.sectionIndex=this.sectionIndex.slice(u,p)}substring(u,p){const x=new Hh;return x.text=this.text.substring(u,p),x.sectionIndex=this.sectionIndex.slice(u,p),x.sections=this.sections,x}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((u,p)=>Math.max(u,this.sections[p].scale),0)}addTextSection(u,p){this.text+=u.text,this.sections.push(Lp.forText(u.scale,u.fontStack||p));const x=this.sections.length-1;for(let T=0;T<u.text.length;++T)this.sectionIndex.push(x)}addImageSection(u){const p=u.image?u.image.name:"";if(p.length===0)return void N("Can't add FormattedSection with an empty image.");const x=this.getNextImageSectionCharCode();x?(this.text+=String.fromCharCode(x),this.sections.push(Lp.forImage(p)),this.sectionIndex.push(this.sections.length-1)):N("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Cd(f,u,p,x,T,D,j,J,ie,le,me,xe,Re,De,Be,rt){const ot=Hh.fromFeature(f,T);let Pt;xe===s.WritingMode.vertical&&ot.verticalizePunctuation();const{processBidirectionalText:kt,processStyledBidirectionalText:At}=Gs;if(kt&&ot.sections.length===1){Pt=[];const Wt=kt(ot.toString(),Im(ot,le,D,u,x,De,Be));for(const zr of Wt){const Zr=new Hh;Zr.text=zr,Zr.sections=ot.sections;for(let Br=0;Br<zr.length;Br++)Zr.sectionIndex.push(0);Pt.push(Zr)}}else if(At){Pt=[];const Wt=At(ot.text,ot.sectionIndex,Im(ot,le,D,u,x,De,Be));for(const zr of Wt){const Zr=new Hh;Zr.text=zr[0],Zr.sectionIndex=zr[1],Zr.sections=ot.sections,Pt.push(Zr)}}else Pt=function(Wt,zr){const Zr=[],Br=Wt.text;let Nr=0;for(const Rr of zr)Zr.push(Wt.substring(Nr,Rr)),Nr=Rr;return Nr<Br.length&&Zr.push(Wt.substring(Nr,Br.length)),Zr}(ot,Im(ot,le,D,u,x,De,Be));const $t=[],sr={positionedLines:$t,text:ot.toString(),top:me[1],bottom:me[1],left:me[0],right:me[0],writingMode:xe,iconsInText:!1,verticalizable:!1};return function(Wt,zr,Zr,Br,Nr,Rr,Ur,Vr,Ir,In,mn,oi){let Ii=0,Ni=Ed,Jn=0,Xi=0;const Mi=Vr==="right"?1:Vr==="left"?0:.5;let si=0;for(const ha of Nr){ha.trim();const li=ha.getMaxScale(),Kn=(li-1)*Rs,no={positionedGlyphs:[],lineOffset:0};Wt.positionedLines[si]=no;const ba=no.positionedGlyphs;let di=0;if(!ha.length()){Ni+=Rr,++si;continue}for(let ma=0;ma<ha.length();ma++){const Bi=ha.getSection(ma),xs=ha.getSectionIndex(ma),Ho=ha.getCharCode(ma);let Po=0,tl=null,vl=null,_l=null,as=Rs;const bl=!(Ir===s.WritingMode.horizontal||!mn&&!Eo(Ho)||mn&&(Pd[Ho]||(wa=Ho,pn.Arabic(wa)||pn["Arabic Supplement"](wa)||pn["Arabic Extended-A"](wa)||pn["Arabic Presentation Forms-A"](wa)||pn["Arabic Presentation Forms-B"](wa))));if(Bi.imageName){const Ds=Br[Bi.imageName];if(!Ds)continue;_l=Bi.imageName,Wt.iconsInText=Wt.iconsInText||!0,vl=Ds.paddedRect;const Ki=Ds.displaySize;Bi.scale=Bi.scale*Rs/oi,tl={width:Ki[0],height:Ki[1],left:1,top:-3,advance:bl?Ki[1]:Ki[0]},Po=Kn+(Rs-Ki[1]*Bi.scale),as=tl.advance;const za=bl?Ki[0]*Bi.scale-Rs*li:Ki[1]*Bi.scale-Rs*li;za>0&&za>di&&(di=za)}else{const Ds=Zr[Bi.fontStack],Ki=Ds&&Ds[Ho];if(Ki&&Ki.rect)vl=Ki.rect,tl=Ki.metrics;else{const za=zr[Bi.fontStack],pc=za&&za[Ho];if(!pc)continue;tl=pc.metrics}Po=(li-Bi.scale)*Rs}bl?(Wt.verticalizable=!0,ba.push({glyph:Ho,imageName:_l,x:Ii,y:Ni+Po,vertical:bl,scale:Bi.scale,fontStack:Bi.fontStack,sectionIndex:xs,metrics:tl,rect:vl}),Ii+=as*Bi.scale+In):(ba.push({glyph:Ho,imageName:_l,x:Ii,y:Ni+Po,vertical:bl,scale:Bi.scale,fontStack:Bi.fontStack,sectionIndex:xs,metrics:tl,rect:vl}),Ii+=tl.advance*Bi.scale+In)}ba.length!==0&&(Jn=Math.max(Ii-In,Jn),Ad(ba,0,ba.length-1,Mi,di)),Ii=0;const Ta=Rr*li+di;no.lineOffset=Math.max(di,Kn),Ni+=Ta,Xi=Math.max(Ta,Xi),++si}var wa;const Sa=Ni-Ed,{horizontalAlign:Si,verticalAlign:da}=$p(Ur);(function(ha,li,Kn,no,ba,di,Ta,ma,Bi){const xs=(li-Kn)*ba;let Ho=0;Ho=di!==Ta?-ma*no-Ed:(-no*Bi+.5)*Ta;for(const Po of ha)for(const tl of Po.positionedGlyphs)tl.x+=xs,tl.y+=Ho})(Wt.positionedLines,Mi,Si,da,Jn,Xi,Rr,Sa,Nr.length),Wt.top+=-da*Sa,Wt.bottom=Wt.top+Sa,Wt.left+=-Si*Jn,Wt.right=Wt.left+Jn}(sr,u,p,x,Pt,j,J,ie,xe,le,Re,rt),!function(Wt){for(const zr of Wt)if(zr.positionedGlyphs.length!==0)return!1;return!0}($t)&&sr}const Pd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Tv={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Av(f,u,p,x,T,D){if(u.imageName){const j=x[u.imageName];return j?j.displaySize[0]*u.scale*Rs/D+T:0}{const j=p[u.fontStack],J=j&&j[f];return J?J.metrics.advance*u.scale+T:0}}function kv(f,u,p,x){const T=Math.pow(f-u,2);return x?f<u?T/2:2*T:T+Math.abs(p)*p}function Iv(f,u,p){let x=0;return f===10&&(x-=1e4),p&&(x+=150),f!==40&&f!==65288||(x+=50),u!==41&&u!==65289||(x+=50),x}function Wg(f,u,p,x,T,D){let j=null,J=kv(u,p,T,D);for(const ie of x){const le=kv(u-ie.x,p,T,D)+ie.badness;le<=J&&(j=ie,J=le)}return{index:f,x:u,priorBreak:j,badness:J}}function Td(f){return f?Td(f.priorBreak).concat(f.index):[]}function Im(f,u,p,x,T,D,j){if(D!=="point")return[];if(!f)return[];const J=[],ie=function(Re,De,Be,rt,ot,Pt){let kt=0;for(let At=0;At<Re.length();At++){const $t=Re.getSection(At);kt+=Av(Re.getCharCode(At),$t,rt,ot,De,Pt)}return kt/Math.max(1,Math.ceil(kt/Be))}(f,u,p,x,T,j),le=f.text.indexOf("​")>=0;let me=0;for(let Re=0;Re<f.length();Re++){const De=f.getSection(Re),Be=f.getCharCode(Re);if(Pd[Be]||(me+=Av(Be,De,x,T,u,j)),Re<f.length()-1){const rt=!((xe=Be)<11904||!(pn["Bopomofo Extended"](xe)||pn.Bopomofo(xe)||pn["CJK Compatibility Forms"](xe)||pn["CJK Compatibility Ideographs"](xe)||pn["CJK Compatibility"](xe)||pn["CJK Radicals Supplement"](xe)||pn["CJK Strokes"](xe)||pn["CJK Symbols and Punctuation"](xe)||pn["CJK Unified Ideographs Extension A"](xe)||pn["CJK Unified Ideographs"](xe)||pn["Enclosed CJK Letters and Months"](xe)||pn["Halfwidth and Fullwidth Forms"](xe)||pn.Hiragana(xe)||pn["Ideographic Description Characters"](xe)||pn["Kangxi Radicals"](xe)||pn["Katakana Phonetic Extensions"](xe)||pn.Katakana(xe)||pn["Vertical Forms"](xe)||pn["Yi Radicals"](xe)||pn["Yi Syllables"](xe)));(Tv[Be]||rt||De.imageName)&&J.push(Wg(Re+1,me,ie,J,Iv(Be,f.getCharCode(Re+1),rt&&le),!1))}}var xe;return Td(Wg(f.length(),me,ie,J,0,!0))}function $p(f){let u=.5,p=.5;switch(f){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":p=1;break;case"top":case"top-right":case"top-left":p=0}return{horizontalAlign:u,verticalAlign:p}}function Ad(f,u,p,x,T){if(!x&&!T)return;const D=f[p],j=(f[p].x+D.metrics.advance*D.scale)*x;for(let J=u;J<=p;J++)f[J].x-=j,f[J].y+=T}function kd(f,u,p){const{horizontalAlign:x,verticalAlign:T}=$p(p),D=u[0]-f.displaySize[0]*x,j=u[1]-f.displaySize[1]*T;return{image:f,top:j,bottom:j+f.displaySize[1],left:D,right:D+f.displaySize[0]}}function nh(f,u,p,x,T,D){const j=f.image;let J;if(j.content){const ot=j.content,Pt=j.pixelRatio||1;J=[ot[0]/Pt,ot[1]/Pt,j.displaySize[0]-ot[2]/Pt,j.displaySize[1]-ot[3]/Pt]}const ie=u.left*D,le=u.right*D;let me,xe,Re,De;p==="width"||p==="both"?(De=T[0]+ie-x[3],xe=T[0]+le+x[1]):(De=T[0]+(ie+le-j.displaySize[0])/2,xe=De+j.displaySize[0]);const Be=u.top*D,rt=u.bottom*D;return p==="height"||p==="both"?(me=T[1]+Be-x[0],Re=T[1]+rt+x[2]):(me=T[1]+(Be+rt-j.displaySize[1])/2,Re=me+j.displaySize[1]),{image:j,top:me,right:xe,bottom:Re,left:De,collisionPadding:J}}const pf=128;function Mv(f,u){const{expression:p}=u;if(p.kind==="constant")return{kind:"constant",layoutSize:p.evaluate(new Ui(f+1))};if(p.kind==="source")return{kind:"source"};{const{zoomStops:x,interpolationType:T}=p;let D=0;for(;D<x.length&&x[D]<=f;)D++;D=Math.max(0,D-1);let j=D;for(;j<x.length&&x[j]<f+1;)j++;j=Math.min(x.length-1,j);const J=x[D],ie=x[j];return p.kind==="composite"?{kind:"composite",minZoom:J,maxZoom:ie,interpolationType:T}:{kind:"camera",minZoom:J,maxZoom:ie,minSize:p.evaluate(new Ui(J)),maxSize:p.evaluate(new Ui(ie)),interpolationType:T}}}class ih extends it{constructor(u,p,x,T){super(u,p),this.angle=x,T!==void 0&&(this.segment=T)}clone(){return new ih(this.x,this.y,this.angle,this.segment)}}function ah(f,u,p,x,T){if(u.segment===void 0)return!0;let D=u,j=u.segment+1,J=0;for(;J>-p/2;){if(j--,j<0)return!1;J-=f[j].dist(D),D=f[j]}J+=f[j].dist(f[j+1]),j++;const ie=[];let le=0;for(;J<p/2;){const me=f[j],xe=f[j+1];if(!xe)return!1;let Re=f[j-1].angleTo(me)-me.angleTo(xe);for(Re=Math.abs((Re+3*Math.PI)%(2*Math.PI)-Math.PI),ie.push({distance:J,angleDelta:Re}),le+=Re;J-ie[0].distance>x;)le-=ie.shift().angleDelta;if(le>T)return!1;j++,J+=me.dist(xe)}return!0}function Mm(f){let u=0;for(let p=0;p<f.length-1;p++)u+=f[p].dist(f[p+1]);return u}function Zg(f,u,p){return f?.6*u*p:0}function Om(f,u){return Math.max(f?f.right-f.left:0,u?u.right-u.left:0)}function Ov(f,u,p,x,T,D){const j=Zg(p,T,D),J=Om(p,x)*D;let ie=0;const le=Mm(f)/2;for(let me=0;me<f.length-1;me++){const xe=f[me],Re=f[me+1],De=xe.dist(Re);if(ie+De>le){const Be=(le-ie)/De,rt=Ma(xe.x,Re.x,Be),ot=Ma(xe.y,Re.y,Be),Pt=new ih(rt,ot,Re.angleTo(xe),me);return Pt._round(),!j||ah(f,Pt,J,j,u)?Pt:void 0}ie+=De}}function Rv(f,u,p,x,T,D,j,J,ie){const le=Zg(x,D,j),me=Om(x,T),xe=me*j,Re=f[0].x===0||f[0].x===ie||f[0].y===0||f[0].y===ie;return u-xe<u/4&&(u=xe+u/4),Dv(f,Re?u/2*J%u:(me/2+2*D)*j*J%u,u,le,p,xe,Re,!1,ie)}function Dv(f,u,p,x,T,D,j,J,ie){const le=D/2,me=Mm(f);let xe=0,Re=u-p,De=[];for(let Be=0;Be<f.length-1;Be++){const rt=f[Be],ot=f[Be+1],Pt=rt.dist(ot),kt=ot.angleTo(rt);for(;Re+p<xe+Pt;){Re+=p;const At=(Re-xe)/Pt,$t=Ma(rt.x,ot.x,At),sr=Ma(rt.y,ot.y,At);if($t>=0&&$t<ie&&sr>=0&&sr<ie&&Re-le>=0&&Re+le<=me){const Wt=new ih($t,sr,kt,Be);Wt._round(),x&&!ah(f,Wt,D,x,T)||De.push(Wt)}}xe+=Pt}return J||De.length||j||(De=Dv(f,xe/2,p,x,T,D,j,!0,ie)),De}function xu(f,u,p,x,T){const D=[];for(let j=0;j<f.length;j++){const J=f[j];let ie;for(let le=0;le<J.length-1;le++){let me=J[le],xe=J[le+1];me.x<u&&xe.x<u||(me.x<u?me=new it(u,me.y+(u-me.x)/(xe.x-me.x)*(xe.y-me.y))._round():xe.x<u&&(xe=new it(u,me.y+(u-me.x)/(xe.x-me.x)*(xe.y-me.y))._round()),me.y<p&&xe.y<p||(me.y<p?me=new it(me.x+(p-me.y)/(xe.y-me.y)*(xe.x-me.x),p)._round():xe.y<p&&(xe=new it(me.x+(p-me.y)/(xe.y-me.y)*(xe.x-me.x),p)._round()),me.x>=x&&xe.x>=x||(me.x>=x?me=new it(x,me.y+(x-me.x)/(xe.x-me.x)*(xe.y-me.y))._round():xe.x>=x&&(xe=new it(x,me.y+(x-me.x)/(xe.x-me.x)*(xe.y-me.y))._round()),me.y>=T&&xe.y>=T||(me.y>=T?me=new it(me.x+(T-me.y)/(xe.y-me.y)*(xe.x-me.x),T)._round():xe.y>=T&&(xe=new it(me.x+(T-me.y)/(xe.y-me.y)*(xe.x-me.x),T)._round()),ie&&me.equals(ie[ie.length-1])||(ie=[me],D.push(ie)),ie.push(xe)))))}}return D}function zv(f,u,p,x){const T=[],D=f.image,j=D.pixelRatio,J=D.paddedRect.w-2,ie=D.paddedRect.h-2,le=f.right-f.left,me=f.bottom-f.top,xe=D.stretchX||[[0,J]],Re=D.stretchY||[[0,ie]],De=(Rr,Ur)=>Rr+Ur[1]-Ur[0],Be=xe.reduce(De,0),rt=Re.reduce(De,0),ot=J-Be,Pt=ie-rt;let kt=0,At=Be,$t=0,sr=rt,Wt=0,zr=ot,Zr=0,Br=Pt;if(D.content&&x){const Rr=D.content;kt=Wh(xe,0,Rr[0]),$t=Wh(Re,0,Rr[1]),At=Wh(xe,Rr[0],Rr[2]),sr=Wh(Re,Rr[1],Rr[3]),Wt=Rr[0]-kt,Zr=Rr[1]-$t,zr=Rr[2]-Rr[0]-At,Br=Rr[3]-Rr[1]-sr}const Nr=(Rr,Ur,Vr,Ir)=>{const In=Id(Rr.stretch-kt,At,le,f.left),mn=df(Rr.fixed-Wt,zr,Rr.stretch,Be),oi=Id(Ur.stretch-$t,sr,me,f.top),Ii=df(Ur.fixed-Zr,Br,Ur.stretch,rt),Ni=Id(Vr.stretch-kt,At,le,f.left),Jn=df(Vr.fixed-Wt,zr,Vr.stretch,Be),Xi=Id(Ir.stretch-$t,sr,me,f.top),Mi=df(Ir.fixed-Zr,Br,Ir.stretch,rt),si=new it(In,oi),wa=new it(Ni,oi),Sa=new it(Ni,Xi),Si=new it(In,Xi),da=new it(mn/j,Ii/j),ha=new it(Jn/j,Mi/j),li=u*Math.PI/180;if(li){const ba=Math.sin(li),di=Math.cos(li),Ta=[di,-ba,ba,di];si._matMult(Ta),wa._matMult(Ta),Si._matMult(Ta),Sa._matMult(Ta)}const Kn=Rr.stretch+Rr.fixed,no=Ur.stretch+Ur.fixed;return{tl:si,tr:wa,bl:Si,br:Sa,tex:{x:D.paddedRect.x+1+Kn,y:D.paddedRect.y+1+no,w:Vr.stretch+Vr.fixed-Kn,h:Ir.stretch+Ir.fixed-no},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:da,pixelOffsetBR:ha,minFontScaleX:zr/j/le,minFontScaleY:Br/j/me,isSDF:p}};if(x&&(D.stretchX||D.stretchY)){const Rr=Rm(xe,ot,Be),Ur=Rm(Re,Pt,rt);for(let Vr=0;Vr<Rr.length-1;Vr++){const Ir=Rr[Vr],In=Rr[Vr+1];for(let mn=0;mn<Ur.length-1;mn++)T.push(Nr(Ir,Ur[mn],In,Ur[mn+1]))}}else T.push(Nr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:J+1},{fixed:0,stretch:ie+1}));return T}function Wh(f,u,p){let x=0;for(const T of f)x+=Math.max(u,Math.min(p,T[1]))-Math.max(u,Math.min(p,T[0]));return x}function Rm(f,u,p){const x=[{fixed:-1,stretch:0}];for(const[T,D]of f){const j=x[x.length-1];x.push({fixed:T-j.stretch,stretch:j.stretch}),x.push({fixed:T-j.stretch,stretch:j.stretch+(D-T)})}return x.push({fixed:u+1,stretch:p}),x}function Id(f,u,p,x){return f/u*p+x}function df(f,u,p,x){return f-u*p/x}Pn("Anchor",ih);class oh{constructor(u,p,x,T,D,j,J,ie,le,me){if(this.boxStartIndex=u.length,le){let xe=j.top,Re=j.bottom;const De=j.collisionPadding;De&&(xe-=De[1],Re+=De[3]);let Be=Re-xe;Be>0&&(Be=Math.max(10,Be),this.circleDiameter=Be)}else{let xe=j.top*J-ie[0],Re=j.bottom*J+ie[2],De=j.left*J-ie[3],Be=j.right*J+ie[1];const rt=j.collisionPadding;if(rt&&(De-=rt[0]*J,xe-=rt[1]*J,Be+=rt[2]*J,Re+=rt[3]*J),me){const ot=new it(De,xe),Pt=new it(Be,xe),kt=new it(De,Re),At=new it(Be,Re),$t=me*Math.PI/180;ot._rotate($t),Pt._rotate($t),kt._rotate($t),At._rotate($t),De=Math.min(ot.x,Pt.x,kt.x,At.x),Be=Math.max(ot.x,Pt.x,kt.x,At.x),xe=Math.min(ot.y,Pt.y,kt.y,At.y),Re=Math.max(ot.y,Pt.y,kt.y,At.y)}u.emplaceBack(p.x,p.y,De,xe,Be,Re,x,T,D)}this.boxEndIndex=u.length}}class Da{constructor(u=[],p=tb){if(this.data=u,this.length=this.data.length,this.compare=p,this.length>0)for(let x=(this.length>>1)-1;x>=0;x--)this._down(x)}push(u){this.data.push(u),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const u=this.data[0],p=this.data.pop();return this.length--,this.length>0&&(this.data[0]=p,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:p,compare:x}=this,T=p[u];for(;u>0;){const D=u-1>>1,j=p[D];if(x(T,j)>=0)break;p[u]=j,u=D}p[u]=T}_down(u){const{data:p,compare:x}=this,T=this.length>>1,D=p[u];for(;u<T;){let j=1+(u<<1),J=p[j];const ie=j+1;if(ie<this.length&&x(p[ie],J)<0&&(j=ie,J=p[ie]),x(J,D)>=0)break;p[u]=J,u=j}p[u]=D}}function tb(f,u){return f<u?-1:f>u?1:0}function Md(f,u=1,p=!1){let x=1/0,T=1/0,D=-1/0,j=-1/0;const J=f[0];for(let De=0;De<J.length;De++){const Be=J[De];(!De||Be.x<x)&&(x=Be.x),(!De||Be.y<T)&&(T=Be.y),(!De||Be.x>D)&&(D=Be.x),(!De||Be.y>j)&&(j=Be.y)}const ie=Math.min(D-x,j-T);let le=ie/2;const me=new Da([],Np);if(ie===0)return new it(x,T);for(let De=x;De<D;De+=ie)for(let Be=T;Be<j;Be+=ie)me.push(new Bp(De+le,Be+le,le,f));let xe=function(De){let Be=0,rt=0,ot=0;const Pt=De[0];for(let kt=0,At=Pt.length,$t=At-1;kt<At;$t=kt++){const sr=Pt[kt],Wt=Pt[$t],zr=sr.x*Wt.y-Wt.x*sr.y;rt+=(sr.x+Wt.x)*zr,ot+=(sr.y+Wt.y)*zr,Be+=3*zr}return new Bp(rt/Be,ot/Be,0,De)}(f),Re=me.length;for(;me.length;){const De=me.pop();(De.d>xe.d||!xe.d)&&(xe=De,p&&console.log("found best %d after %d probes",Math.round(1e4*De.d)/1e4,Re)),De.max-xe.d<=u||(le=De.h/2,me.push(new Bp(De.p.x-le,De.p.y-le,le,f)),me.push(new Bp(De.p.x+le,De.p.y-le,le,f)),me.push(new Bp(De.p.x-le,De.p.y+le,le,f)),me.push(new Bp(De.p.x+le,De.p.y+le,le,f)),Re+=4)}return p&&(console.log(`num probes: ${Re}`),console.log(`best distance: ${xe.d}`)),xe.p}function Np(f,u){return u.max-f.max}function Bp(f,u,p,x){this.p=new it(f,u),this.h=p,this.d=function(T,D){let j=!1,J=1/0;for(let ie=0;ie<D.length;ie++){const le=D[ie];for(let me=0,xe=le.length,Re=xe-1;me<xe;Re=me++){const De=le[me],Be=le[Re];De.y>T.y!=Be.y>T.y&&T.x<(Be.x-De.x)*(T.y-De.y)/(Be.y-De.y)+De.x&&(j=!j),J=Math.min(J,Ll(T,De,Be))}}return(j?1:-1)*Math.sqrt(J)}(this.p,x),this.max=this.d+this.h*Math.SQRT2}const Xg=Number.POSITIVE_INFINITY;function Lv(f,u){return u[1]!==Xg?function(p,x,T){let D=0,j=0;switch(x=Math.abs(x),T=Math.abs(T),p){case"top-right":case"top-left":case"top":j=T-7;break;case"bottom-right":case"bottom-left":case"bottom":j=7-T}switch(p){case"top-right":case"bottom-right":case"right":D=-x;break;case"top-left":case"bottom-left":case"left":D=x}return[D,j]}(f,u[0],u[1]):function(p,x){let T=0,D=0;x<0&&(x=0);const j=x/Math.sqrt(2);switch(p){case"top-right":case"top-left":D=j-7;break;case"bottom-right":case"bottom-left":D=7-j;break;case"bottom":D=7-x;break;case"top":D=x-7}switch(p){case"top-right":case"bottom-right":T=-j;break;case"top-left":case"bottom-left":T=j;break;case"left":T=x;break;case"right":T=-x}return[T,D]}(f,u[0])}function Kg(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function rb(f,u,p,x,T,D,j,J,ie,le,me){let xe=D.textMaxSize.evaluate(u,{});xe===void 0&&(xe=j);const Re=f.layers[0].layout,De=Re.get("icon-offset").evaluate(u,{},me),Be=Yg(p.horizontal),rt=j/24,ot=f.tilePixelRatio*rt,Pt=f.tilePixelRatio*xe/24,kt=f.tilePixelRatio*J,At=f.tilePixelRatio*Re.get("symbol-spacing"),$t=Re.get("text-padding")*f.tilePixelRatio,sr=function(Ir,In,mn,oi=1){const Ii=Ir.get("icon-padding").evaluate(In,{},mn),Ni=Ii&&Ii.values;return[Ni[0]*oi,Ni[1]*oi,Ni[2]*oi,Ni[3]*oi]}(Re,u,me,f.tilePixelRatio),Wt=Re.get("text-max-angle")/180*Math.PI,zr=Re.get("text-rotation-alignment")!=="viewport"&&Re.get("symbol-placement")!=="point",Zr=Re.get("icon-rotation-alignment")==="map"&&Re.get("symbol-placement")!=="point",Br=Re.get("symbol-placement"),Nr=At/2,Rr=Re.get("icon-text-fit");let Ur;x&&Rr!=="none"&&(f.allowVerticalPlacement&&p.vertical&&(Ur=nh(x,p.vertical,Rr,Re.get("icon-text-fit-padding"),De,rt)),Be&&(x=nh(x,Be,Rr,Re.get("icon-text-fit-padding"),De,rt)));const Vr=(Ir,In)=>{In.x<0||In.x>=fa||In.y<0||In.y>=fa||function(mn,oi,Ii,Ni,Jn,Xi,Mi,si,wa,Sa,Si,da,ha,li,Kn,no,ba,di,Ta,ma,Bi,xs,Ho,Po,tl){const vl=mn.addToLineVertexArray(oi,Ii);let _l,as,bl,Ds,Ki=0,za=0,pc=0,yf=0,ch=-1,Up=-1;const Hu={};let jp=vr.exports(""),Jh=0,Qh=0;if(si._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Jh,Qh]=si.layout.get("text-offset").evaluate(Bi,{},Po).map(rl=>rl*Rs):(Jh=si.layout.get("text-radial-offset").evaluate(Bi,{},Po)*Rs,Qh=Xg),mn.allowVerticalPlacement&&Ni.vertical){const rl=si.layout.get("text-rotate").evaluate(Bi,{},Po)+90;bl=new oh(wa,oi,Sa,Si,da,Ni.vertical,ha,li,Kn,rl),Mi&&(Ds=new oh(wa,oi,Sa,Si,da,Mi,ba,di,Kn,rl))}if(Jn){const rl=si.layout.get("icon-rotate").evaluate(Bi,{}),ws=si.layout.get("icon-text-fit")!=="none",Vi=zv(Jn,rl,Ho,ws),fh=Mi?zv(Mi,rl,Ho,ws):void 0;as=new oh(wa,oi,Sa,Si,da,Jn,ba,di,!1,rl),Ki=4*Vi.length;const wu=mn.iconSizeData;let Wu=null;wu.kind==="source"?(Wu=[pf*si.layout.get("icon-size").evaluate(Bi,{})],Wu[0]>sh&&N(`${mn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):wu.kind==="composite"&&(Wu=[pf*xs.compositeIconSizes[0].evaluate(Bi,{},Po),pf*xs.compositeIconSizes[1].evaluate(Bi,{},Po)],(Wu[0]>sh||Wu[1]>sh)&&N(`${mn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),mn.addSymbols(mn.icon,Vi,Wu,ma,Ta,Bi,s.WritingMode.none,oi,vl.lineStartIndex,vl.lineLength,-1,Po),ch=mn.icon.placedSymbolArray.length-1,fh&&(za=4*fh.length,mn.addSymbols(mn.icon,fh,Wu,ma,Ta,Bi,s.WritingMode.vertical,oi,vl.lineStartIndex,vl.lineLength,-1,Po),Up=mn.icon.placedSymbolArray.length-1)}const $c=Object.keys(Ni.horizontal);for(const rl of $c){const ws=Ni.horizontal[rl];if(!_l){jp=vr.exports(ws.text);const fh=si.layout.get("text-rotate").evaluate(Bi,{},Po);_l=new oh(wa,oi,Sa,Si,da,ws,ha,li,Kn,fh)}const Vi=ws.positionedLines.length===1;if(pc+=$v(mn,oi,ws,Xi,si,Kn,Bi,no,vl,Ni.vertical?s.WritingMode.horizontal:s.WritingMode.horizontalOnly,Vi?$c:[rl],Hu,ch,xs,Po),Vi)break}Ni.vertical&&(yf+=$v(mn,oi,Ni.vertical,Xi,si,Kn,Bi,no,vl,s.WritingMode.vertical,["vertical"],Hu,Up,xs,Po));const ep=_l?_l.boxStartIndex:mn.collisionBoxArray.length,zd=_l?_l.boxEndIndex:mn.collisionBoxArray.length,Ld=bl?bl.boxStartIndex:mn.collisionBoxArray.length,vf=bl?bl.boxEndIndex:mn.collisionBoxArray.length,xl=as?as.boxStartIndex:mn.collisionBoxArray.length,dc=as?as.boxEndIndex:mn.collisionBoxArray.length,$d=Ds?Ds.boxStartIndex:mn.collisionBoxArray.length,tp=Ds?Ds.boxEndIndex:mn.collisionBoxArray.length;let Bl=-1;const _f=(rl,ws)=>rl&&rl.circleDiameter?Math.max(rl.circleDiameter,ws):ws;Bl=_f(_l,Bl),Bl=_f(bl,Bl),Bl=_f(as,Bl),Bl=_f(Ds,Bl);const Bm=Bl>-1?1:0;Bm&&(Bl*=tl/Rs),mn.glyphOffsetArray.length>=lo.MAX_GLYPHS&&N("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Bi.sortKey!==void 0&&mn.addToSortKeyRanges(mn.symbolInstances.length,Bi.sortKey),mn.symbolInstances.emplaceBack(oi.x,oi.y,Hu.right>=0?Hu.right:-1,Hu.center>=0?Hu.center:-1,Hu.left>=0?Hu.left:-1,Hu.vertical||-1,ch,Up,jp,ep,zd,Ld,vf,xl,dc,$d,tp,Sa,pc,yf,Ki,za,Bm,0,ha,Jh,Qh,Bl)}(f,In,Ir,p,x,T,Ur,f.layers[0],f.collisionBoxArray,u.index,u.sourceLayerIndex,f.index,ot,[$t,$t,$t,$t],zr,ie,kt,sr,Zr,De,u,D,le,me,j)};if(Br==="line")for(const Ir of xu(u.geometry,0,0,fa,fa)){const In=Rv(Ir,At,Wt,p.vertical||Be,x,24,Pt,f.overscaling,fa);for(const mn of In){const oi=Be;oi&&Nv(f,oi.text,Nr,mn)||Vr(Ir,mn)}}else if(Br==="line-center"){for(const Ir of u.geometry)if(Ir.length>1){const In=Ov(Ir,Wt,p.vertical||Be,x,24,Pt);In&&Vr(Ir,In)}}else if(u.type==="Polygon")for(const Ir of xm(u.geometry,0)){const In=Md(Ir,16);Vr(Ir[0],new ih(In.x,In.y,0))}else if(u.type==="LineString")for(const Ir of u.geometry)Vr(Ir,new ih(Ir[0].x,Ir[0].y,0));else if(u.type==="Point")for(const Ir of u.geometry)for(const In of Ir)Vr([In],new ih(In.x,In.y,0))}const sh=32640;function $v(f,u,p,x,T,D,j,J,ie,le,me,xe,Re,De,Be){const rt=function(kt,At,$t,sr,Wt,zr,Zr,Br){const Nr=sr.layout.get("text-rotate").evaluate(zr,{})*Math.PI/180,Rr=[];for(const Ur of At.positionedLines)for(const Vr of Ur.positionedGlyphs){if(!Vr.rect)continue;const Ir=Vr.rect||{};let In=4,mn=!0,oi=1,Ii=0;const Ni=(Wt||Br)&&Vr.vertical,Jn=Vr.metrics.advance*Vr.scale/2;if(Br&&At.verticalizable){const Ta=(Vr.scale-1)*Rs,ma=(Rs-Vr.metrics.width*Vr.scale)/2;Ii=Ur.lineOffset/2-(Vr.imageName?-ma:Ta)}if(Vr.imageName){const Ta=Zr[Vr.imageName];mn=Ta.sdf,oi=Ta.pixelRatio,In=1/oi}const Xi=Wt?[Vr.x+Jn,Vr.y]:[0,0];let Mi=Wt?[0,0]:[Vr.x+Jn+$t[0],Vr.y+$t[1]-Ii],si=[0,0];Ni&&(si=Mi,Mi=[0,0]);const wa=(Vr.metrics.left-In)*Vr.scale-Jn+Mi[0],Sa=(-Vr.metrics.top-In)*Vr.scale+Mi[1],Si=wa+Ir.w*Vr.scale/oi,da=Sa+Ir.h*Vr.scale/oi,ha=new it(wa,Sa),li=new it(Si,Sa),Kn=new it(wa,da),no=new it(Si,da);if(Ni){const Ta=new it(-Jn,Jn-Ed),ma=-Math.PI/2,Bi=12-Jn,xs=new it(22-Bi,-(Vr.imageName?Bi:0)),Ho=new it(...si);ha._rotateAround(ma,Ta)._add(xs)._add(Ho),li._rotateAround(ma,Ta)._add(xs)._add(Ho),Kn._rotateAround(ma,Ta)._add(xs)._add(Ho),no._rotateAround(ma,Ta)._add(xs)._add(Ho)}if(Nr){const Ta=Math.sin(Nr),ma=Math.cos(Nr),Bi=[ma,-Ta,Ta,ma];ha._matMult(Bi),li._matMult(Bi),Kn._matMult(Bi),no._matMult(Bi)}const ba=new it(0,0),di=new it(0,0);Rr.push({tl:ha,tr:li,bl:Kn,br:no,tex:Ir,writingMode:At.writingMode,glyphOffset:Xi,sectionIndex:Vr.sectionIndex,isSDF:mn,pixelOffsetTL:ba,pixelOffsetBR:di,minFontScaleX:0,minFontScaleY:0})}return Rr}(0,p,J,T,D,j,x,f.allowVerticalPlacement),ot=f.textSizeData;let Pt=null;ot.kind==="source"?(Pt=[pf*T.layout.get("text-size").evaluate(j,{})],Pt[0]>sh&&N(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ot.kind==="composite"&&(Pt=[pf*De.compositeTextSizes[0].evaluate(j,{},Be),pf*De.compositeTextSizes[1].evaluate(j,{},Be)],(Pt[0]>sh||Pt[1]>sh)&&N(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),f.addSymbols(f.text,rt,Pt,J,D,j,le,u,ie.lineStartIndex,ie.lineLength,Re,Be);for(const kt of me)xe[kt]=f.text.placedSymbolArray.length-1;return 4*rt.length}function Yg(f){for(const u in f)return f[u];return null}function Nv(f,u,p,x){const T=f.compareText;if(u in T){const D=T[u];for(let j=D.length-1;j>=0;j--)if(x.dist(D[j])<p)return!0}else T[u]=[];return T[u].push(x),!1}const Bv=cc.VectorTileFeature.types,Fv=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Zh(f,u,p,x,T,D,j,J,ie,le,me,xe,Re){const De=J?Math.min(sh,Math.round(J[0])):0,Be=J?Math.min(sh,Math.round(J[1])):0;f.emplaceBack(u,p,Math.round(32*x),Math.round(32*T),D,j,(De<<1)+(ie?1:0),Be,16*le,16*me,256*xe,256*Re)}function mf(f,u,p){f.emplaceBack(u.x,u.y,p),f.emplaceBack(u.x,u.y,p),f.emplaceBack(u.x,u.y,p),f.emplaceBack(u.x,u.y,p)}function Jg(f){for(const u of f.sections)if(Yl(u.text))return!0;return!1}class lh{constructor(u){this.layoutVertexArray=new Qe,this.indexArray=new st,this.programConfigurations=u,this.segments=new qt,this.dynamicLayoutVertexArray=new Ze,this.opacityVertexArray=new mt,this.placedSymbolArray=new $r}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,p,x,T){this.isEmpty()||(x&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,qg.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,p),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,ml.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,Fv,!0),this.opacityVertexBuffer.itemSize=1),(x||T)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Pn("SymbolBuffers",lh);class Dm{constructor(u,p,x){this.layoutVertexArray=new u,this.layoutAttributes=p,this.indexArray=new x,this.segments=new qt,this.collisionVertexArray=new xt}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,Q0.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Pn("CollisionBuffers",Dm);class lo{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(j=>j.id),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=of([]),this.placementViewportMatrix=of([]);const p=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Mv(this.zoom,p["text-size"]),this.iconSizeData=Mv(this.zoom,p["icon-size"]);const x=this.layers[0].layout,T=x.get("symbol-sort-key"),D=x.get("symbol-z-order");this.canOverlap=Lm(x,"text-overlap","text-allow-overlap")!=="never"||Lm(x,"icon-overlap","icon-allow-overlap")!=="never"||x.get("text-ignore-placement")||x.get("icon-ignore-placement"),this.sortFeaturesByKey=D!=="viewport-y"&&!T.isConstant(),this.sortFeaturesByY=(D==="viewport-y"||D==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,x.get("symbol-placement")==="point"&&(this.writingModes=x.get("text-writing-mode").map(j=>s.WritingMode[j])),this.stateDependentLayerIds=this.layers.filter(j=>j.isStateDependent()).map(j=>j.id),this.sourceID=u.sourceID}createArrays(){this.text=new lh(new _a(this.layers,this.zoom,u=>/^text/.test(u))),this.icon=new lh(new _a(this.layers,this.zoom,u=>/^icon/.test(u))),this.glyphOffsetArray=new g,this.lineVertexArray=new b,this.symbolInstances=new cn}calculateGlyphDependencies(u,p,x,T,D){for(let j=0;j<u.length;j++)if(p[u.charCodeAt(j)]=!0,(x||T)&&D){const J=Op[u.charAt(j)];J&&(p[J.charCodeAt(0)]=!0)}}populate(u,p,x){const T=this.layers[0],D=T.layout,j=D.get("text-font"),J=D.get("text-field"),ie=D.get("icon-image"),le=(J.value.kind!=="constant"||J.value.value instanceof ct&&!J.value.value.isEmpty()||J.value.value.toString().length>0)&&(j.value.kind!=="constant"||j.value.value.length>0),me=ie.value.kind!=="constant"||!!ie.value.value||Object.keys(ie.parameters).length>0,xe=D.get("symbol-sort-key");if(this.features=[],!le&&!me)return;const Re=p.iconDependencies,De=p.glyphDependencies,Be=p.availableImages,rt=new Ui(this.zoom);for(const{feature:ot,id:Pt,index:kt,sourceLayerIndex:At}of u){const $t=T._featureFilter.needGeometry,sr=gu(ot,$t);if(!T._featureFilter.filter(rt,sr,x))continue;let Wt,zr;if($t||(sr.geometry=ns(ot)),le){const Br=T.getValueAndResolveTokens("text-field",sr,x,Be),Nr=ct.factory(Br);Jg(Nr)&&(this.hasRTLText=!0),(!this.hasRTLText||Vu()==="unavailable"||this.hasRTLText&&Gs.isParsed())&&(Wt=eb(Nr,T,sr))}if(me){const Br=T.getValueAndResolveTokens("icon-image",sr,x,Be);zr=Br instanceof pt?Br:pt.fromString(Br)}if(!Wt&&!zr)continue;const Zr=this.sortFeaturesByKey?xe.evaluate(sr,{},x):void 0;if(this.features.push({id:Pt,text:Wt,icon:zr,index:kt,sourceLayerIndex:At,geometry:sr.geometry,properties:ot.properties,type:Bv[ot.type],sortKey:Zr}),zr&&(Re[zr.name]=!0),Wt){const Br=j.evaluate(sr,{},x).join(","),Nr=D.get("text-rotation-alignment")!=="viewport"&&D.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.WritingMode.vertical)>=0;for(const Rr of Wt.sections)if(Rr.image)Re[Rr.image.name]=!0;else{const Ur=So(Wt.toString()),Vr=Rr.fontStack||Br,Ir=De[Vr]=De[Vr]||{};this.calculateGlyphDependencies(Rr.text,Ir,Nr,this.allowVerticalPlacement,Ur)}}}D.get("symbol-placement")==="line"&&(this.features=function(ot){const Pt={},kt={},At=[];let $t=0;function sr(Br){At.push(ot[Br]),$t++}function Wt(Br,Nr,Rr){const Ur=kt[Br];return delete kt[Br],kt[Nr]=Ur,At[Ur].geometry[0].pop(),At[Ur].geometry[0]=At[Ur].geometry[0].concat(Rr[0]),Ur}function zr(Br,Nr,Rr){const Ur=Pt[Nr];return delete Pt[Nr],Pt[Br]=Ur,At[Ur].geometry[0].shift(),At[Ur].geometry[0]=Rr[0].concat(At[Ur].geometry[0]),Ur}function Zr(Br,Nr,Rr){const Ur=Rr?Nr[0][Nr[0].length-1]:Nr[0][0];return`${Br}:${Ur.x}:${Ur.y}`}for(let Br=0;Br<ot.length;Br++){const Nr=ot[Br],Rr=Nr.geometry,Ur=Nr.text?Nr.text.toString():null;if(!Ur){sr(Br);continue}const Vr=Zr(Ur,Rr),Ir=Zr(Ur,Rr,!0);if(Vr in kt&&Ir in Pt&&kt[Vr]!==Pt[Ir]){const In=zr(Vr,Ir,Rr),mn=Wt(Vr,Ir,At[In].geometry);delete Pt[Vr],delete kt[Ir],kt[Zr(Ur,At[mn].geometry,!0)]=mn,At[In].geometry=null}else Vr in kt?Wt(Vr,Ir,Rr):Ir in Pt?zr(Vr,Ir,Rr):(sr(Br),Pt[Vr]=$t-1,kt[Ir]=$t-1)}return At.filter(Br=>Br.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ot,Pt)=>ot.sortKey-Pt.sortKey)}update(u,p,x){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,p,this.layers,x),this.icon.programConfigurations.updatePaintArrays(u,p,this.layers,x))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,p){const x=this.lineVertexArray.length;if(u.segment!==void 0){let T=u.dist(p[u.segment+1]),D=u.dist(p[u.segment]);const j={};for(let J=u.segment+1;J<p.length;J++)j[J]={x:p[J].x,y:p[J].y,tileUnitDistanceFromAnchor:T},J<p.length-1&&(T+=p[J+1].dist(p[J]));for(let J=u.segment||0;J>=0;J--)j[J]={x:p[J].x,y:p[J].y,tileUnitDistanceFromAnchor:D},J>0&&(D+=p[J-1].dist(p[J]));for(let J=0;J<p.length;J++){const ie=j[J];this.lineVertexArray.emplaceBack(ie.x,ie.y,ie.tileUnitDistanceFromAnchor)}}return{lineStartIndex:x,lineLength:this.lineVertexArray.length-x}}addSymbols(u,p,x,T,D,j,J,ie,le,me,xe,Re){const De=u.indexArray,Be=u.layoutVertexArray,rt=u.segments.prepareSegment(4*p.length,Be,De,this.canOverlap?j.sortKey:void 0),ot=this.glyphOffsetArray.length,Pt=rt.vertexLength,kt=this.allowVerticalPlacement&&J===s.WritingMode.vertical?Math.PI/2:0,At=j.text&&j.text.sections;for(let $t=0;$t<p.length;$t++){const{tl:sr,tr:Wt,bl:zr,br:Zr,tex:Br,pixelOffsetTL:Nr,pixelOffsetBR:Rr,minFontScaleX:Ur,minFontScaleY:Vr,glyphOffset:Ir,isSDF:In,sectionIndex:mn}=p[$t],oi=rt.vertexLength,Ii=Ir[1];Zh(Be,ie.x,ie.y,sr.x,Ii+sr.y,Br.x,Br.y,x,In,Nr.x,Nr.y,Ur,Vr),Zh(Be,ie.x,ie.y,Wt.x,Ii+Wt.y,Br.x+Br.w,Br.y,x,In,Rr.x,Nr.y,Ur,Vr),Zh(Be,ie.x,ie.y,zr.x,Ii+zr.y,Br.x,Br.y+Br.h,x,In,Nr.x,Rr.y,Ur,Vr),Zh(Be,ie.x,ie.y,Zr.x,Ii+Zr.y,Br.x+Br.w,Br.y+Br.h,x,In,Rr.x,Rr.y,Ur,Vr),mf(u.dynamicLayoutVertexArray,ie,kt),De.emplaceBack(oi,oi+1,oi+2),De.emplaceBack(oi+1,oi+2,oi+3),rt.vertexLength+=4,rt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ir[0]),$t!==p.length-1&&mn===p[$t+1].sectionIndex||u.programConfigurations.populatePaintArrays(Be.length,j,j.index,{},Re,At&&At[mn])}u.placedSymbolArray.emplaceBack(ie.x,ie.y,ot,this.glyphOffsetArray.length-ot,Pt,le,me,ie.segment,x?x[0]:0,x?x[1]:0,T[0],T[1],J,0,!1,0,xe)}_addCollisionDebugVertex(u,p,x,T,D,j){return p.emplaceBack(0,0),u.emplaceBack(x.x,x.y,T,D,Math.round(j.x),Math.round(j.y))}addCollisionDebugVertices(u,p,x,T,D,j,J){const ie=D.segments.prepareSegment(4,D.layoutVertexArray,D.indexArray),le=ie.vertexLength,me=D.layoutVertexArray,xe=D.collisionVertexArray,Re=J.anchorX,De=J.anchorY;this._addCollisionDebugVertex(me,xe,j,Re,De,new it(u,p)),this._addCollisionDebugVertex(me,xe,j,Re,De,new it(x,p)),this._addCollisionDebugVertex(me,xe,j,Re,De,new it(x,T)),this._addCollisionDebugVertex(me,xe,j,Re,De,new it(u,T)),ie.vertexLength+=4;const Be=D.indexArray;Be.emplaceBack(le,le+1),Be.emplaceBack(le+1,le+2),Be.emplaceBack(le+2,le+3),Be.emplaceBack(le+3,le),ie.primitiveLength+=4}addDebugCollisionBoxes(u,p,x,T){for(let D=u;D<p;D++){const j=this.collisionBoxArray.get(D);this.addCollisionDebugVertices(j.x1,j.y1,j.x2,j.y2,T?this.textCollisionBox:this.iconCollisionBox,j.anchorPoint,x)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Dm(ft,xv.members,wt),this.iconCollisionBox=new Dm(ft,xv.members,wt);for(let u=0;u<this.symbolInstances.length;u++){const p=this.symbolInstances.get(u);this.addDebugCollisionBoxes(p.textBoxStartIndex,p.textBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.iconBoxStartIndex,p.iconBoxEndIndex,p,!1),this.addDebugCollisionBoxes(p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex,p,!1)}}_deserializeCollisionBoxesForSymbol(u,p,x,T,D,j,J,ie,le){const me={};for(let xe=p;xe<x;xe++){const Re=u.get(xe);me.textBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},me.textFeatureIndex=Re.featureIndex;break}for(let xe=T;xe<D;xe++){const Re=u.get(xe);me.verticalTextBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},me.verticalTextFeatureIndex=Re.featureIndex;break}for(let xe=j;xe<J;xe++){const Re=u.get(xe);me.iconBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},me.iconFeatureIndex=Re.featureIndex;break}for(let xe=ie;xe<le;xe++){const Re=u.get(xe);me.verticalIconBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},me.verticalIconFeatureIndex=Re.featureIndex;break}return me}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let p=0;p<this.symbolInstances.length;p++){const x=this.symbolInstances.get(p);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,x.textBoxStartIndex,x.textBoxEndIndex,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x.iconBoxStartIndex,x.iconBoxEndIndex,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,p){const x=u.placedSymbolArray.get(p),T=x.vertexStartIndex+4*x.numGlyphs;for(let D=x.vertexStartIndex;D<T;D+=4)u.indexArray.emplaceBack(D,D+1,D+2),u.indexArray.emplaceBack(D+1,D+2,D+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const p=Math.sin(u),x=Math.cos(u),T=[],D=[],j=[];for(let J=0;J<this.symbolInstances.length;++J){j.push(J);const ie=this.symbolInstances.get(J);T.push(0|Math.round(p*ie.anchorX+x*ie.anchorY)),D.push(ie.featureIndex)}return j.sort((J,ie)=>T[J]-T[ie]||D[ie]-D[J]),j}addToSortKeyRanges(u,p){const x=this.sortKeyRanges[this.sortKeyRanges.length-1];x&&x.sortKey===p?x.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:p,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const p of this.symbolInstanceIndexes){const x=this.symbolInstances.get(p);this.featureSortOrder.push(x.featureIndex),[x.rightJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.leftJustifiedTextSymbolIndex].forEach((T,D,j)=>{T>=0&&j.indexOf(T)===D&&this.addIndicesForPlacedSymbol(this.text,T)}),x.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,x.verticalPlacedTextSymbolIndex),x.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.placedIconSymbolIndex),x.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Pn("SymbolBucket",lo,{omit:["layers","collisionBoxArray","features","compareText"]}),lo.MAX_GLYPHS=65535,lo.addDynamicAttributes=mf;const ro=new Va({"symbol-placement":new Tn(Mt.layout_symbol["symbol-placement"]),"symbol-spacing":new Tn(Mt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Tn(Mt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new zn(Mt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Tn(Mt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Tn(Mt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Tn(Mt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Tn(Mt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Tn(Mt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Tn(Mt.layout_symbol["icon-rotation-alignment"]),"icon-size":new zn(Mt.layout_symbol["icon-size"]),"icon-text-fit":new Tn(Mt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Tn(Mt.layout_symbol["icon-text-fit-padding"]),"icon-image":new zn(Mt.layout_symbol["icon-image"]),"icon-rotate":new zn(Mt.layout_symbol["icon-rotate"]),"icon-padding":new zn(Mt.layout_symbol["icon-padding"]),"icon-keep-upright":new Tn(Mt.layout_symbol["icon-keep-upright"]),"icon-offset":new zn(Mt.layout_symbol["icon-offset"]),"icon-anchor":new zn(Mt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Tn(Mt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Tn(Mt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Tn(Mt.layout_symbol["text-rotation-alignment"]),"text-field":new zn(Mt.layout_symbol["text-field"]),"text-font":new zn(Mt.layout_symbol["text-font"]),"text-size":new zn(Mt.layout_symbol["text-size"]),"text-max-width":new zn(Mt.layout_symbol["text-max-width"]),"text-line-height":new Tn(Mt.layout_symbol["text-line-height"]),"text-letter-spacing":new zn(Mt.layout_symbol["text-letter-spacing"]),"text-justify":new zn(Mt.layout_symbol["text-justify"]),"text-radial-offset":new zn(Mt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Tn(Mt.layout_symbol["text-variable-anchor"]),"text-anchor":new zn(Mt.layout_symbol["text-anchor"]),"text-max-angle":new Tn(Mt.layout_symbol["text-max-angle"]),"text-writing-mode":new Tn(Mt.layout_symbol["text-writing-mode"]),"text-rotate":new zn(Mt.layout_symbol["text-rotate"]),"text-padding":new Tn(Mt.layout_symbol["text-padding"]),"text-keep-upright":new Tn(Mt.layout_symbol["text-keep-upright"]),"text-transform":new zn(Mt.layout_symbol["text-transform"]),"text-offset":new zn(Mt.layout_symbol["text-offset"]),"text-allow-overlap":new Tn(Mt.layout_symbol["text-allow-overlap"]),"text-overlap":new Tn(Mt.layout_symbol["text-overlap"]),"text-ignore-placement":new Tn(Mt.layout_symbol["text-ignore-placement"]),"text-optional":new Tn(Mt.layout_symbol["text-optional"])});var zm={paint:new Va({"icon-opacity":new zn(Mt.paint_symbol["icon-opacity"]),"icon-color":new zn(Mt.paint_symbol["icon-color"]),"icon-halo-color":new zn(Mt.paint_symbol["icon-halo-color"]),"icon-halo-width":new zn(Mt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new zn(Mt.paint_symbol["icon-halo-blur"]),"icon-translate":new Tn(Mt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Tn(Mt.paint_symbol["icon-translate-anchor"]),"text-opacity":new zn(Mt.paint_symbol["text-opacity"]),"text-color":new zn(Mt.paint_symbol["text-color"],{runtimeType:hn,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new zn(Mt.paint_symbol["text-halo-color"]),"text-halo-width":new zn(Mt.paint_symbol["text-halo-width"]),"text-halo-blur":new zn(Mt.paint_symbol["text-halo-blur"]),"text-translate":new Tn(Mt.paint_symbol["text-translate"]),"text-translate-anchor":new Tn(Mt.paint_symbol["text-translate-anchor"])}),layout:ro};class Od{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:Rn,this.defaultValue=u}evaluate(u){if(u.formattedSection){const p=this.defaultValue.property.overrides;if(p&&p.hasOverride(u.formattedSection))return p.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pn("FormatSectionOverride",Od,{omit:["defaultValue"]});class Fp extends Co{constructor(u){super(u,zm)}recalculate(u,p){if(super.recalculate(u,p),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const x=this.layout.get("text-writing-mode");if(x){const T=[];for(const D of x)T.indexOf(D)<0&&T.push(D);this.layout._values["text-writing-mode"]=T}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,p,x,T){const D=this.layout.get(u).evaluate(p,{},x,T),j=this._unevaluatedLayout._values[u];return j.isDataDriven()||sa(j.value)||!D?D:function(J,ie){return ie.replace(/{([^{}]+)}/g,(le,me)=>me in J?String(J[me]):"")}(p.properties,D)}createBucket(u){return new lo(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of zm.paint.overridableProperties){if(!Fp.hasPaintOverride(this.layout,u))continue;const p=this.paint.get(u),x=new Od(p),T=new Wn(x,p.property.specification);let D=null;D=p.value.kind==="constant"||p.value.kind==="source"?new eo("source",T):new wi("composite",T,p.value.zoomStops),this.paint._values[u]=new yi(p.property,D,p.parameters)}}_handleOverridablePaintPropertyUpdate(u,p,x){return!(!this.layout||p.isDataDriven()||x.isDataDriven())&&Fp.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,p){const x=u.get("text-field"),T=zm.paint.properties[p];let D=!1;const j=J=>{for(const ie of J)if(T.overrides&&T.overrides.hasOverride(ie))return void(D=!0)};if(x.value.kind==="constant"&&x.value.value instanceof ct)j(x.value.value.sections);else if(x.value.kind==="source"){const J=le=>{D||(le instanceof qr&&Vt(le.value)===Ci?j(le.value.sections):le instanceof Wr?j(le.sections):le.eachChild(J))},ie=x.value;ie._styleExpression&&J(ie._styleExpression.expression)}return D}}function Lm(f,u,p){let x="never";const T=f.get(u);return T?x=T:f.get(p)&&(x="always"),x}var Uv={paint:new Va({"background-color":new Tn(Mt.paint_background["background-color"]),"background-pattern":new du(Mt.paint_background["background-pattern"]),"background-opacity":new Tn(Mt.paint_background["background-opacity"])})},Qg={paint:new Va({"raster-opacity":new Tn(Mt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Tn(Mt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Tn(Mt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Tn(Mt.paint_raster["raster-brightness-max"]),"raster-saturation":new Tn(Mt.paint_raster["raster-saturation"]),"raster-contrast":new Tn(Mt.paint_raster["raster-contrast"]),"raster-resampling":new Tn(Mt.paint_raster["raster-resampling"]),"raster-fade-duration":new Tn(Mt.paint_raster["raster-fade-duration"])})};class Xh extends Co{constructor(u){super(u,{}),this.onAdd=p=>{this.implementation.onAdd&&this.implementation.onAdd(p,p.painter.context.gl)},this.onRemove=p=>{this.implementation.onRemove&&this.implementation.onRemove(p,p.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const Kh={circle:class extends Co{constructor(f){super(f,$h)}createBucket(f){return new Jl(f)}queryRadius(f){const u=f;return qo("circle-radius",this,u)+qo("circle-stroke-width",this,u)+qu(this.paint.get("circle-translate"))}queryIntersectsFeature(f,u,p,x,T,D,j,J){const ie=af(f,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),D.angle,j),le=this.paint.get("circle-radius").evaluate(u,p)+this.paint.get("circle-stroke-width").evaluate(u,p),me=this.paint.get("circle-pitch-alignment")==="map",xe=me?ie:function(De,Be){return De.map(rt=>vm(rt,Be))}(ie,J),Re=me?le*j:le;for(const De of x)for(const Be of De){const rt=me?Be:vm(Be,J);let ot=Re;const Pt=Bh([],[Be.x,Be.y,0,1],J);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ot*=Pt[3]/D.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ot*=D.cameraToCenterDistance/Pt[3]),Lh(xe,rt,ot))return!0}return!1}},heatmap:class extends Co{constructor(f){super(f,Rg),this._updateColorRamp()}createBucket(f){return new fv(f)}_handleSpecialPaintPropertyUpdate(f){f==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Tp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Co{constructor(f){super(f,Z0)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Co{constructor(f){super(f,yv)}recalculate(f,u){super.recalculate(f,u);const p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(f){return new vd(f)}queryRadius(){return qu(this.paint.get("fill-translate"))}queryIntersectsFeature(f,u,p,x,T,D,j){return nf(af(f,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),D.angle,j),x)}isTileClipped(){return!0}},"fill-extrusion":class extends Co{constructor(f){super(f,Ug)}createBucket(f){return new _d(f)}queryRadius(){return qu(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(f,u,p,x,T,D,j,J){const ie=af(f,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),D.angle,j),le=this.paint.get("fill-extrusion-height").evaluate(u,p),me=this.paint.get("fill-extrusion-base").evaluate(u,p),xe=function(De,Be,rt,ot){const Pt=[];for(const kt of De){const At=[kt.x,kt.y,0,1];Bh(At,At,Be),Pt.push(new it(At[0]/At[3],At[1]/At[3]))}return Pt}(ie,J),Re=function(De,Be,rt,ot){const Pt=[],kt=[],At=ot[8]*Be,$t=ot[9]*Be,sr=ot[10]*Be,Wt=ot[11]*Be,zr=ot[8]*rt,Zr=ot[9]*rt,Br=ot[10]*rt,Nr=ot[11]*rt;for(const Rr of De){const Ur=[],Vr=[];for(const Ir of Rr){const In=Ir.x,mn=Ir.y,oi=ot[0]*In+ot[4]*mn+ot[12],Ii=ot[1]*In+ot[5]*mn+ot[13],Ni=ot[2]*In+ot[6]*mn+ot[14],Jn=ot[3]*In+ot[7]*mn+ot[15],Xi=Ni+sr,Mi=Jn+Wt,si=oi+zr,wa=Ii+Zr,Sa=Ni+Br,Si=Jn+Nr,da=new it((oi+At)/Mi,(Ii+$t)/Mi);da.z=Xi/Mi,Ur.push(da);const ha=new it(si/Si,wa/Si);ha.z=Sa/Si,Vr.push(ha)}Pt.push(Ur),kt.push(Vr)}return[Pt,kt]}(x,me,le,J);return function(De,Be,rt){let ot=1/0;nf(rt,Be)&&(ot=bv(rt,Be[0]));for(let Pt=0;Pt<Be.length;Pt++){const kt=Be[Pt],At=De[Pt];for(let $t=0;$t<kt.length-1;$t++){const sr=kt[$t],Wt=[sr,kt[$t+1],At[$t+1],At[$t],sr];lc(rt,Wt)&&(ot=Math.min(ot,bv(rt,Wt)))}}return ot!==1/0&&ot}(Re[0],Re[1],xe)}},line:class extends Co{constructor(f){super(f,cf),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(f){f==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ou,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(f,u){super.recalculate(f,u),this.paint._values["line-floorwidth"]=Dc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,f)}createBucket(f){return new uf(f)}queryRadius(f){const u=f,p=ff(qo("line-width",this,u),qo("line-gap-width",this,u)),x=qo("line-offset",this,u);return p/2+Math.abs(x)+qu(this.paint.get("line-translate"))}queryIntersectsFeature(f,u,p,x,T,D,j){const J=af(f,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),D.angle,j),ie=j/2*ff(this.paint.get("line-width").evaluate(u,p),this.paint.get("line-gap-width").evaluate(u,p)),le=this.paint.get("line-offset").evaluate(u,p);return le&&(x=function(me,xe){const Re=[];for(let De=0;De<me.length;De++){const Be=me[De],rt=[];for(let ot=0;ot<Be.length;ot++){const Pt=Be[ot-1],kt=Be[ot],At=Be[ot+1],$t=ot===0?new it(0,0):kt.sub(Pt)._unit()._perp(),sr=ot===Be.length-1?new it(0,0):At.sub(kt)._unit()._perp(),Wt=$t._add(sr)._unit(),zr=Wt.x*sr.x+Wt.y*sr.y;zr!==0&&Wt._mult(1/zr),rt.push(Wt._mult(xe)._add(kt))}Re.push(rt)}return Re}(x,le*j)),function(me,xe,Re){for(let De=0;De<xe.length;De++){const Be=xe[De];if(me.length>=3){for(let rt=0;rt<Be.length;rt++)if(Ja(me,Be[rt]))return!0}if(dl(me,Be,Re))return!0}return!1}(J,x,ie)}isTileClipped(){return!0}},symbol:Fp,background:class extends Co{constructor(f){super(f,Uv)}},raster:class extends Co{constructor(f){super(f,Qg)}}};class jv{constructor(u){this._callback=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Lo=63710088e-1;class uo{constructor(u,p){if(isNaN(u)||isNaN(p))throw new Error(`Invalid LngLat object: (${u}, ${p})`);if(this.lng=+u,this.lat=+p,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new uo(L(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const p=Math.PI/180,x=this.lat*p,T=u.lat*p,D=Math.sin(x)*Math.sin(T)+Math.cos(x)*Math.cos(T)*Math.cos((u.lng-this.lng)*p);return Lo*Math.acos(Math.min(D,1))}toBounds(u=0){const p=360*u/40075017,x=p/Math.cos(Math.PI/180*this.lat);return new yl(new uo(this.lng-x,this.lat-p),new uo(this.lng+x,this.lat+p))}static convert(u){if(u instanceof uo)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new uo(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new uo(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class yl{constructor(u,p){u&&(p?this.setSouthWest(u).setNorthEast(p):u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1]))}setNorthEast(u){return this._ne=u instanceof uo?new uo(u.lng,u.lat):uo.convert(u),this}setSouthWest(u){return this._sw=u instanceof uo?new uo(u.lng,u.lat):uo.convert(u),this}extend(u){const p=this._sw,x=this._ne;let T,D;if(u instanceof uo)T=u,D=u;else{if(!(u instanceof yl))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(yl.convert(u)):this.extend(uo.convert(u)):this;if(T=u._sw,D=u._ne,!T||!D)return this}return p||x?(p.lng=Math.min(T.lng,p.lng),p.lat=Math.min(T.lat,p.lat),x.lng=Math.max(D.lng,x.lng),x.lat=Math.max(D.lat,x.lat)):(this._sw=new uo(T.lng,T.lat),this._ne=new uo(D.lng,D.lat)),this}getCenter(){return new uo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new uo(this.getWest(),this.getNorth())}getSouthEast(){return new uo(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(u){const{lng:p,lat:x}=uo.convert(u);let T=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(T=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=x&&x<=this._ne.lat&&T}static convert(u){return u instanceof yl?u:u&&new yl(u)}}const Rd=2*Math.PI*Lo;function uh(f){return Rd*Math.cos(f*Math.PI/180)}function $m(f){return(180+f)/360}function Yh(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function Lc(f,u){return f/uh(u)}function Nm(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}class Dd{constructor(u,p,x=0){this.x=+u,this.y=+p,this.z=+x}static fromLngLat(u,p=0){const x=uo.convert(u);return new Dd($m(x.lng),Yh(x.lat),Lc(p,x.lat))}toLngLat(){return new uo(360*this.x-180,Nm(this.y))}toAltitude(){return this.z*uh(Nm(this.y))}meterInMercatorCoordinateUnits(){return 1/Rd*(u=Nm(this.y),1/Math.cos(u*Math.PI/180));var u}}function Vv(f,u,p){var x=2*Math.PI*6378137/256/Math.pow(2,p);return[f*x-2*Math.PI*6378137/2,u*x-2*Math.PI*6378137/2]}class Go{constructor(u,p,x){if(u<0||u>25||x<0||x>=Math.pow(2,u)||p<0||p>=Math.pow(2,u))throw new Error(`x=${p}, y=${x}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=p,this.y=x,this.key=o(0,u,u,p,x)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,p,x){const T=(j=this.y,J=this.z,ie=Vv(256*(D=this.x),256*(j=Math.pow(2,J)-j-1),J),le=Vv(256*(D+1),256*(j+1),J),ie[0]+","+ie[1]+","+le[0]+","+le[1]);var D,j,J,ie,le;const me=function(xe,Re,De){let Be,rt="";for(let ot=xe;ot>0;ot--)Be=1<<ot-1,rt+=(Re&Be?1:0)+(De&Be?2:0);return rt}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(x==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,p>1?"@2x":"").replace(/{quadkey}/g,me).replace(/{bbox-epsg-3857}/g,T)}isChildOf(u){const p=this.z-u.z;return p>0&&u.x===this.x>>p&&u.y===this.y>>p}getTilePoint(u){const p=Math.pow(2,this.z);return new it((u.x*p-this.x)*fa,(u.y*p-this.y)*fa)}toString(){return`${this.z}/${this.x}/${this.y}`}}class gf{constructor(u,p){this.wrap=u,this.canonical=p,this.key=o(u,p.z,p.z,p.x,p.y)}}class iu{constructor(u,p,x,T,D){if(u<x)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${x}`);this.overscaledZ=u,this.wrap=p,this.canonical=new Go(x,+T,+D),this.key=o(p,u,x,T,D)}clone(){return new iu(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-u;return u>this.canonical.z?new iu(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new iu(u,this.wrap,u,this.canonical.x>>p,this.canonical.y>>p)}calculateScaledKey(u,p){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const x=this.canonical.z-u;return u>this.canonical.z?o(this.wrap*+p,u,this.canonical.z,this.canonical.x,this.canonical.y):o(this.wrap*+p,u,u,this.canonical.x>>x,this.canonical.y>>x)}isChildOf(u){if(u.wrap!==this.wrap)return!1;const p=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>p&&u.canonical.y===this.canonical.y>>p}children(u){if(this.overscaledZ>=u)return[new iu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const p=this.canonical.z+1,x=2*this.canonical.x,T=2*this.canonical.y;return[new iu(p,this.wrap,p,x,T),new iu(p,this.wrap,p,x+1,T),new iu(p,this.wrap,p,x,T+1),new iu(p,this.wrap,p,x+1,T+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new iu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new iu(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new gf(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new Dd(u.x-this.wrap,u.y))}}function o(f,u,p,x,T){(f*=2)<0&&(f=-1*f-1);const D=1<<p;return(D*D*f+D*T+x).toString(36)+p.toString(36)+u.toString(36)}Pn("CanonicalTileID",Go),Pn("OverscaledTileID",iu,{omit:["posMatrix"]});class h{constructor(u,p,x){if(this.uid=u,p.height!==p.width)throw new RangeError("DEM tiles must be square");if(x&&x!=="mapbox"&&x!=="terrarium")return void N(`"${x}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=p.height;const T=this.dim=p.height-2;this.data=new Uint32Array(p.data.buffer),this.encoding=x||"mapbox";for(let D=0;D<T;D++)this.data[this._idx(-1,D)]=this.data[this._idx(0,D)],this.data[this._idx(T,D)]=this.data[this._idx(T-1,D)],this.data[this._idx(D,-1)]=this.data[this._idx(D,0)],this.data[this._idx(D,T)]=this.data[this._idx(D,T-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(T,-1)]=this.data[this._idx(T-1,0)],this.data[this._idx(-1,T)]=this.data[this._idx(0,T-1)],this.data[this._idx(T,T)]=this.data[this._idx(T-1,T-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let D=0;D<T;D++)for(let j=0;j<T;j++){const J=this.get(D,j);J>this.max&&(this.max=J),J<this.min&&(this.min=J)}}get(u,p){const x=new Uint8Array(this.data.buffer),T=4*this._idx(u,p);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(x[T],x[T+1],x[T+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(u,p){if(u<-1||u>=this.dim+1||p<-1||p>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(p+1)*this.stride+(u+1)}_unpackMapbox(u,p,x){return(256*u*256+256*p+x)/10-1e4}_unpackTerrarium(u,p,x){return 256*u+p+x/256-32768}getPixels(){return new is({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,p,x){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let T=p*this.dim,D=p*this.dim+this.dim,j=x*this.dim,J=x*this.dim+this.dim;switch(p){case-1:T=D-1;break;case 1:D=T+1}switch(x){case-1:j=J-1;break;case 1:J=j+1}const ie=-p*this.dim,le=-x*this.dim;for(let me=j;me<J;me++)for(let xe=T;xe<D;xe++)this.data[this._idx(xe,me)]=u.data[this._idx(xe+ie,me+le)]}}Pn("DEMData",h);class m{constructor(u){this._stringToNumber={},this._numberToString=[];for(let p=0;p<u.length;p++){const x=u[p];this._stringToNumber[x]=p,this._numberToString[p]=x}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class E{constructor(u,p,x,T,D){this.type="Feature",this._vectorTileFeature=u,u._z=p,u._x=x,u._y=T,this.properties=u.properties,this.id=D}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const p in this)p!=="_geometry"&&p!=="_vectorTileFeature"&&(u[p]=this[p]);return u}}class I{constructor(u,p){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new to(fa,16,0),this.grid3D=new to(fa,16,0),this.featureIndexArray=new C,this.promoteId=p}insert(u,p,x,T,D,j){const J=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(x,T,D);const ie=j?this.grid3D:this.grid;for(let le=0;le<p.length;le++){const me=p[le],xe=[1/0,1/0,-1/0,-1/0];for(let Re=0;Re<me.length;Re++){const De=me[Re];xe[0]=Math.min(xe[0],De.x),xe[1]=Math.min(xe[1],De.y),xe[2]=Math.max(xe[2],De.x),xe[3]=Math.max(xe[3],De.y)}xe[0]<fa&&xe[1]<fa&&xe[2]>=0&&xe[3]>=0&&ie.insert(J,xe[0],xe[1],xe[2],xe[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new cc.VectorTile(new Gg(this.rawTileData)).layers,this.sourceLayerCoder=new m(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,p,x,T){this.loadVTLayers();const D=u.params||{},j=fa/u.tileSize/u.scale,J=ll(D.filter),ie=u.queryGeometry,le=u.queryPadding*j,me=Z(ie),xe=this.grid.query(me.minX-le,me.minY-le,me.maxX+le,me.maxY+le),Re=Z(u.cameraQueryGeometry),De=this.grid3D.query(Re.minX-le,Re.minY-le,Re.maxX+le,Re.maxY+le,(ot,Pt,kt,At)=>function($t,sr,Wt,zr,Zr){for(const Nr of $t)if(sr<=Nr.x&&Wt<=Nr.y&&zr>=Nr.x&&Zr>=Nr.y)return!0;const Br=[new it(sr,Wt),new it(sr,Zr),new it(zr,Zr),new it(zr,Wt)];if($t.length>2){for(const Nr of Br)if(Ja($t,Nr))return!0}for(let Nr=0;Nr<$t.length-1;Nr++)if(vo($t[Nr],$t[Nr+1],Br))return!0;return!1}(u.cameraQueryGeometry,ot-le,Pt-le,kt+le,At+le));for(const ot of De)xe.push(ot);xe.sort(ne);const Be={};let rt;for(let ot=0;ot<xe.length;ot++){const Pt=xe[ot];if(Pt===rt)continue;rt=Pt;const kt=this.featureIndexArray.get(Pt);let At=null;this.loadMatchingFeature(Be,kt.bucketIndex,kt.sourceLayerIndex,kt.featureIndex,J,D.layers,D.availableImages,p,x,T,($t,sr,Wt)=>(At||(At=ns($t)),sr.queryIntersectsFeature(ie,$t,Wt,At,this.z,u.transform,j,u.pixelPosMatrix)))}return Be}loadMatchingFeature(u,p,x,T,D,j,J,ie,le,me,xe){const Re=this.bucketLayerIDs[p];if(j&&!function(ot,Pt){for(let kt=0;kt<ot.length;kt++)if(Pt.indexOf(ot[kt])>=0)return!0;return!1}(j,Re))return;const De=this.sourceLayerCoder.decode(x),Be=this.vtLayers[De].feature(T);if(D.needGeometry){const ot=gu(Be,!0);if(!D.filter(new Ui(this.tileID.overscaledZ),ot,this.tileID.canonical))return}else if(!D.filter(new Ui(this.tileID.overscaledZ),Be))return;const rt=this.getId(Be,De);for(let ot=0;ot<Re.length;ot++){const Pt=Re[ot];if(j&&j.indexOf(Pt)<0)continue;const kt=ie[Pt];if(!kt)continue;let At={};rt&&me&&(At=me.getState(kt.sourceLayer||"_geojsonTileLayer",rt));const $t=F({},le[Pt]);$t.paint=V($t.paint,kt.paint,Be,At,J),$t.layout=V($t.layout,kt.layout,Be,At,J);const sr=!xe||xe(Be,kt,At);if(!sr)continue;const Wt=new E(Be,this.z,this.x,this.y,rt);Wt.layer=$t;let zr=u[Pt];zr===void 0&&(zr=u[Pt]=[]),zr.push({featureIndex:T,feature:Wt,intersectionZ:sr})}}lookupSymbolFeatures(u,p,x,T,D,j,J,ie){const le={};this.loadVTLayers();const me=ll(D);for(const xe of u)this.loadMatchingFeature(le,x,T,xe,me,j,J,ie,p);return le}hasLayer(u){for(const p of this.bucketLayerIDs)for(const x of p)if(u===x)return!0;return!1}getId(u,p){let x=u.id;return this.promoteId&&(x=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[p]],typeof x=="boolean"&&(x=Number(x))),x}}function V(f,u,p,x,T){return G(f,(D,j)=>{const J=u instanceof vi?u.get(j):null;return J&&J.evaluate?J.evaluate(p,x,T):J})}function Z(f){let u=1/0,p=1/0,x=-1/0,T=-1/0;for(const D of f)u=Math.min(u,D.x),p=Math.min(p,D.y),x=Math.max(x,D.x),T=Math.max(T,D.y);return{minX:u,minY:p,maxX:x,maxY:T}}function ne(f,u){return u-f}var ce;Pn("FeatureIndex",I,{omit:["rawTileData","sourceLayerCoder"]}),s.PerformanceMarkers=void 0,(ce=s.PerformanceMarkers||(s.PerformanceMarkers={})).create="create",ce.load="load",ce.fullLoad="fullLoad";let _e=null,Se=[];const Me=1e3/30,Ve={mark(f){performance.mark(f)},frame(f){const u=f;_e!=null&&Se.push(u-_e),_e=u},clearMetrics(){_e=null,Se=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const f in s.PerformanceMarkers)performance.clearMarks(s.PerformanceMarkers[f])},getPerformanceMetrics(){performance.measure("loadTime",s.PerformanceMarkers.create,s.PerformanceMarkers.load),performance.measure("fullLoadTime",s.PerformanceMarkers.create,s.PerformanceMarkers.fullLoad);const f=performance.getEntriesByName("loadTime")[0].duration,u=performance.getEntriesByName("fullLoadTime")[0].duration,p=Se.length,x=1/(Se.reduce((D,j)=>D+j,0)/p/1e3),T=Se.filter(D=>D>Me).reduce((D,j)=>D+(j-Me)/Me,0);return{loadTime:f,fullLoadTime:u,fps:x,percentDroppedFrames:T/(p+T)*100}}};s.AJAXError=an,s.ARRAY_TYPE=_s,s.Actor=class{constructor(f,u,p){this.target=f,this.parent=u,this.mapId=p,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},re(["receive","process"],this),this.invoker=new jv(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=te()?f:window}send(f,u,p,x,T=!1){const D=Math.round(1e18*Math.random()).toString(36).substring(0,10);p&&(this.callbacks[D]=p);const j=Ie(this.globalScope)?void 0:[];return this.target.postMessage({id:D,type:f,hasCallback:!!p,targetMapId:x,mustQueue:T,sourceMapId:this.mapId,data:Kl(u,j)},j),{cancel:()=>{p&&delete this.callbacks[D],this.target.postMessage({id:D,type:"<cancel>",targetMapId:x,sourceMapId:this.mapId})}}}receive(f){const u=f.data,p=u.id;if(p&&(!u.targetMapId||this.mapId===u.targetMapId))if(u.type==="<cancel>"){delete this.tasks[p];const x=this.cancelCallbacks[p];delete this.cancelCallbacks[p],x&&x()}else te()||u.mustQueue?(this.tasks[p]=u,this.taskQueue.push(p),this.invoker.trigger()):this.processTask(p,u)}process(){if(!this.taskQueue.length)return;const f=this.taskQueue.shift(),u=this.tasks[f];delete this.tasks[f],this.taskQueue.length&&this.invoker.trigger(),u&&this.processTask(f,u)}processTask(f,u){if(u.type==="<response>"){const p=this.callbacks[f];delete this.callbacks[f],p&&(u.error?p(ks(u.error)):p(null,ks(u.data)))}else{let p=!1;const x=Ie(this.globalScope)?void 0:[],T=u.hasCallback?(J,ie)=>{p=!0,delete this.cancelCallbacks[f],this.target.postMessage({id:f,type:"<response>",sourceMapId:this.mapId,error:J?Kl(J):null,data:Kl(ie,x)},x)}:J=>{p=!0};let D=null;const j=ks(u.data);if(this.parent[u.type])D=this.parent[u.type](u.sourceMapId,j,T);else if(this.parent.getWorkerSource){const J=u.type.split(".");D=this.parent.getWorkerSource(u.sourceMapId,J[0],j.source)[J[1]](j,T)}else T(new Error(`Could not find function ${u.type}`));!p&&D&&D.cancel&&(this.cancelCallbacks[f]=D.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.AlphaImage=Oc,s.CanonicalTileID=Go,s.CollisionBoxArray=mr,s.CollisionCircleLayoutArray=class extends Te{},s.Color=Le,s.DEMData=h,s.DataConstantProperty=Tn,s.DictionaryCoder=m,s.EXTENT=fa,s.ErrorEvent=Ka,s.EvaluationParameters=Ui,s.Event=ka,s.Evented=dr,s.FeatureIndex=I,s.FillBucket=vd,s.FillExtrusionBucket=_d,s.GeoJSONFeature=E,s.ImageAtlas=hf,s.ImagePosition=nu,s.LineBucket=uf,s.LineStripIndexArray=class extends bt{},s.LngLat=uo,s.LngLatBounds=yl,s.MercatorCoordinate=Dd,s.ONE_EM=Rs,s.OverscaledTileID=iu,s.PerformanceUtils=Ve,s.PosArray=U,s.Properties=Va,s.QuadTriangleArray=class extends Ke{},s.RGBAImage=is,s.RasterBoundsArray=class extends O{},s.RequestPerformance=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},s.ResourceType=Qn,s.SegmentVector=qt,s.SymbolBucket=lo,s.Transitionable=Gf,s.TriangleIndexArray=st,s.Uniform1f=mi,s.Uniform1i=class extends Zn{constructor(f,u){super(f,u),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},s.Uniform2f=class extends Zn{constructor(f,u){super(f,u),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},s.Uniform3f=class extends Zn{constructor(f,u){super(f,u),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},s.Uniform4f=pi,s.UniformColor=ci,s.UniformMatrix4f=class extends Zn{constructor(f,u){super(f,u),this.current=_i}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let u=1;u<16;u++)if(f[u]!==this.current[u]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},s.UnwrappedTileID=gf,s.ValidationError=yr,s.ZoomHistory=pa,s.add=function(f,u,p){return f[0]=u[0]+p[0],f[1]=u[1]+p[1],f[2]=u[2]+p[2],f},s.addDynamicAttributes=mf,s.asyncAll=function(f,u,p){if(!f.length)return p(null,[]);let x=f.length;const T=new Array(f.length);let D=null;f.forEach((j,J)=>{u(j,(ie,le)=>{ie&&(D=ie),T[J]=le,--x==0&&p(D,T)})})},s.bezier=S,s.bindAll=re,s.cacheEntryPossiblyAdded=function(f){tr++,tr>Dr&&(f.getActor().send("enforceCacheSizeLimit",Ye),tr=0)},s.clamp=P,s.clearTileCache=function(f){const u=caches.delete(Zt);f&&u.catch(f).then(()=>f())},s.clipLine=xu,s.clone=function(f){var u=new _s(16);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=f[6],u[7]=f[7],u[8]=f[8],u[9]=f[9],u[10]=f[10],u[11]=f[11],u[12]=f[12],u[13]=f[13],u[14]=f[14],u[15]=f[15],u},s.clone$1=B,s.clone$2=function(f){var u=new _s(3);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u},s.collisionCircleLayout=wv,s.config=St,s.copy=function(f,u){return f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},s.create=function(){var f=new _s(16);return _s!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},s.create$1=uc,s.createExpression=Na,s.createFilter=ll,s.createLayout=ua,s.createStyleLayer=function(f){return f.type==="custom"?new Xh(f):new Kh[f.type](f)},s.cross=function(f,u,p){var x=u[0],T=u[1],D=u[2],j=p[0],J=p[1],ie=p[2];return f[0]=T*ie-D*J,f[1]=D*j-x*ie,f[2]=x*J-T*j,f},s.dot=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]},s.dot$1=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]+f[3]*u[3]},s.ease=A,s.emitValidationErrors=Xl,s.enforceCacheSizeLimit=function(f){wr(),Kt&&Kt.then(u=>{u.keys().then(p=>{for(let x=0;x<p.length-f;x++)u.delete(p[x])})})},s.equals=function(f,u){var p=f[0],x=f[1],T=f[2],D=f[3],j=f[4],J=f[5],ie=f[6],le=f[7],me=f[8],xe=f[9],Re=f[10],De=f[11],Be=f[12],rt=f[13],ot=f[14],Pt=f[15],kt=u[0],At=u[1],$t=u[2],sr=u[3],Wt=u[4],zr=u[5],Zr=u[6],Br=u[7],Nr=u[8],Rr=u[9],Ur=u[10],Vr=u[11],Ir=u[12],In=u[13],mn=u[14],oi=u[15];return Math.abs(p-kt)<=Jo*Math.max(1,Math.abs(p),Math.abs(kt))&&Math.abs(x-At)<=Jo*Math.max(1,Math.abs(x),Math.abs(At))&&Math.abs(T-$t)<=Jo*Math.max(1,Math.abs(T),Math.abs($t))&&Math.abs(D-sr)<=Jo*Math.max(1,Math.abs(D),Math.abs(sr))&&Math.abs(j-Wt)<=Jo*Math.max(1,Math.abs(j),Math.abs(Wt))&&Math.abs(J-zr)<=Jo*Math.max(1,Math.abs(J),Math.abs(zr))&&Math.abs(ie-Zr)<=Jo*Math.max(1,Math.abs(ie),Math.abs(Zr))&&Math.abs(le-Br)<=Jo*Math.max(1,Math.abs(le),Math.abs(Br))&&Math.abs(me-Nr)<=Jo*Math.max(1,Math.abs(me),Math.abs(Nr))&&Math.abs(xe-Rr)<=Jo*Math.max(1,Math.abs(xe),Math.abs(Rr))&&Math.abs(Re-Ur)<=Jo*Math.max(1,Math.abs(Re),Math.abs(Ur))&&Math.abs(De-Vr)<=Jo*Math.max(1,Math.abs(De),Math.abs(Vr))&&Math.abs(Be-Ir)<=Jo*Math.max(1,Math.abs(Be),Math.abs(Ir))&&Math.abs(rt-In)<=Jo*Math.max(1,Math.abs(rt),Math.abs(In))&&Math.abs(ot-mn)<=Jo*Math.max(1,Math.abs(ot),Math.abs(mn))&&Math.abs(Pt-oi)<=Jo*Math.max(1,Math.abs(Pt),Math.abs(oi))},s.evaluateSizeForFeature=function(f,{uSize:u,uSizeT:p},{lowerSize:x,upperSize:T}){return f.kind==="source"?x/pf:f.kind==="composite"?Ma(x/pf,T/pf,p):u},s.evaluateSizeForZoom=function(f,u){let p=0,x=0;if(f.kind==="constant")x=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:T,minZoom:D,maxZoom:j}=f,J=T?P(aa.interpolationFactor(T,u,D,j),0,1):0;f.kind==="camera"?x=Ma(f.minSize,f.maxSize,J):p=J}return{uSizeT:p,uSize:x}},s.evaluateVariableOffset=Lv,s.evented=Do,s.exported=lt,s.exported$1=br,s.extend=F,s.filterObject=H,s.fromRotation=function(f,u){var p=Math.sin(u),x=Math.cos(u);return f[0]=x,f[1]=p,f[2]=0,f[3]=-p,f[4]=x,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},s.fromScaling=function(f,u){return f[0]=u[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=u[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=u[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},s.getAnchorAlignment=$p,s.getAnchorJustification=Kg,s.getArrayBuffer=Pi,s.getImage=La,s.getJSON=function(f,u){return Li(F(f,{type:"json"}),u)},s.getOverlapMode=Lm,s.getRTLTextPluginStatus=Vu,s.getReferrer=ki,s.getVideo=function(f,u){const p=window.document.createElement("video");p.muted=!0,p.onloadstart=function(){u(null,p)};for(let x=0;x<f.length;x++){const T=window.document.createElement("source");Yi(f[x])||(p.crossOrigin="Anonymous"),T.src=f[x],p.appendChild(T)}return{cancel:()=>{}}},s.identity=of,s.invert=function(f,u){var p=u[0],x=u[1],T=u[2],D=u[3],j=u[4],J=u[5],ie=u[6],le=u[7],me=u[8],xe=u[9],Re=u[10],De=u[11],Be=u[12],rt=u[13],ot=u[14],Pt=u[15],kt=p*J-x*j,At=p*ie-T*j,$t=p*le-D*j,sr=x*ie-T*J,Wt=x*le-D*J,zr=T*le-D*ie,Zr=me*rt-xe*Be,Br=me*ot-Re*Be,Nr=me*Pt-De*Be,Rr=xe*ot-Re*rt,Ur=xe*Pt-De*rt,Vr=Re*Pt-De*ot,Ir=kt*Vr-At*Ur+$t*Rr+sr*Nr-Wt*Br+zr*Zr;return Ir?(f[0]=(J*Vr-ie*Ur+le*Rr)*(Ir=1/Ir),f[1]=(T*Ur-x*Vr-D*Rr)*Ir,f[2]=(rt*zr-ot*Wt+Pt*sr)*Ir,f[3]=(Re*Wt-xe*zr-De*sr)*Ir,f[4]=(ie*Nr-j*Vr-le*Br)*Ir,f[5]=(p*Vr-T*Nr+D*Br)*Ir,f[6]=(ot*$t-Be*zr-Pt*At)*Ir,f[7]=(me*zr-Re*$t+De*At)*Ir,f[8]=(j*Ur-J*Nr+le*Zr)*Ir,f[9]=(x*Nr-p*Ur-D*Zr)*Ir,f[10]=(Be*Wt-rt*$t+Pt*kt)*Ir,f[11]=(xe*$t-me*Wt-De*kt)*Ir,f[12]=(J*Br-j*Rr-ie*Zr)*Ir,f[13]=(p*Rr-x*Br+T*Zr)*Ir,f[14]=(rt*At-Be*sr-ot*kt)*Ir,f[15]=(me*sr-xe*At+Re*kt)*Ir,f):null},s.isImageBitmap=Ne,s.isSafari=Ie,s.isWorker=te,s.keysDifference=function(f,u){const p=[];for(const x in f)x in u||p.push(x);return p},s.lazyLoadRTLTextPlugin=function(){Gs.isLoading()||Gs.isLoaded()||Vu()!=="deferred"||zh()},s.makeRequest=Li,s.mapObject=G,s.mercatorXfromLng=$m,s.mercatorYfromLat=Yh,s.mercatorZfromAltitude=Lc,s.mul=Nh,s.mul$1=function(f,u,p){return f[0]=u[0]*p[0],f[1]=u[1]*p[1],f[2]=u[2]*p[2],f[3]=u[3]*p[3],f},s.multiply=ym,s.nextPowerOfTwo=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},s.normalize=function(f,u){var p=u[0],x=u[1],T=u[2],D=p*p+x*x+T*T;return D>0&&(D=1/Math.sqrt(D)),f[0]=u[0]*D,f[1]=u[1]*D,f[2]=u[2]*D,f},s.number=Ma,s.ortho=function(f,u,p,x,T,D,j){var J=1/(u-p),ie=1/(x-T),le=1/(D-j);return f[0]=-2*J,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*ie,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*le,f[11]=0,f[12]=(u+p)*J,f[13]=(T+x)*ie,f[14]=(j+D)*le,f[15]=1,f},s.parseCacheControl=pe,s.parseGlyphPbf=function(f){return new Gg(f).readFields(km,[])},s.pbf=Gg,s.performSymbolLayout=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=fa/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const u=f.bucket.layers[0].layout,p=f.bucket.layers[0]._unevaluatedLayout._values,x={layoutIconSize:p["icon-size"].possiblyEvaluate(new Ui(f.bucket.zoom+1),f.canonical),layoutTextSize:p["text-size"].possiblyEvaluate(new Ui(f.bucket.zoom+1),f.canonical),textMaxSize:p["text-size"].possiblyEvaluate(new Ui(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:ie,maxZoom:le}=f.bucket.textSizeData;x.compositeTextSizes=[p["text-size"].possiblyEvaluate(new Ui(ie),f.canonical),p["text-size"].possiblyEvaluate(new Ui(le),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:ie,maxZoom:le}=f.bucket.iconSizeData;x.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new Ui(ie),f.canonical),p["icon-size"].possiblyEvaluate(new Ui(le),f.canonical)]}const T=u.get("text-line-height")*Rs,D=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",j=u.get("text-keep-upright"),J=u.get("text-size");for(const ie of f.bucket.features){const le=u.get("text-font").evaluate(ie,{},f.canonical).join(","),me=J.evaluate(ie,{},f.canonical),xe=x.layoutTextSize.evaluate(ie,{},f.canonical),Re=x.layoutIconSize.evaluate(ie,{},f.canonical),De={horizontal:{},vertical:void 0},Be=ie.text;let rt,ot=[0,0];if(Be){const At=Be.toString(),$t=u.get("text-letter-spacing").evaluate(ie,{},f.canonical)*Rs,sr=gs(At)?$t:0,Wt=u.get("text-anchor").evaluate(ie,{},f.canonical),zr=u.get("text-variable-anchor");if(!zr){const Ur=u.get("text-radial-offset").evaluate(ie,{},f.canonical);ot=Ur?Lv(Wt,[Ur*Rs,Xg]):u.get("text-offset").evaluate(ie,{},f.canonical).map(Vr=>Vr*Rs)}let Zr=D?"center":u.get("text-justify").evaluate(ie,{},f.canonical);const Br=u.get("symbol-placement"),Nr=Br==="point"?u.get("text-max-width").evaluate(ie,{},f.canonical)*Rs:0,Rr=()=>{f.bucket.allowVerticalPlacement&&So(At)&&(De.vertical=Cd(Be,f.glyphMap,f.glyphPositions,f.imagePositions,le,Nr,T,Wt,"left",sr,ot,s.WritingMode.vertical,!0,Br,xe,me))};if(!D&&zr){const Ur=Zr==="auto"?zr.map(Ir=>Kg(Ir)):[Zr];let Vr=!1;for(let Ir=0;Ir<Ur.length;Ir++){const In=Ur[Ir];if(!De.horizontal[In])if(Vr)De.horizontal[In]=De.horizontal[0];else{const mn=Cd(Be,f.glyphMap,f.glyphPositions,f.imagePositions,le,Nr,T,"center",In,sr,ot,s.WritingMode.horizontal,!1,Br,xe,me);mn&&(De.horizontal[In]=mn,Vr=mn.positionedLines.length===1)}}Rr()}else{Zr==="auto"&&(Zr=Kg(Wt));const Ur=Cd(Be,f.glyphMap,f.glyphPositions,f.imagePositions,le,Nr,T,Wt,Zr,sr,ot,s.WritingMode.horizontal,!1,Br,xe,me);Ur&&(De.horizontal[Zr]=Ur),Rr(),So(At)&&D&&j&&(De.vertical=Cd(Be,f.glyphMap,f.glyphPositions,f.imagePositions,le,Nr,T,Wt,Zr,sr,ot,s.WritingMode.vertical,!1,Br,xe,me))}}let Pt=!1;if(ie.icon&&ie.icon.name){const At=f.imageMap[ie.icon.name];At&&(rt=kd(f.imagePositions[ie.icon.name],u.get("icon-offset").evaluate(ie,{},f.canonical),u.get("icon-anchor").evaluate(ie,{},f.canonical)),Pt=!!At.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=Pt:f.bucket.sdfIcons!==Pt&&N("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(At.pixelRatio!==f.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const kt=Yg(De.horizontal)||De.vertical;f.bucket.iconsInText=!!kt&&kt.iconsInText,(kt||rt)&&rb(f.bucket,ie,De,rt,f.imageMap,x,xe,Re,ot,Pt,f.canonical)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},s.perspective=function(f,u,p,x,T){var D,j=1/Math.tan(u/2);return f[0]=j/p,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=j,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,T!=null&&T!==1/0?(f[10]=(T+x)*(D=1/(x-T)),f[14]=2*T*x*D):(f[10]=-1,f[14]=-2*x),f},s.pick=function(f,u){const p={};for(let x=0;x<u.length;x++){const T=u[x];T in f&&(p[T]=f[T])}return p},s.plugin=Gs,s.pointGeometry=it,s.polygonIntersectsPolygon=lc,s.potpack=rh,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.register=Pn,s.registerForPluginStateChange=function(f){return f({pluginStatus:en,pluginURL:hl}),Do.on("pluginStateChange",f),f},s.renderColorRamp=Tp,s.rotateX=function(f,u,p){var x=Math.sin(p),T=Math.cos(p),D=u[4],j=u[5],J=u[6],ie=u[7],le=u[8],me=u[9],xe=u[10],Re=u[11];return u!==f&&(f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[4]=D*T+le*x,f[5]=j*T+me*x,f[6]=J*T+xe*x,f[7]=ie*T+Re*x,f[8]=le*T-D*x,f[9]=me*T-j*x,f[10]=xe*T-J*x,f[11]=Re*T-ie*x,f},s.rotateZ=function(f,u,p){var x=Math.sin(p),T=Math.cos(p),D=u[0],j=u[1],J=u[2],ie=u[3],le=u[4],me=u[5],xe=u[6],Re=u[7];return u!==f&&(f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=D*T+le*x,f[1]=j*T+me*x,f[2]=J*T+xe*x,f[3]=ie*T+Re*x,f[4]=le*T-D*x,f[5]=me*T-j*x,f[6]=xe*T-J*x,f[7]=Re*T-ie*x,f},s.scale=function(f,u,p){var x=p[0],T=p[1],D=p[2];return f[0]=u[0]*x,f[1]=u[1]*x,f[2]=u[2]*x,f[3]=u[3]*x,f[4]=u[4]*T,f[5]=u[5]*T,f[6]=u[6]*T,f[7]=u[7]*T,f[8]=u[8]*D,f[9]=u[9]*D,f[10]=u[10]*D,f[11]=u[11]*D,f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},s.scale$1=function(f,u,p){return f[0]=u[0]*p,f[1]=u[1]*p,f[2]=u[2]*p,f},s.setCacheLimits=function(f,u){Ye=f,Dr=u},s.setRTLTextPlugin=function(f,u,p=!1){if(en===Rl||en===Fo||en===ju)throw new Error("setRTLTextPlugin cannot be called multiple times.");hl=lt.resolveURL(f),en=Rl,Yo=u,fo(),p||zh()},s.spec=Mt,s.sphericalToCartesian=function([f,u,p]){return u+=90,u*=Math.PI/180,p*=Math.PI/180,{x:f*Math.cos(u)*Math.sin(p),y:f*Math.sin(u)*Math.sin(p),z:f*Math.cos(p)}},s.sqrLen=function(f){var u=f[0],p=f[1];return u*u+p*p},s.sub=function(f,u,p){return f[0]=u[0]-p[0],f[1]=u[1]-p[1],f[2]=u[2]-p[2],f},s.toEvaluationFeature=gu,s.transformMat3=function(f,u,p){var x=u[0],T=u[1],D=u[2];return f[0]=x*p[0]+T*p[3]+D*p[6],f[1]=x*p[1]+T*p[4]+D*p[7],f[2]=x*p[2]+T*p[5]+D*p[8],f},s.transformMat4=Bh,s.transformMat4$1=function(f,u,p){var x=u[0],T=u[1];return f[0]=p[0]*x+p[4]*T+p[12],f[1]=p[1]*x+p[5]*T+p[13],f},s.translate=function(f,u,p){var x,T,D,j,J,ie,le,me,xe,Re,De,Be,rt=p[0],ot=p[1],Pt=p[2];return u===f?(f[12]=u[0]*rt+u[4]*ot+u[8]*Pt+u[12],f[13]=u[1]*rt+u[5]*ot+u[9]*Pt+u[13],f[14]=u[2]*rt+u[6]*ot+u[10]*Pt+u[14],f[15]=u[3]*rt+u[7]*ot+u[11]*Pt+u[15]):(T=u[1],D=u[2],j=u[3],J=u[4],ie=u[5],le=u[6],me=u[7],xe=u[8],Re=u[9],De=u[10],Be=u[11],f[0]=x=u[0],f[1]=T,f[2]=D,f[3]=j,f[4]=J,f[5]=ie,f[6]=le,f[7]=me,f[8]=xe,f[9]=Re,f[10]=De,f[11]=Be,f[12]=x*rt+J*ot+xe*Pt+u[12],f[13]=T*rt+ie*ot+Re*Pt+u[13],f[14]=D*rt+le*ot+De*Pt+u[14],f[15]=j*rt+me*ot+Be*Pt+u[15]),f},s.triggerPluginCompletionEvent=hu,s.unicodeBlockLookup=pn,s.uniqueId=function(){return K++},s.validateCustomStyleLayer=function(f){const u=[],p=f.id;return p===void 0&&u.push({message:`layers.${p}: missing required property "id"`}),f.render===void 0&&u.push({message:`layers.${p}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&u.push({message:`layers.${p}: property "renderingMode" must be either "2d" or "3d"`}),u},s.validateLight=ja,s.validateStyle=Wi,s.vectorTile=cc,s.warnOnce=N,s.wrap=L}),l(["./shared"],function(s){function d(ye){const fe=typeof ye;if(fe==="number"||fe==="boolean"||fe==="string"||ye==null)return JSON.stringify(ye);if(Array.isArray(ye)){let Le="[";for(const nt of ye)Le+=`${d(nt)},`;return`${Le}]`}const we=Object.keys(ye).sort();let Ce="{";for(let Le=0;Le<we.length;Le++)Ce+=`${JSON.stringify(we[Le])}:${d(ye[we[Le]])},`;return`${Ce}}`}function v(ye){let fe="";for(const we of s.refProperties)fe+=`/${d(ye[we])}`;return fe}class S{constructor(fe){this.keyCache={},fe&&this.replace(fe)}replace(fe){this._layerConfigs={},this._layers={},this.update(fe,[])}update(fe,we){for(const Le of fe){this._layerConfigs[Le.id]=Le;const nt=this._layers[Le.id]=s.createStyleLayer(Le);nt._featureFilter=s.createFilter(nt.filter),this.keyCache[Le.id]&&delete this.keyCache[Le.id]}for(const Le of we)delete this.keyCache[Le],delete this._layerConfigs[Le],delete this._layers[Le];this.familiesBySource={};const Ce=function(Le,nt){const dt={};for(let Xe=0;Xe<Le.length;Xe++){const pt=nt&&nt[Le[Xe].id]||v(Le[Xe]);nt&&(nt[Le[Xe].id]=pt);let vt=dt[pt];vt||(vt=dt[pt]=[]),vt.push(Le[Xe])}const ct=[];for(const Xe in dt)ct.push(dt[Xe]);return ct}(Object.values(this._layerConfigs),this.keyCache);for(const Le of Ce){const nt=Le.map(ar=>this._layers[ar.id]),dt=nt[0];if(dt.visibility==="none")continue;const ct=dt.source||"";let Xe=this.familiesBySource[ct];Xe||(Xe=this.familiesBySource[ct]={});const pt=dt.sourceLayer||"_geojsonTileLayer";let vt=Xe[pt];vt||(vt=Xe[pt]=[]),vt.push(nt)}}}class A{constructor(fe){const we={},Ce=[];for(const ct in fe){const Xe=fe[ct],pt=we[ct]={};for(const vt in Xe){const ar=Xe[+vt];if(!ar||ar.bitmap.width===0||ar.bitmap.height===0)continue;const Vt={x:0,y:0,w:ar.bitmap.width+2,h:ar.bitmap.height+2};Ce.push(Vt),pt[vt]={rect:Vt,metrics:ar.metrics}}}const{w:Le,h:nt}=s.potpack(Ce),dt=new s.AlphaImage({width:Le||1,height:nt||1});for(const ct in fe){const Xe=fe[ct];for(const pt in Xe){const vt=Xe[+pt];if(!vt||vt.bitmap.width===0||vt.bitmap.height===0)continue;const ar=we[ct][pt].rect;s.AlphaImage.copy(vt.bitmap,dt,{x:0,y:0},{x:ar.x+1,y:ar.y+1},vt.bitmap)}}this.image=dt,this.positions=we}}s.register("GlyphAtlas",A);class P{constructor(fe){this.tileID=new s.OverscaledTileID(fe.tileID.overscaledZ,fe.tileID.wrap,fe.tileID.canonical.z,fe.tileID.canonical.x,fe.tileID.canonical.y),this.uid=fe.uid,this.zoom=fe.zoom,this.pixelRatio=fe.pixelRatio,this.tileSize=fe.tileSize,this.source=fe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=fe.showCollisionBoxes,this.collectResourceTiming=!!fe.collectResourceTiming,this.returnDependencies=!!fe.returnDependencies,this.promoteId=fe.promoteId}parse(fe,we,Ce,Le,nt){this.status="parsing",this.data=fe,this.collisionBoxArray=new s.CollisionBoxArray;const dt=new s.DictionaryCoder(Object.keys(fe.layers).sort()),ct=new s.FeatureIndex(this.tileID,this.promoteId);ct.bucketLayerIDs=[];const Xe={},pt={featureIndex:ct,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ce},vt=we.familiesBySource[this.source];for(const wn in vt){const Dn=fe.layers[wn];if(!Dn)continue;Dn.version===1&&s.warnOnce(`Vector tile source "${this.source}" layer "${wn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const $n=dt.encode(wn),kn=[];for(let Qa=0;Qa<Dn.length;Qa++){const Fn=Dn.feature(Qa),oo=ct.getId(Fn,wn);kn.push({feature:Fn,id:oo,index:Qa,sourceLayerIndex:$n})}for(const Qa of vt[wn]){const Fn=Qa[0];Fn.source!==this.source&&s.warnOnce(`layer.source = ${Fn.source} does not equal this.source = ${this.source}`),Fn.minzoom&&this.zoom<Math.floor(Fn.minzoom)||Fn.maxzoom&&this.zoom>=Fn.maxzoom||Fn.visibility!=="none"&&(L(Qa,this.zoom,Ce),(Xe[Fn.id]=Fn.createBucket({index:ct.bucketLayerIDs.length,layers:Qa,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:$n,sourceID:this.source})).populate(kn,pt,this.tileID.canonical),ct.bucketLayerIDs.push(Qa.map(oo=>oo.id)))}}let ar,Vt,fr,qr;const Ar=s.mapObject(pt.glyphDependencies,wn=>Object.keys(wn).map(Number));Object.keys(Ar).length?Le.send("getGlyphs",{uid:this.uid,stacks:Ar},(wn,Dn)=>{ar||(ar=wn,Vt=Dn,An.call(this))}):Vt={};const ln=Object.keys(pt.iconDependencies);ln.length?Le.send("getImages",{icons:ln,source:this.source,tileID:this.tileID,type:"icons"},(wn,Dn)=>{ar||(ar=wn,fr=Dn,An.call(this))}):fr={};const gn=Object.keys(pt.patternDependencies);function An(){if(ar)return nt(ar);if(Vt&&fr&&qr){const wn=new A(Vt),Dn=new s.ImageAtlas(fr,qr);for(const $n in Xe){const kn=Xe[$n];kn instanceof s.SymbolBucket?(L(kn.layers,this.zoom,Ce),s.performSymbolLayout({bucket:kn,glyphMap:Vt,glyphPositions:wn.positions,imageMap:fr,imagePositions:Dn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):kn.hasPattern&&(kn instanceof s.LineBucket||kn instanceof s.FillBucket||kn instanceof s.FillExtrusionBucket)&&(L(kn.layers,this.zoom,Ce),kn.addFeatures(pt,this.tileID.canonical,Dn.patternPositions))}this.status="done",nt(null,{buckets:Object.values(Xe).filter($n=>!$n.isEmpty()),featureIndex:ct,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:wn.image,imageAtlas:Dn,glyphMap:this.returnDependencies?Vt:null,iconMap:this.returnDependencies?fr:null,glyphPositions:this.returnDependencies?wn.positions:null})}}gn.length?Le.send("getImages",{icons:gn,source:this.source,tileID:this.tileID,type:"patterns"},(wn,Dn)=>{ar||(ar=wn,qr=Dn,An.call(this))}):qr={},An.call(this)}}function L(ye,fe,we){const Ce=new s.EvaluationParameters(fe);for(const Le of ye)Le.recalculate(Ce,we)}function F(ye,fe){const we=s.getArrayBuffer(ye.request,(Ce,Le,nt,dt)=>{Ce?fe(Ce):Le&&fe(null,{vectorTile:new s.vectorTile.VectorTile(new s.pbf(Le)),rawData:Le,cacheControl:nt,expires:dt})});return()=>{we.cancel(),fe()}}class K{constructor(fe,we,Ce,Le){this.actor=fe,this.layerIndex=we,this.availableImages=Ce,this.loadVectorData=Le||F,this.loading={},this.loaded={}}loadTile(fe,we){const Ce=fe.uid;this.loading||(this.loading={});const Le=!!(fe&&fe.request&&fe.request.collectResourceTiming)&&new s.RequestPerformance(fe.request),nt=this.loading[Ce]=new P(fe);nt.abort=this.loadVectorData(fe,(dt,ct)=>{if(delete this.loading[Ce],dt||!ct)return nt.status="done",this.loaded[Ce]=nt,we(dt);const Xe=ct.rawData,pt={};ct.expires&&(pt.expires=ct.expires),ct.cacheControl&&(pt.cacheControl=ct.cacheControl);const vt={};if(Le){const ar=Le.finish();ar&&(vt.resourceTiming=JSON.parse(JSON.stringify(ar)))}nt.vectorTile=ct.vectorTile,nt.parse(ct.vectorTile,this.layerIndex,this.availableImages,this.actor,(ar,Vt)=>{if(ar||!Vt)return we(ar);we(null,s.extend({rawTileData:Xe.slice(0)},Vt,pt,vt))}),this.loaded=this.loaded||{},this.loaded[Ce]=nt})}reloadTile(fe,we){const Ce=this.loaded,Le=fe.uid,nt=this;if(Ce&&Ce[Le]){const dt=Ce[Le];dt.showCollisionBoxes=fe.showCollisionBoxes;const ct=(Xe,pt)=>{const vt=dt.reloadCallback;vt&&(delete dt.reloadCallback,dt.parse(dt.vectorTile,nt.layerIndex,this.availableImages,nt.actor,vt)),we(Xe,pt)};dt.status==="parsing"?dt.reloadCallback=ct:dt.status==="done"&&(dt.vectorTile?dt.parse(dt.vectorTile,this.layerIndex,this.availableImages,this.actor,ct):ct())}}abortTile(fe,we){const Ce=this.loading,Le=fe.uid;Ce&&Ce[Le]&&Ce[Le].abort&&(Ce[Le].abort(),delete Ce[Le]),we()}removeTile(fe,we){const Ce=this.loaded,Le=fe.uid;Ce&&Ce[Le]&&delete Ce[Le],we()}}class re{constructor(){this.loaded={}}loadTile(fe,we){const{uid:Ce,encoding:Le,rawImageData:nt}=fe,dt=s.isImageBitmap(nt)?this.getImageData(nt):nt,ct=new s.DEMData(Ce,dt,Le);this.loaded=this.loaded||{},this.loaded[Ce]=ct,we(null,ct)}getImageData(fe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(fe.width,fe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=fe.width,this.offscreenCanvas.height=fe.height,this.offscreenCanvasContext.drawImage(fe,0,0,fe.width,fe.height);const we=this.offscreenCanvasContext.getImageData(-1,-1,fe.width+2,fe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new s.RGBAImage({width:we.width,height:we.height},we.data)}removeTile(fe){const we=this.loaded,Ce=fe.uid;we&&we[Ce]&&delete we[Ce]}}var G=function ye(fe,we){var Ce,Le=fe&&fe.type;if(Le==="FeatureCollection")for(Ce=0;Ce<fe.features.length;Ce++)ye(fe.features[Ce],we);else if(Le==="GeometryCollection")for(Ce=0;Ce<fe.geometries.length;Ce++)ye(fe.geometries[Ce],we);else if(Le==="Feature")ye(fe.geometry,we);else if(Le==="Polygon")H(fe.coordinates,we);else if(Le==="MultiPolygon")for(Ce=0;Ce<fe.coordinates.length;Ce++)H(fe.coordinates[Ce],we);return fe};function H(ye,fe){if(ye.length!==0){B(ye[0],fe);for(var we=1;we<ye.length;we++)B(ye[we],!fe)}}function B(ye,fe){for(var we=0,Ce=0,Le=0,nt=ye.length,dt=nt-1;Le<nt;dt=Le++){var ct=(ye[Le][0]-ye[dt][0])*(ye[dt][1]+ye[Le][1]),Xe=we+ct;Ce+=Math.abs(we)>=Math.abs(ct)?we-Xe+ct:ct-Xe+we,we=Xe}we+Ce>=0!=!!fe&&ye.reverse()}const $=s.vectorTile.VectorTileFeature.prototype.toGeoJSON;class N{constructor(fe){this._feature=fe,this.extent=s.EXTENT,this.type=fe.type,this.properties=fe.tags,"id"in fe&&!isNaN(fe.id)&&(this.id=parseInt(fe.id,10))}loadGeometry(){if(this._feature.type===1){const fe=[];for(const we of this._feature.geometry)fe.push([new s.pointGeometry(we[0],we[1])]);return fe}{const fe=[];for(const we of this._feature.geometry){const Ce=[];for(const Le of we)Ce.push(new s.pointGeometry(Le[0],Le[1]));fe.push(Ce)}return fe}}toGeoJSON(fe,we,Ce){return $.call(this,fe,we,Ce)}}class z{constructor(fe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=fe.length,this._features=fe}feature(fe){return new N(this._features[fe])}}var X={exports:{}},te=s.pointGeometry,pe=s.vectorTile.VectorTileFeature,ke=Pe;function Pe(ye,fe){this.options=fe||{},this.features=ye,this.length=ye.length}function ge(ye,fe){this.id=typeof ye.id=="number"?ye.id:void 0,this.type=ye.type,this.rawGeometry=ye.type===1?[ye.geometry]:ye.geometry,this.properties=ye.tags,this.extent=fe||4096}Pe.prototype.feature=function(ye){return new ge(this.features[ye],this.options.extent)},ge.prototype.loadGeometry=function(){var ye=this.rawGeometry;this.geometry=[];for(var fe=0;fe<ye.length;fe++){for(var we=ye[fe],Ce=[],Le=0;Le<we.length;Le++)Ce.push(new te(we[Le][0],we[Le][1]));this.geometry.push(Ce)}return this.geometry},ge.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ye=this.geometry,fe=1/0,we=-1/0,Ce=1/0,Le=-1/0,nt=0;nt<ye.length;nt++)for(var dt=ye[nt],ct=0;ct<dt.length;ct++){var Xe=dt[ct];fe=Math.min(fe,Xe.x),we=Math.max(we,Xe.x),Ce=Math.min(Ce,Xe.y),Le=Math.max(Le,Xe.y)}return[fe,Ce,we,Le]},ge.prototype.toGeoJSON=pe.prototype.toGeoJSON;var Ie=s.pbf,Ne=ke;function lt(ye){var fe=new Ie;return function(we,Ce){for(var Le in we.layers)Ce.writeMessage(3,it,we.layers[Le])}(ye,fe),fe.finish()}function it(ye,fe){var we;fe.writeVarintField(15,ye.version||1),fe.writeStringField(1,ye.name||""),fe.writeVarintField(5,ye.extent||4096);var Ce={keys:[],values:[],keycache:{},valuecache:{}};for(we=0;we<ye.length;we++)Ce.feature=ye.feature(we),fe.writeMessage(2,Rt,Ce);var Le=Ce.keys;for(we=0;we<Le.length;we++)fe.writeStringField(3,Le[we]);var nt=Ce.values;for(we=0;we<nt.length;we++)fe.writeMessage(4,Ye,nt[we])}function Rt(ye,fe){var we=ye.feature;we.id!==void 0&&fe.writeVarintField(1,we.id),fe.writeMessage(2,St,ye),fe.writeVarintField(3,we.type),fe.writeMessage(4,Ge,we)}function St(ye,fe){var we=ye.feature,Ce=ye.keys,Le=ye.values,nt=ye.keycache,dt=ye.valuecache;for(var ct in we.properties){var Xe=we.properties[ct],pt=nt[ct];if(Xe!==null){pt===void 0&&(Ce.push(ct),nt[ct]=pt=Ce.length-1),fe.writeVarint(pt);var vt=typeof Xe;vt!=="string"&&vt!=="boolean"&&vt!=="number"&&(Xe=JSON.stringify(Xe));var ar=vt+":"+Xe,Vt=dt[ar];Vt===void 0&&(Le.push(Xe),dt[ar]=Vt=Le.length-1),fe.writeVarint(Vt)}}}function Zt(ye,fe){return(fe<<3)+(7&ye)}function Kt(ye){return ye<<1^ye>>31}function Ge(ye,fe){for(var we=ye.loadGeometry(),Ce=ye.type,Le=0,nt=0,dt=we.length,ct=0;ct<dt;ct++){var Xe=we[ct],pt=1;Ce===1&&(pt=Xe.length),fe.writeVarint(Zt(1,pt));for(var vt=Ce===3?Xe.length-1:Xe.length,ar=0;ar<vt;ar++){ar===1&&Ce!==1&&fe.writeVarint(Zt(2,vt-1));var Vt=Xe[ar].x-Le,fr=Xe[ar].y-nt;fe.writeVarint(Kt(Vt)),fe.writeVarint(Kt(fr)),Le+=Vt,nt+=fr}Ce===3&&fe.writeVarint(Zt(7,1))}}function Ye(ye,fe){var we=typeof ye;we==="string"?fe.writeStringField(1,ye):we==="boolean"?fe.writeBooleanField(7,ye):we==="number"&&(ye%1!=0?fe.writeDoubleField(3,ye):ye<0?fe.writeSVarintField(6,ye):fe.writeVarintField(5,ye))}function Dr(ye,fe,we,Ce,Le,nt){if(Le-Ce<=we)return;const dt=Ce+Le>>1;wr(ye,fe,dt,Ce,Le,nt%2),Dr(ye,fe,we,Ce,dt-1,nt+1),Dr(ye,fe,we,dt+1,Le,nt+1)}function wr(ye,fe,we,Ce,Le,nt){for(;Le>Ce;){if(Le-Ce>600){const pt=Le-Ce+1,vt=we-Ce+1,ar=Math.log(pt),Vt=.5*Math.exp(2*ar/3),fr=.5*Math.sqrt(ar*Vt*(pt-Vt)/pt)*(vt-pt/2<0?-1:1);wr(ye,fe,we,Math.max(Ce,Math.floor(we-vt*Vt/pt+fr)),Math.min(Le,Math.floor(we+(pt-vt)*Vt/pt+fr)),nt)}const dt=fe[2*we+nt];let ct=Ce,Xe=Le;for(tr(ye,fe,Ce,we),fe[2*Le+nt]>dt&&tr(ye,fe,Ce,Le);ct<Xe;){for(tr(ye,fe,ct,Xe),ct++,Xe--;fe[2*ct+nt]<dt;)ct++;for(;fe[2*Xe+nt]>dt;)Xe--}fe[2*Ce+nt]===dt?tr(ye,fe,Ce,Xe):(Xe++,tr(ye,fe,Xe,Le)),Xe<=we&&(Ce=Xe+1),we<=Xe&&(Le=Xe-1)}}function tr(ye,fe,we,Ce){br(ye,we,Ce),br(fe,2*we,2*Ce),br(fe,2*we+1,2*Ce+1)}function br(ye,fe,we){const Ce=ye[fe];ye[fe]=ye[we],ye[we]=Ce}function Bt(ye,fe,we,Ce){const Le=ye-we,nt=fe-Ce;return Le*Le+nt*nt}X.exports=lt,X.exports.fromVectorTileJs=lt,X.exports.fromGeojsonVt=function(ye,fe){fe=fe||{};var we={};for(var Ce in ye)we[Ce]=new Ne(ye[Ce].features,fe),we[Ce].name=Ce,we[Ce].version=fe.version,we[Ce].extent=fe.extent;return lt({layers:we})},X.exports.GeoJSONWrapper=Ne;const hr=ye=>ye[0],cr=ye=>ye[1];class Mn{constructor(fe,we=hr,Ce=cr,Le=64,nt=Float64Array){this.nodeSize=Le,this.points=fe;const dt=fe.length<65536?Uint16Array:Uint32Array,ct=this.ids=new dt(fe.length),Xe=this.coords=new nt(2*fe.length);for(let pt=0;pt<fe.length;pt++)ct[pt]=pt,Xe[2*pt]=we(fe[pt]),Xe[2*pt+1]=Ce(fe[pt]);Dr(ct,Xe,Le,0,ct.length-1,0)}range(fe,we,Ce,Le){return function(nt,dt,ct,Xe,pt,vt,ar){const Vt=[0,nt.length-1,0],fr=[];let qr,Ar;for(;Vt.length;){const ln=Vt.pop(),gn=Vt.pop(),An=Vt.pop();if(gn-An<=ar){for(let $n=An;$n<=gn;$n++)qr=dt[2*$n],Ar=dt[2*$n+1],qr>=ct&&qr<=pt&&Ar>=Xe&&Ar<=vt&&fr.push(nt[$n]);continue}const wn=Math.floor((An+gn)/2);qr=dt[2*wn],Ar=dt[2*wn+1],qr>=ct&&qr<=pt&&Ar>=Xe&&Ar<=vt&&fr.push(nt[wn]);const Dn=(ln+1)%2;(ln===0?ct<=qr:Xe<=Ar)&&(Vt.push(An),Vt.push(wn-1),Vt.push(Dn)),(ln===0?pt>=qr:vt>=Ar)&&(Vt.push(wn+1),Vt.push(gn),Vt.push(Dn))}return fr}(this.ids,this.coords,fe,we,Ce,Le,this.nodeSize)}within(fe,we,Ce){return function(Le,nt,dt,ct,Xe,pt){const vt=[0,Le.length-1,0],ar=[],Vt=Xe*Xe;for(;vt.length;){const fr=vt.pop(),qr=vt.pop(),Ar=vt.pop();if(qr-Ar<=pt){for(let Dn=Ar;Dn<=qr;Dn++)Bt(nt[2*Dn],nt[2*Dn+1],dt,ct)<=Vt&&ar.push(Le[Dn]);continue}const ln=Math.floor((Ar+qr)/2),gn=nt[2*ln],An=nt[2*ln+1];Bt(gn,An,dt,ct)<=Vt&&ar.push(Le[ln]);const wn=(fr+1)%2;(fr===0?dt-Xe<=gn:ct-Xe<=An)&&(vt.push(Ar),vt.push(ln-1),vt.push(wn)),(fr===0?dt+Xe>=gn:ct+Xe>=An)&&(vt.push(ln+1),vt.push(qr),vt.push(wn))}return ar}(this.ids,this.coords,fe,we,Ce,this.nodeSize)}}const Hn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ye=>ye},Qn=Math.fround||(an=new Float32Array(1),ye=>(an[0]=+ye,an[0]));var an;class ki{constructor(fe){this.options=La(Object.create(Hn),fe),this.trees=new Array(this.options.maxZoom+1)}load(fe){const{log:we,minZoom:Ce,maxZoom:Le,nodeSize:nt}=this.options;we&&console.time("total time");const dt=`prepare ${fe.length} points`;we&&console.time(dt),this.points=fe;let ct=[];for(let Xe=0;Xe<fe.length;Xe++)fe[Xe].geometry&&ct.push(Li(fe[Xe],Xe));this.trees[Le+1]=new Mn(ct,Aa,$a,nt,Float32Array),we&&console.timeEnd(dt);for(let Xe=Le;Xe>=Ce;Xe--){const pt=+Date.now();ct=this._cluster(ct,Xe),this.trees[Xe]=new Mn(ct,Aa,$a,nt,Float32Array),we&&console.log("z%d: %d clusters in %dms",Xe,ct.length,+Date.now()-pt)}return we&&console.timeEnd("total time"),this}getClusters(fe,we){let Ce=((fe[0]+180)%360+360)%360-180;const Le=Math.max(-90,Math.min(90,fe[1]));let nt=fe[2]===180?180:((fe[2]+180)%360+360)%360-180;const dt=Math.max(-90,Math.min(90,fe[3]));if(fe[2]-fe[0]>=360)Ce=-180,nt=180;else if(Ce>nt){const vt=this.getClusters([Ce,Le,180,dt],we),ar=this.getClusters([-180,Le,nt,dt],we);return vt.concat(ar)}const ct=this.trees[this._limitZoom(we)],Xe=ct.range(gi(Ce),ea(dt),gi(nt),ea(Le)),pt=[];for(const vt of Xe){const ar=ct.points[vt];pt.push(ar.numPoints?Pi(ar):this.points[ar.index])}return pt}getChildren(fe){const we=this._getOriginId(fe),Ce=this._getOriginZoom(fe),Le="No cluster with the specified id.",nt=this.trees[Ce];if(!nt)throw new Error(Le);const dt=nt.points[we];if(!dt)throw new Error(Le);const ct=this.options.radius/(this.options.extent*Math.pow(2,Ce-1)),Xe=nt.within(dt.x,dt.y,ct),pt=[];for(const vt of Xe){const ar=nt.points[vt];ar.parentId===fe&&pt.push(ar.numPoints?Pi(ar):this.points[ar.index])}if(pt.length===0)throw new Error(Le);return pt}getLeaves(fe,we,Ce){const Le=[];return this._appendLeaves(Le,fe,we=we||10,Ce=Ce||0,0),Le}getTile(fe,we,Ce){const Le=this.trees[this._limitZoom(fe)],nt=Math.pow(2,fe),{extent:dt,radius:ct}=this.options,Xe=ct/dt,pt=(Ce-Xe)/nt,vt=(Ce+1+Xe)/nt,ar={features:[]};return this._addTileFeatures(Le.range((we-Xe)/nt,pt,(we+1+Xe)/nt,vt),Le.points,we,Ce,nt,ar),we===0&&this._addTileFeatures(Le.range(1-Xe/nt,pt,1,vt),Le.points,nt,Ce,nt,ar),we===nt-1&&this._addTileFeatures(Le.range(0,pt,Xe/nt,vt),Le.points,-1,Ce,nt,ar),ar.features.length?ar:null}getClusterExpansionZoom(fe){let we=this._getOriginZoom(fe)-1;for(;we<=this.options.maxZoom;){const Ce=this.getChildren(fe);if(we++,Ce.length!==1)break;fe=Ce[0].properties.cluster_id}return we}_appendLeaves(fe,we,Ce,Le,nt){const dt=this.getChildren(we);for(const ct of dt){const Xe=ct.properties;if(Xe&&Xe.cluster?nt+Xe.point_count<=Le?nt+=Xe.point_count:nt=this._appendLeaves(fe,Xe.cluster_id,Ce,Le,nt):nt<Le?nt++:fe.push(ct),fe.length===Ce)break}return nt}_addTileFeatures(fe,we,Ce,Le,nt,dt){for(const ct of fe){const Xe=we[ct],pt=Xe.numPoints;let vt,ar,Vt;if(pt)vt=Yi(Xe),ar=Xe.x,Vt=Xe.y;else{const Ar=this.points[Xe.index];vt=Ar.properties,ar=gi(Ar.geometry.coordinates[0]),Vt=ea(Ar.geometry.coordinates[1])}const fr={type:1,geometry:[[Math.round(this.options.extent*(ar*nt-Ce)),Math.round(this.options.extent*(Vt*nt-Le))]],tags:vt};let qr;pt?qr=Xe.id:this.options.generateId?qr=Xe.index:this.points[Xe.index].id&&(qr=this.points[Xe.index].id),qr!==void 0&&(fr.id=qr),dt.features.push(fr)}}_limitZoom(fe){return Math.max(this.options.minZoom,Math.min(Math.floor(+fe),this.options.maxZoom+1))}_cluster(fe,we){const Ce=[],{radius:Le,extent:nt,reduce:dt,minPoints:ct}=this.options,Xe=Le/(nt*Math.pow(2,we));for(let pt=0;pt<fe.length;pt++){const vt=fe[pt];if(vt.zoom<=we)continue;vt.zoom=we;const ar=this.trees[we+1],Vt=ar.within(vt.x,vt.y,Xe),fr=vt.numPoints||1;let qr=fr;for(const Ar of Vt){const ln=ar.points[Ar];ln.zoom>we&&(qr+=ln.numPoints||1)}if(qr>fr&&qr>=ct){let Ar=vt.x*fr,ln=vt.y*fr,gn=dt&&fr>1?this._map(vt,!0):null;const An=(pt<<5)+(we+1)+this.points.length;for(const wn of Vt){const Dn=ar.points[wn];if(Dn.zoom<=we)continue;Dn.zoom=we;const $n=Dn.numPoints||1;Ar+=Dn.x*$n,ln+=Dn.y*$n,Dn.parentId=An,dt&&(gn||(gn=this._map(vt,!0)),dt(gn,this._map(Dn)))}vt.parentId=An,Ce.push(Xn(Ar/qr,ln/qr,An,qr,gn))}else if(Ce.push(vt),qr>1)for(const Ar of Vt){const ln=ar.points[Ar];ln.zoom<=we||(ln.zoom=we,Ce.push(ln))}}return Ce}_getOriginId(fe){return fe-this.points.length>>5}_getOriginZoom(fe){return(fe-this.points.length)%32}_map(fe,we){if(fe.numPoints)return we?La({},fe.properties):fe.properties;const Ce=this.points[fe.index].properties,Le=this.options.map(Ce);return we&&Le===Ce?La({},Le):Le}}function Xn(ye,fe,we,Ce,Le){return{x:Qn(ye),y:Qn(fe),zoom:1/0,id:we,parentId:-1,numPoints:Ce,properties:Le}}function Li(ye,fe){const[we,Ce]=ye.geometry.coordinates;return{x:Qn(gi(we)),y:Qn(ea(Ce)),zoom:1/0,index:fe,parentId:-1}}function Pi(ye){return{type:"Feature",id:ye.id,properties:Yi(ye),geometry:{type:"Point",coordinates:[(fe=ye.x,360*(fe-.5)),ya(ye.y)]}};var fe}function Yi(ye){const fe=ye.numPoints,we=fe>=1e4?`${Math.round(fe/1e3)}k`:fe>=1e3?Math.round(fe/100)/10+"k":fe;return La(La({},ye.properties),{cluster:!0,cluster_id:ye.id,point_count:fe,point_count_abbreviated:we})}function gi(ye){return ye/360+.5}function ea(ye){const fe=Math.sin(ye*Math.PI/180),we=.5-.25*Math.log((1+fe)/(1-fe))/Math.PI;return we<0?0:we>1?1:we}function ya(ye){const fe=(180-360*ye)*Math.PI/180;return 360*Math.atan(Math.exp(fe))/Math.PI-90}function La(ye,fe){for(const we in fe)ye[we]=fe[we];return ye}function Aa(ye){return ye.x}function $a(ye){return ye.y}function ka(ye,fe,we,Ce){for(var Le,nt=Ce,dt=we-fe>>1,ct=we-fe,Xe=ye[fe],pt=ye[fe+1],vt=ye[we],ar=ye[we+1],Vt=fe+3;Vt<we;Vt+=3){var fr=Ka(ye[Vt],ye[Vt+1],Xe,pt,vt,ar);if(fr>nt)Le=Vt,nt=fr;else if(fr===nt){var qr=Math.abs(Vt-dt);qr<ct&&(Le=Vt,ct=qr)}}nt>Ce&&(Le-fe>3&&ka(ye,fe,Le,Ce),ye[Le+2]=nt,we-Le>3&&ka(ye,Le,we,Ce))}function Ka(ye,fe,we,Ce,Le,nt){var dt=Le-we,ct=nt-Ce;if(dt!==0||ct!==0){var Xe=((ye-we)*dt+(fe-Ce)*ct)/(dt*dt+ct*ct);Xe>1?(we=Le,Ce=nt):Xe>0&&(we+=dt*Xe,Ce+=ct*Xe)}return(dt=ye-we)*dt+(ct=fe-Ce)*ct}function dr(ye,fe,we,Ce){var Le={id:ye===void 0?null:ye,type:fe,geometry:we,tags:Ce,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(nt){var dt=nt.geometry,ct=nt.type;if(ct==="Point"||ct==="MultiPoint"||ct==="LineString")Mt(nt,dt);else if(ct==="Polygon"||ct==="MultiLineString")for(var Xe=0;Xe<dt.length;Xe++)Mt(nt,dt[Xe]);else if(ct==="MultiPolygon")for(Xe=0;Xe<dt.length;Xe++)for(var pt=0;pt<dt[Xe].length;pt++)Mt(nt,dt[Xe][pt])}(Le),Le}function Mt(ye,fe){for(var we=0;we<fe.length;we+=3)ye.minX=Math.min(ye.minX,fe[we]),ye.minY=Math.min(ye.minY,fe[we+1]),ye.maxX=Math.max(ye.maxX,fe[we]),ye.maxY=Math.max(ye.maxY,fe[we+1])}function yr(ye,fe,we,Ce){if(fe.geometry){var Le=fe.geometry.coordinates,nt=fe.geometry.type,dt=Math.pow(we.tolerance/((1<<we.maxZoom)*we.extent),2),ct=[],Xe=fe.id;if(we.promoteId?Xe=fe.properties[we.promoteId]:we.generateId&&(Xe=Ce||0),nt==="Point")Xt(Le,ct);else if(nt==="MultiPoint")for(var pt=0;pt<Le.length;pt++)Xt(Le[pt],ct);else if(nt==="LineString")Yt(Le,ct,dt,!1);else if(nt==="MultiLineString"){if(we.lineMetrics){for(pt=0;pt<Le.length;pt++)Yt(Le[pt],ct=[],dt,!1),ye.push(dr(Xe,"LineString",ct,fe.properties));return}lr(Le,ct,dt,!1)}else if(nt==="Polygon")lr(Le,ct,dt,!0);else{if(nt!=="MultiPolygon"){if(nt==="GeometryCollection"){for(pt=0;pt<fe.geometry.geometries.length;pt++)yr(ye,{id:Xe,geometry:fe.geometry.geometries[pt],properties:fe.properties},we,Ce);return}throw new Error("Input data is not a valid GeoJSON object.")}for(pt=0;pt<Le.length;pt++){var vt=[];lr(Le[pt],vt,dt,!0),ct.push(vt)}}ye.push(dr(Xe,nt,ct,fe.properties))}}function Xt(ye,fe){fe.push(Qr(ye[0])),fe.push(Xr(ye[1])),fe.push(0)}function Yt(ye,fe,we,Ce){for(var Le,nt,dt=0,ct=0;ct<ye.length;ct++){var Xe=Qr(ye[ct][0]),pt=Xr(ye[ct][1]);fe.push(Xe),fe.push(pt),fe.push(0),ct>0&&(dt+=Ce?(Le*pt-Xe*nt)/2:Math.sqrt(Math.pow(Xe-Le,2)+Math.pow(pt-nt,2))),Le=Xe,nt=pt}var vt=fe.length-3;fe[2]=1,ka(fe,0,vt,we),fe[vt+2]=1,fe.size=Math.abs(dt),fe.start=0,fe.end=fe.size}function lr(ye,fe,we,Ce){for(var Le=0;Le<ye.length;Le++){var nt=[];Yt(ye[Le],nt,we,Ce),fe.push(nt)}}function Qr(ye){return ye/360+.5}function Xr(ye){var fe=Math.sin(ye*Math.PI/180),we=.5-.25*Math.log((1+fe)/(1-fe))/Math.PI;return we<0?0:we>1?1:we}function En(ye,fe,we,Ce,Le,nt,dt,ct){if(Ce/=fe,nt>=(we/=fe)&&dt<Ce)return ye;if(dt<we||nt>=Ce)return null;for(var Xe=[],pt=0;pt<ye.length;pt++){var vt=ye[pt],ar=vt.geometry,Vt=vt.type,fr=Le===0?vt.minX:vt.minY,qr=Le===0?vt.maxX:vt.maxY;if(fr>=we&&qr<Ce)Xe.push(vt);else if(!(qr<we||fr>=Ce)){var Ar=[];if(Vt==="Point"||Vt==="MultiPoint")Rn(ar,Ar,we,Ce,Le);else if(Vt==="LineString")rr(ar,Ar,we,Ce,Le,!1,ct.lineMetrics);else if(Vt==="MultiLineString")ur(ar,Ar,we,Ce,Le,!1);else if(Vt==="Polygon")ur(ar,Ar,we,Ce,Le,!0);else if(Vt==="MultiPolygon")for(var ln=0;ln<ar.length;ln++){var gn=[];ur(ar[ln],gn,we,Ce,Le,!0),gn.length&&Ar.push(gn)}if(Ar.length){if(ct.lineMetrics&&Vt==="LineString"){for(ln=0;ln<Ar.length;ln++)Xe.push(dr(vt.id,Vt,Ar[ln],vt.tags));continue}Vt!=="LineString"&&Vt!=="MultiLineString"||(Ar.length===1?(Vt="LineString",Ar=Ar[0]):Vt="MultiLineString"),Vt!=="Point"&&Vt!=="MultiPoint"||(Vt=Ar.length===3?"Point":"MultiPoint"),Xe.push(dr(vt.id,Vt,Ar,vt.tags))}}}return Xe.length?Xe:null}function Rn(ye,fe,we,Ce,Le){for(var nt=0;nt<ye.length;nt+=3){var dt=ye[nt+Le];dt>=we&&dt<=Ce&&(fe.push(ye[nt]),fe.push(ye[nt+1]),fe.push(ye[nt+2]))}}function rr(ye,fe,we,Ce,Le,nt,dt){for(var ct,Xe,pt=Lr(ye),vt=Le===0?ti:Hr,ar=ye.start,Vt=0;Vt<ye.length-3;Vt+=3){var fr=ye[Vt],qr=ye[Vt+1],Ar=ye[Vt+2],ln=ye[Vt+3],gn=ye[Vt+4],An=Le===0?fr:qr,wn=Le===0?ln:gn,Dn=!1;dt&&(ct=Math.sqrt(Math.pow(fr-ln,2)+Math.pow(qr-gn,2))),An<we?wn>we&&(Xe=vt(pt,fr,qr,ln,gn,we),dt&&(pt.start=ar+ct*Xe)):An>Ce?wn<Ce&&(Xe=vt(pt,fr,qr,ln,gn,Ce),dt&&(pt.start=ar+ct*Xe)):hn(pt,fr,qr,Ar),wn<we&&An>=we&&(Xe=vt(pt,fr,qr,ln,gn,we),Dn=!0),wn>Ce&&An<=Ce&&(Xe=vt(pt,fr,qr,ln,gn,Ce),Dn=!0),!nt&&Dn&&(dt&&(pt.end=ar+ct*Xe),fe.push(pt),pt=Lr(ye)),dt&&(ar+=ct)}var $n=ye.length-3;fr=ye[$n],qr=ye[$n+1],Ar=ye[$n+2],(An=Le===0?fr:qr)>=we&&An<=Ce&&hn(pt,fr,qr,Ar),$n=pt.length-3,nt&&$n>=3&&(pt[$n]!==pt[0]||pt[$n+1]!==pt[1])&&hn(pt,pt[0],pt[1],pt[2]),pt.length&&fe.push(pt)}function Lr(ye){var fe=[];return fe.size=ye.size,fe.start=ye.start,fe.end=ye.end,fe}function ur(ye,fe,we,Ce,Le,nt){for(var dt=0;dt<ye.length;dt++)rr(ye[dt],fe,we,Ce,Le,nt,!1)}function hn(ye,fe,we,Ce){ye.push(fe),ye.push(we),ye.push(Ce)}function ti(ye,fe,we,Ce,Le,nt){var dt=(nt-fe)/(Ce-fe);return ye.push(nt),ye.push(we+(Le-we)*dt),ye.push(1),dt}function Hr(ye,fe,we,Ce,Le,nt){var dt=(nt-we)/(Le-we);return ye.push(fe+(Ce-fe)*dt),ye.push(nt),ye.push(1),dt}function fi(ye,fe){for(var we=[],Ce=0;Ce<ye.length;Ce++){var Le,nt=ye[Ce],dt=nt.type;if(dt==="Point"||dt==="MultiPoint"||dt==="LineString")Le=Ci(nt.geometry,fe);else if(dt==="MultiLineString"||dt==="Polygon"){Le=[];for(var ct=0;ct<nt.geometry.length;ct++)Le.push(Ci(nt.geometry[ct],fe))}else if(dt==="MultiPolygon")for(Le=[],ct=0;ct<nt.geometry.length;ct++){for(var Xe=[],pt=0;pt<nt.geometry[ct].length;pt++)Xe.push(Ci(nt.geometry[ct][pt],fe));Le.push(Xe)}we.push(dr(nt.id,dt,Le,nt.tags))}return we}function Ci(ye,fe){var we=[];we.size=ye.size,ye.start!==void 0&&(we.start=ye.start,we.end=ye.end);for(var Ce=0;Ce<ye.length;Ce+=3)we.push(ye[Ce]+fe,ye[Ce+1],ye[Ce+2]);return we}function zi(ye,fe){if(ye.transformed)return ye;var we,Ce,Le,nt=1<<ye.z,dt=ye.x,ct=ye.y;for(we=0;we<ye.features.length;we++){var Xe=ye.features[we],pt=Xe.geometry,vt=Xe.type;if(Xe.geometry=[],vt===1)for(Ce=0;Ce<pt.length;Ce+=2)Xe.geometry.push(Ae(pt[Ce],pt[Ce+1],fe,nt,dt,ct));else for(Ce=0;Ce<pt.length;Ce++){var ar=[];for(Le=0;Le<pt[Ce].length;Le+=2)ar.push(Ae(pt[Ce][Le],pt[Ce][Le+1],fe,nt,dt,ct));Xe.geometry.push(ar)}}return ye.transformed=!0,ye}function Ae(ye,fe,we,Ce,Le,nt){return[Math.round(we*(ye*Ce-Le)),Math.round(we*(fe*Ce-nt))]}function $e(ye,fe,we,Ce,Le){for(var nt=fe===Le.maxZoom?0:Le.tolerance/((1<<fe)*Le.extent),dt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:we,y:Ce,z:fe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ct=0;ct<ye.length;ct++){dt.numFeatures++,je(dt,ye[ct],nt,Le);var Xe=ye[ct].minX,pt=ye[ct].minY,vt=ye[ct].maxX,ar=ye[ct].maxY;Xe<dt.minX&&(dt.minX=Xe),pt<dt.minY&&(dt.minY=pt),vt>dt.maxX&&(dt.maxX=vt),ar>dt.maxY&&(dt.maxY=ar)}return dt}function je(ye,fe,we,Ce){var Le=fe.geometry,nt=fe.type,dt=[];if(nt==="Point"||nt==="MultiPoint")for(var ct=0;ct<Le.length;ct+=3)dt.push(Le[ct]),dt.push(Le[ct+1]),ye.numPoints++,ye.numSimplified++;else if(nt==="LineString")et(dt,Le,ye,we,!1,!1);else if(nt==="MultiLineString"||nt==="Polygon")for(ct=0;ct<Le.length;ct++)et(dt,Le[ct],ye,we,nt==="Polygon",ct===0);else if(nt==="MultiPolygon")for(var Xe=0;Xe<Le.length;Xe++){var pt=Le[Xe];for(ct=0;ct<pt.length;ct++)et(dt,pt[ct],ye,we,!0,ct===0)}if(dt.length){var vt=fe.tags||null;if(nt==="LineString"&&Ce.lineMetrics){for(var ar in vt={},fe.tags)vt[ar]=fe.tags[ar];vt.mapbox_clip_start=Le.start/Le.size,vt.mapbox_clip_end=Le.end/Le.size}var Vt={geometry:dt,type:nt==="Polygon"||nt==="MultiPolygon"?3:nt==="LineString"||nt==="MultiLineString"?2:1,tags:vt};fe.id!==null&&(Vt.id=fe.id),ye.features.push(Vt)}}function et(ye,fe,we,Ce,Le,nt){var dt=Ce*Ce;if(Ce>0&&fe.size<(Le?dt:Ce))we.numPoints+=fe.length/3;else{for(var ct=[],Xe=0;Xe<fe.length;Xe+=3)(Ce===0||fe[Xe+2]>dt)&&(we.numSimplified++,ct.push(fe[Xe]),ct.push(fe[Xe+1])),we.numPoints++;Le&&function(pt,vt){for(var ar=0,Vt=0,fr=pt.length,qr=fr-2;Vt<fr;qr=Vt,Vt+=2)ar+=(pt[Vt]-pt[qr])*(pt[Vt+1]+pt[qr+1]);if(ar>0===vt)for(Vt=0,fr=pt.length;Vt<fr/2;Vt+=2){var Ar=pt[Vt],ln=pt[Vt+1];pt[Vt]=pt[fr-2-Vt],pt[Vt+1]=pt[fr-1-Vt],pt[fr-2-Vt]=Ar,pt[fr-1-Vt]=ln}}(ct,nt),ye.push(ct)}}function ht(ye,fe){var we=(fe=this.options=function(Le,nt){for(var dt in nt)Le[dt]=nt[dt];return Le}(Object.create(this.options),fe)).debug;if(we&&console.time("preprocess data"),fe.maxZoom<0||fe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(fe.promoteId&&fe.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ce=function(Le,nt){var dt=[];if(Le.type==="FeatureCollection")for(var ct=0;ct<Le.features.length;ct++)yr(dt,Le.features[ct],nt,ct);else yr(dt,Le.type==="Feature"?Le:{geometry:Le},nt);return dt}(ye,fe);this.tiles={},this.tileCoords=[],we&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",fe.indexMaxZoom,fe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ce=function(Le,nt){var dt=nt.buffer/nt.extent,ct=Le,Xe=En(Le,1,-1-dt,dt,0,-1,2,nt),pt=En(Le,1,1-dt,2+dt,0,-1,2,nt);return(Xe||pt)&&(ct=En(Le,1,-dt,1+dt,0,-1,2,nt)||[],Xe&&(ct=fi(Xe,1).concat(ct)),pt&&(ct=ct.concat(fi(pt,-1)))),ct}(Ce,fe),Ce.length&&this.splitTile(Ce,0,0,0),we&&(Ce.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ct(ye,fe,we){return 32*((1<<ye)*we+fe)+ye}function Dt(ye,fe){const we=ye.tileID.canonical;if(!this._geoJSONIndex)return fe(null,null);const Ce=this._geoJSONIndex.getTile(we.z,we.x,we.y);if(!Ce)return fe(null,null);const Le=new z(Ce.features);let nt=X.exports(Le);nt.byteOffset===0&&nt.byteLength===nt.buffer.byteLength||(nt=new Uint8Array(nt)),fe(null,{vectorTile:Le,rawData:nt.buffer})}ht.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ht.prototype.splitTile=function(ye,fe,we,Ce,Le,nt,dt){for(var ct=[ye,fe,we,Ce],Xe=this.options,pt=Xe.debug;ct.length;){Ce=ct.pop(),we=ct.pop(),fe=ct.pop(),ye=ct.pop();var vt=1<<fe,ar=Ct(fe,we,Ce),Vt=this.tiles[ar];if(!Vt&&(pt>1&&console.time("creation"),Vt=this.tiles[ar]=$e(ye,fe,we,Ce,Xe),this.tileCoords.push({z:fe,x:we,y:Ce}),pt)){pt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",fe,we,Ce,Vt.numFeatures,Vt.numPoints,Vt.numSimplified),console.timeEnd("creation"));var fr="z"+fe;this.stats[fr]=(this.stats[fr]||0)+1,this.total++}if(Vt.source=ye,Le){if(fe===Xe.maxZoom||fe===Le)continue;var qr=1<<Le-fe;if(we!==Math.floor(nt/qr)||Ce!==Math.floor(dt/qr))continue}else if(fe===Xe.indexMaxZoom||Vt.numPoints<=Xe.indexMaxPoints)continue;if(Vt.source=null,ye.length!==0){pt>1&&console.time("clipping");var Ar,ln,gn,An,wn,Dn,$n=.5*Xe.buffer/Xe.extent,kn=.5-$n,Qa=.5+$n,Fn=1+$n;Ar=ln=gn=An=null,wn=En(ye,vt,we-$n,we+Qa,0,Vt.minX,Vt.maxX,Xe),Dn=En(ye,vt,we+kn,we+Fn,0,Vt.minX,Vt.maxX,Xe),ye=null,wn&&(Ar=En(wn,vt,Ce-$n,Ce+Qa,1,Vt.minY,Vt.maxY,Xe),ln=En(wn,vt,Ce+kn,Ce+Fn,1,Vt.minY,Vt.maxY,Xe),wn=null),Dn&&(gn=En(Dn,vt,Ce-$n,Ce+Qa,1,Vt.minY,Vt.maxY,Xe),An=En(Dn,vt,Ce+kn,Ce+Fn,1,Vt.minY,Vt.maxY,Xe),Dn=null),pt>1&&console.timeEnd("clipping"),ct.push(Ar||[],fe+1,2*we,2*Ce),ct.push(ln||[],fe+1,2*we,2*Ce+1),ct.push(gn||[],fe+1,2*we+1,2*Ce),ct.push(An||[],fe+1,2*we+1,2*Ce+1)}}},ht.prototype.getTile=function(ye,fe,we){var Ce=this.options,Le=Ce.extent,nt=Ce.debug;if(ye<0||ye>24)return null;var dt=1<<ye,ct=Ct(ye,fe=(fe%dt+dt)%dt,we);if(this.tiles[ct])return zi(this.tiles[ct],Le);nt>1&&console.log("drilling down to z%d-%d-%d",ye,fe,we);for(var Xe,pt=ye,vt=fe,ar=we;!Xe&&pt>0;)pt--,vt=Math.floor(vt/2),ar=Math.floor(ar/2),Xe=this.tiles[Ct(pt,vt,ar)];return Xe&&Xe.source?(nt>1&&console.log("found parent tile z%d-%d-%d",pt,vt,ar),nt>1&&console.time("drilling down"),this.splitTile(Xe.source,pt,vt,ar,ye,fe,we),nt>1&&console.timeEnd("drilling down"),this.tiles[ct]?zi(this.tiles[ct],Le):null):null};class Et extends K{constructor(fe,we,Ce,Le){super(fe,we,Ce,Dt),Le&&(this.loadGeoJSON=Le)}loadData(fe,we){var Ce;(Ce=this._pendingRequest)===null||Ce===void 0||Ce.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Le=!!(fe&&fe.request&&fe.request.collectResourceTiming)&&new s.RequestPerformance(fe.request);this._pendingCallback=we,this._pendingRequest=this.loadGeoJSON(fe,(nt,dt)=>{if(delete this._pendingCallback,delete this._pendingRequest,nt||!dt)return we(nt);if(typeof dt!="object")return we(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`));{G(dt,!0);try{if(fe.filter){const Xe=s.createExpression(fe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Xe.result==="error")throw new Error(Xe.value.map(vt=>`${vt.key}: ${vt.message}`).join(", "));dt={type:"FeatureCollection",features:dt.features.filter(vt=>Xe.value.evaluate({zoom:0},vt))}}this._geoJSONIndex=fe.cluster?new ki(function({superclusterOptions:Xe,clusterProperties:pt}){if(!pt||!Xe)return Xe;const vt={},ar={},Vt={accumulated:null,zoom:0},fr={properties:null},qr=Object.keys(pt);for(const Ar of qr){const[ln,gn]=pt[Ar],An=s.createExpression(gn),wn=s.createExpression(typeof ln=="string"?[ln,["accumulated"],["get",Ar]]:ln);vt[Ar]=An.value,ar[Ar]=wn.value}return Xe.map=Ar=>{fr.properties=Ar;const ln={};for(const gn of qr)ln[gn]=vt[gn].evaluate(Vt,fr);return ln},Xe.reduce=(Ar,ln)=>{fr.properties=ln;for(const gn of qr)Vt.accumulated=Ar[gn],Ar[gn]=ar[gn].evaluate(Vt,fr)},Xe}(fe)).load(dt.features):function(Xe,pt){return new ht(Xe,pt)}(dt,fe.geojsonVtOptions)}catch(Xe){return we(Xe)}this.loaded={};const ct={};if(Le){const Xe=Le.finish();Xe&&(ct.resourceTiming={},ct.resourceTiming[fe.source]=JSON.parse(JSON.stringify(Xe)))}we(null,ct)}})}reloadTile(fe,we){const Ce=this.loaded;return Ce&&Ce[fe.uid]?super.reloadTile(fe,we):this.loadTile(fe,we)}loadGeoJSON(fe,we){if(fe.request)return s.getJSON(fe.request,we);if(typeof fe.data=="string")try{we(null,JSON.parse(fe.data))}catch{we(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`))}else we(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(fe,we){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),we()}getClusterExpansionZoom(fe,we){try{we(null,this._geoJSONIndex.getClusterExpansionZoom(fe.clusterId))}catch(Ce){we(Ce)}}getClusterChildren(fe,we){try{we(null,this._geoJSONIndex.getChildren(fe.clusterId))}catch(Ce){we(Ce)}}getClusterLeaves(fe,we){try{we(null,this._geoJSONIndex.getLeaves(fe.clusterId,fe.limit,fe.offset))}catch(Ce){we(Ce)}}}class Je{constructor(fe){this.self=fe,this.actor=new s.Actor(fe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:K,geojson:Et},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(we,Ce)=>{if(this.workerSourceTypes[we])throw new Error(`Worker source with name "${we}" already registered.`);this.workerSourceTypes[we]=Ce},this.self.registerRTLTextPlugin=we=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=we.applyArabicShaping,s.plugin.processBidirectionalText=we.processBidirectionalText,s.plugin.processStyledBidirectionalText=we.processStyledBidirectionalText}}setReferrer(fe,we){this.referrer=we}setImages(fe,we,Ce){this.availableImages[fe]=we;for(const Le in this.workerSources[fe]){const nt=this.workerSources[fe][Le];for(const dt in nt)nt[dt].availableImages=we}Ce()}setLayers(fe,we,Ce){this.getLayerIndex(fe).replace(we),Ce()}updateLayers(fe,we,Ce){this.getLayerIndex(fe).update(we.layers,we.removedIds),Ce()}loadTile(fe,we,Ce){this.getWorkerSource(fe,we.type,we.source).loadTile(we,Ce)}loadDEMTile(fe,we,Ce){this.getDEMWorkerSource(fe,we.source).loadTile(we,Ce)}reloadTile(fe,we,Ce){this.getWorkerSource(fe,we.type,we.source).reloadTile(we,Ce)}abortTile(fe,we,Ce){this.getWorkerSource(fe,we.type,we.source).abortTile(we,Ce)}removeTile(fe,we,Ce){this.getWorkerSource(fe,we.type,we.source).removeTile(we,Ce)}removeDEMTile(fe,we){this.getDEMWorkerSource(fe,we.source).removeTile(we)}removeSource(fe,we,Ce){if(!this.workerSources[fe]||!this.workerSources[fe][we.type]||!this.workerSources[fe][we.type][we.source])return;const Le=this.workerSources[fe][we.type][we.source];delete this.workerSources[fe][we.type][we.source],Le.removeSource!==void 0?Le.removeSource(we,Ce):Ce()}loadWorkerSource(fe,we,Ce){try{this.self.importScripts(we.url),Ce()}catch(Le){Ce(Le.toString())}}syncRTLPluginState(fe,we,Ce){try{s.plugin.setState(we);const Le=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&Le!=null){this.self.importScripts(Le);const nt=s.plugin.isParsed();Ce(nt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Le}`),nt)}}catch(Le){Ce(Le.toString())}}getAvailableImages(fe){let we=this.availableImages[fe];return we||(we=[]),we}getLayerIndex(fe){let we=this.layerIndexes[fe];return we||(we=this.layerIndexes[fe]=new S),we}getWorkerSource(fe,we,Ce){if(this.workerSources[fe]||(this.workerSources[fe]={}),this.workerSources[fe][we]||(this.workerSources[fe][we]={}),!this.workerSources[fe][we][Ce]){const Le={send:(nt,dt,ct)=>{this.actor.send(nt,dt,ct,fe)}};this.workerSources[fe][we][Ce]=new this.workerSourceTypes[we](Le,this.getLayerIndex(fe),this.getAvailableImages(fe))}return this.workerSources[fe][we][Ce]}getDEMWorkerSource(fe,we){return this.demWorkerSources[fe]||(this.demWorkerSources[fe]={}),this.demWorkerSources[fe][we]||(this.demWorkerSources[fe][we]=new re),this.demWorkerSources[fe][we]}enforceCacheSizeLimit(fe,we){s.enforceCacheSizeLimit(we)}}return s.isWorker()&&(self.worker=new Je(self)),Je}),l(["./shared"],function(s){var d=v;function v(O){return!function(c){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var k,R,W=new Blob([""],{type:"text/javascript"}),q=URL.createObjectURL(W);try{R=new Worker(q),k=!0}catch{k=!1}return R&&R.terminate(),URL.revokeObjectURL(q),k}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var k=document.createElement("canvas");k.width=k.height=1;var R=k.getContext("2d");if(!R)return!1;var W=R.getImageData(0,0,1,1);return W&&W.width===k.width}()?(S[_=c&&c.failIfMajorPerformanceCaveat]===void 0&&(S[_]=function(k){var R,W=function(q){var ue=document.createElement("canvas"),he=Object.create(v.webGLContextAttributes);return he.failIfMajorPerformanceCaveat=q,ue.getContext("webgl",he)||ue.getContext("experimental-webgl",he)}(k);if(!W)return!1;try{R=W.createShader(W.VERTEX_SHADER)}catch{return!1}return!(!R||W.isContextLost())&&(W.shaderSource(R,"void main() {}"),W.compileShader(R),W.getShaderParameter(R,W.COMPILE_STATUS)===!0)}(_)),S[_]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var _}(O)}var S={};function A(O,c){if(Array.isArray(O)){if(!Array.isArray(c)||O.length!==c.length)return!1;for(let _=0;_<O.length;_++)if(!A(O[_],c[_]))return!1;return!0}if(typeof O=="object"&&O!==null&&c!==null){if(typeof c!="object"||Object.keys(O).length!==Object.keys(c).length)return!1;for(const _ in O)if(!A(O[_],c[_]))return!1;return!0}return O===c}v.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class P{static testProp(c){if(!P.docStyle)return c[0];for(let _=0;_<c.length;_++)if(c[_]in P.docStyle)return c[_];return c[0]}static create(c,_,k){const R=window.document.createElement(c);return _!==void 0&&(R.className=_),k&&k.appendChild(R),R}static createNS(c,_){return window.document.createElementNS(c,_)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(c,_){c.style[P.transformProp]=_}static addEventListener(c,_,k,R={}){c.addEventListener(_,k,"passive"in R?R:R.capture)}static removeEventListener(c,_,k,R={}){c.removeEventListener(_,k,"passive"in R?R:R.capture)}static suppressClickInternal(c){c.preventDefault(),c.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",P.suppressClickInternal,!0)},0)}static mousePos(c,_){const k=c.getBoundingClientRect();return new s.pointGeometry(_.clientX-k.left-c.clientLeft,_.clientY-k.top-c.clientTop)}static touchPos(c,_){const k=c.getBoundingClientRect(),R=[];for(let W=0;W<_.length;W++)R.push(new s.pointGeometry(_[W].clientX-k.left-c.clientLeft,_[W].clientY-k.top-c.clientTop));return R}static mouseButton(c){return c.button}static remove(c){c.parentNode&&c.parentNode.removeChild(c)}}P.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);class L{constructor(c){this._transformRequestFn=c}transformRequest(c,_){return this._transformRequestFn&&this._transformRequestFn(c,_)||{url:c}}normalizeSpriteURL(c,_,k){const R=function(W){const q=W.match(F);if(!q)throw new Error(`Unable to parse URL "${W}"`);return{protocol:q[1],authority:q[2],path:q[3]||"/",params:q[4]?q[4].split("&"):[]}}(c);return R.path+=`${_}${k}`,function(W){const q=W.params.length?`?${W.params.join("&")}`:"";return`${W.protocol}://${W.authority}${W.path}${q}`}(R)}setTransformRequest(c){this._transformRequestFn=c}}const F=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class K{constructor(c,_,k,R){this.context=c,this.format=k,this.texture=c.gl.createTexture(),this.update(_,R)}update(c,_,k){const{width:R,height:W}=c,q=!(this.size&&this.size[0]===R&&this.size[1]===W||k),{context:ue}=this,{gl:he}=ue;if(this.useMipmap=!!(_&&_.useMipmap),he.bindTexture(he.TEXTURE_2D,this.texture),ue.pixelStoreUnpackFlipY.set(!1),ue.pixelStoreUnpack.set(1),ue.pixelStoreUnpackPremultiplyAlpha.set(this.format===he.RGBA&&(!_||_.premultiply!==!1)),q)this.size=[R,W],c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement||c instanceof ImageData||s.isImageBitmap(c)?he.texImage2D(he.TEXTURE_2D,0,this.format,this.format,he.UNSIGNED_BYTE,c):he.texImage2D(he.TEXTURE_2D,0,this.format,R,W,0,this.format,he.UNSIGNED_BYTE,c.data);else{const{x:be,y:Te}=k||{x:0,y:0};c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement||c instanceof ImageData||s.isImageBitmap(c)?he.texSubImage2D(he.TEXTURE_2D,0,be,Te,he.RGBA,he.UNSIGNED_BYTE,c):he.texSubImage2D(he.TEXTURE_2D,0,be,Te,R,W,he.RGBA,he.UNSIGNED_BYTE,c.data)}this.useMipmap&&this.isSizePowerOfTwo()&&he.generateMipmap(he.TEXTURE_2D)}bind(c,_,k){const{context:R}=this,{gl:W}=R;W.bindTexture(W.TEXTURE_2D,this.texture),k!==W.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(k=W.LINEAR),c!==this.filter&&(W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,c),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,k||c),this.filter=c),_!==this.wrap&&(W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,_),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,_),this.wrap=_)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:c}=this.context;c.deleteTexture(this.texture),this.texture=null}}function re(O){const{userImage:c}=O;return!!(c&&c.render&&c.render())&&(O.data.replace(new Uint8Array(c.data.buffer)),!0)}class G extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(c){if(this.loaded!==c&&(this.loaded=c,c)){for(const{ids:_,callback:k}of this.requestors)this._notify(_,k);this.requestors=[]}}getImage(c){return this.images[c]}addImage(c,_){if(this.images[c])throw new Error(`Image id ${c} already exist, use updateImage instead`);this._validate(c,_)&&(this.images[c]=_)}_validate(c,_){let k=!0;return this._validateStretch(_.stretchX,_.data&&_.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${c}" has invalid "stretchX" value`))),k=!1),this._validateStretch(_.stretchY,_.data&&_.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${c}" has invalid "stretchY" value`))),k=!1),this._validateContent(_.content,_)||(this.fire(new s.ErrorEvent(new Error(`Image "${c}" has invalid "content" value`))),k=!1),k}_validateStretch(c,_){if(!c)return!0;let k=0;for(const R of c){if(R[0]<k||R[1]<R[0]||_<R[1])return!1;k=R[1]}return!0}_validateContent(c,_){return!(c&&(c.length!==4||c[0]<0||_.data.width<c[0]||c[1]<0||_.data.height<c[1]||c[2]<0||_.data.width<c[2]||c[3]<0||_.data.height<c[3]||c[2]<c[0]||c[3]<c[1]))}updateImage(c,_){const k=this.images[c];if(k.data.width!==_.data.width||k.data.height!==_.data.height)throw new Error(`size mismatch between old image (${k.data.width}x${k.data.height}) and new image (${_.data.width}x${_.data.height}).`);_.version=k.version+1,this.images[c]=_,this.updatedImages[c]=!0}removeImage(c){const _=this.images[c];delete this.images[c],delete this.patterns[c],_.userImage&&_.userImage.onRemove&&_.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(c,_){let k=!0;if(!this.isLoaded())for(const R of c)this.images[R]||(k=!1);this.isLoaded()||k?this._notify(c,_):this.requestors.push({ids:c,callback:_})}_notify(c,_){const k={};for(const R of c){this.images[R]||this.fire(new s.Event("styleimagemissing",{id:R}));const W=this.images[R];W?k[R]={data:W.data.clone(),pixelRatio:W.pixelRatio,sdf:W.sdf,version:W.version,stretchX:W.stretchX,stretchY:W.stretchY,content:W.content,hasRenderCallback:!!(W.userImage&&W.userImage.render)}:s.warnOnce(`Image "${R}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}_(null,k)}getPixelSize(){const{width:c,height:_}=this.atlasImage;return{width:c,height:_}}getPattern(c){const _=this.patterns[c],k=this.getImage(c);if(!k)return null;if(_&&_.position.version===k.version)return _.position;if(_)_.position.version=k.version;else{const R={w:k.data.width+2,h:k.data.height+2,x:0,y:0},W=new s.ImagePosition(R,k);this.patterns[c]={bin:R,position:W}}return this._updatePatternAtlas(),this.patterns[c].position}bind(c){const _=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new K(c,this.atlasImage,_.RGBA),this.atlasTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE)}_updatePatternAtlas(){const c=[];for(const W in this.patterns)c.push(this.patterns[W].bin);const{w:_,h:k}=s.potpack(c),R=this.atlasImage;R.resize({width:_||1,height:k||1});for(const W in this.patterns){const{bin:q}=this.patterns[W],ue=q.x+1,he=q.y+1,be=this.images[W].data,Te=be.width,Ue=be.height;s.RGBAImage.copy(be,R,{x:0,y:0},{x:ue,y:he},{width:Te,height:Ue}),s.RGBAImage.copy(be,R,{x:0,y:Ue-1},{x:ue,y:he-1},{width:Te,height:1}),s.RGBAImage.copy(be,R,{x:0,y:0},{x:ue,y:he+Ue},{width:Te,height:1}),s.RGBAImage.copy(be,R,{x:Te-1,y:0},{x:ue-1,y:he},{width:1,height:Ue}),s.RGBAImage.copy(be,R,{x:0,y:0},{x:ue+Te,y:he},{width:1,height:Ue})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(c){for(const _ of c){if(this.callbackDispatchedThisFrame[_])continue;this.callbackDispatchedThisFrame[_]=!0;const k=this.images[_];k||s.warnOnce(`Image with ID: "${_}" was not found`),re(k)&&this.updateImage(_,k)}}}const H=1e20;function B(O,c,_,k,R,W,q,ue,he){for(let be=c;be<c+k;be++)$(O,_*W+be,W,R,q,ue,he);for(let be=_;be<_+R;be++)$(O,be*W+c,1,k,q,ue,he)}function $(O,c,_,k,R,W,q){W[0]=0,q[0]=-H,q[1]=H,R[0]=O[c];for(let ue=1,he=0,be=0;ue<k;ue++){R[ue]=O[c+ue*_];const Te=ue*ue;do{const Ue=W[he];be=(R[ue]-R[Ue]+Te-Ue*Ue)/(ue-Ue)/2}while(be<=q[he]&&--he>-1);he++,W[he]=ue,q[he]=be,q[he+1]=H}for(let ue=0,he=0;ue<k;ue++){for(;q[he+1]<ue;)he++;const be=W[he],Te=ue-be;O[c+ue*_]=R[be]+Te*Te}}class N{constructor(c,_){this.requestManager=c,this.localIdeographFontFamily=_,this.entries={}}setURL(c){this.url=c}getGlyphs(c,_){const k=[];for(const R in c)for(const W of c[R])k.push({stack:R,id:W});s.asyncAll(k,({stack:R,id:W},q)=>{let ue=this.entries[R];ue||(ue=this.entries[R]={glyphs:{},requests:{},ranges:{}});let he=ue.glyphs[W];if(he!==void 0)return void q(null,{stack:R,id:W,glyph:he});if(he=this._tinySDF(ue,R,W),he)return ue.glyphs[W]=he,void q(null,{stack:R,id:W,glyph:he});const be=Math.floor(W/256);if(256*be>65535)return void q(new Error("glyphs > 65535 not supported"));if(ue.ranges[be])return void q(null,{stack:R,id:W,glyph:he});let Te=ue.requests[be];Te||(Te=ue.requests[be]=[],N.loadGlyphRange(R,be,this.url,this.requestManager,(Ue,Ke)=>{if(Ke){for(const yt in Ke)this._doesCharSupportLocalGlyph(+yt)||(ue.glyphs[+yt]=Ke[+yt]);ue.ranges[be]=!0}for(const yt of Te)yt(Ue,Ke);delete ue.requests[be]})),Te.push((Ue,Ke)=>{Ue?q(Ue):Ke&&q(null,{stack:R,id:W,glyph:Ke[W]||null})})},(R,W)=>{if(R)_(R);else if(W){const q={};for(const{stack:ue,id:he,glyph:be}of W)(q[ue]||(q[ue]={}))[he]=be&&{id:be.id,bitmap:be.bitmap.clone(),metrics:be.metrics};_(null,q)}})}_doesCharSupportLocalGlyph(c){return!!this.localIdeographFontFamily&&(s.unicodeBlockLookup["CJK Unified Ideographs"](c)||s.unicodeBlockLookup["Hangul Syllables"](c)||s.unicodeBlockLookup.Hiragana(c)||s.unicodeBlockLookup.Katakana(c))}_tinySDF(c,_,k){const R=this.localIdeographFontFamily;if(!R||!this._doesCharSupportLocalGlyph(k))return;let W=c.tinySDF;if(!W){let ue="400";/bold/i.test(_)?ue="900":/medium/i.test(_)?ue="500":/light/i.test(_)&&(ue="200"),W=c.tinySDF=new N.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:R,fontWeight:ue})}const q=W.draw(String.fromCharCode(k));return{id:k,bitmap:new s.AlphaImage({width:q.width||30,height:q.height||30},q.data),metrics:{width:q.glyphWidth||24,height:q.glyphHeight||24,left:q.glyphLeft||0,top:q.glyphTop-27||-8,advance:q.glyphAdvance||24}}}}N.loadGlyphRange=function(O,c,_,k,R){const W=256*c,q=W+255,ue=k.transformRequest(_.replace("{fontstack}",O).replace("{range}",`${W}-${q}`),s.ResourceType.Glyphs);s.getArrayBuffer(ue,(he,be)=>{if(he)R(he);else if(be){const Te={};for(const Ue of s.parseGlyphPbf(be))Te[Ue.id]=Ue;R(null,Te)}})},N.TinySDF=class{constructor({fontSize:O=24,buffer:c=3,radius:_=8,cutoff:k=.25,fontFamily:R="sans-serif",fontWeight:W="normal",fontStyle:q="normal"}={}){this.buffer=c,this.cutoff=k,this.radius=_;const ue=this.size=O+4*c,he=this._createCanvas(ue),be=this.ctx=he.getContext("2d",{willReadFrequently:!0});be.font=`${q} ${W} ${O}px ${R}`,be.textBaseline="alphabetic",be.textAlign="left",be.fillStyle="black",this.gridOuter=new Float64Array(ue*ue),this.gridInner=new Float64Array(ue*ue),this.f=new Float64Array(ue),this.z=new Float64Array(ue+1),this.v=new Uint16Array(ue)}_createCanvas(O){const c=document.createElement("canvas");return c.width=c.height=O,c}draw(O){const{width:c,actualBoundingBoxAscent:_,actualBoundingBoxDescent:k,actualBoundingBoxLeft:R,actualBoundingBoxRight:W}=this.ctx.measureText(O),q=Math.ceil(_),ue=Math.min(this.size-this.buffer,Math.ceil(W-R)),he=Math.min(this.size-this.buffer,q+Math.ceil(k)),be=ue+2*this.buffer,Te=he+2*this.buffer,Ue=Math.max(be*Te,0),Ke=new Uint8ClampedArray(Ue),yt={data:Ke,width:be,height:Te,glyphWidth:ue,glyphHeight:he,glyphTop:q,glyphLeft:0,glyphAdvance:c};if(ue===0||he===0)return yt;const{ctx:ut,buffer:gt,gridInner:zt,gridOuter:Gt}=this;ut.clearRect(gt,gt,ue,he),ut.fillText(O,gt,gt+q);const Jt=ut.getImageData(gt,gt,ue,he);Gt.fill(H,0,Ue),zt.fill(0,0,Ue);for(let bt=0;bt<he;bt++)for(let nr=0;nr<ue;nr++){const er=Jt.data[4*(bt*ue+nr)+3]/255;if(er===0)continue;const mr=(bt+gt)*be+nr+gt;if(er===1)Gt[mr]=0,zt[mr]=H;else{const Sr=.5-er;Gt[mr]=Sr>0?Sr*Sr:0,zt[mr]=Sr<0?Sr*Sr:0}}B(Gt,0,0,be,Te,be,this.f,this.v,this.z),B(zt,gt,gt,ue,he,be,this.f,this.v,this.z);for(let bt=0;bt<Ue;bt++){const nr=Math.sqrt(Gt[bt])-Math.sqrt(zt[bt]);Ke[bt]=Math.round(255-255*(nr/this.radius+this.cutoff))}return yt}};const z=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(O,c){return s.sphericalToCartesian(O.expression.evaluate(c))}interpolate(O,c,_){return{x:s.number(O.x,c.x,_),y:s.number(O.y,c.y,_),z:s.number(O.z,c.z,_)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)}),X="-transition";class te extends s.Evented{constructor(c){super(),this._transitionable=new s.Transitionable(z),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,_={}){if(!this._validate(s.validateLight,c,_))for(const k in c){const R=c[k];k.endsWith(X)?this._transitionable.setTransition(k.slice(0,-X.length),R):this._transitionable.setValue(k,R)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,_,k){return(!k||k.validate!==!1)&&s.emitValidationErrors(this,c.call(s.validateStyle,s.extend({value:_,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class pe{constructor(c,_){this.width=c,this.height=_,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(c,_){const k=c.join(",")+String(_);return this.dashEntry[k]||(this.dashEntry[k]=this.addDash(c,_)),this.dashEntry[k]}getDashRanges(c,_,k){const R=[];let W=c.length%2==1?-c[c.length-1]*k:0,q=c[0]*k,ue=!0;R.push({left:W,right:q,isDash:ue,zeroLength:c[0]===0});let he=c[0];for(let be=1;be<c.length;be++){ue=!ue;const Te=c[be];W=he*k,he+=Te,q=he*k,R.push({left:W,right:q,isDash:ue,zeroLength:Te===0})}return R}addRoundDash(c,_,k){const R=_/2;for(let W=-k;W<=k;W++){const q=this.width*(this.nextRow+k+W);let ue=0,he=c[ue];for(let be=0;be<this.width;be++){be/he.right>1&&(he=c[++ue]);const Te=Math.abs(be-he.left),Ue=Math.abs(be-he.right),Ke=Math.min(Te,Ue);let yt;const ut=W/k*(R+1);if(he.isDash){const gt=R-Math.abs(ut);yt=Math.sqrt(Ke*Ke+gt*gt)}else yt=R-Math.sqrt(Ke*Ke+ut*ut);this.data[q+be]=Math.max(0,Math.min(255,yt+128))}}}addRegularDash(c){for(let ue=c.length-1;ue>=0;--ue){const he=c[ue],be=c[ue+1];he.zeroLength?c.splice(ue,1):be&&be.isDash===he.isDash&&(be.left=he.left,c.splice(ue,1))}const _=c[0],k=c[c.length-1];_.isDash===k.isDash&&(_.left=k.left-this.width,k.right=_.right+this.width);const R=this.width*this.nextRow;let W=0,q=c[W];for(let ue=0;ue<this.width;ue++){ue/q.right>1&&(q=c[++W]);const he=Math.abs(ue-q.left),be=Math.abs(ue-q.right),Te=Math.min(he,be);this.data[R+ue]=Math.max(0,Math.min(255,(q.isDash?Te:-Te)+128))}}addDash(c,_){const k=_?7:0,R=2*k+1;if(this.nextRow+R>this.height)return s.warnOnce("LineAtlas out of space"),null;let W=0;for(let ue=0;ue<c.length;ue++)W+=c[ue];if(W!==0){const ue=this.width/W,he=this.getDashRanges(c,this.width,ue);_?this.addRoundDash(he,ue,k):this.addRegularDash(he)}const q={y:(this.nextRow+k+.5)/this.height,height:2*k/this.height,width:W};return this.nextRow+=R,this.dirty=!0,q}bind(c){const _=c.gl;this.texture?(_.bindTexture(_.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,_.texSubImage2D(_.TEXTURE_2D,0,0,0,this.width,this.height,_.ALPHA,_.UNSIGNED_BYTE,this.data))):(this.texture=_.createTexture(),_.bindTexture(_.TEXTURE_2D,this.texture),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.REPEAT),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.REPEAT),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR),_.texImage2D(_.TEXTURE_2D,0,_.ALPHA,this.width,this.height,0,_.ALPHA,_.UNSIGNED_BYTE,this.data))}}class ke{constructor(c,_){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const k=this.workerPool.acquire(this.id);for(let R=0;R<k.length;R++){const W=new ke.Actor(k[R],_,this.id);W.name=`Worker ${R}`,this.actors.push(W)}if(!this.actors.length)throw new Error("No actors found")}broadcast(c,_,k){s.asyncAll(this.actors,(R,W)=>{R.send(c,_,W)},k=k||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(c=>{c.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Pe(O,c,_){const k=function(R,W){if(R)return _(R);if(W){const q=s.pick(s.extend(W,O),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);W.vector_layers&&(q.vectorLayers=W.vector_layers,q.vectorLayerIds=q.vectorLayers.map(ue=>ue.id)),_(null,q)}};return O.url?s.getJSON(c.transformRequest(O.url,s.ResourceType.Source),k):s.exported.frame(()=>k(null,O))}ke.Actor=s.Actor;class ge{constructor(c,_,k){this.bounds=s.LngLatBounds.convert(this.validateBounds(c)),this.minzoom=_||0,this.maxzoom=k||24}validateBounds(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const _=Math.pow(2,c.z),k=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*_),R=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*_),W=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*_),q=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*_);return c.x>=k&&c.x<W&&c.y>=R&&c.y<q}}class Ie extends s.Evented{constructor(c,_,k,R){if(super(),this.id=c,this.dispatcher=k,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(_,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},_),this._collectResourceTiming=_.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(R)}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Pe(this._options,this.map._requestManager,(c,_)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),c?this.fire(new s.ErrorEvent(c)):_&&(s.extend(this,_),_.bounds&&(this.tileBounds=new ge(_.bounds,this.minzoom,this.maxzoom)),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}setSourceProperty(c){this._tileJSONRequest&&this._tileJSONRequest.cancel(),c(),this.load()}setTiles(c){return this.setSourceProperty(()=>{this._options.tiles=c}),this}setUrl(c){return this.setSourceProperty(()=>{this.url=c,this._options.url=c}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}loadTile(c,_){const k=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),R={request:this.map._requestManager.transformRequest(k,s.ResourceType.Tile),uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function W(q,ue){return delete c.request,c.aborted?_(null):q&&q.status!==404?_(q):(ue&&ue.resourceTiming&&(c.resourceTiming=ue.resourceTiming),this.map._refreshExpiredTiles&&ue&&c.setExpiryData(ue),c.loadVectorData(ue,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),_(null),void(c.reloadCallback&&(this.loadTile(c,c.reloadCallback),c.reloadCallback=null)))}R.request.collectResourceTiming=this._collectResourceTiming,c.actor&&c.state!=="expired"?c.state==="loading"?c.reloadCallback=_:c.request=c.actor.send("reloadTile",R,W.bind(this)):(c.actor=this.dispatcher.getActor(),c.request=c.actor.send("loadTile",R,W.bind(this)))}abortTile(c){c.request&&(c.request.cancel(),delete c.request),c.actor&&c.actor.send("abortTile",{uid:c.uid,type:this.type,source:this.id},void 0)}unloadTile(c){c.unloadVectorData(),c.actor&&c.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Ne extends s.Evented{constructor(c,_,k,R){super(),this.id=c,this.dispatcher=k,this.setEventedParent(R),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},_),s.extend(this,s.pick(_,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Pe(this._options,this.map._requestManager,(c,_)=>{this._tileJSONRequest=null,this._loaded=!0,c?this.fire(new s.ErrorEvent(c)):_&&(s.extend(this,_),_.bounds&&(this.tileBounds=new ge(_.bounds,this.minzoom,this.maxzoom)),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c,_){const k=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);c.request=s.getImage(this.map._requestManager.transformRequest(k,s.ResourceType.Tile),(R,W,q)=>{if(delete c.request,c.aborted)c.state="unloaded",_(null);else if(R)c.state="errored",_(R);else if(W){this.map._refreshExpiredTiles&&c.setExpiryData(q);const ue=this.map.painter.context,he=ue.gl;c.texture=this.map.painter.getTileTexture(W.width),c.texture?c.texture.update(W,{useMipmap:!0}):(c.texture=new K(ue,W,he.RGBA,{useMipmap:!0}),c.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE,he.LINEAR_MIPMAP_NEAREST),ue.extTextureFilterAnisotropic&&he.texParameterf(he.TEXTURE_2D,ue.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ue.extTextureFilterAnisotropicMax)),c.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),_(null)}})}abortTile(c,_){c.request&&(c.request.cancel(),delete c.request),_()}unloadTile(c,_){c.texture&&this.map.painter.saveTileTexture(c.texture),_()}hasTransition(){return!1}}let lt;class it extends Ne{constructor(c,_,k,R){super(c,_,k,R),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},_),this.encoding=_.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(c,_){const k=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function R(W,q){W&&(c.state="errored",_(W)),q&&(c.dem=q,c.needsHillshadePrepare=!0,c.needsTerrainPrepare=!0,c.state="loaded",_(null))}c.request=s.getImage(this.map._requestManager.transformRequest(k,s.ResourceType.Tile),function(W,q){if(delete c.request,c.aborted)c.state="unloaded",_(null);else if(W)c.state="errored",_(W);else if(q){this.map._refreshExpiredTiles&&c.setExpiryData(q),delete q.cacheControl,delete q.expires;const ue=s.isImageBitmap(q)&&(lt==null&&(lt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),lt)?q:s.exported.getImageData(q,1),he={uid:c.uid,coord:c.tileID,source:this.id,rawImageData:ue,encoding:this.encoding};c.actor&&c.state!=="expired"||(c.actor=this.dispatcher.getActor(),c.actor.send("loadDEMTile",he,R.bind(this)))}}.bind(this)),c.neighboringTiles=this._getNeighboringTiles(c.tileID)}_getNeighboringTiles(c){const _=c.canonical,k=Math.pow(2,_.z),R=(_.x-1+k)%k,W=_.x===0?c.wrap-1:c.wrap,q=(_.x+1+k)%k,ue=_.x+1===k?c.wrap+1:c.wrap,he={};return he[new s.OverscaledTileID(c.overscaledZ,W,_.z,R,_.y).key]={backfilled:!1},he[new s.OverscaledTileID(c.overscaledZ,ue,_.z,q,_.y).key]={backfilled:!1},_.y>0&&(he[new s.OverscaledTileID(c.overscaledZ,W,_.z,R,_.y-1).key]={backfilled:!1},he[new s.OverscaledTileID(c.overscaledZ,c.wrap,_.z,_.x,_.y-1).key]={backfilled:!1},he[new s.OverscaledTileID(c.overscaledZ,ue,_.z,q,_.y-1).key]={backfilled:!1}),_.y+1<k&&(he[new s.OverscaledTileID(c.overscaledZ,W,_.z,R,_.y+1).key]={backfilled:!1},he[new s.OverscaledTileID(c.overscaledZ,c.wrap,_.z,_.x,_.y+1).key]={backfilled:!1},he[new s.OverscaledTileID(c.overscaledZ,ue,_.z,q,_.y+1).key]={backfilled:!1}),he}unloadTile(c){c.demTexture&&this.map.painter.saveTileTexture(c.demTexture),c.fbo&&(c.fbo.destroy(),delete c.fbo),c.dem&&delete c.dem,delete c.neighboringTiles,c.state="unloaded",c.actor&&c.actor.send("removeDEMTile",{uid:c.uid,source:this.id})}}class Rt extends s.Evented{constructor(c,_,k,R){super(),this.id=c,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=k.getActor(),this.setEventedParent(R),this._data=_.data,this._options=s.extend({},_),this._collectResourceTiming=_.collectResourceTiming,_.maxzoom!==void 0&&(this.maxzoom=_.maxzoom),_.type&&(this.type=_.type),_.attribution&&(this.attribution=_.attribution),this.promoteId=_.promoteId;const W=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:_.cluster||!1,geojsonVtOptions:{buffer:(_.buffer!==void 0?_.buffer:128)*W,tolerance:(_.tolerance!==void 0?_.tolerance:.375)*W,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:_.lineMetrics||!1,generateId:_.generateId||!1},superclusterOptions:{maxZoom:_.clusterMaxZoom!==void 0?_.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,_.clusterMinPoints||2),extent:s.EXTENT,radius:(_.clusterRadius||50)*W,log:!1,generateId:_.generateId||!1},clusterProperties:_.clusterProperties,filter:_.filter},_.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(c){this.map=c,this.load()}setData(c){return this._data=c,this._updateWorkerData("content"),this}getClusterExpansionZoom(c,_){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:c,source:this.id},_),this}getClusterChildren(c,_){return this.actor.send("geojson.getClusterChildren",{clusterId:c,source:this.id},_),this}getClusterLeaves(c,_,k,R){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:c,limit:_,offset:k},R),this}_updateWorkerData(c){const _=s.extend({},this.workerOptions),k=this._data;typeof k=="string"?(_.request=this.map._requestManager.transformRequest(s.exported.resolveURL(k),s.ResourceType.Source),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(k),this._pendingLoads++,this.fire(new s.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,_,(R,W)=>{if(this._pendingLoads--,this._removed||W&&W.abandoned)return void this.fire(new s.Event("dataabort",{dataType:"source",sourceDataType:c}));let q=null;if(W&&W.resourceTiming&&W.resourceTiming[this.id]&&(q=W.resourceTiming[this.id].slice(0)),R)return void this.fire(new s.ErrorEvent(R));const ue={dataType:"source",sourceDataType:c};this._collectResourceTiming&&q&&q.length>0&&s.extend(ue,{resourceTiming:q}),this.fire(new s.Event("data",ue))})}loaded(){return this._pendingLoads===0}loadTile(c,_){const k=c.actor?"reloadTile":"loadTile";c.actor=this.actor;const R={type:this.type,uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};c.request=this.actor.send(k,R,(W,q)=>(delete c.request,c.unloadVectorData(),c.aborted?_(null):W?_(W):(c.loadVectorData(q,this.map.painter,k==="reloadTile"),_(null))))}abortTile(c){c.request&&(c.request.cancel(),delete c.request),c.aborted=!0}unloadTile(c){c.unloadVectorData(),this.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var St=s.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Zt extends s.Evented{constructor(c,_,k,R){super(),this.id=c,this.dispatcher=k,this.coordinates=_.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(R),this.options=_}load(c,_){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(k,R)=>{this._loaded=!0,k?this.fire(new s.ErrorEvent(k)):R&&(this.image=R,c&&(this.coordinates=c),_&&_(),this._finishLoading())})}loaded(){return this._loaded}updateImage(c){return this.image&&c.url?(this.options.url=c.url,this.load(c.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}setCoordinates(c){this.coordinates=c;const _=c.map(s.MercatorCoordinate.fromLngLat);this.tileID=function(R){let W=1/0,q=1/0,ue=-1/0,he=-1/0;for(const Ke of R)W=Math.min(W,Ke.x),q=Math.min(q,Ke.y),ue=Math.max(ue,Ke.x),he=Math.max(he,Ke.y);const be=Math.max(ue-W,he-q),Te=Math.max(0,Math.floor(-Math.log(be)/Math.LN2)),Ue=Math.pow(2,Te);return new s.CanonicalTileID(Te,Math.floor((W+ue)/2*Ue),Math.floor((q+he)/2*Ue))}(_),this.minzoom=this.maxzoom=this.tileID.z;const k=_.map(R=>this.tileID.getTilePoint(R)._round());return this._boundsArray=new s.RasterBoundsArray,this._boundsArray.emplaceBack(k[0].x,k[0].y,0,0),this._boundsArray.emplaceBack(k[1].x,k[1].y,s.EXTENT,0),this._boundsArray.emplaceBack(k[3].x,k[3].y,0,s.EXTENT),this._boundsArray.emplaceBack(k[2].x,k[2].y,s.EXTENT,s.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const c=this.map.painter.context,_=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,St.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new K(c,this.image,_.RGBA),this.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE));for(const k in this.tiles){const R=this.tiles[k];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture)}}loadTile(c,_){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={},_(null)):(c.state="errored",_(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Kt extends Zt{constructor(c,_,k,R){super(c,_,k,R),this.roundZoom=!0,this.type="video",this.options=_}load(){this._loaded=!1;const c=this.options;this.urls=[];for(const _ of c.urls)this.urls.push(this.map._requestManager.transformRequest(_,s.ResourceType.Source).url);s.getVideo(this.urls,(_,k)=>{this._loaded=!0,_?this.fire(new s.ErrorEvent(_)):k&&(this.video=k,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(c){if(this.video){const _=this.video.seekable;c<_.start(0)||c>_.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${_.start(0)} and ${_.end(0)}-second mark.`))):this.video.currentTime=c}}getVideo(){return this.video}onAdd(c){this.map||(this.map=c,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const c=this.map.painter.context,_=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,St.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE),_.texSubImage2D(_.TEXTURE_2D,0,0,0,_.RGBA,_.UNSIGNED_BYTE,this.video)):(this.texture=new K(c,this.video,_.RGBA),this.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE));for(const k in this.tiles){const R=this.tiles[k];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ge extends Zt{constructor(c,_,k,R){super(c,_,k,R),_.coordinates?Array.isArray(_.coordinates)&&_.coordinates.length===4&&!_.coordinates.some(W=>!Array.isArray(W)||W.length!==2||W.some(q=>typeof q!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${c}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${c}`,null,'missing required property "coordinates"'))),_.animate&&typeof _.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${c}`,null,'optional "animate" property must be a boolean value'))),_.canvas?typeof _.canvas=="string"||_.canvas instanceof HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${c}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${c}`,null,'missing required property "canvas"'))),this.options=_,this.animate=_.animate===void 0||_.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(c){this.map=c,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let c=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,c=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,c=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const _=this.map.painter.context,k=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,St.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(c||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new K(_,this.canvas,k.RGBA,{premultiply:!0});for(const R in this.tiles){const W=this.tiles[R];W.state!=="loaded"&&(W.state="loaded",W.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const c of[this.canvas.width,this.canvas.height])if(isNaN(c)||c<=0)return!0;return!1}}const Ye={vector:Ie,raster:Ne,"raster-dem":it,geojson:Rt,video:Kt,image:Zt,canvas:Ge};function Dr(O,c){const _=s.create();return s.translate(_,_,[1,1,0]),s.scale(_,_,[.5*O.width,.5*O.height,1]),s.multiply(_,_,O.calculatePosMatrix(c.toUnwrapped()))}function wr(O,c,_,k,R,W){const q=function(Ue,Ke,yt){if(Ue)for(const ut of Ue){const gt=Ke[ut];if(gt&&gt.source===yt&&gt.type==="fill-extrusion")return!0}else for(const ut in Ke){const gt=Ke[ut];if(gt.source===yt&&gt.type==="fill-extrusion")return!0}return!1}(R&&R.layers,c,O.id),ue=W.maxPitchScaleFactor(),he=O.tilesIn(k,ue,q);he.sort(tr);const be=[];for(const Ue of he)be.push({wrappedTileID:Ue.tileID.wrapped().key,queryResults:Ue.tile.queryRenderedFeatures(c,_,O._state,Ue.queryGeometry,Ue.cameraQueryGeometry,Ue.scale,R,W,ue,Dr(O.transform,Ue.tileID))});const Te=function(Ue){const Ke={},yt={};for(const ut of Ue){const gt=ut.queryResults,zt=ut.wrappedTileID,Gt=yt[zt]=yt[zt]||{};for(const Jt in gt){const bt=gt[Jt],nr=Gt[Jt]=Gt[Jt]||{},er=Ke[Jt]=Ke[Jt]||[];for(const mr of bt)nr[mr.featureIndex]||(nr[mr.featureIndex]=!0,er.push(mr))}}return Ke}(be);for(const Ue in Te)Te[Ue].forEach(Ke=>{const yt=Ke.feature,ut=O.getFeatureState(yt.layer["source-layer"],yt.id);yt.source=yt.layer.source,yt.layer["source-layer"]&&(yt.sourceLayer=yt.layer["source-layer"]),yt.state=ut});return Te}function tr(O,c){const _=O.tileID,k=c.tileID;return _.overscaledZ-k.overscaledZ||_.canonical.y-k.canonical.y||_.wrap-k.wrap||_.canonical.x-k.canonical.x}class br{constructor(c,_){this.tileID=c,this.uid=s.uniqueId(),this.uses=0,this.tileSize=_,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(c){const _=c+this.timeAdded;_<s.exported.now()||this.fadeEndTime&&_<this.fadeEndTime||(this.fadeEndTime=_)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(c){this.demTexture&&c.saveTileTexture(this.demTexture),this.textures.forEach(_=>c.saveTileTexture(_)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(c,_,k){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",c){c.featureIndex&&(this.latestFeatureIndex=c.featureIndex,c.rawTileData?(this.latestRawTileData=c.rawTileData,this.latestFeatureIndex.rawTileData=c.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=c.collisionBoxArray,this.buckets=function(R,W){const q={};if(!W)return q;for(const ue of R){const he=ue.layerIds.map(be=>W.getLayer(be)).filter(Boolean);if(he.length!==0){ue.layers=he,ue.stateDependentLayerIds&&(ue.stateDependentLayers=ue.stateDependentLayerIds.map(be=>he.filter(Te=>Te.id===be)[0]));for(const be of he)q[be.id]=ue}}return q}(c.buckets,_.style),this.hasSymbolBuckets=!1;for(const R in this.buckets){const W=this.buckets[R];if(W instanceof s.SymbolBucket){if(this.hasSymbolBuckets=!0,!k)break;W.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const R in this.buckets){const W=this.buckets[R];if(W instanceof s.SymbolBucket&&W.hasRTLText){this.hasRTLText=!0,s.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const R in this.buckets){const W=this.buckets[R];this.queryPadding=Math.max(this.queryPadding,_.style.getLayer(R).queryRadius(W))}c.imageAtlas&&(this.imageAtlas=c.imageAtlas),c.glyphAtlasImage&&(this.glyphAtlasImage=c.glyphAtlasImage)}else this.collisionBoxArray=new s.CollisionBoxArray}unloadVectorData(){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(c){return this.buckets[c.id]}upload(c){for(const k in this.buckets){const R=this.buckets[k];R.uploadPending()&&R.upload(c)}const _=c.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new K(c,this.imageAtlas.image,_.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new K(c,this.glyphAtlasImage,_.ALPHA),this.glyphAtlasImage=null)}prepare(c){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(c,this.imageAtlasTexture)}queryRenderedFeatures(c,_,k,R,W,q,ue,he,be,Te){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:R,cameraQueryGeometry:W,scale:q,tileSize:this.tileSize,pixelPosMatrix:Te,transform:he,params:ue,queryPadding:this.queryPadding*be},c,_,k):{}}querySourceFeatures(c,_){const k=this.latestFeatureIndex;if(!k||!k.rawTileData)return;const R=k.loadVTLayers(),W=_?_.sourceLayer:"",q=R._geojsonTileLayer||R[W];if(!q)return;const ue=s.createFilter(_&&_.filter),{z:he,x:be,y:Te}=this.tileID.canonical,Ue={z:he,x:be,y:Te};for(let Ke=0;Ke<q.length;Ke++){const yt=q.feature(Ke);if(ue.needGeometry){const zt=s.toEvaluationFeature(yt,!0);if(!ue.filter(new s.EvaluationParameters(this.tileID.overscaledZ),zt,this.tileID.canonical))continue}else if(!ue.filter(new s.EvaluationParameters(this.tileID.overscaledZ),yt))continue;const ut=k.getId(yt,W),gt=new s.GeoJSONFeature(yt,he,be,Te,ut);gt.tile=Ue,c.push(gt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(c){const _=this.expirationTime;if(c.cacheControl){const k=s.parseCacheControl(c.cacheControl);k["max-age"]&&(this.expirationTime=Date.now()+1e3*k["max-age"])}else c.expires&&(this.expirationTime=new Date(c.expires).getTime());if(this.expirationTime){const k=Date.now();let R=!1;if(this.expirationTime>k)R=!1;else if(_)if(this.expirationTime<_)R=!0;else{const W=this.expirationTime-_;W?this.expirationTime=k+Math.max(W,3e4):R=!0}else R=!0;R?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(c,_){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(c).length===0)return;const k=this.latestFeatureIndex.loadVTLayers();for(const R in this.buckets){if(!_.style.hasLayer(R))continue;const W=this.buckets[R],q=W.layers[0].sourceLayer||"_geojsonTileLayer",ue=k[q],he=c[q];if(!ue||!he||Object.keys(he).length===0)continue;W.update(he,ue,this.imageAtlas&&this.imageAtlas.patternPositions||{});const be=_&&_.style&&_.style.getLayer(R);be&&(this.queryPadding=Math.max(this.queryPadding,be.queryRadius(W)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<s.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(c){this.symbolFadeHoldUntil=s.exported.now()+c}setDependencies(c,_){const k={};for(const R of _)k[R]=!0;this.dependencies[c]=k}hasDependency(c,_){for(const k of c){const R=this.dependencies[k];if(R){for(const W of _)if(R[W])return!0}}return!1}}class Bt{constructor(c,_){this.max=c,this.onRemove=_,this.reset()}reset(){for(const c in this.data)for(const _ of this.data[c])_.timeout&&clearTimeout(_.timeout),this.onRemove(_.value);return this.data={},this.order=[],this}add(c,_,k){const R=c.wrapped().key;this.data[R]===void 0&&(this.data[R]=[]);const W={value:_,timeout:void 0};if(k!==void 0&&(W.timeout=setTimeout(()=>{this.remove(c,W)},k)),this.data[R].push(W),this.order.push(R),this.order.length>this.max){const q=this._getAndRemoveByKey(this.order[0]);q&&this.onRemove(q)}return this}has(c){return c.wrapped().key in this.data}getAndRemove(c){return this.has(c)?this._getAndRemoveByKey(c.wrapped().key):null}_getAndRemoveByKey(c){const _=this.data[c].shift();return _.timeout&&clearTimeout(_.timeout),this.data[c].length===0&&delete this.data[c],this.order.splice(this.order.indexOf(c),1),_.value}getByKey(c){const _=this.data[c];return _?_[0].value:null}get(c){return this.has(c)?this.data[c.wrapped().key][0].value:null}remove(c,_){if(!this.has(c))return this;const k=c.wrapped().key,R=_===void 0?0:this.data[k].indexOf(_),W=this.data[k][R];return this.data[k].splice(R,1),W.timeout&&clearTimeout(W.timeout),this.data[k].length===0&&delete this.data[k],this.onRemove(W.value),this.order.splice(this.order.indexOf(k),1),this}setMaxSize(c){for(this.max=c;this.order.length>this.max;){const _=this._getAndRemoveByKey(this.order[0]);_&&this.onRemove(_)}return this}filter(c){const _=[];for(const k in this.data)for(const R of this.data[k])c(R.value)||_.push(R);for(const k of _)this.remove(k.value.tileID,k)}}class hr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(c,_,k){const R=String(_);if(this.stateChanges[c]=this.stateChanges[c]||{},this.stateChanges[c][R]=this.stateChanges[c][R]||{},s.extend(this.stateChanges[c][R],k),this.deletedStates[c]===null){this.deletedStates[c]={};for(const W in this.state[c])W!==R&&(this.deletedStates[c][W]=null)}else if(this.deletedStates[c]&&this.deletedStates[c][R]===null){this.deletedStates[c][R]={};for(const W in this.state[c][R])k[W]||(this.deletedStates[c][R][W]=null)}else for(const W in k)this.deletedStates[c]&&this.deletedStates[c][R]&&this.deletedStates[c][R][W]===null&&delete this.deletedStates[c][R][W]}removeFeatureState(c,_,k){if(this.deletedStates[c]===null)return;const R=String(_);if(this.deletedStates[c]=this.deletedStates[c]||{},k&&_!==void 0)this.deletedStates[c][R]!==null&&(this.deletedStates[c][R]=this.deletedStates[c][R]||{},this.deletedStates[c][R][k]=null);else if(_!==void 0)if(this.stateChanges[c]&&this.stateChanges[c][R])for(k in this.deletedStates[c][R]={},this.stateChanges[c][R])this.deletedStates[c][R][k]=null;else this.deletedStates[c][R]=null;else this.deletedStates[c]=null}getState(c,_){const k=String(_),R=s.extend({},(this.state[c]||{})[k],(this.stateChanges[c]||{})[k]);if(this.deletedStates[c]===null)return{};if(this.deletedStates[c]){const W=this.deletedStates[c][_];if(W===null)return{};for(const q in W)delete R[q]}return R}initializeTileState(c,_){c.setFeatureState(this.state,_)}coalesceChanges(c,_){const k={};for(const R in this.stateChanges){this.state[R]=this.state[R]||{};const W={};for(const q in this.stateChanges[R])this.state[R][q]||(this.state[R][q]={}),s.extend(this.state[R][q],this.stateChanges[R][q]),W[q]=this.state[R][q];k[R]=W}for(const R in this.deletedStates){this.state[R]=this.state[R]||{};const W={};if(this.deletedStates[R]===null)for(const q in this.state[R])W[q]={},this.state[R][q]={};else for(const q in this.deletedStates[R]){if(this.deletedStates[R][q]===null)this.state[R][q]={};else for(const ue of Object.keys(this.deletedStates[R][q]))delete this.state[R][q][ue];W[q]=this.state[R][q]}k[R]=k[R]||{},s.extend(k[R],W)}if(this.stateChanges={},this.deletedStates={},Object.keys(k).length!==0)for(const R in c)c[R].setFeatureState(k,_)}}class cr extends s.Evented{constructor(c,_,k){super(),this.id=c,this.dispatcher=k,this.on("data",R=>{R.dataType==="source"&&R.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&R.dataType==="source"&&R.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(R,W,q,ue){const he=new Ye[W.type](R,W,q,ue);if(he.id!==R)throw new Error(`Expected Source id to be ${R} instead of ${he.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],he),he}(c,_,k,this),this._tiles={},this._cache=new Bt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new hr}onAdd(c){this.map=c,this._maxTileCacheSize=c?c._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(c)}onRemove(c){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(c)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const c in this._tiles){const _=this._tiles[c];if(_.state!=="loaded"&&_.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const c=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,c&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(c,_){return this._source.loadTile(c,_)}_unloadTile(c){if(this._source.unloadTile)return this._source.unloadTile(c,()=>{})}_abortTile(c){this._source.abortTile&&this._source.abortTile(c,()=>{}),this._source.fire(new s.Event("dataabort",{tile:c,coord:c.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(c){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const _ in this._tiles){const k=this._tiles[_];k.upload(c),k.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(c=>c.tileID).sort(Mn).map(c=>c.key)}getRenderableIds(c){const _=[];for(const k in this._tiles)this._isIdRenderable(k,c)&&_.push(this._tiles[k]);return c?_.sort((k,R)=>{const W=k.tileID,q=R.tileID,ue=new s.pointGeometry(W.canonical.x,W.canonical.y)._rotate(this.transform.angle),he=new s.pointGeometry(q.canonical.x,q.canonical.y)._rotate(this.transform.angle);return W.overscaledZ-q.overscaledZ||he.y-ue.y||he.x-ue.x}).map(k=>k.tileID.key):_.map(k=>k.tileID).sort(Mn).map(k=>k.key)}hasRenderableParent(c){const _=this.findLoadedParent(c,0);return!!_&&this._isIdRenderable(_.tileID.key)}_isIdRenderable(c,_){return this._tiles[c]&&this._tiles[c].hasData()&&!this._coveredTiles[c]&&(_||!this._tiles[c].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)this._tiles[c].state!=="errored"&&this._reloadTile(c,"reloading")}}_reloadTile(c,_){const k=this._tiles[c];k&&(k.state!=="loading"&&(k.state=_),this._loadTile(k,this._tileLoaded.bind(this,k,c,_)))}_tileLoaded(c,_,k,R){if(R)return c.state="errored",void(R.status!==404?this._source.fire(new s.ErrorEvent(R,{tile:c})):this.update(this.transform,this.terrain));c.timeAdded=s.exported.now(),k==="expired"&&(c.refreshedUponExpiration=!0),this._setTileReloadTimer(_,c),this.getSource().type==="raster-dem"&&c.dem&&this._backfillDEM(c),this._state.initializeTileState(c,this.map?this.map.painter:null),c.aborted||this._source.fire(new s.Event("data",{dataType:"source",tile:c,coord:c.tileID}))}_backfillDEM(c){const _=this.getRenderableIds();for(let R=0;R<_.length;R++){const W=_[R];if(c.neighboringTiles&&c.neighboringTiles[W]){const q=this.getTileByID(W);k(c,q),k(q,c)}}function k(R,W){R.needsHillshadePrepare=!0,R.needsTerrainPrepare=!0;let q=W.tileID.canonical.x-R.tileID.canonical.x;const ue=W.tileID.canonical.y-R.tileID.canonical.y,he=Math.pow(2,R.tileID.canonical.z),be=W.tileID.key;q===0&&ue===0||Math.abs(ue)>1||(Math.abs(q)>1&&(Math.abs(q+he)===1?q+=he:Math.abs(q-he)===1&&(q-=he)),W.dem&&R.dem&&(R.dem.backfillBorder(W.dem,q,ue),R.neighboringTiles&&R.neighboringTiles[be]&&(R.neighboringTiles[be].backfilled=!0)))}}getTile(c){return this.getTileByID(c.key)}getTileByID(c){return this._tiles[c]}_retainLoadedChildren(c,_,k,R){for(const W in this._tiles){let q=this._tiles[W];if(R[W]||!q.hasData()||q.tileID.overscaledZ<=_||q.tileID.overscaledZ>k)continue;let ue=q.tileID;for(;q&&q.tileID.overscaledZ>_+1;){const be=q.tileID.scaledTo(q.tileID.overscaledZ-1);q=this._tiles[be.key],q&&q.hasData()&&(ue=be)}let he=ue;for(;he.overscaledZ>_;)if(he=he.scaledTo(he.overscaledZ-1),c[he.key]){R[ue.key]=ue;break}}}findLoadedParent(c,_){if(c.key in this._loadedParentTiles){const k=this._loadedParentTiles[c.key];return k&&k.tileID.overscaledZ>=_?k:null}for(let k=c.overscaledZ-1;k>=_;k--){const R=c.scaledTo(k),W=this._getLoadedTile(R);if(W)return W}}_getLoadedTile(c){const _=this._tiles[c.key];return _&&_.hasData()?_:this._cache.getByKey(c.wrapped().key)}updateCacheSize(c){const _=Math.ceil(c.width/this._source.tileSize)+1,k=Math.ceil(c.height/this._source.tileSize)+1,R=Math.floor(_*k*5),W=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,R):R;this._cache.setMaxSize(W)}handleWrapJump(c){const _=Math.round((c-(this._prevLng===void 0?c:this._prevLng))/360);if(this._prevLng=c,_){const k={};for(const R in this._tiles){const W=this._tiles[R];W.tileID=W.tileID.unwrapTo(W.tileID.wrap+_),k[W.tileID.key]=W}this._tiles=k;for(const R in this._timers)clearTimeout(this._timers[R]),delete this._timers[R];for(const R in this._tiles)this._setTileReloadTimer(R,this._tiles[R])}}update(c,_){if(this.transform=c,this.terrain=_,!this._sourceLoaded||this._paused)return;let k;this.updateCacheSize(c),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?k=c.getVisibleUnwrappedCoordinates(this._source.tileID).map(be=>new s.OverscaledTileID(be.canonical.z,be.wrap,be.canonical.z,be.canonical.x,be.canonical.y)):(k=c.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:_}),this._source.hasTile&&(k=k.filter(be=>this._source.hasTile(be)))):k=[];const R=c.coveringZoomLevel(this._source),W=Math.max(R-cr.maxOverzooming,this._source.minzoom),q=Math.max(R+cr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const be={};for(const Te of k)if(Te.canonical.z>this._source.minzoom){const Ue=Te.scaledTo(Te.canonical.z-1);be[Ue.key]=Ue;const Ke=Te.scaledTo(Math.max(this._source.minzoom,Math.min(Te.canonical.z,5)));be[Ke.key]=Ke}k=k.concat(Object.values(be))}const ue=this._updateRetainedTiles(k,R);if(Hn(this._source.type)){const be={},Te={},Ue=Object.keys(ue);for(const Ke of Ue){const yt=ue[Ke],ut=this._tiles[Ke];if(!ut||ut.fadeEndTime&&ut.fadeEndTime<=s.exported.now())continue;const gt=this.findLoadedParent(yt,W);gt&&(this._addTile(gt.tileID),be[gt.tileID.key]=gt.tileID),Te[Ke]=yt}this._retainLoadedChildren(Te,R,q,ue);for(const Ke in be)ue[Ke]||(this._coveredTiles[Ke]=!0,ue[Ke]=be[Ke]);if(_){const Ke={},yt={};for(const ut of k)this._tiles[ut.key].hasData()?Ke[ut.key]=ut:yt[ut.key]=ut;for(const ut in yt){const gt=yt[ut].children(this._source.maxzoom);this._tiles[gt[0].key]&&this._tiles[gt[1].key]&&this._tiles[gt[2].key]&&this._tiles[gt[3].key]&&(Ke[gt[0].key]=ue[gt[0].key]=gt[0],Ke[gt[1].key]=ue[gt[1].key]=gt[1],Ke[gt[2].key]=ue[gt[2].key]=gt[2],Ke[gt[3].key]=ue[gt[3].key]=gt[3],delete yt[ut])}for(const ut in yt){const gt=this.findLoadedParent(yt[ut],this._source.minzoom);if(gt){Ke[gt.tileID.key]=ue[gt.tileID.key]=gt.tileID;for(const zt in Ke)Ke[zt].isChildOf(gt.tileID)&&delete Ke[zt]}}for(const ut in this._tiles)Ke[ut]||(this._coveredTiles[ut]=!0)}}for(const be in ue)this._tiles[be].clearFadeHold();const he=s.keysDifference(this._tiles,ue);for(const be of he){const Te=this._tiles[be];Te.hasSymbolBuckets&&!Te.holdingForFade()?Te.setHoldDuration(this.map._fadeDuration):Te.hasSymbolBuckets&&!Te.symbolFadeFinished()||this._removeTile(be)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const c in this._tiles)this._tiles[c].holdingForFade()&&this._removeTile(c)}_updateRetainedTiles(c,_){const k={},R={},W=Math.max(_-cr.maxOverzooming,this._source.minzoom),q=Math.max(_+cr.maxUnderzooming,this._source.minzoom),ue={};for(const he of c){const be=this._addTile(he);k[he.key]=he,be.hasData()||_<this._source.maxzoom&&(ue[he.key]=he)}this._retainLoadedChildren(ue,_,q,k);for(const he of c){let be=this._tiles[he.key];if(be.hasData())continue;if(_+1>this._source.maxzoom){const Ue=he.children(this._source.maxzoom)[0],Ke=this.getTile(Ue);if(Ke&&Ke.hasData()){k[Ue.key]=Ue;continue}}else{const Ue=he.children(this._source.maxzoom);if(k[Ue[0].key]&&k[Ue[1].key]&&k[Ue[2].key]&&k[Ue[3].key])continue}let Te=be.wasRequested();for(let Ue=he.overscaledZ-1;Ue>=W;--Ue){const Ke=he.scaledTo(Ue);if(R[Ke.key]||(R[Ke.key]=!0,be=this.getTile(Ke),!be&&Te&&(be=this._addTile(Ke)),be&&(k[Ke.key]=Ke,Te=be.wasRequested(),be.hasData())))break}}return k}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const c in this._tiles){const _=[];let k,R=this._tiles[c].tileID;for(;R.overscaledZ>0;){if(R.key in this._loadedParentTiles){k=this._loadedParentTiles[R.key];break}_.push(R.key);const W=R.scaledTo(R.overscaledZ-1);if(k=this._getLoadedTile(W),k)break;R=W}for(const W of _)this._loadedParentTiles[W]=k}}_addTile(c){let _=this._tiles[c.key];if(_)return _;_=this._cache.getAndRemove(c),_&&(this._setTileReloadTimer(c.key,_),_.tileID=c,this._state.initializeTileState(_,this.map?this.map.painter:null),this._cacheTimers[c.key]&&(clearTimeout(this._cacheTimers[c.key]),delete this._cacheTimers[c.key],this._setTileReloadTimer(c.key,_)));const k=_;return _||(_=new br(c,this._source.tileSize*c.overscaleFactor()),this._loadTile(_,this._tileLoaded.bind(this,_,c.key,_.state))),_.uses++,this._tiles[c.key]=_,k||this._source.fire(new s.Event("dataloading",{tile:_,coord:_.tileID,dataType:"source"})),_}_setTileReloadTimer(c,_){c in this._timers&&(clearTimeout(this._timers[c]),delete this._timers[c]);const k=_.getExpiryTimeout();k&&(this._timers[c]=setTimeout(()=>{this._reloadTile(c,"expired"),delete this._timers[c]},k))}_removeTile(c){const _=this._tiles[c];_&&(_.uses--,delete this._tiles[c],this._timers[c]&&(clearTimeout(this._timers[c]),delete this._timers[c]),_.uses>0||(_.hasData()&&_.state!=="reloading"?this._cache.add(_.tileID,_,_.getExpiryTimeout()):(_.aborted=!0,this._abortTile(_),this._unloadTile(_))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const c in this._tiles)this._removeTile(c);this._cache.reset()}tilesIn(c,_,k){const R=[],W=this.transform;if(!W)return R;const q=k?W.getCameraQueryGeometry(c):c,ue=c.map(ut=>W.pointCoordinate(ut,this.terrain)),he=q.map(ut=>W.pointCoordinate(ut,this.terrain)),be=this.getIds();let Te=1/0,Ue=1/0,Ke=-1/0,yt=-1/0;for(const ut of he)Te=Math.min(Te,ut.x),Ue=Math.min(Ue,ut.y),Ke=Math.max(Ke,ut.x),yt=Math.max(yt,ut.y);for(let ut=0;ut<be.length;ut++){const gt=this._tiles[be[ut]];if(gt.holdingForFade())continue;const zt=gt.tileID,Gt=Math.pow(2,W.zoom-gt.tileID.overscaledZ),Jt=_*gt.queryPadding*s.EXTENT/gt.tileSize/Gt,bt=[zt.getTilePoint(new s.MercatorCoordinate(Te,Ue)),zt.getTilePoint(new s.MercatorCoordinate(Ke,yt))];if(bt[0].x-Jt<s.EXTENT&&bt[0].y-Jt<s.EXTENT&&bt[1].x+Jt>=0&&bt[1].y+Jt>=0){const nr=ue.map(mr=>zt.getTilePoint(mr)),er=he.map(mr=>zt.getTilePoint(mr));R.push({tile:gt,tileID:zt,queryGeometry:nr,cameraQueryGeometry:er,scale:Gt})}}return R}getVisibleCoordinates(c){const _=this.getRenderableIds(c).map(k=>this._tiles[k].tileID);for(const k of _)k.posMatrix=this.transform.calculatePosMatrix(k.toUnwrapped());return _}hasTransition(){if(this._source.hasTransition())return!0;if(Hn(this._source.type))for(const c in this._tiles){const _=this._tiles[c];if(_.fadeEndTime!==void 0&&_.fadeEndTime>=s.exported.now())return!0}return!1}setFeatureState(c,_,k){this._state.updateState(c=c||"_geojsonTileLayer",_,k)}removeFeatureState(c,_,k){this._state.removeFeatureState(c=c||"_geojsonTileLayer",_,k)}getFeatureState(c,_){return this._state.getState(c=c||"_geojsonTileLayer",_)}setDependencies(c,_,k){const R=this._tiles[c];R&&R.setDependencies(_,k)}reloadTilesForDependencies(c,_){for(const k in this._tiles)this._tiles[k].hasDependency(c,_)&&this._reloadTile(k,"reloading");this._cache.filter(k=>!k.hasDependency(c,_))}}function Mn(O,c){const _=Math.abs(2*O.wrap)-+(O.wrap<0),k=Math.abs(2*c.wrap)-+(c.wrap<0);return O.overscaledZ-c.overscaledZ||k-_||c.canonical.y-O.canonical.y||c.canonical.x-O.canonical.x}function Hn(O){return O==="raster"||O==="image"||O==="video"}cr.maxOverzooming=10,cr.maxUnderzooming=3;const Qn="mapboxgl_preloaded_worker_pool";class an{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<an.workerCount;)this.workers.push(new Worker(zo.workerUrl));return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach(_=>{_.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Qn]}numActive(){return Object.keys(this.active).length}}const ki=Math.floor(s.exported.hardwareConcurrency/2);let Xn;function Li(){return Xn||(Xn=new an),Xn}function Pi(O,c){const _={};for(const k in O)k!=="ref"&&(_[k]=O[k]);return s.refProperties.forEach(k=>{k in c&&(_[k]=c[k])}),_}function Yi(O){O=O.slice();const c=Object.create(null);for(let _=0;_<O.length;_++)c[O[_].id]=O[_];for(let _=0;_<O.length;_++)"ref"in O[_]&&(O[_]=Pi(O[_],c[O[_].ref]));return O}an.workerCount=Math.max(Math.min(ki,6),1);const gi={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ea(O,c,_){_.push({command:gi.addSource,args:[O,c[O]]})}function ya(O,c,_){c.push({command:gi.removeSource,args:[O]}),_[O]=!0}function La(O,c,_,k){ya(O,_,k),ea(O,c,_)}function Aa(O,c,_){let k;for(k in O[_])if(Object.prototype.hasOwnProperty.call(O[_],k)&&k!=="data"&&!A(O[_][k],c[_][k]))return!1;for(k in c[_])if(Object.prototype.hasOwnProperty.call(c[_],k)&&k!=="data"&&!A(O[_][k],c[_][k]))return!1;return!0}function $a(O,c,_,k,R,W){let q;for(q in c=c||{},O=O||{})Object.prototype.hasOwnProperty.call(O,q)&&(A(O[q],c[q])||_.push({command:W,args:[k,q,c[q],R]}));for(q in c)Object.prototype.hasOwnProperty.call(c,q)&&!Object.prototype.hasOwnProperty.call(O,q)&&(A(O[q],c[q])||_.push({command:W,args:[k,q,c[q],R]}))}function ka(O){return O.id}function Ka(O,c){return O[c.id]=c,O}class dr{constructor(c,_){this.reset(c,_)}reset(c,_){this.points=c||[],this._distances=[0];for(let k=1;k<this.points.length;k++)this._distances[k]=this._distances[k-1]+this.points[k].dist(this.points[k-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(_||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(this.points.length===1)return this.points[0];c=s.clamp(c,0,1);let _=1,k=this._distances[_];const R=c*this.paddedLength+this.padding;for(;k<R&&_<this._distances.length;)k=this._distances[++_];const W=_-1,q=this._distances[W],ue=k-q,he=ue>0?(R-q)/ue:0;return this.points[W].mult(1-he).add(this.points[_].mult(he))}}function Mt(O,c){let _=!0;return O==="always"||O!=="never"&&c!=="never"||(_=!1),_}class yr{constructor(c,_,k){const R=this.boxCells=[],W=this.circleCells=[];this.xCellCount=Math.ceil(c/k),this.yCellCount=Math.ceil(_/k);for(let q=0;q<this.xCellCount*this.yCellCount;q++)R.push([]),W.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=_,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/_,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,_,k,R,W){this._forEachCell(_,k,R,W,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(_),this.bboxes.push(k),this.bboxes.push(R),this.bboxes.push(W)}insertCircle(c,_,k,R){this._forEachCell(_-R,k-R,_+R,k+R,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(_),this.circles.push(k),this.circles.push(R)}_insertBoxCell(c,_,k,R,W,q){this.boxCells[W].push(q)}_insertCircleCell(c,_,k,R,W,q){this.circleCells[W].push(q)}_query(c,_,k,R,W,q,ue){if(k<0||c>this.width||R<0||_>this.height)return[];const he=[];if(c<=0&&_<=0&&this.width<=k&&this.height<=R){if(W)return[{key:null,x1:c,y1:_,x2:k,y2:R}];for(let be=0;be<this.boxKeys.length;be++)he.push({key:this.boxKeys[be],x1:this.bboxes[4*be],y1:this.bboxes[4*be+1],x2:this.bboxes[4*be+2],y2:this.bboxes[4*be+3]});for(let be=0;be<this.circleKeys.length;be++){const Te=this.circles[3*be],Ue=this.circles[3*be+1],Ke=this.circles[3*be+2];he.push({key:this.circleKeys[be],x1:Te-Ke,y1:Ue-Ke,x2:Te+Ke,y2:Ue+Ke})}}else this._forEachCell(c,_,k,R,this._queryCell,he,{hitTest:W,overlapMode:q,seenUids:{box:{},circle:{}}},ue);return he}query(c,_,k,R){return this._query(c,_,k,R,!1,null)}hitTest(c,_,k,R,W,q){return this._query(c,_,k,R,!0,W,q).length>0}hitTestCircle(c,_,k,R,W){const q=c-k,ue=c+k,he=_-k,be=_+k;if(ue<0||q>this.width||be<0||he>this.height)return!1;const Te=[];return this._forEachCell(q,he,ue,be,this._queryCellCircle,Te,{hitTest:!0,overlapMode:R,circle:{x:c,y:_,radius:k},seenUids:{box:{},circle:{}}},W),Te.length>0}_queryCell(c,_,k,R,W,q,ue,he){const{seenUids:be,hitTest:Te,overlapMode:Ue}=ue,Ke=this.boxCells[W];if(Ke!==null){const ut=this.bboxes;for(const gt of Ke)if(!be.box[gt]){be.box[gt]=!0;const zt=4*gt,Gt=this.boxKeys[gt];if(c<=ut[zt+2]&&_<=ut[zt+3]&&k>=ut[zt+0]&&R>=ut[zt+1]&&(!he||he(Gt))&&(!Te||!Mt(Ue,Gt.overlapMode))&&(q.push({key:Gt,x1:ut[zt],y1:ut[zt+1],x2:ut[zt+2],y2:ut[zt+3]}),Te))return!0}}const yt=this.circleCells[W];if(yt!==null){const ut=this.circles;for(const gt of yt)if(!be.circle[gt]){be.circle[gt]=!0;const zt=3*gt,Gt=this.circleKeys[gt];if(this._circleAndRectCollide(ut[zt],ut[zt+1],ut[zt+2],c,_,k,R)&&(!he||he(Gt))&&(!Te||!Mt(Ue,Gt.overlapMode))){const Jt=ut[zt],bt=ut[zt+1],nr=ut[zt+2];if(q.push({key:Gt,x1:Jt-nr,y1:bt-nr,x2:Jt+nr,y2:bt+nr}),Te)return!0}}}return!1}_queryCellCircle(c,_,k,R,W,q,ue,he){const{circle:be,seenUids:Te,overlapMode:Ue}=ue,Ke=this.boxCells[W];if(Ke!==null){const ut=this.bboxes;for(const gt of Ke)if(!Te.box[gt]){Te.box[gt]=!0;const zt=4*gt,Gt=this.boxKeys[gt];if(this._circleAndRectCollide(be.x,be.y,be.radius,ut[zt+0],ut[zt+1],ut[zt+2],ut[zt+3])&&(!he||he(Gt))&&!Mt(Ue,Gt.overlapMode))return q.push(!0),!0}}const yt=this.circleCells[W];if(yt!==null){const ut=this.circles;for(const gt of yt)if(!Te.circle[gt]){Te.circle[gt]=!0;const zt=3*gt,Gt=this.circleKeys[gt];if(this._circlesCollide(ut[zt],ut[zt+1],ut[zt+2],be.x,be.y,be.radius)&&(!he||he(Gt))&&!Mt(Ue,Gt.overlapMode))return q.push(!0),!0}}}_forEachCell(c,_,k,R,W,q,ue,he){const be=this._convertToXCellCoord(c),Te=this._convertToYCellCoord(_),Ue=this._convertToXCellCoord(k),Ke=this._convertToYCellCoord(R);for(let yt=be;yt<=Ue;yt++)for(let ut=Te;ut<=Ke;ut++)if(W.call(this,c,_,k,R,this.xCellCount*ut+yt,q,ue,he))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,_,k,R,W,q){const ue=R-c,he=W-_,be=k+q;return be*be>ue*ue+he*he}_circleAndRectCollide(c,_,k,R,W,q,ue){const he=(q-R)/2,be=Math.abs(c-(R+he));if(be>he+k)return!1;const Te=(ue-W)/2,Ue=Math.abs(_-(W+Te));if(Ue>Te+k)return!1;if(be<=he||Ue<=Te)return!0;const Ke=be-he,yt=Ue-Te;return Ke*Ke+yt*yt<=k*k}}function Xt(O,c,_,k,R){const W=s.create();return c?(s.scale(W,W,[1/R,1/R,1]),_||s.rotateZ(W,W,k.angle)):s.multiply(W,k.labelPlaneMatrix,O),W}function Yt(O,c,_,k,R){if(c){const W=s.clone(O);return s.scale(W,W,[R,R,1]),_||s.rotateZ(W,W,-k.angle),W}return k.glCoordMatrix}function lr(O,c,_){let k;_?(k=[O.x,O.y,_(O.x,O.y),1],s.transformMat4(k,k,c)):(k=[O.x,O.y,0,1],fi(k,k,c));const R=k[3];return{point:new s.pointGeometry(k[0]/R,k[1]/R),signedDistanceFromCamera:R}}function Qr(O,c){return .5+O/c*.5}function Xr(O,c){const _=O[0]/O[3],k=O[1]/O[3];return _>=-c[0]&&_<=c[0]&&k>=-c[1]&&k<=c[1]}function En(O,c,_,k,R,W,q,ue,he,be){const Te=k?O.textSizeData:O.iconSizeData,Ue=s.evaluateSizeForZoom(Te,_.transform.zoom),Ke=[256/_.width*2+1,256/_.height*2+1],yt=k?O.text.dynamicLayoutVertexArray:O.icon.dynamicLayoutVertexArray;yt.clear();const ut=O.lineVertexArray,gt=k?O.text.placedSymbolArray:O.icon.placedSymbolArray,zt=_.transform.width/_.transform.height;let Gt=!1;for(let Jt=0;Jt<gt.length;Jt++){const bt=gt.get(Jt);if(bt.hidden||bt.writingMode===s.WritingMode.vertical&&!Gt){Hr(bt.numGlyphs,yt);continue}let nr;if(Gt=!1,be?(nr=[bt.anchorX,bt.anchorY,be(bt.anchorX,bt.anchorY),1],s.transformMat4(nr,nr,c)):(nr=[bt.anchorX,bt.anchorY,0,1],fi(nr,nr,c)),!Xr(nr,Ke)){Hr(bt.numGlyphs,yt);continue}const er=Qr(_.transform.cameraToCenterDistance,nr[3]),mr=s.evaluateSizeForFeature(Te,Ue,bt),Sr=q?mr/er:mr*er,$r=new s.pointGeometry(bt.anchorX,bt.anchorY),gr=lr($r,R,be).point,cn={},g=Lr(bt,Sr,!1,ue,c,R,W,O.glyphOffsetArray,ut,yt,gr,$r,cn,zt,he,be);Gt=g.useVertical,(g.notEnoughRoom||Gt||g.needsFlipping&&Lr(bt,Sr,!0,ue,c,R,W,O.glyphOffsetArray,ut,yt,gr,$r,cn,zt,he,be).notEnoughRoom)&&Hr(bt.numGlyphs,yt)}k?O.text.dynamicLayoutVertexBuffer.updateData(yt):O.icon.dynamicLayoutVertexBuffer.updateData(yt)}function Rn(O,c,_,k,R,W,q,ue,he,be,Te,Ue,Ke){const yt=ue.glyphStartIndex+ue.numGlyphs,ut=ue.lineStartIndex,gt=ue.lineStartIndex+ue.lineLength,zt=c.getoffsetX(ue.glyphStartIndex),Gt=c.getoffsetX(yt-1),Jt=hn(O*zt,_,k,R,W,q,ue.segment,ut,gt,he,be,Te,Ue,Ke);if(!Jt)return null;const bt=hn(O*Gt,_,k,R,W,q,ue.segment,ut,gt,he,be,Te,Ue,Ke);return bt?{first:Jt,last:bt}:null}function rr(O,c,_,k){return O===s.WritingMode.horizontal&&Math.abs(_.y-c.y)>Math.abs(_.x-c.x)*k?{useVertical:!0}:(O===s.WritingMode.vertical?c.y<_.y:c.x>_.x)?{needsFlipping:!0}:null}function Lr(O,c,_,k,R,W,q,ue,he,be,Te,Ue,Ke,yt,ut,gt){const zt=c/24,Gt=O.lineOffsetX*zt,Jt=O.lineOffsetY*zt;let bt;if(O.numGlyphs>1){const nr=O.glyphStartIndex+O.numGlyphs,er=O.lineStartIndex,mr=O.lineStartIndex+O.lineLength,Sr=Rn(zt,ue,Gt,Jt,_,Te,Ue,O,he,W,Ke,ut,gt);if(!Sr)return{notEnoughRoom:!0};const $r=lr(Sr.first.point,q,gt).point,gr=lr(Sr.last.point,q,gt).point;if(k&&!_){const cn=rr(O.writingMode,$r,gr,yt);if(cn)return cn}bt=[Sr.first];for(let cn=O.glyphStartIndex+1;cn<nr-1;cn++)bt.push(hn(zt*ue.getoffsetX(cn),Gt,Jt,_,Te,Ue,O.segment,er,mr,he,W,Ke,ut,gt));bt.push(Sr.last)}else{if(k&&!_){const er=lr(Ue,R,gt).point,mr=O.lineStartIndex+O.segment+1,Sr=new s.pointGeometry(he.getx(mr),he.gety(mr)),$r=lr(Sr,R,gt),gr=$r.signedDistanceFromCamera>0?$r.point:ur(Ue,Sr,er,1,R,gt),cn=rr(O.writingMode,er,gr,yt);if(cn)return cn}const nr=hn(zt*ue.getoffsetX(O.glyphStartIndex),Gt,Jt,_,Te,Ue,O.segment,O.lineStartIndex,O.lineStartIndex+O.lineLength,he,W,Ke,ut,gt);if(!nr)return{notEnoughRoom:!0};bt=[nr]}for(const nr of bt)s.addDynamicAttributes(be,nr.point,nr.angle);return{}}function ur(O,c,_,k,R,W){const q=lr(O.add(O.sub(c)._unit()),R,W).point,ue=_.sub(q);return _.add(ue._mult(k/ue.mag()))}function hn(O,c,_,k,R,W,q,ue,he,be,Te,Ue,Ke,yt){const ut=k?O-c:O+c;let gt=ut>0?1:-1,zt=0;k&&(gt*=-1,zt=Math.PI),gt<0&&(zt+=Math.PI);let Gt=gt>0?ue+q:ue+q+1,Jt=R,bt=R,nr=0,er=0;const mr=Math.abs(ut),Sr=[];for(;nr+er<=mr;){if(Gt+=gt,Gt<ue||Gt>=he)return null;if(bt=Jt,Sr.push(Jt),Jt=Ue[Gt],Jt===void 0){const b=new s.pointGeometry(be.getx(Gt),be.gety(Gt)),y=lr(b,Te,yt);if(y.signedDistanceFromCamera>0)Jt=Ue[Gt]=y.point;else{const C=Gt-gt;Jt=ur(nr===0?W:new s.pointGeometry(be.getx(C),be.gety(C)),b,bt,mr-nr+1,Te,yt)}}nr+=er,er=bt.dist(Jt)}const $r=(mr-nr)/er,gr=Jt.sub(bt),cn=gr.mult($r)._add(bt);cn._add(gr._unit()._perp()._mult(_*gt));const g=zt+Math.atan2(Jt.y-bt.y,Jt.x-bt.x);return Sr.push(cn),{point:cn,angle:Ke?g:0,path:Sr}}const ti=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Hr(O,c){for(let _=0;_<O;_++){const k=c.length;c.resize(k+4),c.float32.set(ti,3*k)}}function fi(O,c,_){const k=c[0],R=c[1];return O[0]=_[0]*k+_[4]*R+_[12],O[1]=_[1]*k+_[5]*R+_[13],O[3]=_[3]*k+_[7]*R+_[15],O}const Ci=100;class zi{constructor(c,_=new yr(c.width+200,c.height+200,25),k=new yr(c.width+200,c.height+200,25)){this.transform=c,this.grid=_,this.ignoredGrid=k,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+Ci,this.screenBottomBoundary=c.height+Ci,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(c,_,k,R,W,q){const ue=this.projectAndGetPerspectiveRatio(R,c.anchorPointX,c.anchorPointY,q),he=k*ue.perspectiveRatio,be=c.x1*he+ue.point.x,Te=c.y1*he+ue.point.y,Ue=c.x2*he+ue.point.x,Ke=c.y2*he+ue.point.y;return!this.isInsideGrid(be,Te,Ue,Ke)||_!=="always"&&this.grid.hitTest(be,Te,Ue,Ke,_,W)||ue.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[be,Te,Ue,Ke],offscreen:this.isOffscreen(be,Te,Ue,Ke)}}placeCollisionCircles(c,_,k,R,W,q,ue,he,be,Te,Ue,Ke,yt,ut){const gt=[],zt=new s.pointGeometry(_.anchorX,_.anchorY),Gt=lr(zt,q,ut),Jt=Qr(this.transform.cameraToCenterDistance,Gt.signedDistanceFromCamera),bt=(Te?W/Jt:W*Jt)/s.ONE_EM,nr=lr(zt,ue,ut).point,er=Rn(bt,R,_.lineOffsetX*bt,_.lineOffsetY*bt,!1,nr,zt,_,k,ue,{},!1,ut);let mr=!1,Sr=!1,$r=!0;if(er){const gr=.5*Ke*Jt+yt,cn=new s.pointGeometry(-100,-100),g=new s.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),b=new dr,y=er.first,C=er.last;let U=[];for(let se=y.path.length-1;se>=1;se--)U.push(y.path[se]);for(let se=1;se<C.path.length;se++)U.push(C.path[se]);const Y=2.5*gr;if(he){const se=U.map(ve=>lr(ve,he,ut));U=se.some(ve=>ve.signedDistanceFromCamera<=0)?[]:se.map(ve=>ve.point)}let ee=[];if(U.length>0){const se=U[0].clone(),ve=U[0].clone();for(let Oe=1;Oe<U.length;Oe++)se.x=Math.min(se.x,U[Oe].x),se.y=Math.min(se.y,U[Oe].y),ve.x=Math.max(ve.x,U[Oe].x),ve.y=Math.max(ve.y,U[Oe].y);ee=se.x>=cn.x&&ve.x<=g.x&&se.y>=cn.y&&ve.y<=g.y?[U]:ve.x<cn.x||se.x>g.x||ve.y<cn.y||se.y>g.y?[]:s.clipLine([U],cn.x,cn.y,g.x,g.y)}for(const se of ee){b.reset(se,.25*gr);let ve=0;ve=b.length<=.5*gr?1:Math.ceil(b.paddedLength/Y)+1;for(let Oe=0;Oe<ve;Oe++){const He=Oe/Math.max(ve-1,1),Qe=b.lerp(He),Ze=Qe.x+Ci,mt=Qe.y+Ci;gt.push(Ze,mt,gr,0);const ft=Ze-gr,xt=mt-gr,st=Ze+gr,wt=mt+gr;if($r=$r&&this.isOffscreen(ft,xt,st,wt),Sr=Sr||this.isInsideGrid(ft,xt,st,wt),c!=="always"&&this.grid.hitTestCircle(Ze,mt,gr,c,Ue)&&(mr=!0,!be))return{circles:[],offscreen:!1,collisionDetected:mr}}}}return{circles:!be&&mr||!Sr||Jt<this.perspectiveRatioCutoff?[]:gt,offscreen:$r,collisionDetected:mr}}queryRenderedSymbols(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const _=[];let k=1/0,R=1/0,W=-1/0,q=-1/0;for(const Te of c){const Ue=new s.pointGeometry(Te.x+Ci,Te.y+Ci);k=Math.min(k,Ue.x),R=Math.min(R,Ue.y),W=Math.max(W,Ue.x),q=Math.max(q,Ue.y),_.push(Ue)}const ue=this.grid.query(k,R,W,q).concat(this.ignoredGrid.query(k,R,W,q)),he={},be={};for(const Te of ue){const Ue=Te.key;if(he[Ue.bucketInstanceId]===void 0&&(he[Ue.bucketInstanceId]={}),he[Ue.bucketInstanceId][Ue.featureIndex])continue;const Ke=[new s.pointGeometry(Te.x1,Te.y1),new s.pointGeometry(Te.x2,Te.y1),new s.pointGeometry(Te.x2,Te.y2),new s.pointGeometry(Te.x1,Te.y2)];s.polygonIntersectsPolygon(_,Ke)&&(he[Ue.bucketInstanceId][Ue.featureIndex]=!0,be[Ue.bucketInstanceId]===void 0&&(be[Ue.bucketInstanceId]=[]),be[Ue.bucketInstanceId].push(Ue.featureIndex))}return be}insertCollisionBox(c,_,k,R,W,q){(k?this.ignoredGrid:this.grid).insert({bucketInstanceId:R,featureIndex:W,collisionGroupID:q,overlapMode:_},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,_,k,R,W,q){const ue=k?this.ignoredGrid:this.grid,he={bucketInstanceId:R,featureIndex:W,collisionGroupID:q,overlapMode:_};for(let be=0;be<c.length;be+=4)ue.insertCircle(he,c[be],c[be+1],c[be+2])}projectAndGetPerspectiveRatio(c,_,k,R){let W;return R?(W=[_,k,R(_,k),1],s.transformMat4(W,W,c)):(W=[_,k,0,1],fi(W,W,c)),{point:new s.pointGeometry((W[0]/W[3]+1)/2*this.transform.width+Ci,(-W[1]/W[3]+1)/2*this.transform.height+Ci),perspectiveRatio:.5+this.transform.cameraToCenterDistance/W[3]*.5}}isOffscreen(c,_,k,R){return k<Ci||c>=this.screenRightBoundary||R<Ci||_>this.screenBottomBoundary}isInsideGrid(c,_,k,R){return k>=0&&c<this.gridRightBoundary&&R>=0&&_<this.gridBottomBoundary}getViewportMatrix(){const c=s.identity([]);return s.translate(c,c,[-100,-100,0]),c}}function Ae(O,c,_){return c*(s.EXTENT/(O.tileSize*Math.pow(2,_-O.tileID.overscaledZ)))}class $e{constructor(c,_,k,R){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?_:-_))):R&&k?1:0,this.placed=k}isHidden(){return this.opacity===0&&!this.placed}}class je{constructor(c,_,k,R,W){this.text=new $e(c?c.text:null,_,k,W),this.icon=new $e(c?c.icon:null,_,R,W)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class et{constructor(c,_,k){this.text=c,this.icon=_,this.skipFade=k}}class ht{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class Ct{constructor(c,_,k,R,W){this.bucketInstanceId=c,this.featureIndex=_,this.sourceLayerIndex=k,this.bucketIndex=R,this.tileID=W}}class Dt{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const _=++this.maxGroupID;this.collisionGroups[c]={ID:_,predicate:k=>k.collisionGroupID===_}}return this.collisionGroups[c]}}function Et(O,c,_,k,R){const{horizontalAlign:W,verticalAlign:q}=s.getAnchorAlignment(O),ue=-(W-.5)*c,he=-(q-.5)*_,be=s.evaluateVariableOffset(O,k);return new s.pointGeometry(ue+be[0]*R,he+be[1]*R)}function Je(O,c,_,k,R,W){const{x1:q,x2:ue,y1:he,y2:be,anchorPointX:Te,anchorPointY:Ue}=O,Ke=new s.pointGeometry(c,_);return k&&Ke._rotate(R?W:-W),{x1:q+Ke.x,y1:he+Ke.y,x2:ue+Ke.x,y2:be+Ke.y,anchorPointX:Te,anchorPointY:Ue}}class ye{constructor(c,_,k,R,W){this.transform=c.clone(),this.terrain=_,this.collisionIndex=new zi(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=k,this.retainedQueryData={},this.collisionGroups=new Dt(R),this.collisionCircleArrays={},this.prevPlacement=W,W&&(W.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(c,_,k,R){const W=k.getBucket(_),q=k.latestFeatureIndex;if(!W||!q||_.id!==W.layerIds[0])return;const ue=k.collisionBoxArray,he=W.layers[0].layout,be=Math.pow(2,this.transform.zoom-k.tileID.overscaledZ),Te=k.tileSize/s.EXTENT,Ue=this.transform.calculatePosMatrix(k.tileID.toUnwrapped()),Ke=he.get("text-pitch-alignment")==="map",yt=he.get("text-rotation-alignment")==="map",ut=Ae(k,1,this.transform.zoom),gt=Xt(Ue,Ke,yt,this.transform,ut);let zt=null;if(Ke){const Jt=Yt(Ue,Ke,yt,this.transform,ut);zt=s.multiply([],this.transform.labelPlaneMatrix,Jt)}this.retainedQueryData[W.bucketInstanceId]=new Ct(W.bucketInstanceId,q,W.sourceLayerIndex,W.index,k.tileID);const Gt={bucket:W,layout:he,posMatrix:Ue,textLabelPlaneMatrix:gt,labelToScreenMatrix:zt,scale:be,textPixelRatio:Te,holdingForFade:k.holdingForFade(),collisionBoxArray:ue,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(W.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(W.sourceID)};if(R)for(const Jt of W.sortKeyRanges){const{sortKey:bt,symbolInstanceStart:nr,symbolInstanceEnd:er}=Jt;c.push({sortKey:bt,symbolInstanceStart:nr,symbolInstanceEnd:er,parameters:Gt})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:W.symbolInstances.length,parameters:Gt})}attemptAnchorPlacement(c,_,k,R,W,q,ue,he,be,Te,Ue,Ke,yt,ut,gt,zt){const Gt=[Ke.textOffset0,Ke.textOffset1],Jt=Et(c,k,R,Gt,W),bt=this.collisionIndex.placeCollisionBox(Je(_,Jt.x,Jt.y,q,ue,this.transform.angle),Ue,he,be,Te.predicate,zt);if((!gt||this.collisionIndex.placeCollisionBox(Je(gt,Jt.x,Jt.y,q,ue,this.transform.angle),Ue,he,be,Te.predicate,zt).box.length!==0)&&bt.box.length>0){let nr;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ke.crossTileID]&&this.prevPlacement.placements[Ke.crossTileID]&&this.prevPlacement.placements[Ke.crossTileID].text&&(nr=this.prevPlacement.variableOffsets[Ke.crossTileID].anchor),Ke.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ke.crossTileID]={textOffset:Gt,width:k,height:R,anchor:c,textBoxScale:W,prevAnchor:nr},this.markUsedJustification(yt,c,Ke,ut),yt.allowVerticalPlacement&&(this.markUsedOrientation(yt,ut,Ke),this.placedOrientations[Ke.crossTileID]=ut),{shift:Jt,placedGlyphBoxes:bt}}}placeLayerBucketPart(c,_,k){const{bucket:R,layout:W,posMatrix:q,textLabelPlaneMatrix:ue,labelToScreenMatrix:he,textPixelRatio:be,holdingForFade:Te,collisionBoxArray:Ue,partiallyEvaluatedTextSize:Ke,collisionGroup:yt}=c.parameters,ut=W.get("text-optional"),gt=W.get("icon-optional"),zt=s.getOverlapMode(W,"text-overlap","text-allow-overlap"),Gt=zt==="always",Jt=s.getOverlapMode(W,"icon-overlap","icon-allow-overlap"),bt=Jt==="always",nr=W.get("text-rotation-alignment")==="map",er=W.get("text-pitch-alignment")==="map",mr=W.get("icon-text-fit")!=="none",Sr=W.get("symbol-z-order")==="viewport-y",$r=Gt&&(bt||!R.hasIconData()||gt),gr=bt&&(Gt||!R.hasTextData()||ut);!R.collisionArrays&&Ue&&R.deserializeCollisionBoxes(Ue);const cn=(g,b)=>{if(_[g.crossTileID])return;if(Te)return void(this.placements[g.crossTileID]=new et(!1,!1,!1));let y=!1,C=!1,U=!0,Y=null,ee={box:null,offscreen:null},se={box:null,offscreen:null},ve=null,Oe=null,He=null,Qe=0,Ze=0,mt=0;b.textFeatureIndex?Qe=b.textFeatureIndex:g.useRuntimeCollisionCircles&&(Qe=g.featureIndex),b.verticalTextFeatureIndex&&(Ze=b.verticalTextFeatureIndex);const ft=this.retainedQueryData[R.bucketInstanceId].tileID,xt=this.terrain?(Nt,qt)=>this.terrain.getElevation(ft,Nt,qt):null;for(const Nt of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const qt=b[Nt];qt&&(qt.elevation=xt?xt(qt.anchorPointX,qt.anchorPointY):0)}const st=b.textBox;if(st){const Nt=Ht=>{let or=s.WritingMode.horizontal;if(R.allowVerticalPlacement&&!Ht&&this.prevPlacement){const vr=this.prevPlacement.placedOrientations[g.crossTileID];vr&&(this.placedOrientations[g.crossTileID]=vr,or=vr,this.markUsedOrientation(R,or,g))}return or},qt=(Ht,or)=>{if(R.allowVerticalPlacement&&g.numVerticalGlyphVertices>0&&b.verticalTextBox){for(const vr of R.writingModes)if(vr===s.WritingMode.vertical?(ee=or(),se=ee):ee=Ht(),ee&&ee.box&&ee.box.length)break}else ee=Ht()};if(W.get("text-variable-anchor")){let Ht=W.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[g.crossTileID]){const Pr=this.prevPlacement.variableOffsets[g.crossTileID];Ht.indexOf(Pr.anchor)>0&&(Ht=Ht.filter(Mr=>Mr!==Pr.anchor),Ht.unshift(Pr.anchor))}const or=(Pr,Mr,tn)=>{const Sn=Pr.x2-Pr.x1,Ln=Pr.y2-Pr.y1,Bn=g.textBoxScale,ji=mr&&Jt==="never"?Mr:null;let nn={box:[],offscreen:!1};const Zn=zt!=="never"?2*Ht.length:Ht.length;for(let mi=0;mi<Zn;++mi){const pi=this.attemptAnchorPlacement(Ht[mi%Ht.length],Pr,Sn,Ln,Bn,nr,er,be,q,yt,mi>=Ht.length?zt:"never",g,R,tn,ji,xt);if(pi&&(nn=pi.placedGlyphBoxes,nn&&nn.box&&nn.box.length)){y=!0,Y=pi.shift;break}}return nn};qt(()=>or(st,b.iconBox,s.WritingMode.horizontal),()=>{const Pr=b.verticalTextBox;return R.allowVerticalPlacement&&!(ee&&ee.box&&ee.box.length)&&g.numVerticalGlyphVertices>0&&Pr?or(Pr,b.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null}}),ee&&(y=ee.box,U=ee.offscreen);const vr=Nt(ee&&ee.box);if(!y&&this.prevPlacement){const Pr=this.prevPlacement.variableOffsets[g.crossTileID];Pr&&(this.variableOffsets[g.crossTileID]=Pr,this.markUsedJustification(R,Pr.anchor,g,vr))}}else{const Ht=(or,vr)=>{const Pr=this.collisionIndex.placeCollisionBox(or,zt,be,q,yt.predicate,xt);return Pr&&Pr.box&&Pr.box.length&&(this.markUsedOrientation(R,vr,g),this.placedOrientations[g.crossTileID]=vr),Pr};qt(()=>Ht(st,s.WritingMode.horizontal),()=>{const or=b.verticalTextBox;return R.allowVerticalPlacement&&g.numVerticalGlyphVertices>0&&or?Ht(or,s.WritingMode.vertical):{box:null,offscreen:null}}),Nt(ee&&ee.box&&ee.box.length)}}if(ve=ee,y=ve&&ve.box&&ve.box.length>0,U=ve&&ve.offscreen,g.useRuntimeCollisionCircles){const Nt=R.text.placedSymbolArray.get(g.centerJustifiedTextSymbolIndex),qt=s.evaluateSizeForFeature(R.textSizeData,Ke,Nt),Ht=W.get("text-padding");Oe=this.collisionIndex.placeCollisionCircles(zt,Nt,R.lineVertexArray,R.glyphOffsetArray,qt,q,ue,he,k,er,yt.predicate,g.collisionCircleDiameter,Ht,xt),Oe.circles.length&&Oe.collisionDetected&&!k&&s.warnOnce("Collisions detected, but collision boxes are not shown"),y=Gt||Oe.circles.length>0&&!Oe.collisionDetected,U=U&&Oe.offscreen}if(b.iconFeatureIndex&&(mt=b.iconFeatureIndex),b.iconBox){const Nt=qt=>{const Ht=mr&&Y?Je(qt,Y.x,Y.y,nr,er,this.transform.angle):qt;return this.collisionIndex.placeCollisionBox(Ht,Jt,be,q,yt.predicate,xt)};se&&se.box&&se.box.length&&b.verticalIconBox?(He=Nt(b.verticalIconBox),C=He.box.length>0):(He=Nt(b.iconBox),C=He.box.length>0),U=U&&He.offscreen}const wt=ut||g.numHorizontalGlyphVertices===0&&g.numVerticalGlyphVertices===0,Lt=gt||g.numIconVertices===0;if(wt||Lt?Lt?wt||(C=C&&y):y=C&&y:C=y=C&&y,y&&ve&&ve.box&&this.collisionIndex.insertCollisionBox(ve.box,zt,W.get("text-ignore-placement"),R.bucketInstanceId,se&&se.box&&Ze?Ze:Qe,yt.ID),C&&He&&this.collisionIndex.insertCollisionBox(He.box,Jt,W.get("icon-ignore-placement"),R.bucketInstanceId,mt,yt.ID),Oe&&(y&&this.collisionIndex.insertCollisionCircles(Oe.circles,zt,W.get("text-ignore-placement"),R.bucketInstanceId,Qe,yt.ID),k)){const Nt=R.bucketInstanceId;let qt=this.collisionCircleArrays[Nt];qt===void 0&&(qt=this.collisionCircleArrays[Nt]=new ht);for(let Ht=0;Ht<Oe.circles.length;Ht+=4)qt.circles.push(Oe.circles[Ht+0]),qt.circles.push(Oe.circles[Ht+1]),qt.circles.push(Oe.circles[Ht+2]),qt.circles.push(Oe.collisionDetected?1:0)}if(g.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(R.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[g.crossTileID]=new et(y||$r,C||gr,U||R.justReloaded),_[g.crossTileID]=!0};if(Sr){if(c.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const g=R.getSortedSymbolIndexes(this.transform.angle);for(let b=g.length-1;b>=0;--b){const y=g[b];cn(R.symbolInstances.get(y),R.collisionArrays[y])}}else for(let g=c.symbolInstanceStart;g<c.symbolInstanceEnd;g++)cn(R.symbolInstances.get(g),R.collisionArrays[g]);if(k&&R.bucketInstanceId in this.collisionCircleArrays){const g=this.collisionCircleArrays[R.bucketInstanceId];s.invert(g.invProjMatrix,q),g.viewportMatrix=this.collisionIndex.getViewportMatrix()}R.justReloaded=!1}markUsedJustification(c,_,k,R){let W;W=R===s.WritingMode.vertical?k.verticalPlacedTextSymbolIndex:{left:k.leftJustifiedTextSymbolIndex,center:k.centerJustifiedTextSymbolIndex,right:k.rightJustifiedTextSymbolIndex}[s.getAnchorJustification(_)];const q=[k.leftJustifiedTextSymbolIndex,k.centerJustifiedTextSymbolIndex,k.rightJustifiedTextSymbolIndex,k.verticalPlacedTextSymbolIndex];for(const ue of q)ue>=0&&(c.text.placedSymbolArray.get(ue).crossTileID=W>=0&&ue!==W?0:k.crossTileID)}markUsedOrientation(c,_,k){const R=_===s.WritingMode.horizontal||_===s.WritingMode.horizontalOnly?_:0,W=_===s.WritingMode.vertical?_:0,q=[k.leftJustifiedTextSymbolIndex,k.centerJustifiedTextSymbolIndex,k.rightJustifiedTextSymbolIndex];for(const ue of q)c.text.placedSymbolArray.get(ue).placedOrientation=R;k.verticalPlacedTextSymbolIndex&&(c.text.placedSymbolArray.get(k.verticalPlacedTextSymbolIndex).placedOrientation=W)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const _=this.prevPlacement;let k=!1;this.prevZoomAdjustment=_?_.zoomAdjustment(this.transform.zoom):0;const R=_?_.symbolFadeChange(c):1,W=_?_.opacities:{},q=_?_.variableOffsets:{},ue=_?_.placedOrientations:{};for(const he in this.placements){const be=this.placements[he],Te=W[he];Te?(this.opacities[he]=new je(Te,R,be.text,be.icon),k=k||be.text!==Te.text.placed||be.icon!==Te.icon.placed):(this.opacities[he]=new je(null,R,be.text,be.icon,be.skipFade),k=k||be.text||be.icon)}for(const he in W){const be=W[he];if(!this.opacities[he]){const Te=new je(be,R,!1,!1);Te.isHidden()||(this.opacities[he]=Te,k=k||be.text.placed||be.icon.placed)}}for(const he in q)this.variableOffsets[he]||!this.opacities[he]||this.opacities[he].isHidden()||(this.variableOffsets[he]=q[he]);for(const he in ue)this.placedOrientations[he]||!this.opacities[he]||this.opacities[he].isHidden()||(this.placedOrientations[he]=ue[he]);if(_&&_.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");k?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=_?_.lastPlacementChangeTime:c)}updateLayerOpacities(c,_){const k={};for(const R of _){const W=R.getBucket(c);W&&R.latestFeatureIndex&&c.id===W.layerIds[0]&&this.updateBucketOpacities(W,k,R.collisionBoxArray)}}updateBucketOpacities(c,_,k){c.hasTextData()&&c.text.opacityVertexArray.clear(),c.hasIconData()&&c.icon.opacityVertexArray.clear(),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const R=c.layers[0].layout,W=new je(null,0,!1,!1,!0),q=R.get("text-allow-overlap"),ue=R.get("icon-allow-overlap"),he=R.get("text-variable-anchor"),be=R.get("text-rotation-alignment")==="map",Te=R.get("text-pitch-alignment")==="map",Ue=R.get("icon-text-fit")!=="none",Ke=new je(null,0,q&&(ue||!c.hasIconData()||R.get("icon-optional")),ue&&(q||!c.hasTextData()||R.get("text-optional")),!0);!c.collisionArrays&&k&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(k);const yt=(ut,gt,zt)=>{for(let Gt=0;Gt<gt/4;Gt++)ut.opacityVertexArray.emplaceBack(zt)};for(let ut=0;ut<c.symbolInstances.length;ut++){const gt=c.symbolInstances.get(ut),{numHorizontalGlyphVertices:zt,numVerticalGlyphVertices:Gt,crossTileID:Jt}=gt;let bt=this.opacities[Jt];_[Jt]?bt=W:bt||(bt=Ke,this.opacities[Jt]=bt),_[Jt]=!0;const nr=gt.numIconVertices>0,er=this.placedOrientations[gt.crossTileID],mr=er===s.WritingMode.vertical,Sr=er===s.WritingMode.horizontal||er===s.WritingMode.horizontalOnly;if(zt>0||Gt>0){const $r=pt(bt.text);yt(c.text,zt,mr?vt:$r),yt(c.text,Gt,Sr?vt:$r);const gr=bt.text.isHidden();[gt.rightJustifiedTextSymbolIndex,gt.centerJustifiedTextSymbolIndex,gt.leftJustifiedTextSymbolIndex].forEach(b=>{b>=0&&(c.text.placedSymbolArray.get(b).hidden=gr||mr?1:0)}),gt.verticalPlacedTextSymbolIndex>=0&&(c.text.placedSymbolArray.get(gt.verticalPlacedTextSymbolIndex).hidden=gr||Sr?1:0);const cn=this.variableOffsets[gt.crossTileID];cn&&this.markUsedJustification(c,cn.anchor,gt,er);const g=this.placedOrientations[gt.crossTileID];g&&(this.markUsedJustification(c,"left",gt,g),this.markUsedOrientation(c,g,gt))}if(nr){const $r=pt(bt.icon),gr=!(Ue&&gt.verticalPlacedIconSymbolIndex&&mr);gt.placedIconSymbolIndex>=0&&(yt(c.icon,gt.numIconVertices,gr?$r:vt),c.icon.placedSymbolArray.get(gt.placedIconSymbolIndex).hidden=bt.icon.isHidden()),gt.verticalPlacedIconSymbolIndex>=0&&(yt(c.icon,gt.numVerticalIconVertices,gr?vt:$r),c.icon.placedSymbolArray.get(gt.verticalPlacedIconSymbolIndex).hidden=bt.icon.isHidden())}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const $r=c.collisionArrays[ut];if($r){let gr=new s.pointGeometry(0,0);if($r.textBox||$r.verticalTextBox){let g=!0;if(he){const b=this.variableOffsets[Jt];b?(gr=Et(b.anchor,b.width,b.height,b.textOffset,b.textBoxScale),be&&gr._rotate(Te?this.transform.angle:-this.transform.angle)):g=!1}$r.textBox&&fe(c.textCollisionBox.collisionVertexArray,bt.text.placed,!g||mr,gr.x,gr.y),$r.verticalTextBox&&fe(c.textCollisionBox.collisionVertexArray,bt.text.placed,!g||Sr,gr.x,gr.y)}const cn=!!(!Sr&&$r.verticalIconBox);$r.iconBox&&fe(c.iconCollisionBox.collisionVertexArray,bt.icon.placed,cn,Ue?gr.x:0,Ue?gr.y:0),$r.verticalIconBox&&fe(c.iconCollisionBox.collisionVertexArray,bt.icon.placed,!cn,Ue?gr.x:0,Ue?gr.y:0)}}}if(c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.text.opacityVertexArray.length!==c.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${c.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${c.text.layoutVertexArray.length}) / 4`);if(c.icon.opacityVertexArray.length!==c.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${c.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${c.icon.layoutVertexArray.length}) / 4`);if(c.bucketInstanceId in this.collisionCircleArrays){const ut=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=ut.invProjMatrix,c.placementViewportMatrix=ut.viewportMatrix,c.collisionCircleArray=ut.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}}symbolFadeChange(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,_){const k=this.zoomAtLastRecencyCheck===_?1-this.zoomAdjustment(_):1;return this.zoomAtLastRecencyCheck=_,this.commitTime+this.fadeDuration*k>c}setStale(){this.stale=!0}}function fe(O,c,_,k,R){O.emplaceBack(c?1:0,_?1:0,k||0,R||0),O.emplaceBack(c?1:0,_?1:0,k||0,R||0),O.emplaceBack(c?1:0,_?1:0,k||0,R||0),O.emplaceBack(c?1:0,_?1:0,k||0,R||0)}const we=Math.pow(2,25),Ce=Math.pow(2,24),Le=Math.pow(2,17),nt=Math.pow(2,16),dt=Math.pow(2,9),ct=Math.pow(2,8),Xe=Math.pow(2,1);function pt(O){if(O.opacity===0&&!O.placed)return 0;if(O.opacity===1&&O.placed)return 4294967295;const c=O.placed?1:0,_=Math.floor(127*O.opacity);return _*we+c*Ce+_*Le+c*nt+_*dt+c*ct+_*Xe+c}const vt=0;class ar{constructor(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&!c.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(c,_,k,R,W){const q=this._bucketParts;for(;this._currentTileIndex<c.length;)if(_.getBucketParts(q,R,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,W())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,q.sort((ue,he)=>ue.sortKey-he.sortKey));this._currentPartIndex<q.length;)if(_.placeLayerBucketPart(q[this._currentPartIndex],this._seenCrossTileIDs,k),this._currentPartIndex++,W())return!0;return!1}}class Vt{constructor(c,_,k,R,W,q,ue,he){this.placement=new ye(c,_,q,ue,he),this._currentPlacementIndex=k.length-1,this._forceFullPlacement=R,this._showCollisionBoxes=W,this._done=!1}isDone(){return this._done}continuePlacement(c,_,k){const R=s.exported.now(),W=()=>{const q=s.exported.now()-R;return!this._forceFullPlacement&&q>2};for(;this._currentPlacementIndex>=0;){const q=_[c[this._currentPlacementIndex]],ue=this.placement.collisionIndex.transform.zoom;if(q.type==="symbol"&&(!q.minzoom||q.minzoom<=ue)&&(!q.maxzoom||q.maxzoom>ue)){if(this._inProgressLayer||(this._inProgressLayer=new ar(q)),this._inProgressLayer.continuePlacement(k[q.source],this.placement,this._showCollisionBoxes,q,W))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const fr=512/s.EXTENT/2;class qr{constructor(c,_,k){this.tileID=c,this.indexedSymbolInstances={},this.bucketInstanceId=k;for(let R=0;R<_.length;R++){const W=_.get(R),q=W.key;this.indexedSymbolInstances[q]||(this.indexedSymbolInstances[q]=[]),this.indexedSymbolInstances[q].push({crossTileID:W.crossTileID,coord:this.getScaledCoordinates(W,c)})}}getScaledCoordinates(c,_){const k=fr/Math.pow(2,_.canonical.z-this.tileID.canonical.z);return{x:Math.floor((_.canonical.x*s.EXTENT+c.anchorX)*k),y:Math.floor((_.canonical.y*s.EXTENT+c.anchorY)*k)}}findMatches(c,_,k){const R=this.tileID.canonical.z<_.canonical.z?1:Math.pow(2,this.tileID.canonical.z-_.canonical.z);for(let W=0;W<c.length;W++){const q=c.get(W);if(q.crossTileID)continue;const ue=this.indexedSymbolInstances[q.key];if(!ue)continue;const he=this.getScaledCoordinates(q,_);for(const be of ue)if(Math.abs(be.coord.x-he.x)<=R&&Math.abs(be.coord.y-he.y)<=R&&!k[be.crossTileID]){k[be.crossTileID]=!0,q.crossTileID=be.crossTileID;break}}}}class Ar{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ln{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const _=Math.round((c-this.lng)/360);if(_!==0)for(const k in this.indexes){const R=this.indexes[k],W={};for(const q in R){const ue=R[q];ue.tileID=ue.tileID.unwrapTo(ue.tileID.wrap+_),W[ue.tileID.key]=ue}this.indexes[k]=W}this.lng=c}addBucket(c,_,k){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===_.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let W=0;W<_.symbolInstances.length;W++)_.symbolInstances.get(W).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});const R=this.usedCrossTileIDs[c.overscaledZ];for(const W in this.indexes){const q=this.indexes[W];if(Number(W)>c.overscaledZ)for(const ue in q){const he=q[ue];he.tileID.isChildOf(c)&&he.findMatches(_.symbolInstances,c,R)}else{const ue=q[c.scaledTo(Number(W)).key];ue&&ue.findMatches(_.symbolInstances,c,R)}}for(let W=0;W<_.symbolInstances.length;W++){const q=_.symbolInstances.get(W);q.crossTileID||(q.crossTileID=k.generate(),R[q.crossTileID]=!0)}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new qr(c,_.symbolInstances,_.bucketInstanceId),!0}removeBucketCrossTileIDs(c,_){for(const k in _.indexedSymbolInstances)for(const R of _.indexedSymbolInstances[k])delete this.usedCrossTileIDs[c][R.crossTileID]}removeStaleBuckets(c){let _=!1;for(const k in this.indexes){const R=this.indexes[k];for(const W in R)c[R[W].bucketInstanceId]||(this.removeBucketCrossTileIDs(k,R[W]),delete R[W],_=!0)}return _}}class gn{constructor(){this.layerIndexes={},this.crossTileIDs=new Ar,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,_,k){let R=this.layerIndexes[c.id];R===void 0&&(R=this.layerIndexes[c.id]=new ln);let W=!1;const q={};R.handleWrapJump(k);for(const ue of _){const he=ue.getBucket(c);he&&c.id===he.layerIds[0]&&(he.bucketInstanceId||(he.bucketInstanceId=++this.maxBucketInstanceId),R.addBucket(ue.tileID,he,this.crossTileIDs)&&(W=!0),q[he.bucketInstanceId]=!0)}return R.removeStaleBuckets(q)&&(W=!0),W}pruneUnusedLayers(c){const _={};c.forEach(k=>{_[k]=!0});for(const k in this.layerIndexes)_[k]||delete this.layerIndexes[k]}}var An=s.createLayout([{name:"a_pos",type:"Int16",components:2}]);class wn extends s.Evented{constructor(c){super(),this.sourceCache=c,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=c._cache.max,c.usedForTerrain=!0,c.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const c in this._tiles){const _=this._tiles[c];_.textures.forEach(k=>k.destroy()),_.textures=[]}}update(c,_){this.sourceCache.update(c,_),this._renderableTilesKeys=[];for(const k of c.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:_}))this._renderableTilesKeys.push(k.key),this._tiles[k.key]||(k.posMatrix=new Float64Array(16),s.ortho(k.posMatrix,0,s.EXTENT,0,s.EXTENT,0,1),this._tiles[k.key]=new br(k,this.tileSize))}removeOutdated(c){const _={};this.renderHistory=this.renderHistory.filter((k,R)=>this.renderHistory.indexOf(k)===R).slice(0,this.renderHistorySize);for(const k of this._renderableTilesKeys)_[k]=!0;for(const k of this.renderHistory)_[k]=!0;for(const k in this._tiles)_[k]||(this._tiles[k].clearTextures(c),delete this._tiles[k])}getRenderableTiles(){return this._renderableTilesKeys.map(c=>this.getTileByID(c))}getTileByID(c){return this._tiles[c]}getTerrainCoords(c){const _={};for(const k of this._renderableTilesKeys){const R=this._tiles[k].tileID;if(R.canonical.equals(c.canonical)){const W=c.clone();W.posMatrix=new Float64Array(16),s.ortho(W.posMatrix,0,s.EXTENT,0,s.EXTENT,0,1),_[k]=W}else if(R.canonical.isChildOf(c.canonical)){const W=c.clone();W.posMatrix=new Float64Array(16);const q=R.canonical.z-c.canonical.z,ue=R.canonical.x-(R.canonical.x>>q<<q),he=R.canonical.y-(R.canonical.y>>q<<q),be=s.EXTENT>>q;s.ortho(W.posMatrix,0,be,0,be,0,1),s.translate(W.posMatrix,W.posMatrix,[-ue*be,-he*be,0]),_[k]=W}else if(c.canonical.isChildOf(R.canonical)){const W=c.clone();W.posMatrix=new Float64Array(16);const q=c.canonical.z-R.canonical.z,ue=c.canonical.x-(c.canonical.x>>q<<q),he=c.canonical.y-(c.canonical.y>>q<<q),be=s.EXTENT>>q;s.ortho(W.posMatrix,0,s.EXTENT,0,s.EXTENT,0,1),s.translate(W.posMatrix,W.posMatrix,[ue*be,he*be,0]),s.scale(W.posMatrix,W.posMatrix,[1/2**q,1/2**q,0]),_[k]=W}}return _}getSourceTile(c,_){const k=this.sourceCache._source;let R=c.overscaledZ-this.deltaZoom;if(R>k.maxzoom&&(R=k.maxzoom),R<k.minzoom)return null;this._sourceTileCache[c.key]||(this._sourceTileCache[c.key]=c.scaledTo(R).key);let W=this.sourceCache.getTileByID(this._sourceTileCache[c.key]);if((!W||!W.dem)&&_)for(;R>=k.minzoom&&(!W||!W.dem);)W=this.sourceCache.getTileByID(c.scaledTo(R--).key);return W}tilesAfterTime(c=Date.now()){return Object.values(this._tiles).filter(_=>_.timeLoaded>=c)}}class Dn{constructor(c,_,k){this.style=c,this.sourceCache=new wn(_),this.options=k,this.exaggeration=typeof k.exaggeration=="number"?k.exaggeration:1,this.elevationOffset=typeof k.elevationOffset=="number"?k.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(c,_,k,R=s.EXTENT){if(!(_>=0&&_<R&&k>=0&&k<R))return this.elevationOffset;let W=0;const q=this.getTerrainData(c);if(q.tile&&q.tile.dem){const ue=s.transformMat4$1([],[_/R*s.EXTENT,k/R*s.EXTENT],q.u_terrain_matrix),he=[ue[0]*q.tile.dem.dim,ue[1]*q.tile.dem.dim],be=[Math.floor(he[0]),Math.floor(he[1])],Te=q.tile.dem.get(be[0],be[1]),Ue=q.tile.dem.get(be[0],be[1]+1),Ke=q.tile.dem.get(be[0]+1,be[1]),yt=q.tile.dem.get(be[0]+1,be[1]+1);W=s.number(s.number(Te,Ue,he[0]-be[0]),s.number(Ke,yt,he[0]-be[0]),he[1]-be[1])}return W}rememberForRerender(c,_){for(const k in this.sourceCache._tiles){const R=this.sourceCache._tiles[k];(R.tileID.equals(_)||R.tileID.isChildOf(_))&&(c===this.sourceCache.sourceCache.id&&(R.timeLoaded=Date.now()),this._rerender[c]=this._rerender[c]||{},this._rerender[c][R.tileID.key]=!0)}}needsRerender(c,_){return this._rerender[c]&&this._rerender[c][_.key]}clearRerenderCache(){this._rerender={}}getElevation(c,_,k,R=s.EXTENT){return(this.getDEMElevation(c,_,k,R)+this.elevationOffset)*this.exaggeration}getTerrainData(c){if(!this._emptyDemTexture){const R=this.style.map.painter.context,W=new s.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new K(R,W,R.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new K(R,new s.RGBAImage({width:1,height:1}),R.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(R.gl.NEAREST,R.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.identity([])}const _=this.sourceCache.getSourceTile(c,!0);if(_&&_.dem&&(!_.demTexture||_.needsTerrainPrepare)){const R=this.style.map.painter.context;_.demTexture=this.style.map.painter.getTileTexture(_.dem.stride),_.demTexture?_.demTexture.update(_.dem.getPixels(),{premultiply:!1}):_.demTexture=new K(R,_.dem.getPixels(),R.gl.RGBA,{premultiply:!1}),_.demTexture.bind(R.gl.NEAREST,R.gl.CLAMP_TO_EDGE),_.needsTerrainPrepare=!1}const k=_&&_+_.tileID.key+c.key;if(k&&!this._demMatrixCache[k]){const R=this.sourceCache.sourceCache._source.maxzoom;let W=c.canonical.z-_.tileID.canonical.z;c.overscaledZ>c.canonical.z&&(c.canonical.z>=R?W=c.canonical.z-R:s.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const q=c.canonical.x-(c.canonical.x>>W<<W),ue=c.canonical.y-(c.canonical.y>>W<<W),he=s.fromScaling(new Float64Array(16),[1/(s.EXTENT<<W),1/(s.EXTENT<<W),0]);s.translate(he,he,[q*s.EXTENT,ue*s.EXTENT,0]),this._demMatrixCache[c.key]={matrix:he,coord:c}}return{u_depth:2,u_terrain:3,u_terrain_dim:_&&_.dem&&_.dem.dim||1,u_terrain_matrix:k?this._demMatrixCache[c.key].matrix:this._emptyDemMatrix,u_terrain_unpack:_&&_.dem&&_.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(_&&_.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:_}}getRTTFramebuffer(){const c=this.style.map.painter;if(!this._rttFramebuffer){const _=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=c.context.createFramebuffer(_,_,!0),this._rttFramebuffer.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,_,_))}return this._rttFramebuffer}getFramebuffer(c){const _=this.style.map.painter,k=_.width/devicePixelRatio,R=_.height/devicePixelRatio;return!this._fbo||this._fbo.width===k&&this._fbo.height===R||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new K(_.context,{width:k,height:R,data:null},_.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(_.context.gl.NEAREST,_.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new K(_.context,{width:k,height:R,data:null},_.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(_.context.gl.NEAREST,_.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=_.context.createFramebuffer(k,R,!0),this._fbo.depthAttachment.set(_.context.createRenderbuffer(_.context.gl.DEPTH_COMPONENT16,k,R))),this._fbo.colorAttachment.set(c==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const c=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const _=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let W=0,q=0;W<this._coordsTextureSize;W++)for(let ue=0;ue<this._coordsTextureSize;ue++,q+=4)_[q+0]=255&ue,_[q+1]=255&W,_[q+2]=ue>>8<<4|W>>8,_[q+3]=0;const k=new s.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(_.buffer)),R=new K(c,k,c.gl.RGBA,{premultiply:!1});return R.bind(c.gl.NEAREST,c.gl.CLAMP_TO_EDGE),this._coordsTexture=R,R}pointCoordinate(c){const _=new Uint8Array(4),k=this.style.map.painter,R=k.context,W=R.gl;R.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),W.readPixels(c.x,k.height/devicePixelRatio-c.y-1,1,1,W.RGBA,W.UNSIGNED_BYTE,_),R.bindFramebuffer.set(null);const q=_[0]+(_[2]>>4<<8),ue=_[1]+((15&_[2])<<8),he=this.coordsIndex[255-_[3]],be=he&&this.sourceCache.getTileByID(he);if(!be)return null;const Te=this._coordsTextureSize,Ue=(1<<be.tileID.canonical.z)*Te;return new s.MercatorCoordinate((be.tileID.canonical.x*Te+q)/Ue,(be.tileID.canonical.y*Te+ue)/Ue,this.getElevation(be.tileID,q,ue,Te))}getTerrainMesh(){if(this._mesh)return this._mesh;const c=this.style.map.painter.context,_=new s.PosArray,k=new s.TriangleIndexArray,R=this.meshSize,W=s.EXTENT/R,q=R*R;for(let ue=0;ue<=R;ue++)for(let he=0;he<=R;he++)_.emplaceBack(he*W,ue*W);for(let ue=0;ue<q;ue+=R+1)for(let he=0;he<R;he++)k.emplaceBack(he+ue,R+he+ue+1,R+he+ue+2),k.emplaceBack(he+ue,R+he+ue+2,he+ue+1);return this._mesh={indexBuffer:c.createIndexBuffer(k),vertexBuffer:c.createVertexBuffer(_,An.members),segments:s.SegmentVector.simpleSegment(0,0,_.length,k.length)},this._mesh}getMinMaxElevation(c){const _=this.getTerrainData(c).tile,k={minElevation:null,maxElevation:null};return _&&_.dem&&(k.minElevation=(_.dem.min+this.elevationOffset)*this.exaggeration,k.maxElevation=(_.dem.max+this.elevationOffset)*this.exaggeration),k}}const $n=(O,c)=>s.emitValidationErrors(O,c&&c.filter(_=>_.identifier!=="source.canvas")),kn=s.pick(gi,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Qa=s.pick(gi,["setCenter","setZoom","setBearing","setPitch"]),Fn=function(){const O={},c=s.spec.$version;for(const _ in s.spec.$root){const k=s.spec.$root[_];if(k.required){let R=null;R=_==="version"?c:k.type==="array"?[]:{},R!=null&&(O[_]=R)}}return O}();class oo extends s.Evented{constructor(c,_={}){super(),this.map=c,this.dispatcher=new ke(Li(),this),this.imageManager=new G,this.imageManager.setEventedParent(this),this.glyphManager=new N(c._requestManager,_.localIdeographFontFamily),this.lineAtlas=new pe(256,512),this.crossTileSymbolIndex=new gn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const k=this;this._rtlTextPluginCallback=oo.registerForPluginStateChange(R=>{k.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:R.pluginStatus,pluginURL:R.pluginURL},(W,q)=>{if(s.triggerPluginCompletionEvent(W),q&&q.every(ue=>ue))for(const ue in k.sourceCaches)k.sourceCaches[ue].reload()})}),this.on("data",R=>{if(R.dataType!=="source"||R.sourceDataType!=="metadata")return;const W=this.sourceCaches[R.sourceId];if(!W)return;const q=W.getSource();if(q&&q.vectorLayerIds)for(const ue in this._layers){const he=this._layers[ue];he.source===q.id&&this._validateLayer(he)}})}loadURL(c,_={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const k=typeof _.validate!="boolean"||_.validate,R=this.map._requestManager.transformRequest(c,s.ResourceType.Style);this._request=s.getJSON(R,(W,q)=>{this._request=null,W?this.fire(new s.ErrorEvent(W)):q&&this._load(q,k)})}loadJSON(c,_={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(c,_.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(Fn,!1)}_load(c,_){if(_&&$n(this,s.validateStyle(c)))return;this._loaded=!0,this.stylesheet=c;for(const R in c.sources)this.addSource(R,c.sources[R],{validate:!1});c.sprite?this._loadSprite(c.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(c.glyphs);const k=Yi(this.stylesheet.layers);this._order=k.map(R=>R.id),this._layers={},this._serializedLayers={};for(let R of k)R=s.createStyleLayer(R),R.setEventedParent(this,{layer:{id:R.id}}),this._layers[R.id]=R,this._serializedLayers[R.id]=R.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new te(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}_loadSprite(c){this._spriteRequest=function(_,k,R,W){let q,ue,he;const be=R>1?"@2x":"";let Te=s.getJSON(k.transformRequest(k.normalizeSpriteURL(_,be,".json"),s.ResourceType.SpriteJSON),(yt,ut)=>{Te=null,he||(he=yt,q=ut,Ke())}),Ue=s.getImage(k.transformRequest(k.normalizeSpriteURL(_,be,".png"),s.ResourceType.SpriteImage),(yt,ut)=>{Ue=null,he||(he=yt,ue=ut,Ke())});function Ke(){if(he)W(he);else if(q&&ue){const yt=s.exported.getImageData(ue),ut={};for(const gt in q){const{width:zt,height:Gt,x:Jt,y:bt,sdf:nr,pixelRatio:er,stretchX:mr,stretchY:Sr,content:$r}=q[gt],gr=new s.RGBAImage({width:zt,height:Gt});s.RGBAImage.copy(yt,gr,{x:Jt,y:bt},{x:0,y:0},{width:zt,height:Gt}),ut[gt]={data:gr,pixelRatio:er,sdf:nr,stretchX:mr,stretchY:Sr,content:$r}}W(null,ut)}}return{cancel(){Te&&(Te.cancel(),Te=null),Ue&&(Ue.cancel(),Ue=null)}}}(c,this.map._requestManager,this.map.getPixelRatio(),(_,k)=>{if(this._spriteRequest=null,_)this.fire(new s.ErrorEvent(_));else if(k)for(const R in k)this.imageManager.addImage(R,k[R]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(c){const _=this.sourceCaches[c.source];if(!_)return;const k=c.sourceLayer;if(!k)return;const R=_.getSource();(R.type==="geojson"||R.vectorLayerIds&&R.vectorLayerIds.indexOf(k)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${k}" does not exist on source "${R.id}" as specified by style layer "${c.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const c in this.sourceCaches)if(!this.sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(c){const _=[];for(const k of c){const R=this._layers[k];R.type!=="custom"&&_.push(R.serialize())}return _}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const c in this.sourceCaches)if(this.sourceCaches[c].hasTransition())return!0;for(const c in this._layers)if(this._layers[c].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(c){if(!this._loaded)return;const _=this._changed;if(this._changed){const R=Object.keys(this._updatedLayers),W=Object.keys(this._removedLayers);(R.length||W.length)&&this._updateWorkerLayers(R,W);for(const q in this._updatedSources){const ue=this._updatedSources[q];if(ue==="reload")this._reloadSource(q);else{if(ue!=="clear")throw new Error(`Invalid action ${ue}`);this._clearSource(q)}}this._updateTilesForChangedImages();for(const q in this._updatedPaintProps)this._layers[q].updateTransitions(c);this.light.updateTransitions(c),this._resetUpdates()}const k={};for(const R in this.sourceCaches){const W=this.sourceCaches[R];k[R]=W.used,W.used=!1}for(const R of this._order){const W=this._layers[R];W.recalculate(c,this._availableImages),!W.isHidden(c.zoom)&&W.source&&(this.sourceCaches[W.source].used=!0)}for(const R in k){const W=this.sourceCaches[R];k[R]!==W.used&&W.fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:R}))}this.light.recalculate(c),this.z=c.zoom,_&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=Object.keys(this._changedImages);if(c.length){for(const _ in this.sourceCaches)this.sourceCaches[_].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}}_updateWorkerLayers(c,_){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(c),removedIds:_})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(c){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),c){const _=this.sourceCaches[c.source];if(!_)throw new Error(`cannot load terrain, because there exists no source with ID: ${c.source}`);this.terrain=new Dn(this,_,c),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=k=>{k.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=k=>{k.tile&&(k.sourceId===c.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(k.sourceId,k.tile.tileID)):k.source.type==="geojson"&&this.terrain.rememberForRerender(k.sourceId,k.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new s.Event("terrain",{terrain:c}))}setState(c){if(this._checkLoaded(),$n(this,s.validateStyle(c)))return!1;(c=s.clone$1(c)).layers=Yi(c.layers);const _=function(R,W){if(!R)return[{command:gi.setStyle,args:[W]}];let q=[];try{if(!A(R.version,W.version))return[{command:gi.setStyle,args:[W]}];A(R.center,W.center)||q.push({command:gi.setCenter,args:[W.center]}),A(R.zoom,W.zoom)||q.push({command:gi.setZoom,args:[W.zoom]}),A(R.bearing,W.bearing)||q.push({command:gi.setBearing,args:[W.bearing]}),A(R.pitch,W.pitch)||q.push({command:gi.setPitch,args:[W.pitch]}),A(R.sprite,W.sprite)||q.push({command:gi.setSprite,args:[W.sprite]}),A(R.glyphs,W.glyphs)||q.push({command:gi.setGlyphs,args:[W.glyphs]}),A(R.transition,W.transition)||q.push({command:gi.setTransition,args:[W.transition]}),A(R.light,W.light)||q.push({command:gi.setLight,args:[W.light]});const ue={},he=[];(function(Te,Ue,Ke,yt){let ut;for(ut in Ue=Ue||{},Te=Te||{})Object.prototype.hasOwnProperty.call(Te,ut)&&(Object.prototype.hasOwnProperty.call(Ue,ut)||ya(ut,Ke,yt));for(ut in Ue)Object.prototype.hasOwnProperty.call(Ue,ut)&&(Object.prototype.hasOwnProperty.call(Te,ut)?A(Te[ut],Ue[ut])||(Te[ut].type==="geojson"&&Ue[ut].type==="geojson"&&Aa(Te,Ue,ut)?Ke.push({command:gi.setGeoJSONSourceData,args:[ut,Ue[ut].data]}):La(ut,Ue,Ke,yt)):ea(ut,Ue,Ke))})(R.sources,W.sources,he,ue);const be=[];R.layers&&R.layers.forEach(Te=>{ue[Te.source]?q.push({command:gi.removeLayer,args:[Te.id]}):be.push(Te)}),q=q.concat(he),function(Te,Ue,Ke){Ue=Ue||[];const yt=(Te=Te||[]).map(ka),ut=Ue.map(ka),gt=Te.reduce(Ka,{}),zt=Ue.reduce(Ka,{}),Gt=yt.slice(),Jt=Object.create(null);let bt,nr,er,mr,Sr,$r,gr;for(bt=0,nr=0;bt<yt.length;bt++)er=yt[bt],Object.prototype.hasOwnProperty.call(zt,er)?nr++:(Ke.push({command:gi.removeLayer,args:[er]}),Gt.splice(Gt.indexOf(er,nr),1));for(bt=0,nr=0;bt<ut.length;bt++)er=ut[ut.length-1-bt],Gt[Gt.length-1-bt]!==er&&(Object.prototype.hasOwnProperty.call(gt,er)?(Ke.push({command:gi.removeLayer,args:[er]}),Gt.splice(Gt.lastIndexOf(er,Gt.length-nr),1)):nr++,$r=Gt[Gt.length-bt],Ke.push({command:gi.addLayer,args:[zt[er],$r]}),Gt.splice(Gt.length-bt,0,er),Jt[er]=!0);for(bt=0;bt<ut.length;bt++)if(er=ut[bt],mr=gt[er],Sr=zt[er],!Jt[er]&&!A(mr,Sr))if(A(mr.source,Sr.source)&&A(mr["source-layer"],Sr["source-layer"])&&A(mr.type,Sr.type)){for(gr in $a(mr.layout,Sr.layout,Ke,er,null,gi.setLayoutProperty),$a(mr.paint,Sr.paint,Ke,er,null,gi.setPaintProperty),A(mr.filter,Sr.filter)||Ke.push({command:gi.setFilter,args:[er,Sr.filter]}),A(mr.minzoom,Sr.minzoom)&&A(mr.maxzoom,Sr.maxzoom)||Ke.push({command:gi.setLayerZoomRange,args:[er,Sr.minzoom,Sr.maxzoom]}),mr)Object.prototype.hasOwnProperty.call(mr,gr)&&gr!=="layout"&&gr!=="paint"&&gr!=="filter"&&gr!=="metadata"&&gr!=="minzoom"&&gr!=="maxzoom"&&(gr.indexOf("paint.")===0?$a(mr[gr],Sr[gr],Ke,er,gr.slice(6),gi.setPaintProperty):A(mr[gr],Sr[gr])||Ke.push({command:gi.setLayerProperty,args:[er,gr,Sr[gr]]}));for(gr in Sr)Object.prototype.hasOwnProperty.call(Sr,gr)&&!Object.prototype.hasOwnProperty.call(mr,gr)&&gr!=="layout"&&gr!=="paint"&&gr!=="filter"&&gr!=="metadata"&&gr!=="minzoom"&&gr!=="maxzoom"&&(gr.indexOf("paint.")===0?$a(mr[gr],Sr[gr],Ke,er,gr.slice(6),gi.setPaintProperty):A(mr[gr],Sr[gr])||Ke.push({command:gi.setLayerProperty,args:[er,gr,Sr[gr]]}))}else Ke.push({command:gi.removeLayer,args:[er]}),$r=Gt[Gt.lastIndexOf(er)+1],Ke.push({command:gi.addLayer,args:[Sr,$r]})}(be,W.layers,q)}catch(ue){console.warn("Unable to compute style diff:",ue),q=[{command:gi.setStyle,args:[W]}]}return q}(this.serialize(),c).filter(R=>!(R.command in Qa));if(_.length===0)return!1;const k=_.filter(R=>!(R.command in kn));if(k.length>0)throw new Error(`Unimplemented: ${k.map(R=>R.command).join(", ")}.`);return _.forEach(R=>{R.command!=="setTransition"&&this[R.command].apply(this,R.args)}),this.stylesheet=c,!0}addImage(c,_){if(this.getImage(c))return this.fire(new s.ErrorEvent(new Error(`An image named "${c}" already exists.`)));this.imageManager.addImage(c,_),this._afterImageUpdated(c)}updateImage(c,_){this.imageManager.updateImage(c,_)}getImage(c){return this.imageManager.getImage(c)}removeImage(c){if(!this.getImage(c))return this.fire(new s.ErrorEvent(new Error(`An image named "${c}" does not exist.`)));this.imageManager.removeImage(c),this._afterImageUpdated(c)}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(c,_,k={}){if(this._checkLoaded(),this.sourceCaches[c]!==void 0)throw new Error(`Source "${c}" already exists.`);if(!_.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(_).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(_.type)>=0&&this._validate(s.validateStyle.source,`sources.${c}`,_,null,k))return;this.map&&this.map._collectResourceTiming&&(_.collectResourceTiming=!0);const R=this.sourceCaches[c]=new cr(c,_,this.dispatcher);R.style=this,R.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:R.serialize(),sourceId:c})),R.onAdd(this.map),this._changed=!0}removeSource(c){if(this._checkLoaded(),this.sourceCaches[c]===void 0)throw new Error("There is no source with this ID");for(const k in this._layers)if(this._layers[k].source===c)return this.fire(new s.ErrorEvent(new Error(`Source "${c}" cannot be removed while layer "${k}" is using it.`)));const _=this.sourceCaches[c];delete this.sourceCaches[c],delete this._updatedSources[c],_.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:c})),_.setEventedParent(null),_.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(c,_){if(this._checkLoaded(),this.sourceCaches[c]===void 0)throw new Error(`There is no source with this ID=${c}`);const k=this.sourceCaches[c].getSource();if(k.type!=="geojson")throw new Error(`geojsonSource.type is ${k.type}, which is !== 'geojson`);k.setData(_),this._changed=!0}getSource(c){return this.sourceCaches[c]&&this.sourceCaches[c].getSource()}addLayer(c,_,k={}){this._checkLoaded();const R=c.id;if(this.getLayer(R))return void this.fire(new s.ErrorEvent(new Error(`Layer "${R}" already exists on this map.`)));let W;if(c.type==="custom"){if($n(this,s.validateCustomStyleLayer(c)))return;W=s.createStyleLayer(c)}else{if(typeof c.source=="object"&&(this.addSource(R,c.source),c=s.clone$1(c),c=s.extend(c,{source:R})),this._validate(s.validateStyle.layer,`layers.${R}`,c,{arrayIndex:-1},k))return;W=s.createStyleLayer(c),this._validateLayer(W),W.setEventedParent(this,{layer:{id:R}}),this._serializedLayers[W.id]=W.serialize()}const q=_?this._order.indexOf(_):this._order.length;if(_&&q===-1)this.fire(new s.ErrorEvent(new Error(`Cannot add layer "${R}" before non-existing layer "${_}".`)));else{if(this._order.splice(q,0,R),this._layerOrderChanged=!0,this._layers[R]=W,this._removedLayers[R]&&W.source&&W.type!=="custom"){const ue=this._removedLayers[R];delete this._removedLayers[R],ue.type!==W.type?this._updatedSources[W.source]="clear":(this._updatedSources[W.source]="reload",this.sourceCaches[W.source].pause())}this._updateLayer(W),W.onAdd&&W.onAdd(this.map)}}moveLayer(c,_){if(this._checkLoaded(),this._changed=!0,!this._layers[c])return void this.fire(new s.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be moved.`)));if(c===_)return;const k=this._order.indexOf(c);this._order.splice(k,1);const R=_?this._order.indexOf(_):this._order.length;_&&R===-1?this.fire(new s.ErrorEvent(new Error(`Cannot move layer "${c}" before non-existing layer "${_}".`))):(this._order.splice(R,0,c),this._layerOrderChanged=!0)}removeLayer(c){this._checkLoaded();const _=this._layers[c];if(!_)return void this.fire(new s.ErrorEvent(new Error(`Cannot remove non-existing layer "${c}".`)));_.setEventedParent(null);const k=this._order.indexOf(c);this._order.splice(k,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=_,delete this._layers[c],delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],_.onRemove&&_.onRemove(this.map)}getLayer(c){return this._layers[c]}hasLayer(c){return c in this._layers}setLayerZoomRange(c,_,k){this._checkLoaded();const R=this.getLayer(c);R?R.minzoom===_&&R.maxzoom===k||(_!=null&&(R.minzoom=_),k!=null&&(R.maxzoom=k),this._updateLayer(R)):this.fire(new s.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${c}".`)))}setFilter(c,_,k={}){this._checkLoaded();const R=this.getLayer(c);if(R){if(!A(R.filter,_))return _==null?(R.filter=void 0,void this._updateLayer(R)):void(this._validate(s.validateStyle.filter,`layers.${R.id}.filter`,_,null,k)||(R.filter=s.clone$1(_),this._updateLayer(R)))}else this.fire(new s.ErrorEvent(new Error(`Cannot filter non-existing layer "${c}".`)))}getFilter(c){return s.clone$1(this.getLayer(c).filter)}setLayoutProperty(c,_,k,R={}){this._checkLoaded();const W=this.getLayer(c);W?A(W.getLayoutProperty(_),k)||(W.setLayoutProperty(_,k,R),this._updateLayer(W)):this.fire(new s.ErrorEvent(new Error(`Cannot style non-existing layer "${c}".`)))}getLayoutProperty(c,_){const k=this.getLayer(c);if(k)return k.getLayoutProperty(_);this.fire(new s.ErrorEvent(new Error(`Cannot get style of non-existing layer "${c}".`)))}setPaintProperty(c,_,k,R={}){this._checkLoaded();const W=this.getLayer(c);W?A(W.getPaintProperty(_),k)||(W.setPaintProperty(_,k,R)&&this._updateLayer(W),this._changed=!0,this._updatedPaintProps[c]=!0):this.fire(new s.ErrorEvent(new Error(`Cannot style non-existing layer "${c}".`)))}getPaintProperty(c,_){return this.getLayer(c).getPaintProperty(_)}setFeatureState(c,_){this._checkLoaded();const k=c.source,R=c.sourceLayer,W=this.sourceCaches[k];if(W===void 0)return void this.fire(new s.ErrorEvent(new Error(`The source '${k}' does not exist in the map's style.`)));const q=W.getSource().type;q==="geojson"&&R?this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):q!=="vector"||R?(c.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),W.setFeatureState(R,c.id,_)):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(c,_){this._checkLoaded();const k=c.source,R=this.sourceCaches[k];if(R===void 0)return void this.fire(new s.ErrorEvent(new Error(`The source '${k}' does not exist in the map's style.`)));const W=R.getSource().type,q=W==="vector"?c.sourceLayer:void 0;W!=="vector"||q?_&&typeof c.id!="string"&&typeof c.id!="number"?this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):R.removeFeatureState(q,c.id,_):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(c){this._checkLoaded();const _=c.source,k=c.sourceLayer,R=this.sourceCaches[_];if(R!==void 0)return R.getSource().type!=="vector"||k?(c.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),R.getFeatureState(k,c.id)):void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:s.mapObject(this.sourceCaches,c=>c.serialize()),layers:this._serializeLayers(this._order)},c=>c!==void 0)}_updateLayer(c){this._updatedLayers[c.id]=!0,c.source&&!this._updatedSources[c.source]&&this.sourceCaches[c.source].getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",this.sourceCaches[c.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(c){const _=q=>this._layers[q].type==="fill-extrusion",k={},R=[];for(let q=this._order.length-1;q>=0;q--){const ue=this._order[q];if(_(ue)){k[ue]=q;for(const he of c){const be=he[ue];if(be)for(const Te of be)R.push(Te)}}}R.sort((q,ue)=>ue.intersectionZ-q.intersectionZ);const W=[];for(let q=this._order.length-1;q>=0;q--){const ue=this._order[q];if(_(ue))for(let he=R.length-1;he>=0;he--){const be=R[he].feature;if(k[be.layer.id]<q)break;W.push(be),R.pop()}else for(const he of c){const be=he[ue];if(be)for(const Te of be)W.push(Te.feature)}}return W}queryRenderedFeatures(c,_,k){_&&_.filter&&this._validate(s.validateStyle.filter,"queryRenderedFeatures.filter",_.filter,null,_);const R={};if(_&&_.layers){if(!Array.isArray(_.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const q of _.layers){const ue=this._layers[q];if(!ue)return this.fire(new s.ErrorEvent(new Error(`The layer '${q}' does not exist in the map's style and cannot be queried for features.`))),[];R[ue.source]=!0}}const W=[];_.availableImages=this._availableImages;for(const q in this.sourceCaches)_.layers&&!R[q]||W.push(wr(this.sourceCaches[q],this._layers,this._serializedLayers,c,_,k));return this.placement&&W.push(function(q,ue,he,be,Te,Ue,Ke){const yt={},ut=Ue.queryRenderedSymbols(be),gt=[];for(const zt of Object.keys(ut).map(Number))gt.push(Ke[zt]);gt.sort(tr);for(const zt of gt){const Gt=zt.featureIndex.lookupSymbolFeatures(ut[zt.bucketInstanceId],ue,zt.bucketIndex,zt.sourceLayerIndex,Te.filter,Te.layers,Te.availableImages,q);for(const Jt in Gt){const bt=yt[Jt]=yt[Jt]||[],nr=Gt[Jt];nr.sort((er,mr)=>{const Sr=zt.featureSortOrder;if(Sr){const $r=Sr.indexOf(er.featureIndex);return Sr.indexOf(mr.featureIndex)-$r}return mr.featureIndex-er.featureIndex});for(const er of nr)bt.push(er)}}for(const zt in yt)yt[zt].forEach(Gt=>{const Jt=Gt.feature,bt=he[q[zt].source].getFeatureState(Jt.layer["source-layer"],Jt.id);Jt.source=Jt.layer.source,Jt.layer["source-layer"]&&(Jt.sourceLayer=Jt.layer["source-layer"]),Jt.state=bt});return yt}(this._layers,this._serializedLayers,this.sourceCaches,c,_,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(W)}querySourceFeatures(c,_){_&&_.filter&&this._validate(s.validateStyle.filter,"querySourceFeatures.filter",_.filter,null,_);const k=this.sourceCaches[c];return k?function(R,W){const q=R.getRenderableIds().map(be=>R.getTileByID(be)),ue=[],he={};for(let be=0;be<q.length;be++){const Te=q[be],Ue=Te.tileID.canonical.key;he[Ue]||(he[Ue]=!0,Te.querySourceFeatures(ue,W))}return ue}(k,_):[]}addSourceType(c,_,k){return oo.getSourceType(c)?k(new Error(`A source type called "${c}" already exists.`)):(oo.setSourceType(c,_),_.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:_.workerSourceURL},k):k(null,null))}getLight(){return this.light.getLight()}setLight(c,_={}){this._checkLoaded();const k=this.light.getLight();let R=!1;for(const q in c)if(!A(c[q],k[q])){R=!0;break}if(!R)return;const W={now:s.exported.now(),transition:s.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(c,_),this.light.updateTransitions(W)}_validate(c,_,k,R,W={}){return(!W||W.validate!==!1)&&$n(this,c.call(s.validateStyle,s.extend({key:_,style:this.serialize(),value:k,styleSpec:s.spec},R)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const _=this.sourceCaches[c];_.setEventedParent(null),_.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(c){this.sourceCaches[c].clearTiles()}_reloadSource(c){this.sourceCaches[c].resume(),this.sourceCaches[c].reload()}_updateSources(c){for(const _ in this.sourceCaches)this.sourceCaches[_].update(c,this.terrain)}_generateCollisionBoxes(){for(const c in this.sourceCaches)this._reloadSource(c)}_updatePlacement(c,_,k,R,W=!1){let q=!1,ue=!1;const he={};for(const be of this._order){const Te=this._layers[be];if(Te.type!=="symbol")continue;if(!he[Te.source]){const Ke=this.sourceCaches[Te.source];he[Te.source]=Ke.getRenderableIds(!0).map(yt=>Ke.getTileByID(yt)).sort((yt,ut)=>ut.tileID.overscaledZ-yt.tileID.overscaledZ||(yt.tileID.isLessThan(ut.tileID)?-1:1))}const Ue=this.crossTileSymbolIndex.addLayer(Te,he[Te.source],c.center.lng);q=q||Ue}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((W=W||this._layerOrderChanged||k===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),c.zoom))&&(this.pauseablePlacement=new Vt(c,this.terrain,this._order,W,_,k,R,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,he),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),ue=!0),q&&this.pauseablePlacement.placement.setStale()),ue||q)for(const be of this._order){const Te=this._layers[be];Te.type==="symbol"&&this.placement.updateLayerOpacities(Te,he[Te.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const c in this.sourceCaches)this.sourceCaches[c].releaseSymbolFadeTiles()}getImages(c,_,k){this.imageManager.getImages(_.icons,k),this._updateTilesForChangedImages();const R=this.sourceCaches[_.source];R&&R.setDependencies(_.tileID.key,_.type,_.icons)}getGlyphs(c,_,k){this.glyphManager.getGlyphs(_.stacks,k)}getResource(c,_,k){return s.makeRequest(_,k)}}oo.getSourceType=function(O){return Ye[O]},oo.setSourceType=function(O,c){Ye[O]=c},oo.registerForPluginStateChange=s.registerForPluginStateChange;var Tl="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ya={prelude:Oi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Oi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Oi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Oi(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Oi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Oi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Oi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Oi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Oi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Oi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Oi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Oi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Oi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Oi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Oi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Oi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Oi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Oi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Oi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Oi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Oi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Oi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Oi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Oi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Oi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Oi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Oi("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Tl),terrainDepth:Oi("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Tl),terrainCoords:Oi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Tl)};function Oi(O,c){const _=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,k=c.match(/attribute ([\w]+) ([\w]+)/g),R=O.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),W=c.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),q=W?W.concat(R):R,ue={};return{fragmentSource:O=O.replace(_,(he,be,Te,Ue,Ke)=>(ue[Ke]=!0,be==="define"?`
#ifndef HAS_UNIFORM_u_${Ke}
varying ${Te} ${Ue} ${Ke};
#else
uniform ${Te} ${Ue} u_${Ke};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Ke}
    ${Te} ${Ue} ${Ke} = u_${Ke};
#endif
`)),vertexSource:c=c.replace(_,(he,be,Te,Ue,Ke)=>{const yt=Ue==="float"?"vec2":"vec4",ut=Ke.match(/color/)?"color":yt;return ue[Ke]?be==="define"?`
#ifndef HAS_UNIFORM_u_${Ke}
uniform lowp float u_${Ke}_t;
attribute ${Te} ${yt} a_${Ke};
varying ${Te} ${Ue} ${Ke};
#else
uniform ${Te} ${Ue} u_${Ke};
#endif
`:ut==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ke}
    ${Ke} = a_${Ke};
#else
    ${Te} ${Ue} ${Ke} = u_${Ke};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ke}
    ${Ke} = unpack_mix_${ut}(a_${Ke}, u_${Ke}_t);
#else
    ${Te} ${Ue} ${Ke} = u_${Ke};
#endif
`:be==="define"?`
#ifndef HAS_UNIFORM_u_${Ke}
uniform lowp float u_${Ke}_t;
attribute ${Te} ${yt} a_${Ke};
#else
uniform ${Te} ${Ue} u_${Ke};
#endif
`:ut==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ke}
    ${Te} ${Ue} ${Ke} = a_${Ke};
#else
    ${Te} ${Ue} ${Ke} = u_${Ke};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ke}
    ${Te} ${Ue} ${Ke} = unpack_mix_${ut}(a_${Ke}, u_${Ke}_t);
#else
    ${Te} ${Ue} ${Ke} = u_${Ke};
#endif
`}),staticAttributes:k,staticUniforms:q}}class ku{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(c,_,k,R,W,q,ue,he,be){this.context=c;let Te=this.boundPaintVertexBuffers.length!==R.length;for(let Ue=0;!Te&&Ue<R.length;Ue++)this.boundPaintVertexBuffers[Ue]!==R[Ue]&&(Te=!0);c.extVertexArrayObject&&this.vao&&this.boundProgram===_&&this.boundLayoutVertexBuffer===k&&!Te&&this.boundIndexBuffer===W&&this.boundVertexOffset===q&&this.boundDynamicVertexBuffer===ue&&this.boundDynamicVertexBuffer2===he&&this.boundDynamicVertexBuffer3===be?(c.bindVertexArrayOES.set(this.vao),ue&&ue.bind(),W&&W.dynamicDraw&&W.bind(),he&&he.bind(),be&&be.bind()):this.freshBind(_,k,R,W,q,ue,he,be)}freshBind(c,_,k,R,W,q,ue,he){let be;const Te=c.numAttributes,Ue=this.context,Ke=Ue.gl;if(Ue.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ue.extVertexArrayObject.createVertexArrayOES(),Ue.bindVertexArrayOES.set(this.vao),be=0,this.boundProgram=c,this.boundLayoutVertexBuffer=_,this.boundPaintVertexBuffers=k,this.boundIndexBuffer=R,this.boundVertexOffset=W,this.boundDynamicVertexBuffer=q,this.boundDynamicVertexBuffer2=ue,this.boundDynamicVertexBuffer3=he;else{be=Ue.currentNumAttributes||0;for(let yt=Te;yt<be;yt++)Ke.disableVertexAttribArray(yt)}_.enableAttributes(Ke,c);for(const yt of k)yt.enableAttributes(Ke,c);q&&q.enableAttributes(Ke,c),ue&&ue.enableAttributes(Ke,c),he&&he.enableAttributes(Ke,c),_.bind(),_.setVertexAttribPointers(Ke,c,W);for(const yt of k)yt.bind(),yt.setVertexAttribPointers(Ke,c,W);q&&(q.bind(),q.setVertexAttribPointers(Ke,c,W)),R&&R.bind(),ue&&(ue.bind(),ue.setVertexAttribPointers(Ke,c,W)),he&&(he.bind(),he.setVertexAttribPointers(Ke,c,W)),Ue.currentNumAttributes=Te}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Ys(O){const c=[];for(let _=0;_<O.length;_++){if(O[_]===null)continue;const k=O[_].split(" ");c.push(k.pop())}return c}class co{constructor(c,_,k,R,W,q,ue){const he=c.gl;this.program=he.createProgram();const be=Ys(k.staticAttributes),Te=R?R.getBinderAttributes():[],Ue=be.concat(Te),Ke=Ya.prelude.staticUniforms?Ys(Ya.prelude.staticUniforms):[],yt=k.staticUniforms?Ys(k.staticUniforms):[],ut=R?R.getBinderUniforms():[],gt=Ke.concat(yt).concat(ut),zt=[];for(const Sr of gt)zt.indexOf(Sr)<0&&zt.push(Sr);const Gt=R?R.defines():[];q&&Gt.push("#define OVERDRAW_INSPECTOR;"),ue&&Gt.push("#define TERRAIN3D;");const Jt=Gt.concat(Ya.prelude.fragmentSource,k.fragmentSource).join(`
`),bt=Gt.concat(Ya.prelude.vertexSource,k.vertexSource).join(`
`),nr=he.createShader(he.FRAGMENT_SHADER);if(he.isContextLost())return void(this.failedToCreate=!0);he.shaderSource(nr,Jt),he.compileShader(nr),he.attachShader(this.program,nr);const er=he.createShader(he.VERTEX_SHADER);if(he.isContextLost())return void(this.failedToCreate=!0);he.shaderSource(er,bt),he.compileShader(er),he.attachShader(this.program,er),this.attributes={};const mr={};this.numAttributes=Ue.length;for(let Sr=0;Sr<this.numAttributes;Sr++)Ue[Sr]&&(he.bindAttribLocation(this.program,Sr,Ue[Sr]),this.attributes[Ue[Sr]]=Sr);he.linkProgram(this.program),he.deleteShader(er),he.deleteShader(nr);for(let Sr=0;Sr<zt.length;Sr++){const $r=zt[Sr];if($r&&!mr[$r]){const gr=he.getUniformLocation(this.program,$r);gr&&(mr[$r]=gr)}}this.fixedUniforms=W(c,mr),this.terrainUniforms=((Sr,$r)=>({u_depth:new s.Uniform1i(Sr,$r.u_depth),u_terrain:new s.Uniform1i(Sr,$r.u_terrain),u_terrain_dim:new s.Uniform1f(Sr,$r.u_terrain_dim),u_terrain_matrix:new s.UniformMatrix4f(Sr,$r.u_terrain_matrix),u_terrain_unpack:new s.Uniform4f(Sr,$r.u_terrain_unpack),u_terrain_offset:new s.Uniform1f(Sr,$r.u_terrain_offset),u_terrain_exaggeration:new s.Uniform1f(Sr,$r.u_terrain_exaggeration)}))(c,mr),this.binderUniforms=R?R.getUniforms(c,mr):[]}draw(c,_,k,R,W,q,ue,he,be,Te,Ue,Ke,yt,ut,gt,zt,Gt,Jt){const bt=c.gl;if(this.failedToCreate)return;if(c.program.set(this.program),c.setDepthMode(k),c.setStencilMode(R),c.setColorMode(W),c.setCullFace(q),he){c.activeTexture.set(bt.TEXTURE2),bt.bindTexture(bt.TEXTURE_2D,he.depthTexture),c.activeTexture.set(bt.TEXTURE3),bt.bindTexture(bt.TEXTURE_2D,he.texture);for(const er in this.terrainUniforms)this.terrainUniforms[er].set(he[er])}for(const er in this.fixedUniforms)this.fixedUniforms[er].set(ue[er]);gt&&gt.setUniforms(c,this.binderUniforms,yt,{zoom:ut});let nr=0;switch(_){case bt.LINES:nr=2;break;case bt.TRIANGLES:nr=3;break;case bt.LINE_STRIP:nr=1}for(const er of Ke.get()){const mr=er.vaos||(er.vaos={});(mr[be]||(mr[be]=new ku)).bind(c,this,Te,gt?gt.getPaintVertexBuffers():[],Ue,er.vertexOffset,zt,Gt,Jt),bt.drawElements(_,er.primitiveLength*nr,bt.UNSIGNED_SHORT,er.primitiveOffset*nr*2)}}}function Bs(O,c,_){const k=1/Ae(_,1,c.transform.tileZoom),R=Math.pow(2,_.tileID.overscaledZ),W=_.tileSize*Math.pow(2,c.transform.tileZoom)/R,q=W*(_.tileID.canonical.x+_.tileID.wrap*R),ue=W*_.tileID.canonical.y;return{u_image:0,u_texsize:_.imageAtlasTexture.size,u_scale:[k,O.fromScale,O.toScale],u_fade:O.t,u_pixel_coord_upper:[q>>16,ue>>16],u_pixel_coord_lower:[65535&q,65535&ue]}}const $o=(O,c,_,k)=>{const R=c.style.light,W=R.properties.get("position"),q=[W.x,W.y,W.z],ue=s.create$1();R.properties.get("anchor")==="viewport"&&s.fromRotation(ue,-c.transform.angle),s.transformMat3(q,q,ue);const he=R.properties.get("color");return{u_matrix:O,u_lightpos:q,u_lightintensity:R.properties.get("intensity"),u_lightcolor:[he.r,he.g,he.b],u_vertical_gradient:+_,u_opacity:k}},Pa=(O,c,_,k,R,W,q)=>s.extend($o(O,c,_,k),Bs(W,c,q),{u_height_factor:-Math.pow(2,R.overscaledZ)/q.tileSize/8}),Ro=O=>({u_matrix:O}),mo=(O,c,_,k)=>s.extend(Ro(O),Bs(_,c,k)),Ko=(O,c)=>({u_matrix:O,u_world:c}),Fs=(O,c,_,k,R)=>s.extend(mo(O,c,_,k),{u_world:R}),jf=(O,c,_,k)=>{const R=O.transform;let W,q;if(k.paint.get("circle-pitch-alignment")==="map"){const ue=Ae(_,1,R.zoom);W=!0,q=[ue,ue]}else W=!1,q=R.pixelsToGLUnits;return{u_camera_to_center_distance:R.cameraToCenterDistance,u_scale_with_map:+(k.paint.get("circle-pitch-scale")==="map"),u_matrix:O.translatePosMatrix(c.posMatrix,_,k.paint.get("circle-translate"),k.paint.get("circle-translate-anchor")),u_pitch_with_map:+W,u_device_pixel_ratio:O.pixelRatio,u_extrude_scale:q}},bo=(O,c,_)=>{const k=Ae(_,1,c.zoom),R=Math.pow(2,c.zoom-_.tileID.overscaledZ),W=_.tileID.overscaleFactor();return{u_matrix:O,u_camera_to_center_distance:c.cameraToCenterDistance,u_pixels_to_tile_units:k,u_extrude_scale:[c.pixelsToGLUnits[0]/(k*R),c.pixelsToGLUnits[1]/(k*R)],u_overscale_factor:W}},Al=(O,c,_=1)=>({u_matrix:O,u_color:c,u_overlay:0,u_overlay_scale:_}),No=O=>({u_matrix:O}),Ia=(O,c,_,k)=>({u_matrix:O,u_extrude_scale:Ae(c,1,_),u_intensity:k});function Ga(O,c){const _=Math.pow(2,c.canonical.z),k=c.canonical.y;return[new s.MercatorCoordinate(0,k/_).toLngLat().lat,new s.MercatorCoordinate(0,(k+1)/_).toLngLat().lat]}const Us=(O,c,_,k)=>{const R=O.transform;return{u_matrix:Ru(O,c,_,k),u_ratio:1/Ae(c,1,R.zoom),u_device_pixel_ratio:O.pixelRatio,u_units_to_pixels:[1/R.pixelsToGLUnits[0],1/R.pixelsToGLUnits[1]]}},Iu=(O,c,_,k,R)=>s.extend(Us(O,c,_,R),{u_image:0,u_image_height:k}),Mu=(O,c,_,k,R)=>{const W=O.transform,q=Ma(c,W);return{u_matrix:Ru(O,c,_,R),u_texsize:c.imageAtlasTexture.size,u_ratio:1/Ae(c,1,W.zoom),u_device_pixel_ratio:O.pixelRatio,u_image:0,u_scale:[q,k.fromScale,k.toScale],u_fade:k.t,u_units_to_pixels:[1/W.pixelsToGLUnits[0],1/W.pixelsToGLUnits[1]]}},Ou=(O,c,_,k,R,W)=>{const q=O.lineAtlas,ue=Ma(c,O.transform),he=_.layout.get("line-cap")==="round",be=q.getDash(k.from,he),Te=q.getDash(k.to,he),Ue=be.width*R.fromScale,Ke=Te.width*R.toScale;return s.extend(Us(O,c,_,W),{u_patternscale_a:[ue/Ue,-be.height/2],u_patternscale_b:[ue/Ke,-Te.height/2],u_sdfgamma:q.width/(256*Math.min(Ue,Ke)*O.pixelRatio)/2,u_image:0,u_tex_y_a:be.y,u_tex_y_b:Te.y,u_mix:R.t})};function Ma(O,c){return 1/Ae(O,1,c.tileZoom)}function Ru(O,c,_,k){return O.translatePosMatrix(k?k.posMatrix:c.tileID.posMatrix,c,_.paint.get("line-translate"),_.paint.get("line-translate-anchor"))}const Pc=(O,c,_,k,R)=>{return{u_matrix:O,u_tl_parent:c,u_scale_parent:_,u_buffer_scale:1,u_fade_t:k.mix,u_opacity:k.opacity*R.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:R.paint.get("raster-brightness-min"),u_brightness_high:R.paint.get("raster-brightness-max"),u_saturation_factor:(q=R.paint.get("raster-saturation"),q>0?1-1/(1.001-q):-q),u_contrast_factor:(W=R.paint.get("raster-contrast"),W>0?1/(1-W):1+W),u_spin_weights:Vf(R.paint.get("raster-hue-rotate"))};var W,q};function Vf(O){O*=Math.PI/180;const c=Math.sin(O),_=Math.cos(O);return[(2*_+1)/3,(-Math.sqrt(3)*c-_+1)/3,(Math.sqrt(3)*c-_+1)/3]}const nc=(O,c,_,k,R,W,q,ue,he,be)=>{const Te=R.transform;return{u_is_size_zoom_constant:+(O==="constant"||O==="source"),u_is_size_feature_constant:+(O==="constant"||O==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:Te.cameraToCenterDistance,u_pitch:Te.pitch/360*2*Math.PI,u_rotate_symbol:+_,u_aspect_ratio:Te.width/Te.height,u_fade_change:R.options.fadeDuration?R.symbolFadeChange:1,u_matrix:W,u_label_plane_matrix:q,u_coord_matrix:ue,u_is_text:+he,u_pitch_with_map:+k,u_texsize:be,u_texture:0}},Hl=(O,c,_,k,R,W,q,ue,he,be,Te)=>{const Ue=R.transform;return s.extend(nc(O,c,_,k,R,W,q,ue,he,be),{u_gamma_scale:k?Math.cos(Ue._pitch)*Ue.cameraToCenterDistance:1,u_device_pixel_ratio:R.pixelRatio,u_is_halo:+Te})},ic=(O,c,_,k,R,W,q,ue,he,be)=>s.extend(Hl(O,c,_,k,R,W,q,ue,!0,he,!0),{u_texsize_icon:be,u_texture_icon:1}),cu=(O,c,_)=>({u_matrix:O,u_opacity:c,u_color:_}),ef=(O,c,_,k,R,W)=>s.extend(function(q,ue,he,be){const Te=he.imageManager.getPattern(q.from.toString()),Ue=he.imageManager.getPattern(q.to.toString()),{width:Ke,height:yt}=he.imageManager.getPixelSize(),ut=Math.pow(2,be.tileID.overscaledZ),gt=be.tileSize*Math.pow(2,he.transform.tileZoom)/ut,zt=gt*(be.tileID.canonical.x+be.tileID.wrap*ut),Gt=gt*be.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Te.tl,u_pattern_br_a:Te.br,u_pattern_tl_b:Ue.tl,u_pattern_br_b:Ue.br,u_texsize:[Ke,yt],u_mix:ue.t,u_pattern_size_a:Te.displaySize,u_pattern_size_b:Ue.displaySize,u_scale_a:ue.fromScale,u_scale_b:ue.toScale,u_tile_units_to_pixels:1/Ae(be,1,he.transform.tileZoom),u_pixel_coord_upper:[zt>>16,Gt>>16],u_pixel_coord_lower:[65535&zt,65535&Gt]}}(k,W,_,R),{u_matrix:O,u_opacity:c}),kl={fillExtrusion:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_lightpos:new s.Uniform3f(O,c.u_lightpos),u_lightintensity:new s.Uniform1f(O,c.u_lightintensity),u_lightcolor:new s.Uniform3f(O,c.u_lightcolor),u_vertical_gradient:new s.Uniform1f(O,c.u_vertical_gradient),u_opacity:new s.Uniform1f(O,c.u_opacity)}),fillExtrusionPattern:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_lightpos:new s.Uniform3f(O,c.u_lightpos),u_lightintensity:new s.Uniform1f(O,c.u_lightintensity),u_lightcolor:new s.Uniform3f(O,c.u_lightcolor),u_vertical_gradient:new s.Uniform1f(O,c.u_vertical_gradient),u_height_factor:new s.Uniform1f(O,c.u_height_factor),u_image:new s.Uniform1i(O,c.u_image),u_texsize:new s.Uniform2f(O,c.u_texsize),u_pixel_coord_upper:new s.Uniform2f(O,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(O,c.u_pixel_coord_lower),u_scale:new s.Uniform3f(O,c.u_scale),u_fade:new s.Uniform1f(O,c.u_fade),u_opacity:new s.Uniform1f(O,c.u_opacity)}),fill:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix)}),fillPattern:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_image:new s.Uniform1i(O,c.u_image),u_texsize:new s.Uniform2f(O,c.u_texsize),u_pixel_coord_upper:new s.Uniform2f(O,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(O,c.u_pixel_coord_lower),u_scale:new s.Uniform3f(O,c.u_scale),u_fade:new s.Uniform1f(O,c.u_fade)}),fillOutline:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_world:new s.Uniform2f(O,c.u_world)}),fillOutlinePattern:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_world:new s.Uniform2f(O,c.u_world),u_image:new s.Uniform1i(O,c.u_image),u_texsize:new s.Uniform2f(O,c.u_texsize),u_pixel_coord_upper:new s.Uniform2f(O,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(O,c.u_pixel_coord_lower),u_scale:new s.Uniform3f(O,c.u_scale),u_fade:new s.Uniform1f(O,c.u_fade)}),circle:(O,c)=>({u_camera_to_center_distance:new s.Uniform1f(O,c.u_camera_to_center_distance),u_scale_with_map:new s.Uniform1i(O,c.u_scale_with_map),u_pitch_with_map:new s.Uniform1i(O,c.u_pitch_with_map),u_extrude_scale:new s.Uniform2f(O,c.u_extrude_scale),u_device_pixel_ratio:new s.Uniform1f(O,c.u_device_pixel_ratio),u_matrix:new s.UniformMatrix4f(O,c.u_matrix)}),collisionBox:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_camera_to_center_distance:new s.Uniform1f(O,c.u_camera_to_center_distance),u_pixels_to_tile_units:new s.Uniform1f(O,c.u_pixels_to_tile_units),u_extrude_scale:new s.Uniform2f(O,c.u_extrude_scale),u_overscale_factor:new s.Uniform1f(O,c.u_overscale_factor)}),collisionCircle:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_inv_matrix:new s.UniformMatrix4f(O,c.u_inv_matrix),u_camera_to_center_distance:new s.Uniform1f(O,c.u_camera_to_center_distance),u_viewport_size:new s.Uniform2f(O,c.u_viewport_size)}),debug:(O,c)=>({u_color:new s.UniformColor(O,c.u_color),u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_overlay:new s.Uniform1i(O,c.u_overlay),u_overlay_scale:new s.Uniform1f(O,c.u_overlay_scale)}),clippingMask:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix)}),heatmap:(O,c)=>({u_extrude_scale:new s.Uniform1f(O,c.u_extrude_scale),u_intensity:new s.Uniform1f(O,c.u_intensity),u_matrix:new s.UniformMatrix4f(O,c.u_matrix)}),heatmapTexture:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_world:new s.Uniform2f(O,c.u_world),u_image:new s.Uniform1i(O,c.u_image),u_color_ramp:new s.Uniform1i(O,c.u_color_ramp),u_opacity:new s.Uniform1f(O,c.u_opacity)}),hillshade:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_image:new s.Uniform1i(O,c.u_image),u_latrange:new s.Uniform2f(O,c.u_latrange),u_light:new s.Uniform2f(O,c.u_light),u_shadow:new s.UniformColor(O,c.u_shadow),u_highlight:new s.UniformColor(O,c.u_highlight),u_accent:new s.UniformColor(O,c.u_accent)}),hillshadePrepare:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_image:new s.Uniform1i(O,c.u_image),u_dimension:new s.Uniform2f(O,c.u_dimension),u_zoom:new s.Uniform1f(O,c.u_zoom),u_unpack:new s.Uniform4f(O,c.u_unpack)}),line:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_ratio:new s.Uniform1f(O,c.u_ratio),u_device_pixel_ratio:new s.Uniform1f(O,c.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(O,c.u_units_to_pixels)}),lineGradient:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_ratio:new s.Uniform1f(O,c.u_ratio),u_device_pixel_ratio:new s.Uniform1f(O,c.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(O,c.u_units_to_pixels),u_image:new s.Uniform1i(O,c.u_image),u_image_height:new s.Uniform1f(O,c.u_image_height)}),linePattern:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_texsize:new s.Uniform2f(O,c.u_texsize),u_ratio:new s.Uniform1f(O,c.u_ratio),u_device_pixel_ratio:new s.Uniform1f(O,c.u_device_pixel_ratio),u_image:new s.Uniform1i(O,c.u_image),u_units_to_pixels:new s.Uniform2f(O,c.u_units_to_pixels),u_scale:new s.Uniform3f(O,c.u_scale),u_fade:new s.Uniform1f(O,c.u_fade)}),lineSDF:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_ratio:new s.Uniform1f(O,c.u_ratio),u_device_pixel_ratio:new s.Uniform1f(O,c.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(O,c.u_units_to_pixels),u_patternscale_a:new s.Uniform2f(O,c.u_patternscale_a),u_patternscale_b:new s.Uniform2f(O,c.u_patternscale_b),u_sdfgamma:new s.Uniform1f(O,c.u_sdfgamma),u_image:new s.Uniform1i(O,c.u_image),u_tex_y_a:new s.Uniform1f(O,c.u_tex_y_a),u_tex_y_b:new s.Uniform1f(O,c.u_tex_y_b),u_mix:new s.Uniform1f(O,c.u_mix)}),raster:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_tl_parent:new s.Uniform2f(O,c.u_tl_parent),u_scale_parent:new s.Uniform1f(O,c.u_scale_parent),u_buffer_scale:new s.Uniform1f(O,c.u_buffer_scale),u_fade_t:new s.Uniform1f(O,c.u_fade_t),u_opacity:new s.Uniform1f(O,c.u_opacity),u_image0:new s.Uniform1i(O,c.u_image0),u_image1:new s.Uniform1i(O,c.u_image1),u_brightness_low:new s.Uniform1f(O,c.u_brightness_low),u_brightness_high:new s.Uniform1f(O,c.u_brightness_high),u_saturation_factor:new s.Uniform1f(O,c.u_saturation_factor),u_contrast_factor:new s.Uniform1f(O,c.u_contrast_factor),u_spin_weights:new s.Uniform3f(O,c.u_spin_weights)}),symbolIcon:(O,c)=>({u_is_size_zoom_constant:new s.Uniform1i(O,c.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(O,c.u_is_size_feature_constant),u_size_t:new s.Uniform1f(O,c.u_size_t),u_size:new s.Uniform1f(O,c.u_size),u_camera_to_center_distance:new s.Uniform1f(O,c.u_camera_to_center_distance),u_pitch:new s.Uniform1f(O,c.u_pitch),u_rotate_symbol:new s.Uniform1i(O,c.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(O,c.u_aspect_ratio),u_fade_change:new s.Uniform1f(O,c.u_fade_change),u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(O,c.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(O,c.u_coord_matrix),u_is_text:new s.Uniform1i(O,c.u_is_text),u_pitch_with_map:new s.Uniform1i(O,c.u_pitch_with_map),u_texsize:new s.Uniform2f(O,c.u_texsize),u_texture:new s.Uniform1i(O,c.u_texture)}),symbolSDF:(O,c)=>({u_is_size_zoom_constant:new s.Uniform1i(O,c.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(O,c.u_is_size_feature_constant),u_size_t:new s.Uniform1f(O,c.u_size_t),u_size:new s.Uniform1f(O,c.u_size),u_camera_to_center_distance:new s.Uniform1f(O,c.u_camera_to_center_distance),u_pitch:new s.Uniform1f(O,c.u_pitch),u_rotate_symbol:new s.Uniform1i(O,c.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(O,c.u_aspect_ratio),u_fade_change:new s.Uniform1f(O,c.u_fade_change),u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(O,c.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(O,c.u_coord_matrix),u_is_text:new s.Uniform1i(O,c.u_is_text),u_pitch_with_map:new s.Uniform1i(O,c.u_pitch_with_map),u_texsize:new s.Uniform2f(O,c.u_texsize),u_texture:new s.Uniform1i(O,c.u_texture),u_gamma_scale:new s.Uniform1f(O,c.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(O,c.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(O,c.u_is_halo)}),symbolTextAndIcon:(O,c)=>({u_is_size_zoom_constant:new s.Uniform1i(O,c.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(O,c.u_is_size_feature_constant),u_size_t:new s.Uniform1f(O,c.u_size_t),u_size:new s.Uniform1f(O,c.u_size),u_camera_to_center_distance:new s.Uniform1f(O,c.u_camera_to_center_distance),u_pitch:new s.Uniform1f(O,c.u_pitch),u_rotate_symbol:new s.Uniform1i(O,c.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(O,c.u_aspect_ratio),u_fade_change:new s.Uniform1f(O,c.u_fade_change),u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(O,c.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(O,c.u_coord_matrix),u_is_text:new s.Uniform1i(O,c.u_is_text),u_pitch_with_map:new s.Uniform1i(O,c.u_pitch_with_map),u_texsize:new s.Uniform2f(O,c.u_texsize),u_texsize_icon:new s.Uniform2f(O,c.u_texsize_icon),u_texture:new s.Uniform1i(O,c.u_texture),u_texture_icon:new s.Uniform1i(O,c.u_texture_icon),u_gamma_scale:new s.Uniform1f(O,c.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(O,c.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(O,c.u_is_halo)}),background:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_opacity:new s.Uniform1f(O,c.u_opacity),u_color:new s.UniformColor(O,c.u_color)}),backgroundPattern:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_opacity:new s.Uniform1f(O,c.u_opacity),u_image:new s.Uniform1i(O,c.u_image),u_pattern_tl_a:new s.Uniform2f(O,c.u_pattern_tl_a),u_pattern_br_a:new s.Uniform2f(O,c.u_pattern_br_a),u_pattern_tl_b:new s.Uniform2f(O,c.u_pattern_tl_b),u_pattern_br_b:new s.Uniform2f(O,c.u_pattern_br_b),u_texsize:new s.Uniform2f(O,c.u_texsize),u_mix:new s.Uniform1f(O,c.u_mix),u_pattern_size_a:new s.Uniform2f(O,c.u_pattern_size_a),u_pattern_size_b:new s.Uniform2f(O,c.u_pattern_size_b),u_scale_a:new s.Uniform1f(O,c.u_scale_a),u_scale_b:new s.Uniform1f(O,c.u_scale_b),u_pixel_coord_upper:new s.Uniform2f(O,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(O,c.u_pixel_coord_lower),u_tile_units_to_pixels:new s.Uniform1f(O,c.u_tile_units_to_pixels)}),terrain:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_texture:new s.Uniform1i(O,c.u_texture)}),terrainDepth:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix)}),terrainCoords:(O,c)=>({u_matrix:new s.UniformMatrix4f(O,c.u_matrix),u_texture:new s.Uniform1i(O,c.u_texture),u_terrain_coords_id:new s.Uniform1f(O,c.u_terrain_coords_id)})};class Il{constructor(c,_,k){this.context=c;const R=c.gl;this.buffer=R.createBuffer(),this.dynamicDraw=!!k,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),R.bufferData(R.ELEMENT_ARRAY_BUFFER,_.arrayBuffer,this.dynamicDraw?R.DYNAMIC_DRAW:R.STATIC_DRAW),this.dynamicDraw||delete _.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){const _=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),_.bufferSubData(_.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const xo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ol{constructor(c,_,k,R){this.length=_.length,this.attributes=k,this.itemSize=_.bytesPerElement,this.dynamicDraw=R,this.context=c;const W=c.gl;this.buffer=W.createBuffer(),c.bindVertexBuffer.set(this.buffer),W.bufferData(W.ARRAY_BUFFER,_.arrayBuffer,this.dynamicDraw?W.DYNAMIC_DRAW:W.STATIC_DRAW),this.dynamicDraw||delete _.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){if(c.length!==this.length)throw new Error(`Length of new data is ${c.length}, which doesn't match current length of ${this.length}`);const _=this.context.gl;this.bind(),_.bufferSubData(_.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,_){for(let k=0;k<this.attributes.length;k++){const R=_.attributes[this.attributes[k].name];R!==void 0&&c.enableVertexAttribArray(R)}}setVertexAttribPointers(c,_,k){for(let R=0;R<this.attributes.length;R++){const W=this.attributes[R],q=_.attributes[W.name];q!==void 0&&c.vertexAttribPointer(q,W.components,c[xo[W.type]],!1,this.itemSize,W.offset+this.itemSize*(k||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class $i{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ac extends $i{getDefault(){return s.Color.transparent}set(c){const _=this.current;(c.r!==_.r||c.g!==_.g||c.b!==_.b||c.a!==_.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class sl extends $i{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class ra extends $i{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class Ji extends $i{getDefault(){return[!0,!0,!0,!0]}set(c){const _=this.current;(c[0]!==_[0]||c[1]!==_[1]||c[2]!==_[2]||c[3]!==_[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class js extends $i{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class aa extends $i{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class Du extends $i{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const _=this.current;(c.func!==_.func||c.ref!==_.ref||c.mask!==_.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class oc extends $i{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const _=this.current;(c[0]!==_[0]||c[1]!==_[1]||c[2]!==_[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class Tc extends $i{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;c?_.enable(_.STENCIL_TEST):_.disable(_.STENCIL_TEST),this.current=c,this.dirty=!1}}class tf extends $i{getDefault(){return[0,1]}set(c){const _=this.current;(c[0]!==_[0]||c[1]!==_[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class Wl extends $i{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;c?_.enable(_.DEPTH_TEST):_.disable(_.DEPTH_TEST),this.current=c,this.dirty=!1}}class oe extends $i{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class ze extends $i{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;c?_.enable(_.BLEND):_.disable(_.BLEND),this.current=c,this.dirty=!1}}class We extends $i{getDefault(){const c=this.gl;return[c.ONE,c.ZERO]}set(c){const _=this.current;(c[0]!==_[0]||c[1]!==_[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)}}class tt extends $i{getDefault(){return s.Color.transparent}set(c){const _=this.current;(c.r!==_.r||c.g!==_.g||c.b!==_.b||c.a!==_.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class Ot extends $i{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)}}class _t extends $i{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;c?_.enable(_.CULL_FACE):_.disable(_.CULL_FACE),this.current=c,this.dirty=!1}}class Tt extends $i{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class xr extends $i{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}class Er extends $i{getDefault(){return null}set(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)}}class _r extends $i{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class on extends $i{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const _=this.current;(c[0]!==_[0]||c[1]!==_[1]||c[2]!==_[2]||c[3]!==_[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Gr extends $i{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class Kr extends $i{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;_.bindRenderbuffer(_.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Cr extends $i{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;_.bindTexture(_.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class Wr extends $i{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;_.bindBuffer(_.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Yr extends $i{getDefault(){return null}set(c){const _=this.gl;_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class bn extends $i{constructor(c){super(c),this.vao=c.extVertexArrayObject}getDefault(){return null}set(c){this.vao&&(c!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(c),this.current=c,this.dirty=!1)}}class On extends $i{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class ei extends $i{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class jn extends $i{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class Or extends $i{constructor(c,_){super(c),this.context=c,this.parent=_}getDefault(){return null}}class yn extends Or{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const _=this.gl;_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class Cn extends Or{set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const _=this.gl;_.framebufferRenderbuffer(_.FRAMEBUFFER,_.DEPTH_ATTACHMENT,_.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class ri{constructor(c,_,k,R){this.context=c,this.width=_,this.height=k;const W=c.gl,q=this.framebuffer=W.createFramebuffer();if(this.colorAttachment=new yn(c,q),R&&(this.depthAttachment=new Cn(c,q)),W.checkFramebufferStatus(W.FRAMEBUFFER)!==W.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const c=this.context.gl,_=this.colorAttachment.get();if(_&&c.deleteTexture(_),this.depthAttachment){const k=this.depthAttachment.get();k&&c.deleteRenderbuffer(k)}c.deleteFramebuffer(this.framebuffer)}}class Gn{constructor(c,_,k){this.blendFunction=c,this.blendColor=_,this.mask=k}}Gn.Replace=[1,0],Gn.disabled=new Gn(Gn.Replace,s.Color.transparent,[!1,!1,!1,!1]),Gn.unblended=new Gn(Gn.Replace,s.Color.transparent,[!0,!0,!0,!0]),Gn.alphaBlended=new Gn([1,771],s.Color.transparent,[!0,!0,!0,!0]);class ni{constructor(c){this.gl=c,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ac(this),this.clearDepth=new sl(this),this.clearStencil=new ra(this),this.colorMask=new Ji(this),this.depthMask=new js(this),this.stencilMask=new aa(this),this.stencilFunc=new Du(this),this.stencilOp=new oc(this),this.stencilTest=new Tc(this),this.depthRange=new tf(this),this.depthTest=new Wl(this),this.depthFunc=new oe(this),this.blend=new ze(this),this.blendFunc=new We(this),this.blendColor=new tt(this),this.blendEquation=new Ot(this),this.cullFace=new _t(this),this.cullFaceSide=new Tt(this),this.frontFace=new xr(this),this.program=new Er(this),this.activeTexture=new _r(this),this.viewport=new on(this),this.bindFramebuffer=new Gr(this),this.bindRenderbuffer=new Kr(this),this.bindTexture=new Cr(this),this.bindVertexBuffer=new Wr(this),this.bindElementBuffer=new Yr(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new bn(this),this.pixelStoreUnpack=new On(this),this.pixelStoreUnpackPremultiplyAlpha=new ei(this),this.pixelStoreUnpackFlipY=new jn(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=c.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(c.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=c.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=c.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,_){return new Il(this,c,_)}createVertexBuffer(c,_,k){return new ol(this,c,_,k)}createRenderbuffer(c,_,k){const R=this.gl,W=R.createRenderbuffer();return this.bindRenderbuffer.set(W),R.renderbufferStorage(R.RENDERBUFFER,c,_,k),this.bindRenderbuffer.set(null),W}createFramebuffer(c,_,k){return new ri(this,c,_,k)}clear({color:c,depth:_}){const k=this.gl;let R=0;c&&(R|=k.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),_!==void 0&&(R|=k.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(_),this.depthMask.set(!0)),k.clear(R)}setCullFace(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){A(c.blendFunction,Gn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class sn{constructor(c,_,k){this.func=c,this.mask=_,this.range=k}}sn.ReadOnly=!1,sn.ReadWrite=!0,sn.disabled=new sn(519,sn.ReadOnly,[0,1]);const Vn=7680;class vn{constructor(c,_,k,R,W,q){this.test=c,this.ref=_,this.mask=k,this.fail=R,this.depthFail=W,this.pass=q}}vn.disabled=new vn({func:519,mask:0},0,0,Vn,Vn,Vn);class Un{constructor(c,_,k){this.enable=c,this.mode=_,this.frontFace=k}}let Ti;function Hi(O,c,_,k,R,W,q){const ue=O.context,he=ue.gl,be=O.useProgram("collisionBox"),Te=[];let Ue=0,Ke=0;for(let bt=0;bt<k.length;bt++){const nr=k[bt],er=c.getTile(nr),mr=er.getBucket(_);if(!mr)continue;let Sr=nr.posMatrix;R[0]===0&&R[1]===0||(Sr=O.translatePosMatrix(nr.posMatrix,er,R,W));const $r=q?mr.textCollisionBox:mr.iconCollisionBox,gr=mr.collisionCircleArray;if(gr.length>0){const cn=s.create(),g=Sr;s.mul(cn,mr.placementInvProjMatrix,O.transform.glCoordMatrix),s.mul(cn,cn,mr.placementViewportMatrix),Te.push({circleArray:gr,circleOffset:Ke,transform:g,invTransform:cn,coord:nr}),Ue+=gr.length/4,Ke=Ue}$r&&be.draw(ue,he.LINES,sn.disabled,vn.disabled,O.colorModeForRenderPass(),Un.disabled,bo(Sr,O.transform,er),O.style.terrain&&O.style.terrain.getTerrainData(nr),_.id,$r.layoutVertexBuffer,$r.indexBuffer,$r.segments,null,O.transform.zoom,null,null,$r.collisionVertexBuffer)}if(!q||!Te.length)return;const yt=O.useProgram("collisionCircle"),ut=new s.CollisionCircleLayoutArray;ut.resize(4*Ue),ut._trim();let gt=0;for(const bt of Te)for(let nr=0;nr<bt.circleArray.length/4;nr++){const er=4*nr,mr=bt.circleArray[er+0],Sr=bt.circleArray[er+1],$r=bt.circleArray[er+2],gr=bt.circleArray[er+3];ut.emplace(gt++,mr,Sr,$r,gr,0),ut.emplace(gt++,mr,Sr,$r,gr,1),ut.emplace(gt++,mr,Sr,$r,gr,2),ut.emplace(gt++,mr,Sr,$r,gr,3)}(!Ti||Ti.length<2*Ue)&&(Ti=function(bt){const nr=2*bt,er=new s.QuadTriangleArray;er.resize(nr),er._trim();for(let mr=0;mr<nr;mr++){const Sr=6*mr;er.uint16[Sr+0]=4*mr+0,er.uint16[Sr+1]=4*mr+1,er.uint16[Sr+2]=4*mr+2,er.uint16[Sr+3]=4*mr+2,er.uint16[Sr+4]=4*mr+3,er.uint16[Sr+5]=4*mr+0}return er}(Ue));const zt=ue.createIndexBuffer(Ti,!0),Gt=ue.createVertexBuffer(ut,s.collisionCircleLayout.members,!0);for(const bt of Te){const nr={u_matrix:bt.transform,u_inv_matrix:bt.invTransform,u_camera_to_center_distance:(Jt=O.transform).cameraToCenterDistance,u_viewport_size:[Jt.width,Jt.height]};yt.draw(ue,he.TRIANGLES,sn.disabled,vn.disabled,O.colorModeForRenderPass(),Un.disabled,nr,O.style.terrain&&O.style.terrain.getTerrainData(bt.coord),_.id,Gt,zt,s.SegmentVector.simpleSegment(0,2*bt.circleOffset,bt.circleArray.length,bt.circleArray.length/2),null,O.transform.zoom,null,null,null)}var Jt;Gt.destroy(),zt.destroy()}Un.disabled=new Un(!1,1029,2305),Un.backCCW=new Un(!0,1029,2305);const Yn=s.identity(new Float32Array(16));function Fi(O,c,_,k,R,W){const{horizontalAlign:q,verticalAlign:ue}=s.getAnchorAlignment(O),he=-(q-.5)*c,be=-(ue-.5)*_,Te=s.evaluateVariableOffset(O,k);return new s.pointGeometry((he/R+Te[0])*W,(be/R+Te[1])*W)}function xa(O,c,_,k,R,W,q,ue,he,be,Te){const Ue=O.text.placedSymbolArray,Ke=O.text.dynamicLayoutVertexArray,yt=O.icon.dynamicLayoutVertexArray,ut={};Ke.clear();for(let gt=0;gt<Ue.length;gt++){const zt=Ue.get(gt),Gt=O.allowVerticalPlacement&&!zt.placedOrientation,Jt=zt.hidden||!zt.crossTileID||Gt?null:k[zt.crossTileID];if(Jt){const bt=new s.pointGeometry(zt.anchorX,zt.anchorY),nr=lr(bt,_?q:W,Te),er=Qr(R.cameraToCenterDistance,nr.signedDistanceFromCamera);let mr=s.evaluateSizeForFeature(O.textSizeData,he,zt)*er/s.ONE_EM;_&&(mr*=O.tilePixelRatio/ue);const{width:Sr,height:$r,anchor:gr,textOffset:cn,textBoxScale:g}=Jt,b=Fi(gr,Sr,$r,cn,g,mr),y=_?lr(bt.add(b),W,Te).point:nr.point.add(c?b.rotate(-R.angle):b),C=O.allowVerticalPlacement&&zt.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let U=0;U<zt.numGlyphs;U++)s.addDynamicAttributes(Ke,y,C);be&&zt.associatedIconIndex>=0&&(ut[zt.associatedIconIndex]={shiftedAnchor:y,angle:C})}else Hr(zt.numGlyphs,Ke)}if(be){yt.clear();const gt=O.icon.placedSymbolArray;for(let zt=0;zt<gt.length;zt++){const Gt=gt.get(zt);if(Gt.hidden)Hr(Gt.numGlyphs,yt);else{const Jt=ut[zt];if(Jt)for(let bt=0;bt<Gt.numGlyphs;bt++)s.addDynamicAttributes(yt,Jt.shiftedAnchor,Jt.angle);else Hr(Gt.numGlyphs,yt)}}O.icon.dynamicLayoutVertexBuffer.updateData(yt)}O.text.dynamicLayoutVertexBuffer.updateData(Ke)}function wo(O,c,_){return _.iconsInText&&c?"symbolTextAndIcon":O?"symbolSDF":"symbolIcon"}function Wn(O,c,_,k,R,W,q,ue,he,be,Te,Ue){const Ke=O.context,yt=Ke.gl,ut=O.transform,gt=ue==="map",zt=he==="map",Gt=ue!=="viewport"&&_.layout.get("symbol-placement")!=="point",Jt=gt&&!zt&&!Gt,bt=!_.layout.get("symbol-sort-key").isConstant();let nr=!1;const er=O.depthModeForSublayer(0,sn.ReadOnly),mr=_.layout.get("text-variable-anchor"),Sr=[];for(const $r of k){const gr=c.getTile($r),cn=gr.getBucket(_);if(!cn)continue;const g=R?cn.text:cn.icon;if(!g||!g.segments.get().length)continue;const b=g.programConfigurations.get(_.id),y=R||cn.sdfIcons,C=R?cn.textSizeData:cn.iconSizeData,U=zt||ut.pitch!==0,Y=O.useProgram(wo(y,R,cn),b),ee=s.evaluateSizeForZoom(C,ut.zoom),se=O.style.terrain&&O.style.terrain.getTerrainData($r);let ve,Oe,He,Qe,Ze=[0,0],mt=null;if(R){if(Oe=gr.glyphAtlasTexture,He=yt.LINEAR,ve=gr.glyphAtlasTexture.size,cn.iconsInText){Ze=gr.imageAtlasTexture.size,mt=gr.imageAtlasTexture;const Mr=C.kind==="composite"||C.kind==="camera";Qe=U||O.options.rotating||O.options.zooming||Mr?yt.LINEAR:yt.NEAREST}}else{const Mr=_.layout.get("icon-size").constantOr(0)!==1||cn.iconsNeedLinear;Oe=gr.imageAtlasTexture,He=y||O.options.rotating||O.options.zooming||Mr||U?yt.LINEAR:yt.NEAREST,ve=gr.imageAtlasTexture.size}const ft=Ae(gr,1,O.transform.zoom),xt=Xt($r.posMatrix,zt,gt,O.transform,ft),st=Yt($r.posMatrix,zt,gt,O.transform,ft),wt=mr&&cn.hasTextData(),Lt=_.layout.get("icon-text-fit")!=="none"&&wt&&cn.hasIconData();if(Gt){const Mr=O.style.terrain?(Sn,Ln)=>O.style.terrain.getElevation($r,Sn,Ln):null,tn=_.layout.get("text-rotation-alignment")==="map";En(cn,$r.posMatrix,O,R,xt,st,zt,be,tn,Mr)}const Nt=O.translatePosMatrix($r.posMatrix,gr,W,q),qt=Gt||R&&mr||Lt?Yn:xt,Ht=O.translatePosMatrix(st,gr,W,q,!0),or=y&&_.paint.get(R?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let vr;vr=y?cn.iconsInText?ic(C.kind,ee,Jt,zt,O,Nt,qt,Ht,ve,Ze):Hl(C.kind,ee,Jt,zt,O,Nt,qt,Ht,R,ve,!0):nc(C.kind,ee,Jt,zt,O,Nt,qt,Ht,R,ve);const Pr={program:Y,buffers:g,uniformValues:vr,atlasTexture:Oe,atlasTextureIcon:mt,atlasInterpolation:He,atlasInterpolationIcon:Qe,isSDF:y,hasHalo:or};if(bt&&cn.canOverlap){nr=!0;const Mr=g.segments.get();for(const tn of Mr)Sr.push({segments:new s.SegmentVector([tn]),sortKey:tn.sortKey,state:Pr,terrainData:se})}else Sr.push({segments:g.segments,sortKey:0,state:Pr,terrainData:se})}nr&&Sr.sort(($r,gr)=>$r.sortKey-gr.sortKey);for(const $r of Sr){const gr=$r.state;if(Ke.activeTexture.set(yt.TEXTURE0),gr.atlasTexture.bind(gr.atlasInterpolation,yt.CLAMP_TO_EDGE),gr.atlasTextureIcon&&(Ke.activeTexture.set(yt.TEXTURE1),gr.atlasTextureIcon&&gr.atlasTextureIcon.bind(gr.atlasInterpolationIcon,yt.CLAMP_TO_EDGE)),gr.isSDF){const cn=gr.uniformValues;gr.hasHalo&&(cn.u_is_halo=1,sa(gr.buffers,$r.segments,_,O,gr.program,er,Te,Ue,cn,$r.terrainData)),cn.u_is_halo=0}sa(gr.buffers,$r.segments,_,O,gr.program,er,Te,Ue,gr.uniformValues,$r.terrainData)}}function sa(O,c,_,k,R,W,q,ue,he,be){const Te=k.context;R.draw(Te,Te.gl.TRIANGLES,W,q,ue,Un.disabled,he,be,_.id,O.layoutVertexBuffer,O.indexBuffer,c,_.paint,k.transform.zoom,O.programConfigurations.get(_.id),O.dynamicLayoutVertexBuffer,O.opacityVertexBuffer)}function Na(O,c,_,k,R,W,q){const ue=O.context.gl,he=_.paint.get("fill-pattern"),be=he&&he.constantOr(1),Te=_.getCrossfadeParameters();let Ue,Ke,yt,ut,gt;q?(Ke=be&&!_.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ue=ue.LINES):(Ke=be?"fillPattern":"fill",Ue=ue.TRIANGLES);for(const zt of k){const Gt=c.getTile(zt);if(be&&!Gt.patternsLoaded())continue;const Jt=Gt.getBucket(_);if(!Jt)continue;const bt=Jt.programConfigurations.get(_.id),nr=O.useProgram(Ke,bt),er=O.style.terrain&&O.style.terrain.getTerrainData(zt);be&&(O.context.activeTexture.set(ue.TEXTURE0),Gt.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),bt.updatePaintBuffers(Te));const mr=he.constantOr(null);if(mr&&Gt.imageAtlas){const gr=Gt.imageAtlas,cn=gr.patternPositions[mr.to.toString()],g=gr.patternPositions[mr.from.toString()];cn&&g&&bt.setConstantPatternPositions(cn,g)}const Sr=er?zt:null,$r=O.translatePosMatrix(Sr?Sr.posMatrix:zt.posMatrix,Gt,_.paint.get("fill-translate"),_.paint.get("fill-translate-anchor"));if(q){ut=Jt.indexBuffer2,gt=Jt.segments2;const gr=[ue.drawingBufferWidth,ue.drawingBufferHeight];yt=Ke==="fillOutlinePattern"&&be?Fs($r,O,Te,Gt,gr):Ko($r,gr)}else ut=Jt.indexBuffer,gt=Jt.segments,yt=be?mo($r,O,Te,Gt):Ro($r);nr.draw(O.context,Ue,R,O.stencilModeForClipping(zt),W,Un.disabled,yt,er,_.id,Jt.layoutVertexBuffer,ut,gt,_.paint,O.transform.zoom,bt)}}function eo(O,c,_,k,R,W,q){const ue=O.context,he=ue.gl,be=_.paint.get("fill-extrusion-pattern"),Te=be.constantOr(1),Ue=_.getCrossfadeParameters(),Ke=_.paint.get("fill-extrusion-opacity");for(const yt of k){const ut=c.getTile(yt),gt=ut.getBucket(_);if(!gt)continue;const zt=O.style.terrain&&O.style.terrain.getTerrainData(yt),Gt=gt.programConfigurations.get(_.id),Jt=O.useProgram(Te?"fillExtrusionPattern":"fillExtrusion",Gt);Te&&(O.context.activeTexture.set(he.TEXTURE0),ut.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),Gt.updatePaintBuffers(Ue));const bt=be.constantOr(null);if(bt&&ut.imageAtlas){const Sr=ut.imageAtlas,$r=Sr.patternPositions[bt.to.toString()],gr=Sr.patternPositions[bt.from.toString()];$r&&gr&&Gt.setConstantPatternPositions($r,gr)}const nr=O.translatePosMatrix(yt.posMatrix,ut,_.paint.get("fill-extrusion-translate"),_.paint.get("fill-extrusion-translate-anchor")),er=_.paint.get("fill-extrusion-vertical-gradient"),mr=Te?Pa(nr,O,er,Ke,yt,Ue,ut):$o(nr,O,er,Ke);Jt.draw(ue,ue.gl.TRIANGLES,R,W,q,Un.backCCW,mr,zt,_.id,gt.layoutVertexBuffer,gt.indexBuffer,gt.segments,_.paint,O.transform.zoom,Gt,O.style.terrain&&gt.centroidVertexBuffer)}}function wi(O,c,_,k,R,W,q){const ue=O.context,he=ue.gl,be=_.fbo;if(!be)return;const Te=O.useProgram("hillshade"),Ue=O.style.terrain&&O.style.terrain.getTerrainData(c);ue.activeTexture.set(he.TEXTURE0),he.bindTexture(he.TEXTURE_2D,be.colorAttachment.get()),Te.draw(ue,he.TRIANGLES,R,W,q,Un.disabled,((Ke,yt,ut,gt)=>{const zt=ut.paint.get("hillshade-shadow-color"),Gt=ut.paint.get("hillshade-highlight-color"),Jt=ut.paint.get("hillshade-accent-color");let bt=ut.paint.get("hillshade-illumination-direction")*(Math.PI/180);ut.paint.get("hillshade-illumination-anchor")==="viewport"&&(bt-=Ke.transform.angle);const nr=!Ke.options.moving;return{u_matrix:gt?gt.posMatrix:Ke.transform.calculatePosMatrix(yt.tileID.toUnwrapped(),nr),u_image:0,u_latrange:Ga(0,yt.tileID),u_light:[ut.paint.get("hillshade-exaggeration"),bt],u_shadow:zt,u_highlight:Gt,u_accent:Jt}})(O,_,k,Ue?c:null),Ue,k.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments)}function Vs(O,c,_,k,R,W){const q=O.context,ue=q.gl,he=c.dem;if(he&&he.data){const be=he.dim,Te=he.stride,Ue=he.getPixels();if(q.activeTexture.set(ue.TEXTURE1),q.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||O.getTileTexture(Te),c.demTexture){const yt=c.demTexture;yt.update(Ue,{premultiply:!1}),yt.bind(ue.NEAREST,ue.CLAMP_TO_EDGE)}else c.demTexture=new K(q,Ue,ue.RGBA,{premultiply:!1}),c.demTexture.bind(ue.NEAREST,ue.CLAMP_TO_EDGE);q.activeTexture.set(ue.TEXTURE0);let Ke=c.fbo;if(!Ke){const yt=new K(q,{width:be,height:be,data:null},ue.RGBA);yt.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),Ke=c.fbo=q.createFramebuffer(be,be,!0),Ke.colorAttachment.set(yt.texture)}q.bindFramebuffer.set(Ke.framebuffer),q.viewport.set([0,0,be,be]),O.useProgram("hillshadePrepare").draw(q,ue.TRIANGLES,k,R,W,Un.disabled,((yt,ut)=>{const gt=ut.stride,zt=s.create();return s.ortho(zt,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(zt,zt,[0,-s.EXTENT,0]),{u_matrix:zt,u_image:1,u_dimension:[gt,gt],u_zoom:yt.overscaledZ,u_unpack:ut.getUnpackVector()}})(c.tileID,he),null,_.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments),c.needsHillshadePrepare=!1}}function ps(O,c,_,k,R,W){const q=k.paint.get("raster-fade-duration");if(!W&&q>0){const ue=s.exported.now(),he=(ue-O.timeAdded)/q,be=c?(ue-c.timeAdded)/q:-1,Te=_.getSource(),Ue=R.coveringZoomLevel({tileSize:Te.tileSize,roundZoom:Te.roundZoom}),Ke=!c||Math.abs(c.tileID.overscaledZ-Ue)>Math.abs(O.tileID.overscaledZ-Ue),yt=Ke&&O.refreshedUponExpiration?1:s.clamp(Ke?he:1-be,0,1);return O.refreshedUponExpiration&&he>=1&&(O.refreshedUponExpiration=!1),c?{opacity:1,mix:1-yt}:{opacity:yt,mix:0}}return{opacity:1,mix:0}}const so=new s.Color(1,0,0,1),rs=new s.Color(0,1,0,1),zu=new s.Color(0,0,1,1),Js=new s.Color(1,0,1,1),Ac=new s.Color(0,1,1,1);function Ts(O,c,_,k){qs(O,0,c+_/2,O.transform.width,_,k)}function Qs(O,c,_,k){qs(O,c-_/2,0,_,O.transform.height,k)}function qs(O,c,_,k,R,W){const q=O.context,ue=q.gl;ue.enable(ue.SCISSOR_TEST),ue.scissor(c*O.pixelRatio,_*O.pixelRatio,k*O.pixelRatio,R*O.pixelRatio),q.clear({color:W}),ue.disable(ue.SCISSOR_TEST)}function Lu(O,c,_){const k=O.context,R=k.gl,W=_.posMatrix,q=O.useProgram("debug"),ue=sn.disabled,he=vn.disabled,be=O.colorModeForRenderPass(),Te="$debug",Ue=O.style.terrain&&O.style.terrain.getTerrainData(_);k.activeTexture.set(R.TEXTURE0),O.emptyTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE);const Ke=c.getTileByID(_.key).latestRawTileData,yt=Math.floor((Ke&&Ke.byteLength||0)/1024),ut=c.getTile(_).tileSize,gt=512/Math.min(ut,512)*(_.overscaledZ/O.transform.zoom)*.5;let zt=_.canonical.toString();_.overscaledZ!==_.canonical.z&&(zt+=` => ${_.overscaledZ}`),function(Gt,Jt){Gt.initDebugOverlayCanvas();const bt=Gt.debugOverlayCanvas,nr=Gt.context.gl,er=Gt.debugOverlayCanvas.getContext("2d");er.clearRect(0,0,bt.width,bt.height),er.shadowColor="white",er.shadowBlur=2,er.lineWidth=1.5,er.strokeStyle="white",er.textBaseline="top",er.font="bold 36px Open Sans, sans-serif",er.fillText(Jt,5,5),er.strokeText(Jt,5,5),Gt.debugOverlayTexture.update(bt),Gt.debugOverlayTexture.bind(nr.LINEAR,nr.CLAMP_TO_EDGE)}(O,`${zt} ${yt}kB`),q.draw(k,R.TRIANGLES,ue,he,Gn.alphaBlended,Un.disabled,Al(W,s.Color.transparent,gt),null,Te,O.debugBuffer,O.quadTriangleIndexBuffer,O.debugSegments),q.draw(k,R.LINE_STRIP,ue,he,be,Un.disabled,Al(W,s.Color.red),Ue,Te,O.debugBuffer,O.tileBorderIndexBuffer,O.debugSegments)}function ll(O,c,_){const k=O.context,R=k.gl,W=O.colorModeForRenderPass(),q=new sn(R.LEQUAL,sn.ReadWrite,O.depthRangeFor3D),ue=O.useProgram("terrain"),he=c.getTerrainMesh(),be=c.getTerrainData(_.tileID);k.bindFramebuffer.set(null),k.viewport.set([0,0,O.width,O.height]),k.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,c.getRTTFramebuffer().colorAttachment.get());const Te=O.transform.calculatePosMatrix(_.tileID.toUnwrapped());ue.draw(k,R.TRIANGLES,q,vn.disabled,W,Un.backCCW,{u_matrix:Te,u_texture:0},be,"terrain",he.vertexBuffer,he.indexBuffer,he.segments)}function Ml(O,c,_,k){const R=O.context,W=_.tileSize*c.qualityFactor;_.textures[k]||(_.textures[k]=O.getTileTexture(W)||new K(R,{width:W,height:W,data:null},R.gl.RGBA),_.textures[k].bind(R.gl.LINEAR,R.gl.CLAMP_TO_EDGE),k===0&&c.sourceCache.renderHistory.unshift(_.tileID.key));const q=c.getRTTFramebuffer();q.colorAttachment.set(_.textures[k].texture),R.bindFramebuffer.set(q.framebuffer),R.viewport.set([0,0,W,W])}class $u{constructor(c){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=c,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=c.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const c=this.painter.style,_=c.terrain;for(const k in c.sourceCaches){this._coordsDescendingInv[k]={};const R=c.sourceCaches[k].getVisibleCoordinates();for(const W of R){const q=_.sourceCache.getTerrainCoords(W);for(const ue in q)this._coordsDescendingInv[k][ue]||(this._coordsDescendingInv[k][ue]=[]),this._coordsDescendingInv[k][ue].push(q[ue])}}for(const k of c._order){const R=c._layers[k],W=R.source;if(this._renderToTexture[R.type]&&!this._coordsDescendingInvStr[W]){this._coordsDescendingInvStr[W]={};for(const q in this._coordsDescendingInv[W])this._coordsDescendingInvStr[W][q]=this._coordsDescendingInv[W][q].map(ue=>ue.key).sort().join()}}return this._renderableTiles.forEach(k=>{for(const R in this._coordsDescendingInvStr){const W=this._coordsDescendingInvStr[R][k.tileID.key];W&&W!==k.textureCoords[R]&&k.clearTextures(this.painter),_.needsRerender(R,k.tileID)&&k.clearTextures(this.painter)}this._rerender[k.tileID.key]=!k.textures.length}),_.clearRerenderCache(),_.sourceCache.removeOutdated(this.painter),this}renderLayer(c){const _=c.type,k=this.painter,R=k.style._order,W=k.currentLayer,q=W+1===R.length;if(this._renderToTexture[_]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=_,this._stacks[this._stacks.length-1].push(R[W]),!q))return!0;if(this._renderToTexture[this._prevType]||_==="hillshade"||this._renderToTexture[_]&&q){this._prevType=_;const ue=this._stacks.length-1,he=this._stacks[ue]||[];for(const be of this._renderableTiles){if(Ml(k,k.style.terrain,be,ue),this._rerender[be.tileID.key]){k.context.clear({color:s.Color.transparent});for(let Te=0;Te<he.length;Te++){const Ue=k.style._layers[he[Te]],Ke=Ue.source?this._coordsDescendingInv[Ue.source][be.tileID.key]:[be.tileID];k._renderTileClippingMasks(Ue,Ke),k.renderLayer(k,k.style.sourceCaches[Ue.source],Ue,Ke),Ue.source&&(be.textureCoords[Ue.source]=this._coordsDescendingInvStr[Ue.source][be.tileID.key])}}ll(k,k.style.terrain,be)}if(_==="hillshade"){this._stacks.push([R[W]]);for(const be of this._renderableTiles){const Te=this._coordsDescendingInv[c.source][be.tileID.key];Ml(k,k.style.terrain,be,this._stacks.length-1),k.context.clear({color:s.Color.transparent}),k._renderTileClippingMasks(c,Te),k.renderLayer(k,k.style.sourceCaches[c.source],c,Te),ll(k,k.style.terrain,be)}return!0}return this._renderToTexture[_]}return!1}}const Ua={symbol:function(O,c,_,k,R){if(O.renderPass!=="translucent")return;const W=vn.disabled,q=O.colorModeForRenderPass();_.layout.get("text-variable-anchor")&&function(ue,he,be,Te,Ue,Ke,yt){const ut=he.transform,gt=Ue==="map",zt=Ke==="map";for(const Gt of ue){const Jt=Te.getTile(Gt),bt=Jt.getBucket(be);if(!bt||!bt.text||!bt.text.segments.get().length)continue;const nr=s.evaluateSizeForZoom(bt.textSizeData,ut.zoom),er=Ae(Jt,1,he.transform.zoom),mr=Xt(Gt.posMatrix,zt,gt,he.transform,er),Sr=be.layout.get("icon-text-fit")!=="none"&&bt.hasIconData();if(nr){const $r=Math.pow(2,ut.zoom-Jt.tileID.overscaledZ);xa(bt,gt,zt,yt,ut,mr,Gt.posMatrix,$r,nr,Sr,he.style.terrain?(gr,cn)=>he.style.terrain.getElevation(Gt,gr,cn):null)}}}(k,O,_,c,_.layout.get("text-rotation-alignment"),_.layout.get("text-pitch-alignment"),R),_.paint.get("icon-opacity").constantOr(1)!==0&&Wn(O,c,_,k,!1,_.paint.get("icon-translate"),_.paint.get("icon-translate-anchor"),_.layout.get("icon-rotation-alignment"),_.layout.get("icon-pitch-alignment"),_.layout.get("icon-keep-upright"),W,q),_.paint.get("text-opacity").constantOr(1)!==0&&Wn(O,c,_,k,!0,_.paint.get("text-translate"),_.paint.get("text-translate-anchor"),_.layout.get("text-rotation-alignment"),_.layout.get("text-pitch-alignment"),_.layout.get("text-keep-upright"),W,q),c.map.showCollisionBoxes&&(Hi(O,c,_,k,_.paint.get("text-translate"),_.paint.get("text-translate-anchor"),!0),Hi(O,c,_,k,_.paint.get("icon-translate"),_.paint.get("icon-translate-anchor"),!1))},circle:function(O,c,_,k){if(O.renderPass!=="translucent")return;const R=_.paint.get("circle-opacity"),W=_.paint.get("circle-stroke-width"),q=_.paint.get("circle-stroke-opacity"),ue=!_.layout.get("circle-sort-key").isConstant();if(R.constantOr(1)===0&&(W.constantOr(1)===0||q.constantOr(1)===0))return;const he=O.context,be=he.gl,Te=O.depthModeForSublayer(0,sn.ReadOnly),Ue=vn.disabled,Ke=O.colorModeForRenderPass(),yt=[];for(let ut=0;ut<k.length;ut++){const gt=k[ut],zt=c.getTile(gt),Gt=zt.getBucket(_);if(!Gt)continue;const Jt=Gt.programConfigurations.get(_.id),bt=O.useProgram("circle",Jt),nr=Gt.layoutVertexBuffer,er=Gt.indexBuffer,mr=O.style.terrain&&O.style.terrain.getTerrainData(gt),Sr={programConfiguration:Jt,program:bt,layoutVertexBuffer:nr,indexBuffer:er,uniformValues:jf(O,gt,zt,_),terrainData:mr};if(ue){const $r=Gt.segments.get();for(const gr of $r)yt.push({segments:new s.SegmentVector([gr]),sortKey:gr.sortKey,state:Sr})}else yt.push({segments:Gt.segments,sortKey:0,state:Sr})}ue&&yt.sort((ut,gt)=>ut.sortKey-gt.sortKey);for(const ut of yt){const{programConfiguration:gt,program:zt,layoutVertexBuffer:Gt,indexBuffer:Jt,uniformValues:bt,terrainData:nr}=ut.state;zt.draw(he,be.TRIANGLES,Te,Ue,Ke,Un.disabled,bt,nr,_.id,Gt,Jt,ut.segments,_.paint,O.transform.zoom,gt)}},heatmap:function(O,c,_,k){if(_.paint.get("heatmap-opacity")!==0)if(O.renderPass==="offscreen"){const R=O.context,W=R.gl,q=vn.disabled,ue=new Gn([W.ONE,W.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(he,be,Te){const Ue=he.gl;he.activeTexture.set(Ue.TEXTURE1),he.viewport.set([0,0,be.width/4,be.height/4]);let Ke=Te.heatmapFbo;if(Ke)Ue.bindTexture(Ue.TEXTURE_2D,Ke.colorAttachment.get()),he.bindFramebuffer.set(Ke.framebuffer);else{const yt=Ue.createTexture();Ue.bindTexture(Ue.TEXTURE_2D,yt),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_WRAP_S,Ue.CLAMP_TO_EDGE),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_WRAP_T,Ue.CLAMP_TO_EDGE),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_MIN_FILTER,Ue.LINEAR),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_MAG_FILTER,Ue.LINEAR),Ke=Te.heatmapFbo=he.createFramebuffer(be.width/4,be.height/4,!1),function(ut,gt,zt,Gt){const Jt=ut.gl;Jt.texImage2D(Jt.TEXTURE_2D,0,Jt.RGBA,gt.width/4,gt.height/4,0,Jt.RGBA,ut.extRenderToTextureHalfFloat?ut.extTextureHalfFloat.HALF_FLOAT_OES:Jt.UNSIGNED_BYTE,null),Gt.colorAttachment.set(zt)}(he,be,yt,Ke)}})(R,O,_),R.clear({color:s.Color.transparent});for(let he=0;he<k.length;he++){const be=k[he];if(c.hasRenderableParent(be))continue;const Te=c.getTile(be),Ue=Te.getBucket(_);if(!Ue)continue;const Ke=Ue.programConfigurations.get(_.id),yt=O.useProgram("heatmap",Ke),{zoom:ut}=O.transform;yt.draw(R,W.TRIANGLES,sn.disabled,q,ue,Un.disabled,Ia(be.posMatrix,Te,ut,_.paint.get("heatmap-intensity")),null,_.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,_.paint,O.transform.zoom,Ke)}R.viewport.set([0,0,O.width,O.height])}else O.renderPass==="translucent"&&(O.context.setColorMode(O.colorModeForRenderPass()),function(R,W){const q=R.context,ue=q.gl,he=W.heatmapFbo;if(!he)return;q.activeTexture.set(ue.TEXTURE0),ue.bindTexture(ue.TEXTURE_2D,he.colorAttachment.get()),q.activeTexture.set(ue.TEXTURE1);let be=W.colorRampTexture;be||(be=W.colorRampTexture=new K(q,W.colorRamp,ue.RGBA)),be.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),R.useProgram("heatmapTexture").draw(q,ue.TRIANGLES,sn.disabled,vn.disabled,R.colorModeForRenderPass(),Un.disabled,((Te,Ue,Ke,yt)=>{const ut=s.create();s.ortho(ut,0,Te.width,Te.height,0,0,1);const gt=Te.context.gl;return{u_matrix:ut,u_world:[gt.drawingBufferWidth,gt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ue.paint.get("heatmap-opacity")}})(R,W),null,W.id,R.viewportBuffer,R.quadTriangleIndexBuffer,R.viewportSegments,W.paint,R.transform.zoom)}(O,_))},line:function(O,c,_,k){if(O.renderPass!=="translucent")return;const R=_.paint.get("line-opacity"),W=_.paint.get("line-width");if(R.constantOr(1)===0||W.constantOr(1)===0)return;const q=O.depthModeForSublayer(0,sn.ReadOnly),ue=O.colorModeForRenderPass(),he=_.paint.get("line-dasharray"),be=_.paint.get("line-pattern"),Te=be.constantOr(1),Ue=_.paint.get("line-gradient"),Ke=_.getCrossfadeParameters(),yt=Te?"linePattern":he?"lineSDF":Ue?"lineGradient":"line",ut=O.context,gt=ut.gl;let zt=!0;for(const Gt of k){const Jt=c.getTile(Gt);if(Te&&!Jt.patternsLoaded())continue;const bt=Jt.getBucket(_);if(!bt)continue;const nr=bt.programConfigurations.get(_.id),er=O.context.program.get(),mr=O.useProgram(yt,nr),Sr=zt||mr.program!==er,$r=O.style.terrain&&O.style.terrain.getTerrainData(Gt),gr=be.constantOr(null);if(gr&&Jt.imageAtlas){const b=Jt.imageAtlas,y=b.patternPositions[gr.to.toString()],C=b.patternPositions[gr.from.toString()];y&&C&&nr.setConstantPatternPositions(y,C)}const cn=$r?Gt:null,g=Te?Mu(O,Jt,_,Ke,cn):he?Ou(O,Jt,_,he,Ke,cn):Ue?Iu(O,Jt,_,bt.lineClipsArray.length,cn):Us(O,Jt,_,cn);if(Te)ut.activeTexture.set(gt.TEXTURE0),Jt.imageAtlasTexture.bind(gt.LINEAR,gt.CLAMP_TO_EDGE),nr.updatePaintBuffers(Ke);else if(he&&(Sr||O.lineAtlas.dirty))ut.activeTexture.set(gt.TEXTURE0),O.lineAtlas.bind(ut);else if(Ue){const b=bt.gradients[_.id];let y=b.texture;if(_.gradientVersion!==b.version){let C=256;if(_.stepInterpolant){const U=c.getSource().maxzoom,Y=Gt.canonical.z===U?Math.ceil(1<<O.transform.maxZoom-Gt.canonical.z):1;C=s.clamp(s.nextPowerOfTwo(bt.maxLineLength/s.EXTENT*1024*Y),256,ut.maxTextureSize)}b.gradient=s.renderColorRamp({expression:_.gradientExpression(),evaluationKey:"lineProgress",resolution:C,image:b.gradient||void 0,clips:bt.lineClipsArray}),b.texture?b.texture.update(b.gradient):b.texture=new K(ut,b.gradient,gt.RGBA),b.version=_.gradientVersion,y=b.texture}ut.activeTexture.set(gt.TEXTURE0),y.bind(_.stepInterpolant?gt.NEAREST:gt.LINEAR,gt.CLAMP_TO_EDGE)}mr.draw(ut,gt.TRIANGLES,q,O.stencilModeForClipping(Gt),ue,Un.disabled,g,$r,_.id,bt.layoutVertexBuffer,bt.indexBuffer,bt.segments,_.paint,O.transform.zoom,nr,bt.layoutVertexBuffer2),zt=!1}},fill:function(O,c,_,k){const R=_.paint.get("fill-color"),W=_.paint.get("fill-opacity");if(W.constantOr(1)===0)return;const q=O.colorModeForRenderPass(),ue=_.paint.get("fill-pattern"),he=O.opaquePassEnabledForLayer()&&!ue.constantOr(1)&&R.constantOr(s.Color.transparent).a===1&&W.constantOr(0)===1?"opaque":"translucent";if(O.renderPass===he){const be=O.depthModeForSublayer(1,O.renderPass==="opaque"?sn.ReadWrite:sn.ReadOnly);Na(O,c,_,k,be,q,!1)}if(O.renderPass==="translucent"&&_.paint.get("fill-antialias")){const be=O.depthModeForSublayer(_.getPaintProperty("fill-outline-color")?2:0,sn.ReadOnly);Na(O,c,_,k,be,q,!0)}},"fill-extrusion":function(O,c,_,k){const R=_.paint.get("fill-extrusion-opacity");if(R!==0&&O.renderPass==="translucent"){const W=new sn(O.context.gl.LEQUAL,sn.ReadWrite,O.depthRangeFor3D);if(R!==1||_.paint.get("fill-extrusion-pattern").constantOr(1))eo(O,c,_,k,W,vn.disabled,Gn.disabled),eo(O,c,_,k,W,O.stencilModeFor3D(),O.colorModeForRenderPass());else{const q=O.colorModeForRenderPass();eo(O,c,_,k,W,vn.disabled,q)}}},hillshade:function(O,c,_,k){if(O.renderPass!=="offscreen"&&O.renderPass!=="translucent")return;const R=O.context,W=O.depthModeForSublayer(0,sn.ReadOnly),q=O.colorModeForRenderPass(),[ue,he]=O.renderPass==="translucent"?O.stencilConfigForOverlap(k):[{},k];for(const be of he){const Te=c.getTile(be);Te.needsHillshadePrepare!==void 0&&Te.needsHillshadePrepare&&O.renderPass==="offscreen"?Vs(O,Te,_,W,vn.disabled,q):O.renderPass==="translucent"&&wi(O,be,Te,_,W,ue[be.overscaledZ],q)}R.viewport.set([0,0,O.width,O.height])},raster:function(O,c,_,k){if(O.renderPass!=="translucent"||_.paint.get("raster-opacity")===0||!k.length)return;const R=O.context,W=R.gl,q=c.getSource(),ue=O.useProgram("raster"),he=O.colorModeForRenderPass(),[be,Te]=q instanceof Zt?[{},k]:O.stencilConfigForOverlap(k),Ue=Te[Te.length-1].overscaledZ,Ke=!O.options.moving;for(const yt of Te){const ut=O.depthModeForSublayer(yt.overscaledZ-Ue,_.paint.get("raster-opacity")===1?sn.ReadWrite:sn.ReadOnly,W.LESS),gt=c.getTile(yt);gt.registerFadeDuration(_.paint.get("raster-fade-duration"));const zt=c.findLoadedParent(yt,0),Gt=ps(gt,zt,c,_,O.transform,O.style.terrain);let Jt,bt;const nr=_.paint.get("raster-resampling")==="nearest"?W.NEAREST:W.LINEAR;R.activeTexture.set(W.TEXTURE0),gt.texture.bind(nr,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),R.activeTexture.set(W.TEXTURE1),zt?(zt.texture.bind(nr,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),Jt=Math.pow(2,zt.tileID.overscaledZ-gt.tileID.overscaledZ),bt=[gt.tileID.canonical.x*Jt%1,gt.tileID.canonical.y*Jt%1]):gt.texture.bind(nr,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST);const er=O.style.terrain&&O.style.terrain.getTerrainData(yt),mr=er?yt:null,Sr=mr?mr.posMatrix:O.transform.calculatePosMatrix(yt.toUnwrapped(),Ke),$r=Pc(Sr,bt||[0,0],Jt||1,Gt,_);q instanceof Zt?ue.draw(R,W.TRIANGLES,ut,vn.disabled,he,Un.disabled,$r,er,_.id,q.boundsBuffer,O.quadTriangleIndexBuffer,q.boundsSegments):ue.draw(R,W.TRIANGLES,ut,be[yt.overscaledZ],he,Un.disabled,$r,er,_.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments)}},background:function(O,c,_,k){const R=_.paint.get("background-color"),W=_.paint.get("background-opacity");if(W===0)return;const q=O.context,ue=q.gl,he=O.transform,be=he.tileSize,Te=_.paint.get("background-pattern");if(O.isPatternMissing(Te))return;const Ue=!Te&&R.a===1&&W===1&&O.opaquePassEnabledForLayer()?"opaque":"translucent";if(O.renderPass!==Ue)return;const Ke=vn.disabled,yt=O.depthModeForSublayer(0,Ue==="opaque"?sn.ReadWrite:sn.ReadOnly),ut=O.colorModeForRenderPass(),gt=O.useProgram(Te?"backgroundPattern":"background"),zt=k||he.coveringTiles({tileSize:be,terrain:O.style.terrain});Te&&(q.activeTexture.set(ue.TEXTURE0),O.imageManager.bind(O.context));const Gt=_.getCrossfadeParameters();for(const Jt of zt){const bt=k?Jt.posMatrix:O.transform.calculatePosMatrix(Jt.toUnwrapped()),nr=Te?ef(bt,W,O,Te,{tileID:Jt,tileSize:be},Gt):cu(bt,W,R),er=O.style.terrain&&O.style.terrain.getTerrainData(Jt);gt.draw(q,ue.TRIANGLES,yt,Ke,ut,Un.disabled,nr,er,_.id,O.tileExtentBuffer,O.quadTriangleIndexBuffer,O.tileExtentSegments)}},debug:function(O,c,_){for(let k=0;k<_.length;k++)Lu(O,c,_[k])},custom:function(O,c,_){const k=O.context,R=_.implementation;if(O.renderPass==="offscreen"){const W=R.prerender;W&&(O.setCustomLayerDefaults(),k.setColorMode(O.colorModeForRenderPass()),W.call(R,k.gl,O.transform.customLayerMatrix()),k.setDirty(),O.setBaseState())}else if(O.renderPass==="translucent"){O.setCustomLayerDefaults(),k.setColorMode(O.colorModeForRenderPass()),k.setStencilMode(vn.disabled);const W=R.renderingMode==="3d"?new sn(O.context.gl.LEQUAL,sn.ReadWrite,O.depthRangeFor3D):O.depthModeForSublayer(0,sn.ReadOnly);k.setDepthMode(W),R.render(k.gl,O.transform.customLayerMatrix()),k.setDirty(),O.setBaseState(),k.bindFramebuffer.set(null)}}};class Zl{constructor(c,_){this.context=new ni(c),this.transform=_,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.create(),renderTime:0},this.setup(),this.numSublayers=cr.maxUnderzooming+cr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new gn,this.gpuTimers={}}resize(c,_,k){if(this.width=c*k,this.height=_*k,this.pixelRatio=k,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const R of this.style._order)this.style._layers[R].resize()}setup(){const c=this.context,_=new s.PosArray;_.emplaceBack(0,0),_.emplaceBack(s.EXTENT,0),_.emplaceBack(0,s.EXTENT),_.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=c.createVertexBuffer(_,An.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const k=new s.PosArray;k.emplaceBack(0,0),k.emplaceBack(s.EXTENT,0),k.emplaceBack(0,s.EXTENT),k.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=c.createVertexBuffer(k,An.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const R=new s.RasterBoundsArray;R.emplaceBack(0,0,0,0),R.emplaceBack(s.EXTENT,0,s.EXTENT,0),R.emplaceBack(0,s.EXTENT,0,s.EXTENT),R.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.rasterBoundsBuffer=c.createVertexBuffer(R,St.members),this.rasterBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const W=new s.PosArray;W.emplaceBack(0,0),W.emplaceBack(1,0),W.emplaceBack(0,1),W.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(W,An.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const q=new s.LineStripIndexArray;q.emplaceBack(0),q.emplaceBack(1),q.emplaceBack(3),q.emplaceBack(2),q.emplaceBack(0),this.tileBorderIndexBuffer=c.createIndexBuffer(q);const ue=new s.TriangleIndexArray;ue.emplaceBack(0,1,2),ue.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(ue),this.emptyTexture=new K(c,{width:1,height:1,data:new Uint8Array([0,0,0,0])},c.gl.RGBA);const he=this.context.gl;this.stencilClearMode=new vn({func:he.ALWAYS,mask:0},0,255,he.ZERO,he.ZERO,he.ZERO)}clearStencil(){const c=this.context,_=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const k=s.create();s.ortho(k,0,this.width,this.height,0,0,1),s.scale(k,k,[_.drawingBufferWidth,_.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(c,_.TRIANGLES,sn.disabled,this.stencilClearMode,Gn.disabled,Un.disabled,No(k),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(c,_){if(this.currentStencilSource===c.source||!c.isTileClipped()||!_||!_.length)return;this.currentStencilSource=c.source;const k=this.context,R=k.gl;this.nextStencilID+_.length>256&&this.clearStencil(),k.setColorMode(Gn.disabled),k.setDepthMode(sn.disabled);const W=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const q of _){const ue=this._tileClippingMaskIDs[q.key]=this.nextStencilID++,he=this.style.terrain&&this.style.terrain.getTerrainData(q);W.draw(k,R.TRIANGLES,sn.disabled,new vn({func:R.ALWAYS,mask:0},ue,255,R.KEEP,R.KEEP,R.REPLACE),Gn.disabled,Un.disabled,No(q.posMatrix),he,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,_=this.context.gl;return new vn({func:_.NOTEQUAL,mask:255},c,255,_.KEEP,_.KEEP,_.REPLACE)}stencilModeForClipping(c){const _=this.context.gl;return new vn({func:_.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,_.KEEP,_.KEEP,_.REPLACE)}stencilConfigForOverlap(c){const _=this.context.gl,k=c.sort((q,ue)=>ue.overscaledZ-q.overscaledZ),R=k[k.length-1].overscaledZ,W=k[0].overscaledZ-R+1;if(W>1){this.currentStencilSource=void 0,this.nextStencilID+W>256&&this.clearStencil();const q={};for(let ue=0;ue<W;ue++)q[ue+R]=new vn({func:_.GEQUAL,mask:255},ue+this.nextStencilID,255,_.KEEP,_.KEEP,_.REPLACE);return this.nextStencilID+=W,[q,k]}return[{[R]:vn.disabled},k]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new Gn([c.CONSTANT_COLOR,c.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Gn.unblended:Gn.alphaBlended}depthModeForSublayer(c,_,k){if(!this.opaquePassEnabledForLayer())return sn.disabled;const R=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new sn(k||this.context.gl.LEQUAL,_,[R,R])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,_){this.style=c,this.options=_,this.lineAtlas=c.lineAtlas,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const k=this.style._order,R=this.style.sourceCaches,W=this.style.terrain&&new $u(this);for(const be in R){const Te=R[be];Te.used&&Te.prepare(this.context)}const q={},ue={},he={};for(const be in R){const Te=R[be];q[be]=Te.getVisibleCoordinates(),ue[be]=q[be].slice().reverse(),he[be]=Te.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let be=0;be<k.length;be++)if(this.style._layers[k[be]].is3D()){this.opaquePassCutoff=be;break}if(W){this.opaquePassCutoff=0;const be=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!s.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||be.length)&&(s.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(Te,Ue){const Ke=Te.context,yt=Ke.gl,ut=Gn.unblended,gt=new sn(yt.LEQUAL,sn.ReadWrite,[0,1]),zt=Ue.getTerrainMesh(),Gt=Ue.sourceCache.getRenderableTiles(),Jt=Te.useProgram("terrainDepth");Ke.bindFramebuffer.set(Ue.getFramebuffer("depth").framebuffer),Ke.viewport.set([0,0,Te.width/devicePixelRatio,Te.height/devicePixelRatio]),Ke.clear({color:s.Color.transparent,depth:1});for(const bt of Gt){const nr=Ue.getTerrainData(bt.tileID),er=Te.transform.calculatePosMatrix(bt.tileID.toUnwrapped());Jt.draw(Ke,yt.TRIANGLES,gt,vn.disabled,ut,Un.backCCW,{u_matrix:er},nr,"terrain",zt.vertexBuffer,zt.indexBuffer,zt.segments)}Ke.bindFramebuffer.set(null),Ke.viewport.set([0,0,Te.width,Te.height])}(this,this.style.terrain),function(Te,Ue){const Ke=Te.context,yt=Ke.gl,ut=Gn.unblended,gt=new sn(yt.LEQUAL,sn.ReadWrite,[0,1]),zt=Ue.getTerrainMesh(),Gt=Ue.getCoordsTexture(),Jt=Ue.sourceCache.getRenderableTiles(),bt=Te.useProgram("terrainCoords");Ke.bindFramebuffer.set(Ue.getFramebuffer("coords").framebuffer),Ke.viewport.set([0,0,Te.width/devicePixelRatio,Te.height/devicePixelRatio]),Ke.clear({color:s.Color.transparent,depth:1}),Ue.coordsIndex=[];for(const nr of Jt){const er=Ue.getTerrainData(nr.tileID);Ke.activeTexture.set(yt.TEXTURE0),yt.bindTexture(yt.TEXTURE_2D,Gt.texture);const mr=Te.transform.calculatePosMatrix(nr.tileID.toUnwrapped());bt.draw(Ke,yt.TRIANGLES,gt,vn.disabled,ut,Un.backCCW,{u_matrix:mr,u_terrain_coords_id:(255-Ue.coordsIndex.length)/255,u_texture:0},er,"terrain",zt.vertexBuffer,zt.indexBuffer,zt.segments),Ue.coordsIndex.push(nr.tileID.key)}Ke.bindFramebuffer.set(null),Ke.viewport.set([0,0,Te.width,Te.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const be of k){const Te=this.style._layers[be];if(!Te.hasOffscreenPass()||Te.isHidden(this.transform.zoom))continue;const Ue=ue[Te.source];(Te.type==="custom"||Ue.length)&&this.renderLayer(this,R[Te.source],Te,Ue)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:_.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=_.showOverdrawInspector,this.depthRangeFor3D=[0,1-(c._order.length+2)*this.numSublayers*this.depthEpsilon],!W)for(this.renderPass="opaque",this.currentLayer=k.length-1;this.currentLayer>=0;this.currentLayer--){const be=this.style._layers[k[this.currentLayer]],Te=R[be.source],Ue=q[be.source];this._renderTileClippingMasks(be,Ue),this.renderLayer(this,Te,be,Ue)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<k.length;this.currentLayer++){const be=this.style._layers[k[this.currentLayer]],Te=R[be.source];if(W&&W.renderLayer(be))continue;const Ue=(be.type==="symbol"?he:ue)[be.source];this._renderTileClippingMasks(be,q[be.source]),this.renderLayer(this,Te,be,Ue)}if(this.options.showTileBoundaries){let be,Te;Object.values(this.style._layers).forEach(Ue=>{Ue.source&&!Ue.isHidden(this.transform.zoom)&&(Ue.source!==(Te&&Te.id)&&(Te=this.style.sourceCaches[Ue.source]),(!be||be.getSource().maxzoom<Te.getSource().maxzoom)&&(be=Te))}),be&&Ua.debug(this,be,be.getVisibleCoordinates())}this.options.showPadding&&function(be){const Te=be.transform.padding;Ts(be,be.transform.height-(Te.top||0),3,so),Ts(be,Te.bottom||0,3,rs),Qs(be,Te.left||0,3,zu),Qs(be,be.transform.width-(Te.right||0),3,Js);const Ue=be.transform.centerPoint;(function(Ke,yt,ut,gt){qs(Ke,yt-1,ut-10,2,20,gt),qs(Ke,yt-10,ut-1,20,2,gt)})(be,Ue.x,be.transform.height-Ue.y,Ac)}(this),this.context.setDefault()}renderLayer(c,_,k,R){k.isHidden(this.transform.zoom)||(k.type==="background"||k.type==="custom"||(R||[]).length)&&(this.id=k.id,this.gpuTimingStart(k),Ua[k.type](c,_,k,R,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(c){if(!this.options.gpuTiming)return;const _=this.context.extTimerQuery;let k=this.gpuTimers[c.id];k||(k=this.gpuTimers[c.id]={calls:0,cpuTime:0,query:_.createQueryEXT()}),k.calls++,_.beginQueryEXT(_.TIME_ELAPSED_EXT,k.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}collectGpuTimers(){const c=this.gpuTimers;return this.gpuTimers={},c}queryGpuTimers(c){const _={};for(const k in c){const R=c[k],W=this.context.extTimerQuery,q=W.getQueryObjectEXT(R.query,W.QUERY_RESULT_EXT)/1e6;W.deleteQueryEXT(R.query),_[k]=q}return _}translatePosMatrix(c,_,k,R,W){if(!k[0]&&!k[1])return c;const q=W?R==="map"?this.transform.angle:0:R==="viewport"?-this.transform.angle:0;if(q){const be=Math.sin(q),Te=Math.cos(q);k=[k[0]*Te-k[1]*be,k[0]*be+k[1]*Te]}const ue=[W?k[0]:Ae(_,k[0],this.transform.zoom),W?k[1]:Ae(_,k[1],this.transform.zoom),0],he=new Float32Array(16);return s.translate(he,c,ue),he}saveTileTexture(c){const _=this._tileTextures[c.size[0]];_?_.push(c):this._tileTextures[c.size[0]]=[c]}getTileTexture(c){const _=this._tileTextures[c];return _&&_.length>0?_.pop():null}isPatternMissing(c){if(!c)return!1;if(!c.from||!c.to)return!0;const _=this.imageManager.getPattern(c.from.toString()),k=this.imageManager.getPattern(c.to.toString());return!_||!k}useProgram(c,_){this.cache=this.cache||{};const k=c+(_?_.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[k]||(this.cache[k]=new co(this.context,c,Ya[c],_,kl[c],this._showOverdrawInspector,this.style.terrain)),this.cache[k]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new K(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Nu{constructor(c,_){this.points=c,this.planes=_}static fromInvProjectionMatrix(c,_,k){const R=Math.pow(2,k),W=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ue=>{const he=1/(ue=s.transformMat4([],ue,c))[3]/_*R;return s.mul$1(ue,ue,[he,he,1/ue[3],he])}),q=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(ue=>{const he=s.sub([],W[ue[0]],W[ue[1]]),be=s.sub([],W[ue[2]],W[ue[1]]),Te=s.normalize([],s.cross([],he,be)),Ue=-s.dot(Te,W[ue[1]]);return Te.concat(Ue)});return new Nu(W,q)}}class Bo{constructor(c,_){this.min=c,this.max=_,this.center=s.scale$1([],s.add([],this.min,this.max),.5)}quadrant(c){const _=[c%2==0,c<2],k=s.clone$2(this.min),R=s.clone$2(this.max);for(let W=0;W<_.length;W++)k[W]=_[W]?this.min[W]:this.center[W],R[W]=_[W]?this.center[W]:this.max[W];return R[2]=this.max[2],new Bo(k,R)}distanceX(c){return Math.max(Math.min(this.max[0],c[0]),this.min[0])-c[0]}distanceY(c){return Math.max(Math.min(this.max[1],c[1]),this.min[1])-c[1]}intersects(c){const _=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let k=!0;for(let R=0;R<c.planes.length;R++){const W=c.planes[R];let q=0;for(let ue=0;ue<_.length;ue++)s.dot$1(W,_[ue])>=0&&q++;if(q===0)return 0;q!==_.length&&(k=!1)}if(k)return 2;for(let R=0;R<3;R++){let W=Number.MAX_VALUE,q=-Number.MAX_VALUE;for(let ue=0;ue<c.points.length;ue++){const he=c.points[ue][R]-this.min[R];W=Math.min(W,he),q=Math.max(q,he)}if(q<0||W>this.max[R]-this.min[R])return 0}return 1}}class la{constructor(c=0,_=0,k=0,R=0){if(isNaN(c)||c<0||isNaN(_)||_<0||isNaN(k)||k<0||isNaN(R)||R<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=_,this.left=k,this.right=R}interpolate(c,_,k){return _.top!=null&&c.top!=null&&(this.top=s.number(c.top,_.top,k)),_.bottom!=null&&c.bottom!=null&&(this.bottom=s.number(c.bottom,_.bottom,k)),_.left!=null&&c.left!=null&&(this.left=s.number(c.left,_.left,k)),_.right!=null&&c.right!=null&&(this.right=s.number(c.right,_.right,k)),this}getCenter(c,_){const k=s.clamp((this.left+c-this.right)/2,0,c),R=s.clamp((this.top+_-this.bottom)/2,0,_);return new s.pointGeometry(k,R)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new la(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class ul{constructor(c,_,k,R,W){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=W===void 0||!!W,this._minZoom=c||0,this._maxZoom=_||22,this._minPitch=k??0,this._maxPitch=R??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new la,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const c=new ul(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return c.tileSize=this.tileSize,c.latRange=this.latRange,c.width=this.width,c.height=this.height,c._center=this._center,c._elevation=this._elevation,c.zoom=this.zoom,c.angle=this.angle,c._fov=this._fov,c._pitch=this._pitch,c._unmodified=this._unmodified,c._edgeInsets=this._edgeInsets.clone(),c._calcMatrices(),c}get minZoom(){return this._minZoom}set minZoom(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))}get maxZoom(){return this._maxZoom}set maxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))}get minPitch(){return this._minPitch}set minPitch(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))}get maxPitch(){return this._maxPitch}set maxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(c){const _=-s.wrap(c,-180,180)*Math.PI/180;var k;this.angle!==_&&(this._unmodified=!1,this.angle=_,this._calcMatrices(),this.rotationMatrix=(k=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(k[1]=0,k[2]=0),k[0]=1,k[3]=1,k),function(R,W,q){var ue=W[0],he=W[1],be=W[2],Te=W[3],Ue=Math.sin(q),Ke=Math.cos(q);R[0]=ue*Ke+be*Ue,R[1]=he*Ke+Te*Ue,R[2]=ue*-Ue+be*Ke,R[3]=he*-Ue+Te*Ke}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(c){const _=s.clamp(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==_&&(this._unmodified=!1,this._pitch=_,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=c/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(c){const _=Math.min(Math.max(c,this.minZoom),this.maxZoom);this._zoom!==_&&(this._unmodified=!1,this._zoom=_,this.scale=this.zoomScale(_),this.tileZoom=Math.floor(_),this.zoomFraction=_-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(c){c!==this._elevation&&(this._elevation=c,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,_,k){this._unmodified=!1,this._edgeInsets.interpolate(c,_,k),this._constrain(),this._calcMatrices()}coveringZoomLevel(c){const _=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,_)}getVisibleUnwrappedCoordinates(c){const _=[new s.UnwrappedTileID(0,c)];if(this._renderWorldCopies){const k=this.pointCoordinate(new s.pointGeometry(0,0)),R=this.pointCoordinate(new s.pointGeometry(this.width,0)),W=this.pointCoordinate(new s.pointGeometry(this.width,this.height)),q=this.pointCoordinate(new s.pointGeometry(0,this.height)),ue=Math.floor(Math.min(k.x,R.x,W.x,q.x)),he=Math.floor(Math.max(k.x,R.x,W.x,q.x)),be=1;for(let Te=ue-be;Te<=he+be;Te++)Te!==0&&_.push(new s.UnwrappedTileID(Te,c))}return _}coveringTiles(c){var _,k;let R=this.coveringZoomLevel(c);const W=R;if(c.minzoom!==void 0&&R<c.minzoom)return[];c.maxzoom!==void 0&&R>c.maxzoom&&(R=c.maxzoom);const q=this.pointCoordinate(this.getCameraPoint()),ue=s.MercatorCoordinate.fromLngLat(this.center),he=Math.pow(2,R),be=[he*q.x,he*q.y,0],Te=[he*ue.x,he*ue.y,0],Ue=Nu.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,R);let Ke=c.minzoom||0;!c.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Ke=R);const yt=c.terrain?2/Math.min(this.tileSize,c.tileSize)*this.tileSize:3,ut=bt=>({aabb:new Bo([bt*he,0,0],[(bt+1)*he,he,0]),zoom:0,x:0,y:0,wrap:bt,fullyVisible:!1}),gt=[],zt=[],Gt=R,Jt=c.reparseOverscaled?W:R;if(this._renderWorldCopies)for(let bt=1;bt<=3;bt++)gt.push(ut(-bt)),gt.push(ut(bt));for(gt.push(ut(0));gt.length>0;){const bt=gt.pop(),nr=bt.x,er=bt.y;let mr=bt.fullyVisible;if(!mr){const b=bt.aabb.intersects(Ue);if(b===0)continue;mr=b===2}const Sr=c.terrain?be:Te,$r=bt.aabb.distanceX(Sr),gr=bt.aabb.distanceY(Sr),cn=Math.max(Math.abs($r),Math.abs(gr)),g=yt+(1<<Gt-bt.zoom)-2;if(bt.zoom===Gt||cn>g&&bt.zoom>=Ke){const b=Gt-bt.zoom,y=be[0]-.5-(nr<<b),C=be[1]-.5-(er<<b);zt.push({tileID:new s.OverscaledTileID(bt.zoom===Gt?Jt:bt.zoom,bt.wrap,bt.zoom,nr,er),distanceSq:s.sqrLen([Te[0]-.5-nr,Te[1]-.5-er]),tileDistanceToCamera:Math.sqrt(y*y+C*C)})}else for(let b=0;b<4;b++){const y=(nr<<1)+b%2,C=(er<<1)+(b>>1),U=bt.zoom+1;let Y=bt.aabb.quadrant(b);if(c.terrain){const ee=new s.OverscaledTileID(U,bt.wrap,U,y,C),se=c.terrain.getMinMaxElevation(ee),ve=(_=se.minElevation)!==null&&_!==void 0?_:this.elevation,Oe=(k=se.maxElevation)!==null&&k!==void 0?k:this.elevation;Y=new Bo([Y.min[0],Y.min[1],ve],[Y.max[0],Y.max[1],Oe])}gt.push({aabb:Y,zoom:U,x:y,y:C,wrap:bt.wrap,fullyVisible:mr})}}return zt.sort((bt,nr)=>bt.distanceSq-nr.distanceSq).map(bt=>bt.tileID)}resize(c,_){this.width=c,this.height=_,this.pixelsToGLUnits=[2/c,-2/_],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(c){return Math.pow(2,c)}scaleZoom(c){return Math.log(c)/Math.LN2}project(c){const _=s.clamp(c.lat,-this.maxValidLatitude,this.maxValidLatitude);return new s.pointGeometry(s.mercatorXfromLng(c.lng)*this.worldSize,s.mercatorYfromLat(_)*this.worldSize)}unproject(c){return new s.MercatorCoordinate(c.x/this.worldSize,c.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(c){this.freezeElevation||(this.elevation=c?this.getElevation(this._center,c):0)}getElevation(c,_){const k=s.MercatorCoordinate.fromLngLat(c),R=(1<<this.tileZoom)*s.EXTENT,W=k.x*R,q=k.y*R,ue=Math.floor(W/s.EXTENT),he=Math.floor(q/s.EXTENT),be=new s.OverscaledTileID(this.tileZoom,0,this.tileZoom,ue,he);return _.getElevation(be,W%s.EXTENT,q%s.EXTENT,s.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(c){const _=this.pointLocation(this.centerPoint,c),k=this.getElevation(_,c);if(!(this.elevation-k))return;const R=this.getCameraPosition(),W=s.MercatorCoordinate.fromLngLat(R.lngLat,R.altitude),q=s.MercatorCoordinate.fromLngLat(_,k),ue=W.x-q.x,he=W.y-q.y,be=W.z-q.z,Te=Math.sqrt(ue*ue+he*he+be*be),Ue=this.scaleZoom(this.cameraToCenterDistance/Te/this.tileSize);this._elevation=k,this._center=_,this.zoom=Ue}setLocationAtPoint(c,_){const k=this.pointCoordinate(_),R=this.pointCoordinate(this.centerPoint),W=this.locationCoordinate(c),q=new s.MercatorCoordinate(W.x-(k.x-R.x),W.y-(k.y-R.y));this.center=this.coordinateLocation(q),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(c,_){return _?this.coordinatePoint(this.locationCoordinate(c),this.getElevation(c,_),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(c))}pointLocation(c,_){return this.coordinateLocation(this.pointCoordinate(c,_))}locationCoordinate(c){return s.MercatorCoordinate.fromLngLat(c)}coordinateLocation(c){return c&&c.toLngLat()}pointCoordinate(c,_){if(_){const Ke=_.pointCoordinate(c);if(Ke!=null)return Ke}const k=[c.x,c.y,0,1],R=[c.x,c.y,1,1];s.transformMat4(k,k,this.pixelMatrixInverse),s.transformMat4(R,R,this.pixelMatrixInverse);const W=k[3],q=R[3],ue=k[1]/W,he=R[1]/q,be=k[2]/W,Te=R[2]/q,Ue=be===Te?0:(0-be)/(Te-be);return new s.MercatorCoordinate(s.number(k[0]/W,R[0]/q,Ue)/this.worldSize,s.number(ue,he,Ue)/this.worldSize)}coordinatePoint(c,_=0,k=this.pixelMatrix){const R=[c.x*this.worldSize,c.y*this.worldSize,_,1];return s.transformMat4(R,R,k),new s.pointGeometry(R[0]/R[3],R[1]/R[3])}getBounds(){const c=Math.max(0,this.height/2-this.getHorizon());return new s.LngLatBounds().extend(this.pointLocation(new s.pointGeometry(0,c))).extend(this.pointLocation(new s.pointGeometry(this.width,c))).extend(this.pointLocation(new s.pointGeometry(this.width,this.height))).extend(this.pointLocation(new s.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new s.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(c){c?(this.lngRange=[c.getWest(),c.getEast()],this.latRange=[c.getSouth(),c.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(c,_=!1){const k=c.key,R=_?this._alignedPosMatrixCache:this._posMatrixCache;if(R[k])return R[k];const W=c.canonical,q=this.worldSize/this.zoomScale(W.z),ue=W.x+Math.pow(2,W.z)*c.wrap,he=s.identity(new Float64Array(16));return s.translate(he,he,[ue*q,W.y*q,0]),s.scale(he,he,[q/s.EXTENT,q/s.EXTENT,1]),s.multiply(he,_?this.alignedProjMatrix:this.projMatrix,he),R[k]=new Float32Array(he),R[k]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let c,_,k,R,W=-90,q=90,ue=-180,he=180;const be=this.size,Te=this._unmodified;if(this.latRange){const yt=this.latRange;W=s.mercatorYfromLat(yt[1])*this.worldSize,q=s.mercatorYfromLat(yt[0])*this.worldSize,c=q-W<be.y?be.y/(q-W):0}if(this.lngRange){const yt=this.lngRange;ue=s.wrap(s.mercatorXfromLng(yt[0])*this.worldSize,0,this.worldSize),he=s.wrap(s.mercatorXfromLng(yt[1])*this.worldSize,0,this.worldSize),he<ue&&(he+=this.worldSize),_=he-ue<be.x?be.x/(he-ue):0}const Ue=this.point,Ke=Math.max(_||0,c||0);if(Ke)return this.center=this.unproject(new s.pointGeometry(_?(he+ue)/2:Ue.x,c?(q+W)/2:Ue.y)),this.zoom+=this.scaleZoom(Ke),this._unmodified=Te,void(this._constraining=!1);if(this.latRange){const yt=Ue.y,ut=be.y/2;yt-ut<W&&(R=W+ut),yt+ut>q&&(R=q-ut)}if(this.lngRange){const yt=(ue+he)/2,ut=s.wrap(Ue.x,yt-this.worldSize/2,yt+this.worldSize/2),gt=be.x/2;ut-gt<ue&&(k=ue+gt),ut+gt>he&&(k=he-gt)}k===void 0&&R===void 0||(this.center=this.unproject(new s.pointGeometry(k!==void 0?k:Ue.x,R!==void 0?R:Ue.y)).wrap()),this._unmodified=Te,this._constraining=!1}_calcMatrices(){if(!this.height)return;const c=this.centerOffset,_=this.point.x,k=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=s.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let R=s.identity(new Float64Array(16));s.scale(R,R,[this.width/2,-this.height/2,1]),s.translate(R,R,[1,-1,0]),this.labelPlaneMatrix=R,R=s.identity(new Float64Array(16)),s.scale(R,R,[1,-1,1]),s.translate(R,R,[-1,-1,0]),s.scale(R,R,[2/this.width,2/this.height,1]),this.glCoordMatrix=R,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const W=Math.PI/2+this._pitch,q=this._fov*(.5+c.y/this.height),ue=Math.sin(q)*this.cameraToSeaLevelDistance/Math.sin(s.clamp(Math.PI-W-q,.01,Math.PI-.01)),he=this.getHorizon(),be=2*Math.atan(he/this.cameraToCenterDistance)*(.5+c.y/(2*he)),Te=Math.sin(be)*this.cameraToSeaLevelDistance/Math.sin(s.clamp(Math.PI-W-be,.01,Math.PI-.01)),Ue=Math.cos(Math.PI/2-this._pitch)*ue+this.cameraToSeaLevelDistance,Ke=Math.cos(Math.PI/2-this._pitch)*Te+this.cameraToSeaLevelDistance,yt=1.01*Math.min(Ue,Ke),ut=this.height/50;R=new Float64Array(16),s.perspective(R,this._fov,this.width/this.height,ut,yt),R[8]=2*-c.x/this.width,R[9]=2*c.y/this.height,s.scale(R,R,[1,-1,1]),s.translate(R,R,[0,0,-this.cameraToCenterDistance]),s.rotateX(R,R,this._pitch),s.rotateZ(R,R,this.angle),s.translate(R,R,[-_,-k,0]),this.mercatorMatrix=s.scale([],R,[this.worldSize,this.worldSize,this.worldSize]),s.scale(R,R,[1,1,this._pixelPerMeter]),this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,R),s.translate(R,R,[0,0,-this.elevation]),this.projMatrix=R,this.invProjMatrix=s.invert([],R),this.pixelMatrix3D=s.multiply(new Float64Array(16),this.labelPlaneMatrix,R);const gt=this.width%2/2,zt=this.height%2/2,Gt=Math.cos(this.angle),Jt=Math.sin(this.angle),bt=_-Math.round(_)+Gt*gt+Jt*zt,nr=k-Math.round(k)+Gt*zt+Jt*gt,er=new Float64Array(R);if(s.translate(er,er,[bt>.5?bt-1:bt,nr>.5?nr-1:nr,0]),this.alignedProjMatrix=er,R=s.invert(new Float64Array(16),this.pixelMatrix),!R)throw new Error("failed to invert matrix");this.pixelMatrixInverse=R,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const c=this.pointCoordinate(new s.pointGeometry(0,0)),_=[c.x*this.worldSize,c.y*this.worldSize,0,1];return s.transformMat4(_,_,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const c=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.pointGeometry(0,c))}getCameraQueryGeometry(c){const _=this.getCameraPoint();if(c.length===1)return[c[0],_];{let k=_.x,R=_.y,W=_.x,q=_.y;for(const ue of c)k=Math.min(k,ue.x),R=Math.min(R,ue.y),W=Math.max(W,ue.x),q=Math.max(q,ue.y);return[new s.pointGeometry(k,R),new s.pointGeometry(W,R),new s.pointGeometry(W,q),new s.pointGeometry(k,q),new s.pointGeometry(k,R)]}}}class Bu{constructor(c){this._hashName=c&&encodeURIComponent(c),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(_,k){let R=!1,W=null;const q=()=>{W=null,R&&(_(),W=setTimeout(q,300),R=!1)};return()=>(R=!0,W||q(),W)}(this._updateHashUnthrottled.bind(this))}addTo(c){return this._map=c,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(c){const _=this._map.getCenter(),k=Math.round(100*this._map.getZoom())/100,R=Math.ceil((k*Math.LN2+Math.log(512/360/.5))/Math.LN10),W=Math.pow(10,R),q=Math.round(_.lng*W)/W,ue=Math.round(_.lat*W)/W,he=this._map.getBearing(),be=this._map.getPitch();let Te="";if(Te+=c?`/${q}/${ue}/${k}`:`${k}/${ue}/${q}`,(he||be)&&(Te+="/"+Math.round(10*he)/10),be&&(Te+=`/${Math.round(be)}`),this._hashName){const Ue=this._hashName;let Ke=!1;const yt=window.location.hash.slice(1).split("&").map(ut=>{const gt=ut.split("=")[0];return gt===Ue?(Ke=!0,`${gt}=${Te}`):ut}).filter(ut=>ut);return Ke||yt.push(`${Ue}=${Te}`),`#${yt.join("&")}`}return`#${Te}`}_getCurrentHash(){const c=window.location.hash.replace("#","");if(this._hashName){let _;return c.split("&").map(k=>k.split("=")).forEach(k=>{k[0]===this._hashName&&(_=k)}),(_&&_[1]||"").split("/")}return c.split("/")}_onHashChange(){const c=this._getCurrentHash();if(c.length>=3&&!c.some(_=>isNaN(_))){const _=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:_,pitch:+(c[4]||0)}),!0}return!1}_updateHashUnthrottled(){const c=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,c)}catch{}}}const sc={linearity:.3,easing:s.bezier(0,0,.3,1)},As=s.extend({deceleration:2500,maxSpeed:1400},sc),ds=s.extend({deceleration:20,maxSpeed:1400},sc),fu=s.extend({deceleration:1e3,maxSpeed:360},sc),Fu=s.extend({deceleration:1e3,maxSpeed:90},sc);class Dh{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,_=s.exported.now();for(;c.length>0&&_-c[0].time>160;)c.shift()}_onMoveEnd(c){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const _={zoom:0,bearing:0,pitch:0,pan:new s.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:W}of this._inertiaBuffer)_.zoom+=W.zoomDelta||0,_.bearing+=W.bearingDelta||0,_.pitch+=W.pitchDelta||0,W.panDelta&&_.pan._add(W.panDelta),W.around&&(_.around=W.around),W.pinchAround&&(_.pinchAround=W.pinchAround);const k=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,R={};if(_.pan.mag()){const W=Uu(_.pan.mag(),k,s.extend({},As,c||{}));R.offset=_.pan.mult(W.amount/_.pan.mag()),R.center=this._map.transform.center,kc(R,W)}if(_.zoom){const W=Uu(_.zoom,k,ds);R.zoom=this._map.transform.zoom+W.amount,kc(R,W)}if(_.bearing){const W=Uu(_.bearing,k,fu);R.bearing=this._map.transform.bearing+s.clamp(W.amount,-179,179),kc(R,W)}if(_.pitch){const W=Uu(_.pitch,k,Fu);R.pitch=this._map.transform.pitch+W.amount,kc(R,W)}if(R.zoom||R.bearing){const W=_.pinchAround===void 0?_.around:_.pinchAround;R.around=W?this._map.unproject(W):this._map.getCenter()}return this.clear(),s.extend(R,{noMoveStart:!0})}}function kc(O,c){(!O.duration||O.duration<c.duration)&&(O.duration=c.duration,O.easing=c.easing)}function Uu(O,c,_){const{maxSpeed:k,linearity:R,deceleration:W}=_,q=s.clamp(O*R/(c/1e3),-k,k),ue=Math.abs(q)/(W*R);return{easing:_.easing,duration:1e3*ue,amount:q*(ue/2)}}class ms extends s.Event{constructor(c,_,k,R={}){const W=P.mousePos(_.getCanvasContainer(),k),q=_.unproject(W);super(c,s.extend({point:W,lngLat:q,originalEvent:k},R)),this._defaultPrevented=!1,this.target=_}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class cl extends s.Event{constructor(c,_,k){const R=c==="touchend"?k.changedTouches:k.touches,W=P.touchPos(_.getCanvasContainer(),R),q=W.map(he=>_.unproject(he)),ue=W.reduce((he,be,Te,Ue)=>he.add(be.div(Ue.length)),new s.pointGeometry(0,0));super(c,{points:W,point:ue,lngLats:q,lngLat:_.unproject(ue),originalEvent:k}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class jt extends s.Event{constructor(c,_,k){super(c,{originalEvent:k}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class kr{constructor(c,_){this._map=c,this._clickTolerance=_.clickTolerance}reset(){delete this._mousedownPos}wheel(c){return this._firePreventable(new jt(c.type,this._map,c))}mousedown(c,_){return this._mousedownPos=_,this._firePreventable(new ms(c.type,this._map,c))}mouseup(c){this._map.fire(new ms(c.type,this._map,c))}click(c,_){this._mousedownPos&&this._mousedownPos.dist(_)>=this._clickTolerance||this._map.fire(new ms(c.type,this._map,c))}dblclick(c){return this._firePreventable(new ms(c.type,this._map,c))}mouseover(c){this._map.fire(new ms(c.type,this._map,c))}mouseout(c){this._map.fire(new ms(c.type,this._map,c))}touchstart(c){return this._firePreventable(new cl(c.type,this._map,c))}touchmove(c){this._map.fire(new cl(c.type,this._map,c))}touchend(c){this._map.fire(new cl(c.type,this._map,c))}touchcancel(c){this._map.fire(new cl(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pr{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(c){this._map.fire(new ms(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ms("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._ignoreContextMenu||this._map.fire(new ms(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Jr{constructor(c,_){this._map=c,this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=_.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,_){this.isEnabled()&&c.shiftKey&&c.button===0&&(P.disableDrag(),this._startPos=this._lastPos=_,this._active=!0)}mousemoveWindow(c,_){if(!this._active)return;const k=_;if(this._lastPos.equals(k)||!this._box&&k.dist(this._startPos)<this._clickTolerance)return;const R=this._startPos;this._lastPos=k,this._box||(this._box=P.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",c));const W=Math.min(R.x,k.x),q=Math.max(R.x,k.x),ue=Math.min(R.y,k.y),he=Math.max(R.y,k.y);P.setTransform(this._box,`translate(${W}px,${ue}px)`),this._box.style.width=q-W+"px",this._box.style.height=he-ue+"px"}mouseupWindow(c,_){if(!this._active||c.button!==0)return;const k=this._startPos,R=_;if(this.reset(),P.suppressClick(),k.x!==R.x||k.y!==R.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:c})),{cameraAnimation:W=>W.fitScreenCoordinates(k,R,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",c)}keydown(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(c,_){return this._map.fire(new s.Event(c,{originalEvent:_}))}}function hi(O,c){if(O.length!==c.length)throw new Error(`The number of touches and points are not equal - touches ${O.length}, points ${c.length}`);const _={};for(let k=0;k<O.length;k++)_[O[k].identifier]=c[k];return _}class Wi{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(c,_,k){(this.centroid||k.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=c.timeStamp),k.length===this.numTouches&&(this.centroid=function(R){const W=new s.pointGeometry(0,0);for(const q of R)W._add(q);return W.div(R.length)}(_),this.touches=hi(k,_)))}touchmove(c,_,k){if(this.aborted||!this.centroid)return;const R=hi(k,_);for(const W in this.touches){const q=this.touches[W],ue=R[W];(!ue||ue.dist(q)>30)&&(this.aborted=!0)}}touchend(c,_,k){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),k.length===0){const R=!this.aborted&&this.centroid;if(this.reset(),R)return R}}}class ja{constructor(c){this.singleTap=new Wi(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(c,_,k){this.singleTap.touchstart(c,_,k)}touchmove(c,_,k){this.singleTap.touchmove(c,_,k)}touchend(c,_,k){const R=this.singleTap.touchend(c,_,k);if(R){const W=c.timeStamp-this.lastTime<500,q=!this.lastTap||this.lastTap.dist(R)<30;if(W&&q||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=R,this.count===this.numTaps)return this.reset(),R}}}class ii{constructor(){this._zoomIn=new ja({numTouches:1,numTaps:2}),this._zoomOut=new ja({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,_,k){this._zoomIn.touchstart(c,_,k),this._zoomOut.touchstart(c,_,k)}touchmove(c,_,k){this._zoomIn.touchmove(c,_,k),this._zoomOut.touchmove(c,_,k)}touchend(c,_,k){const R=this._zoomIn.touchend(c,_,k),W=this._zoomOut.touchend(c,_,k);return R?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:q=>q.easeTo({duration:300,zoom:q.getZoom()+1,around:q.unproject(R)},{originalEvent:c})}):W?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:q=>q.easeTo({duration:300,zoom:q.getZoom()-1,around:q.unproject(W)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Zi={0:1,2:2};class Xl{constructor(c){this.reset(),this._clickTolerance=c.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(c,_){return!1}_move(c,_){return{}}mousedown(c,_){if(this._lastPoint)return;const k=P.mouseButton(c);this._correctButton(c,k)&&(this._lastPoint=_,this._eventButton=k)}mousemoveWindow(c,_){const k=this._lastPoint;if(k){if(c.preventDefault(),function(R,W){const q=Zi[W];return R.buttons===void 0||(R.buttons&q)!==q}(c,this._eventButton))this.reset();else if(this._moved||!(_.dist(k)<this._clickTolerance))return this._moved=!0,this._lastPoint=_,this._move(k,_)}}mouseupWindow(c){this._lastPoint&&P.mouseButton(c)===this._eventButton&&(this._moved&&P.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class to extends Xl{mousedown(c,_){super.mousedown(c,_),this._lastPoint&&(this._active=!0)}_correctButton(c,_){return _===0&&!c.ctrlKey}_move(c,_){return{around:_,panDelta:_.sub(c)}}}class el extends Xl{_correctButton(c,_){return _===0&&c.ctrlKey||_===2}_move(c,_){const k=.8*(_.x-c.x);if(k)return this._active=!0,{bearingDelta:k}}contextmenu(c){c.preventDefault()}}class Pn extends Xl{_correctButton(c,_){return _===0&&c.ctrlKey||_===2}_move(c,_){const k=-.5*(_.y-c.y);if(k)return this._active=!0,{pitchDelta:k}}contextmenu(c){c.preventDefault()}}class Ol{constructor(c,_){this._minTouches=c.cooperativeGestures?2:1,this._clickTolerance=c.clickTolerance||1,this._map=_,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(c,_,k){return this._calculateTransform(c,_,k)}touchmove(c,_,k){if(this._map._cooperativeGestures&&(this._minTouches===2&&k.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(c,!1,k.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(k.length<this._minTouches))return c.preventDefault(),this._calculateTransform(c,_,k)}touchend(c,_,k){this._calculateTransform(c,_,k),this._active&&k.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,_,k){k.length>0&&(this._active=!0);const R=hi(k,_),W=new s.pointGeometry(0,0),q=new s.pointGeometry(0,0);let ue=0;for(const be in R){const Te=R[be],Ue=this._touches[be];Ue&&(W._add(Te),q._add(Te.sub(Ue)),ue++,R[be]=Te)}if(this._touches=R,ue<this._minTouches||!q.mag())return;const he=q.div(ue);return this._sum._add(he),this._sum.mag()<this._clickTolerance?void 0:{around:W.div(ue),panDelta:he}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Kl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(c){}_move(c,_,k){return{}}touchstart(c,_,k){this._firstTwoTouches||k.length<2||(this._firstTwoTouches=[k[0].identifier,k[1].identifier],this._start([_[0],_[1]]))}touchmove(c,_,k){if(!this._firstTwoTouches)return;c.preventDefault();const[R,W]=this._firstTwoTouches,q=ks(k,_,R),ue=ks(k,_,W);if(!q||!ue)return;const he=this._aroundCenter?null:q.add(ue).div(2);return this._move([q,ue],he,c)}touchend(c,_,k){if(!this._firstTwoTouches)return;const[R,W]=this._firstTwoTouches,q=ks(k,_,R),ue=ks(k,_,W);q&&ue||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ks(O,c,_){for(let k=0;k<O.length;k++)if(O[k].identifier===_)return c[k]}function pa(O,c){return Math.log(O/c)/Math.LN2}class pn extends Kl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,_){const k=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(pa(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:pa(this._distance,k),pinchAround:_}}}function So(O,c){return 180*O.angleWith(c)/Math.PI}class gs extends Kl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,_){const k=this._vector;if(this._vector=c[0].sub(c[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:So(this._vector,k),pinchAround:_}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const _=25/(Math.PI*this._minDiameter)*360,k=So(c,this._startVector);return Math.abs(k)<_}}function qf(O){return Math.abs(O.y)>Math.abs(O.x)}class Eo extends Kl{constructor(c){super(),this._map=c}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(c,_,k){super.touchstart(c,_,k),this._currentTouchCount=k.length}_start(c){this._lastPoints=c,qf(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,_,k){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const R=c[0].sub(this._lastPoints[0]),W=c[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(R,W,k.timeStamp),this._valid?(this._lastPoints=c,this._active=!0,{pitchDelta:(R.y+W.y)/2*-.5}):void 0}gestureBeginsVertically(c,_,k){if(this._valid!==void 0)return this._valid;const R=c.mag()>=2,W=_.mag()>=2;if(!R&&!W)return;if(!R||!W)return this._firstMove===void 0&&(this._firstMove=k),k-this._firstMove<100&&void 0;const q=c.y>0==_.y>0;return qf(c)&&qf(_)&&q}}const Is={panStep:100,bearingStep:15,pitchStep:10};class fn{constructor(){const c=Is;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let _=0,k=0,R=0,W=0,q=0;switch(c.keyCode){case 61:case 107:case 171:case 187:_=1;break;case 189:case 109:case 173:_=-1;break;case 37:c.shiftKey?k=-1:(c.preventDefault(),W=-1);break;case 39:c.shiftKey?k=1:(c.preventDefault(),W=1);break;case 38:c.shiftKey?R=1:(c.preventDefault(),q=-1);break;case 40:c.shiftKey?R=-1:(c.preventDefault(),q=1);break;default:return}return this._rotationDisabled&&(k=0,R=0),{cameraAnimation:ue=>{const he=ue.getZoom();ue.easeTo({duration:300,easeId:"keyboardHandler",easing:fl,zoom:_?Math.round(he)+_*(c.shiftKey?2:1):he,bearing:ue.getBearing()+k*this._bearingStep,pitch:ue.getPitch()+R*this._pitchStep,offset:[-W*this._panStep,-q*this._panStep],center:ue.getCenter()},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function fl(O){return O*(2-O)}const Yl=4.000244140625;class Rl{constructor(c,_){this._map=c,this._el=c.getCanvasContainer(),this._handler=_,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout"],this)}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=c&&c.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(c){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;c.preventDefault()}let _=c.deltaMode===WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const k=s.exported.now(),R=k-(this._lastWheelEventTime||0);this._lastWheelEventTime=k,_!==0&&_%Yl==0?this._type="wheel":_!==0&&Math.abs(_)<4?this._type="trackpad":R>400?(this._type=null,this._lastValue=_,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(R*_)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,_+=this._lastValue)),c.shiftKey&&_&&(_/=4),this._type&&(this._lastWheelEvent=c,this._delta-=_,this._active||this._start(c)),c.preventDefault()}_onTimeout(c){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const _=P.mousePos(this._el,c);this._around=s.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(_)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._map.transform;if(this._delta!==0){const ue=this._type==="wheel"&&Math.abs(this._delta)>Yl?this._wheelZoomRate:this._defaultZoomRate;let he=2/(1+Math.exp(-Math.abs(this._delta*ue)));this._delta<0&&he!==0&&(he=1/he);const be=typeof this._targetZoom=="number"?c.zoomScale(this._targetZoom):c.scale;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(be*he))),this._type==="wheel"&&(this._startZoom=c.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const _=typeof this._targetZoom=="number"?this._targetZoom:c.zoom,k=this._startZoom,R=this._easing;let W,q=!1;if(this._type==="wheel"&&k&&R){const ue=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),he=R(ue);W=s.number(k,_,he),ue<1?this._frameId||(this._frameId=!0):q=!0}else W=_,q=!0;return this._active=!0,q&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!q,zoomDelta:W-c.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let _=s.ease;if(this._prevEase){const k=this._prevEase,R=(s.exported.now()-k.start)/k.duration,W=k.easing(R+.01)-k.easing(R),q=.27/Math.sqrt(W*W+1e-4)*.01,ue=Math.sqrt(.0729-q*q);_=s.bezier(q,ue,.25,1)}return this._prevEase={start:s.exported.now(),duration:c,easing:_},_}reset(){this._active=!1}}class Fo{constructor(c,_){this._clickZoom=c,this._tapZoom=_}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ju{constructor(){this.reset()}reset(){this._active=!1}dblclick(c,_){return c.preventDefault(),{cameraAnimation:k=>{k.easeTo({duration:300,zoom:k.getZoom()+(c.shiftKey?-1:1),around:k.unproject(_)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yo{constructor(){this._tap=new ja({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(c,_,k){this._swipePoint||(this._tapTime&&c.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?k.length>0&&(this._swipePoint=_[0],this._swipeTouch=k[0].identifier):this._tap.touchstart(c,_,k))}touchmove(c,_,k){if(this._tapTime){if(this._swipePoint){if(k[0].identifier!==this._swipeTouch)return;const R=_[0],W=R.y-this._swipePoint.y;return this._swipePoint=R,c.preventDefault(),this._active=!0,{zoomDelta:W/128}}}else this._tap.touchmove(c,_,k)}touchend(c,_,k){this._tapTime?this._swipePoint&&k.length===0&&this.reset():this._tap.touchend(c,_,k)&&(this._tapTime=c.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class en{constructor(c,_,k){this._el=c,this._mousePan=_,this._touchPan=k}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class hl{constructor(c,_,k){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=_,this._mousePitch=k}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class hu{constructor(c,_,k,R){this._el=c,this._touchZoom=_,this._touchRotate=k,this._tapDragZoom=R,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const fo=O=>O.zoom||O.drag||O.pitch||O.rotate;class Do extends s.Event{}function Vu(O){return O.panDelta&&O.panDelta.mag()||O.zoomDelta||O.bearingDelta||O.pitchDelta}class zh{constructor(c,_){this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Dh(c),this._bearingSnap=_.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(_),s.bindAll(["handleEvent","handleWindowEvent"],this);const k=this._el;this._listeners=[[k,"touchstart",{passive:!0}],[k,"touchmove",{passive:!1}],[k,"touchend",void 0],[k,"touchcancel",void 0],[k,"mousedown",void 0],[k,"mousemove",void 0],[k,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[k,"mouseover",void 0],[k,"mouseout",void 0],[k,"dblclick",void 0],[k,"click",void 0],[k,"keydown",{capture:!1}],[k,"keyup",void 0],[k,"wheel",{passive:!1}],[k,"contextmenu",void 0],[window,"blur",void 0]];for(const[R,W,q]of this._listeners)P.addEventListener(R,W,R===document?this.handleWindowEvent:this.handleEvent,q)}destroy(){for(const[c,_,k]of this._listeners)P.removeEventListener(c,_,c===document?this.handleWindowEvent:this.handleEvent,k)}_addDefaultHandlers(c){const _=this._map,k=_.getCanvasContainer();this._add("mapEvent",new kr(_,c));const R=_.boxZoom=new Jr(_,c);this._add("boxZoom",R);const W=new ii,q=new ju;_.doubleClickZoom=new Fo(q,W),this._add("tapZoom",W),this._add("clickZoom",q);const ue=new Yo;this._add("tapDragZoom",ue);const he=_.touchPitch=new Eo(_);this._add("touchPitch",he);const be=new el(c),Te=new Pn(c);_.dragRotate=new hl(c,be,Te),this._add("mouseRotate",be,["mousePitch"]),this._add("mousePitch",Te,["mouseRotate"]);const Ue=new to(c),Ke=new Ol(c,_);_.dragPan=new en(k,Ue,Ke),this._add("mousePan",Ue),this._add("touchPan",Ke,["touchZoom","touchRotate"]);const yt=new gs,ut=new pn;_.touchZoomRotate=new hu(k,ut,yt,ue),this._add("touchRotate",yt,["touchPan","touchZoom"]),this._add("touchZoom",ut,["touchPan","touchRotate"]);const gt=_.scrollZoom=new Rl(_,this);this._add("scrollZoom",gt,["mousePan"]);const zt=_.keyboard=new fn;this._add("keyboard",zt),this._add("blockableMapEvent",new pr(_));for(const Gt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])c.interactive&&c[Gt]&&_[Gt].enable(c[Gt])}_add(c,_,k){this._handlers.push({handlerName:c,handler:_,allowed:k}),this._handlersById[c]=_}stop(c){if(!this._updatingCamera){for(const{handler:_}of this._handlers)_.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!fo(this._eventsInProgress)||this.isZooming()}_blockedByActive(c,_,k){for(const R in c)if(R!==k&&(!_||_.indexOf(R)<0))return!0;return!1}handleWindowEvent(c){this.handleEvent(c,`${c.type}Window`)}_getMapTouches(c){const _=[];for(const k of c)this._el.contains(k.target)&&_.push(k);return _}handleEvent(c,_){if(c.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const k=c.type==="renderFrame"?void 0:c,R={needsRenderFrame:!1},W={},q={},ue=c.touches,he=ue?this._getMapTouches(ue):void 0,be=he?P.touchPos(this._el,he):P.mousePos(this._el,c);for(const{handlerName:Ke,handler:yt,allowed:ut}of this._handlers){if(!yt.isEnabled())continue;let gt;this._blockedByActive(q,ut,Ke)?yt.reset():yt[_||c.type]&&(gt=yt[_||c.type](c,be,he),this.mergeHandlerResult(R,W,gt,Ke,k),gt&&gt.needsRenderFrame&&this._triggerRenderFrame()),(gt||yt.isActive())&&(q[Ke]=yt)}const Te={};for(const Ke in this._previousActiveHandlers)q[Ke]||(Te[Ke]=k);this._previousActiveHandlers=q,(Object.keys(Te).length||Vu(R))&&(this._changes.push([R,W,Te]),this._triggerRenderFrame()),(Object.keys(q).length||Vu(R))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ue}=R;Ue&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ue(this._map))}mergeHandlerResult(c,_,k,R,W){if(!k)return;s.extend(c,k);const q={handlerName:R,originalEvent:k.originalEvent||W};k.zoomDelta!==void 0&&(_.zoom=q),k.panDelta!==void 0&&(_.drag=q),k.pitchDelta!==void 0&&(_.pitch=q),k.bearingDelta!==void 0&&(_.rotate=q)}_applyChanges(){const c={},_={},k={};for(const[R,W,q]of this._changes)R.panDelta&&(c.panDelta=(c.panDelta||new s.pointGeometry(0,0))._add(R.panDelta)),R.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+R.zoomDelta),R.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+R.bearingDelta),R.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+R.pitchDelta),R.around!==void 0&&(c.around=R.around),R.pinchAround!==void 0&&(c.pinchAround=R.pinchAround),R.noInertia&&(c.noInertia=R.noInertia),s.extend(_,W),s.extend(k,q);this._updateMapTransform(c,_,k),this._changes=[]}_updateMapTransform(c,_,k){const R=this._map,W=R.transform,q=R.style&&R.style.terrain;if(!(Vu(c)||q&&this._drag))return this._fireEvents(_,k,!0);let{panDelta:ue,zoomDelta:he,bearingDelta:be,pitchDelta:Te,around:Ue,pinchAround:Ke}=c;Ke!==void 0&&(Ue=Ke),R._stop(!0),Ue=Ue||R.transform.centerPoint;const yt=W.pointLocation(ue?Ue.sub(ue):Ue);be&&(W.bearing+=be),Te&&(W.pitch+=Te),he&&(W.zoom+=he),q?_.drag&&!this._drag?(this._drag={center:W.centerPoint,lngLat:W.pointLocation(Ue),point:Ue,handlerName:_.drag.handlerName},R.fire(new s.Event("freezeElevation",{freeze:!0}))):this._drag&&k[this._drag.handlerName]?(R.fire(new s.Event("freezeElevation",{freeze:!1})),this._drag=null):_.drag&&this._drag&&(W.center=W.pointLocation(W.centerPoint.sub(ue))):W.setLocationAtPoint(yt,Ue),this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(_,k,!0)}_fireEvents(c,_,k){const R=fo(this._eventsInProgress),W=fo(c),q={};for(const Te in c){const{originalEvent:Ue}=c[Te];this._eventsInProgress[Te]||(q[`${Te}start`]=Ue),this._eventsInProgress[Te]=c[Te]}!R&&W&&this._fireEvent("movestart",W.originalEvent);for(const Te in q)this._fireEvent(Te,q[Te]);W&&this._fireEvent("move",W.originalEvent);for(const Te in c){const{originalEvent:Ue}=c[Te];this._fireEvent(Te,Ue)}const ue={};let he;for(const Te in this._eventsInProgress){const{handlerName:Ue,originalEvent:Ke}=this._eventsInProgress[Te];this._handlersById[Ue].isActive()||(delete this._eventsInProgress[Te],he=_[Ue]||Ke,ue[`${Te}end`]=he)}for(const Te in ue)this._fireEvent(Te,ue[Te]);const be=fo(this._eventsInProgress);if(k&&(R||W)&&!be){this._updatingCamera=!0;const Te=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ue=Ke=>Ke!==0&&-this._bearingSnap<Ke&&Ke<this._bearingSnap;Te?(Ue(Te.bearing||this._map.getBearing())&&(Te.bearing=0),this._map.easeTo(Te,{originalEvent:he})):(this._map.fire(new s.Event("moveend",{originalEvent:he})),Ue(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(c,_){this._map.fire(new s.Event(c,_?{originalEvent:_}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(c=>{delete this._frameId,this.handleEvent(new Do("renderFrame",{timeStamp:c})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Gs={extend:(O,...c)=>s.extend(O,...c),run(O){O()},logToElement(O,c=!1,_="log"){const k=window.document.getElementById(_);k&&(c&&(k.innerHTML=""),k.innerHTML+=`<br>${O}`)}};class Ui extends s.Evented{constructor(c,_){super(),this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=_.bearingSnap,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(c,_){return this.jumpTo({center:c},_)}panBy(c,_,k){return c=s.pointGeometry.convert(c).mult(-1),this.panTo(this.transform.center,s.extend({offset:c},_),k)}panTo(c,_,k){return this.easeTo(s.extend({center:c},_),k)}getZoom(){return this.transform.zoom}setZoom(c,_){return this.jumpTo({zoom:c},_),this}zoomTo(c,_,k){return this.easeTo(s.extend({zoom:c},_),k)}zoomIn(c,_){return this.zoomTo(this.getZoom()+1,c,_),this}zoomOut(c,_){return this.zoomTo(this.getZoom()-1,c,_),this}getBearing(){return this.transform.bearing}setBearing(c,_){return this.jumpTo({bearing:c},_),this}getPadding(){return this.transform.padding}setPadding(c,_){return this.jumpTo({padding:c},_),this}rotateTo(c,_,k){return this.easeTo(s.extend({bearing:c},_),k)}resetNorth(c,_){return this.rotateTo(0,s.extend({duration:1e3},c),_),this}resetNorthPitch(c,_){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},c),_),this}snapToNorth(c,_){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,_):this}getPitch(){return this.transform.pitch}setPitch(c,_){return this.jumpTo({pitch:c},_),this}cameraForBounds(c,_){c=s.LngLatBounds.convert(c);const k=_&&_.bearing||0;return this._cameraForBoxAndBearing(c.getNorthWest(),c.getSouthEast(),k,_)}_cameraForBoxAndBearing(c,_,k,R){const W={top:0,bottom:0,right:0,left:0};if(typeof(R=s.extend({padding:W,offset:[0,0],maxZoom:this.transform.maxZoom},R)).padding=="number"){const er=R.padding;R.padding={top:er,bottom:er,right:er,left:er}}R.padding=s.extend(W,R.padding);const q=this.transform,ue=q.padding,he=q.project(s.LngLat.convert(c)),be=q.project(s.LngLat.convert(_)),Te=he.rotate(-k*Math.PI/180),Ue=be.rotate(-k*Math.PI/180),Ke=new s.pointGeometry(Math.max(Te.x,Ue.x),Math.max(Te.y,Ue.y)),yt=new s.pointGeometry(Math.min(Te.x,Ue.x),Math.min(Te.y,Ue.y)),ut=Ke.sub(yt),gt=(q.width-(ue.left+ue.right+R.padding.left+R.padding.right))/ut.x,zt=(q.height-(ue.top+ue.bottom+R.padding.top+R.padding.bottom))/ut.y;if(zt<0||gt<0)return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Gt=Math.min(q.scaleZoom(q.scale*Math.min(gt,zt)),R.maxZoom),Jt=s.pointGeometry.convert(R.offset),bt=new s.pointGeometry((R.padding.left-R.padding.right)/2,(R.padding.top-R.padding.bottom)/2).rotate(k*Math.PI/180),nr=Jt.add(bt).mult(q.scale/q.zoomScale(Gt));return{center:q.unproject(he.add(be).div(2).sub(nr)),zoom:Gt,bearing:k}}fitBounds(c,_,k){return this._fitInternal(this.cameraForBounds(c,_),_,k)}fitScreenCoordinates(c,_,k,R,W){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.pointGeometry.convert(c)),this.transform.pointLocation(s.pointGeometry.convert(_)),k,R),R,W)}_fitInternal(c,_,k){return c?(delete(_=s.extend(c,_)).padding,_.linear?this.easeTo(_,k):this.flyTo(_,k)):this}jumpTo(c,_){this.stop();const k=this.transform;let R=!1,W=!1,q=!1;return"zoom"in c&&k.zoom!==+c.zoom&&(R=!0,k.zoom=+c.zoom),c.center!==void 0&&(k.center=s.LngLat.convert(c.center)),"bearing"in c&&k.bearing!==+c.bearing&&(W=!0,k.bearing=+c.bearing),"pitch"in c&&k.pitch!==+c.pitch&&(q=!0,k.pitch=+c.pitch),c.padding==null||k.isPaddingEqual(c.padding)||(k.padding=c.padding),this.fire(new s.Event("movestart",_)).fire(new s.Event("move",_)),R&&this.fire(new s.Event("zoomstart",_)).fire(new s.Event("zoom",_)).fire(new s.Event("zoomend",_)),W&&this.fire(new s.Event("rotatestart",_)).fire(new s.Event("rotate",_)).fire(new s.Event("rotateend",_)),q&&this.fire(new s.Event("pitchstart",_)).fire(new s.Event("pitch",_)).fire(new s.Event("pitchend",_)),this.fire(new s.Event("moveend",_))}calculateCameraOptionsFromTo(c,_,k,R=0){const W=s.MercatorCoordinate.fromLngLat(c,_),q=s.MercatorCoordinate.fromLngLat(k,R),ue=q.x-W.x,he=q.y-W.y,be=q.z-W.z,Te=Math.hypot(ue,he,be);if(Te===0)throw new Error("Can't calculate camera options with same From and To");const Ue=Math.hypot(ue,he),Ke=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Te/this.transform.tileSize),yt=180*Math.atan2(ue,-he)/Math.PI;let ut=180*Math.acos(Ue/Te)/Math.PI;return ut=be<0?90-ut:90+ut,{center:q.toLngLat(),zoom:Ke,pitch:ut,bearing:yt}}easeTo(c,_){this._stop(!1,c.easeId),((c=s.extend({offset:[0,0],duration:500,easing:s.ease},c)).animate===!1||!c.essential&&s.exported.prefersReducedMotion)&&(c.duration=0);const k=this.transform,R=this.getZoom(),W=this.getBearing(),q=this.getPitch(),ue=this.getPadding(),he="zoom"in c?+c.zoom:R,be="bearing"in c?this._normalizeBearing(c.bearing,W):W,Te="pitch"in c?+c.pitch:q,Ue="padding"in c?c.padding:k.padding,Ke=s.pointGeometry.convert(c.offset);let yt=k.centerPoint.add(Ke);const ut=k.pointLocation(yt),gt=s.LngLat.convert(c.center||ut);this._normalizeCenter(gt);const zt=k.project(ut),Gt=k.project(gt).sub(zt),Jt=k.zoomScale(he-R);let bt,nr;c.around&&(bt=s.LngLat.convert(c.around),nr=k.locationPoint(bt));const er={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||he!==R,this._rotating=this._rotating||W!==be,this._pitching=this._pitching||Te!==q,this._padding=!k.isPaddingEqual(Ue),this._easeId=c.easeId,this._prepareEase(_,c.noMoveStart,er),this._ease(mr=>{if(this._zooming&&(k.zoom=s.number(R,he,mr)),this._rotating&&(k.bearing=s.number(W,be,mr)),this._pitching&&(k.pitch=s.number(q,Te,mr)),this._padding&&(k.interpolatePadding(ue,Ue,mr),yt=k.centerPoint.add(Ke)),bt)k.setLocationAtPoint(bt,nr);else{const Sr=k.zoomScale(k.zoom-R),$r=he>R?Math.min(2,Jt):Math.max(.5,Jt),gr=Math.pow($r,1-mr),cn=k.unproject(zt.add(Gt.mult(mr*gr)).mult(Sr));k.setLocationAtPoint(k.renderWorldCopies?cn.wrap():cn,yt)}this._fireMoveEvents(_)},mr=>{this._afterEase(_,mr)},c),this}_prepareEase(c,_,k={}){this._moving=!0,this.fire(new s.Event("freezeElevation",{freeze:!0})),_||k.moving||this.fire(new s.Event("movestart",c)),this._zooming&&!k.zooming&&this.fire(new s.Event("zoomstart",c)),this._rotating&&!k.rotating&&this.fire(new s.Event("rotatestart",c)),this._pitching&&!k.pitching&&this.fire(new s.Event("pitchstart",c))}_fireMoveEvents(c){this.fire(new s.Event("move",c)),this._zooming&&this.fire(new s.Event("zoom",c)),this._rotating&&this.fire(new s.Event("rotate",c)),this._pitching&&this.fire(new s.Event("pitch",c))}_afterEase(c,_){if(this._easeId&&_&&this._easeId===_)return;delete this._easeId,this.fire(new s.Event("freezeElevation",{freeze:!1}));const k=this._zooming,R=this._rotating,W=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,k&&this.fire(new s.Event("zoomend",c)),R&&this.fire(new s.Event("rotateend",c)),W&&this.fire(new s.Event("pitchend",c)),this.fire(new s.Event("moveend",c))}flyTo(c,_){if(!c.essential&&s.exported.prefersReducedMotion){const U=s.pick(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(U,_)}this.stop(),c=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},c);const k=this.transform,R=this.getZoom(),W=this.getBearing(),q=this.getPitch(),ue=this.getPadding(),he="zoom"in c?s.clamp(+c.zoom,k.minZoom,k.maxZoom):R,be="bearing"in c?this._normalizeBearing(c.bearing,W):W,Te="pitch"in c?+c.pitch:q,Ue="padding"in c?c.padding:k.padding,Ke=k.zoomScale(he-R),yt=s.pointGeometry.convert(c.offset);let ut=k.centerPoint.add(yt);const gt=k.pointLocation(ut),zt=s.LngLat.convert(c.center||gt);this._normalizeCenter(zt);const Gt=k.project(gt),Jt=k.project(zt).sub(Gt);let bt=c.curve;const nr=Math.max(k.width,k.height),er=nr/Ke,mr=Jt.mag();if("minZoom"in c){const U=s.clamp(Math.min(c.minZoom,R,he),k.minZoom,k.maxZoom),Y=nr/k.zoomScale(U-R);bt=Math.sqrt(Y/mr*2)}const Sr=bt*bt;function $r(U){const Y=(er*er-nr*nr+(U?-1:1)*Sr*Sr*mr*mr)/(2*(U?er:nr)*Sr*mr);return Math.log(Math.sqrt(Y*Y+1)-Y)}function gr(U){return(Math.exp(U)-Math.exp(-U))/2}function cn(U){return(Math.exp(U)+Math.exp(-U))/2}const g=$r(0);let b=function(U){return cn(g)/cn(g+bt*U)},y=function(U){return nr*((cn(g)*(gr(Y=g+bt*U)/cn(Y))-gr(g))/Sr)/mr;var Y},C=($r(1)-g)/bt;if(Math.abs(mr)<1e-6||!isFinite(C)){if(Math.abs(nr-er)<1e-6)return this.easeTo(c,_);const U=er<nr?-1:1;C=Math.abs(Math.log(er/nr))/bt,y=function(){return 0},b=function(Y){return Math.exp(U*bt*Y)}}return c.duration="duration"in c?+c.duration:1e3*C/("screenSpeed"in c?+c.screenSpeed/bt:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this._zooming=!0,this._rotating=W!==be,this._pitching=Te!==q,this._padding=!k.isPaddingEqual(Ue),this._prepareEase(_,!1),this._ease(U=>{const Y=U*C,ee=1/b(Y);k.zoom=U===1?he:R+k.scaleZoom(ee),this._rotating&&(k.bearing=s.number(W,be,U)),this._pitching&&(k.pitch=s.number(q,Te,U)),this._padding&&(k.interpolatePadding(ue,Ue,U),ut=k.centerPoint.add(yt));const se=U===1?zt:k.unproject(Gt.add(Jt.mult(y(Y))).mult(ee));k.setLocationAtPoint(k.renderWorldCopies?se.wrap():se,ut),this._fireMoveEvents(_)},()=>this._afterEase(_),c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,_){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const k=this._onEaseEnd;delete this._onEaseEnd,k.call(this,_)}if(!c){const k=this.handlers;k&&k.stop(!1)}return this}_ease(c,_,k){k.animate===!1||k.duration===0?(c(1),_()):(this._easeStart=s.exported.now(),this._easeOptions=k,this._onEaseFrame=c,this._onEaseEnd=_,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const c=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(c)),c<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(c,_){c=s.wrap(c,-180,180);const k=Math.abs(c-_);return Math.abs(c-360-_)<k&&(c-=360),Math.abs(c+360-_)<k&&(c+=360),c}_normalizeCenter(c){const _=this.transform;if(!_.renderWorldCopies||_.lngRange)return;const k=c.lng-_.center.lng;c.lng+=k>180?-360:k<-180?360:0}}class Ms{constructor(c={}){this.options=c,s.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(c){return this._map=c,this._compact=this.options&&this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(c,_){const k=this._map._getUIString(`AttributionControl.${_}`);c.title=k,c.setAttribute("aria-label",k)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(c){!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let c=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=c.concat(this.options.customAttribution.map(R=>typeof R!="string"?"":R)):typeof this.options.customAttribution=="string"&&c.push(this.options.customAttribution)),this._map.style.stylesheet){const R=this._map.style.stylesheet;this.styleOwner=R.owner,this.styleId=R.id}const _=this._map.style.sourceCaches;for(const R in _){const W=_[R];if(W.used||W.usedForTerrain){const q=W.getSource();q.attribution&&c.indexOf(q.attribution)<0&&c.push(q.attribution)}}c=c.filter(R=>String(R).trim()),c.sort((R,W)=>R.length-W.length),c=c.filter((R,W)=>{for(let q=W+1;q<c.length;q++)if(c[q].indexOf(R)>=0)return!1;return!0});const k=c.join(" | ");k!==this._attribHTML&&(this._attribHTML=k,c.length?(this._innerContainer.innerHTML=k,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class pu{constructor(c={}){this.options=c,s.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(c){this._map=c,this._compact=this.options&&this.options.compact,this._container=P.create("div","maplibregl-ctrl mapboxgl-ctrl");const _=P.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return _.target="_blank",_.rel="noopener nofollow",_.href="https://maplibre.org/",_.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),_.setAttribute("rel","noopener nofollow"),this._container.appendChild(_),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const c=this._container.children;if(c.length){const _=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&_.classList.add("maplibregl-compact","mapboxgl-compact"):_.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Gf{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const _=++this._id;return this._queue.push({callback:c,id:_,cancelled:!1}),_}remove(c){const _=this._currentlyRunning,k=_?this._queue.concat(_):this._queue;for(const R of k)if(R.id===c)return void(R.cancelled=!0)}run(c=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const _=this._currentlyRunning=this._queue;this._queue=[];for(const k of _)if(!k.cancelled&&(k.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const rf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},pl={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Cp={showCompass:!0,showZoom:!0,visualizePitch:!1};class yi{constructor(c,_,k=!1){this._clickTolerance=10,this.element=_,this.mouseRotate=new el({clickTolerance:c.dragRotate._mouseRotate._clickTolerance}),this.map=c,k&&(this.mousePitch=new Pn({clickTolerance:c.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),P.addEventListener(_,"mousedown",this.mousedown),P.addEventListener(_,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(_,"touchmove",this.touchmove),P.addEventListener(_,"touchend",this.touchend),P.addEventListener(_,"touchcancel",this.reset)}down(c,_){this.mouseRotate.mousedown(c,_),this.mousePitch&&this.mousePitch.mousedown(c,_),P.disableDrag()}move(c,_){const k=this.map,R=this.mouseRotate.mousemoveWindow(c,_);if(R&&R.bearingDelta&&k.setBearing(k.getBearing()+R.bearingDelta),this.mousePitch){const W=this.mousePitch.mousemoveWindow(c,_);W&&W.pitchDelta&&k.setPitch(k.getPitch()+W.pitchDelta)}}off(){const c=this.element;P.removeEventListener(c,"mousedown",this.mousedown),P.removeEventListener(c,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(c,"touchmove",this.touchmove),P.removeEventListener(c,"touchend",this.touchend),P.removeEventListener(c,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup)}mousedown(c){this.down(s.extend({},c,{ctrlKey:!0,preventDefault:()=>c.preventDefault()}),P.mousePos(this.element,c)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)}mousemove(c){this.move(c,P.mousePos(this.element,c))}mouseup(c){this.mouseRotate.mouseupWindow(c),this.mousePitch&&this.mousePitch.mouseupWindow(c),this.offTemp()}touchstart(c){c.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,c.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>c.preventDefault()},this._startPos))}touchmove(c){c.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,c.targetTouches)[0],this.move({preventDefault:()=>c.preventDefault()},this._lastPos))}touchend(c){c.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function vi(O,c,_){if(O=new s.LngLat(O.lng,O.lat),c){const k=new s.LngLat(O.lng-360,O.lat),R=new s.LngLat(O.lng+360,O.lat),W=_.locationPoint(O).distSqr(c);_.locationPoint(k).distSqr(c)<W?O=k:_.locationPoint(R).distSqr(c)<W&&(O=R)}for(;Math.abs(O.lng-_.center.lng)>180;){const k=_.locationPoint(O);if(k.x>=0&&k.y>=0&&k.x<=_.width&&k.y<=_.height)break;O.lng>_.center.lng?O.lng-=360:O.lng+=360}return O}const Tn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function zn(O,c,_){const k=O.classList;for(const R in Tn)k.remove(`maplibregl-${_}-anchor-${R}`,`mapboxgl-${_}-anchor-${R}`);k.add(`maplibregl-${_}-anchor-${c}`,`mapboxgl-${_}-anchor-${c}`)}class Uo extends s.Evented{constructor(c,_){if(super(),(c instanceof HTMLElement||_)&&(c=s.extend({element:c},_)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment!=="auto"?c.pitchAlignment:this._rotationAlignment,c&&c.element)this._element=c.element,this._offset=s.pointGeometry.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div"),this._element.setAttribute("aria-label","Map marker");const k=P.createNS("http://www.w3.org/2000/svg","svg"),R=41,W=27;k.setAttributeNS(null,"display","block"),k.setAttributeNS(null,"height",`${R}px`),k.setAttributeNS(null,"width",`${W}px`),k.setAttributeNS(null,"viewBox",`0 0 ${W} ${R}`);const q=P.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"stroke","none"),q.setAttributeNS(null,"stroke-width","1"),q.setAttributeNS(null,"fill","none"),q.setAttributeNS(null,"fill-rule","evenodd");const ue=P.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"fill-rule","nonzero");const he=P.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"transform","translate(3.0, 29.0)"),he.setAttributeNS(null,"fill","#000000");const be=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Jt of be){const bt=P.createNS("http://www.w3.org/2000/svg","ellipse");bt.setAttributeNS(null,"opacity","0.04"),bt.setAttributeNS(null,"cx","10.5"),bt.setAttributeNS(null,"cy","5.80029008"),bt.setAttributeNS(null,"rx",Jt.rx),bt.setAttributeNS(null,"ry",Jt.ry),he.appendChild(bt)}const Te=P.createNS("http://www.w3.org/2000/svg","g");Te.setAttributeNS(null,"fill",this._color);const Ue=P.createNS("http://www.w3.org/2000/svg","path");Ue.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Te.appendChild(Ue);const Ke=P.createNS("http://www.w3.org/2000/svg","g");Ke.setAttributeNS(null,"opacity","0.25"),Ke.setAttributeNS(null,"fill","#000000");const yt=P.createNS("http://www.w3.org/2000/svg","path");yt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ke.appendChild(yt);const ut=P.createNS("http://www.w3.org/2000/svg","g");ut.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ut.setAttributeNS(null,"fill","#FFFFFF");const gt=P.createNS("http://www.w3.org/2000/svg","g");gt.setAttributeNS(null,"transform","translate(8.0, 8.0)");const zt=P.createNS("http://www.w3.org/2000/svg","circle");zt.setAttributeNS(null,"fill","#000000"),zt.setAttributeNS(null,"opacity","0.25"),zt.setAttributeNS(null,"cx","5.5"),zt.setAttributeNS(null,"cy","5.5"),zt.setAttributeNS(null,"r","5.4999962");const Gt=P.createNS("http://www.w3.org/2000/svg","circle");Gt.setAttributeNS(null,"fill","#FFFFFF"),Gt.setAttributeNS(null,"cx","5.5"),Gt.setAttributeNS(null,"cy","5.5"),Gt.setAttributeNS(null,"r","5.4999962"),gt.appendChild(zt),gt.appendChild(Gt),ue.appendChild(he),ue.appendChild(Te),ue.appendChild(Ke),ue.appendChild(ut),ue.appendChild(gt),k.appendChild(ue),k.setAttributeNS(null,"height",R*this._scale+"px"),k.setAttributeNS(null,"width",W*this._scale+"px"),this._element.appendChild(k),this._offset=s.pointGeometry.convert(c&&c.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",k=>{k.preventDefault()}),this._element.addEventListener("mousedown",k=>{k.preventDefault()}),zn(this._element,this._anchor,"marker"),this._popup=null}addTo(c){return this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._update),c.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=s.LngLat.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const R=Math.sqrt(Math.pow(13.5,2)/2);c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[R,-1*(38.1-13.5+R)],"bottom-right":[-R,-1*(38.1-13.5+R)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=c,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(c){const _=c.code,k=c.charCode||c.keyCode;_!=="Space"&&_!=="Enter"&&k!==32&&k!==13||this.togglePopup()}_onMapClick(c){const _=c.originalEvent.target,k=this._element;this._popup&&(_===k||k.contains(_))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const c=this._popup;return c?(c.isOpen()?c.remove():c.addTo(this._map),this):this}_update(c){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=vi(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let k="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?k="rotateX(0deg)":this._pitchAlignment==="map"&&(k=`rotateX(${this._map.getPitch()}deg)`),c&&c.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${Tn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${k} ${_}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const R=this._map.unproject(this._pos),W=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=R.distanceTo(this._lngLat)>20*W?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(c){return this._offset=s.pointGeometry.convert(c),this._update(),this}_onMove(c){if(!this._isDragging){const _=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=_}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(c){this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(c){return this._draggable=!!c,this._map&&(c?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c&&c!=="auto"?c:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const du={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let jo,Va=0,go=!1;const Co={maxWidth:100,unit:"metric"};function un(O,c,_){const k=_&&_.maxWidth||100,R=O._container.clientHeight/2,W=O.unproject([0,R]),q=O.unproject([k,R]),ue=W.distanceTo(q);if(_&&_.unit==="imperial"){const he=3.2808*ue;he>5280?Nn(c,k,he/5280,O._getUIString("ScaleControl.Miles")):Nn(c,k,he,O._getUIString("ScaleControl.Feet"))}else _&&_.unit==="nautical"?Nn(c,k,ue/1852,O._getUIString("ScaleControl.NauticalMiles")):ue>=1e3?Nn(c,k,ue/1e3,O._getUIString("ScaleControl.Kilometers")):Nn(c,k,ue,O._getUIString("ScaleControl.Meters"))}function Nn(O,c,_,k){const R=function(W){const q=Math.pow(10,`${Math.floor(W)}`.length-1);let ue=W/q;return ue=ue>=10?10:ue>=5?5:ue>=3?3:ue>=2?2:ue>=1?1:function(he){const be=Math.pow(10,Math.ceil(-Math.log(he)/Math.LN10));return Math.round(he*be)/be}(ue),q*ue}(_);O.style.width=c*(R/_)+"px",O.innerHTML=`${R}&nbsp;${k}`}const na={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ua=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Dl(O){if(O){if(typeof O=="number"){const c=Math.round(Math.sqrt(.5*Math.pow(O,2)));return{center:new s.pointGeometry(0,0),top:new s.pointGeometry(0,O),"top-left":new s.pointGeometry(c,c),"top-right":new s.pointGeometry(-c,c),bottom:new s.pointGeometry(0,-O),"bottom-left":new s.pointGeometry(c,-c),"bottom-right":new s.pointGeometry(-c,-c),left:new s.pointGeometry(O,0),right:new s.pointGeometry(-O,0)}}if(O instanceof s.pointGeometry||Array.isArray(O)){const c=s.pointGeometry.convert(O);return{center:c,top:c,"top-left":c,"top-right":c,bottom:c,"bottom-left":c,"bottom-right":c,left:c,right:c}}return{center:s.pointGeometry.convert(O.center||[0,0]),top:s.pointGeometry.convert(O.top||[0,0]),"top-left":s.pointGeometry.convert(O["top-left"]||[0,0]),"top-right":s.pointGeometry.convert(O["top-right"]||[0,0]),bottom:s.pointGeometry.convert(O.bottom||[0,0]),"bottom-left":s.pointGeometry.convert(O["bottom-left"]||[0,0]),"bottom-right":s.pointGeometry.convert(O["bottom-right"]||[0,0]),left:s.pointGeometry.convert(O.left||[0,0]),right:s.pointGeometry.convert(O.right||[0,0])}}return Dl(new s.pointGeometry(0,0))}const zo={supported:d,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends Ui{constructor(O){var c;if(s.PerformanceUtils.mark(s.PerformanceMarkers.create),(O=s.extend({},pl,O)).minZoom!=null&&O.maxZoom!=null&&O.minZoom>O.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(O.minPitch!=null&&O.maxPitch!=null&&O.minPitch>O.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(O.minPitch!=null&&O.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(O.maxPitch!=null&&O.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ul(O.minZoom,O.maxZoom,O.minPitch,O.maxPitch,O.renderWorldCopies),{bearingSnap:O.bearingSnap}),this._interactive=O.interactive,this._cooperativeGestures=O.cooperativeGestures,this._maxTileCacheSize=O.maxTileCacheSize,this._failIfMajorPerformanceCaveat=O.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=O.preserveDrawingBuffer,this._antialias=O.antialias,this._trackResize=O.trackResize,this._bearingSnap=O.bearingSnap,this._refreshExpiredTiles=O.refreshExpiredTiles,this._fadeDuration=O.fadeDuration,this._crossSourceCollisions=O.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=O.collectResourceTiming,this._renderTaskQueue=new Gf,this._controls=[],this._mapId=s.uniqueId(),this._locale=s.extend({},rf,O.locale),this._clickTolerance=O.clickTolerance,this._pixelRatio=(c=O.pixelRatio)!==null&&c!==void 0?c:devicePixelRatio,this._requestManager=new L(O.transformRequest),typeof O.container=="string"){if(this._container=document.getElementById(O.container),!this._container)throw new Error(`Container '${O.container}' not found.`)}else{if(!(O.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=O.container}if(O.maxBounds&&this.setMaxBounds(O.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new zh(this,O),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=O.hash&&new Bu(typeof O.hash=="string"&&O.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:O.center,zoom:O.zoom,bearing:O.bearing,pitch:O.pitch}),O.bounds&&(this.resize(),this.fitBounds(O.bounds,s.extend({},O.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=O.localIdeographFontFamily,O.style&&this.setStyle(O.style,{localIdeographFontFamily:O.localIdeographFontFamily}),O.attributionControl&&this.addControl(new Ms({customAttribution:O.customAttribution})),O.maplibreLogo&&this.addControl(new pu,O.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",_=>{this._update(_.dataType==="style"),this.fire(new s.Event(`${_.dataType}data`,_))}),this.on("dataloading",_=>{this.fire(new s.Event(`${_.dataType}dataloading`,_))}),this.on("dataabort",_=>{this.fire(new s.Event("sourcedataabort",_))})}_getMapId(){return this._mapId}addControl(O,c){if(c===void 0&&(c=O.getDefaultPosition?O.getDefaultPosition():"top-right"),!O||!O.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const _=O.onAdd(this);this._controls.push(O);const k=this._controlPositions[c];return c.indexOf("bottom")!==-1?k.insertBefore(_,k.firstChild):k.appendChild(_),this}removeControl(O){if(!O||!O.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(O);return c>-1&&this._controls.splice(c,1),O.onRemove(this),this}hasControl(O){return this._controls.indexOf(O)>-1}calculateCameraOptionsFromTo(O,c,_,k){return k==null&&this.style.terrain&&(k=this.transform.getElevation(_,this.style.terrain)),super.calculateCameraOptionsFromTo(O,c,_,k)}resize(O){const c=this._containerDimensions(),_=c[0],k=c[1];this._resizeCanvas(_,k,this.getPixelRatio()),this.transform.resize(_,k),this.painter.resize(_,k,this.getPixelRatio());const R=!this._moving;return R&&(this.stop(),this.fire(new s.Event("movestart",O)).fire(new s.Event("move",O))),this.fire(new s.Event("resize",O)),R&&this.fire(new s.Event("moveend",O)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(O){const[c,_]=this._containerDimensions();this._pixelRatio=O,this._resizeCanvas(c,_,O),this.painter.resize(c,_,O)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(O){return this.transform.setMaxBounds(s.LngLatBounds.convert(O)),this._update()}setMinZoom(O){if((O=O??-2)>=-2&&O<=this.transform.maxZoom)return this.transform.minZoom=O,this._update(),this.getZoom()<O&&this.setZoom(O),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(O){if((O=O??22)>=this.transform.minZoom)return this.transform.maxZoom=O,this._update(),this.getZoom()>O&&this.setZoom(O),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(O){if((O=O??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(O>=0&&O<=this.transform.maxPitch)return this.transform.minPitch=O,this._update(),this.getPitch()<O&&this.setPitch(O),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(O){if((O=O??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(O>=this.transform.minPitch)return this.transform.maxPitch=O,this._update(),this.getPitch()>O&&this.setPitch(O),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(O){return this.transform.renderWorldCopies=O,this._update()}project(O){return this.transform.locationPoint(s.LngLat.convert(O),this.style&&this.style.terrain)}unproject(O){return this.transform.pointLocation(s.pointGeometry.convert(O),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(O,c,_){if(O==="mouseenter"||O==="mouseover"){let k=!1;return{layer:c,listener:_,delegates:{mousemove:W=>{const q=this.getLayer(c)?this.queryRenderedFeatures(W.point,{layers:[c]}):[];q.length?k||(k=!0,_.call(this,new ms(O,this,W.originalEvent,{features:q}))):k=!1},mouseout:()=>{k=!1}}}}if(O==="mouseleave"||O==="mouseout"){let k=!1;return{layer:c,listener:_,delegates:{mousemove:q=>{(this.getLayer(c)?this.queryRenderedFeatures(q.point,{layers:[c]}):[]).length?k=!0:k&&(k=!1,_.call(this,new ms(O,this,q.originalEvent)))},mouseout:q=>{k&&(k=!1,_.call(this,new ms(O,this,q.originalEvent)))}}}}{const k=R=>{const W=this.getLayer(c)?this.queryRenderedFeatures(R.point,{layers:[c]}):[];W.length&&(R.features=W,_.call(this,R),delete R.features)};return{layer:c,listener:_,delegates:{[O]:k}}}}on(O,c,_){if(_===void 0)return super.on(O,c);const k=this._createDelegatedListener(O,c,_);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[O]=this._delegatedListeners[O]||[],this._delegatedListeners[O].push(k);for(const R in k.delegates)this.on(R,k.delegates[R]);return this}once(O,c,_){if(_===void 0)return super.once(O,c);const k=this._createDelegatedListener(O,c,_);for(const R in k.delegates)this.once(R,k.delegates[R]);return this}off(O,c,_){return _===void 0?super.off(O,c):(this._delegatedListeners&&this._delegatedListeners[O]&&(k=>{const R=this._delegatedListeners[O];for(let W=0;W<R.length;W++){const q=R[W];if(q.layer===c&&q.listener===_){for(const ue in q.delegates)this.off(ue,q.delegates[ue]);return R.splice(W,1),this}}})(),this)}queryRenderedFeatures(O,c){if(!this.style)return[];let _;if(c!==void 0||O===void 0||O instanceof s.pointGeometry||Array.isArray(O)||(c=O,O=void 0),c=c||{},(O=O||[[0,0],[this.transform.width,this.transform.height]])instanceof s.pointGeometry||typeof O[0]=="number")_=[s.pointGeometry.convert(O)];else{const k=s.pointGeometry.convert(O[0]),R=s.pointGeometry.convert(O[1]);_=[k,new s.pointGeometry(R.x,k.y),R,new s.pointGeometry(k.x,R.y),k]}return this.style.queryRenderedFeatures(_,c,this.transform)}querySourceFeatures(O,c){return this.style.querySourceFeatures(O,c)}setStyle(O,c){return(c=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},c)).diff!==!1&&c.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&O?(this._diffStyle(O,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._updateStyle(O,c))}setTransformRequest(O){return this._requestManager.setTransformRequest(O),this}_getUIString(O){const c=this._locale[O];if(c==null)throw new Error(`Missing UI string '${O}'`);return c}_updateStyle(O,c){return this.style&&(this.style.setEventedParent(null),this.style._remove()),O?(this.style=new oo(this,c||{}),this.style.setEventedParent(this,{style:this.style}),typeof O=="string"?this.style.loadURL(O):this.style.loadJSON(O),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new oo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(O,c){if(typeof O=="string"){const _=this._requestManager.transformRequest(O,s.ResourceType.Style);s.getJSON(_,(k,R)=>{k?this.fire(new s.ErrorEvent(k)):R&&this._updateDiff(R,c)})}else typeof O=="object"&&this._updateDiff(O,c)}_updateDiff(O,c){try{this.style.setState(O)&&this._update(!0)}catch(_){s.warnOnce(`Unable to perform style diff: ${_.message||_.error||_}.  Rebuilding the style from scratch.`),this._updateStyle(O,c)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.warnOnce("There is no style added to the map.")}addSource(O,c){return this._lazyInitEmptyStyle(),this.style.addSource(O,c),this._update(!0)}isSourceLoaded(O){const c=this.style&&this.style.sourceCaches[O];if(c!==void 0)return c.loaded();this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${O}'`)))}setTerrain(O){return this.style.setTerrain(O),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const O=this.style&&this.style.sourceCaches;for(const c in O){const _=O[c]._tiles;for(const k in _){const R=_[k];if(R.state!=="loaded"&&R.state!=="errored")return!1}}return!0}addSourceType(O,c,_){return this._lazyInitEmptyStyle(),this.style.addSourceType(O,c,_)}removeSource(O){return this.style.removeSource(O),this._update(!0)}getSource(O){return this.style.getSource(O)}addImage(O,c,{pixelRatio:_=1,sdf:k=!1,stretchX:R,stretchY:W,content:q}={}){if(this._lazyInitEmptyStyle(),c instanceof HTMLImageElement||s.isImageBitmap(c)){const{width:ue,height:he,data:be}=s.exported.getImageData(c);this.style.addImage(O,{data:new s.RGBAImage({width:ue,height:he},be),pixelRatio:_,stretchX:R,stretchY:W,content:q,sdf:k,version:0})}else{if(c.width===void 0||c.height===void 0)return this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ue,height:he,data:be}=c,Te=c;this.style.addImage(O,{data:new s.RGBAImage({width:ue,height:he},new Uint8Array(be)),pixelRatio:_,stretchX:R,stretchY:W,content:q,sdf:k,version:0,userImage:Te}),Te.onAdd&&Te.onAdd(this,O)}}}updateImage(O,c){const _=this.style.getImage(O);if(!_)return this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const k=c instanceof HTMLImageElement||s.isImageBitmap(c)?s.exported.getImageData(c):c,{width:R,height:W,data:q}=k;if(R===void 0||W===void 0)return this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(R!==_.data.width||W!==_.data.height)return this.fire(new s.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const ue=!(c instanceof HTMLImageElement||s.isImageBitmap(c));_.data.replace(q,ue),this.style.updateImage(O,_)}hasImage(O){return O?!!this.style.getImage(O):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(O){this.style.removeImage(O)}loadImage(O,c){s.getImage(this._requestManager.transformRequest(O,s.ResourceType.Image),c)}listImages(){return this.style.listImages()}addLayer(O,c){return this._lazyInitEmptyStyle(),this.style.addLayer(O,c),this._update(!0)}moveLayer(O,c){return this.style.moveLayer(O,c),this._update(!0)}removeLayer(O){return this.style.removeLayer(O),this._update(!0)}getLayer(O){return this.style.getLayer(O)}setLayerZoomRange(O,c,_){return this.style.setLayerZoomRange(O,c,_),this._update(!0)}setFilter(O,c,_={}){return this.style.setFilter(O,c,_),this._update(!0)}getFilter(O){return this.style.getFilter(O)}setPaintProperty(O,c,_,k={}){return this.style.setPaintProperty(O,c,_,k),this._update(!0)}getPaintProperty(O,c){return this.style.getPaintProperty(O,c)}setLayoutProperty(O,c,_,k={}){return this.style.setLayoutProperty(O,c,_,k),this._update(!0)}getLayoutProperty(O,c){return this.style.getLayoutProperty(O,c)}setLight(O,c={}){return this._lazyInitEmptyStyle(),this.style.setLight(O,c),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(O,c){return this.style.setFeatureState(O,c),this._update()}removeFeatureState(O,c){return this.style.removeFeatureState(O,c),this._update()}getFeatureState(O){return this.style.getFeatureState(O)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let O=0,c=0;return this._container&&(O=this._container.clientWidth||400,c=this._container.clientHeight||300),[O,c]}_setupContainer(){const O=this._container;O.classList.add("maplibregl-map","mapboxgl-map");const c=this._canvasContainer=P.create("div","maplibregl-canvas-container mapboxgl-canvas-container",O);this._interactive&&c.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas mapboxgl-canvas",c),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const _=this._containerDimensions();this._resizeCanvas(_[0],_[1],this.getPixelRatio());const k=this._controlContainer=P.create("div","maplibregl-control-container mapboxgl-control-container",O),R=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(W=>{R[W]=P.create("div",`maplibregl-ctrl-${W} mapboxgl-ctrl-${W}`,k)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const O=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=P.create("div","maplibregl-cooperative-gesture-screen",O);let c="Control",_=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(_=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map",c="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${_}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",k=>{k.key===c&&(this._metaPress=!0)}),document.addEventListener("keyup",k=>{k.key===c&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",k=>{this._onCooperativeGesture(k,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(O,c,_){this._canvas.width=_*O,this._canvas.height=_*c,this._canvas.style.width=`${O}px`,this._canvas.style.height=`${c}px`}_setupPainter(){const O=s.extend({},d.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),c=this._canvas.getContext("webgl",O)||this._canvas.getContext("experimental-webgl",O);c?(this.painter=new Zl(c,this.transform),s.exported$1.testSupport(c)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(O){O.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:O}))}_contextRestored(O){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:O}))}_onMapScroll(O){if(O.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(O,c,_){return!c&&_<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(O){return this.style?(this._styleDirty=this._styleDirty||O,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(O){return this._update(),this._renderTaskQueue.add(O)}_cancelRenderFrame(O){this._renderTaskQueue.remove(O)}_render(O){let c,_=0;const k=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(c=k.createQueryEXT(),k.beginQueryEXT(k.TIME_ELAPSED_EXT,c),_=s.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(O),this._removed)return;let R=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const q=this.transform.zoom,ue=s.exported.now();this.style.zoomHistory.update(q,ue);const he=new s.EvaluationParameters(q,{now:ue,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),be=he.crossFadingFactor();be===1&&be===this._crossFadingFactor||(R=!0,this._crossFadingFactor=be),this.style.update(he)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.PerformanceUtils.mark(s.PerformanceMarkers.load),this.fire(new s.Event("load"))),this.style&&(this.style.hasTransitions()||R)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const q=s.exported.now()-_;k.endQueryEXT(k.TIME_ELAPSED_EXT,c),setTimeout(()=>{const ue=k.getQueryObjectEXT(c,k.QUERY_RESULT_EXT)/1e6;k.deleteQueryEXT(c),this.fire(new s.Event("gpu-timing-frame",{cpuTime:q,gpuTime:ue}))},50)}if(this.listens("gpu-timing-layer")){const q=this.painter.collectGpuTimers();setTimeout(()=>{const ue=this.painter.queryGpuTimers(q);this.fire(new s.Event("gpu-timing-layer",{layerTimes:ue}))},50)}const W=this._sourcesDirty||this._styleDirty||this._placementDirty;return W||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.Event("idle")),!this._loaded||this._fullyLoaded||W||(this._fullyLoaded=!0,s.PerformanceUtils.mark(s.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const O=this.painter.context.gl.getExtension("WEBGL_lose_context");O&&O.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._cooperativeGestures&&P.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),s.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=s.exported.frame(O=>{s.PerformanceUtils.frame(O),this._frame=null,this._render(O)}))}_onWindowOnline(){this._update()}_onWindowResize(O){this._trackResize&&this.resize({originalEvent:O})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(O){this._showTileBoundaries!==O&&(this._showTileBoundaries=O,this._update())}get showPadding(){return!!this._showPadding}set showPadding(O){this._showPadding!==O&&(this._showPadding=O,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(O){this._showCollisionBoxes!==O&&(this._showCollisionBoxes=O,O?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(O){this._showOverdrawInspector!==O&&(this._showOverdrawInspector=O,this._update())}get repaint(){return!!this._repaint}set repaint(O){this._repaint!==O&&(this._repaint=O,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(O){this._vertices=O,this._update()}_setCacheLimits(O,c){s.setCacheLimits(O,c)}get version(){return"2.4.0"}},NavigationControl:class{constructor(O){this.options=s.extend({},Cp,O),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",c=>c.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",c=>this._map.zoomIn({},{originalEvent:c})),P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",c=>this._map.zoomOut({},{originalEvent:c})),P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",c=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:c}):this._map.resetNorth({},{originalEvent:c})}),this._compassIcon=P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const O=this._map.getZoom(),c=O===this._map.getMaxZoom(),_=O===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())}_rotateCompassArrow(){const O=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=O}onAdd(O){return this._map=O,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new yi(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(O,c){const _=P.create("button",O,this._container);return _.type="button",_.addEventListener("click",c),_}_setButtonTitle(O,c){const _=this._map._getUIString(`NavigationControl.${c}`);O.title=_,O.setAttribute("aria-label",_)}},GeolocateControl:class extends s.Evented{constructor(O){super(),this.options=s.extend({},du,O),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(O){var c;return this._map=O,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,jo!==void 0?c(jo):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(_=>{jo=_.state!=="denied",c(jo)}):(jo=!!window.navigator.geolocation,c(jo)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Va=0,go=!1}_isOutOfMapMaxBounds(O){const c=this._map.getMaxBounds(),_=O.coords;return c&&(_.longitude<c.getWest()||_.longitude>c.getEast()||_.latitude<c.getSouth()||_.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(O){if(this._map){if(this._isOutOfMapMaxBounds(O))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",O)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=O,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(O),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(O),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",O)),this._finish()}}_updateCamera(O){const c=new s.LngLat(O.coords.longitude,O.coords.latitude),_=O.coords.accuracy,k=this._map.getBearing(),R=s.extend({bearing:k},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(_),R,{geolocateSource:!0})}_updateMarker(O){if(O){const c=new s.LngLat(O.coords.longitude,O.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=O.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const O=this._map._container.clientHeight/2,c=this._map.unproject([0,O]),_=this._map.unproject([1,O]),k=c.distanceTo(_),R=Math.ceil(2*this._accuracy/k);this._circleElement.style.width=`${R}px`,this._circleElement.style.height=`${R}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(O){if(this._map){if(this.options.trackUserLocation)if(O.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(O.code===3&&go)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",O)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(O){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",O===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Uo(this._dotElement),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Uo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Va--,go=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let O;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Va++,Va>1?(O={maximumAge:6e5,timeout:0},go=!0):(O=this.options.positionOptions,go=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,O)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ms,LogoControl:pu,ScaleControl:class{constructor(O){this.options=s.extend({},Co,O),s.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){un(this._map,this._container,this.options)}onAdd(O){return this._map=O,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",O.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(O){this.options.unit=O,un(this._map,this._container,this.options)}},FullscreenControl:class{constructor(O){this._fullscreen=!1,O&&O.container&&(O.container instanceof HTMLElement?this._container=O.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(O){return this._map=O,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const O=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",O).setAttribute("aria-hidden","true"),O.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const O=this._getTitle();this._fullscreenButton.setAttribute("aria-label",O),this._fullscreenButton.title=O}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(O){this.options=O,s.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(O){return this._map=O,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=P.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){P.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends s.Evented{constructor(O){super(),this.options=s.extend(Object.create(na),O),s.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(O){return this._map&&this.remove(),this._map=O,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(O){return this._lngLat=s.LngLat.convert(O),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(O){return this.setDOMContent(document.createTextNode(O))}setHTML(O){const c=document.createDocumentFragment(),_=document.createElement("body");let k;for(_.innerHTML=O;k=_.firstChild,k;)c.appendChild(k);return this.setDOMContent(c)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(O){return this.options.maxWidth=O,this._update(),this}setDOMContent(O){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(O),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(O){this._container&&this._container.classList.add(O)}removeClassName(O){this._container&&this._container.classList.remove(O)}setOffset(O){return this.options.offset=O,this._update(),this}toggleClassName(O){if(this._container)return this._container.classList.toggle(O)}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(O){this._update(O.point)}_onMouseMove(O){this._update(O.point)}_onDrag(O){this._update(O.point)}_update(O){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=P.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(W=>this._container.classList.add(W)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=vi(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!O))return;const c=this._pos=this._trackPointer&&O?O:this._map.project(this._lngLat);let _=this.options.anchor;const k=Dl(this.options.offset);if(!_){const W=this._container.offsetWidth,q=this._container.offsetHeight;let ue;ue=c.y+k.bottom.y<q?["top"]:c.y>this._map.transform.height-q?["bottom"]:[],c.x<W/2?ue.push("left"):c.x>this._map.transform.width-W/2&&ue.push("right"),_=ue.length===0?"bottom":ue.join("-")}const R=c.add(k[_]).round();P.setTransform(this._container,`${Tn[_]} translate(${R.x}px,${R.y}px)`),zn(this._container,_,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const O=this._container.querySelector(ua);O&&O.focus()}_onClose(){this.remove()}},Marker:Uo,Style:oo,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.pointGeometry,MercatorCoordinate:s.MercatorCoordinate,Evented:s.Evented,AJAXError:s.AJAXError,config:s.config,CanvasSource:Ge,GeoJSONSource:Rt,ImageSource:Zt,RasterDEMTileSource:it,RasterTileSource:Ne,VectorTileSource:Ie,VideoSource:Kt,prewarm:function(){Li().acquire(Qn)},clearPrewarmedResources:function(){const O=Xn;O&&(O.isPreloaded()&&O.numActive()===1?(O.release(Qn),Xn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return an.workerCount},set workerCount(O){an.workerCount=O},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(O){s.config.MAX_PARALLEL_IMAGE_REQUESTS=O},clearStorage(O){s.clearTileCache(O)},workerUrl:"",addProtocol(O,c){s.config.REGISTERED_PROTOCOLS[O]=c},removeProtocol(O){delete s.config.REGISTERED_PROTOCOLS[O]}};return Gs.extend(zo,{isSafari:s.isSafari,getPerformanceMetrics:s.PerformanceUtils.getPerformanceMetrics}),zo});var a=i;return a})})(QV);var iDe=QV.exports;const Rb=Xs(iDe),aDe=e=>{const t=e&&e.current;return t?t.getBoundingClientRect():{width:0,height:0}},oDe=(e,t)=>{const[r,n]=Ee.useState({width:0,height:0,x:0,y:0}),i=Ee.useCallback(()=>{const l=aDe(e),{width:a,height:s,x:d,y:v}=l;(a!==r.width||s!==r.height)&&(typeof t=="function"&&t({width:a,height:s,x:d,y:v}),n({width:a,height:s,x:d,y:v}))},[e,r,t]);return Ee.useEffect(()=>(window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}),[i]),Ee.useEffect(()=>{i()}),r},sDe=({onClick:e,cursor:t="cursor-pointer",className:r="",style:n={},children:i})=>ae("div",{onClick:e,className:`
        ${t} ${r} transition h-6 w-6
        hover:text-blue-500 flex items-center justify-center
      `,style:{...n},children:i}),lDe=(e,{width:t,height:r})=>{const{x:l,y:a}=e,s=r,d=`max(
      10px,
      min(calc(${a}px - 50%), calc(${s-10}px - 100%))
    )`;return l<t*.5?`translate(
      ${l+30}px,
      ${d}
    )`:`translate(
    calc(-100% + ${l-30}px),
    ${d}
  )`},uDe=({x:e,y:t},r)=>{const i=`calc(${t}px - 50%)`;return r==="right"?`translate(
      ${e+30}px,
      ${i}
    )`:`translate(
    calc(-100% + ${e-30}px),
    ${i}
  )`},cDe=({x:e},t)=>t==="right"?"translate(-50%, -50%) rotate(45deg) skew(-15deg, -15deg)":"translate(50%, -50%) rotate(45deg) skew(-15deg, -15deg)",fDe=({orientation:e,children:t})=>ae("div",{style:{transform:e==="left"?"translate(-0.75rem, -0.75rem)":"translate(0.75rem, -0.75rem)"},className:`
        bg-white
        rounded absolute inline-block top-0 z-20
        ${e==="left"?"left-0":"right-0"}
      `,children:t}),hDe=({children:e,remove:t,id:r,project:n,lngLat:i,width:l})=>{const a=n(i),s=Ee.useRef(a.x<l*.5?"right":"left"),d=Ee.useMemo(()=>({top:"50%",transform:cDe(a,s.current)}),[a]);return Ft("div",{className:`
        absolute top-0 left-0 z-20 inline-block
        rounded whitespace-nowrap hover-comp
        pointer-events-auto
        bg-white
        grid grid-cols-1 gap-1
      `,style:{transform:uDe(a,s.current),boxShadow:"2px 2px 8px 0px rgba(0, 0, 0, 0.75)"},children:[ae("div",{className:`
          absolute w-6 h-6bg-white rounded-bl rounded-tr
          ${s.current==="left"?"right-0":"left-0"}
        `,style:d}),e,ae(fDe,{orientation:s.current,children:ae(sDe,{onClick:v=>t(r),children:ae("span",{className:"fa fa-times"})})})]})},pDe=({show:e,children:t,lngLat:r,project:n,...i})=>{const l=n(r);return ae("div",{className:`
        absolute top-0 left-0 z-20
        rounded whitespace-nowrap hover-comp
        pointer-events-none
        grid grid-cols-1 gap-1
      `,style:{display:e?"grid":"none",transform:lDe(l,i),boxShadow:"2px 2px 8px 0px rgba(0, 0, 0, 0.75)"},children:t})},dDe=({activeLayers:e,width:t=320,padding:r=8,MapActions:n,layerStates:i,...l})=>{const[a,s]=Ee.useMemo(()=>e.reduce((d,v)=>{const S=v.infoBoxes.filter(({show:A=!0})=>{let P=A;return typeof A=="function"&&(P=A(v)),P});return S.length&&(d[0].push([v,S]),d[1]=Math.max(d[1],v.infoBoxes.reduce((A,P)=>Math.max(A,Qt(P,"width",0)),0))),d},[[],[],t]),[e,t,i]);return ae("div",{className:`
        absolute right-0 top-0 bottom-0 flex flex-col items-end z-30
        pointer-events-none 
      `,style:{padding:`${r}px`},children:a.length?ae("div",{style:{width:`${s-r*2}px`},children:a.map(([d,v],S)=>ae("div",{children:v.map((A,P)=>ae(mDe,{...l,...A,layer:d,MapActions:n,activeLayers:e},P))},S))}):null})},mDe=({layer:e,Component:t,MapActions:r,...n})=>ae(Pu,{children:t?ae(Pu,{children:typeof t=="function"?ae(t,{layer:e,MapActions:r,...n}):t}):null}),gDe=[{name:"Light",style:"https://api.maptiler.com/maps/dataviz-light/style.json?key=mU28JQ6HchrQdneiq6k9"},{name:"Dark",style:"https://api.maptiler.com/maps/dataviz-dark/style.json?key=mU28JQ6HchrQdneiq6k9"},{name:"Streets",style:"https://api.maptiler.com/maps/streets-v2/style.json?key=mU28JQ6HchrQdneiq6k9"},{name:"Satellite Streets",style:"https://api.maptiler.com/maps/hybrid/style.json?key=mU28JQ6HchrQdneiq6k9"}],yDe={center:[-74.180647,42.58],minZoom:2,zoom:10,preserveDrawingBuffer:!0,styles:gDe,attributionControl:!1,maplibreLogo:!1,logoPosition:"bottom-left"};let vDe=0;const tq=()=>`unique-id-${++vDe}`,_De={map:null,initializedLayers:[],activeLayers:[],dynamicLayers:[],layersLoading:{},hoverData:{data:new Map,pos:[0,0],lngLat:{}},pinnedHoverComps:[],pinnedMapMarkers:[],mapStyles:[],styleIndex:0,sidebarTabIndex:0,modalData:[],prevLayerStates:{},layerStates:{},prevLayerProps:{}},bDe=(e,t)=>{const{type:r,...n}=t;switch(r){case"init-layer":return{...e,initializedLayers:[...e.initializedLayers,n.layer.id]};case"loading-start":return{...e,layersLoading:{...e.layersLoading,[n.layerId]:Qt(e,["layersLoading",n.layerId],0)+1}};case"loading-stop":return{...e,layersLoading:{...e.layersLoading,[n.layerId]:Math.max(0,e.layersLoading[n.layerId]-1)}};case"activate-layer":return{...e,activeLayers:[n.layer,...e.activeLayers],layerStates:{...e.layerStates,[n.layer.id]:n.layer.state}};case"deactivate-layer":return{...e,activeLayers:e.activeLayers.filter(({id:i})=>i!==n.layerId),layerStates:{...e.layerStates,[n.layerId]:{}},prevLayerStates:{...e.layerStates,[n.layerId]:{}}};case"hover-layer-move":{const{data:i,layer:l,HoverComp:a,pinnable:s,sortOrder:d,...v}=n;return e.hoverData.data.set(l.id,{data:i,HoverComp:a,layer:l,pinnable:s,sortOrder:d}),{...e,hoverData:{...e.hoverData,...v}}}case"hover-layer-leave":{const{layer:i}=n;return e.hoverData.data.delete(i.id),{...e,hoverData:{...e.hoverData}}}case"pin-hover-comp":{if(!e.hoverData.data.size)return e;const i={id:tq(),HoverComps:[...e.hoverData.data.values()].filter(({pinnable:l})=>l).sort((l,a)=>l.sortOrder-a.sortOrder),...n};return i.HoverComps.length?{...e,pinnedHoverComps:[...e.pinnedHoverComps,i]}:e}case"remove-pinned":return{...e,pinnedHoverComps:e.pinnedHoverComps.filter(i=>i.id!==n.id?!0:(i.marker.remove(),!1))};case"add-dynamic-layer":return{...e,dynamicLayers:[...e.dynamicLayers,n.layer]};case"remove-dynamic-layer":return{...e,dynamicLayers:e.dynamicLayers.filter(({id:i})=>i!==n.layer.id)};case"show-modal":{const{layerId:i,modalKey:l}=n;return e.modalData.reduce((a,s)=>a||s.layerId===i&&s.modalKey===l,!1)?e:{...e,modalData:[...e.modalData,{layerId:i,modalKey:l,zIndex:0}]}}case"bring-modal-to-front":{const{layerId:i,modalKey:l}=n;return{...e,modalData:e.modalData.map(a=>({...a,zIndex:a.layerId===i&&a.modalKey===l?10:0}))}}case"close-modal":return{...e,modalData:e.modalData.filter(({layerId:i,modalKey:l})=>!(i===n.layerId&&l===n.modalKey))};case"layer-update":{const{layer:i,newState:l}=n;return{...e,layerStates:{...e.layerStates,[i.id]:l}}}case"update-prev":{const{layerProps:i,updateProps:l,updateStates:a}=n;let s=e.prevLayerProps;l.length&&(s={...e.prevLayerProps,...l.reduce((v,S)=>(v[S.id]=Qt(i,S.id,{}),v),{})});let d=e.prevLayerStates;return a.length&&(d={...e.prevLayerStates,...a.reduce((v,S)=>(v[S.id]=Qt(e.layerStates,S.id,{}),v),{})}),{...e,prevLayerProps:s,prevLayerStates:d}}case"set-map-style":case"switch-tab":case"map-loaded":case"update-state":return{...e,...n};default:return e}},xDe=[],wN={},wDe=e=>{const{accessToken:t,mapOptions:r=wN,layers:n=xDe,Sidebar:i=null,layerProps:l=wN,navigationControl:a="bottom-right",falcor:s=()=>{}}=e,[d,v]=Ee.useReducer(bDe,_De),S=Ee.useCallback(Bt=>{v(Bt)},[]),A=Ee.useCallback(Bt=>d.map.project(Bt),[d.map]),P=Ee.useCallback((Bt,hr,cr)=>{if(!Qt(Bt,["filters",hr],null))return;v({type:"loading-start",layerId:Bt.id});const Mn=Bt.filters[hr].value;Bt.filters={...Bt.filters,[hr]:{...Bt.filters[hr],prevValue:Mn,value:cr}};const Hn=Qt(l,Bt.id,{});Promise.resolve(Bt.onFilterChange(hr,cr,Mn,Hn)).then(()=>Bt.fetchData(s,Hn)).then(()=>Bt.render(d.map,s,Hn)).then(()=>{v({type:"loading-stop",layerId:Bt.id})})},[d.map,s,l]),L=Ee.useCallback(Bt=>{v({type:"loading-start",layerId:Bt.id}),Promise.resolve(Bt.fetchData(s)).then(()=>Bt.render(d.map,s)).then(()=>{v({type:"loading-stop",layerId:Bt.id})})},[d.map,s]),F=Ee.useCallback((Bt,hr)=>{Qt(Bt,"legend",null)&&(Bt.legend={...Bt.legend,...hr},Bt.render(d.map,s),v({type:"update-state"}))},[d.map,s]),K=Ee.useCallback(Bt=>{Bt.isDynamic=!0,v({type:"add-dynamic-layer",layer:Bt})},[]),re=Ee.useCallback(Bt=>{Bt._onRemove(d.map),v({type:"remove-dynamic-layer",layer:Bt})},[d.map]),G=Ee.useCallback(Bt=>{Bt.toggleVisibility(d.map),v({type:"update-state"})},[d.map]),H=Ee.useCallback(Bt=>{Bt._onAdd(d.map,s,S),v({type:"activate-layer",layer:Bt})},[d.map,s,S]),B=Ee.useCallback(Bt=>{Bt._onRemove(d.map),v({type:"deactivate-layer",layerId:Bt.id})},[d.map]),$=Ee.useCallback(Bt=>{v({type:"switch-tab",sidebarTabIndex:Bt})},[]),N=Ee.useCallback((Bt,hr)=>{v({type:"show-modal",layerId:Bt,modalKey:hr})},[]),z=Ee.useCallback((Bt,hr)=>{v({type:"close-modal",layerId:Bt,modalKey:hr})},[]),X=Ee.useCallback((Bt,hr)=>{v({type:"bring-modal-to-front",layerId:Bt,modalKey:hr})},[]),te=Ee.useCallback(Bt=>{v({type:"remove-pinned",id:Bt})},[]),pe=Ee.useCallback(({lngLat:Bt,hoverData:hr})=>{if(hr.pinnable){const cr=new Rb.Marker().setLngLat(Bt).addTo(d.map);v({type:"pin-hover-comp",marker:cr,lngLat:Bt})}},[d.map]),ke=Ee.useCallback((Bt="map.png")=>{const hr=d.map.getCanvas(),cr=document.createElement("a");cr.download=Bt,cr.href=hr.toDataURL(),cr.click()},[d.map]),Pe=Ee.useCallback(Bt=>{d.map.once("style.load",hr=>{d.activeLayers.slice().reverse().reduce((cr,Mn)=>cr.then(()=>Mn.onMapStyleChange(d.map,s,S)),Promise.resolve())}),d.activeLayers.forEach(hr=>{hr._onRemove(d.map)}),console.log("setStyle"),d.map.setStyle(d.mapStyles[Bt].style),v({type:"set-map-style",styleIndex:Bt})},[d.map,d.mapStyles,d.activeLayers,S,s]),ge=Ee.useMemo(()=>({toggleVisibility:G,addLayer:H,removeLayer:B,addDynamicLayer:K,removeDynamicLayer:re,updateLegend:F,setSidebarTab:$,showModal:N,closeModal:z,updateFilter:P,fetchData:L,removePinnedHoverComp:te,addPinnedHoverComp:pe,bringModalToFront:X,projectLngLat:A,saveMapAsImage:ke}),[G,H,B,K,re,F,$,L,ke,N,z,P,X,te,pe,A]),Ie=Ee.useRef({...yDe,...r}),Ne=Ee.useRef(e.id||tq());Ee.useEffect(()=>{if(!t)return;Rb.accessToken=t;const Bt=/^mapbox:\/\/styles\//,{style:hr,styles:cr,...Mn}=Ie.current,Hn=cr.map(ki=>({...ki}));let Qn=0;if(Bt.test(hr)){const ki=Hn.reduce((Xn,Li,Pi)=>Li.style===hr?Pi:Xn,-1);ki===-1?Hn.unshift({name:"Unspecified Style",style:hr}):Qn=ki}const an=new Rb.Map({container:Ne.current,logoControl:!1,...Mn,style:Hn[Qn].style});return a&&an.addControl(new Rb.NavigationControl,a),an.on("move",ki=>{v({type:"update-state",mapMoved:performance.now()})}),an.once("load",ki=>{v({type:"map-loaded",map:an,mapStyles:Hn,styleIndex:Qn})}),()=>an.remove()},[t,a]),Ee.useEffect(()=>{d.map&&[...n,...d.dynamicLayers].filter(({id:Bt})=>!d.initializedLayers.includes(Bt)).reverse().reduce((Bt,hr)=>{v({type:"init-layer",layer:hr}),hr.dispatchStateUpdate=(cr,Mn)=>{v({type:"layer-update",newState:Mn,layer:cr})},hr.props=Qt(l,hr.id,{});for(const cr in hr.filters)hr.filters[cr].onChange=Mn=>P(hr,cr,Mn);return hr.toolbar.forEach(cr=>{typeof cr.action=="function"&&(cr.actionFunc=cr.action.bind(hr))}),hr.mapActions.forEach(cr=>{cr.actionFunc=cr.action.bind(hr)}),Bt.then(()=>hr._init(d.map,s,ge)).then(()=>{hr.setActive&&hr.fetchData(s).then(()=>hr._onAdd(d.map,s,S)).then(()=>v({type:"activate-layer",layer:hr}))})},Promise.resolve())},[d.map,d.dynamicLayers,s,n,ge,P,S,d.initializedLayers,l]);const lt=Ee.useCallback(({lngLat:Bt})=>{if(d.hoverData.pinnable){const hr=new Rb.Marker().setLngLat(Bt).addTo(d.map);v({type:"pin-hover-comp",marker:hr,lngLat:Bt})}},[d.map,d.hoverData.pinnable]),it=!!d.hoverData.data.size;Ee.useEffect(()=>{if(it)return d.map.on("click",lt),()=>d.map.off("click",lt)},[d.map,lt,it]);const Rt=Ee.useMemo(()=>[...n,...d.dynamicLayers].filter(Bt=>!!d.layersLoading[Bt.id]),[n,d.dynamicLayers,d.layersLoading]),{HoverComps:St,...Zt}=Ee.useMemo(()=>{const Bt=[...d.hoverData.data.values()].sort((hr,cr)=>hr.sortOrder-cr.sortOrder);return{...d.hoverData,show:!!Bt.length,HoverComps:Bt}},[d.hoverData]),Kt=Ee.useMemo(()=>[...n,...d.dynamicLayers].filter(Bt=>!d.initializedLayers.includes(Bt.id)||!d.activeLayers.includes(Bt)),[n,d.dynamicLayers,d.initializedLayers,d.activeLayers]);Ee.useEffect(()=>{const Bt=[],hr=[];d.activeLayers.forEach(cr=>{cr.props=Qt(l,cr.id,{});const Mn=Qt(l,cr.id,null),Hn=Qt(d.prevLayerProps,cr.id,null);rm(Mn,Hn)||Bt.push(cr);const Qn=Qt(d.layerStates,cr.id,null),an=Qt(d.prevLayerStates,cr.id,null);Qn!==an&&hr.push(cr)}),Bt.forEach(cr=>{L(cr)}),hr.forEach(cr=>{cr.render(d.map,s)}),(Bt.length||hr.length)&&v({type:"update-prev",layerProps:l,updateProps:Bt,updateStates:hr})},[l,d.layerStates]);const Ge=Ee.useRef(null),Ye=oDe(Ge),Dr=Ee.useMemo(()=>({...ge,setMapStyle:Pe}),[ge,Pe]),wr=Ee.useCallback(()=>Ge.current?Ge.current.getBoundingClientRect():{width:0,height:0},[]),{width:tr,height:br}=wr();return Ee.useEffect(()=>{d.map&&d.map.resize()},[tr,br,d.map]),Ft("div",{ref:Ge,className:"w-full h-full relative focus:outline-none",children:[ae("div",{id:Ne.current,className:"w-full h-full relative"}),i?ae(i,{mapboxMap:d.map,layerStates:d.layerStates,sidebarTabIndex:d.sidebarTabIndex,mapStyles:d.mapStyles,styleIndex:d.styleIndex,layersLoading:d.layersLoading,inactiveLayers:Kt,activeLayers:d.activeLayers,loadingLayers:Rt,MapActions:Dr}):ae("span",{}),ae(dDe,{activeLayers:d.activeLayers,layersLoading:d.layersLoading,loadingLayers:Rt,inactiveLayers:Kt,MapActions:Dr,mapboxMap:d.map,layerStates:d.layerStates}),Ft("div",{className:`
        absolute top-0 bottom-0 left-0 right-0 z-50
        pointer-events-none overflow-hidden
      `,children:[d.pinnedHoverComps.map(({HoverComps:Bt,data:hr,id:cr,...Mn})=>Fe.createElement(hDe,{...Mn,...Ye,remove:te,project:A,key:cr,id:cr},Bt.map(({HoverComp:Hn,data:Qn,layer:an},ki)=>ae(Hn,{layer:an,data:Qn,activeLayers:d.activeLayers,layersLoading:d.layersLoading,loadingLayers:Rt,inactiveLayers:Kt,MapActions:Dr,mapboxMap:d.map,layerStates:d.layerStates,pinned:!0},an.id)))),d.hoverData.data.size?ae(pDe,{...Zt,...Ye,project:A,children:St.map(({HoverComp:Bt,data:hr,layer:cr},Mn)=>ae(Bt,{layer:cr,data:hr,activeLayers:d.activeLayers,layersLoading:d.layersLoading,loadingLayers:Rt,inactiveLayers:Kt,MapActions:Dr,mapboxMap:d.map,layerStates:d.layerStates,pinned:!1},cr.id))}):null]})]})},SDe=e=>e==="http://localhost:3369"?"http://localhost:3370":e+"/tiles",SN=SDe(t3),EDe=({views:e})=>{const{viewId:t,sourceId:r,page:n}=rc(),i=Yc();return Ft("div",{className:"flex",children:[ae("div",{className:"py-3.5 px-2 text-sm text-gray-400",children:"Version : "}),ae("div",{className:"flex-1",children:ae("select",{className:"pl-3 pr-4 py-2.5 border border-blue-100 bg-blue-50 w-full bg-white mr-2 flex items-center justify-between text-sm",value:t,onChange:l=>i(`/source/${r}/${n}/${l.target.value}`),children:e.sort((l,a)=>a.view_id-l.view_id).map((l,a)=>ae("option",{className:"ml-2  truncate",value:l.view_id,children:l.version?l.version:l.view_id},a))})})]})},CDe=({source:e,filters:t,setFilters:r})=>{var i;const n=Qt(e,"metadata",[]).filter(l=>["number"].includes(l.type)).sort((l,a)=>l.name-a.name).map(l=>l.name);return Ft("div",{className:"flex flex-1",children:[ae("div",{className:"py-3.5 px-2 text-sm text-gray-400",children:"Variable : "}),ae("div",{className:"flex-1",children:Ft("select",{className:"pl-3 pr-4 py-2.5 border border-blue-100 bg-blue-50 w-full bg-white mr-2 flex items-center justify-between text-sm",value:(i=t==null?void 0:t.activeVar)==null?void 0:i.value,onChange:l=>r({activeVar:{value:l.target.value}}),children:[ae("option",{className:"ml-2  truncate",value:null,children:"none"}),n==null?void 0:n.map((l,a)=>ae("option",{className:"ml-2  truncate",value:l,children:l},a))]})})]})},PDe=({source:e,views:t,user:r,HoverComp:n,MapFilter:i=CDe,filterData:l={}})=>{const{viewId:a}=rc(),s=Ps(Ks),[d,v]=Ee.useState(null),[S,A]=Fe.useState(l),P=Ee.useMemo(()=>Qt((t||[]).filter(B=>B.view_id===+a),"[0]",t[0]),[t,a]),L=Fe.useMemo(()=>{let B=Qt(P,"metadata.tiles",{sources:[],layers:[]});return B.sources.forEach($=>$.source.url=$.source.url.replace("$HOST",SN)),B},[P]),F=Fe.useMemo(()=>{let B=Qt(P,"metadata",{tiles:{sources:[],layers:[]}});return Qt(B,"tiles.sources",[]).forEach($=>$.source.url=$.source.url.replace("$HOST",SN)),B},[P]),K=Ee.useMemo(()=>Qt(P,"view_id",null),[a]),[re,G]=Ee.useState(Qt(L,"symbology",{})),H=Ee.useMemo(()=>{var B;return{name:e.name,pgEnv:s,source:e,activeView:P,filters:S,hoverComp:n,attributes:(B=Qt(e,"metadata",[]))==null?void 0:B.filter($=>["integer","string","number"].includes($.type)).map($=>$.name),activeViewId:K,sources:Qt(L,"sources",[]),layers:Qt(L,"layers",[]),symbology:Qt(L,"symbology",{})}},[e,t,L,K,S]);return Ft("div",{children:[Ft("div",{className:"flex",children:[Ft("div",{className:"pl-3 pr-4 py-2 flex-1",children:["Map View  ",a]}),ae(i,{source:e,metaData:F,filters:S,setFilters:A,tempSymbology:re,setTempSymbology:G,activeViewId:K}),ae(EDe,{views:t})]}),ae("div",{className:"w-ful h-[900px]",children:ae(TDe,{layers:[H],tempSymbology:re})}),r.authLevel>=5?ae("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-0",children:ae("dl",{className:"sm:divide-y sm:divide-gray-200",children:["sources","layers"].map((B,$)=>{let N=JSON.stringify(Qt(H,B,[]),null,3);return Ft("div",{className:"flex justify-between group",children:[Ft("div",{className:"flex-1 sm:grid sm:grid-cols-5 sm:gap-4 sm:px-6",children:[ae("dt",{className:"text-sm font-medium text-gray-500 py-5",children:B}),ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-4",children:d===B?ae("div",{className:"pt-3 pr-8",children:ae(ADe,{startValue:N,attr:B,viewId:K,parentData:Qt(P,"metadata",{tiles:{}}),cancel:()=>v(null)})}):ae("div",{className:"py-3 pl-2 pr-8",children:ae("pre",{className:"bg-gray-100 tracking-tighter overflow-auto scrollbar-xs",children:N})})})]}),ae("div",{className:"hidden group-hover:block text-blue-500 cursor-pointer",onClick:z=>v(d===B?null:B),children:ae("i",{className:"fad fa-pencil absolute -ml-12 mt-3 p-2.5 rounded hover:bg-blue-500 hover:text-white "})})]},$)})})}):""]})},dC=Sc(PDe),TDe=({layers:e,tempSymbology:t})=>{const r=Ee.useRef(!1),{falcor:n}=Gl(),[i,l]=Ee.useState([]),a=Ee.useMemo(()=>e.map(d=>d.activeViewId),[e]);Ee.useEffect(()=>{(async()=>{r.current&&l(v=>{var P;let S=(P=v==null?void 0:v.map(L=>L.activeViewId))==null?void 0:P.filter(L=>L),A=e==null?void 0:e.filter(L=>L).filter(L=>!S.includes(L.activeViewId)).map(L=>nDe(L));return[...v==null?void 0:v.filter(L=>v.map(F=>F.activeViewId).includes(L.activeViewId)),...A]})})()},[a]);const s=Ee.useMemo(()=>{let d=e.map(v=>v.activeViewId);return i.reduce((v,S)=>(d.indexOf(S.activeViewId)!==-1&&(v[S.id]=Ox(e[d.indexOf(S.activeViewId)]),v[S.id].symbology=Ox(t)),v),{})},[e,i,t]);return ae("div",{className:"w-full h-full",ref:r,children:ae(wDe,{accessToken:eDe.MAPBOX_TOKEN,falcor:n,mapOptions:{zoom:7.3,center:[-73.8,40.79],styles:[{name:"Streets",style:"https://api.maptiler.com/maps/streets-v2/style.json?key=mU28JQ6HchrQdneiq6k9"},{name:"Light",style:"https://api.maptiler.com/maps/dataviz-light/style.json?key=mU28JQ6HchrQdneiq6k9"},{name:"Dark",style:"https://api.maptiler.com/maps/dataviz-dark/style.json?key=mU28JQ6HchrQdneiq6k9"}]},layers:i,layerProps:s,CustomSidebar:()=>ae("div",{})})})},ADe=({startValue:e,attr:t,viewId:r,parentData:n,cancel:i=()=>{}})=>{const{falcor:l}=Gl(),[a,s]=Fe.useState(""),d=Ps(Ks),v=Fe.useRef(null);Fe.useEffect(()=>{s(e),v.current.focus()},[e]),Fe.useEffect(()=>{v.current.style.height="inherit",v.current.style.height=`${v.current.scrollHeight}px`},[a]);const S=async(A,P)=>{if(r)try{let L=JSON.parse(P),F=n||{tiles:{}};F.tiles[A]=L,console.log("out value",F);let K=await l.set({paths:[["dama",d,"views","byId",r,"attributes","metadata"]],jsonGraph:{dama:{[d]:{views:{byId:{[r]:{attributes:{metadata:JSON.stringify(F)}}}}}}}});console.log("set run response",K),i()}catch(L){console.log("error stuff",L,P,n)}};return Ft("div",{className:"w-full",children:[ae("div",{className:"w-full flex",children:ae("textarea",{ref:v,className:"flex-1 px-2 shadow text-base bg-blue-100 focus:ring-blue-700 focus:border-blue-500  border-gray-300 rounded-none rounded-l-md",value:a,onChange:A=>s(A.target.value)})}),Ft("div",{children:[ae(bh,{themeOptions:{size:"sm",color:"primary"},onClick:A=>S(t,a),children:" Save "}),ae(bh,{themeOptions:{size:"sm",color:"cancel"},onClick:A=>i(),children:" Cancel "})]})]})};function kDe(e,t){if(t.type==="update")return{...e,...t.payload};if(t.type==="update_dbColName"){const{rowIdx:r,colName:n}=t.payload,{tableDescriptor:i}=e,l=Qt(i,["columnTypes",r,"col"]);if(console.log("update_dbColName",t.payload),l===n)return e;const a=Ox(i);return a.columnTypes=i.columnTypes.slice(),a.columnTypes[r]={...a.columnTypes[r],col:n},{...e,tableDescriptor:a}}return e}const IDe=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],MDe=["B","kiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],ODe=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],RDe=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],EN=(e,t,r)=>{let n=e;return typeof t=="string"||Array.isArray(t)?n=e.toLocaleString(t,r):(t===!0||r!==void 0)&&(n=e.toLocaleString(void 0,r)),n};function DDe(e,t){if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t={bits:!1,binary:!1,space:!0,...t};const r=t.bits?t.binary?RDe:ODe:t.binary?MDe:IDe,n=t.space?" ":"";if(t.signed&&e===0)return` 0${n}${r[0]}`;const i=e<0,l=i?"-":t.signed?"+":"";i&&(e=-e);let a;if(t.minimumFractionDigits!==void 0&&(a={minimumFractionDigits:t.minimumFractionDigits}),t.maximumFractionDigits!==void 0&&(a={maximumFractionDigits:t.maximumFractionDigits,...a}),e<1){const S=EN(e,t.locale,a);return l+S+n+r[0]}const s=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),r.length-1);e/=(t.binary?1024:1e3)**s,a||(e=e.toPrecision(3));const d=EN(Number(e),t.locale,a),v=r[s];return l+d+n+v}function zDe({progress:e}){const t={display:"inline-block",height:"100%",width:"100%",backgroundColor:"whitesmoke",borderRadius:40,margin:50},r={display:"inline-block",height:"84%",width:`${e}`,backgroundColor:"#3b82f680",borderRadius:40,textAlign:"right"};return Ft("div",{style:t,children:[Ft("span",{style:{fontWeight:"bold",paddingLeft:"10px",paddingRight:"10px"},children:[" ","Sent:"]}),ae("div",{style:r,children:ae("span",{style:{padding:10,color:"black",fontWeight:900},children:`${e}`})})]})}function LDe({fileUploadStatus:e}){let t;if(!e)t=ae("td",{className:"py-4 text-center",children:"Sending GIS File to server"});else{const{type:r,payload:n}=e;/GIS_FILE_UPLOAD_PROGRESS$/.test(r)?t=ae(zDe,{progress:n.progress}):/GIS_FILE_RECEIVED$/.test(r)?t=ae("td",{className:"py-4 text-center",children:"File Received"}):/START_GIS_FILE_UPLOAD_ANALYSIS$/.test(r)?t=ae("td",{className:"py-4 text-center",children:"Server Analyzing the GIS File"}):/FINISH_GIS_FILE_UPLOAD$/.test(r)?t=ae("td",{className:"py-4 text-center",children:"GIS File Analysis Complete"}):t=ae("td",{className:"py-4 text-center",children:"Processing"})}return Ft("tr",{children:[ae("td",{className:"py-4 text-left",children:"File Upload Status"}),t]})}function $De({uploadedFile:e,fileUploadStatus:t}){return e?Ft("div",{children:[ae("div",{className:"font-bold",children:ae("span",{children:"File Metadata"})}),ae("table",{className:"w-full",children:Ft("tbody",{children:[Ft("tr",{className:"border-b",children:[ae("td",{className:"py-4 text-left",children:"Name"}),ae("td",{className:"text-center  p-2",children:e.name})]},"uploaded-file-meta--name"),Ft("tr",{className:"border-b",children:[ae("td",{className:"py-4 text-left",children:"Last Modified"}),ae("td",{className:"text-center  p-2",children:Qt(e,"lastModifiedDate","").toLocaleString()})]},"uploaded-file-meta--last-mod-ts"),Ft("tr",{className:"border-b",children:[ae("td",{className:"py-4 text-left",children:"Size"}),ae("td",{className:"text-center  p-2",children:DDe(e.size)})]},"uploaded-file-meta--size"),ae(LDe,{fileUploadStatus:t})]})})]}):""}function NDe({etlContextId:e,uploadErrMsg:t}){return Ft("table",{className:"w-2/3 mx-auto text-center",style:{margin:"40px auto",textAlign:"center",border:"1px solid",borderColor:"back"},children:[ae("thead",{style:{color:"black",backgroundColor:"red",fontWeight:"bolder",textAlign:"center",marginTop:"40px",fontSize:"20px",border:"1px solid",borderColor:"black"},children:Ft("tr",{children:[Ft("th",{style:{border:"1px solid",borderColor:"black"},children:[" ","GIS Dataset Upload Error"]}),Ft("th",{style:{border:"1px solid",borderColor:"black"},children:[" ","ETL Context ID"]})]})}),ae("tbody",{style:{border:"1px solid"},children:Ft("tr",{style:{border:"1px solid"},children:[ae("td",{style:{border:"1px solid",padding:"10px",backgroundColor:"white",color:"darkred"},children:t}),ae("td",{style:{border:"1px solid",backgroundColor:"white"},children:e})]})})]})}const BDe=3e3;function FDe({state:e,dispatch:t}){const{etlContextId:r,userId:n,damaServerPath:i,polling:l,pollingInterval:a,uploadErrMsg:s,uploadedFile:d,fileUploadStatus:v}=e,S=async A=>{try{const P=new FormData;P.append("etlContextId",r),P.append("user_id",n),P.append("fileSizeBytes",A.size),P.append("progressUpdateIntervalMs",BDe),P.append("file",A),t({type:"update",payload:{polling:!0,uploadedFile:A}}),console.log("sending upload");const L=await fetch(`${i}/gis-dataset/upload`,{method:"POST",body:P});console.log("sending upload finished ");const[{id:F}]=await L.json();t({type:"update",payload:{polling:!1,gisUploadId:F}})}catch(P){t({type:"update",payload:{polling:!1,uploadErrMsg:P.message,uploadedFile:null}})}};return Fe.useEffect(()=>{const A=async()=>{const P=`${i}/events/query?etl_context_id=${r}&event_id=-1`,F=await(await fetch(P)).json();t({type:"update",payload:{fileUploadStatus:F[F.length-1]}})};if(l&&!a){let P=setInterval(A,3e3);t({type:"update",payload:{pollingInterval:P}})}else a&&!l&&(clearInterval(a),A(),t({type:"update",payload:{pollingInterval:null}}))},[l,a,i,r,t]),r?d?ae($De,{uploadedFile:d,fileUploadStatus:v}):Ft(Pu,{children:[ae("div",{className:"w-full border border-dashed border-gray-300 bg-gray-100",children:ae("div",{className:"p-4",children:ae("button",{children:ae("input",{type:"file",onChange:A=>S(A.target.files[0])})})})}),s?ae(NDe,{etlContextId:r,uploadErrMsg:s}):""]}):"no context Id no upload"}const UDe=({state:e})=>{const{etlContextId:t,layerName:r,lyrAnlysErrMsg:n,layerAnalysis:i}=e;if(!r)return"";if(n)return ae(jDe,{etlContextId:t,errorMsg:n});if(!i)return ae("div",{children:"Analyzing Layer... please wait."});const{layerGeometriesAnalysis:l}=i,{countsByPostGisType:a}=l,s=Object.keys(a).sort((d,v)=>a[v]-a[d]);return Ft("div",{children:[ae("span",{className:"py-4 font-bold",children:" Layer Analysis "}),ae("div",{className:"w-full",children:ae("div",{style:{width:"50%",margin:"10px auto"},children:Ft("table",{className:"pt-10 mx-auto border",children:[ae("thead",{style:{backgroundColor:"black",color:"white"},children:Ft("tr",{children:[ae("th",{className:"text-center",style:{padding:"10px",borderRight:"1px solid white"},children:"Geometry Type"}),ae("th",{className:"text-center",style:{padding:"10px"},children:"Feature Count"})]})}),ae("tbody",{children:s.map((d,v)=>Ft("tr",{className:"border-b",children:[ae("td",{className:"py-4 text-center",style:{padding:"10px",border:"1px solid"},children:d}),ae("td",{className:"text-center  p-2",style:{padding:"10px",border:"1px solid"},children:a[d]})]},v))})]})})})]})},jDe=({etlContextId:e,errorMsg:t})=>Ft("table",{className:"w-2/3 mx-auto mt-10 text-center border border-gray-300",children:[ae("thead",{className:"bg-red-500 font-bold text-lg",children:Ft("tr",{children:[ae("th",{children:"Layer Analysis Error"}),ae("th",{children:"ETL Context ID"})]})}),ae("tbody",{children:Ft("tr",{children:[ae("td",{className:"text-red-800 p-4",children:t}),ae("td",{children:e})]})})]});function VDe({state:e,dispatch:t}){const{damaServerPath:r,gisUploadId:n,uploadedFile:i,layerNames:l,layerName:a}=e;return Fe.useEffect(()=>{if(n&&i)try{(async d=>{const v=`${r}/gis-dataset/${d}/layerNames`,A=await(await fetch(v)).json();t({type:"update",payload:{layerNames:A,layerName:A[0]}})})(n)}catch(s){t({type:"update",payload:{lyrAnlysErrMsg:s.message}})}},[n,i,r,t]),Fe.useEffect(()=>{if(n&&a)try{(async(d,v)=>{const A=await(await fetch(`${r}/gis-dataset/${d}/${v}/layerAnalysis`)).json();t({type:"update",payload:{layerAnalysis:A}})})(n,a)}catch(s){t({type:"update",payload:{lyrAnlysErrMsg:s.message}})}},[n,a,r,t]),l?Ft("div",{className:"border-t border-gray-200 w-full",children:[ae("table",{className:"w-full ",children:ae("tbody",{children:Ft("tr",{children:[ae("td",{className:"py-4 text-left",children:"Select Layer"}),ae("td",{className:"py-4 text-center",children:ae("select",{className:"text-center w-1/2 bg-white p-2 shadow bg-grey-50 focus:bg-blue-100 border-gray-300",value:a||"",onChange:s=>t({type:"update",payload:{layerName:s.target.value}}),children:["",...l].map(s=>ae("option",{value:s,children:s},s))})})]})})}),ae(UDe,{state:e})]}):""}var qDe=SE,GDe=TO,HDe=kO;function WDe(e,t){var r={};return t=HDe(t),GDe(e,function(n,i,l){qDe(r,i,t(n,i,l))}),r}var ZDe=WDe;const CN=Xs(ZDe),XDe=({publishStatus:e,field:t,col:r,onChange:n})=>ae("input",{className:"w-full p-2 flex-1 shadow bg-grey-50 focus:bg-blue-100 border-gray-300",disabled:e!=="AWAITING",id:t,defaultValue:r||"",onChange:n}),KDe=({publishStatus:e,field:t,col:r,availableDbColNames:n,onChange:i})=>{if(!n)return"";const l=r&&n.includes(r),a=`col-names-dropdown-for-${t}`,s=n.filter(Boolean).length>0;return n.length?l&&n.length===1?ae("span",{className:"text-center",children:r}):ae("select",{className:"w-full p-2 flex-1 shadow bg-grey-50 focus:bg-blue-100 border-gray-300",onChange:d=>i(d.target.value),value:l?r:"",placeholder:"Select the db column name",disabled:!s||e!=="AWAITING",children:n.map((d,v)=>ae("option",{value:d,children:d},v))},a):ae("span",{style:{color:"darkgray"},children:"All table columns have been assigned."})},YDe=({state:e,dispatch:t})=>{const{layerName:r,tableDescriptor:n,publishStatus:i,databaseColumnNames:l}=e,[a,s]=Fe.useState(null),[d,v]=Fe.useState(null),[S,A]=Fe.useState(!0),P=n&&n.columnTypes,L=P&&P.reduce((H,{key:B,col:$})=>(H[B]=$||null,H),{});if(Fe.useEffect(()=>{d===null&&L&&v(L)},[d,L]),Fe.useEffect(()=>{L&&!a&&s(CN(L,H=>H===null))},[L,a]),!r)return"";if(!L)return Ft("span",{className:"w-full p-10 text-center",children:["Please wait... the server is analyzing the ",r," layer. This may take a few moments."]});if(!a)return null;const F=l?KDe:XDe,K=new Set(Object.values(L).filter(Boolean).filter(H=>l&&l.includes(H))),re=H=>{s(CN(a,()=>H.target.checked)),A(!H.target.checked)},G=l&&l.filter(H=>!K.has(H)).filter(Boolean);return Ft("div",{children:[ae("span",{className:"text-lg font-bold",children:"Field Names Mappings"}),ae("div",{children:Ft("table",{className:"w-full",children:[ae("thead",{children:Ft("tr",{children:[ae("th",{className:"text-center",style:{paddingRight:"40px"},children:"Upload File Columns"}),ae("th",{className:"text-center",children:"Database Column Name"}),Ft("th",{className:"text-center",children:["Omit",ae("input",{type:"checkbox",checked:!S,onChange:re})]})]})}),ae("tbody",{children:P.map(({key:H,col:B},$)=>{let N;Array.isArray(G)&&(N=K.has(B)?[B,...G]:G);const z=a[H]?ae("span",{}):ae(F,{availableDbColNames:N,publishStatus:i,field:H,col:B,onChange:X=>{const te=X.target?X.target.value:X;t({type:"update_dbColName",payload:{rowIdx:$,colName:te}})}});return Ft("tr",{className:"border-b",children:[ae("td",{className:"py-4 text-left",children:H}),ae("td",{className:"text-center  p-2",children:z}),ae("td",{className:"text-center",children:ae("input",{type:"checkbox",checked:a[H],disabled:N&&N.length===0,onChange:()=>{const X={...a,[H]:!a[H]};s(X);const te=Object.values(X).some(pe=>pe===!1);A(te),B?t({type:"update_dbColName",payload:{rowIdx:$,colName:""}}):N||t({type:"update_dbColName",payload:{rowIdx:$,colName:d[H]}})}})})]},H)})})]})})]})};function JDe({state:e,dispatch:t}){const{damaSourceId:r,damaServerPath:n,databaseColumnNames:i,gisUploadId:l,layerName:a}=e;return Fe.useEffect(()=>{(async()=>{if(r&&!i){const s=`${n}/metadata/datasource-latest-view-table-columns?damaSourceId=${r}`;let v=await(await fetch(s)).json();v=v.filter(S=>S!=="wkb_geometry"&&S!=="ogc_fid"),console.log("update_dbColName",v),t({type:"update",payload:{databaseColumnNames:v}})}})()},[i,r,n,t]),Fe.useEffect(()=>{(async()=>{if(r&&!i||!l||!a)return;const d=await(await fetch(`${n}/staged-geospatial-dataset/${l}/${a}/tableDescriptor`)).json();if(r){const v=new Set(i);for(const S of d.columnTypes)v.has(S.col)||(S.col="")}return t({type:"update",payload:{tableDescriptor:d}})})()},[r,i,l,a,n,t]),r&&!i?"":ae(YDe,{state:e,dispatch:t})}const PN={AWAITING:{text:"Publish",color:"bg-blue-500"},IN_PROGRESS:{text:"Publishing...",color:"bg-amber-500"},PUBLISHED:{text:"Publishing...",color:"bg-amber-500"},ERROR:{text:"Error...",color:"bg-red-500"}};function QDe({state:e,dispatch:t}){const{layerName:r,publishStatus:n,uploadErrMsg:i,lyrAnlysErrMsg:l,tableDescriptor:a,damaSourceName:s,damaSourceId:d,damaServerPath:v,etlContextId:S,gisUploadId:A,userId:P,customViewAttributes:L,sourceType:F}=e,{text:K,color:re}=Fe.useMemo(()=>Qt(PN,n,PN.AWAITING),[n]);if(!r||i||l||!a)return"";const G=()=>{(async()=>{try{t({type:"update",payload:{publishStatus:"IN_PROGRESS"}});const B={source_id:d||null,source_values:{name:s,type:F||"gis_dataset"},user_id:P,tableDescriptor:a,gisUploadId:A,layerName:r,etlContextId:S,customViewAttributes:L},N=await(await fetch(`${e.damaServerPath}/gis-dataset/publish`,{method:"POST",body:JSON.stringify(B),headers:{"Content-Type":"application/json"}})).json();console.log("publishFinalEvent",N);const{payload:{damaViewId:z,damaSourceId:X}}=N;console.log("published view id",z),t({type:"update",payload:{publishStatus:"PUBLISHED",damaViewId:z,damaSourceId:X}})}catch(B){t({type:"update",payload:{publishStatus:"ERROR",publishErrMsg:B.message}}),console.error("==>",B)}})()};return Ft("div",{children:[ae("div",{children:ae("button",{className:`cursor-pointer py-4 px-8 ${re} border-none`,onClick:()=>{console.log("onClick publush",n),(n==="AWAITING"||n==="ERROR")&&G()},children:K})}),ae(e4e,{state:e})]})}function e4e({state:e}){const{etlContextId:t,publishStatus:r,publishErrMsg:n}=e;return r!=="ERROR"?"":Ft("table",{className:"w-2/3",style:{margin:"40px auto",textAlign:"center",border:"1px solid",borderColor:"back"},children:[ae("thead",{style:{color:"black",backgroundColor:"red",fontWeight:"bolder",textAlign:"center",marginTop:"40px",fontSize:"20px",border:"1px solid",borderColor:"black"},children:Ft("tr",{children:[Ft("th",{style:{border:"1px solid",borderColor:"black"},children:[" ","Publish Error"]}),Ft("th",{style:{border:"1px solid",borderColor:"black"},children:[" ","ETL Context ID"]})]})}),ae("tbody",{style:{border:"1px solid"},children:Ft("tr",{style:{border:"1px solid"},children:[ae("td",{style:{border:"1px solid",padding:"10px",backgroundColor:"white",color:"darkred"},children:n}),ae("td",{style:{border:"1px solid",backgroundColor:"white"},children:t})]})})]})}const t4e=()=>ae(Pu,{});function _g({source:e={},user:t={},dataType:r="gis_dataset",CustomAttributes:n=t4e,customRules:i={},databaseColumnNames:l=null}){var K;const{name:a,source_id:s,type:d}=e,v=Ps(Ks),S=Yc(),{falcor:A}=Gl(),[P,L]=Fe.useReducer(kDe,{damaSourceId:s,damaSourceName:a,userId:7,etlContextId:null,customViewAttributes:{years:[]},dataType:r,damaServerPath:`${t3}/dama-admin/${v}`,gisUploadId:null,fileUploadStatus:null,uploadedFile:null,uploadErrMsg:null,polling:!1,pollingInterval:null,layerNames:null,layerName:null,lyrAnlysErrMsg:null,layerAnalysis:null,databaseColumnNames:l,tableDescriptor:null,publishStatus:"AWAITING",publishErrMsg:null,sourceType:d});if(Fe.useEffect(()=>{L({type:"update",payload:{damaSourceName:a}})},[a]),Fe.useEffect(()=>{L({type:"update",payload:{sourceType:d}})},[d]),Fe.useEffect(()=>{P.publishStatus==="PUBLISHED"&&(P.damaSourceId?A.invalidate(["dama",v,"sources","byId",P.damaSourceId,"views","length"]):A.invalidate(["dama",v,"sources","length"]),console.log("publish done",P,P.damaSourceId),S(`/source/${P.damaSourceId}/versions`))},[P.publishStatus,P.damaSourceId,v,S]),Fe.useEffect(()=>{(async()=>{const G=+await(await fetch(`${P.damaServerPath}/etl/new-context-id`)).text();L({type:"update",payload:{etlContextId:G}})})()},[v,P.damaServerPath]),!s&&!a)return ae("div",{children:" Please enter a datasource name."});const F=(K=Object.keys(i))==null?void 0:K.reduce((re,G)=>(i[G](P)!=="canUpload"&&(re=i[G](P)),re),"canUpload");return Ft("div",{children:[ae(n,{state:P,dispatch:L}),F==="canUpload"?ae(FDe,{state:P,dispatch:L}):F,ae(VDe,{state:P,dispatch:L}),ae(JDe,{state:P,dispatch:L}),ae(QDe,{state:P,dispatch:L})]})}const r4e=({views:e})=>{const{viewId:t,sourceId:r,page:n}=rc(),i=Yc();return Ft("div",{className:"flex flex-1",children:[ae("div",{className:"py-3.5 px-2 text-sm text-gray-400",children:"Version : "}),ae("div",{className:"flex-1",children:ae("select",{className:"pl-3 pr-4 py-2.5 border border-blue-100 bg-blue-50 w-full bg-white mr-2 flex items-center justify-between text-sm",value:t,onChange:l=>i(`/source/${r}/${n}/${l.target.value}`),children:e==null?void 0:e.sort((l,a)=>a.view_id-l.view_id).map((l,a)=>ae("option",{className:"ml-2  truncate",value:l.view_id,children:l.version?l.version:l.view_id},a))})})]})},n4e=()=>ae("div",{}),i4e=(e,t)=>({data:e,columns:t==null?void 0:t.map(r=>({Header:r,accessor:r}))}),a4e=({source:e,views:t,user:r,transform:n=i4e,filterData:i={},TableFilter:l=n4e})=>{const{viewId:a}=rc(),{falcor:s,falcorCache:d}=Gl(),[v,S]=Fe.useState(i),A=Ps(Ks),P=Ee.useMemo(()=>Qt(t==null?void 0:t.filter($=>$.view_id===a),"[0]",t[0]),[t,a]),L=Ee.useMemo(()=>Qt(P,"view_id",null),[P]);Ee.useEffect(()=>{console.time("getviewLength"),s.get(["dama",A,"viewsbyId",L,"data","length"]).then($=>{console.timeEnd("getviewLength")})},[A,L]);const F=Ee.useMemo(()=>Qt(d,["dama",A,"viewsbyId",L,"data","length"],"No Length"),[A,L,d]),K=Ee.useMemo(()=>{var $;return($=Qt(e,"metadata",[]))==null?void 0:$.filter(N=>["integer","string","number"].includes(N.type)).map(N=>N.name)},[e]);Ee.useEffect(()=>{if(F>0){console.log("dataLength",F);let $=Math.min(F,1e4);console.time("getViewData",$),s.chunk(["dama",A,"viewsbyId",L,"databyIndex",[...Array($).keys()],K],{chunkSize:500}).then(N=>{console.timeEnd("getViewData",$)})}},[A,L,F,K]);const re=Ee.useMemo(()=>Object.values(Qt(d,["dama",A,"viewsbyId",L,"databyIndex"],[])).map(N=>Qt(d,N.value,{})),[A,L,d,F]);let G=Qt(P,["metadata","years"],[]);const{data:H,columns:B}=Ee.useMemo(()=>n(re,K,v,G,e),[re,K,n,v,G,e]);return console.log("dataLength",F),Ft("div",{children:[Ft("div",{className:"flex",children:[ae("div",{className:"flex-1 pl-3 pr-4 py-2",children:"Table View"}),ae(l,{filters:v,setFilters:S,source:e}),ae(r4e,{views:t})]}),ae("div",{className:"max-w-6xl",children:ae(y7,{data:H,columns:B,pageSize:50})})]})},mC=Sc(a4e),o4e={map:{name:"Map",path:"/map",component:dC},table:{name:"Table",path:"/table",component:mC},sourceCreate:{name:"Create",component:_g},gisDatasetUpdate:{name:"Load New View",path:"/gisDatasetUpdate",component:_g}},r2={};for(const e in nm.schemeGroups)nm.schemeGroups[e].forEach(t=>{const r=nm[t];for(const n in r)n in r2||(r2[n]=[]),r2[n].push({type:`${e[0].toUpperCase()}${e.slice(1)}`,name:t,category:"Colorbrewer",colors:r[n]})});const rq=(e,t,r=!1)=>{let n=Qt(r2,[e],[]).reduce((i,l)=>l.name===t?l.colors:i,[]).slice();return r&&n.reverse(),n},s4e=rq(12,"Set3"),l4e=e=>{if(typeof e=="function")return e;let t=[...s4e];if(typeof e=="string"){const[r,n,i=!1]=e.split("-");t=rq(r,n),i&&t.reverse()}else Array.isArray(e)&&(t=[...e]);return(r,n)=>t[n%t.length]},HT=e=>e,s_=[],TN={},u4e={left:70,top:20,right:20,bottom:30},c4e={min:0},f4e=(e,t,r)=>{const n=Ee.useRef({}),i=Ee.useRef([t,r]),l=Ee.useMemo(()=>{const a=Qt(e,"shouldComponentUpdate",[]);return!rm([t,r],i.current)||a.reduce((s,d)=>s||!rm(Qt(n,["current",d]),Qt(e,d)),!a.length)},[e,t,r]);return Ee.useEffect(()=>{n.current=e,i.current=[t,r]},[e,t,r]),l},h4e=e=>{const t=e&&e.current;return t?t.getBoundingClientRect():{width:0,height:0}},p4e=(e,t)=>{const[r,n]=Ee.useState({width:0,height:0,x:0,y:0}),i=Ee.useCallback(()=>{const l=h4e(e),{width:a,height:s,x:d,y:v}=l;(a!==r.width||s!==r.height)&&(typeof t=="function"&&t({width:a,height:s,x:d,y:v}),n({width:a,height:s,x:d,y:v}))},[e,r,t]);return Ee.useEffect(()=>(window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}),[i]),Ee.useEffect(()=>{i()}),r},d4e={textBase:"text-base",textSmall:"text-sm",textLarge:"text-lg",paddingBase:"py-1 px-2",paddingSmall:"py-0 px-1",paddingLarge:"py-2 px-4",contentBg:"bg-white",accent1:"bg-blue-100",accent2:"bg-gray-300",accent3:"bg-gray-400",accent4:"bg-gray-500",highlight1:"bg-blue-200",highlight2:"bg-blue-300",highlight3:"bg-blue-400",highlight4:"bg-blue-500"};function m4e(e){return e}var WT=1,n2=2,Jk=3,Gb=4,AN=1e-6;function g4e(e){return"translate("+e+",0)"}function y4e(e){return"translate(0,"+e+")"}function v4e(e){return t=>+e(t)}function _4e(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),r=>+e(r)+t}function b4e(){return!this.__axis}function i3(e,t){var r=[],n=null,i=null,l=6,a=6,s=3,d=typeof window<"u"&&window.devicePixelRatio>1?0:.5,v=e===WT||e===Gb?-1:1,S=e===Gb||e===n2?"x":"y",A=e===WT||e===Jk?g4e:y4e;function P(L){var F=n??(t.ticks?t.ticks.apply(t,r):t.domain()),K=i??(t.tickFormat?t.tickFormat.apply(t,r):m4e),re=Math.max(l,0)+s,G=t.range(),H=+G[0]+d,B=+G[G.length-1]+d,$=(t.bandwidth?_4e:v4e)(t.copy(),d),N=L.selection?L.selection():L,z=N.selectAll(".domain").data([null]),X=N.selectAll(".tick").data(F,t).order(),te=X.exit(),pe=X.enter().append("g").attr("class","tick"),ke=X.select("line"),Pe=X.select("text");z=z.merge(z.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),X=X.merge(pe),ke=ke.merge(pe.append("line").attr("stroke","currentColor").attr(S+"2",v*l)),Pe=Pe.merge(pe.append("text").attr("fill","currentColor").attr(S,v*re).attr("dy",e===WT?"0em":e===Jk?"0.71em":"0.32em")),L!==N&&(z=z.transition(L),X=X.transition(L),ke=ke.transition(L),Pe=Pe.transition(L),te=te.transition(L).attr("opacity",AN).attr("transform",function(ge){return isFinite(ge=$(ge))?A(ge+d):this.getAttribute("transform")}),pe.attr("opacity",AN).attr("transform",function(ge){var Ie=this.parentNode.__axis;return A((Ie&&isFinite(Ie=Ie(ge))?Ie:$(ge))+d)})),te.remove(),z.attr("d",e===Gb||e===n2?a?"M"+v*a+","+H+"H"+d+"V"+B+"H"+v*a:"M"+d+","+H+"V"+B:a?"M"+H+","+v*a+"V"+d+"H"+B+"V"+v*a:"M"+H+","+d+"H"+B),X.attr("opacity",1).attr("transform",function(ge){return A($(ge)+d)}),ke.attr(S+"2",v*l),Pe.attr(S,v*re).text(K),N.filter(b4e).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===n2?"start":e===Gb?"end":"middle"),N.each(function(){this.__axis=$})}return P.scale=function(L){return arguments.length?(t=L,P):t},P.ticks=function(){return r=Array.from(arguments),P},P.tickArguments=function(L){return arguments.length?(r=L==null?[]:Array.from(L),P):r.slice()},P.tickValues=function(L){return arguments.length?(n=L==null?null:Array.from(L),P):n&&n.slice()},P.tickFormat=function(L){return arguments.length?(i=L,P):i},P.tickSize=function(L){return arguments.length?(l=a=+L,P):l},P.tickSizeInner=function(L){return arguments.length?(l=+L,P):l},P.tickSizeOuter=function(L){return arguments.length?(a=+L,P):a},P.tickPadding=function(L){return arguments.length?(s=+L,P):s},P.offset=function(L){return arguments.length?(d=+L,P):d},P}function x4e(e){return i3(n2,e)}function w4e(e){return i3(Jk,e)}function S4e(e){return i3(Gb,e)}const E4e=e=>{const{adjustedWidth:t,adjustedHeight:r,type:n="band",domain:i,scale:l,format:a,tickValues:s,secondary:d,label:v,margin:S,tickDensity:A=2,axisColor:P="currentColor",axisOpacity:L=1}=e,F=Ee.useRef();return Ee.useEffect(()=>{F.current&&C4e({ref:F.current,adjustedWidth:t,adjustedHeight:r,type:n,domain:i,scale:l,format:a,tickValues:s,secondary:d,label:v,margin:S,tickDensity:A,axisColor:P,axisOpacity:L})},[t,r,n,i,l,a,s,d,v,S,A,P,L]),ae("g",{ref:F})},C4e=({ref:e,adjustedWidth:t,adjustedHeight:r,domain:n,scale:i,format:l,secondary:a,label:s,tickValues:d,type:v,margin:S,tickDensity:A,axisColor:P,axisOpacity:L})=>{const{left:F,top:K,bottom:re}=S;if(!d&&v==="band"){const N=Math.ceil(t/100*A),z=Math.ceil(n.length/N),X=Math.floor(z*.5);d=n.filter((te,pe)=>(z===1||pe>0)&&(z===1||pe<n.length-1)&&!((pe-X)%z))}else if(!d&&v==="ordinal"){const N=100/A;let z=0;d=[];for(let X=0;X<n.length;++X)X>0&&(z+=i(n[X])-i(n[X-1])),(!d.length&&z>=N*.5||z>=N)&&(d.push(n[X]),z=0)}const G=w4e(i).tickValues(d).tickFormat(l),H=Qx().duration(1e3),$=Xo(e).selectAll("g.animated-group").data(["animated-group"]).join(N=>N.append("g").attr("class","animated-group").call(z=>z.style("transform",`translate(${F}px, ${r+K}px)`)),N=>N.call(z=>z.transition(H).style("transform",`translate(${F}px, ${r+K}px)`)),N=>N.call(z=>z.transition(H).remove())).selectAll("g.axis-group").data(n.length?["axis-group"]:[]).join(N=>N.append("g").attr("class","axis-group").call(z=>z.style("transform","scale(0, 0)").transition(H).style("transform","scale(1, 1)")),N=>N.call(z=>z.transition(H).style("transform","scale(1, 1)")),N=>N.call(z=>z.transition(H).style("transform","scale(0, 0)").remove()));$.selectAll("g.axis").data(n.length?["axis-bottom"]:[]).join("g").attr("class","axis axis-bottom").classed("secondary",a).transition(H).call(G).select(".domain").attr("stroke",P).attr("opacity",L),$.selectAll("text.axis-label").data(n.length&&s?[s]:[]).join("text").attr("class","axis-label axis-label-bottom").style("transform",`translate(${t*.5}px, ${re-9}px)`).attr("text-anchor","middle").attr("fill","currentColor").attr("font-size","1rem").text(N=>N)},P4e=e=>{const{adjustedWidth:t,adjustedHeight:r,showGridLines:n=!0,gridLineOpacity:i=.25,axisColor:l="currentColor",axisOpacity:a=1,domain:s,scale:d,format:v,type:S="linear",secondary:A,label:P,margin:L,ticks:F=10,tickValues:K}=e,re=Ee.useRef();return Ee.useEffect(()=>{re.current&&T4e(re.current,t,r,s,d,S,v,A,P,L,F,K,n,i,l,a)},[t,r,n,s,d,S,v,A,P,L,F,K,i,l,a]),ae("g",{ref:re})},T4e=(e,t,r,n,i,l,a,s,d,v,S,A,P,L,F,K)=>{const{left:re,top:G}=v,H=S4e(i).tickFormat(a);A?H.tickValues(A):H.ticks(S);const B=Qx().duration(1e3),N=Xo(e).selectAll("g.animated-group").data(["animated-group"]).join(Pe=>Pe.append("g").attr("class","animated-group").call(ge=>ge.style("transform",`translate(${re}px, ${G}px)`)),Pe=>Pe.call(ge=>ge.transition(B).style("transform",`translate(${re}px, ${G}px)`)),Pe=>Pe.call(ge=>ge.transition(B).style("transform",`translate(${re}px, ${G}px)`).remove())).selectAll("g.axis-group").data(n.length?["axis-group"]:[]).join(Pe=>Pe.append("g").attr("class","axis-group").call(ge=>ge.style("transform",`translateY(${r}px) scale(0, 0)`).transition(B).style("transform","translateY(0px) scale(1, 1)")),Pe=>Pe.call(ge=>ge.transition(B).style("transform","translateY(0px) scale(1, 1)")),Pe=>Pe.call(ge=>ge.transition(B).style("transform",`translateY(${r}px) scale(0, 0)`).remove()));if(N.selectAll("g.axis").data(n.length?["axis-left"]:[]).join("g").attr("class","axis axis-left").classed("secondary",s).transition(B).call(H).call(Pe=>Pe.selectAll(".tick line").attr("stroke","currentColor").attr("stroke-opacity",L)).select(".domain").attr("stroke",F).attr("opacity",K),N.selectAll("text.axis-label").data(n.length&&d?[d]:[]).join("text").attr("class","axis-label axis-label-left").style("transform",`translate(${-re+20}px, ${r*.5}px) rotate(-90deg)`).attr("text-anchor","middle").attr("fill","currentColor").attr("font-size","1rem").text(Pe=>Pe),l!=="linear"||!P)return;const z=N.selectAll("line.grid-line"),X=z.size(),te=i.ticks(S).length,pe=X&&X<te?i(n[1]*1.5):i(0),ke=i(n[1]*1.5);z.data(n.length?i.ticks(S):[]).join(Pe=>Pe.append("line").attr("class","grid-line").attr("x1",0).attr("x2",t).attr("y1",pe).attr("y2",pe).attr("stroke","currentColor").attr("stroke-opacity",L).call(ge=>ge.transition(B).attr("y1",Ie=>i(Ie)+.5).attr("y2",Ie=>i(Ie)+.5)),Pe=>Pe.call(ge=>ge.attr("stroke","currentColor").attr("stroke-opacity",L).transition(B).attr("x2",t).attr("y1",Ie=>i(Ie)+.5).attr("y2",Ie=>i(Ie)+.5)),Pe=>Pe.call(ge=>ge.transition(B).attr("y1",ke).attr("y2",ke).remove()))},A4e=e=>{const{adjustedWidth:t,adjustedHeight:r,showGridLines:n=!0,gridLineOpacity:i=.25,axisColor:l="currentColor",axisOpacity:a=1,domain:s,scale:d,format:v,type:S="linear",secondary:A,label:P,margin:L,ticks:F=10}=e,K=Ee.useRef();return Ee.useEffect(()=>{K.current&&k4e(K.current,t,r,s,d,S,v,A,P,L,F,n,i,l,a)},[t,r,n,s,d,S,v,A,P,L,F,i,l,a]),ae("g",{ref:K})},k4e=(e,t,r,n,i,l,a,s,d,v,S,A,P,L,F)=>{const{left:K,right:re,top:G}=v,H=x4e(i).tickFormat(a).ticks(S),B=Qx().duration(1e3),N=Xo(e).selectAll("g.animated-group").data(["animated-group"]).join(Pe=>Pe.append("g").attr("class","animated-group").call(ge=>ge.style("transform",`translate(${t+K}px, ${G}px)`)),Pe=>Pe.call(ge=>ge.transition(B).style("transform",`translate(${t+K}px, ${G}px)`)),Pe=>Pe.call(ge=>ge.transition(B).style("transform",`translate(${t+K}px, ${G}px)`).remove())).selectAll("g.axis-group").data(n.length?["axis-group"]:[]).join(Pe=>Pe.append("g").attr("class","axis-group").call(ge=>ge.style("transform",`translateY(${r}px) scale(0, 0)`).transition(B).style("transform","translateY(0px) scale(1, 1)")),Pe=>Pe.call(ge=>ge.transition(B).style("transform","translateY(0px) scale(1, 1)")),Pe=>Pe.call(ge=>ge.transition(B).style("transform",`translateY(${r}px) scale(0, 0)`).remove()));if(N.selectAll("g.axis").data(n.length?["axis-right"]:[]).join("g").attr("class","axis axis-right").transition(B).call(H).call(Pe=>Pe.selectAll(".tick line").attr("stroke","currentColor").attr("stroke-opacity",P)).select(".domain").attr("stroke",L).attr("opacity",F),N.selectAll("g.axis.axis-right .domain").attr("stroke-dasharray",s?"8 4":null),N.selectAll("text.axis-label").data(n.length&&d?[d]:[]).join("text").attr("class","axis-label axis-label-right").style("transform",`translate(${re-20}px, ${r*.5}px) rotate(90deg)`).attr("text-anchor","middle").attr("fill","currentColor").attr("font-size","1rem").text(Pe=>Pe),l!=="linear"||!A)return;const z=N.selectAll("line.grid-line"),X=z.size(),te=i.ticks().length,pe=X&&X<te?i(n[1]*1.5):i(0),ke=i(n[1]*1.5);z.data(n.length?i.ticks():[]).join(Pe=>Pe.append("line").attr("class","grid-line").attr("stroke-dasharray",s?"8 4":null).attr("x1",0).attr("x2",-t).attr("y1",pe).attr("y2",pe).attr("stroke","currentColor").attr("stroke-opacity",P).call(ge=>ge.transition(B).attr("y1",Ie=>i(Ie)+.5).attr("y2",Ie=>i(Ie)+.5)),Pe=>Pe.call(ge=>ge.attr("stroke","currentColor").attr("stroke-opacity",P).transition(B).attr("x2",-t).attr("y1",Ie=>i(Ie)+.5).attr("y2",Ie=>i(Ie)+.5)),Pe=>Pe.call(ge=>ge.transition(B).attr("y1",ke).attr("y2",ke).remove()))},I4e=({pos:e,svgWidth:t,svgHeight:r,margin:n,position:i})=>{const[s,d]=e;switch(i){case"above":{const v=t-n.right;return`translate(
        max(
          min(calc(${s}px - 50%), calc(${v-10}px - 100%)),
          calc(${n.left+10}px)
        ),
        calc(-100% - ${30-d}px)
      )`}default:{const v=r-n.bottom,S=`max(
          ${n.top+10}px,
          min(${d-30}px, calc(${v-10}px - 100%))
        )`;return s<n.left+(t-n.left-n.right)*.5?`translate(
          ${s+30}px,
          ${S}
        )`:`translate(
        calc(-100% + ${s-30}px),
        ${S}
      )`}}},M4e=({show:e,children:t,...r})=>ae("div",{className:`
      absolute top-0 left-0 z-50 pointer-events-none
      rounded whitespace-nowrap hover-comp
    `,style:{display:e?"inline-block":"none",transform:I4e(r),boxShadow:"2px 2px 8px 0px rgba(0, 0, 0, 0.75)",transition:"transform 0.15s ease-out"},children:t}),Qk="update-data",nq="set-show",O4e=(e,t)=>{const{type:r,...n}=t;switch(r){case Qk:case nq:return{...e,...n};default:return e}},R4e={show:!1,pos:[0,0],data:null,target:"graph"},D4e=e=>{const[t,r]=Ee.useReducer(O4e,R4e),n=Ee.useMemo(()=>d7(r,25),[r]),i=Ee.useCallback((s,d,{pos:v=null,target:S="graph"}={})=>{const A=e.current.getBoundingClientRect();n({type:Qk,show:!0,target:S,data:d,pos:v?[v.x-A.x,v.y-A.y]:[s.clientX-A.x,s.clientY-A.y]})},[e,n]),l=Ee.useCallback((s,d,{pos:v=null,target:S="graph"}={})=>{const A=e.current.getBoundingClientRect();n({type:Qk,show:!0,target:S,data:d,pos:v?[v.x-A.x,v.y-A.y]:[s.clientX-A.x,s.clientY-A.y]})},[e,n]),a=Ee.useCallback(s=>{n({type:nq,show:!1})},[n]);return{hoverData:t,onMouseOver:i,onMouseMove:l,onMouseLeave:a}},z4e=Ee.memo(e=>{const{state:t,width:r,svgHeight:n,height:i,y:l,x:a,color:s,onMouseMove:d,Key:v,index:S,value:A,data:P,barValues:L}=e,F=Ee.useRef();Ee.useEffect(()=>{t==="entering"?Xo(F.current).attr("width",r).attr("height",0).attr("x",a).attr("y",n).transition().duration(1e3).attr("height",i).attr("y",l).attr("fill",s):t==="exiting"?Xo(F.current).transition().duration(1e3).attr("height",0).attr("y",n):Xo(F.current).transition().duration(1e3).attr("height",i).attr("x",a).attr("y",l).attr("width",r).attr("fill",s)},[F,t,r,n,i,a,l,s]);const K=Ee.useCallback(re=>{d(re,{color:s,key:v,index:S,value:A,data:P,barValues:L})},[d,s,v,S,A,P,L]);return ae("rect",{className:"avl-stack",ref:F,onMouseMove:K})});Ee.memo(({stacks:e,left:t,state:r,...n})=>{const i=Ee.useRef();return Ee.useEffect(()=>{r==="entering"?Xo(i.current).attr("transform",`translate(${t} 0)`):Xo(i.current).transition().duration(1e3).attr("transform",`translate(${t} 0)`)},[i,r,t]),ae("g",{className:"avl-bar",ref:i,children:e.map(({key:l,...a},s)=>ae(z4e,{Key:l,state:r,...n,...a},l))})});function Fc(e){return function(){return e}}const kN=Math.abs,Ku=Math.atan2,oy=Math.cos,L4e=Math.max,ZT=Math.min,Hp=Math.sin,j_=Math.sqrt,Yu=1e-12,Bx=Math.PI,pS=Bx/2,$4e=2*Bx;function N4e(e){return e>1?0:e<-1?Bx:Math.acos(e)}function IN(e){return e>=1?pS:e<=-1?-pS:Math.asin(e)}const eI=Math.PI,tI=2*eI,py=1e-6,B4e=tI-py;function iq(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function F4e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return iq;const r=10**t;return function(n){this._+=n[0];for(let i=1,l=n.length;i<l;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class U4e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?iq:F4e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,l,a){this._append`C${+t},${+r},${+n},${+i},${this._x1=+l},${this._y1=+a}`}arcTo(t,r,n,i,l){if(t=+t,r=+r,n=+n,i=+i,l=+l,l<0)throw new Error(`negative radius: ${l}`);let a=this._x1,s=this._y1,d=n-t,v=i-r,S=a-t,A=s-r,P=S*S+A*A;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(P>py)if(!(Math.abs(A*d-v*S)>py)||!l)this._append`L${this._x1=t},${this._y1=r}`;else{let L=n-a,F=i-s,K=d*d+v*v,re=L*L+F*F,G=Math.sqrt(K),H=Math.sqrt(P),B=l*Math.tan((eI-Math.acos((K+P-re)/(2*G*H)))/2),$=B/H,N=B/G;Math.abs($-1)>py&&this._append`L${t+$*S},${r+$*A}`,this._append`A${l},${l},0,0,${+(A*L>S*F)},${this._x1=t+N*d},${this._y1=r+N*v}`}}arc(t,r,n,i,l,a){if(t=+t,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(i),d=n*Math.sin(i),v=t+s,S=r+d,A=1^a,P=a?i-l:l-i;this._x1===null?this._append`M${v},${S}`:(Math.abs(this._x1-v)>py||Math.abs(this._y1-S)>py)&&this._append`L${v},${S}`,n&&(P<0&&(P=P%tI+tI),P>B4e?this._append`A${n},${n},0,1,${A},${t-s},${r-d}A${n},${n},0,1,${A},${this._x1=v},${this._y1=S}`:P>py&&this._append`A${n},${n},0,${+(P>=eI)},${A},${this._x1=t+n*Math.cos(l)},${this._y1=r+n*Math.sin(l)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function aq(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new U4e(t)}function j4e(e){return e.innerRadius}function V4e(e){return e.outerRadius}function q4e(e){return e.startAngle}function G4e(e){return e.endAngle}function H4e(e){return e&&e.padAngle}function W4e(e,t,r,n,i,l,a,s){var d=r-e,v=n-t,S=a-i,A=s-l,P=A*d-S*v;if(!(P*P<Yu))return P=(S*(t-l)-A*(e-i))/P,[e+P*d,t+P*v]}function Pw(e,t,r,n,i,l,a){var s=e-r,d=t-n,v=(a?l:-l)/j_(s*s+d*d),S=v*d,A=-v*s,P=e+S,L=t+A,F=r+S,K=n+A,re=(P+F)/2,G=(L+K)/2,H=F-P,B=K-L,$=H*H+B*B,N=i-l,z=P*K-F*L,X=(B<0?-1:1)*j_(L4e(0,N*N*$-z*z)),te=(z*B-H*X)/$,pe=(-z*H-B*X)/$,ke=(z*B+H*X)/$,Pe=(-z*H+B*X)/$,ge=te-re,Ie=pe-G,Ne=ke-re,lt=Pe-G;return ge*ge+Ie*Ie>Ne*Ne+lt*lt&&(te=ke,pe=Pe),{cx:te,cy:pe,x01:-S,y01:-A,x11:te*(i/N-1),y11:pe*(i/N-1)}}function Z4e(){var e=j4e,t=V4e,r=Fc(0),n=null,i=q4e,l=G4e,a=H4e,s=null,d=aq(v);function v(){var S,A,P=+e.apply(this,arguments),L=+t.apply(this,arguments),F=i.apply(this,arguments)-pS,K=l.apply(this,arguments)-pS,re=kN(K-F),G=K>F;if(s||(s=S=d()),L<P&&(A=L,L=P,P=A),!(L>Yu))s.moveTo(0,0);else if(re>$4e-Yu)s.moveTo(L*oy(F),L*Hp(F)),s.arc(0,0,L,F,K,!G),P>Yu&&(s.moveTo(P*oy(K),P*Hp(K)),s.arc(0,0,P,K,F,G));else{var H=F,B=K,$=F,N=K,z=re,X=re,te=a.apply(this,arguments)/2,pe=te>Yu&&(n?+n.apply(this,arguments):j_(P*P+L*L)),ke=ZT(kN(L-P)/2,+r.apply(this,arguments)),Pe=ke,ge=ke,Ie,Ne;if(pe>Yu){var lt=IN(pe/P*Hp(te)),it=IN(pe/L*Hp(te));(z-=lt*2)>Yu?(lt*=G?1:-1,$+=lt,N-=lt):(z=0,$=N=(F+K)/2),(X-=it*2)>Yu?(it*=G?1:-1,H+=it,B-=it):(X=0,H=B=(F+K)/2)}var Rt=L*oy(H),St=L*Hp(H),Zt=P*oy(N),Kt=P*Hp(N);if(ke>Yu){var Ge=L*oy(B),Ye=L*Hp(B),Dr=P*oy($),wr=P*Hp($),tr;if(re<Bx)if(tr=W4e(Rt,St,Dr,wr,Ge,Ye,Zt,Kt)){var br=Rt-tr[0],Bt=St-tr[1],hr=Ge-tr[0],cr=Ye-tr[1],Mn=1/Hp(N4e((br*hr+Bt*cr)/(j_(br*br+Bt*Bt)*j_(hr*hr+cr*cr)))/2),Hn=j_(tr[0]*tr[0]+tr[1]*tr[1]);Pe=ZT(ke,(P-Hn)/(Mn-1)),ge=ZT(ke,(L-Hn)/(Mn+1))}else Pe=ge=0}X>Yu?ge>Yu?(Ie=Pw(Dr,wr,Rt,St,L,ge,G),Ne=Pw(Ge,Ye,Zt,Kt,L,ge,G),s.moveTo(Ie.cx+Ie.x01,Ie.cy+Ie.y01),ge<ke?s.arc(Ie.cx,Ie.cy,ge,Ku(Ie.y01,Ie.x01),Ku(Ne.y01,Ne.x01),!G):(s.arc(Ie.cx,Ie.cy,ge,Ku(Ie.y01,Ie.x01),Ku(Ie.y11,Ie.x11),!G),s.arc(0,0,L,Ku(Ie.cy+Ie.y11,Ie.cx+Ie.x11),Ku(Ne.cy+Ne.y11,Ne.cx+Ne.x11),!G),s.arc(Ne.cx,Ne.cy,ge,Ku(Ne.y11,Ne.x11),Ku(Ne.y01,Ne.x01),!G))):(s.moveTo(Rt,St),s.arc(0,0,L,H,B,!G)):s.moveTo(Rt,St),!(P>Yu)||!(z>Yu)?s.lineTo(Zt,Kt):Pe>Yu?(Ie=Pw(Zt,Kt,Ge,Ye,P,-Pe,G),Ne=Pw(Rt,St,Dr,wr,P,-Pe,G),s.lineTo(Ie.cx+Ie.x01,Ie.cy+Ie.y01),Pe<ke?s.arc(Ie.cx,Ie.cy,Pe,Ku(Ie.y01,Ie.x01),Ku(Ne.y01,Ne.x01),!G):(s.arc(Ie.cx,Ie.cy,Pe,Ku(Ie.y01,Ie.x01),Ku(Ie.y11,Ie.x11),!G),s.arc(0,0,P,Ku(Ie.cy+Ie.y11,Ie.cx+Ie.x11),Ku(Ne.cy+Ne.y11,Ne.cx+Ne.x11),G),s.arc(Ne.cx,Ne.cy,Pe,Ku(Ne.y11,Ne.x11),Ku(Ne.y01,Ne.x01),!G))):s.arc(0,0,P,N,$,G)}if(s.closePath(),S)return s=null,S+""||null}return v.centroid=function(){var S=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,A=(+i.apply(this,arguments)+ +l.apply(this,arguments))/2-Bx/2;return[oy(A)*S,Hp(A)*S]},v.innerRadius=function(S){return arguments.length?(e=typeof S=="function"?S:Fc(+S),v):e},v.outerRadius=function(S){return arguments.length?(t=typeof S=="function"?S:Fc(+S),v):t},v.cornerRadius=function(S){return arguments.length?(r=typeof S=="function"?S:Fc(+S),v):r},v.padRadius=function(S){return arguments.length?(n=S==null?null:typeof S=="function"?S:Fc(+S),v):n},v.startAngle=function(S){return arguments.length?(i=typeof S=="function"?S:Fc(+S),v):i},v.endAngle=function(S){return arguments.length?(l=typeof S=="function"?S:Fc(+S),v):l},v.padAngle=function(S){return arguments.length?(a=typeof S=="function"?S:Fc(+S),v):a},v.context=function(S){return arguments.length?(s=S??null,v):s},v}function X4e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function oq(e){this._context=e}oq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function K4e(e){return new oq(e)}function Y4e(e){return e[0]}function J4e(e){return e[1]}function Tw(e,t){var r=Fc(!0),n=null,i=K4e,l=null,a=aq(s);e=typeof e=="function"?e:e===void 0?Y4e:Fc(e),t=typeof t=="function"?t:t===void 0?J4e:Fc(t);function s(d){var v,S=(d=X4e(d)).length,A,P=!1,L;for(n==null&&(l=i(L=a())),v=0;v<=S;++v)!(v<S&&r(A=d[v],v,d))===P&&((P=!P)?l.lineStart():l.lineEnd()),P&&l.point(+e(A,v,d),+t(A,v,d));if(L)return l=null,L+""||null}return s.x=function(d){return arguments.length?(e=typeof d=="function"?d:Fc(+d),s):e},s.y=function(d){return arguments.length?(t=typeof d=="function"?d:Fc(+d),s):t},s.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Fc(!!d),s):r},s.curve=function(d){return arguments.length?(i=d,n!=null&&(l=i(n)),s):i},s.context=function(d){return arguments.length?(d==null?n=l=null:l=i(n=d),s):n},s}function MN(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function a3(e,t){this._context=e,this._k=(1-t)/6}a3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:MN(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:MN(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function r(n){return new a3(n,t)}return r.tension=function(n){return e(+n)},r})(0);function Q4e(e,t,r){var n=e._x1,i=e._y1,l=e._x2,a=e._y2;if(e._l01_a>Yu){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,d=3*e._l01_a*(e._l01_a+e._l12_a);n=(n*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/d,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/d}if(e._l23_a>Yu){var v=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,S=3*e._l23_a*(e._l23_a+e._l12_a);l=(l*v+e._x1*e._l23_2a-t*e._l12_2a)/S,a=(a*v+e._y1*e._l23_2a-r*e._l12_2a)/S}e._context.bezierCurveTo(n,i,l,a,e._x2,e._y2)}function sq(e,t){this._context=e,this._alpha=t}sq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Q4e(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Aw=function e(t){function r(n){return t?new sq(n,t):new a3(n,0)}return r.alpha=function(n){return e(+n)},r}(.5),eze=({data:e,idFormat:t,xFormat:r,yFormat:n,lineTotals:i,showTotals:l=!0})=>Ft("div",{className:`
        flex flex-col px-2 pt-1 pb-2 rounded
        ${d4e.accent1}
      `,children:[Ft("div",{className:"border-b-2 px-2 flex",children:[ae("div",{className:"font-bold text-lg leading-6 flex-1",children:r(Qt(e,"x",null),e)}),l?ae("div",{children:"(Line Total)"}):null]}),Ft("div",{className:"px-2",children:[e.data.sort((a,s)=>i[s.id]-i[a.id]).map(({id:a,y:s,color:d,isMax:v,...S})=>Ft("div",{className:`
                  rounded border-2 flex
                  ${v?"border-current":"border-transparent"}
                `,children:[ae("div",{className:"flex-1",children:Ft("div",{className:`
                    flex items-center
                    ${v?"border-current":"border-transparent"}
                    transition pl-2
                  `,children:[ae("div",{className:`
                      mr-2 rounded-sm color-square w-5 h-5 transition border-2
                    `,style:{borderColor:d,borderStyle:"solid",background:`${d}${v?"ff":"33"}`}}),Ft("div",{className:"mr-4 flex-1",children:[t(a,S),":"]})]})}),ae("div",{children:ae("div",{className:`
                    text-right pr-4 transition
                  `,children:n(s,S)})}),l?ae("div",{children:Ft("div",{className:`
                      text-right transition pr-2
                    `,children:["(",n(i[a],S),")"]})}):null]},a)),e.secondary.sort((a,s)=>i[s.id]-i[a.id]).map(({id:a,y:s,color:d,isMax:v,...S})=>Ft("div",{className:`
                  rounded border-2 grid grid-cols-3
                  ${v?"border-current":"border-transparent"}
                `,children:[ae("div",{className:"col-span-1",children:Ft("div",{className:`
                    flex items-center
                    ${v?"border-current":"border-transparent"}
                    transition pl-2
                  `,children:[ae("div",{className:`
                      mr-2 rounded-sm color-square w-5 h-5 transition border-2
                    `,style:{borderColor:d,borderStyle:"solid",background:`${d}${v?"ff":"33"}`}}),Ft("div",{className:"mr-4",children:[t(a,S),":"]})]})}),ae("div",{className:"col-span-1",children:ae("div",{className:`
                    text-right pr-4 transition
                  `,children:n(s,S)})}),ae("div",{className:"col-span-1",children:Ft("div",{className:`
                    text-right transition pr-2
                  `,children:["(",n(i[a],S),")"]})})]},a))]})]}),tze={HoverComp:eze,idFormat:HT,xFormat:HT,yFormat:HT,position:"side",showTotals:!0},rze={xDomain:[],yDomain:[],secDomain:[],XScale:null,YScale:null,SecScale:null,adjustedWidth:0,adjustedHeight:0,sliceData:{},lineTotals:{},barData:[]},nze=e=>{const{data:t=s_,secondary:r=s_,margin:n=TN,xScale:i=null,axisBottom:l=null,yScale:a=null,axisLeft:s=null,secScale:d=null,axisRight:v=null,hoverComp:S=TN,indexBy:A="id",className:P="",padding:L=.5,strokeWidth:F=1,shouldComponentUpdate:K=null,colors:re}=e,G=Ee.useMemo(()=>{const cr={...tze,...S};return typeof cr.idFormat=="string"&&(cr.idFormat=e0(cr.idFormat)),typeof cr.xFormat=="string"&&(cr.xFormat=e0(cr.xFormat)),typeof cr.yFormat=="string"&&(cr.yFormat=e0(cr.yFormat)),cr},[S]),H=Ee.useMemo(()=>({...u4e,...n}),[n]),B=Ee.useRef(),{width:$,height:N}=p4e(B),[z,X]=Ee.useState(rze),te=Ee.useRef(s_),pe=Ee.useRef(s_),ke=Ee.useRef(s_),Pe=Ee.useRef(s_),ge=Ee.useCallback((cr=!1)=>{let Mn=cr?ke:te,Hn=cr?Pe:pe;Mn.current=Mn.current.filter(({id:Qn})=>!(Qn in Hn.current)),X(Qn=>({...Qn}))},[]),Ie=f4e(e,$,N);Ee.useEffect(()=>{if(!($&&N)||!Ie)return;const cr=Math.max(0,$-(H.left+H.right)),Mn=Math.max(0,N-(H.top+H.bottom));let Hn=t.length?t[0].data.map(ur=>ur.x):[];const Qn={...c4e,...s};let an=[];Hn.length&&(an=t.reduce((ur,hn)=>{const ti=hn.data.reduce((Hr,fi)=>Math.max(Hr,+fi.y),0);return isNaN(ti)?ur:[Qn.min,Math.max(ti,Qt(ur,1,0))]},[]));let ki=[];Hn.length&&(ki=r.reduce((ur,hn)=>{const ti=hn.data.reduce((Hr,fi)=>Math.max(Hr,+fi.y),0);return isNaN(ti)?ur:[0,Math.max(ti,Qt(ur,1,0))]},[]));const Xn=MTe().padding(L).domain(Hn).range([0,cr]);i&&(Hn=Qt(i,"domain",Hn),Xn.domain(Hn));const Li=oS().domain(an).range([Mn,0]);a&&(an=Qt(a,"domain",an),Li.domain(an));const Pi=oS().domain(ki).range([Mn,0]);d&&(ki=Qt(d,"domain",ki),Pi.domain(ki));const Yi=Tw().curve(Aw).x(ur=>Xn(ur.x)).y(ur=>Li(ur.y)),gi=Tw().curve(Aw).x(ur=>Xn(ur.x)).y(ur=>Pi(ur.y)),ea=Li(an[0]),ya=Tw().curve(Aw).x(ur=>Xn(ur)).y(ur=>ea),La=ya(Hn),Aa=Pi(ki[0]),$a=Tw().curve(Aw).x(ur=>Xn(ur)).y(ur=>Aa),ka=$a(Hn),Ka=l4e(re),dr={},[Mt,yr]=te.current.reduce((ur,hn)=>{const[ti,Hr]=ur;return ti[hn[A]]="updating",Hr[hn[A]]=hn,hn.state="exiting",[ti,Hr]},[{},{}]),Xt=Hn.reduce((ur,hn)=>(ur[hn]=[],ur),{});te.current=t.map((ur,hn)=>{const{data:ti,...Hr}=ur;delete yr[ur[A]];const fi=Ka(ur,hn);return dr[ur[A]]=0,ti.forEach(({x:Ci,y:zi})=>{dr[ur[A]]+=zi,Ci in Xt&&Xt[Ci].push({...Hr,color:fi,y:zi})}),{line:Yi(ti),baseLine:La,color:fi,state:Qt(Mt,ur[A],"entering"),id:ur[A].toString()}}),pe.current=yr;const Yt=Object.values(yr);Yt.length&&setTimeout(ge,1050),te.current=te.current.concat(Yt);for(const ur in Xt){const hn=Xt[ur],{i:ti}=hn.reduce((Hr,fi,Ci)=>(fi.isMax=!1,fi.y>Hr.y?{y:fi.y,i:Ci}:Hr),{y:0,i:-1});ti>-1&&(hn[ti].isMax=!0)}let[lr,Qr]=ke.current.reduce((ur,hn)=>{const[ti,Hr]=ur;return ti[hn[A]]="updating",Hr[hn[A]]=hn,hn.state="exiting",[ti,Hr]},[{},{}]);const Xr=Hn.reduce((ur,hn)=>(ur[hn]=[],ur),{});ke.current=r.map((ur,hn)=>{const{data:ti,...Hr}=ur;delete Qr[ur[A]];const fi=Ka(ur,hn+te.current.length);return dr[ur[A]]=0,ti.forEach(({x:Ci,y:zi})=>{dr[ur[A]]+=zi,Xr[Ci].push({...Hr,color:fi,y:zi})}),{line:gi(ti),baseLine:ka,color:fi,state:Qt(lr,ur[A],"entering"),id:ur[A].toString()}}),Pe.current=Qr;const En=Object.values(Qr);En.length&&setTimeout(ge,1050,!0),ke.current=ke.current.concat(En);for(const ur in Xr){const hn=Xr[ur],{i:ti}=hn.reduce((Hr,fi,Ci)=>(fi.isMax=!1,fi.y>Hr.y?{y:fi.y,i:Ci}:Hr),{y:0,i:-1});ti>-1&&(hn[ti].isMax=!0)}const Rn=Xn.step(),rr=Xn.padding()*Rn-Rn*.5,Lr=Hn.map((ur,hn)=>({left:rr+hn*Rn,center:Xn(ur),data:Xt[ur],secondary:Xr[ur],height:Mn,width:Rn,id:ur}));X({xDomain:Hn,yDomain:an,XScale:Xn,YScale:Li,barData:Lr,indexBy:A,SecScale:Pi,secDomain:ki,adjustedWidth:cr,adjustedHeight:Mn,sliceData:Xt,secSliceData:Xr,lineTotals:dr})},[t,$,N,H,te,re,L,ge,A,r,s,Ie]);const{onMouseMove:Ne,onMouseLeave:lt,hoverData:it}=D4e(B),{xDomain:Rt,XScale:St,yDomain:Zt,YScale:Kt,secDomain:Ge,SecScale:Ye,lineTotals:Dr,barData:wr,...tr}=z,{HoverComp:br,position:Bt,...hr}=G;return Ft("div",{className:"w-full h-full relative avl-graph-container relative",ref:B,children:[Ft("svg",{className:`w-full h-full block avl-graph ${P}`,children:[te.current.length?Ft("g",{children:[l?ae(E4e,{...tr,margin:H,scale:St,domain:Rt,...l}):null,s?ae(P4e,{...tr,margin:H,scale:Kt,domain:Zt,...s}):null]}):null,Ft("g",{style:{transform:`translate(${H.left}px, ${H.top}px)`},onMouseLeave:lt,children:[te.current.map(({id:cr,...Mn})=>ae(ON,{...Mn,onMouseMove:Ne,strokeWidth:F},cr)),ke.current.map(({id:cr,...Mn})=>ae(ON,{...Mn,secondary:!0,onMouseMove:Ne,strokeWidth:F},cr)),wr.map(({id:cr,...Mn})=>ae(ize,{id:cr,...Mn,onMouseMove:Ne},cr)),it.show?ae("line",{stroke:"currentColor",strokeWidth:"1",style:{transform:`translate(${it.data.center}px)`,transition:"transform 0.15s ease-out"},x1:.5,y1:0,x2:.5,y2:tr.adjustedHeight}):null]}),ke.current.length?ae("g",{children:v?ae(A4e,{...tr,secondary:!0,margin:H,scale:Ye,domain:Ge,...v}):null}):null]}),ae(M4e,{...it,position:Bt,svgWidth:$,svgHeight:N,margin:H,children:it.data?ae(br,{data:it.data,lineTotals:Dr,...hr}):null})]})},ON=Ee.memo(({line:e,baseLine:t,state:r,color:n,strokeWidth:i=1,secondary:l=!1})=>{const a=Ee.useRef();return Ee.useEffect(()=>{r==="entering"?Xo(a.current).attr("d",t).attr("stroke",n).attr("stroke-dasharray",l?"8 4":null).attr("stroke-width",i).transition().duration(1e3).attr("d",e):r==="exiting"?Xo(a.current).transition().duration(1e3).attr("d",t):Xo(a.current).transition().duration(1e3).attr("stroke",n).attr("stroke-width",i).attr("d",e)},[a,r,e,t,n,l]),ae("g",{children:ae("path",{ref:a,fill:"none",strokeWidth:"4"})})}),ize=Ee.memo(({id:e,left:t,center:r,data:n,secondary:i,height:l,width:a,onMouseMove:s})=>{const d=Ee.useCallback(v=>{s(v,{x:e,data:n,secondary:i,center:r})},[s,e,n,i,r]);return ae("rect",{fill:"#00000000",x:t,y:0,width:a,height:l,onMouseMove:d})}),aze=Ee.memo(({x:e,width:t,height:r,color:n,state:i,onMouseMove:l,onClick:a,Key:s,index:d,value:v,showAnimations:S,data:A,indexData:P,indexes:L})=>{const F=Ee.useRef();Ee.useEffect(()=>{if(i==="entering"){const G=Xo(F.current).attr("width",0).attr("height",r).attr("x",0).attr("y",0).attr("fill",n);S?G.transition().duration(1e3).attr("width",t).attr("x",e):G.attr("width",t).attr("x",e)}else if(i==="exiting"){const G=Xo(F.current);S?G.transition().duration(1e3).attr("width",0).attr("height",r).attr("x",0).attr("fill",n):G.attr("width",0).attr("height",r).attr("x",0).attr("fill",n)}else{const G=Xo(F.current);S?G.transition().duration(1e3).attr("width",t).attr("height",r).attr("x",e).attr("fill",n):G.attr("width",t).attr("height",r).attr("x",e).attr("fill",n)}},[e,t,r,n,i,S]);const K=Ee.useCallback(G=>{l(G,{color:n,key:s,index:d,value:v,data:A,x:e,width:t,indexData:P,indexes:L})},[l,n,s,d,v,A,e,t,P,L]),re=Ee.useMemo(()=>a?G=>{a(G,{key:s,index:d,value:v})}:null,[a,s,d,v]);return ae("rect",{ref:F,className:"avl-grid",onMouseMove:K,onClick:re})});Ee.memo(({index:e,grid:t,top:r,state:n,showAnimations:i,onHoverEnter:l,onHoverLeave:a,className:s,...d})=>{const v=Ee.useRef();Ee.useEffect(()=>{n==="entering"?Xo(v.current).attr("transform",`translate(0 ${r})`):i?Xo(v.current).transition().duration(1e3).attr("transform",`translate(0 ${r})`):Xo(v.current).attr("transform",`translate(0 ${r})`)},[n,r,i]);const S=Ee.useMemo(()=>l?P=>l(P,e):null,[l,e]),A=Ee.useMemo(()=>a?P=>a(P,e):null,[a,e]);return ae("g",{ref:v,className:`avl-grid-horizontal ${s||""}`,onMouseEnter:S,onMouseLeave:A,children:t.map(({key:P,...L})=>ae(aze,{Key:P,state:n,...d,...L,showAnimations:i},P))})});const oze=Ee.memo(({state:e,data:t,radius:r,index:n,onMouseMove:i,endAngle:l,startAngle:a,padAngle:s})=>{const d=Ee.useMemo(()=>Z4e().innerRadius(0).cornerRadius(0),[]),v=Ee.useRef();Ee.useEffect(()=>{Xo(v.current).datum({endAngle:l,startAngle:a,padAngle:s,outerRadius:r})},[l,a,s,r]),Ee.useEffect(()=>{e==="entering"?Xo(v.current).attr("d",d({endAngle:l,startAngle:a,padAngle:s,outerRadius:.1})).transition().duration(1e3).attr("d",d({endAngle:l,startAngle:a,padAngle:s,outerRadius:r})).attr("fill",t.color):e==="exiting"?Xo(v.current).transition().duration(1e3).attr("d",d({endAngle:l,startAngle:a,padAngle:s,outerRadius:.1})):Xo(v.current).transition().duration(1e3).attr("fill",t.color).attrTween("d",A=>{const P=Y_(A.startAngle,a),L=Y_(A.endAngle,l),F=Y_(A.outerRadius,r);return K=>(A.startAngle=P(K),A.endAngle=L(K),A.outerRadius=F(K),d(A))})},[v,d,t,r,l,a,s,e]);const S=Ee.useCallback(A=>{i(A,{...t})},[i,t]);return ae("path",{ref:v,className:"avl-slice",stroke:"none",onMouseMove:S})});Ee.memo(({pie:e,dx:t,dy:r,ms:n,state:i,label:l,...a})=>{const s=Ee.useRef();Ee.useEffect(()=>{i==="entering"?Xo(s.current).style("transform",`translate(${t}px, ${r}px)`).style("opacity",0).transition().duration(1e3).style("opacity",1):i==="exiting"?Xo(s.current).transition().duration(1e3).style("transform",`translate(${t}px, ${r}px)`).style("opacity",0):Xo(s.current).transition().duration(1e3).style("transform",`translate(${t}px, ${r}px)`).style("opacity",1)},[s,t,r,i]);const d=Ee.useRef();return Ee.useEffect(()=>{Xo(d.current).transition().duration(1e3).style("transform",`translateY(${n*.5+15}px)`)},[d,n]),Ft("g",{ref:s,children:[e.map((v,S)=>ae(oze,{...a,...v,state:i},v.data.key)),ae("g",{ref:d,children:ae("text",{textAnchor:"middle",children:l})})]})});const sze=({views:e})=>{const{viewId:t,sourceId:r,page:n}=rc();return Yc(),Ft("div",{className:"flex flex-1",children:[ae("div",{className:"py-3.5 px-2 text-sm text-gray-400",children:"Version : "}),ae("div",{className:"flex-1",children:ae("select",{className:"pl-3 pr-4 py-2.5 border border-blue-100 bg-blue-50 w-full bg-white mr-2 flex items-center justify-between text-sm",value:t,children:e.sort((i,l)=>l.view_id-i.view_id).map((i,l)=>ae("option",{className:"ml-2  truncate",value:i.view_id,children:i.version?i.version:i.view_id},l))})})]})},lze=()=>ae("div",{}),uze=(e,t)=>({data:e,columns:t.map(r=>({Header:r,accessor:r}))}),cze=({source:e,views:t,user:r,transform:n=uze,filterData:i={},TableFilter:l=lze})=>{const{viewId:a}=rc(),{falcor:s,falcorCache:d}=Gl(),[v,S]=Fe.useState(i),A=Ps(Ks),P=Ee.useMemo(()=>Qt(t.filter(B=>B.view_id===a),"[0]",t[0]),[t,a]),L=Ee.useMemo(()=>Qt(P,"view_id",null),[P]);Ee.useEffect(()=>{s.get(["dama",A,"viewsbyId",L,"data","length"]).then(B=>{console.timeEnd("getviewLength")})},[A,L]);const F=Ee.useMemo(()=>Qt(d,["dama",A,"viewsbyId",L,"data","length"],"No Length"),[A,L,d]),K=Ee.useMemo(()=>{var B;return(B=Qt(e,"metadata",[]))==null?void 0:B.filter($=>["integer","string","number"].includes($.type)).map($=>$.name)},[e]);Ee.useEffect(()=>{if(F>0){let B=Math.min(F,1e4);s.chunk(["dama",A,"viewsbyId",L,"databyIndex",[...Array(B).keys()],K]).then($=>{console.timeEnd("getViewData",B)})}},[A,L,F,K]);const re=Ee.useMemo(()=>Object.values(Qt(d,["dama",A,"viewsbyId",L,"databyIndex"],[])).map($=>Qt(d,$.value,{})),[A,L,d,F]);let G=Qt(P,["metadata","years"],[]);const{data:H}=Ee.useMemo(()=>n(re,K,v,G,"group_by_county"),[re,K,n,v]);return Ft("div",{children:[Ft("div",{className:"flex",children:[ae("div",{className:"flex-1 pl-3 pr-4 py-2",children:"Table View"}),ae(l,{filters:v,setFilters:S}),ae(sze,{views:t})]}),ae("div",{style:{height:"600px"},children:H!=null&&H.length?ae(Pu,{children:ae(nze,{data:H,axisBottom:{tickDensity:1},axisLeft:{lzabel:"Values",showGridLines:!1,tickDensity:1},axisRight:{label:"Year",showGridLines:!1},hoverComp:{idFormat:(B,$)=>$.name,yFormat:",.2f",showTotals:!1},margin:{top:20,bottom:25,left:80,right:30}})}):ae("div",{className:"text-center justify-content-center",style:{height:"600px",lineHeight:"600px"},children:"No Chart Data Available"})})]})},lq=Sc(cze),es=["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],ss=[0,872,2047,3649,6934,14119,28578],o3={totpop:{name:"Total Population",domain:ss,range:es},hhpop:{name:"Households",domain:ss,range:es},hhnum:{name:"Household Population",domain:ss,range:es},hhsize:{name:"Household Size",domain:ss,range:es},hhincx:{name:"Household Income",domain:ss,range:es},elf:{name:"Employed Labor Fouce",domain:ss,range:es},emptot:{name:"Total Employment",domain:ss,range:es},empret:{name:"Retail Employment",domain:ss,range:es},empoff:{name:"Office Employment",domain:ss,range:es},earnwork:{name:"Earnings",domain:ss,range:es},unvenrol:{name:"Universirty Enrollment",domain:ss,range:es},k_12_etot:{name:"School Enrollment",domain:ss,range:es},gqpop:{name:"Group Quarters Population",domain:ss,range:es},gqpopins:{name:"Group Quarters Instituional Population",domain:ss,range:es},gqpopstr:{name:"Group Quarters Other Population",domain:ss,range:es},gqpopoth:{name:"Group Quarters Homless Population",domain:ss,range:es}},s3={tot_pop:{name:"Total Population (in 000s)",domain:[0,74,213,481,750,1134,2801],range:es},tot_emp:{name:"Total Employment",domain:ss,range:es},emp_pay:{name:"Payroll Employment",domain:ss,range:es},emp_prop:{name:"Proprietors Employment",domain:ss,range:es},hh_pop:{name:"Household Population",domain:ss,range:es},gq_pop:{name:"Group Quarters Population",domain:ss,range:es},hh_num:{name:"Households",domain:ss,range:es},hh_size:{name:"Household Size",domain:ss,range:es},emplf:{name:"Employed Labor Force",domain:ss,range:es},lf:{name:"Labor Force",domain:ss,range:es}},uq=({source:e,metaData:t,filters:r,setFilters:n,setTempSymbology:i,tempSymbology:l,activeViewId:a})=>{const{falcor:s,falcorCache:d}=Gl(),v=Ps(Ks);let S=Fe.useMemo(()=>Qt(r,"activeVar.value",""),[r]),A=Fe.useMemo(()=>typeof S=="string"?S.substring(0,S.length-2):"",[S]),P=Fe.useMemo(()=>typeof S=="string"?S.slice(-1):"0",[S]),L=Fe.useMemo(()=>e.type==="tig_sed_county"?s3:o3,[e.type]);return Fe.useEffect(()=>{const F=()=>{s.get(["dama",v,"viewsbyId",a,"data","length"]).then(K=>{let re=Qt(K,["json","dama",v,"viewsbyId",a,"data","length"],0);return s.chunk(["dama",v,"viewsbyId",a,"databyIndex",[...Array(re).keys()],S])}).then(()=>{const K=Qt(d,["dama",v,"viewsbyId",a,"databyId"],{}),re=JE().domain(L[A].domain).range(L[A].range);let G=Object.keys(K).reduce(($,N)=>($[+N]=re(K[+N][S])||"#000",$),{}),H=["get",["to-string",["get","ogc_fid"]],["literal",G]],B=Ox(l)||{"fill-color":{}};B["fill-color"]||(B["fill-color"]={}),B["fill-color"][S]={type:"scale-threshold",settings:{range:L[A].range,domain:L[A].domain,title:L[A].name},value:H},i(B)})};S.length>0&&F()},[S,A,P,d]),Ee.useEffect(()=>{S||n({...r,activeVar:{value:e.type==="tig_sed_county"?"tot_pop_0":"totpop_0"}})},[]),Ft("div",{className:"flex flex-1 border-blue-100",children:[ae("div",{className:"py-3.5 px-2 text-sm text-gray-400",children:"Variable: "}),ae("div",{className:"flex-1",children:Ft("select",{className:"pl-3 pr-4 py-2.5 border border-blue-100 bg-blue-50 w-full bg-white mr-2 flex items-center justify-between text-sm",value:A,onChange:F=>n({...r,activeVar:{value:`${F.target.value}_${P}`}}),children:[ae("option",{className:"ml-2  truncate",value:null,children:"none"}),Object.keys(L).map((F,K)=>ae("option",{className:"ml-2  truncate",value:F,children:L[F].name},K))]})}),ae("div",{className:"py-3.5 px-2 text-sm text-gray-400",children:"Year:"}),ae("div",{className:"",children:ae("select",{className:"pl-3 pr-4 py-2.5 border border-blue-100 bg-blue-50 w-full bg-white mr-2 flex items-center justify-between text-sm",value:P,onChange:F=>n({...r,activeVar:{value:`${A}_${F.target.value}`}}),children:((t==null?void 0:t.years)||["2010"]).map((F,K)=>ae("option",{className:"ml-2  truncate",value:K,children:F},K))})})]})},cq=({source:e,filters:t,setFilters:r})=>{let n=Fe.useMemo(()=>Qt(t,"activeVar.value",""),[t]);console.log("SedTableFilter",t),Ee.useEffect(()=>{Qt(t,"activeVar.value","")||r({...t,activeVar:{value:(e==null?void 0:e.type)==="tig_sed_county"?"tot_pop":"totpop"}})},[]);let i=Fe.useMemo(()=>e.type==="tig_sed_county"?s3:o3,[e.type]);return Ft("div",{className:"flex flex-1 border-blue-100",children:[ae("div",{className:"py-3.5 px-2 text-sm text-gray-400",children:"Variable: "}),ae("div",{className:"flex-1",children:Ft("select",{className:"pl-3 pr-4 py-2.5 border border-blue-100 bg-blue-50 w-full bg-white mr-2 flex items-center justify-between text-sm",value:n,onChange:l=>r({...t,activeVar:{value:l.target.value}}),children:[ae("option",{className:"ml-2  truncate",value:"",children:"none"}),Object.keys(i).map((l,a)=>ae("option",{className:"ml-2  truncate",value:l,children:i[l].name},a))]})})]})},fq=(e,t,r,n,i)=>{let l=Qt(r,"activeVar.value","totpop"),a=n==null?void 0:n.map(d=>(""+d).slice(-2));const s=[{Header:i.type==="tig_sed_county"?"County":"TAZ",accessor:i.type==="tig_sed_county"?"county":"taz"}];return a.forEach((d,v)=>{s.push({Header:`20${d}`,accessor:`${l}_${v}`,Cell:({value:S})=>Math.round(S).toLocaleString()})}),{data:e,columns:s}},hq=({data:e,layer:t})=>{var K,re;const{falcor:r,falcorCache:n}=Gl(),{source:{type:i},attributes:l,activeViewId:a,props:{filters:s,activeView:{metadata:{years:d}}}}=t,v=Ps(Ks),S=Ee.useMemo(()=>Qt(e,"[0]",null),[e]);let A=Fe.useMemo(()=>Qt(s,"activeVar.value",""),[s]);Ee.useEffect(()=>{r.get(["dama",v,"viewsbyId",a,"databyId",S,l])},[r,v,a,S,l]);const P=Ee.useMemo(()=>Qt(n,["dama",v,"viewsbyId",a,"databyId",S],{}),[S,n,a,v]);let L=d[A.split("_")[1]||0],F=i==="tig_sed_taz"?((K=o3[A.split("_")[0]||"tot_pop"])==null?void 0:K.name)||"":((re=s3[A.slice(0,-2)||"totpop"])==null?void 0:re.name)||"";return Ft("div",{className:"bg-white p-4 max-h-64 scrollbar-xs overflow-y-scroll",children:[F," ",L,ae("div",{className:"font-medium pb-1 w-full border-b ",children:t.source.display_name}),i==="tig_sed_taz"?Ft("div",{className:"flex border-b pt-1",children:[ae("div",{className:"flex-1 font-medium text-sm pl-1",children:"TAZ"}),ae("div",{className:"flex-1 text-right font-thin pl-4 pr-1",children:P==null?void 0:P.taz})]}):"",Ft("div",{className:"flex border-b pt-1",children:[ae("div",{className:"flex-1 font-medium text-sm pl-1",children:"County"}),ae("div",{className:"flex-1 text-right font-thin pl-4 pr-1",children:P==null?void 0:P.county})]}),Ft("div",{className:"flex border-b pt-1",children:[ae("div",{className:"flex-1 font-medium text-sm pl-1",children:"Value"}),ae("div",{className:"flex-1 text-right font-thin pl-4 pr-1",children:Qt(P,A,"").toLocaleString()})]})]})};function fze(e,t){for(var r,n=-1,i=e.length;++n<i;){var l=t(e[n]);l!==void 0&&(r=r===void 0?l:r+l)}return r}var hze=fze,pze=kO,dze=hze;function mze(e,t){return e&&e.length?dze(e,pze(t)):0}var gze=mze;const dS=Xs(gze),Qi={regions:{"NYBPM Coounties":["Bergen","Bronx","Dutchess","Essex","Fairfield","Hudson","Hunterdon","Kings","Mercer","Middlesex","Monmouth","Morris","Nassau","New Haven","New York","Ocean","Orange","Passaic","Putnam","Queens","Richmond","Rockland","Somerset","Suffolk","Sussex","Union","Warren","Westchester"],"NYMTC Planning Area":["Bronx","Kings","Nassau","New York","Putnam","Queens","Richmond","Rockland","Suffolk","Westchester"]},sub_regions:{Connecticut:["Fairfield","Litchfield","New Haven"],"Long Island":["Nassau","Suffolk"],"Mid Hudson":["Dutchess","Orange","Putnam","Rockland","Sullivan","Ulster","Westchester"],"Mid Hudson South":["Putnam","Rockland","Westchester"],"New Jersey":["Bergen","Essex","Hudson","Hunterdon","Mercer","Middlesex","Monmouth","Morris","Ocean","Passaic","Somerset","Sussex","Union","Warren"],"New York City":["Bronx","Kings","New York","Queens","Richmond"]}},RN={totpop:{name:"Total Population"},hhpop:{name:"Households"},hhnum:{name:"Household Population"},hhsize:{name:"Household Size"},hhincx:{name:"Household Income"},elf:{name:"Employed Labor Fouce"},emptot:{name:"Total Employment"},empret:{name:"Retail Employment"},empoff:{name:"Office Employment"},earnwork:{name:"Earnings"},unvenrol:{name:"Universirty Enrollment"},k_12_etot:{name:"School Enrollment"},gqpop:{name:"Group Quarters Population"},gqpopins:{name:"Group Quarters Instituional Population"},gqpopstr:{name:"Group Quarters Other Population"},gqpopoth:{name:"Group Quarters Homless Population"}},DN={subRegion:{name:"Sub Region"},region:{name:"Region"}},yze=[...Object.keys((Qi==null?void 0:Qi.regions)||{}),...Object.keys((Qi==null?void 0:Qi.sub_regions)||{})],vze=({source:e,filters:t,setFilters:r})=>{let n=Fe.useMemo(()=>Qt(t,"activeVar.value",""),[t]),i=Fe.useMemo(()=>Qt(t,"area.value",""),[t]),l=Fe.useMemo(()=>Qt(t,"summarize.value",""),[t]);return Ee.useEffect(()=>{Qt(t,"activeVar.value",null)||r({...t,area:{value:"all"},activeVar:{value:"totpop"},summarize:{value:"region"}}),Qt(t,"area.value",null)||r({...t,area:{value:"all"},activeVar:{value:"totpop"},summarize:{value:"region"}}),Qt(t,"summarize.value",null)||r({...t,area:{value:"all"},activeVar:{value:"totpop"},summarize:{value:"region"}})},[]),Ft("div",{className:"flex border-blue-100",children:[ae("div",{className:"py-3.5 px-2 text-sm text-gray-400",children:"Area: "}),ae("div",{className:"flex-1",style:{width:"min-content"},children:Ft("select",{className:"pl-3 pr-4 py-2.5 border border-blue-100 bg-blue-50 w-full bg-white mr-2 flex items-center justify-between text-sm",value:i,onChange:a=>r({...t,area:{value:a.target.value},summarize:{value:a.target.value==="all"?l:"county"}}),children:[ae("option",{className:"ml-2  truncate",value:"all",children:"All"}),(yze||[]).map((a,s)=>ae("option",{className:"ml-2  truncate",value:a,children:a},s))]})}),ae("div",{className:"py-3.5 px-2 text-sm text-gray-400",children:"Summarize: "}),ae("div",{className:"flex-1",children:Ft("select",{className:"pl-3 pr-4 py-2.5 border border-blue-100 bg-blue-50 w-full bg-white mr-2 flex items-center justify-between text-sm",value:l,onChange:a=>r({...t,summarize:{value:a.target.value}}),children:[ae("option",{className:"ml-2  truncate",value:"county",children:"county"}),i==="all"?ae(Pu,{children:Object.keys(DN).map((a,s)=>{var d;return ae("option",{className:"ml-2  truncate",value:a,children:(d=DN[a])==null?void 0:d.name},s)})}):null]})}),ae("div",{className:"py-3.5 px-2 text-sm text-gray-400",children:"Variable: "}),ae("div",{className:"flex-1",children:Ft("select",{className:"pl-3 pr-4 py-2.5 border border-blue-100 bg-blue-50 w-full bg-white mr-2 flex items-center justify-between text-sm",value:n,onChange:a=>r({...t,activeVar:{value:a.target.value}}),children:[ae("option",{className:"ml-2  truncate",value:"",children:"none"}),Object.keys(RN).map((a,s)=>ae("option",{className:"ml-2  truncate",value:a,children:RN[a].name},s))]})})]})},_ze=(e,t)=>{var n,i,l,a;let r={};return(n=Qi==null?void 0:Qi.regions)!=null&&n.hasOwnProperty(e)?(i=Qi==null?void 0:Qi.regions[e])==null||i.forEach(s=>{r[s]=t[s]}):(l=Qi==null?void 0:Qi.sub_regions)!=null&&l.hasOwnProperty(e)&&((a=Qi==null?void 0:Qi.sub_regions[e])==null||a.forEach(s=>{r[s]=t[s]})),r},bze=(e,t,r,n,i)=>{let l=Qt(r,"activeVar.value","totpop"),a=Qt(r,"summarize.value","county"),s=Qt(r,"area.value","all"),d=n==null?void 0:n.map(L=>(""+L).slice(-2));const v=[];(d||[]).forEach((L,F)=>{(v||[]).push({Header:`20${L}`,accessor:`${l}_${F}`})});let S=(e||[]).reduce((L,F)=>{const{county:K}=F;return K!==null&&(L[`${K}`]=L[`${K}`]??[],L[`${K}`].push(F)),L},{});s!=="all"&&(S=_ze(s,S));const A=(L,F,K)=>{let re=0;return(F||[]).forEach(G=>{const H=K[`${G}`]||{};re+=Math.floor(dS(H,`${L}`)||0)}),re};let P=new Array(Object.keys(S).length).fill({});if(i==="group_by_county")if(a!=="county"){const L=a==="subRegion"?Qi==null?void 0:Qi.sub_regions:Qi==null?void 0:Qi.regions;P=new Array(Object.keys(L).length).fill({}),P=Object.keys(L).map(F=>({id:F,name:F,data:(v||[]).map(K=>({x:K==null?void 0:K.Header,y:A(K==null?void 0:K.accessor,L[`${F}`],S)}))}))}else P=Object.keys(S).map(L=>({id:L,name:L,data:(v||[]).map(F=>({x:F==null?void 0:F.Header,y:Math.floor(dS(S[`${L}`],`${F.accessor}`)||0)}))}));return{data:P,columns:v}},Wd=["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],Zm=[0,872,2047,3649,6934,14119,28578],zN={tot_pop:{name:"Total Population (in 000s)",domain:[0,74,213,481,750,1134,2801],range:Wd},tot_emp:{name:"Total Employment",domain:Zm,range:Wd},emp_pay:{name:"Payroll Employment",domain:Zm,range:Wd},emp_prop:{name:"Proprietors Employment",domain:Zm,range:Wd},hh_pop:{name:"Household Population",domain:Zm,range:Wd},gq_pop:{name:"Group Quarters Population",domain:Zm,range:Wd},hh_num:{name:"Households",domain:Zm,range:Wd},hh_size:{name:"Household Size",domain:Zm,range:Wd},lf:{name:"Labor Force",domain:Zm,range:Wd}},LN={subRegion:{name:"Sub Region"},region:{name:"Region"}},xze=[...Object.keys((Qi==null?void 0:Qi.regions)||{}),...Object.keys((Qi==null?void 0:Qi.sub_regions)||{})],wze=({source:e,filters:t,setFilters:r})=>{let n=Fe.useMemo(()=>Qt(t,"activeVar.value",""),[t]),i=Fe.useMemo(()=>Qt(t,"area.value",""),[t]),l=Fe.useMemo(()=>Qt(t,"summarize.value",""),[t]);return Ee.useEffect(()=>{Qt(t,"activeVar.value",null)||r({...t,area:{value:"all"},activeVar:{value:"tot_pop"},summarize:{value:"region"}}),Qt(t,"area.value",null)||r({...t,area:{value:"all"},activeVar:{value:"tot_pop"},summarize:{value:"region"}}),Qt(t,"summarize.value",null)||r({...t,area:{value:"all"},activeVar:{value:"tot_pop"},summarize:{value:"region"}})},[]),Ft("div",{className:"flex border-blue-100",children:[ae("div",{className:"py-3.5 px-2 text-sm text-gray-400",children:"Area: "}),ae("div",{className:"flex-1",style:{width:"min-content"},children:Ft("select",{className:"pl-3 pr-4 py-2.5 border border-blue-100 bg-blue-50 w-full bg-white mr-2 flex items-center justify-between text-sm",value:i,onChange:a=>r({...t,area:{value:a.target.value},summarize:{value:a.target.value==="all"?l:"county"}}),children:[ae("option",{className:"ml-2  truncate",value:"all",children:"All"}),(xze||[]).map((a,s)=>ae("option",{className:"ml-2  truncate",value:a,children:a},s))]})}),ae("div",{className:"py-3.5 px-2 text-sm text-gray-400",children:"Summarize: "}),ae("div",{className:"flex-1",children:Ft("select",{className:"pl-3 pr-4 py-2.5 border border-blue-100 bg-blue-50 w-full bg-white mr-2 flex items-center justify-between text-sm",value:l,onChange:a=>r({...t,summarize:{value:a.target.value}}),children:[ae("option",{className:"ml-2  truncate",value:"county",children:"county"}),i==="all"?ae(Pu,{children:Object.keys(LN).map((a,s)=>{var d;return ae("option",{className:"ml-2  truncate",value:a,children:(d=LN[a])==null?void 0:d.name},s)})}):null]})}),ae("div",{className:"py-3.5 px-2 text-sm text-gray-400",children:"Variable: "}),ae("div",{className:"flex-1",children:Ft("select",{className:"pl-3 pr-4 py-2.5 border border-blue-100 bg-blue-50 w-full bg-white mr-2 flex items-center justify-between text-sm",value:n,onChange:a=>r({...t,activeVar:{value:a.target.value}}),children:[ae("option",{className:"ml-2  truncate",value:"",children:"none"}),Object.keys(zN).map((a,s)=>ae("option",{className:"ml-2  truncate",value:a,children:zN[a].name},s))]})})]})},Sze=(e,t)=>{var n,i,l,a;let r={};return(n=Qi==null?void 0:Qi.regions)!=null&&n.hasOwnProperty(e)?(i=Qi==null?void 0:Qi.regions[e])==null||i.forEach(s=>{r[s]=t[s]}):(l=Qi==null?void 0:Qi.sub_regions)!=null&&l.hasOwnProperty(e)&&((a=Qi==null?void 0:Qi.sub_regions[e])==null||a.forEach(s=>{r[s]=t[s]})),r},Eze=(e,t,r,n,i)=>{let l=Qt(r,"activeVar.value","tot_pop"),a=Qt(r,"summarize.value","county"),s=Qt(r,"area.value","all"),d=n==null?void 0:n.map(L=>(""+L).slice(-2));const v=[];(d||[]).forEach((L,F)=>{(v||[]).push({Header:`20${L}`,accessor:`${l}_${F}`})});let S=(e||[]).reduce((L,F)=>{const{county:K}=F;return K!==null&&(L[`${K}`]=L[`${K}`]??[],L[`${K}`].push(F)),L},{});s!=="all"&&(S=Sze(s,S));const A=(L,F,K)=>{let re=0;return(F||[]).forEach(G=>{const H=K[`${G}`]||{};re+=Math.floor(dS(H,`${L}`)||0)}),re};let P=new Array(Object.keys(S).length).fill({});if(i==="group_by_county")if(a!=="county"){const L=a==="subRegion"?Qi==null?void 0:Qi.sub_regions:Qi==null?void 0:Qi.regions;P=new Array(Object.keys(L).length).fill({}),P=Object.keys(L).map(F=>({id:F,name:F,data:(v||[]).map(K=>({x:K==null?void 0:K.Header,y:A(K==null?void 0:K.accessor,L[`${F}`],S)}))}))}else P=Object.keys(S).map(L=>({id:L,name:L,data:(v||[]).map(F=>({x:F==null?void 0:F.Header,y:Math.floor(dS(S[`${L}`],`${F.accessor}`)||0)}))}));return{data:P,columns:v}},Cze=({state:e,dispatch:t})=>{let{customViewAttributes:{years:r}}=e||{};const n=(s,d)=>{const v=[...r];v[d]=s,r=v,t({type:"update",payload:{customViewAttributes:{years:r}}})},i=(s,d)=>{const v=d[s];for(let S=0;S<d.length;S++)if(S!==s&&Number(d[S])===Number(v))return!0;return!1},l=()=>{const s=Math.max(Math.max(...r),1995);r=[...r,`${s+5}`],t({type:"update",payload:{customViewAttributes:{years:r}}})},a=s=>{r==null||r.splice(s,1),t({type:"update",payload:{customViewAttributes:{years:r}}})};return Ft(Pu,{children:[Ft("button",{onClick:()=>l(),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",children:["Add a new year"," ",ae("span",{className:"my-2 mx-2 cursor-pointer",children:ae("i",{className:"fa fa-plus"})})]}),ae("div",{className:"grid grid-cols-3 gap-4 my-2",children:r&&(r||[]).map((s,d)=>ae(Pu,{children:Ft("div",{className:"pt-2 pr-8",children:[ae(R0,{type:"number",className:"p-2 flex-1 px-2 shadow bg-grey-50 focus:bg-blue-100 border-gray-300 ",value:s,onChange:v=>n(v,d)}),ae(Pu,{children:ae("button",{onClick:()=>a(d),className:"mx-3 my-3 text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900",children:ae("span",{className:" cursor-pointer",children:ae("i",{className:"fa fa-trash"})})})}),ae("br",{}),i(d,r)?ae("span",{className:"text-rose-800",children:`Year ${s} is already available`}):null]},d)}))})]})},mS=({state:e,dispatch:t})=>ae(Ee.Fragment,{children:ae(Cze,{state:e,dispatch:t})}),gS={isAllowToUpload:e=>{var t,r;return(Number((r=(t=e==null?void 0:e.customViewAttributes)==null?void 0:t.years)==null?void 0:r.length)||0)>6?"canUpload":ae("div",{className:"bg-red-500 mt-2 p-3",children:ae("span",{children:" Please enter minimum 7 values "})})},isYearsValidate:e=>{var n;const t=((n=e==null?void 0:e.customViewAttributes)==null?void 0:n.years)||[];return new Set(t).size===t.length?"canUpload":ae("div",{className:"bg-red-500 mt-2 p-3",children:ae("span",{children:" All years are not different "})})}},$N=["taz","county","earnwork_0","earnwork_1","earnwork_2","earnwork_3","earnwork_4","earnwork_5","earnwork_6","earnwork_7","earnwork_8","elf_0","elf_1","elf_2","elf_3","elf_4","elf_5","elf_6","elf_7","elf_8","empoff_0","empoff_1","empoff_2","empoff_3","empoff_4","empoff_5","empoff_6","empoff_7","empoff_8","empret_0","empret_1","empret_2","empret_3","empret_4","empret_5","empret_6","empret_7","empret_8","emptot_0","emptot_1","emptot_2","emptot_3","emptot_4","emptot_5","emptot_6","emptot_7","emptot_8","gqpop_0","gqpop_1","gqpop_2","gqpop_3","gqpop_4","gqpop_5","gqpop_6","gqpop_7","gqpop_8","gqpopins_0","gqpopins_1","gqpopins_2","gqpopins_3","gqpopins_4","gqpopins_5","gqpopins_6","gqpopins_7","gqpopins_8","gqpopoth_0","gqpopoth_1","gqpopoth_2","gqpopoth_3","gqpopoth_4","gqpopoth_5","gqpopoth_6","gqpopoth_7","gqpopoth_8","gqpopstr_0","gqpopstr_1","gqpopstr_2","gqpopstr_3","gqpopstr_4","gqpopstr_5","gqpopstr_6","gqpopstr_7","gqpopstr_8","hhincx_0","hhincx_1","hhincx_2","hhincx_3","hhincx_4","hhincx_5","hhincx_6","hhincx_7","hhincx_8","hhnum_0","hhnum_1","hhnum_2","hhnum_3","hhnum_4","hhnum_5","hhnum_6","hhnum_7","hhnum_8","hhpop_0","hhpop_1","hhpop_2","hhpop_3","hhpop_4","hhpop_5","hhpop_6","hhpop_7","hhpop_8","hhsize_0","hhsize_1","hhsize_2","hhsize_3","hhsize_4","hhsize_5","hhsize_6","hhsize_7","hhsize_8","k12etot_0","k12etot_1","k12etot_2","k12etot_3","k12etot_4","k12etot_5","k12etot_6","k12etot_7","k12etot_8","totpop_0","totpop_1","totpop_2","totpop_3","totpop_4","totpop_5","totpop_6","totpop_7","totpop_8","unvenrol_0","unvenrol_1","unvenrol_2","unvenrol_3","unvenrol_4","unvenrol_5","unvenrol_6","unvenrol_7","unvenrol_8"],NN=["county","tot_pop_0","tot_pop_1","tot_pop_2","tot_pop_3","tot_pop_4","tot_pop_5","tot_pop_6","tot_pop_7","tot_pop_8","tot_pop_9","tot_emp_0","tot_emp_1","tot_emp_2","tot_emp_3","tot_emp_4","tot_emp_5","tot_emp_6","tot_emp_7","tot_emp_8","tot_emp_9","emp_pay_0","emp_pay_1","emp_pay_2","emp_pay_3","emp_pay_4","emp_pay_5","emp_pay_6","emp_pay_7","emp_pay_8","emp_pay_9","emp_prop_0","emp_prop_1","emp_prop_2","emp_prop_3","emp_prop_4","emp_prop_5","emp_prop_6","emp_prop_7","emp_prop_8","emp_prop_9","hh_pop_0","hh_pop_1","hh_pop_2","hh_pop_3","hh_pop_4","hh_pop_5","hh_pop_6","hh_pop_7","hh_pop_8","hh_pop_9","gq_pop_0","gq_pop_1","gq_pop_2","gq_pop_3","gq_pop_4","gq_pop_5","gq_pop_6","gq_pop_7","gq_pop_8","gq_pop_9","hh_num_0","hh_num_1","hh_num_2","hh_num_3","hh_num_4","hh_num_5","hh_num_6","hh_num_7","hh_num_8","hh_num_9","hh_size_0","hh_size_1","hh_size_2","hh_size_3","hh_size_4","hh_size_5","hh_size_6","hh_size_7","hh_size_8","hh_size_9","lf_0","lf_1","lf_2","lf_3","lf_4","lf_5","lf_6","lf_7","lf_8","lf_9","emplf_0","emplf_1","emplf_2","emplf_3","emplf_4","emplf_5","emplf_6","emplf_7","emplf_8","emplf_9"],Pze={map:{name:"Map",path:"/map",component:e=>ae(dC,{...e,MapFilter:uq,HoverComp:hq})},table:{name:"Table",path:"/table",component:e=>ae(mC,{...e,transform:fq,TableFilter:cq})},chart:{name:"Chart",path:"/chart",component:e=>ae(lq,{...e,transform:bze,TableFilter:vze})},sourceCreate:{name:"Create",component:e=>ae(_g,{...e,dataType:"tig_sed_taz",customRules:gS,databaseColumnNames:$N,CustomAttributes:mS})},gisDatasetUpdate:{name:"Upload",path:"/gisDatasetUpdate",component:e=>ae(_g,{...e,dataType:"tig_sed_taz",customRules:gS,databaseColumnNames:$N,CustomAttributes:mS})}},Tze={map:{name:"Map",path:"/map",component:e=>ae(dC,{...e,MapFilter:uq,HoverComp:hq})},table:{name:"Table",path:"/table",component:e=>ae(mC,{...e,transform:fq,TableFilter:cq})},chart:{name:"Chart",path:"/chart",component:e=>ae(lq,{...e,transform:Eze,TableFilter:wze})},sourceCreate:{name:"Create",component:e=>ae(_g,{...e,dataType:"tig_sed",customRules:gS,databaseColumnNames:NN,CustomAttributes:mS})},gisDatasetUpdate:{name:"Upload",path:"/gisDatasetUpdate",component:e=>ae(_g,{...e,dataType:"tig_sed_county",customRules:gS,databaseColumnNames:NN,CustomAttributes:mS})}},Aze={map:{name:"Map",path:"/map",component:dC},table:{name:"Table",path:"/table",component:mC},sourceCreate:{name:"Create",component:e=>ae(_g,{...e,dataType:"tiger_conties"})},gisDatasetUpdate:{name:"Upload",path:"/gisDatasetUpdate",component:e=>ae(_g,{...e,dataType:"tiger_conties"})}},kze={sourceCreate:{name:"Create",component:e=>ae("div",{children:"Add Ammerican Communinity Survey Data"})}},rg={gis_dataset:o4e,tig_sed_taz:Pze,tig_sed_county:Tze,tiger_counties:Aze,tig_acs:kze},Ize=({user:e,baseUrl:t="datasources/"})=>{const{falcor:r,falcorCache:n}=Gl(),{sourceId:i,page:l}=rc(),[a,s]=Fe.useState(Ob),d=Ps(Ks),v=Fe.useMemo(()=>l?Qt(a,`[${l}].component`,Ob.overview.component):Ob.overview.component,[l,a]);Fe.useEffect(()=>{async function P(){console.time("fetch data");const L=["dama",d,"sources","byId",i,"views","length"],F=await r.get(L);let K=await r.get(["dama",d,"sources","byId",i,"views","byIndex",{from:0,to:Qt(F.json,L,0)-1},"attributes",Object.values(e3)],["dama",d,"sources","byId",i,"attributes",Object.values(Nx)],["dama",d,"sources","byId",i,"meta"]);return console.timeEnd("fetch data"),K}P()},[i,r,d]);const S=Fe.useMemo(()=>Object.values(Qt(n,["dama",d,"sources","byId",i,"views","byIndex"],{})).map(P=>fS(Qt(n,P.value,{attributes:{}}).attributes)),[n,i,d]),A=Fe.useMemo(()=>{let P=fS(Qt(n,["dama",d,"sources","byId",i],{attributes:{}}).attributes);if(rg[P.type]){let L=Object.keys(rg[P.type]).reduce((K,re)=>(rg[P.type][re].path&&(K[re]=rg[P.type][re]),K),{}),F={...Ob,...L};s(F)}else s(Ob);return P},[n,i,d]);return ae("div",{className:"max-w-6xl mx-auto",children:Ft(pC,{baseUrl:t,children:[Ft("div",{className:"flex w-full p-2 border-b items-center",children:[ae("div",{className:"text-2xl text-gray-700 font-medium overflow-hidden ",children:A.display_name||A.name}),ae("div",{className:"flex-1"}),ae("div",{className:"py-2",children:e&&e.authLevel>=10?ae(po,{className:"bg-red-100 border border-red-200 shadow hover:bg-red-400 hover:text-white p-2",to:`${t}/delete/source/${A.source_id}/`,children:ae("i",{className:"fad fa-trash"})}):""})]}),ae(v7,{menuItems:Object.values(a).map(P=>({name:P.name,path:`${t}/source/${i}${P.path}`})),themeOptions:{size:"inline"}}),ae("div",{className:"w-full p-4 bg-white shadow mb-4",children:ae(v,{source:A,views:S,user:e,baseUrl:t})})]})})},Mze=Sc(Ize),Oze=({baseUrl:e})=>{const[t,r]=Fe.useState(Object.keys(Nx).filter(d=>!["source_id","metadata","statistics"].includes(d)).reduce((d,v)=>(d[v]="",d),{})),[n,i]=Fe.useState(null),l=Ps(Ks),a=Ps(u5e);Fe.useEffect(()=>{(async()=>{const v=(await Promise.all(Object.keys(rg).map(async S=>S.pwrUsrOnly&&!a||rg[S].getIsAlreadyCreated&&await rg[S].getIsAlreadyCreated(l)?null:S))).filter(Boolean).reduce((S,A)=>(S[A]=rg[A],S),{});console.log("testing",v),i(v)})()},[l,a]);const s=Fe.useMemo(()=>Qt(n,`[${t.type}].sourceCreate.component`,()=>ae("div",{})),[n,t.type]);return n===null?ae("div",{children:"Requesting data types statuses"}):ae("div",{children:Ft(pC,{baseUrl:e,children:[ae("div",{className:"p-4 font-medium",children:" Create New Source "}),Ft("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-0",children:[Ft("dl",{className:"sm:divide-y sm:divide-gray-200",children:[Object.keys(Nx).filter(d=>!["source_id","metadata","description","type","statistics","category","update_interval","categories","display_name"].includes(d)).map((d,v)=>ae("div",{className:"flex justify-between group",children:Ft("div",{className:"flex-1 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[ae("dt",{className:"text-sm font-medium text-gray-500 py-5",children:d}),ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:ae("div",{className:"pt-3 pr-8",children:ae(R0,{className:"w-full p-2 flex-1 px-2 shadow bg-grey-50 focus:bg-blue-100  border-gray-300 ",value:Qt(t,d,""),onChange:S=>{r({...t,[d]:S})}})})})]})},v)),ae("div",{className:"flex justify-between group",children:Ft("div",{className:"flex-1 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[ae("dt",{className:"text-sm font-medium text-gray-500 py-5",children:"Data Type"}),ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:ae("div",{className:"pt-3 pr-8",children:Ft("select",{className:"w-full bg-white p-3 flex-1 shadow bg-grey-50 focus:bg-blue-100  border-gray-300",value:Qt(t,"type",""),onChange:d=>{r({...t,type:d.target.value})},children:[ae("option",{value:"",disabled:!0,children:"Select your option"}),Object.keys(n||[]).filter(d=>n[d].sourceCreate).map(d=>ae("option",{value:d,className:"p-2",children:d},d))]})})})]})})]}),ae(s,{source:t,baseUrl:e})]})]})})};async function Rze({falcor:e,pgEnv:t,sourceId:r}){const n=await e.get(["dama",t,"sources","byId",r,"dependents"]),i=[],l=[];Qt(n,["json","dama",t,"sources","byId",r,"dependents"]).forEach(a=>{i.push(a.source_id),l.push(a.view_id)}),await e.get(["dama",t,"sources","byId",[...i,r],"attributes",["type","name","display_name"]]),await e.get(["dama",t,"views","byId",l,"attributes",["version","metadata","_modified_timestamp","last_updated"]])}const pq=({text:e,sourceId:t,pgEnv:r,baseUrl:n})=>{const{falcor:i}=Gl(),l=Yc();return ae("button",{className:"bg-red-50 hover:bg-red-400 hover:text-white p-2",onClick:async()=>{await x5e(`${n3(r)}`,t),i.invalidate(["dama",r,"sources","length"],["dama",r,"sources","byIndex"],["dama",r,"sources","byId",t]),l(n)},children:e})},Dze=({dependents:e,srcMeta:t,viewMeta:r})=>Ft("div",{className:"w-full p-4 shadow mb-4",children:[ae("label",{className:"text-lg",children:"Dependents"}),ae("div",{className:"py-4 sm:py-2 mt-2 sm:grid sm:grid-cols-5 sm:gap-20 sm:px-6 border-b-2",children:["Source Name","Type","Version","Last Updated"].map(n=>ae("dt",{className:"text-sm font-medium text-gray-600",children:n},n))}),ae("dl",{className:"sm:divide-y sm:divide-gray-200",children:e.map((n,i)=>Ft("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-5 sm:gap-20 sm:px-6",children:[ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 align-middle",children:ae(po,{to:`/source/${n.source_id}/overview`,children:Qt(t,[n.source_id,"attributes","name"])})},`${i}_1`),ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 align-middle",children:ae(po,{to:`/source/${n.source_id}/overview`,children:Qt(t,[n.source_id,"attributes","type"])})},`${i}_2`),ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 align-middle",children:ae(po,{to:`/source/${n.source_id}/views/${n.view_id}`,children:Qt(r,[n.view_id,"attributes","version"])})},`${i}_3`),ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 align-middle",children:ae(po,{to:`/source/${n.source_id}/views/${n.view_id}`,children:typeof Qt(r,[n.view_id,"attributes","_modified_timestamp","value"])=="object"?"":Qt(r,[n.view_id,"attributes","_modified_timestamp","value"])})},`${i}_4`),ae("dd",{className:"mt-1 text-sm text-red-400 sm:mt-0",children:Ft("span",{className:"float-right italic",children:[" ",Qt(r,[n.view_id,"attributes","metadata","value","authoritative"])==="true"?"":"outdated"]})},`${i}_5`)]},`${i}_0`))})]}),zze=(e,t,r,n,i,l)=>Ft(Pu,{children:[Ft("div",{className:"pb-4 flex justify-between",children:[ae("label",{children:"The Source has following dependents:"}),ae(pq,{text:"Delete anyway",sourceId:n,pgEnv:i,baseUrl:l})]}),ae("div",{className:"bg-red-50",children:ae(Dze,{dependents:e,srcMeta:t,viewMeta:r})})]}),Lze=(e,t,r)=>Ft("div",{className:"pb-4 flex justify-between",children:[ae("label",{children:"No dependents found."}),ae(pq,{text:"Confirm Delete",sourceId:e,pgEnv:t,baseUrl:r})]});function $ze({baseUrl:e}){const{falcor:t,falcorCache:r}=Gl(),{sourceId:n}=rc(),i=Ps(Ks);Fe.useEffect(()=>{Rze({falcor:t,pgEnv:i,sourceId:n})},[n,i,t]);const l=Qt(r,["dama",i,"sources","byId",n,"dependents","value"],[]),a=Qt(r,["dama",i,"sources","byId",n,"attributes","name"],""),s=Qt(r,["dama",i,"sources","byId"],{}),d=Qt(r,["dama",i,"views","byId"],{});return ae("div",{children:ae(pC,{baseUrl:e,children:Ft("div",{className:"w-full p-4 bg-white my-1 block border shadow",children:[Ft("div",{className:"pb-4 font-bold",children:["Delete ",ae("i",{children:a})]}),l.length?zze(l,s,d,n,i,e):Lze(n,i,e)]})})})}const Nze=()=>{const{falcor:e,falcorCache:t}=Gl(),r=SU(),n=Ps(Ks),i=Ee.useMemo(()=>Qt(t,["dama-info","pgEnvs","value"],[]),[t]);return Fe.useEffect(()=>{(async()=>e.get(c5e()))()},[e]),i?Ft("div",{className:"max-w-6xl mx-auto",children:[ae("div",{className:"p-4 font-medium",children:" DataManager Settings "}),ae("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-0",children:ae("dl",{className:"sm:divide-y sm:divide-gray-200",children:ae("div",{className:"flex justify-between group",children:Ft("div",{className:"flex-1 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[ae("dt",{className:"text-sm font-medium text-gray-500 py-5",children:"Postgres Database"}),ae("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:ae("div",{className:"pt-3 pr-8",children:Ft("select",{className:"w-full bg-white p-3 flex-1 shadow bg-grey-50 focus:bg-blue-100  border-gray-300",value:n,onChange:l=>{r(XV(l.target.value))},children:[ae("option",{value:"",disabled:!0,children:"Select your Postgres Environment"}),i.map(l=>ae("option",{value:l,className:"p-2",children:l},l))]})})})]})})})})]}):ae("div",{children:ae("span",{children:"Awaiting available Postgres Environments List"})})},XT=qR(KV);class Bze{costructor(){this._refreshCache()}_refreshCache(){this.cache=XT.getCache()}async get(t){await XT.get(t),await new Promise(r=>{setTimeout(()=>{this._refreshCache(),r()})})}async getValue(t,r=null){await this.get(t);let n=Qt(this.cache,t,void 0);return n&&n.$type==="atom"&&(n=n.value),n===void 0&&(n=r),n}async invalidate(t){XT.invalidate(t),await new Promise(r=>{setTimeout(()=>{this._refreshCache(),r()})})}}const BN=new Bze;var yS={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */yS.exports;(function(e,t){(function(){var r,n="4.17.21",i=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",s="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",v=500,S="__lodash_placeholder__",A=1,P=2,L=4,F=1,K=2,re=1,G=2,H=4,B=8,$=16,N=32,z=64,X=128,te=256,pe=512,ke=30,Pe="...",ge=800,Ie=16,Ne=1,lt=2,it=3,Rt=1/0,St=9007199254740991,Zt=17976931348623157e292,Kt=0/0,Ge=4294967295,Ye=Ge-1,Dr=Ge>>>1,wr=[["ary",X],["bind",re],["bindKey",G],["curry",B],["curryRight",$],["flip",pe],["partial",N],["partialRight",z],["rearg",te]],tr="[object Arguments]",br="[object Array]",Bt="[object AsyncFunction]",hr="[object Boolean]",cr="[object Date]",Mn="[object DOMException]",Hn="[object Error]",Qn="[object Function]",an="[object GeneratorFunction]",ki="[object Map]",Xn="[object Number]",Li="[object Null]",Pi="[object Object]",Yi="[object Promise]",gi="[object Proxy]",ea="[object RegExp]",ya="[object Set]",La="[object String]",Aa="[object Symbol]",$a="[object Undefined]",ka="[object WeakMap]",Ka="[object WeakSet]",dr="[object ArrayBuffer]",Mt="[object DataView]",yr="[object Float32Array]",Xt="[object Float64Array]",Yt="[object Int8Array]",lr="[object Int16Array]",Qr="[object Int32Array]",Xr="[object Uint8Array]",En="[object Uint8ClampedArray]",Rn="[object Uint16Array]",rr="[object Uint32Array]",Lr=/\b__p \+= '';/g,ur=/\b(__p \+=) '' \+/g,hn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ti=/&(?:amp|lt|gt|quot|#39);/g,Hr=/[&<>"']/g,fi=RegExp(ti.source),Ci=RegExp(Hr.source),zi=/<%-([\s\S]+?)%>/g,Ae=/<%([\s\S]+?)%>/g,$e=/<%=([\s\S]+?)%>/g,je=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,et=/^\w*$/,ht=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ct=/[\\^$.*+?()[\]{}|]/g,Dt=RegExp(Ct.source),Et=/^\s+/,Je=/\s/,ye=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,fe=/\{\n\/\* \[wrapped with (.+)\] \*/,we=/,? & /,Ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Le=/[()=,{}\[\]\/\s]/,nt=/\\(\\)?/g,dt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ct=/\w*$/,Xe=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,ar=/^0o[0-7]+$/i,Vt=/^(?:0|[1-9]\d*)$/,fr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qr=/($^)/,Ar=/['\n\r\u2028\u2029\\]/g,ln="\\ud800-\\udfff",gn="\\u0300-\\u036f",An="\\ufe20-\\ufe2f",wn="\\u20d0-\\u20ff",Dn=gn+An+wn,$n="\\u2700-\\u27bf",kn="a-z\\xdf-\\xf6\\xf8-\\xff",Qa="\\xac\\xb1\\xd7\\xf7",Fn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",oo="\\u2000-\\u206f",Tl=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ya="A-Z\\xc0-\\xd6\\xd8-\\xde",Oi="\\ufe0e\\ufe0f",ku=Qa+Fn+oo+Tl,Ys="['’]",co="["+ln+"]",Bs="["+ku+"]",$o="["+Dn+"]",Pa="\\d+",Ro="["+$n+"]",mo="["+kn+"]",Ko="[^"+ln+ku+Pa+$n+kn+Ya+"]",Fs="\\ud83c[\\udffb-\\udfff]",jf="(?:"+$o+"|"+Fs+")",bo="[^"+ln+"]",Al="(?:\\ud83c[\\udde6-\\uddff]){2}",No="[\\ud800-\\udbff][\\udc00-\\udfff]",Ia="["+Ya+"]",Ga="\\u200d",Us="(?:"+mo+"|"+Ko+")",Iu="(?:"+Ia+"|"+Ko+")",Mu="(?:"+Ys+"(?:d|ll|m|re|s|t|ve))?",Ou="(?:"+Ys+"(?:D|LL|M|RE|S|T|VE))?",Ma=jf+"?",Ru="["+Oi+"]?",Pc="(?:"+Ga+"(?:"+[bo,Al,No].join("|")+")"+Ru+Ma+")*",Vf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",nc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Hl=Ru+Ma+Pc,ic="(?:"+[Ro,Al,No].join("|")+")"+Hl,cu="(?:"+[bo+$o+"?",$o,Al,No,co].join("|")+")",ef=RegExp(Ys,"g"),kl=RegExp($o,"g"),Il=RegExp(Fs+"(?="+Fs+")|"+cu+Hl,"g"),xo=RegExp([Ia+"?"+mo+"+"+Mu+"(?="+[Bs,Ia,"$"].join("|")+")",Iu+"+"+Ou+"(?="+[Bs,Ia+Us,"$"].join("|")+")",Ia+"?"+Us+"+"+Mu,Ia+"+"+Ou,nc,Vf,Pa,ic].join("|"),"g"),ol=RegExp("["+Ga+ln+Dn+Oi+"]"),$i=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ac=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],sl=-1,ra={};ra[yr]=ra[Xt]=ra[Yt]=ra[lr]=ra[Qr]=ra[Xr]=ra[En]=ra[Rn]=ra[rr]=!0,ra[tr]=ra[br]=ra[dr]=ra[hr]=ra[Mt]=ra[cr]=ra[Hn]=ra[Qn]=ra[ki]=ra[Xn]=ra[Pi]=ra[ea]=ra[ya]=ra[La]=ra[ka]=!1;var Ji={};Ji[tr]=Ji[br]=Ji[dr]=Ji[Mt]=Ji[hr]=Ji[cr]=Ji[yr]=Ji[Xt]=Ji[Yt]=Ji[lr]=Ji[Qr]=Ji[ki]=Ji[Xn]=Ji[Pi]=Ji[ea]=Ji[ya]=Ji[La]=Ji[Aa]=Ji[Xr]=Ji[En]=Ji[Rn]=Ji[rr]=!0,Ji[Hn]=Ji[Qn]=Ji[ka]=!1;var js={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},aa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Du={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},oc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Tc=parseFloat,tf=parseInt,Wl=typeof{}=="object"&&{}&&{}.Object===Object&&{},oe=typeof self=="object"&&self&&self.Object===Object&&self,ze=Wl||oe||Function("return this")(),We=t&&!t.nodeType&&t,tt=We&&!0&&e&&!e.nodeType&&e,Ot=tt&&tt.exports===We,_t=Ot&&Wl.process,Tt=function(){try{var jt=tt&&tt.require&&tt.require("util").types;return jt||_t&&_t.binding&&_t.binding("util")}catch{}}(),xr=Tt&&Tt.isArrayBuffer,Er=Tt&&Tt.isDate,_r=Tt&&Tt.isMap,on=Tt&&Tt.isRegExp,Gr=Tt&&Tt.isSet,Kr=Tt&&Tt.isTypedArray;function Cr(jt,kr,pr){switch(pr.length){case 0:return jt.call(kr);case 1:return jt.call(kr,pr[0]);case 2:return jt.call(kr,pr[0],pr[1]);case 3:return jt.call(kr,pr[0],pr[1],pr[2])}return jt.apply(kr,pr)}function Wr(jt,kr,pr,Jr){for(var hi=-1,Wi=jt==null?0:jt.length;++hi<Wi;){var ja=jt[hi];kr(Jr,ja,pr(ja),jt)}return Jr}function Yr(jt,kr){for(var pr=-1,Jr=jt==null?0:jt.length;++pr<Jr&&kr(jt[pr],pr,jt)!==!1;);return jt}function bn(jt,kr){for(var pr=jt==null?0:jt.length;pr--&&kr(jt[pr],pr,jt)!==!1;);return jt}function On(jt,kr){for(var pr=-1,Jr=jt==null?0:jt.length;++pr<Jr;)if(!kr(jt[pr],pr,jt))return!1;return!0}function ei(jt,kr){for(var pr=-1,Jr=jt==null?0:jt.length,hi=0,Wi=[];++pr<Jr;){var ja=jt[pr];kr(ja,pr,jt)&&(Wi[hi++]=ja)}return Wi}function jn(jt,kr){var pr=jt==null?0:jt.length;return!!pr&&Hi(jt,kr,0)>-1}function Or(jt,kr,pr){for(var Jr=-1,hi=jt==null?0:jt.length;++Jr<hi;)if(pr(kr,jt[Jr]))return!0;return!1}function yn(jt,kr){for(var pr=-1,Jr=jt==null?0:jt.length,hi=Array(Jr);++pr<Jr;)hi[pr]=kr(jt[pr],pr,jt);return hi}function Cn(jt,kr){for(var pr=-1,Jr=kr.length,hi=jt.length;++pr<Jr;)jt[hi+pr]=kr[pr];return jt}function ri(jt,kr,pr,Jr){var hi=-1,Wi=jt==null?0:jt.length;for(Jr&&Wi&&(pr=jt[++hi]);++hi<Wi;)pr=kr(pr,jt[hi],hi,jt);return pr}function Gn(jt,kr,pr,Jr){var hi=jt==null?0:jt.length;for(Jr&&hi&&(pr=jt[--hi]);hi--;)pr=kr(pr,jt[hi],hi,jt);return pr}function ni(jt,kr){for(var pr=-1,Jr=jt==null?0:jt.length;++pr<Jr;)if(kr(jt[pr],pr,jt))return!0;return!1}var sn=wo("length");function Vn(jt){return jt.split("")}function vn(jt){return jt.match(Ce)||[]}function Un(jt,kr,pr){var Jr;return pr(jt,function(hi,Wi,ja){if(kr(hi,Wi,ja))return Jr=Wi,!1}),Jr}function Ti(jt,kr,pr,Jr){for(var hi=jt.length,Wi=pr+(Jr?1:-1);Jr?Wi--:++Wi<hi;)if(kr(jt[Wi],Wi,jt))return Wi;return-1}function Hi(jt,kr,pr){return kr===kr?Bu(jt,kr,pr):Ti(jt,Fi,pr)}function Yn(jt,kr,pr,Jr){for(var hi=pr-1,Wi=jt.length;++hi<Wi;)if(Jr(jt[hi],kr))return hi;return-1}function Fi(jt){return jt!==jt}function xa(jt,kr){var pr=jt==null?0:jt.length;return pr?eo(jt,kr)/pr:Kt}function wo(jt){return function(kr){return kr==null?r:kr[jt]}}function Wn(jt){return function(kr){return jt==null?r:jt[kr]}}function sa(jt,kr,pr,Jr,hi){return hi(jt,function(Wi,ja,ii){pr=Jr?(Jr=!1,Wi):kr(pr,Wi,ja,ii)}),pr}function Na(jt,kr){var pr=jt.length;for(jt.sort(kr);pr--;)jt[pr]=jt[pr].value;return jt}function eo(jt,kr){for(var pr,Jr=-1,hi=jt.length;++Jr<hi;){var Wi=kr(jt[Jr]);Wi!==r&&(pr=pr===r?Wi:pr+Wi)}return pr}function wi(jt,kr){for(var pr=-1,Jr=Array(jt);++pr<jt;)Jr[pr]=kr(pr);return Jr}function Vs(jt,kr){return yn(kr,function(pr){return[pr,jt[pr]]})}function ps(jt){return jt&&jt.slice(0,fu(jt)+1).replace(Et,"")}function so(jt){return function(kr){return jt(kr)}}function rs(jt,kr){return yn(kr,function(pr){return jt[pr]})}function zu(jt,kr){return jt.has(kr)}function Js(jt,kr){for(var pr=-1,Jr=jt.length;++pr<Jr&&Hi(kr,jt[pr],0)>-1;);return pr}function Ac(jt,kr){for(var pr=jt.length;pr--&&Hi(kr,jt[pr],0)>-1;);return pr}function Ts(jt,kr){for(var pr=jt.length,Jr=0;pr--;)jt[pr]===kr&&++Jr;return Jr}var Qs=Wn(js),qs=Wn(aa);function Lu(jt){return"\\"+oc[jt]}function ll(jt,kr){return jt==null?r:jt[kr]}function Ml(jt){return ol.test(jt)}function $u(jt){return $i.test(jt)}function Ua(jt){for(var kr,pr=[];!(kr=jt.next()).done;)pr.push(kr.value);return pr}function Zl(jt){var kr=-1,pr=Array(jt.size);return jt.forEach(function(Jr,hi){pr[++kr]=[hi,Jr]}),pr}function Nu(jt,kr){return function(pr){return jt(kr(pr))}}function Bo(jt,kr){for(var pr=-1,Jr=jt.length,hi=0,Wi=[];++pr<Jr;){var ja=jt[pr];(ja===kr||ja===S)&&(jt[pr]=S,Wi[hi++]=pr)}return Wi}function la(jt){var kr=-1,pr=Array(jt.size);return jt.forEach(function(Jr){pr[++kr]=Jr}),pr}function ul(jt){var kr=-1,pr=Array(jt.size);return jt.forEach(function(Jr){pr[++kr]=[Jr,Jr]}),pr}function Bu(jt,kr,pr){for(var Jr=pr-1,hi=jt.length;++Jr<hi;)if(jt[Jr]===kr)return Jr;return-1}function sc(jt,kr,pr){for(var Jr=pr+1;Jr--;)if(jt[Jr]===kr)return Jr;return Jr}function As(jt){return Ml(jt)?Dh(jt):sn(jt)}function ds(jt){return Ml(jt)?kc(jt):Vn(jt)}function fu(jt){for(var kr=jt.length;kr--&&Je.test(jt.charAt(kr)););return kr}var Fu=Wn(Du);function Dh(jt){for(var kr=Il.lastIndex=0;Il.test(jt);)++kr;return kr}function kc(jt){return jt.match(Il)||[]}function Uu(jt){return jt.match(xo)||[]}var ms=function jt(kr){kr=kr==null?ze:cl.defaults(ze.Object(),kr,cl.pick(ze,ac));var pr=kr.Array,Jr=kr.Date,hi=kr.Error,Wi=kr.Function,ja=kr.Math,ii=kr.Object,Zi=kr.RegExp,Xl=kr.String,to=kr.TypeError,el=pr.prototype,Pn=Wi.prototype,Ol=ii.prototype,Kl=kr["__core-js_shared__"],ks=Pn.toString,pa=Ol.hasOwnProperty,pn=0,So=function(){var w=/[^.]+$/.exec(Kl&&Kl.keys&&Kl.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),gs=Ol.toString,qf=ks.call(ii),Eo=ze._,Is=Zi("^"+ks.call(pa).replace(Ct,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fn=Ot?kr.Buffer:r,fl=kr.Symbol,Yl=kr.Uint8Array,Rl=fn?fn.allocUnsafe:r,Fo=Nu(ii.getPrototypeOf,ii),ju=ii.create,Yo=Ol.propertyIsEnumerable,en=el.splice,hl=fl?fl.isConcatSpreadable:r,hu=fl?fl.iterator:r,fo=fl?fl.toStringTag:r,Do=function(){try{var w=cf(ii,"defineProperty");return w({},"",{}),w}catch{}}(),Vu=kr.clearTimeout!==ze.clearTimeout&&kr.clearTimeout,zh=Jr&&Jr.now!==ze.Date.now&&Jr.now,Gs=kr.setTimeout!==ze.setTimeout&&kr.setTimeout,Ui=ja.ceil,Ms=ja.floor,pu=ii.getOwnPropertySymbols,Gf=fn?fn.isBuffer:r,rf=kr.isFinite,pl=el.join,Cp=Nu(ii.keys,ii),yi=ja.max,vi=ja.min,Tn=Jr.now,zn=kr.parseInt,Uo=ja.random,du=el.reverse,jo=cf(kr,"DataView"),Va=cf(kr,"Map"),go=cf(kr,"Promise"),Co=cf(kr,"Set"),un=cf(kr,"WeakMap"),Nn=cf(ii,"create"),na=un&&new un,ua={},Dl=hf(jo),zo=hf(Va),O=hf(go),c=hf(Co),_=hf(un),k=fl?fl.prototype:r,R=k?k.valueOf:r,W=k?k.toString:r;function q(w){if(za(w)&&!Kn(w)&&!(w instanceof Te)){if(w instanceof be)return w;if(pa.call(w,"__wrapped__"))return Lp(w)}return new be(w)}var ue=function(){function w(){}return function(M){if(!Ki(M))return{};if(ju)return ju(M);w.prototype=M;var Q=new w;return w.prototype=r,Q}}();function he(){}function be(w,M){this.__wrapped__=w,this.__actions__=[],this.__chain__=!!M,this.__index__=0,this.__values__=r}q.templateSettings={escape:zi,evaluate:Ae,interpolate:$e,variable:"",imports:{_:q}},q.prototype=he.prototype,q.prototype.constructor=q,be.prototype=ue(he.prototype),be.prototype.constructor=be;function Te(w){this.__wrapped__=w,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ge,this.__views__=[]}function Ue(){var w=new Te(this.__wrapped__);return w.__actions__=$l(this.__actions__),w.__dir__=this.__dir__,w.__filtered__=this.__filtered__,w.__iteratees__=$l(this.__iteratees__),w.__takeCount__=this.__takeCount__,w.__views__=$l(this.__views__),w}function Ke(){if(this.__filtered__){var w=new Te(this);w.__dir__=-1,w.__filtered__=!0}else w=this.clone(),w.__dir__*=-1;return w}function yt(){var w=this.__wrapped__.value(),M=this.__dir__,Q=Kn(w),de=M<0,qe=Q?w.length:0,at=Q0(0,qe,this.__views__),It=at.start,Ut=at.end,ir=Ut-It,Fr=de?Ut:It-1,jr=this.__iteratees__,rn=jr.length,qn=0,Ei=vi(ir,this.__takeCount__);if(!Q||!de&&qe==ir&&Ei==ir)return pd(w,this.__actions__);var qi=[];e:for(;ir--&&qn<Ei;){Fr+=M;for(var Ea=-1,Gi=w[Fr];++Ea<rn;){var Fa=jr[Ea],Wa=Fa.iteratee,bf=Fa.type,mc=Wa(Gi);if(bf==lt)Gi=mc;else if(!mc){if(bf==Ne)continue e;break e}}qi[qn++]=Gi}return qi}Te.prototype=ue(he.prototype),Te.prototype.constructor=Te;function ut(w){var M=-1,Q=w==null?0:w.length;for(this.clear();++M<Q;){var de=w[M];this.set(de[0],de[1])}}function gt(){this.__data__=Nn?Nn(null):{},this.size=0}function zt(w){var M=this.has(w)&&delete this.__data__[w];return this.size-=M?1:0,M}function Gt(w){var M=this.__data__;if(Nn){var Q=M[w];return Q===d?r:Q}return pa.call(M,w)?M[w]:r}function Jt(w){var M=this.__data__;return Nn?M[w]!==r:pa.call(M,w)}function bt(w,M){var Q=this.__data__;return this.size+=this.has(w)?0:1,Q[w]=Nn&&M===r?d:M,this}ut.prototype.clear=gt,ut.prototype.delete=zt,ut.prototype.get=Gt,ut.prototype.has=Jt,ut.prototype.set=bt;function nr(w){var M=-1,Q=w==null?0:w.length;for(this.clear();++M<Q;){var de=w[M];this.set(de[0],de[1])}}function er(){this.__data__=[],this.size=0}function mr(w){var M=this.__data__,Q=qt(M,w);if(Q<0)return!1;var de=M.length-1;return Q==de?M.pop():en.call(M,Q,1),--this.size,!0}function Sr(w){var M=this.__data__,Q=qt(M,w);return Q<0?r:M[Q][1]}function $r(w){return qt(this.__data__,w)>-1}function gr(w,M){var Q=this.__data__,de=qt(Q,w);return de<0?(++this.size,Q.push([w,M])):Q[de][1]=M,this}nr.prototype.clear=er,nr.prototype.delete=mr,nr.prototype.get=Sr,nr.prototype.has=$r,nr.prototype.set=gr;function cn(w){var M=-1,Q=w==null?0:w.length;for(this.clear();++M<Q;){var de=w[M];this.set(de[0],de[1])}}function g(){this.size=0,this.__data__={hash:new ut,map:new(Va||nr),string:new ut}}function b(w){var M=uf(this,w).delete(w);return this.size-=M?1:0,M}function y(w){return uf(this,w).get(w)}function C(w){return uf(this,w).has(w)}function U(w,M){var Q=uf(this,w),de=Q.size;return Q.set(w,M),this.size+=Q.size==de?0:1,this}cn.prototype.clear=g,cn.prototype.delete=b,cn.prototype.get=y,cn.prototype.has=C,cn.prototype.set=U;function Y(w){var M=-1,Q=w==null?0:w.length;for(this.__data__=new cn;++M<Q;)this.add(w[M])}function ee(w){return this.__data__.set(w,d),this}function se(w){return this.__data__.has(w)}Y.prototype.add=Y.prototype.push=ee,Y.prototype.has=se;function ve(w){var M=this.__data__=new nr(w);this.size=M.size}function Oe(){this.__data__=new nr,this.size=0}function He(w){var M=this.__data__,Q=M.delete(w);return this.size=M.size,Q}function Qe(w){return this.__data__.get(w)}function Ze(w){return this.__data__.has(w)}function mt(w,M){var Q=this.__data__;if(Q instanceof nr){var de=Q.__data__;if(!Va||de.length<i-1)return de.push([w,M]),this.size=++Q.size,this;Q=this.__data__=new cn(de)}return Q.set(w,M),this.size=Q.size,this}ve.prototype.clear=Oe,ve.prototype.delete=He,ve.prototype.get=Qe,ve.prototype.has=Ze,ve.prototype.set=mt;function ft(w,M){var Q=Kn(w),de=!Q&&li(w),qe=!Q&&!de&&ma(w),at=!Q&&!de&&!qe&&dc(w),It=Q||de||qe||at,Ut=It?wi(w.length,Xl):[],ir=Ut.length;for(var Fr in w)(M||pa.call(w,Fr))&&!(It&&(Fr=="length"||qe&&(Fr=="offset"||Fr=="parent")||at&&(Fr=="buffer"||Fr=="byteLength"||Fr=="byteOffset")||_u(Fr,ir)))&&Ut.push(Fr);return Ut}function xt(w){var M=w.length;return M?w[vm(0,M-1)]:r}function st(w,M){return Sd($l(w),tn(M,0,w.length))}function wt(w){return Sd($l(w))}function Lt(w,M,Q){(Q!==r&&!Si(w[M],Q)||Q===r&&!(M in w))&&Pr(w,M,Q)}function Nt(w,M,Q){var de=w[M];(!(pa.call(w,M)&&Si(de,Q))||Q===r&&!(M in w))&&Pr(w,M,Q)}function qt(w,M){for(var Q=w.length;Q--;)if(Si(w[Q][0],M))return Q;return-1}function Ht(w,M,Q,de){return Zn(w,function(qe,at,It){M(de,qe,Q(qe),It)}),de}function or(w,M){return w&&tu(M,wl(M),w)}function vr(w,M){return w&&tu(M,Su(M),w)}function Pr(w,M,Q){M=="__proto__"&&Do?Do(w,M,{configurable:!0,enumerable:!0,value:Q,writable:!0}):w[M]=Q}function Mr(w,M){for(var Q=-1,de=M.length,qe=pr(de),at=w==null;++Q<de;)qe[Q]=at?r:Zv(w,M[Q]);return qe}function tn(w,M,Q){return w===w&&(Q!==r&&(w=w<=Q?w:Q),M!==r&&(w=w>=M?w:M)),w}function Sn(w,M,Q,de,qe,at){var It,Ut=M&A,ir=M&P,Fr=M&L;if(Q&&(It=qe?Q(w,de,qe,at):Q(w)),It!==r)return It;if(!Ki(w))return w;var jr=Kn(w);if(jr){if(It=eb(w),!Ut)return $l(w,It)}else{var rn=ml(w),qn=rn==Qn||rn==an;if(ma(w))return md(w,Ut);if(rn==Pi||rn==tr||qn&&!qe){if(It=ir||qn?{}:Op(w),!Ut)return ir?xm(w,vr(It,w)):K0(w,or(It,w))}else{if(!Ji[rn])return qe?w:{};It=Rs(w,rn,Ut)}}at||(at=new ve);var Ei=at.get(w);if(Ei)return Ei;at.set(w,It),Ld(w)?w.forEach(function(Gi){It.add(Sn(Gi,M,Q,Gi,w,at))}):pc(w)&&w.forEach(function(Gi,Fa){It.set(Fa,Sn(Gi,M,Q,Fa,w,at))});var qi=Fr?ir?jg:Cm:ir?Su:wl,Ea=jr?r:qi(w);return Yr(Ea||w,function(Gi,Fa){Ea&&(Fa=Gi,Gi=w[Fa]),Nt(It,Fa,Sn(Gi,M,Q,Fa,w,at))}),It}function Ln(w){var M=wl(w);return function(Q){return Bn(Q,w,M)}}function Bn(w,M,Q){var de=Q.length;if(w==null)return!de;for(w=ii(w);de--;){var qe=Q[de],at=M[qe],It=w[qe];if(It===r&&!(qe in w)||!at(It))return!1}return!0}function ji(w,M,Q){if(typeof w!="function")throw new to(a);return hc(function(){w.apply(r,Q)},M)}function nn(w,M,Q,de){var qe=-1,at=jn,It=!0,Ut=w.length,ir=[],Fr=M.length;if(!Ut)return ir;Q&&(M=yn(M,so(Q))),de?(at=Or,It=!1):M.length>=i&&(at=zu,It=!1,M=new Y(M));e:for(;++qe<Ut;){var jr=w[qe],rn=Q==null?jr:Q(jr);if(jr=de||jr!==0?jr:0,It&&rn===rn){for(var qn=Fr;qn--;)if(M[qn]===rn)continue e;ir.push(jr)}else at(M,rn,de)||ir.push(jr)}return ir}var Zn=wm(va),mi=wm(Ha,!0);function pi(w,M){var Q=!0;return Zn(w,function(de,qe,at){return Q=!!M(de,qe,at),Q}),Q}function ci(w,M,Q){for(var de=-1,qe=w.length;++de<qe;){var at=w[de],It=M(at);if(It!=null&&(Ut===r?It===It&&!xl(It):Q(It,Ut)))var Ut=It,ir=at}return ir}function _i(w,M,Q,de){var qe=w.length;for(Q=Vi(Q),Q<0&&(Q=-Q>qe?0:qe+Q),de=de===r||de>qe?qe:Vi(de),de<0&&(de+=qe),de=Q>de?0:fh(de);Q<de;)w[Q++]=M;return w}function ai(w,M){var Q=[];return Zn(w,function(de,qe,at){M(de,qe,at)&&Q.push(de)}),Q}function xn(w,M,Q,de,qe){var at=-1,It=w.length;for(Q||(Q=Sv),qe||(qe=[]);++at<It;){var Ut=w[at];M>0&&Q(Ut)?M>1?xn(Ut,M-1,Q,de,qe):Cn(qe,Ut):de||(qe[qe.length]=Ut)}return qe}var ca=vd(),Oa=vd(!0);function va(w,M){return w&&ca(w,M,wl)}function Ha(w,M){return w&&Oa(w,M,wl)}function yo(w,M){return ei(M,function(Q){return as(w[Q])})}function _a(w,M){M=Ql(M,w);for(var Q=0,de=M.length;w!=null&&Q<de;)w=w[nu(M[Q++])];return Q&&Q==de?w:r}function ys(w,M,Q){var de=M(w);return Kn(w)?de:Cn(de,Q(w))}function ho(w){return w==null?w===r?$a:Li:fo&&fo in ii(w)?Dc(w):Tm(w)}function fa(w,M){return w>M}function vs(w,M){return w!=null&&pa.call(w,M)}function mu(w,M){return w!=null&&M in ii(w)}function ns(w,M,Q){return w>=vi(M,Q)&&w<yi(M,Q)}function gu(w,M,Q){for(var de=Q?Or:jn,qe=w[0].length,at=w.length,It=at,Ut=pr(at),ir=1/0,Fr=[];It--;){var jr=w[It];It&&M&&(jr=yn(jr,so(M))),ir=vi(jr.length,ir),Ut[It]=!Q&&(M||qe>=120&&jr.length>=120)?new Y(It&&jr):r}jr=w[0];var rn=-1,qn=Ut[0];e:for(;++rn<qe&&Fr.length<ir;){var Ei=jr[rn],qi=M?M(Ei):Ei;if(Ei=Q||Ei!==0?Ei:0,!(qn?zu(qn,qi):de(Fr,qi,Q))){for(It=at;--It;){var Ea=Ut[It];if(!(Ea?zu(Ea,qi):de(w[It],qi,Q)))continue e}qn&&qn.push(qi),Fr.push(Ei)}}return Fr}function yu(w,M,Q,de){return va(w,function(qe,at,It){M(de,Q(qe),at,It)}),de}function Jl(w,M,Q){M=Ql(M,w),w=gl(w,M);var de=w==null?w:w[nu(xu(M))];return de==null?r:Cr(de,w,Q)}function lc(w){return za(w)&&ho(w)==tr}function Lh(w){return za(w)&&ho(w)==dr}function nf(w){return za(w)&&ho(w)==cr}function dl(w,M,Q,de,qe){return w===M?!0:w==null||M==null||!za(w)&&!za(M)?w!==w&&M!==M:Ic(w,M,Q,de,dl,qe)}function Ic(w,M,Q,de,qe,at){var It=Kn(w),Ut=Kn(M),ir=It?br:ml(w),Fr=Ut?br:ml(M);ir=ir==tr?Pi:ir,Fr=Fr==tr?Pi:Fr;var jr=ir==Pi,rn=Fr==Pi,qn=ir==Fr;if(qn&&ma(w)){if(!ma(M))return!1;It=!0,jr=!1}if(qn&&!jr)return at||(at=new ve),It||dc(w)?Ug(w,M,Q,de,qe,at):bd(w,M,ir,Q,de,qe,at);if(!(Q&F)){var Ei=jr&&pa.call(w,"__wrapped__"),qi=rn&&pa.call(M,"__wrapped__");if(Ei||qi){var Ea=Ei?w.value():w,Gi=qi?M.value():M;return at||(at=new ve),qe(Ea,Gi,Q,de,at)}}return qn?(at||(at=new ve),bv(w,M,Q,de,qe,at)):!1}function Vo(w){return za(w)&&ml(w)==ki}function zl(w,M,Q,de){var qe=Q.length,at=qe,It=!de;if(w==null)return!at;for(w=ii(w);qe--;){var Ut=Q[qe];if(It&&Ut[2]?Ut[1]!==w[Ut[0]]:!(Ut[0]in w))return!1}for(;++qe<at;){Ut=Q[qe];var ir=Ut[0],Fr=w[ir],jr=Ut[1];if(It&&Ut[2]){if(Fr===r&&!(ir in w))return!1}else{var rn=new ve;if(de)var qn=de(Fr,jr,ir,w,M,rn);if(!(qn===r?dl(jr,Fr,F|K,de,rn):qn))return!1}}return!0}function Ll(w){if(!Ki(w)||Ev(w))return!1;var M=as(w)?Is:vt;return M.test(hf(w))}function Mc(w){return za(w)&&ho(w)==ea}function Ja(w){return za(w)&&ml(w)==ya}function vo(w){return za(w)&&Ds(w.length)&&!!ra[ho(w)]}function qo(w){return typeof w=="function"?w:w==null?Nc:typeof w=="object"?Kn(w)?_s(w[0],w[1]):Jo(w):y3(w)}function qu(w){if(!bu(w))return Cp(w);var M=[];for(var Q in ii(w))pa.call(w,Q)&&Q!="constructor"&&M.push(Q);return M}function af(w){if(!Ki(w))return Ws(w);var M=bu(w),Q=[];for(var de in w)de=="constructor"&&(M||!pa.call(w,de))||Q.push(de);return Q}function hd(w,M){return w<M}function $h(w,M){var Q=-1,de=ba(w)?pr(w.length):[];return Zn(w,function(qe,at,It){de[++Q]=M(qe,at,It)}),de}function Jo(w){var M=Ba(w);return M.length==1&&M[0][2]?Rp(M[0][0],M[0][1]):function(Q){return Q===w||zl(Q,w,M)}}function _s(w,M){return fc(w)&&Gh(M)?Rp(nu(w),M):function(Q){var de=Zv(Q,w);return de===r&&de===M?au(Q,w):dl(M,de,F|K)}}function uc(w,M,Q,de,qe){w!==M&&ca(M,function(at,It){if(qe||(qe=new ve),Ki(at))of(w,M,It,Q,uc,de,qe);else{var Ut=de?de(Am(w,It),at,It+"",w,M,qe):r;Ut===r&&(Ut=at),Lt(w,It,Ut)}},Su)}function of(w,M,Q,de,qe,at,It){var Ut=Am(w,Q),ir=Am(M,Q),Fr=It.get(ir);if(Fr){Lt(w,Q,Fr);return}var jr=at?at(Ut,ir,Q+"",w,M,It):r,rn=jr===r;if(rn){var qn=Kn(ir),Ei=!qn&&ma(ir),qi=!qn&&!Ei&&dc(ir);jr=ir,qn||Ei||qi?Kn(Ut)?jr=Ut:di(Ut)?jr=$l(Ut):Ei?(rn=!1,jr=md(ir,!0)):qi?(rn=!1,jr=zg(ir,!0)):jr=[]:$c(ir)||li(ir)?(jr=Ut,li(Ut)?jr=Wu(Ut):(!Ki(Ut)||as(Ut))&&(jr=Op(ir))):rn=!1}rn&&(It.set(ir,jr),qe(jr,ir,de,at,It),It.delete(ir)),Lt(w,Q,jr)}function ym(w,M){var Q=w.length;if(Q)return M+=M<0?Q:0,_u(M,Q)?w[M]:r}function Hf(w,M,Q){M.length?M=yn(M,function(at){return Kn(at)?function(It){return _a(It,at.length===1?at[0]:at)}:at}):M=[Nc];var de=-1;M=yn(M,so(Ai()));var qe=$h(w,function(at,It,Ut){var ir=yn(M,function(Fr){return Fr(at)});return{criteria:ir,index:++de,value:at}});return Na(qe,function(at,It){return yd(at,It,Q)})}function Nh(w,M){return Hs(w,M,function(Q,de){return au(w,de)})}function Hs(w,M,Q){for(var de=-1,qe=M.length,at={};++de<qe;){var It=M[de],Ut=_a(w,It);Q(Ut,It)&&Oc(at,Ql(It,w),Ut)}return at}function cv(w){return function(M){return _a(M,w)}}function Bh(w,M,Q,de){var qe=de?Yn:Hi,at=-1,It=M.length,Ut=w;for(w===M&&(M=$l(M)),Q&&(Ut=yn(w,so(Q)));++at<It;)for(var ir=0,Fr=M[at],jr=Q?Q(Fr):Fr;(ir=qe(Ut,jr,ir,de))>-1;)Ut!==w&&en.call(Ut,ir,1),en.call(w,ir,1);return w}function Og(w,M){for(var Q=w?M.length:0,de=Q-1;Q--;){var qe=M[Q];if(Q==de||qe!==at){var at=qe;_u(qe)?en.call(w,qe,1):Xf(w,qe)}}return w}function vm(w,M){return w+Ms(Uo()*(M-w+1))}function fv(w,M,Q,de){for(var qe=-1,at=yi(Ui((M-w)/(Q||1)),0),It=pr(at);at--;)It[de?at:++qe]=w,w+=Q;return It}function Rg(w,M){var Q="";if(!w||M<1||M>St)return Q;do M%2&&(Q+=w),M=Ms(M/2),M&&(w+=w);while(M);return Q}function ta(w,M){return zp(xd(w,M,Nc),w+"")}function hv(w){return xt(Fd(w))}function Pp(w,M){var Q=Fd(w);return Sd(Q,tn(M,0,Q.length))}function Oc(w,M,Q,de){if(!Ki(w))return w;M=Ql(M,w);for(var qe=-1,at=M.length,It=at-1,Ut=w;Ut!=null&&++qe<at;){var ir=nu(M[qe]),Fr=Q;if(ir==="__proto__"||ir==="constructor"||ir==="prototype")return w;if(qe!=It){var jr=Ut[ir];Fr=de?de(jr,ir,Ut):r,Fr===r&&(Fr=Ki(jr)?jr:_u(M[qe+1])?[]:{})}Nt(Ut,ir,Fr),Ut=Ut[ir]}return w}var is=na?function(w,M){return na.set(w,M),w}:Nc,Tp=Do?function(w,M){return Do(w,"toString",{configurable:!0,enumerable:!1,value:IC(M),writable:!0})}:Nc;function Z0(w){return Sd(Fd(w))}function Gu(w,M,Q){var de=-1,qe=w.length;M<0&&(M=-M>qe?0:qe+M),Q=Q>qe?qe:Q,Q<0&&(Q+=qe),qe=M>Q?0:Q-M>>>0,M>>>=0;for(var at=pr(qe);++de<qe;)at[de]=w[de+M];return at}function X0(w,M){var Q;return Zn(w,function(de,qe,at){return Q=M(de,qe,at),!Q}),!!Q}function Fh(w,M,Q){var de=0,qe=w==null?de:w.length;if(typeof M=="number"&&M===M&&qe<=Dr){for(;de<qe;){var at=de+qe>>>1,It=w[at];It!==null&&!xl(It)&&(Q?It<=M:It<M)?de=at+1:qe=at}return qe}return Ap(w,M,Nc,Q)}function Ap(w,M,Q,de){var qe=0,at=w==null?0:w.length;if(at===0)return 0;M=Q(M);for(var It=M!==M,Ut=M===null,ir=xl(M),Fr=M===r;qe<at;){var jr=Ms((qe+at)/2),rn=Q(w[jr]),qn=rn!==r,Ei=rn===null,qi=rn===rn,Ea=xl(rn);if(It)var Gi=de||qi;else Fr?Gi=qi&&(de||qn):Ut?Gi=qi&&qn&&(de||!Ei):ir?Gi=qi&&qn&&!Ei&&(de||!Ea):Ei||Ea?Gi=!1:Gi=de?rn<=M:rn<M;Gi?qe=jr+1:at=jr}return vi(at,Ye)}function Dg(w,M){for(var Q=-1,de=w.length,qe=0,at=[];++Q<de;){var It=w[Q],Ut=M?M(It):It;if(!Q||!Si(Ut,ir)){var ir=Ut;at[qe++]=It===0?0:It}}return at}function Wf(w){return typeof w=="number"?w:xl(w)?Kt:+w}function Os(w){if(typeof w=="string")return w;if(Kn(w))return yn(w,Os)+"";if(xl(w))return W?W.call(w):"";var M=w+"";return M=="0"&&1/w==-Rt?"-0":M}function Zf(w,M,Q){var de=-1,qe=jn,at=w.length,It=!0,Ut=[],ir=Ut;if(Q)It=!1,qe=Or;else if(at>=i){var Fr=M?null:_v(w);if(Fr)return la(Fr);It=!1,qe=zu,ir=new Y}else ir=M?[]:Ut;e:for(;++de<at;){var jr=w[de],rn=M?M(jr):jr;if(jr=Q||jr!==0?jr:0,It&&rn===rn){for(var qn=ir.length;qn--;)if(ir[qn]===rn)continue e;M&&ir.push(rn),Ut.push(jr)}else qe(ir,rn,Q)||(ir!==Ut&&ir.push(rn),Ut.push(jr))}return Ut}function Xf(w,M){return M=Ql(M,w),w=gl(w,M),w==null||delete w[nu(xu(M))]}function pv(w,M,Q,de){return Oc(w,M,Q(_a(w,M)),de)}function _o(w,M,Q,de){for(var qe=w.length,at=de?qe:-1;(de?at--:++at<qe)&&M(w[at],at,w););return Q?Gu(w,de?0:at,de?at+1:qe):Gu(w,de?at+1:0,de?qe:at)}function pd(w,M){var Q=w;return Q instanceof Te&&(Q=Q.value()),ri(M,function(de,qe){return qe.func.apply(qe.thisArg,Cn([de],qe.args))},Q)}function _m(w,M,Q){var de=w.length;if(de<2)return de?Zf(w[0]):[];for(var qe=-1,at=pr(de);++qe<de;)for(var It=w[qe],Ut=-1;++Ut<de;)Ut!=qe&&(at[qe]=nn(at[qe]||It,w[Ut],M,Q));return Zf(xn(at,1),M,Q)}function dd(w,M,Q){for(var de=-1,qe=w.length,at=M.length,It={};++de<qe;){var Ut=de<at?M[de]:r;Q(It,w[de],Ut)}return It}function Kf(w){return di(w)?w:[]}function Uh(w){return typeof w=="function"?w:Nc}function Ql(w,M){return Kn(w)?w:fc(w,M)?[w]:rh(ga(w))}var dv=ta;function Ra(w,M,Q){var de=w.length;return Q=Q===r?de:Q,!M&&Q>=de?w:Gu(w,M,Q)}var jh=Vu||function(w){return ze.clearTimeout(w)};function md(w,M){if(M)return w.slice();var Q=w.length,de=Rl?Rl(Q):new w.constructor(Q);return w.copy(de),de}function kp(w){var M=new w.constructor(w.byteLength);return new Yl(M).set(new Yl(w)),M}function Yf(w,M){var Q=M?kp(w.buffer):w.buffer;return new w.constructor(Q,w.byteOffset,w.byteLength)}function gd(w){var M=new w.constructor(w.source,ct.exec(w));return M.lastIndex=w.lastIndex,M}function bm(w){return R?ii(R.call(w)):{}}function zg(w,M){var Q=M?kp(w.buffer):w.buffer;return new w.constructor(Q,w.byteOffset,w.length)}function Jf(w,M){if(w!==M){var Q=w!==r,de=w===null,qe=w===w,at=xl(w),It=M!==r,Ut=M===null,ir=M===M,Fr=xl(M);if(!Ut&&!Fr&&!at&&w>M||at&&It&&ir&&!Ut&&!Fr||de&&It&&ir||!Q&&ir||!qe)return 1;if(!de&&!at&&!Fr&&w<M||Fr&&Q&&qe&&!de&&!at||Ut&&Q&&qe||!It&&qe||!ir)return-1}return 0}function yd(w,M,Q){for(var de=-1,qe=w.criteria,at=M.criteria,It=qe.length,Ut=Q.length;++de<It;){var ir=Jf(qe[de],at[de]);if(ir){if(de>=Ut)return ir;var Fr=Q[de];return ir*(Fr=="desc"?-1:1)}}return w.index-M.index}function eu(w,M,Q,de){for(var qe=-1,at=w.length,It=Q.length,Ut=-1,ir=M.length,Fr=yi(at-It,0),jr=pr(ir+Fr),rn=!de;++Ut<ir;)jr[Ut]=M[Ut];for(;++qe<It;)(rn||qe<at)&&(jr[Q[qe]]=w[qe]);for(;Fr--;)jr[Ut++]=w[qe++];return jr}function mv(w,M,Q,de){for(var qe=-1,at=w.length,It=-1,Ut=Q.length,ir=-1,Fr=M.length,jr=yi(at-Ut,0),rn=pr(jr+Fr),qn=!de;++qe<jr;)rn[qe]=w[qe];for(var Ei=qe;++ir<Fr;)rn[Ei+ir]=M[ir];for(;++It<Ut;)(qn||qe<at)&&(rn[Ei+Q[It]]=w[qe++]);return rn}function $l(w,M){var Q=-1,de=w.length;for(M||(M=pr(de));++Q<de;)M[Q]=w[Q];return M}function tu(w,M,Q,de){var qe=!Q;Q||(Q={});for(var at=-1,It=M.length;++at<It;){var Ut=M[at],ir=de?de(Q[Ut],w[Ut],Ut,Q,w):r;ir===r&&(ir=w[Ut]),qe?Pr(Q,Ut,ir):Nt(Q,Ut,ir)}return Q}function K0(w,M){return tu(w,ff(w),M)}function xm(w,M){return tu(w,qg(w),M)}function sf(w,M){return function(Q,de){var qe=Kn(Q)?Wr:Ht,at=M?M():{};return qe(Q,w,Ai(de,2),at)}}function Qf(w){return ta(function(M,Q){var de=-1,qe=Q.length,at=qe>1?Q[qe-1]:r,It=qe>2?Q[2]:r;for(at=w.length>3&&typeof at=="function"?(qe--,at):r,It&&Ri(Q[0],Q[1],It)&&(at=qe<3?r:at,qe=1),M=ii(M);++de<qe;){var Ut=Q[de];Ut&&w(M,Ut,de,at)}return M})}function wm(w,M){return function(Q,de){if(Q==null)return Q;if(!ba(Q))return w(Q,de);for(var qe=Q.length,at=M?qe:-1,It=ii(Q);(M?at--:++at<qe)&&de(It[at],at,It)!==!1;);return Q}}function vd(w){return function(M,Q,de){for(var qe=-1,at=ii(M),It=de(M),Ut=It.length;Ut--;){var ir=It[w?Ut:++qe];if(Q(at[ir],ir,at)===!1)break}return M}}function gv(w,M,Q){var de=M&re,qe=Rc(w);function at(){var It=this&&this!==ze&&this instanceof at?qe:w;return It.apply(de?Q:this,arguments)}return at}function yv(w){return function(M){M=ga(M);var Q=Ml(M)?ds(M):r,de=Q?Q[0]:M.charAt(0),qe=Q?Ra(Q,1).join(""):M.slice(1);return de[w]()+qe}}function Ip(w){return function(M){return ri(m3(j1(M).replace(ef,"")),w,"")}}function Rc(w){return function(){var M=arguments;switch(M.length){case 0:return new w;case 1:return new w(M[0]);case 2:return new w(M[0],M[1]);case 3:return new w(M[0],M[1],M[2]);case 4:return new w(M[0],M[1],M[2],M[3]);case 5:return new w(M[0],M[1],M[2],M[3],M[4]);case 6:return new w(M[0],M[1],M[2],M[3],M[4],M[5]);case 7:return new w(M[0],M[1],M[2],M[3],M[4],M[5],M[6])}var Q=ue(w.prototype),de=w.apply(Q,M);return Ki(de)?de:Q}}function Y0(w,M,Q){var de=Rc(w);function qe(){for(var at=arguments.length,It=pr(at),Ut=at,ir=qh(qe);Ut--;)It[Ut]=arguments[Ut];var Fr=at<3&&It[0]!==ir&&It[at-1]!==ir?[]:Bo(It,ir);if(at-=Fr.length,at<Q)return vv(w,M,Nl,qe.placeholder,r,It,Fr,r,r,Q-at);var jr=this&&this!==ze&&this instanceof qe?de:w;return Cr(jr,this,It)}return qe}function cc(w){return function(M,Q,de){var qe=ii(M);if(!ba(M)){var at=Ai(Q,3);M=wl(M),Q=function(Ut){return at(qe[Ut],Ut,qe)}}var It=w(M,Q,de);return It>-1?qe[at?M[It]:It]:r}}function Mp(w){return lf(function(M){var Q=M.length,de=Q,qe=be.prototype.thru;for(w&&M.reverse();de--;){var at=M[de];if(typeof at!="function")throw new to(a);if(qe&&!It&&th(at)=="wrapper")var It=new be([],!0)}for(de=It?de:Q;++de<Q;){at=M[de];var Ut=th(at),ir=Ut=="wrapper"?Vg(at):r;ir&&Pm(ir[0])&&ir[1]==(X|B|N|te)&&!ir[4].length&&ir[9]==1?It=It[th(ir[0])].apply(It,ir[3]):It=at.length==1&&Pm(at)?It[Ut]():It.thru(at)}return function(){var Fr=arguments,jr=Fr[0];if(It&&Fr.length==1&&Kn(jr))return It.plant(jr).value();for(var rn=0,qn=Q?M[rn].apply(this,Fr):jr;++rn<Q;)qn=M[rn].call(this,qn);return qn}})}function Nl(w,M,Q,de,qe,at,It,Ut,ir,Fr){var jr=M&X,rn=M&re,qn=M&G,Ei=M&(B|$),qi=M&pe,Ea=qn?r:Rc(w);function Gi(){for(var Fa=arguments.length,Wa=pr(Fa),bf=Fa;bf--;)Wa[bf]=arguments[bf];if(Ei)var mc=qh(Gi),xf=Ts(Wa,mc);if(de&&(Wa=eu(Wa,de,qe,Ei)),at&&(Wa=mv(Wa,at,It,Ei)),Fa-=xf,Ei&&Fa<Fr){var nl=Bo(Wa,mc);return vv(w,M,Nl,Gi.placeholder,Q,Wa,nl,Ut,ir,Fr-Fa)}var np=rn?Q:this,Ud=qn?np[w]:w;return Fa=Wa.length,Ut?Wa=Cv(Wa,Ut):qi&&Fa>1&&Wa.reverse(),jr&&ir<Fa&&(Wa.length=ir),this&&this!==ze&&this instanceof Gi&&(Ud=Ea||Rc(Ud)),Ud.apply(np,Wa)}return Gi}function Vh(w,M){return function(Q,de){return yu(Q,w,M(de),{})}}function Sm(w,M){return function(Q,de){var qe;if(Q===r&&de===r)return M;if(Q!==r&&(qe=Q),de!==r){if(qe===r)return de;typeof Q=="string"||typeof de=="string"?(Q=Os(Q),de=Os(de)):(Q=Wf(Q),de=Wf(de)),qe=w(Q,de)}return qe}}function Lg(w){return lf(function(M){return M=yn(M,so(Ai())),ta(function(Q){var de=this;return w(M,function(qe){return Cr(qe,de,Q)})})})}function eh(w,M){M=M===r?" ":Os(M);var Q=M.length;if(Q<2)return Q?Rg(M,w):M;var de=Rg(M,Ui(w/As(M)));return Ml(M)?Ra(ds(de),0,w).join(""):de.slice(0,w)}function $g(w,M,Q,de){var qe=M&re,at=Rc(w);function It(){for(var Ut=-1,ir=arguments.length,Fr=-1,jr=de.length,rn=pr(jr+ir),qn=this&&this!==ze&&this instanceof It?at:w;++Fr<jr;)rn[Fr]=de[Fr];for(;ir--;)rn[Fr++]=arguments[++Ut];return Cr(qn,qe?Q:this,rn)}return It}function Ng(w){return function(M,Q,de){return de&&typeof de!="number"&&Ri(M,Q,de)&&(Q=de=r),M=ws(M),Q===r?(Q=M,M=0):Q=ws(Q),de=de===r?M<Q?1:-1:ws(de),fv(M,Q,de,w)}}function Em(w){return function(M,Q){return typeof M=="string"&&typeof Q=="string"||(M=wu(M),Q=wu(Q)),w(M,Q)}}function vv(w,M,Q,de,qe,at,It,Ut,ir,Fr){var jr=M&B,rn=jr?It:r,qn=jr?r:It,Ei=jr?at:r,qi=jr?r:at;M|=jr?N:z,M&=~(jr?z:N),M&H||(M&=~(re|G));var Ea=[w,M,qe,Ei,rn,qi,qn,Ut,ir,Fr],Gi=Q.apply(r,Ea);return Pm(w)&&wd(Gi,Ea),Gi.placeholder=de,km(Gi,w,M)}function Bg(w){var M=ja[w];return function(Q,de){if(Q=wu(Q),de=de==null?0:vi(Vi(de),292),de&&rf(Q)){var qe=(ga(Q)+"e").split("e"),at=M(qe[0]+"e"+(+qe[1]+de));return qe=(ga(at)+"e").split("e"),+(qe[0]+"e"+(+qe[1]-de))}return M(Q)}}var _v=Co&&1/la(new Co([,-0]))[1]==Rt?function(w){return new Co(w)}:RC;function bs(w){return function(M){var Q=ml(M);return Q==ki?Zl(M):Q==ya?ul(M):Vs(M,w(M))}}function vu(w,M,Q,de,qe,at,It,Ut){var ir=M&G;if(!ir&&typeof w!="function")throw new to(a);var Fr=de?de.length:0;if(Fr||(M&=~(N|z),de=qe=r),It=It===r?It:yi(Vi(It),0),Ut=Ut===r?Ut:Vi(Ut),Fr-=qe?qe.length:0,M&z){var jr=de,rn=qe;de=qe=r}var qn=ir?r:Vg(w),Ei=[w,M,Q,de,qe,jr,rn,at,It,Ut];if(qn&&Dp(Ei,qn),w=Ei[0],M=Ei[1],Q=Ei[2],de=Ei[3],qe=Ei[4],Ut=Ei[9]=Ei[9]===r?ir?0:w.length:yi(Ei[9]-Fr,0),!Ut&&M&(B|$)&&(M&=~(B|$)),!M||M==re)var qi=gv(w,M,Q);else M==B||M==$?qi=Y0(w,M,Ut):(M==N||M==(re|N))&&!qe.length?qi=$g(w,M,Q,de):qi=Nl.apply(r,Ei);var Ea=qn?is:wd;return km(Ea(qi,Ei),w,M)}function _d(w,M,Q,de){return w===r||Si(w,Ol[Q])&&!pa.call(de,Q)?M:w}function Fg(w,M,Q,de,qe,at){return Ki(w)&&Ki(M)&&(at.set(M,w),uc(w,M,r,Fg,at),at.delete(M)),w}function J0(w){return $c(w)?r:w}function Ug(w,M,Q,de,qe,at){var It=Q&F,Ut=w.length,ir=M.length;if(Ut!=ir&&!(It&&ir>Ut))return!1;var Fr=at.get(w),jr=at.get(M);if(Fr&&jr)return Fr==M&&jr==w;var rn=-1,qn=!0,Ei=Q&K?new Y:r;for(at.set(w,M),at.set(M,w);++rn<Ut;){var qi=w[rn],Ea=M[rn];if(de)var Gi=It?de(Ea,qi,rn,M,w,at):de(qi,Ea,rn,w,M,at);if(Gi!==r){if(Gi)continue;qn=!1;break}if(Ei){if(!ni(M,function(Fa,Wa){if(!zu(Ei,Wa)&&(qi===Fa||qe(qi,Fa,Q,de,at)))return Ei.push(Wa)})){qn=!1;break}}else if(!(qi===Ea||qe(qi,Ea,Q,de,at))){qn=!1;break}}return at.delete(w),at.delete(M),qn}function bd(w,M,Q,de,qe,at,It){switch(Q){case Mt:if(w.byteLength!=M.byteLength||w.byteOffset!=M.byteOffset)return!1;w=w.buffer,M=M.buffer;case dr:return!(w.byteLength!=M.byteLength||!at(new Yl(w),new Yl(M)));case hr:case cr:case Xn:return Si(+w,+M);case Hn:return w.name==M.name&&w.message==M.message;case ea:case La:return w==M+"";case ki:var Ut=Zl;case ya:var ir=de&F;if(Ut||(Ut=la),w.size!=M.size&&!ir)return!1;var Fr=It.get(w);if(Fr)return Fr==M;de|=K,It.set(w,M);var jr=Ug(Ut(w),Ut(M),de,qe,at,It);return It.delete(w),jr;case Aa:if(R)return R.call(w)==R.call(M)}return!1}function bv(w,M,Q,de,qe,at){var It=Q&F,Ut=Cm(w),ir=Ut.length,Fr=Cm(M),jr=Fr.length;if(ir!=jr&&!It)return!1;for(var rn=ir;rn--;){var qn=Ut[rn];if(!(It?qn in M:pa.call(M,qn)))return!1}var Ei=at.get(w),qi=at.get(M);if(Ei&&qi)return Ei==M&&qi==w;var Ea=!0;at.set(w,M),at.set(M,w);for(var Gi=It;++rn<ir;){qn=Ut[rn];var Fa=w[qn],Wa=M[qn];if(de)var bf=It?de(Wa,Fa,qn,M,w,at):de(Fa,Wa,qn,w,M,at);if(!(bf===r?Fa===Wa||qe(Fa,Wa,Q,de,at):bf)){Ea=!1;break}Gi||(Gi=qn=="constructor")}if(Ea&&!Gi){var mc=w.constructor,xf=M.constructor;mc!=xf&&"constructor"in w&&"constructor"in M&&!(typeof mc=="function"&&mc instanceof mc&&typeof xf=="function"&&xf instanceof xf)&&(Ea=!1)}return at.delete(w),at.delete(M),Ea}function lf(w){return zp(xd(w,r,nh),w+"")}function Cm(w){return ys(w,wl,ff)}function jg(w){return ys(w,Su,qg)}var Vg=na?function(w){return na.get(w)}:RC;function th(w){for(var M=w.name+"",Q=ua[M],de=pa.call(ua,M)?Q.length:0;de--;){var qe=Q[de],at=qe.func;if(at==null||at==w)return qe.name}return M}function qh(w){var M=pa.call(q,"placeholder")?q:w;return M.placeholder}function Ai(){var w=q.iteratee||MC;return w=w===MC?qo:w,arguments.length?w(arguments[0],arguments[1]):w}function uf(w,M){var Q=w.__data__;return Hg(M)?Q[typeof M=="string"?"string":"hash"]:Q.map}function Ba(w){for(var M=wl(w),Q=M.length;Q--;){var de=M[Q],qe=w[de];M[Q]=[de,qe,Gh(qe)]}return M}function cf(w,M){var Q=ll(w,M);return Ll(Q)?Q:r}function Dc(w){var M=pa.call(w,fo),Q=w[fo];try{w[fo]=r;var de=!0}catch{}var qe=gs.call(w);return de&&(M?w[fo]=Q:delete w[fo]),qe}var ff=pu?function(w){return w==null?[]:(w=ii(w),ei(pu(w),function(M){return Yo.call(w,M)}))}:DC,qg=pu?function(w){for(var M=[];w;)Cn(M,ff(w)),w=Fo(w);return M}:DC,ml=ho;(jo&&ml(new jo(new ArrayBuffer(1)))!=Mt||Va&&ml(new Va)!=ki||go&&ml(go.resolve())!=Yi||Co&&ml(new Co)!=ya||un&&ml(new un)!=ka)&&(ml=function(w){var M=ho(w),Q=M==Pi?w.constructor:r,de=Q?hf(Q):"";if(de)switch(de){case Dl:return Mt;case zo:return ki;case O:return Yi;case c:return ya;case _:return ka}return M});function Q0(w,M,Q){for(var de=-1,qe=Q.length;++de<qe;){var at=Q[de],It=at.size;switch(at.type){case"drop":w+=It;break;case"dropRight":M-=It;break;case"take":M=vi(M,w+It);break;case"takeRight":w=yi(w,M-It);break}}return{start:w,end:M}}function xv(w){var M=w.match(fe);return M?M[1].split(we):[]}function wv(w,M,Q){M=Ql(M,w);for(var de=-1,qe=M.length,at=!1;++de<qe;){var It=nu(M[de]);if(!(at=w!=null&&Q(w,It)))break;w=w[It]}return at||++de!=qe?at:(qe=w==null?0:w.length,!!qe&&Ds(qe)&&_u(It,qe)&&(Kn(w)||li(w)))}function eb(w){var M=w.length,Q=new w.constructor(M);return M&&typeof w[0]=="string"&&pa.call(w,"index")&&(Q.index=w.index,Q.input=w.input),Q}function Op(w){return typeof w.constructor=="function"&&!bu(w)?ue(Fo(w)):{}}function Rs(w,M,Q){var de=w.constructor;switch(M){case dr:return kp(w);case hr:case cr:return new de(+w);case Mt:return Yf(w,Q);case yr:case Xt:case Yt:case lr:case Qr:case Xr:case En:case Rn:case rr:return zg(w,Q);case ki:return new de;case Xn:case La:return new de(w);case ea:return gd(w);case ya:return new de;case Aa:return bm(w)}}function Gg(w,M){var Q=M.length;if(!Q)return w;var de=Q-1;return M[de]=(Q>1?"& ":"")+M[de],M=M.join(Q>2?", ":" "),w.replace(ye,`{
/* [wrapped with `+M+`] */
`)}function Sv(w){return Kn(w)||li(w)||!!(hl&&w&&w[hl])}function _u(w,M){var Q=typeof w;return M=M??St,!!M&&(Q=="number"||Q!="symbol"&&Vt.test(w))&&w>-1&&w%1==0&&w<M}function Ri(w,M,Q){if(!Ki(Q))return!1;var de=typeof M;return(de=="number"?ba(Q)&&_u(M,Q.length):de=="string"&&M in Q)?Si(Q[M],w):!1}function fc(w,M){if(Kn(w))return!1;var Q=typeof w;return Q=="number"||Q=="symbol"||Q=="boolean"||w==null||xl(w)?!0:et.test(w)||!je.test(w)||M!=null&&w in ii(M)}function Hg(w){var M=typeof w;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?w!=="__proto__":w===null}function Pm(w){var M=th(w),Q=q[M];if(typeof Q!="function"||!(M in Te.prototype))return!1;if(w===Q)return!0;var de=Vg(Q);return!!de&&w===de[0]}function Ev(w){return!!So&&So in w}var zc=Kl?as:zC;function bu(w){var M=w&&w.constructor,Q=typeof M=="function"&&M.prototype||Ol;return w===Q}function Gh(w){return w===w&&!Ki(w)}function Rp(w,M){return function(Q){return Q==null?!1:Q[w]===M&&(M!==r||w in ii(Q))}}function ru(w){var M=Zr(w,function(de){return Q.size===v&&Q.clear(),de}),Q=M.cache;return M}function Dp(w,M){var Q=w[1],de=M[1],qe=Q|de,at=qe<(re|G|X),It=de==X&&Q==B||de==X&&Q==te&&w[7].length<=M[8]||de==(X|te)&&M[7].length<=M[8]&&Q==B;if(!(at||It))return w;de&re&&(w[2]=M[2],qe|=Q&re?0:H);var Ut=M[3];if(Ut){var ir=w[3];w[3]=ir?eu(ir,Ut,M[4]):Ut,w[4]=ir?Bo(w[3],S):M[4]}return Ut=M[5],Ut&&(ir=w[5],w[5]=ir?mv(ir,Ut,M[6]):Ut,w[6]=ir?Bo(w[5],S):M[6]),Ut=M[7],Ut&&(w[7]=Ut),de&X&&(w[8]=w[8]==null?M[8]:vi(w[8],M[8])),w[9]==null&&(w[9]=M[9]),w[0]=M[0],w[1]=qe,w}function Ws(w){var M=[];if(w!=null)for(var Q in ii(w))M.push(Q);return M}function Tm(w){return gs.call(w)}function xd(w,M,Q){return M=yi(M===r?w.length-1:M,0),function(){for(var de=arguments,qe=-1,at=yi(de.length-M,0),It=pr(at);++qe<at;)It[qe]=de[M+qe];qe=-1;for(var Ut=pr(M+1);++qe<M;)Ut[qe]=de[qe];return Ut[M]=Q(It),Cr(w,this,Ut)}}function gl(w,M){return M.length<2?w:_a(w,Gu(M,0,-1))}function Cv(w,M){for(var Q=w.length,de=vi(M.length,Q),qe=$l(w);de--;){var at=M[de];w[de]=_u(at,Q)?qe[at]:r}return w}function Am(w,M){if(!(M==="constructor"&&typeof w[M]=="function")&&M!="__proto__")return w[M]}var wd=Pv(is),hc=Gs||function(w,M){return ze.setTimeout(w,M)},zp=Pv(Tp);function km(w,M,Q){var de=M+"";return zp(w,Gg(de,Ed(xv(de),Q)))}function Pv(w){var M=0,Q=0;return function(){var de=Tn(),qe=Ie-(de-Q);if(Q=de,qe>0){if(++M>=ge)return arguments[0]}else M=0;return w.apply(r,arguments)}}function Sd(w,M){var Q=-1,de=w.length,qe=de-1;for(M=M===r?de:M;++Q<M;){var at=vm(Q,qe),It=w[at];w[at]=w[Q],w[Q]=It}return w.length=M,w}var rh=ru(function(w){var M=[];return w.charCodeAt(0)===46&&M.push(""),w.replace(ht,function(Q,de,qe,at){M.push(qe?at.replace(nt,"$1"):de||Q)}),M});function nu(w){if(typeof w=="string"||xl(w))return w;var M=w+"";return M=="0"&&1/w==-Rt?"-0":M}function hf(w){if(w!=null){try{return ks.call(w)}catch{}try{return w+""}catch{}}return""}function Ed(w,M){return Yr(wr,function(Q){var de="_."+Q[0];M&Q[1]&&!jn(w,de)&&w.push(de)}),w.sort()}function Lp(w){if(w instanceof Te)return w.clone();var M=new be(w.__wrapped__,w.__chain__);return M.__actions__=$l(w.__actions__),M.__index__=w.__index__,M.__values__=w.__values__,M}function Hh(w,M,Q){(Q?Ri(w,M,Q):M===r)?M=1:M=yi(Vi(M),0);var de=w==null?0:w.length;if(!de||M<1)return[];for(var qe=0,at=0,It=pr(Ui(de/M));qe<de;)It[at++]=Gu(w,qe,qe+=M);return It}function Cd(w){for(var M=-1,Q=w==null?0:w.length,de=0,qe=[];++M<Q;){var at=w[M];at&&(qe[de++]=at)}return qe}function Pd(){var w=arguments.length;if(!w)return[];for(var M=pr(w-1),Q=arguments[0],de=w;de--;)M[de-1]=arguments[de];return Cn(Kn(Q)?$l(Q):[Q],xn(M,1))}var Tv=ta(function(w,M){return di(w)?nn(w,xn(M,1,di,!0)):[]}),Av=ta(function(w,M){var Q=xu(M);return di(Q)&&(Q=r),di(w)?nn(w,xn(M,1,di,!0),Ai(Q,2)):[]}),kv=ta(function(w,M){var Q=xu(M);return di(Q)&&(Q=r),di(w)?nn(w,xn(M,1,di,!0),r,Q):[]});function Iv(w,M,Q){var de=w==null?0:w.length;return de?(M=Q||M===r?1:Vi(M),Gu(w,M<0?0:M,de)):[]}function Wg(w,M,Q){var de=w==null?0:w.length;return de?(M=Q||M===r?1:Vi(M),M=de-M,Gu(w,0,M<0?0:M)):[]}function Td(w,M){return w&&w.length?_o(w,Ai(M,3),!0,!0):[]}function Im(w,M){return w&&w.length?_o(w,Ai(M,3),!0):[]}function $p(w,M,Q,de){var qe=w==null?0:w.length;return qe?(Q&&typeof Q!="number"&&Ri(w,M,Q)&&(Q=0,de=qe),_i(w,M,Q,de)):[]}function Ad(w,M,Q){var de=w==null?0:w.length;if(!de)return-1;var qe=Q==null?0:Vi(Q);return qe<0&&(qe=yi(de+qe,0)),Ti(w,Ai(M,3),qe)}function kd(w,M,Q){var de=w==null?0:w.length;if(!de)return-1;var qe=de-1;return Q!==r&&(qe=Vi(Q),qe=Q<0?yi(de+qe,0):vi(qe,de-1)),Ti(w,Ai(M,3),qe,!0)}function nh(w){var M=w==null?0:w.length;return M?xn(w,1):[]}function pf(w){var M=w==null?0:w.length;return M?xn(w,Rt):[]}function Mv(w,M){var Q=w==null?0:w.length;return Q?(M=M===r?1:Vi(M),xn(w,M)):[]}function ih(w){for(var M=-1,Q=w==null?0:w.length,de={};++M<Q;){var qe=w[M];de[qe[0]]=qe[1]}return de}function ah(w){return w&&w.length?w[0]:r}function Mm(w,M,Q){var de=w==null?0:w.length;if(!de)return-1;var qe=Q==null?0:Vi(Q);return qe<0&&(qe=yi(de+qe,0)),Hi(w,M,qe)}function Zg(w){var M=w==null?0:w.length;return M?Gu(w,0,-1):[]}var Om=ta(function(w){var M=yn(w,Kf);return M.length&&M[0]===w[0]?gu(M):[]}),Ov=ta(function(w){var M=xu(w),Q=yn(w,Kf);return M===xu(Q)?M=r:Q.pop(),Q.length&&Q[0]===w[0]?gu(Q,Ai(M,2)):[]}),Rv=ta(function(w){var M=xu(w),Q=yn(w,Kf);return M=typeof M=="function"?M:r,M&&Q.pop(),Q.length&&Q[0]===w[0]?gu(Q,r,M):[]});function Dv(w,M){return w==null?"":pl.call(w,M)}function xu(w){var M=w==null?0:w.length;return M?w[M-1]:r}function zv(w,M,Q){var de=w==null?0:w.length;if(!de)return-1;var qe=de;return Q!==r&&(qe=Vi(Q),qe=qe<0?yi(de+qe,0):vi(qe,de-1)),M===M?sc(w,M,qe):Ti(w,Fi,qe,!0)}function Wh(w,M){return w&&w.length?ym(w,Vi(M)):r}var Rm=ta(Id);function Id(w,M){return w&&w.length&&M&&M.length?Bh(w,M):w}function df(w,M,Q){return w&&w.length&&M&&M.length?Bh(w,M,Ai(Q,2)):w}function oh(w,M,Q){return w&&w.length&&M&&M.length?Bh(w,M,r,Q):w}var Da=lf(function(w,M){var Q=w==null?0:w.length,de=Mr(w,M);return Og(w,yn(M,function(qe){return _u(qe,Q)?+qe:qe}).sort(Jf)),de});function tb(w,M){var Q=[];if(!(w&&w.length))return Q;var de=-1,qe=[],at=w.length;for(M=Ai(M,3);++de<at;){var It=w[de];M(It,de,w)&&(Q.push(It),qe.push(de))}return Og(w,qe),Q}function Md(w){return w==null?w:du.call(w)}function Np(w,M,Q){var de=w==null?0:w.length;return de?(Q&&typeof Q!="number"&&Ri(w,M,Q)?(M=0,Q=de):(M=M==null?0:Vi(M),Q=Q===r?de:Vi(Q)),Gu(w,M,Q)):[]}function Bp(w,M){return Fh(w,M)}function Xg(w,M,Q){return Ap(w,M,Ai(Q,2))}function Lv(w,M){var Q=w==null?0:w.length;if(Q){var de=Fh(w,M);if(de<Q&&Si(w[de],M))return de}return-1}function Kg(w,M){return Fh(w,M,!0)}function rb(w,M,Q){return Ap(w,M,Ai(Q,2),!0)}function sh(w,M){var Q=w==null?0:w.length;if(Q){var de=Fh(w,M,!0)-1;if(Si(w[de],M))return de}return-1}function $v(w){return w&&w.length?Dg(w):[]}function Yg(w,M){return w&&w.length?Dg(w,Ai(M,2)):[]}function Nv(w){var M=w==null?0:w.length;return M?Gu(w,1,M):[]}function Bv(w,M,Q){return w&&w.length?(M=Q||M===r?1:Vi(M),Gu(w,0,M<0?0:M)):[]}function Fv(w,M,Q){var de=w==null?0:w.length;return de?(M=Q||M===r?1:Vi(M),M=de-M,Gu(w,M<0?0:M,de)):[]}function Zh(w,M){return w&&w.length?_o(w,Ai(M,3),!1,!0):[]}function mf(w,M){return w&&w.length?_o(w,Ai(M,3)):[]}var Jg=ta(function(w){return Zf(xn(w,1,di,!0))}),lh=ta(function(w){var M=xu(w);return di(M)&&(M=r),Zf(xn(w,1,di,!0),Ai(M,2))}),Dm=ta(function(w){var M=xu(w);return M=typeof M=="function"?M:r,Zf(xn(w,1,di,!0),r,M)});function lo(w){return w&&w.length?Zf(w):[]}function ro(w,M){return w&&w.length?Zf(w,Ai(M,2)):[]}function zm(w,M){return M=typeof M=="function"?M:r,w&&w.length?Zf(w,r,M):[]}function Od(w){if(!(w&&w.length))return[];var M=0;return w=ei(w,function(Q){if(di(Q))return M=yi(Q.length,M),!0}),wi(M,function(Q){return yn(w,wo(Q))})}function Fp(w,M){if(!(w&&w.length))return[];var Q=Od(w);return M==null?Q:yn(Q,function(de){return Cr(M,r,de)})}var Lm=ta(function(w,M){return di(w)?nn(w,M):[]}),Uv=ta(function(w){return _m(ei(w,di))}),Qg=ta(function(w){var M=xu(w);return di(M)&&(M=r),_m(ei(w,di),Ai(M,2))}),Xh=ta(function(w){var M=xu(w);return M=typeof M=="function"?M:r,_m(ei(w,di),r,M)}),Kh=ta(Od);function jv(w,M){return dd(w||[],M||[],Nt)}function Lo(w,M){return dd(w||[],M||[],Oc)}var uo=ta(function(w){var M=w.length,Q=M>1?w[M-1]:r;return Q=typeof Q=="function"?(w.pop(),Q):r,Fp(w,Q)});function yl(w){var M=q(w);return M.__chain__=!0,M}function Rd(w,M){return M(w),w}function uh(w,M){return M(w)}var $m=lf(function(w){var M=w.length,Q=M?w[0]:0,de=this.__wrapped__,qe=function(at){return Mr(at,w)};return M>1||this.__actions__.length||!(de instanceof Te)||!_u(Q)?this.thru(qe):(de=de.slice(Q,+Q+(M?1:0)),de.__actions__.push({func:uh,args:[qe],thisArg:r}),new be(de,this.__chain__).thru(function(at){return M&&!at.length&&at.push(r),at}))});function Yh(){return yl(this)}function Lc(){return new be(this.value(),this.__chain__)}function Nm(){this.__values__===r&&(this.__values__=rl(this.value()));var w=this.__index__>=this.__values__.length,M=w?r:this.__values__[this.__index__++];return{done:w,value:M}}function Dd(){return this}function Vv(w){for(var M,Q=this;Q instanceof he;){var de=Lp(Q);de.__index__=0,de.__values__=r,M?qe.__wrapped__=de:M=de;var qe=de;Q=Q.__wrapped__}return qe.__wrapped__=w,M}function Go(){var w=this.__wrapped__;if(w instanceof Te){var M=w;return this.__actions__.length&&(M=new Te(this)),M=M.reverse(),M.__actions__.push({func:uh,args:[Md],thisArg:r}),new be(M,this.__chain__)}return this.thru(Md)}function gf(){return pd(this.__wrapped__,this.__actions__)}var iu=sf(function(w,M,Q){pa.call(w,Q)?++w[Q]:Pr(w,Q,1)});function o(w,M,Q){var de=Kn(w)?On:pi;return Q&&Ri(w,M,Q)&&(M=r),de(w,Ai(M,3))}function h(w,M){var Q=Kn(w)?ei:ai;return Q(w,Ai(M,3))}var m=cc(Ad),E=cc(kd);function I(w,M){return xn(f(w,M),1)}function V(w,M){return xn(f(w,M),Rt)}function Z(w,M,Q){return Q=Q===r?1:Vi(Q),xn(f(w,M),Q)}function ne(w,M){var Q=Kn(w)?Yr:Zn;return Q(w,Ai(M,3))}function ce(w,M){var Q=Kn(w)?bn:mi;return Q(w,Ai(M,3))}var _e=sf(function(w,M,Q){pa.call(w,Q)?w[Q].push(M):Pr(w,Q,[M])});function Se(w,M,Q,de){w=ba(w)?w:Fd(w),Q=Q&&!de?Vi(Q):0;var qe=w.length;return Q<0&&(Q=yi(qe+Q,0)),vf(w)?Q<=qe&&w.indexOf(M,Q)>-1:!!qe&&Hi(w,M,Q)>-1}var Me=ta(function(w,M,Q){var de=-1,qe=typeof M=="function",at=ba(w)?pr(w.length):[];return Zn(w,function(It){at[++de]=qe?Cr(M,It,Q):Jl(It,M,Q)}),at}),Ve=sf(function(w,M,Q){Pr(w,Q,M)});function f(w,M){var Q=Kn(w)?yn:$h;return Q(w,Ai(M,3))}function u(w,M,Q,de){return w==null?[]:(Kn(M)||(M=M==null?[]:[M]),Q=de?r:Q,Kn(Q)||(Q=Q==null?[]:[Q]),Hf(w,M,Q))}var p=sf(function(w,M,Q){w[Q?0:1].push(M)},function(){return[[],[]]});function x(w,M,Q){var de=Kn(w)?ri:sa,qe=arguments.length<3;return de(w,Ai(M,4),Q,qe,Zn)}function T(w,M,Q){var de=Kn(w)?Gn:sa,qe=arguments.length<3;return de(w,Ai(M,4),Q,qe,mi)}function D(w,M){var Q=Kn(w)?ei:ai;return Q(w,Br(Ai(M,3)))}function j(w){var M=Kn(w)?xt:hv;return M(w)}function J(w,M,Q){(Q?Ri(w,M,Q):M===r)?M=1:M=Vi(M);var de=Kn(w)?st:Pp;return de(w,M)}function ie(w){var M=Kn(w)?wt:Z0;return M(w)}function le(w){if(w==null)return 0;if(ba(w))return vf(w)?As(w):w.length;var M=ml(w);return M==ki||M==ya?w.size:qu(w).length}function me(w,M,Q){var de=Kn(w)?ni:X0;return Q&&Ri(w,M,Q)&&(M=r),de(w,Ai(M,3))}var xe=ta(function(w,M){if(w==null)return[];var Q=M.length;return Q>1&&Ri(w,M[0],M[1])?M=[]:Q>2&&Ri(M[0],M[1],M[2])&&(M=[M[0]]),Hf(w,xn(M,1),[])}),Re=zh||function(){return ze.Date.now()};function De(w,M){if(typeof M!="function")throw new to(a);return w=Vi(w),function(){if(--w<1)return M.apply(this,arguments)}}function Be(w,M,Q){return M=Q?r:M,M=w&&M==null?w.length:M,vu(w,X,r,r,r,r,M)}function rt(w,M){var Q;if(typeof M!="function")throw new to(a);return w=Vi(w),function(){return--w>0&&(Q=M.apply(this,arguments)),w<=1&&(M=r),Q}}var ot=ta(function(w,M,Q){var de=re;if(Q.length){var qe=Bo(Q,qh(ot));de|=N}return vu(w,de,M,Q,qe)}),Pt=ta(function(w,M,Q){var de=re|G;if(Q.length){var qe=Bo(Q,qh(Pt));de|=N}return vu(M,de,w,Q,qe)});function kt(w,M,Q){M=Q?r:M;var de=vu(w,B,r,r,r,r,r,M);return de.placeholder=kt.placeholder,de}function At(w,M,Q){M=Q?r:M;var de=vu(w,$,r,r,r,r,r,M);return de.placeholder=At.placeholder,de}function $t(w,M,Q){var de,qe,at,It,Ut,ir,Fr=0,jr=!1,rn=!1,qn=!0;if(typeof w!="function")throw new to(a);M=wu(M)||0,Ki(Q)&&(jr=!!Q.leading,rn="maxWait"in Q,at=rn?yi(wu(Q.maxWait)||0,M):at,qn="trailing"in Q?!!Q.trailing:qn);function Ei(nl){var np=de,Ud=qe;return de=qe=r,Fr=nl,It=w.apply(Ud,np),It}function qi(nl){return Fr=nl,Ut=hc(Fa,M),jr?Ei(nl):It}function Ea(nl){var np=nl-ir,Ud=nl-Fr,v3=M-np;return rn?vi(v3,at-Ud):v3}function Gi(nl){var np=nl-ir,Ud=nl-Fr;return ir===r||np>=M||np<0||rn&&Ud>=at}function Fa(){var nl=Re();if(Gi(nl))return Wa(nl);Ut=hc(Fa,Ea(nl))}function Wa(nl){return Ut=r,qn&&de?Ei(nl):(de=qe=r,It)}function bf(){Ut!==r&&jh(Ut),Fr=0,de=ir=qe=Ut=r}function mc(){return Ut===r?It:Wa(Re())}function xf(){var nl=Re(),np=Gi(nl);if(de=arguments,qe=this,ir=nl,np){if(Ut===r)return qi(ir);if(rn)return jh(Ut),Ut=hc(Fa,M),Ei(ir)}return Ut===r&&(Ut=hc(Fa,M)),It}return xf.cancel=bf,xf.flush=mc,xf}var sr=ta(function(w,M){return ji(w,1,M)}),Wt=ta(function(w,M,Q){return ji(w,wu(M)||0,Q)});function zr(w){return vu(w,pe)}function Zr(w,M){if(typeof w!="function"||M!=null&&typeof M!="function")throw new to(a);var Q=function(){var de=arguments,qe=M?M.apply(this,de):de[0],at=Q.cache;if(at.has(qe))return at.get(qe);var It=w.apply(this,de);return Q.cache=at.set(qe,It)||at,It};return Q.cache=new(Zr.Cache||cn),Q}Zr.Cache=cn;function Br(w){if(typeof w!="function")throw new to(a);return function(){var M=arguments;switch(M.length){case 0:return!w.call(this);case 1:return!w.call(this,M[0]);case 2:return!w.call(this,M[0],M[1]);case 3:return!w.call(this,M[0],M[1],M[2])}return!w.apply(this,M)}}function Nr(w){return rt(2,w)}var Rr=dv(function(w,M){M=M.length==1&&Kn(M[0])?yn(M[0],so(Ai())):yn(xn(M,1),so(Ai()));var Q=M.length;return ta(function(de){for(var qe=-1,at=vi(de.length,Q);++qe<at;)de[qe]=M[qe].call(this,de[qe]);return Cr(w,this,de)})}),Ur=ta(function(w,M){var Q=Bo(M,qh(Ur));return vu(w,N,r,M,Q)}),Vr=ta(function(w,M){var Q=Bo(M,qh(Vr));return vu(w,z,r,M,Q)}),Ir=lf(function(w,M){return vu(w,te,r,r,r,M)});function In(w,M){if(typeof w!="function")throw new to(a);return M=M===r?M:Vi(M),ta(w,M)}function mn(w,M){if(typeof w!="function")throw new to(a);return M=M==null?0:yi(Vi(M),0),ta(function(Q){var de=Q[M],qe=Ra(Q,0,M);return de&&Cn(qe,de),Cr(w,this,qe)})}function oi(w,M,Q){var de=!0,qe=!0;if(typeof w!="function")throw new to(a);return Ki(Q)&&(de="leading"in Q?!!Q.leading:de,qe="trailing"in Q?!!Q.trailing:qe),$t(w,M,{leading:de,maxWait:M,trailing:qe})}function Ii(w){return Be(w,1)}function Ni(w,M){return Ur(Uh(M),w)}function Jn(){if(!arguments.length)return[];var w=arguments[0];return Kn(w)?w:[w]}function Xi(w){return Sn(w,L)}function Mi(w,M){return M=typeof M=="function"?M:r,Sn(w,L,M)}function si(w){return Sn(w,A|L)}function wa(w,M){return M=typeof M=="function"?M:r,Sn(w,A|L,M)}function Sa(w,M){return M==null||Bn(w,M,wl(M))}function Si(w,M){return w===M||w!==w&&M!==M}var da=Em(fa),ha=Em(function(w,M){return w>=M}),li=lc(function(){return arguments}())?lc:function(w){return za(w)&&pa.call(w,"callee")&&!Yo.call(w,"callee")},Kn=pr.isArray,no=xr?so(xr):Lh;function ba(w){return w!=null&&Ds(w.length)&&!as(w)}function di(w){return za(w)&&ba(w)}function Ta(w){return w===!0||w===!1||za(w)&&ho(w)==hr}var ma=Gf||zC,Bi=Er?so(Er):nf;function xs(w){return za(w)&&w.nodeType===1&&!$c(w)}function Ho(w){if(w==null)return!0;if(ba(w)&&(Kn(w)||typeof w=="string"||typeof w.splice=="function"||ma(w)||dc(w)||li(w)))return!w.length;var M=ml(w);if(M==ki||M==ya)return!w.size;if(bu(w))return!qu(w).length;for(var Q in w)if(pa.call(w,Q))return!1;return!0}function Po(w,M){return dl(w,M)}function tl(w,M,Q){Q=typeof Q=="function"?Q:r;var de=Q?Q(w,M):r;return de===r?dl(w,M,r,Q):!!de}function vl(w){if(!za(w))return!1;var M=ho(w);return M==Hn||M==Mn||typeof w.message=="string"&&typeof w.name=="string"&&!$c(w)}function _l(w){return typeof w=="number"&&rf(w)}function as(w){if(!Ki(w))return!1;var M=ho(w);return M==Qn||M==an||M==Bt||M==gi}function bl(w){return typeof w=="number"&&w==Vi(w)}function Ds(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=St}function Ki(w){var M=typeof w;return w!=null&&(M=="object"||M=="function")}function za(w){return w!=null&&typeof w=="object"}var pc=_r?so(_r):Vo;function yf(w,M){return w===M||zl(w,M,Ba(M))}function ch(w,M,Q){return Q=typeof Q=="function"?Q:r,zl(w,M,Ba(M),Q)}function Up(w){return Qh(w)&&w!=+w}function Hu(w){if(zc(w))throw new hi(l);return Ll(w)}function jp(w){return w===null}function Jh(w){return w==null}function Qh(w){return typeof w=="number"||za(w)&&ho(w)==Xn}function $c(w){if(!za(w)||ho(w)!=Pi)return!1;var M=Fo(w);if(M===null)return!0;var Q=pa.call(M,"constructor")&&M.constructor;return typeof Q=="function"&&Q instanceof Q&&ks.call(Q)==qf}var ep=on?so(on):Mc;function zd(w){return bl(w)&&w>=-St&&w<=St}var Ld=Gr?so(Gr):Ja;function vf(w){return typeof w=="string"||!Kn(w)&&za(w)&&ho(w)==La}function xl(w){return typeof w=="symbol"||za(w)&&ho(w)==Aa}var dc=Kr?so(Kr):vo;function $d(w){return w===r}function tp(w){return za(w)&&ml(w)==ka}function Bl(w){return za(w)&&ho(w)==Ka}var _f=Em(hd),Bm=Em(function(w,M){return w<=M});function rl(w){if(!w)return[];if(ba(w))return vf(w)?ds(w):$l(w);if(hu&&w[hu])return Ua(w[hu]());var M=ml(w),Q=M==ki?Zl:M==ya?la:Fd;return Q(w)}function ws(w){if(!w)return w===0?w:0;if(w=wu(w),w===Rt||w===-Rt){var M=w<0?-1:1;return M*Zt}return w===w?w:0}function Vi(w){var M=ws(w),Q=M%1;return M===M?Q?M-Q:M:0}function fh(w){return w?tn(Vi(w),0,Ge):0}function wu(w){if(typeof w=="number")return w;if(xl(w))return Kt;if(Ki(w)){var M=typeof w.valueOf=="function"?w.valueOf():w;w=Ki(M)?M+"":M}if(typeof w!="string")return w===0?w:+w;w=ps(w);var Q=pt.test(w);return Q||ar.test(w)?tf(w.slice(2),Q?2:8):Xe.test(w)?Kt:+w}function Wu(w){return tu(w,Su(w))}function Wo(w){return w?tn(Vi(w),-St,St):w===0?w:0}function ga(w){return w==null?"":Os(w)}var bC=Qf(function(w,M){if(bu(M)||ba(M)){tu(M,wl(M),w);return}for(var Q in M)pa.call(M,Q)&&Nt(w,Q,M[Q])}),rp=Qf(function(w,M){tu(M,Su(M),w)}),Fm=Qf(function(w,M,Q,de){tu(M,Su(M),w,de)}),A1=Qf(function(w,M,Q,de){tu(M,wl(M),w,de)}),qv=lf(Mr);function hh(w,M){var Q=ue(w);return M==null?Q:or(Q,M)}var Gv=ta(function(w,M){w=ii(w);var Q=-1,de=M.length,qe=de>2?M[2]:r;for(qe&&Ri(M[0],M[1],qe)&&(de=1);++Q<de;)for(var at=M[Q],It=Su(at),Ut=-1,ir=It.length;++Ut<ir;){var Fr=It[Ut],jr=w[Fr];(jr===r||Si(jr,Ol[Fr])&&!pa.call(w,Fr))&&(w[Fr]=at[Fr])}return w}),ey=ta(function(w){return w.push(r,Fg),Cr(Bd,r,w)});function Hv(w,M){return Un(w,Ai(M,3),va)}function Wv(w,M){return Un(w,Ai(M,3),Ha)}function nb(w,M){return w==null?w:ca(w,Ai(M,3),Su)}function k1(w,M){return w==null?w:Oa(w,Ai(M,3),Su)}function ty(w,M){return w&&va(w,Ai(M,3))}function I1(w,M){return w&&Ha(w,Ai(M,3))}function M1(w){return w==null?[]:yo(w,wl(w))}function O1(w){return w==null?[]:yo(w,Su(w))}function Zv(w,M,Q){var de=w==null?r:_a(w,M);return de===r?Q:de}function R1(w,M){return w!=null&&wv(w,M,vs)}function au(w,M){return w!=null&&wv(w,M,mu)}var Xv=Vh(function(w,M,Q){M!=null&&typeof M.toString!="function"&&(M=gs.call(M)),w[M]=Q},IC(Nc)),D1=Vh(function(w,M,Q){M!=null&&typeof M.toString!="function"&&(M=gs.call(M)),pa.call(w,M)?w[M].push(Q):w[M]=[Q]},Ai),ph=ta(Jl);function wl(w){return ba(w)?ft(w):qu(w)}function Su(w){return ba(w)?ft(w,!0):af(w)}function Nd(w,M){var Q={};return M=Ai(M,3),va(w,function(de,qe,at){Pr(Q,M(de,qe,at),de)}),Q}function Um(w,M){var Q={};return M=Ai(M,3),va(w,function(de,qe,at){Pr(Q,qe,M(de,qe,at))}),Q}var jm=Qf(function(w,M,Q){uc(w,M,Q)}),Bd=Qf(function(w,M,Q,de){uc(w,M,Q,de)}),Vm=lf(function(w,M){var Q={};if(w==null)return Q;var de=!1;M=yn(M,function(at){return at=Ql(at,w),de||(de=at.length>1),at}),tu(w,jg(w),Q),de&&(Q=Sn(Q,A|P|L,J0));for(var qe=M.length;qe--;)Xf(Q,M[qe]);return Q});function z1(w,M){return ib(w,Br(Ai(M)))}var L1=lf(function(w,M){return w==null?{}:Nh(w,M)});function ib(w,M){if(w==null)return{};var Q=yn(jg(w),function(de){return[de]});return M=Ai(M),Hs(w,Q,function(de,qe){return M(de,qe[0])})}function $1(w,M,Q){M=Ql(M,w);var de=-1,qe=M.length;for(qe||(qe=1,w=r);++de<qe;){var at=w==null?r:w[nu(M[de])];at===r&&(de=qe,at=Q),w=as(at)?at.call(w):at}return w}function ab(w,M,Q){return w==null?w:Oc(w,M,Q)}function ob(w,M,Q,de){return de=typeof de=="function"?de:r,w==null?w:Oc(w,M,Q,de)}var dh=bs(wl),sb=bs(Su);function lb(w,M,Q){var de=Kn(w),qe=de||ma(w)||dc(w);if(M=Ai(M,4),Q==null){var at=w&&w.constructor;qe?Q=de?new at:[]:Ki(w)?Q=as(at)?ue(Fo(w)):{}:Q={}}return(qe?Yr:va)(w,function(It,Ut,ir){return M(Q,It,Ut,ir)}),Q}function ub(w,M){return w==null?!0:Xf(w,M)}function N1(w,M,Q){return w==null?w:pv(w,M,Uh(Q))}function cb(w,M,Q,de){return de=typeof de=="function"?de:r,w==null?w:pv(w,M,Uh(Q),de)}function Fd(w){return w==null?[]:rs(w,wl(w))}function B1(w){return w==null?[]:rs(w,Su(w))}function fb(w,M,Q){return Q===r&&(Q=M,M=r),Q!==r&&(Q=wu(Q),Q=Q===Q?Q:0),M!==r&&(M=wu(M),M=M===M?M:0),tn(wu(w),M,Q)}function F1(w,M,Q){return M=ws(M),Q===r?(Q=M,M=0):Q=ws(Q),w=wu(w),ns(w,M,Q)}function ry(w,M,Q){if(Q&&typeof Q!="boolean"&&Ri(w,M,Q)&&(M=Q=r),Q===r&&(typeof M=="boolean"?(Q=M,M=r):typeof w=="boolean"&&(Q=w,w=r)),w===r&&M===r?(w=0,M=1):(w=ws(w),M===r?(M=w,w=0):M=ws(M)),w>M){var de=w;w=M,M=de}if(Q||w%1||M%1){var qe=Uo();return vi(w+qe*(M-w+Tc("1e-"+((qe+"").length-1))),M)}return vm(w,M)}var U1=Ip(function(w,M,Q){return M=M.toLowerCase(),w+(Q?ny(M):M)});function ny(w){return kC(ga(w).toLowerCase())}function j1(w){return w=ga(w),w&&w.replace(fr,Qs).replace(kl,"")}function V1(w,M,Q){w=ga(w),M=Os(M);var de=w.length;Q=Q===r?de:tn(Vi(Q),0,de);var qe=Q;return Q-=M.length,Q>=0&&w.slice(Q,qe)==M}function xC(w){return w=ga(w),w&&Ci.test(w)?w.replace(Hr,qs):w}function wC(w){return w=ga(w),w&&Dt.test(w)?w.replace(Ct,"\\$&"):w}var SC=Ip(function(w,M,Q){return w+(Q?"-":"")+M.toLowerCase()}),EC=Ip(function(w,M,Q){return w+(Q?" ":"")+M.toLowerCase()}),CC=yv("toLowerCase");function PC(w,M,Q){w=ga(w),M=Vi(M);var de=M?As(w):0;if(!M||de>=M)return w;var qe=(M-de)/2;return eh(Ms(qe),Q)+w+eh(Ui(qe),Q)}function TC(w,M,Q){w=ga(w),M=Vi(M);var de=M?As(w):0;return M&&de<M?w+eh(M-de,Q):w}function AC(w,M,Q){w=ga(w),M=Vi(M);var de=M?As(w):0;return M&&de<M?eh(M-de,Q)+w:w}function mh(w,M,Q){return Q||M==null?M=0:M&&(M=+M),zn(ga(w).replace(Et,""),M||0)}function Kv(w,M,Q){return(Q?Ri(w,M,Q):M===r)?M=1:M=Vi(M),Rg(ga(w),M)}function q1(){var w=arguments,M=ga(w[0]);return w.length<3?M:M.replace(w[1],w[2])}var iy=Ip(function(w,M,Q){return w+(Q?"_":"")+M.toLowerCase()});function G1(w,M,Q){return Q&&typeof Q!="number"&&Ri(w,M,Q)&&(M=Q=r),Q=Q===r?Ge:Q>>>0,Q?(w=ga(w),w&&(typeof M=="string"||M!=null&&!ep(M))&&(M=Os(M),!M&&Ml(w))?Ra(ds(w),0,Q):w.split(M,Q)):[]}var Pq=Ip(function(w,M,Q){return w+(Q?" ":"")+kC(M)});function Tq(w,M,Q){return w=ga(w),Q=Q==null?0:tn(Vi(Q),0,w.length),M=Os(M),w.slice(Q,Q+M.length)==M}function Aq(w,M,Q){var de=q.templateSettings;Q&&Ri(w,M,Q)&&(M=r),w=ga(w),M=Fm({},M,de,_d);var qe=Fm({},M.imports,de.imports,_d),at=wl(qe),It=rs(qe,at),Ut,ir,Fr=0,jr=M.interpolate||qr,rn="__p += '",qn=Zi((M.escape||qr).source+"|"+jr.source+"|"+(jr===$e?dt:qr).source+"|"+(M.evaluate||qr).source+"|$","g"),Ei="//# sourceURL="+(pa.call(M,"sourceURL")?(M.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++sl+"]")+`
`;w.replace(qn,function(Gi,Fa,Wa,bf,mc,xf){return Wa||(Wa=bf),rn+=w.slice(Fr,xf).replace(Ar,Lu),Fa&&(Ut=!0,rn+=`' +
__e(`+Fa+`) +
'`),mc&&(ir=!0,rn+=`';
`+mc+`;
__p += '`),Wa&&(rn+=`' +
((__t = (`+Wa+`)) == null ? '' : __t) +
'`),Fr=xf+Gi.length,Gi}),rn+=`';
`;var qi=pa.call(M,"variable")&&M.variable;if(!qi)rn=`with (obj) {
`+rn+`
}
`;else if(Le.test(qi))throw new hi(s);rn=(ir?rn.replace(Lr,""):rn).replace(ur,"$1").replace(hn,"$1;"),rn="function("+(qi||"obj")+`) {
`+(qi?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ut?", __e = _.escape":"")+(ir?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+rn+`return __p
}`;var Ea=g3(function(){return Wi(at,Ei+"return "+rn).apply(r,It)});if(Ea.source=rn,vl(Ea))throw Ea;return Ea}function kq(w){return ga(w).toLowerCase()}function Iq(w){return ga(w).toUpperCase()}function Mq(w,M,Q){if(w=ga(w),w&&(Q||M===r))return ps(w);if(!w||!(M=Os(M)))return w;var de=ds(w),qe=ds(M),at=Js(de,qe),It=Ac(de,qe)+1;return Ra(de,at,It).join("")}function Oq(w,M,Q){if(w=ga(w),w&&(Q||M===r))return w.slice(0,fu(w)+1);if(!w||!(M=Os(M)))return w;var de=ds(w),qe=Ac(de,ds(M))+1;return Ra(de,0,qe).join("")}function Rq(w,M,Q){if(w=ga(w),w&&(Q||M===r))return w.replace(Et,"");if(!w||!(M=Os(M)))return w;var de=ds(w),qe=Js(de,ds(M));return Ra(de,qe).join("")}function Dq(w,M){var Q=ke,de=Pe;if(Ki(M)){var qe="separator"in M?M.separator:qe;Q="length"in M?Vi(M.length):Q,de="omission"in M?Os(M.omission):de}w=ga(w);var at=w.length;if(Ml(w)){var It=ds(w);at=It.length}if(Q>=at)return w;var Ut=Q-As(de);if(Ut<1)return de;var ir=It?Ra(It,0,Ut).join(""):w.slice(0,Ut);if(qe===r)return ir+de;if(It&&(Ut+=ir.length-Ut),ep(qe)){if(w.slice(Ut).search(qe)){var Fr,jr=ir;for(qe.global||(qe=Zi(qe.source,ga(ct.exec(qe))+"g")),qe.lastIndex=0;Fr=qe.exec(jr);)var rn=Fr.index;ir=ir.slice(0,rn===r?Ut:rn)}}else if(w.indexOf(Os(qe),Ut)!=Ut){var qn=ir.lastIndexOf(qe);qn>-1&&(ir=ir.slice(0,qn))}return ir+de}function zq(w){return w=ga(w),w&&fi.test(w)?w.replace(ti,Fu):w}var Lq=Ip(function(w,M,Q){return w+(Q?" ":"")+M.toUpperCase()}),kC=yv("toUpperCase");function m3(w,M,Q){return w=ga(w),M=Q?r:M,M===r?$u(w)?Uu(w):vn(w):w.match(M)||[]}var g3=ta(function(w,M){try{return Cr(w,r,M)}catch(Q){return vl(Q)?Q:new hi(Q)}}),$q=lf(function(w,M){return Yr(M,function(Q){Q=nu(Q),Pr(w,Q,ot(w[Q],w))}),w});function Nq(w){var M=w==null?0:w.length,Q=Ai();return w=M?yn(w,function(de){if(typeof de[1]!="function")throw new to(a);return[Q(de[0]),de[1]]}):[],ta(function(de){for(var qe=-1;++qe<M;){var at=w[qe];if(Cr(at[0],this,de))return Cr(at[1],this,de)}})}function Bq(w){return Ln(Sn(w,A))}function IC(w){return function(){return w}}function Fq(w,M){return w==null||w!==w?M:w}var Uq=Mp(),jq=Mp(!0);function Nc(w){return w}function MC(w){return qo(typeof w=="function"?w:Sn(w,A))}function Vq(w){return Jo(Sn(w,A))}function qq(w,M){return _s(w,Sn(M,A))}var Gq=ta(function(w,M){return function(Q){return Jl(Q,w,M)}}),Hq=ta(function(w,M){return function(Q){return Jl(w,Q,M)}});function OC(w,M,Q){var de=wl(M),qe=yo(M,de);Q==null&&!(Ki(M)&&(qe.length||!de.length))&&(Q=M,M=w,w=this,qe=yo(M,wl(M)));var at=!(Ki(Q)&&"chain"in Q)||!!Q.chain,It=as(w);return Yr(qe,function(Ut){var ir=M[Ut];w[Ut]=ir,It&&(w.prototype[Ut]=function(){var Fr=this.__chain__;if(at||Fr){var jr=w(this.__wrapped__),rn=jr.__actions__=$l(this.__actions__);return rn.push({func:ir,args:arguments,thisArg:w}),jr.__chain__=Fr,jr}return ir.apply(w,Cn([this.value()],arguments))})}),w}function Wq(){return ze._===this&&(ze._=Eo),this}function RC(){}function Zq(w){return w=Vi(w),ta(function(M){return ym(M,w)})}var Xq=Lg(yn),Kq=Lg(On),Yq=Lg(ni);function y3(w){return fc(w)?wo(nu(w)):cv(w)}function Jq(w){return function(M){return w==null?r:_a(w,M)}}var Qq=Ng(),eG=Ng(!0);function DC(){return[]}function zC(){return!1}function tG(){return{}}function rG(){return""}function nG(){return!0}function iG(w,M){if(w=Vi(w),w<1||w>St)return[];var Q=Ge,de=vi(w,Ge);M=Ai(M),w-=Ge;for(var qe=wi(de,M);++Q<w;)M(Q);return qe}function aG(w){return Kn(w)?yn(w,nu):xl(w)?[w]:$l(rh(ga(w)))}function oG(w){var M=++pn;return ga(w)+M}var sG=Sm(function(w,M){return w+M},0),lG=Bg("ceil"),uG=Sm(function(w,M){return w/M},1),cG=Bg("floor");function fG(w){return w&&w.length?ci(w,Nc,fa):r}function hG(w,M){return w&&w.length?ci(w,Ai(M,2),fa):r}function pG(w){return xa(w,Nc)}function dG(w,M){return xa(w,Ai(M,2))}function mG(w){return w&&w.length?ci(w,Nc,hd):r}function gG(w,M){return w&&w.length?ci(w,Ai(M,2),hd):r}var yG=Sm(function(w,M){return w*M},1),vG=Bg("round"),_G=Sm(function(w,M){return w-M},0);function bG(w){return w&&w.length?eo(w,Nc):0}function xG(w,M){return w&&w.length?eo(w,Ai(M,2)):0}return q.after=De,q.ary=Be,q.assign=bC,q.assignIn=rp,q.assignInWith=Fm,q.assignWith=A1,q.at=qv,q.before=rt,q.bind=ot,q.bindAll=$q,q.bindKey=Pt,q.castArray=Jn,q.chain=yl,q.chunk=Hh,q.compact=Cd,q.concat=Pd,q.cond=Nq,q.conforms=Bq,q.constant=IC,q.countBy=iu,q.create=hh,q.curry=kt,q.curryRight=At,q.debounce=$t,q.defaults=Gv,q.defaultsDeep=ey,q.defer=sr,q.delay=Wt,q.difference=Tv,q.differenceBy=Av,q.differenceWith=kv,q.drop=Iv,q.dropRight=Wg,q.dropRightWhile=Td,q.dropWhile=Im,q.fill=$p,q.filter=h,q.flatMap=I,q.flatMapDeep=V,q.flatMapDepth=Z,q.flatten=nh,q.flattenDeep=pf,q.flattenDepth=Mv,q.flip=zr,q.flow=Uq,q.flowRight=jq,q.fromPairs=ih,q.functions=M1,q.functionsIn=O1,q.groupBy=_e,q.initial=Zg,q.intersection=Om,q.intersectionBy=Ov,q.intersectionWith=Rv,q.invert=Xv,q.invertBy=D1,q.invokeMap=Me,q.iteratee=MC,q.keyBy=Ve,q.keys=wl,q.keysIn=Su,q.map=f,q.mapKeys=Nd,q.mapValues=Um,q.matches=Vq,q.matchesProperty=qq,q.memoize=Zr,q.merge=jm,q.mergeWith=Bd,q.method=Gq,q.methodOf=Hq,q.mixin=OC,q.negate=Br,q.nthArg=Zq,q.omit=Vm,q.omitBy=z1,q.once=Nr,q.orderBy=u,q.over=Xq,q.overArgs=Rr,q.overEvery=Kq,q.overSome=Yq,q.partial=Ur,q.partialRight=Vr,q.partition=p,q.pick=L1,q.pickBy=ib,q.property=y3,q.propertyOf=Jq,q.pull=Rm,q.pullAll=Id,q.pullAllBy=df,q.pullAllWith=oh,q.pullAt=Da,q.range=Qq,q.rangeRight=eG,q.rearg=Ir,q.reject=D,q.remove=tb,q.rest=In,q.reverse=Md,q.sampleSize=J,q.set=ab,q.setWith=ob,q.shuffle=ie,q.slice=Np,q.sortBy=xe,q.sortedUniq=$v,q.sortedUniqBy=Yg,q.split=G1,q.spread=mn,q.tail=Nv,q.take=Bv,q.takeRight=Fv,q.takeRightWhile=Zh,q.takeWhile=mf,q.tap=Rd,q.throttle=oi,q.thru=uh,q.toArray=rl,q.toPairs=dh,q.toPairsIn=sb,q.toPath=aG,q.toPlainObject=Wu,q.transform=lb,q.unary=Ii,q.union=Jg,q.unionBy=lh,q.unionWith=Dm,q.uniq=lo,q.uniqBy=ro,q.uniqWith=zm,q.unset=ub,q.unzip=Od,q.unzipWith=Fp,q.update=N1,q.updateWith=cb,q.values=Fd,q.valuesIn=B1,q.without=Lm,q.words=m3,q.wrap=Ni,q.xor=Uv,q.xorBy=Qg,q.xorWith=Xh,q.zip=Kh,q.zipObject=jv,q.zipObjectDeep=Lo,q.zipWith=uo,q.entries=dh,q.entriesIn=sb,q.extend=rp,q.extendWith=Fm,OC(q,q),q.add=sG,q.attempt=g3,q.camelCase=U1,q.capitalize=ny,q.ceil=lG,q.clamp=fb,q.clone=Xi,q.cloneDeep=si,q.cloneDeepWith=wa,q.cloneWith=Mi,q.conformsTo=Sa,q.deburr=j1,q.defaultTo=Fq,q.divide=uG,q.endsWith=V1,q.eq=Si,q.escape=xC,q.escapeRegExp=wC,q.every=o,q.find=m,q.findIndex=Ad,q.findKey=Hv,q.findLast=E,q.findLastIndex=kd,q.findLastKey=Wv,q.floor=cG,q.forEach=ne,q.forEachRight=ce,q.forIn=nb,q.forInRight=k1,q.forOwn=ty,q.forOwnRight=I1,q.get=Zv,q.gt=da,q.gte=ha,q.has=R1,q.hasIn=au,q.head=ah,q.identity=Nc,q.includes=Se,q.indexOf=Mm,q.inRange=F1,q.invoke=ph,q.isArguments=li,q.isArray=Kn,q.isArrayBuffer=no,q.isArrayLike=ba,q.isArrayLikeObject=di,q.isBoolean=Ta,q.isBuffer=ma,q.isDate=Bi,q.isElement=xs,q.isEmpty=Ho,q.isEqual=Po,q.isEqualWith=tl,q.isError=vl,q.isFinite=_l,q.isFunction=as,q.isInteger=bl,q.isLength=Ds,q.isMap=pc,q.isMatch=yf,q.isMatchWith=ch,q.isNaN=Up,q.isNative=Hu,q.isNil=Jh,q.isNull=jp,q.isNumber=Qh,q.isObject=Ki,q.isObjectLike=za,q.isPlainObject=$c,q.isRegExp=ep,q.isSafeInteger=zd,q.isSet=Ld,q.isString=vf,q.isSymbol=xl,q.isTypedArray=dc,q.isUndefined=$d,q.isWeakMap=tp,q.isWeakSet=Bl,q.join=Dv,q.kebabCase=SC,q.last=xu,q.lastIndexOf=zv,q.lowerCase=EC,q.lowerFirst=CC,q.lt=_f,q.lte=Bm,q.max=fG,q.maxBy=hG,q.mean=pG,q.meanBy=dG,q.min=mG,q.minBy=gG,q.stubArray=DC,q.stubFalse=zC,q.stubObject=tG,q.stubString=rG,q.stubTrue=nG,q.multiply=yG,q.nth=Wh,q.noConflict=Wq,q.noop=RC,q.now=Re,q.pad=PC,q.padEnd=TC,q.padStart=AC,q.parseInt=mh,q.random=ry,q.reduce=x,q.reduceRight=T,q.repeat=Kv,q.replace=q1,q.result=$1,q.round=vG,q.runInContext=jt,q.sample=j,q.size=le,q.snakeCase=iy,q.some=me,q.sortedIndex=Bp,q.sortedIndexBy=Xg,q.sortedIndexOf=Lv,q.sortedLastIndex=Kg,q.sortedLastIndexBy=rb,q.sortedLastIndexOf=sh,q.startCase=Pq,q.startsWith=Tq,q.subtract=_G,q.sum=bG,q.sumBy=xG,q.template=Aq,q.times=iG,q.toFinite=ws,q.toInteger=Vi,q.toLength=fh,q.toLower=kq,q.toNumber=wu,q.toSafeInteger=Wo,q.toString=ga,q.toUpper=Iq,q.trim=Mq,q.trimEnd=Oq,q.trimStart=Rq,q.truncate=Dq,q.unescape=zq,q.uniqueId=oG,q.upperCase=Lq,q.upperFirst=kC,q.each=ne,q.eachRight=ce,q.first=ah,OC(q,function(){var w={};return va(q,function(M,Q){pa.call(q.prototype,Q)||(w[Q]=M)}),w}(),{chain:!1}),q.VERSION=n,Yr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(w){q[w].placeholder=q}),Yr(["drop","take"],function(w,M){Te.prototype[w]=function(Q){Q=Q===r?1:yi(Vi(Q),0);var de=this.__filtered__&&!M?new Te(this):this.clone();return de.__filtered__?de.__takeCount__=vi(Q,de.__takeCount__):de.__views__.push({size:vi(Q,Ge),type:w+(de.__dir__<0?"Right":"")}),de},Te.prototype[w+"Right"]=function(Q){return this.reverse()[w](Q).reverse()}}),Yr(["filter","map","takeWhile"],function(w,M){var Q=M+1,de=Q==Ne||Q==it;Te.prototype[w]=function(qe){var at=this.clone();return at.__iteratees__.push({iteratee:Ai(qe,3),type:Q}),at.__filtered__=at.__filtered__||de,at}}),Yr(["head","last"],function(w,M){var Q="take"+(M?"Right":"");Te.prototype[w]=function(){return this[Q](1).value()[0]}}),Yr(["initial","tail"],function(w,M){var Q="drop"+(M?"":"Right");Te.prototype[w]=function(){return this.__filtered__?new Te(this):this[Q](1)}}),Te.prototype.compact=function(){return this.filter(Nc)},Te.prototype.find=function(w){return this.filter(w).head()},Te.prototype.findLast=function(w){return this.reverse().find(w)},Te.prototype.invokeMap=ta(function(w,M){return typeof w=="function"?new Te(this):this.map(function(Q){return Jl(Q,w,M)})}),Te.prototype.reject=function(w){return this.filter(Br(Ai(w)))},Te.prototype.slice=function(w,M){w=Vi(w);var Q=this;return Q.__filtered__&&(w>0||M<0)?new Te(Q):(w<0?Q=Q.takeRight(-w):w&&(Q=Q.drop(w)),M!==r&&(M=Vi(M),Q=M<0?Q.dropRight(-M):Q.take(M-w)),Q)},Te.prototype.takeRightWhile=function(w){return this.reverse().takeWhile(w).reverse()},Te.prototype.toArray=function(){return this.take(Ge)},va(Te.prototype,function(w,M){var Q=/^(?:filter|find|map|reject)|While$/.test(M),de=/^(?:head|last)$/.test(M),qe=q[de?"take"+(M=="last"?"Right":""):M],at=de||/^find/.test(M);qe&&(q.prototype[M]=function(){var It=this.__wrapped__,Ut=de?[1]:arguments,ir=It instanceof Te,Fr=Ut[0],jr=ir||Kn(It),rn=function(Fa){var Wa=qe.apply(q,Cn([Fa],Ut));return de&&qn?Wa[0]:Wa};jr&&Q&&typeof Fr=="function"&&Fr.length!=1&&(ir=jr=!1);var qn=this.__chain__,Ei=!!this.__actions__.length,qi=at&&!qn,Ea=ir&&!Ei;if(!at&&jr){It=Ea?It:new Te(this);var Gi=w.apply(It,Ut);return Gi.__actions__.push({func:uh,args:[rn],thisArg:r}),new be(Gi,qn)}return qi&&Ea?w.apply(this,Ut):(Gi=this.thru(rn),qi?de?Gi.value()[0]:Gi.value():Gi)})}),Yr(["pop","push","shift","sort","splice","unshift"],function(w){var M=el[w],Q=/^(?:push|sort|unshift)$/.test(w)?"tap":"thru",de=/^(?:pop|shift)$/.test(w);q.prototype[w]=function(){var qe=arguments;if(de&&!this.__chain__){var at=this.value();return M.apply(Kn(at)?at:[],qe)}return this[Q](function(It){return M.apply(Kn(It)?It:[],qe)})}}),va(Te.prototype,function(w,M){var Q=q[M];if(Q){var de=Q.name+"";pa.call(ua,de)||(ua[de]=[]),ua[de].push({name:M,func:Q})}}),ua[Nl(r,G).name]=[{name:"wrapper",func:r}],Te.prototype.clone=Ue,Te.prototype.reverse=Ke,Te.prototype.value=yt,q.prototype.at=$m,q.prototype.chain=Yh,q.prototype.commit=Lc,q.prototype.next=Nm,q.prototype.plant=Vv,q.prototype.reverse=Go,q.prototype.toJSON=q.prototype.valueOf=q.prototype.value=gf,q.prototype.first=q.prototype.head,hu&&(q.prototype[hu]=Dd),q},cl=ms();tt?((tt.exports=cl)._=cl,We._=cl):ze._=cl}).call(_S)})(yS,yS.exports);var Fze=yS.exports;const Uze=Xs(Fze);async function jze(e,t){const r=["dama",e,"etlContexts","byEtlContextId",t];return await BN.get(r),Uze.get(BN.cache,[...r,"value"])}function Vze(){const e=Yc(),[t,r]=Ee.useState(void 0),n=Ps(Ks),{etlContextId:i}=rc();if(Ee.useEffect(()=>{(async()=>{const K=await jze(n,i);r(K)})()},[n,i]),t===void 0)return ae("div",{children:"Requesting ETL Context Events"});if(t===null)return Ft("div",{children:["No ETL Context with ID ",i]});const{meta:{parent_context_id:l,source_id:a,etl_status:s,_created_timestamp:d,_modified_timestamp:v},events:S}=t,A=new Date(d).toLocaleString(),P=new Date(v).toLocaleString(),L=ae("table",{className:"w-1/2",style:{margin:"40px auto",textAlign:"center",border:"1px solid",borderColor:"back"},children:Ft("tbody",{style:{border:"1px solid"},children:[Ft("tr",{className:"border-b",children:[ae("td",{className:"py-4 text-left",style:{paddingLeft:"15px"},children:"Database"}),ae("td",{className:"text-center  p-2",children:n})]}),Ft("tr",{className:"border-b",children:[ae("td",{className:"py-4 text-left",style:{paddingLeft:"15px"},children:"ETL Context ID"}),ae("td",{className:"text-center  p-2",children:i})]}),Ft("tr",{className:"border-b",children:[ae("td",{className:"py-4 text-left",style:{paddingLeft:"15px"},children:"Parent Context ID"}),ae("td",{className:"text-center  p-2",children:l})]}),Ft("tr",{className:"border-b",children:[ae("td",{className:"py-4 text-left",style:{paddingLeft:"15px"},children:"Source ID"}),ae("td",{className:"text-center  p-2",children:ae("span",{style:{cursor:"pointer",color:"blue"},onClick:()=>{e(`/datasources/source/${a}`)},children:a})})]}),Ft("tr",{className:"border-b",children:[ae("td",{className:"py-4 text-left",style:{paddingLeft:"15px"},children:"ETL Status"}),ae("td",{className:"text-center  p-2",children:s})]}),Ft("tr",{className:"border-b",children:[ae("td",{className:"py-4 text-left",style:{paddingLeft:"15px"},children:"Created Timestamp"}),ae("td",{className:"text-center  p-2",children:A})]}),Ft("tr",{className:"border-b",children:[ae("td",{className:"py-4 text-left",style:{paddingLeft:"15px"},children:"Modified Timestamp"}),ae("td",{className:"text-center  p-2",children:P})]})]})}),F=S.map((K,re)=>ae("div",{style:{padding:"10px"},children:ae("pre",{className:"bg-gray-800 text-gray-100",children:JSON.stringify(K,null,3)})},re));return Ft("div",{children:[ae("div",{margin:"50px",padding:"50px",children:ae("div",{style:{display:"inline-block",width:"100%",marginTop:"20px",textAlign:"center",paddingTop:"20px",fontSize:"35px"},children:"Metadata"})}),L,Ft("div",{margin:"50px",padding:"50px",children:[ae("div",{style:{display:"inline-block",width:"100%",marginTop:"20px",textAlign:"center",paddingTop:"20px",fontSize:"35px"},children:"Events"}),F]})]})}const qze=(e="/datasources",t="pan")=>{const r=localStorage.getItem("redux.data_manager.pgEnv")||t;XV(r);const n=ae(p5e,{baseUrl:e}),i=()=>ae(m5e,{baseUrl:e}),l=()=>ae(Mze,{baseUrl:e}),a=()=>ae(Oze,{baseUrl:e}),s=()=>ae($ze,{baseUrl:e});return[{name:"Data Sources",path:`${e}/`,exact:!0,auth:!1,mainNav:!1,title:n,sideNav:{color:"dark",size:"micro"},component:i},{name:"Data Sources",path:`${e}/cat/:cat1`,exact:!0,auth:!1,mainNav:!1,title:n,sideNav:{color:"dark",size:"micro"},component:i},{name:"Data Sources",path:`${e}/cat/:cat1/:cat2`,exact:!0,auth:!1,mainNav:!1,title:n,sideNav:{color:"dark",size:"micro"},component:i},{name:"View Source",path:`${e}/source/:sourceId`,exact:!0,auth:!1,mainNav:!1,title:n,sideNav:{color:"dark",size:"micro"},component:Jp.withAuth(l)},{name:"View Source",path:`${e}/source/:sourceId/:page`,exact:!0,auth:!1,mainNav:!1,title:n,sideNav:{color:"dark",size:"micro"},component:Jp.withAuth(l)},{name:"View Source",path:`${e}/source/:sourceId/:page/:viewId`,exact:!0,auth:!1,mainNav:!1,title:n,sideNav:{color:"dark",size:"micro"},component:Jp.withAuth(l)},{name:"View Source",path:`${e}/source/:sourceId/:page/:viewId/:vPage`,exact:!0,auth:!1,mainNav:!1,title:n,sideNav:{color:"dark",size:"micro"},component:Jp.withAuth(l)},{name:"Create Source",path:`${e}/create/source`,exact:!0,auth:!0,mainNav:!1,title:n,sideNav:{color:"dark",size:"micro"},component:a},{name:"Delete Source",path:`${e}/delete/source/:sourceId`,exact:!0,auth:!0,mainNav:!1,title:n,sideNav:{color:"dark",size:"micro"},component:s},{name:"Settings",path:`${e}/settings`,exact:!0,auth:!0,mainNav:!1,title:n,sideNav:{color:"dark",size:"micro"},component:Nze},{name:"ETL Context View",path:"/etl-context/:etlContextId",exact:!0,auth:!1,mainNav:!1,title:n,sideNav:{color:"dark",size:"micro"},component:Vze}]},Gze=()=>ae("div",{className:"max-w-4xl mx-auto bg-white p-16",children:"Docs"}),Hze=[{name:"Documentation",path:"/docs",exact:!0,auth:!1,mainNav:!1,sideNav:{color:"dark",size:"none"},component:Gze}],Wze=[Tfe,...qze("","tig_dama_dev"),...Hze,kfe];var Zze=Object.defineProperty,Xze=(e,t,r)=>t in e?Zze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,KT=(e,t,r)=>(Xze(e,typeof t!="symbol"?t+"":t,r),r);let Kze=class{constructor(){KT(this,"current",this.detect()),KT(this,"handoffState","pending"),KT(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Ty=new Kze,Th=(e,t)=>{Ty.isServer?Fe.useEffect(e,t):Fe.useLayoutEffect(e,t)};function im(e){let t=Fe.useRef(e);return Th(()=>{t.current=e},[e]),t}function dq(e,t){let[r,n]=Fe.useState(e),i=im(e);return Th(()=>n(i.current),[i,n,...t]),r}function Yze(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function bg(){let e=[],t={addEventListener(r,n,i,l){return r.addEventListener(n,i,l),t.add(()=>r.removeEventListener(n,i,l))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return t.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return t.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return Yze(()=>{n.current&&r[0]()}),t.add(()=>{n.current=!1})},style(r,n,i){let l=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:i}),this.add(()=>{Object.assign(r.style,{[n]:l})})},group(r){let n=bg();return r(n),this.add(()=>n.dispose())},add(r){return e.push(r),()=>{let n=e.indexOf(r);if(n>=0)for(let i of e.splice(n,1))i()}},dispose(){for(let r of e.splice(0))r()}};return t}function _0(){let[e]=Fe.useState(bg);return Fe.useEffect(()=>()=>e.dispose(),[e]),e}let To=function(e){let t=im(e);return Ee.useCallback((...r)=>t.current(...r),[t])};function l3(){let[e,t]=Fe.useState(Ty.isHandoffComplete);return e&&Ty.isHandoffComplete===!1&&t(!1),Fe.useEffect(()=>{e!==!0&&t(!0)},[e]),Fe.useEffect(()=>Ty.handoff(),[]),e}var FN;let gC=(FN=Ee.useId)!=null?FN:function(){let e=l3(),[t,r]=Ee.useState(e?()=>Ty.nextId():null);return Th(()=>{t===null&&r(Ty.nextId())},[t]),t!=null?""+t:void 0};function Cu(e,t,...r){if(e in t){let i=t[e];return typeof i=="function"?i(...r):i}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Cu),n}function mq(e){return Ty.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let UN=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Jze=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Jze||{}),Qze=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Qze||{}),eLe=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(eLe||{}),u3=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(u3||{});function gq(e,t=0){var r;return e===((r=mq(e))==null?void 0:r.body)?!1:Cu(t,{[0](){return e.matches(UN)},[1](){let n=e;for(;n!==null;){if(n.matches(UN))return!0;n=n.parentElement}return!1}})}var tLe=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(tLe||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function rLe(e,t=r=>r){return e.slice().sort((r,n)=>{let i=t(r),l=t(n);if(i===null||l===null)return 0;let a=i.compareDocumentPosition(l);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function YT(e,t,r){let n=im(t);Fe.useEffect(()=>{function i(l){n.current(l)}return document.addEventListener(e,i,r),()=>document.removeEventListener(e,i,r)},[e,r])}function nLe(e,t,r=!0){let n=Fe.useRef(!1);Fe.useEffect(()=>{requestAnimationFrame(()=>{n.current=r})},[r]);function i(a,s){if(!n.current||a.defaultPrevented)return;let d=function S(A){return typeof A=="function"?S(A()):Array.isArray(A)||A instanceof Set?A:[A]}(e),v=s(a);if(v!==null&&v.getRootNode().contains(v)){for(let S of d){if(S===null)continue;let A=S instanceof HTMLElement?S:S.current;if(A!=null&&A.contains(v)||a.composed&&a.composedPath().includes(A))return}return!gq(v,u3.Loose)&&v.tabIndex!==-1&&a.preventDefault(),t(a,v)}}let l=Fe.useRef(null);YT("mousedown",a=>{var s,d;n.current&&(l.current=((d=(s=a.composedPath)==null?void 0:s.call(a))==null?void 0:d[0])||a.target)},!0),YT("click",a=>{l.current&&(i(a,()=>l.current),l.current=null)},!0),YT("blur",a=>i(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function jN(e){var t;if(e.type)return e.type;let r=(t=e.as)!=null?t:"button";if(typeof r=="string"&&r.toLowerCase()==="button")return"button"}function iLe(e,t){let[r,n]=Fe.useState(()=>jN(e));return Th(()=>{n(jN(e))},[e.type,e.as]),Th(()=>{r||t.current&&t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&n("button")},[r,t]),r}let aLe=Symbol();function uv(...e){let t=Fe.useRef(e);Fe.useEffect(()=>{t.current=e},[e]);let r=To(n=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(n):i.current=n)});return e.every(n=>n==null||(n==null?void 0:n[aLe]))?void 0:r}function oLe(e){throw new Error("Unexpected object: "+e)}var Gc=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Gc||{});function sLe(e,t){let r=t.resolveItems();if(r.length<=0)return null;let n=t.resolveActiveIndex(),i=n??-1,l=(()=>{switch(e.focus){case 0:return r.findIndex(a=>!t.resolveDisabled(a));case 1:{let a=r.slice().reverse().findIndex((s,d,v)=>i!==-1&&v.length-d-1>=i?!1:!t.resolveDisabled(s));return a===-1?a:r.length-1-a}case 2:return r.findIndex((a,s)=>s<=i?!1:!t.resolveDisabled(a));case 3:{let a=r.slice().reverse().findIndex(s=>!t.resolveDisabled(s));return a===-1?a:r.length-1-a}case 4:return r.findIndex(a=>t.resolveId(a)===e.id);case 5:return null;default:oLe(e)}})();return l===-1?n:l}function rI(...e){return e.filter(Boolean).join(" ")}var vS=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(vS||{}),em=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(em||{});function Mg({ourProps:e,theirProps:t,slot:r,defaultTag:n,features:i,visible:l=!0,name:a}){let s=yq(t,e);if(l)return kw(s,r,n,a);let d=i??0;if(d&2){let{static:v=!1,...S}=s;if(v)return kw(S,r,n,a)}if(d&1){let{unmount:v=!0,...S}=s;return Cu(v?0:1,{[0](){return null},[1](){return kw({...S,hidden:!0,style:{display:"none"}},r,n,a)}})}return kw(s,r,n,a)}function kw(e,t={},r,n){let{as:i=r,children:l,refName:a="ref",...s}=JT(e,["unmount","static"]),d=e.ref!==void 0?{[a]:e.ref}:{},v=typeof l=="function"?l(t):l;"className"in s&&s.className&&typeof s.className=="function"&&(s.className=s.className(t));let S={};if(t){let A=!1,P=[];for(let[L,F]of Object.entries(t))typeof F=="boolean"&&(A=!0),F===!0&&P.push(L);A&&(S["data-headlessui-state"]=P.join(" "))}if(i===Fe.Fragment&&Object.keys(nI(s)).length>0){if(!Fe.isValidElement(v)||Array.isArray(v)&&v.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(s).map(F=>`  - ${F}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(F=>`  - ${F}`).join(`
`)].join(`
`));let A=v.props,P=typeof(A==null?void 0:A.className)=="function"?(...F)=>rI(A==null?void 0:A.className(...F),s.className):rI(A==null?void 0:A.className,s.className),L=P?{className:P}:{};return Fe.cloneElement(v,Object.assign({},yq(v.props,nI(JT(s,["ref"]))),S,d,lLe(v.ref,d.ref),L))}return Fe.createElement(i,Object.assign({},JT(s,["ref"]),i!==Fe.Fragment&&d,i!==Fe.Fragment&&S),v)}function lLe(...e){return{ref:e.every(t=>t==null)?void 0:t=>{for(let r of e)r!=null&&(typeof r=="function"?r(t):r.current=t)}}}function yq(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},r={};for(let n of e)for(let i in n)i.startsWith("on")&&typeof n[i]=="function"?(r[i]!=null||(r[i]=[]),r[i].push(n[i])):t[i]=n[i];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(r).map(n=>[n,void 0])));for(let n in r)Object.assign(t,{[n](i,...l){let a=r[n];for(let s of a){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;s(i,...l)}}});return t}function gm(e){var t;return Object.assign(Fe.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function nI(e){let t=Object.assign({},e);for(let r in t)t[r]===void 0&&delete t[r];return t}function JT(e,t=[]){let r=Object.assign({},e);for(let n of t)n in r&&delete r[n];return r}function uLe(e){let t=e.parentElement,r=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(r=t),t=t.parentElement;let n=(t==null?void 0:t.getAttribute("disabled"))==="";return n&&cLe(r)?!1:n}function cLe(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}function vq(e={},t=null,r=[]){for(let[n,i]of Object.entries(e))bq(r,_q(t,n),i);return r}function _q(e,t){return e?e+"["+t+"]":t}function bq(e,t,r){if(Array.isArray(r))for(let[n,i]of r.entries())bq(e,_q(t,n.toString()),i);else r instanceof Date?e.push([t,r.toISOString()]):typeof r=="boolean"?e.push([t,r?"1":"0"]):typeof r=="string"?e.push([t,r]):typeof r=="number"?e.push([t,`${r}`]):r==null?e.push([t,""]):vq(r,t,e)}let fLe="div";var xq=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(xq||{});function hLe(e,t){let{features:r=1,...n}=e,i={ref:t,"aria-hidden":(r&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Mg({ourProps:i,theirProps:n,slot:{},defaultTag:fLe,name:"Hidden"})}let pLe=gm(hLe),c3=Fe.createContext(null);c3.displayName="OpenClosedContext";var Tf=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Tf||{});function f3(){return Fe.useContext(c3)}function wq({value:e,children:t}){return Ee.createElement(c3.Provider,{value:e},t)}var ou=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(ou||{});function dLe(e,t,r){let[n,i]=Fe.useState(r),l=e!==void 0,a=Fe.useRef(l),s=Fe.useRef(!1),d=Fe.useRef(!1);return l&&!a.current&&!s.current?(s.current=!0,a.current=l,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!l&&a.current&&!d.current&&(d.current=!0,a.current=l,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[l?e:n,To(v=>(l||i(v),t==null?void 0:t(v)))]}function VN(e){return[e.screenX,e.screenY]}function mLe(){let e=Fe.useRef([-1,-1]);return{wasMoved(t){let r=VN(t);return e.current[0]===r[0]&&e.current[1]===r[1]?!1:(e.current=r,!0)},update(t){e.current=VN(t)}}}function h3(){let e=Fe.useRef(!1);return Th(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var gLe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(gLe||{}),yLe=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(yLe||{}),vLe=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(vLe||{}),_Le=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.RegisterLabel=7]="RegisterLabel",e))(_Le||{});function QT(e,t=r=>r){let r=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,n=rLe(t(e.options.slice()),l=>l.dataRef.current.domRef.current),i=r?n.indexOf(r):null;return i===-1&&(i=null),{options:n,activeOptionIndex:i}}let bLe={[1](e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},[0](e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let t=e.activeOptionIndex,{isSelected:r}=e.dataRef.current,n=e.options.findIndex(i=>r(i.dataRef.current.value));return n!==-1&&(t=n),{...e,listboxState:0,activeOptionIndex:t}},[2](e,t){var r;if(e.dataRef.current.disabled||e.listboxState===1)return e;let n=QT(e),i=sLe(t,{resolveItems:()=>n.options,resolveActiveIndex:()=>n.activeOptionIndex,resolveId:l=>l.id,resolveDisabled:l=>l.dataRef.current.disabled});return{...e,...n,searchQuery:"",activeOptionIndex:i,activationTrigger:(r=t.trigger)!=null?r:1}},[3]:(e,t)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let r=e.searchQuery!==""?0:1,n=e.searchQuery+t.value.toLowerCase(),i=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+r).concat(e.options.slice(0,e.activeOptionIndex+r)):e.options).find(a=>{var s;return!a.dataRef.current.disabled&&((s=a.dataRef.current.textValue)==null?void 0:s.startsWith(n))}),l=i?e.options.indexOf(i):-1;return l===-1||l===e.activeOptionIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeOptionIndex:l,activationTrigger:1}},[4](e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},[5]:(e,t)=>{let r={id:t.id,dataRef:t.dataRef},n=QT(e,i=>[...i,r]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(t.dataRef.current.value)&&(n.activeOptionIndex=n.options.indexOf(r)),{...e,...n}},[6]:(e,t)=>{let r=QT(e,n=>{let i=n.findIndex(l=>l.id===t.id);return i!==-1&&n.splice(i,1),n});return{...e,...r,activationTrigger:1}},[7]:(e,t)=>({...e,labelId:t.id})},p3=Fe.createContext(null);p3.displayName="ListboxActionsContext";function P1(e){let t=Fe.useContext(p3);if(t===null){let r=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,P1),r}return t}let d3=Fe.createContext(null);d3.displayName="ListboxDataContext";function T1(e){let t=Fe.useContext(d3);if(t===null){let r=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,T1),r}return t}function xLe(e,t){return Cu(t.type,bLe,e,t)}let wLe=Fe.Fragment;function SLe(e,t){let{value:r,defaultValue:n,form:i,name:l,onChange:a,by:s=(wr,tr)=>wr===tr,disabled:d=!1,horizontal:v=!1,multiple:S=!1,...A}=e;const P=v?"horizontal":"vertical";let L=uv(t),[F=S?[]:void 0,K]=dLe(r,a,n),[re,G]=Fe.useReducer(xLe,{dataRef:Fe.createRef(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),H=Fe.useRef({static:!1,hold:!1}),B=Fe.useRef(null),$=Fe.useRef(null),N=Fe.useRef(null),z=To(typeof s=="string"?(wr,tr)=>{let br=s;return(wr==null?void 0:wr[br])===(tr==null?void 0:tr[br])}:s),X=Fe.useCallback(wr=>Cu(te.mode,{[1]:()=>F.some(tr=>z(tr,wr)),[0]:()=>z(F,wr)}),[F]),te=Fe.useMemo(()=>({...re,value:F,disabled:d,mode:S?1:0,orientation:P,compare:z,isSelected:X,optionsPropsRef:H,labelRef:B,buttonRef:$,optionsRef:N}),[F,d,S,re]);Th(()=>{re.dataRef.current=te},[te]),nLe([te.buttonRef,te.optionsRef],(wr,tr)=>{var br;G({type:1}),gq(tr,u3.Loose)||(wr.preventDefault(),(br=te.buttonRef.current)==null||br.focus())},te.listboxState===0);let pe=Fe.useMemo(()=>({open:te.listboxState===0,disabled:d,value:F}),[te,d,F]),ke=To(wr=>{let tr=te.options.find(br=>br.id===wr);tr&&Rt(tr.dataRef.current.value)}),Pe=To(()=>{if(te.activeOptionIndex!==null){let{dataRef:wr,id:tr}=te.options[te.activeOptionIndex];Rt(wr.current.value),G({type:2,focus:Gc.Specific,id:tr})}}),ge=To(()=>G({type:0})),Ie=To(()=>G({type:1})),Ne=To((wr,tr,br)=>wr===Gc.Specific?G({type:2,focus:Gc.Specific,id:tr,trigger:br}):G({type:2,focus:wr,trigger:br})),lt=To((wr,tr)=>(G({type:5,id:wr,dataRef:tr}),()=>G({type:6,id:wr}))),it=To(wr=>(G({type:7,id:wr}),()=>G({type:7,id:null}))),Rt=To(wr=>Cu(te.mode,{[0](){return K==null?void 0:K(wr)},[1](){let tr=te.value.slice(),br=tr.findIndex(Bt=>z(Bt,wr));return br===-1?tr.push(wr):tr.splice(br,1),K==null?void 0:K(tr)}})),St=To(wr=>G({type:3,value:wr})),Zt=To(()=>G({type:4})),Kt=Fe.useMemo(()=>({onChange:Rt,registerOption:lt,registerLabel:it,goToOption:Ne,closeListbox:Ie,openListbox:ge,selectActiveOption:Pe,selectOption:ke,search:St,clearSearch:Zt}),[]),Ge={ref:L},Ye=Fe.useRef(null),Dr=_0();return Fe.useEffect(()=>{Ye.current&&n!==void 0&&Dr.addEventListener(Ye.current,"reset",()=>{Rt(n)})},[Ye,Rt]),Ee.createElement(p3.Provider,{value:Kt},Ee.createElement(d3.Provider,{value:te},Ee.createElement(wq,{value:Cu(te.listboxState,{[0]:Tf.Open,[1]:Tf.Closed})},l!=null&&F!=null&&vq({[l]:F}).map(([wr,tr],br)=>Ee.createElement(pLe,{features:xq.Hidden,ref:br===0?Bt=>{var hr;Ye.current=(hr=Bt==null?void 0:Bt.closest("form"))!=null?hr:null}:void 0,...nI({key:wr,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:i,name:wr,value:tr})})),Mg({ourProps:Ge,theirProps:A,slot:pe,defaultTag:wLe,name:"Listbox"}))))}let ELe="button";function CLe(e,t){var r;let n=gC(),{id:i=`headlessui-listbox-button-${n}`,...l}=e,a=T1("Listbox.Button"),s=P1("Listbox.Button"),d=uv(a.buttonRef,t),v=_0(),S=To(re=>{switch(re.key){case ou.Space:case ou.Enter:case ou.ArrowDown:re.preventDefault(),s.openListbox(),v.nextFrame(()=>{a.value||s.goToOption(Gc.First)});break;case ou.ArrowUp:re.preventDefault(),s.openListbox(),v.nextFrame(()=>{a.value||s.goToOption(Gc.Last)});break}}),A=To(re=>{switch(re.key){case ou.Space:re.preventDefault();break}}),P=To(re=>{if(uLe(re.currentTarget))return re.preventDefault();a.listboxState===0?(s.closeListbox(),v.nextFrame(()=>{var G;return(G=a.buttonRef.current)==null?void 0:G.focus({preventScroll:!0})})):(re.preventDefault(),s.openListbox())}),L=dq(()=>{if(a.labelId)return[a.labelId,i].join(" ")},[a.labelId,i]),F=Fe.useMemo(()=>({open:a.listboxState===0,disabled:a.disabled,value:a.value}),[a]),K={ref:d,id:i,type:iLe(e,a.buttonRef),"aria-haspopup":"listbox","aria-controls":(r=a.optionsRef.current)==null?void 0:r.id,"aria-expanded":a.disabled?void 0:a.listboxState===0,"aria-labelledby":L,disabled:a.disabled,onKeyDown:S,onKeyUp:A,onClick:P};return Mg({ourProps:K,theirProps:l,slot:F,defaultTag:ELe,name:"Listbox.Button"})}let PLe="label";function TLe(e,t){let r=gC(),{id:n=`headlessui-listbox-label-${r}`,...i}=e,l=T1("Listbox.Label"),a=P1("Listbox.Label"),s=uv(l.labelRef,t);Th(()=>a.registerLabel(n),[n]);let d=To(()=>{var S;return(S=l.buttonRef.current)==null?void 0:S.focus({preventScroll:!0})}),v=Fe.useMemo(()=>({open:l.listboxState===0,disabled:l.disabled}),[l]);return Mg({ourProps:{ref:s,id:n,onClick:d},theirProps:i,slot:v,defaultTag:PLe,name:"Listbox.Label"})}let ALe="ul",kLe=vS.RenderStrategy|vS.Static;function ILe(e,t){var r;let n=gC(),{id:i=`headlessui-listbox-options-${n}`,...l}=e,a=T1("Listbox.Options"),s=P1("Listbox.Options"),d=uv(a.optionsRef,t),v=_0(),S=_0(),A=f3(),P=(()=>A!==null?(A&Tf.Open)===Tf.Open:a.listboxState===0)();Fe.useEffect(()=>{var G;let H=a.optionsRef.current;H&&a.listboxState===0&&H!==((G=mq(H))==null?void 0:G.activeElement)&&H.focus({preventScroll:!0})},[a.listboxState,a.optionsRef]);let L=To(G=>{switch(S.dispose(),G.key){case ou.Space:if(a.searchQuery!=="")return G.preventDefault(),G.stopPropagation(),s.search(G.key);case ou.Enter:if(G.preventDefault(),G.stopPropagation(),a.activeOptionIndex!==null){let{dataRef:H}=a.options[a.activeOptionIndex];s.onChange(H.current.value)}a.mode===0&&(s.closeListbox(),bg().nextFrame(()=>{var H;return(H=a.buttonRef.current)==null?void 0:H.focus({preventScroll:!0})}));break;case Cu(a.orientation,{vertical:ou.ArrowDown,horizontal:ou.ArrowRight}):return G.preventDefault(),G.stopPropagation(),s.goToOption(Gc.Next);case Cu(a.orientation,{vertical:ou.ArrowUp,horizontal:ou.ArrowLeft}):return G.preventDefault(),G.stopPropagation(),s.goToOption(Gc.Previous);case ou.Home:case ou.PageUp:return G.preventDefault(),G.stopPropagation(),s.goToOption(Gc.First);case ou.End:case ou.PageDown:return G.preventDefault(),G.stopPropagation(),s.goToOption(Gc.Last);case ou.Escape:return G.preventDefault(),G.stopPropagation(),s.closeListbox(),v.nextFrame(()=>{var H;return(H=a.buttonRef.current)==null?void 0:H.focus({preventScroll:!0})});case ou.Tab:G.preventDefault(),G.stopPropagation();break;default:G.key.length===1&&(s.search(G.key),S.setTimeout(()=>s.clearSearch(),350));break}}),F=dq(()=>{var G,H,B;return(B=(G=a.labelRef.current)==null?void 0:G.id)!=null?B:(H=a.buttonRef.current)==null?void 0:H.id},[a.labelRef.current,a.buttonRef.current]),K=Fe.useMemo(()=>({open:a.listboxState===0}),[a]),re={"aria-activedescendant":a.activeOptionIndex===null||(r=a.options[a.activeOptionIndex])==null?void 0:r.id,"aria-multiselectable":a.mode===1?!0:void 0,"aria-labelledby":F,"aria-orientation":a.orientation,id:i,onKeyDown:L,role:"listbox",tabIndex:0,ref:d};return Mg({ourProps:re,theirProps:l,slot:K,defaultTag:ALe,features:kLe,visible:P,name:"Listbox.Options"})}let MLe="li";function OLe(e,t){let r=gC(),{id:n=`headlessui-listbox-option-${r}`,disabled:i=!1,value:l,...a}=e,s=T1("Listbox.Option"),d=P1("Listbox.Option"),v=s.activeOptionIndex!==null?s.options[s.activeOptionIndex].id===n:!1,S=s.isSelected(l),A=Fe.useRef(null),P=im({disabled:i,value:l,domRef:A,get textValue(){var N,z;return(z=(N=A.current)==null?void 0:N.textContent)==null?void 0:z.toLowerCase()}}),L=uv(t,A);Th(()=>{if(s.listboxState!==0||!v||s.activationTrigger===0)return;let N=bg();return N.requestAnimationFrame(()=>{var z,X;(X=(z=A.current)==null?void 0:z.scrollIntoView)==null||X.call(z,{block:"nearest"})}),N.dispose},[A,v,s.listboxState,s.activationTrigger,s.activeOptionIndex]),Th(()=>d.registerOption(n,P),[P,n]);let F=To(N=>{if(i)return N.preventDefault();d.onChange(l),s.mode===0&&(d.closeListbox(),bg().nextFrame(()=>{var z;return(z=s.buttonRef.current)==null?void 0:z.focus({preventScroll:!0})}))}),K=To(()=>{if(i)return d.goToOption(Gc.Nothing);d.goToOption(Gc.Specific,n)}),re=mLe(),G=To(N=>re.update(N)),H=To(N=>{re.wasMoved(N)&&(i||v||d.goToOption(Gc.Specific,n,0))}),B=To(N=>{re.wasMoved(N)&&(i||v&&d.goToOption(Gc.Nothing))}),$=Fe.useMemo(()=>({active:v,selected:S,disabled:i}),[v,S,i]);return Mg({ourProps:{id:n,ref:L,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":S,disabled:void 0,onClick:F,onFocus:K,onPointerEnter:G,onMouseEnter:G,onPointerMove:H,onMouseMove:H,onPointerLeave:B,onMouseLeave:B},theirProps:a,slot:$,defaultTag:MLe,name:"Listbox.Option"})}let RLe=gm(SLe),DLe=gm(CLe),zLe=gm(TLe),LLe=gm(ILe),$Le=gm(OLe),Iw=Object.assign(RLe,{Button:DLe,Label:zLe,Options:LLe,Option:$Le});function NLe(e=0){let[t,r]=Fe.useState(e),n=h3(),i=Fe.useCallback(d=>{n.current&&r(v=>v|d)},[t,n]),l=Fe.useCallback(d=>!!(t&d),[t]),a=Fe.useCallback(d=>{n.current&&r(v=>v&~d)},[r,n]),s=Fe.useCallback(d=>{n.current&&r(v=>v^d)},[r]);return{flags:t,addFlag:i,hasFlag:l,removeFlag:a,toggleFlag:s}}function BLe(e){let t={called:!1};return(...r)=>{if(!t.called)return t.called=!0,e(...r)}}function eA(e,...t){e&&t.length>0&&e.classList.add(...t)}function tA(e,...t){e&&t.length>0&&e.classList.remove(...t)}function FLe(e,t){let r=bg();if(!e)return r.dispose;let{transitionDuration:n,transitionDelay:i}=getComputedStyle(e),[l,a]=[n,i].map(d=>{let[v=0]=d.split(",").filter(Boolean).map(S=>S.includes("ms")?parseFloat(S):parseFloat(S)*1e3).sort((S,A)=>A-S);return v}),s=l+a;if(s!==0){r.group(v=>{v.setTimeout(()=>{t(),v.dispose()},s),v.addEventListener(e,"transitionrun",S=>{S.target===S.currentTarget&&v.dispose()})});let d=r.addEventListener(e,"transitionend",v=>{v.target===v.currentTarget&&(t(),d())})}else t();return r.add(()=>t()),r.dispose}function ULe(e,t,r,n){let i=r?"enter":"leave",l=bg(),a=n!==void 0?BLe(n):()=>{};i==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let s=Cu(i,{enter:()=>t.enter,leave:()=>t.leave}),d=Cu(i,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),v=Cu(i,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return tA(e,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),eA(e,...s,...v),l.nextFrame(()=>{tA(e,...v),eA(e,...d),FLe(e,()=>(tA(e,...s),eA(e,...t.entered),a()))}),l.dispose}function jLe({container:e,direction:t,classes:r,onStart:n,onStop:i}){let l=h3(),a=_0(),s=im(t);Th(()=>{let d=bg();a.add(d.dispose);let v=e.current;if(v&&s.current!=="idle"&&l.current)return d.dispose(),n.current(s.current),d.add(ULe(v,r.current,s.current==="enter",()=>{d.dispose(),i.current(s.current)})),d.dispose},[t])}function sy(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let yC=Fe.createContext(null);yC.displayName="TransitionContext";var VLe=(e=>(e.Visible="visible",e.Hidden="hidden",e))(VLe||{});function qLe(){let e=Fe.useContext(yC);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function GLe(){let e=Fe.useContext(vC);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let vC=Fe.createContext(null);vC.displayName="NestingContext";function _C(e){return"children"in e?_C(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Sq(e,t){let r=im(e),n=Fe.useRef([]),i=h3(),l=_0(),a=To((L,F=em.Hidden)=>{let K=n.current.findIndex(({el:re})=>re===L);K!==-1&&(Cu(F,{[em.Unmount](){n.current.splice(K,1)},[em.Hidden](){n.current[K].state="hidden"}}),l.microTask(()=>{var re;!_C(n)&&i.current&&((re=r.current)==null||re.call(r))}))}),s=To(L=>{let F=n.current.find(({el:K})=>K===L);return F?F.state!=="visible"&&(F.state="visible"):n.current.push({el:L,state:"visible"}),()=>a(L,em.Unmount)}),d=Fe.useRef([]),v=Fe.useRef(Promise.resolve()),S=Fe.useRef({enter:[],leave:[],idle:[]}),A=To((L,F,K)=>{d.current.splice(0),t&&(t.chains.current[F]=t.chains.current[F].filter(([re])=>re!==L)),t==null||t.chains.current[F].push([L,new Promise(re=>{d.current.push(re)})]),t==null||t.chains.current[F].push([L,new Promise(re=>{Promise.all(S.current[F].map(([G,H])=>H)).then(()=>re())})]),F==="enter"?v.current=v.current.then(()=>t==null?void 0:t.wait.current).then(()=>K(F)):K(F)}),P=To((L,F,K)=>{Promise.all(S.current[F].splice(0).map(([re,G])=>G)).then(()=>{var re;(re=d.current.shift())==null||re()}).then(()=>K(F))});return Fe.useMemo(()=>({children:n,register:s,unregister:a,onStart:A,onStop:P,wait:v,chains:S}),[s,a,n,A,P,S,v])}function HLe(){}let WLe=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function qN(e){var t;let r={};for(let n of WLe)r[n]=(t=e[n])!=null?t:HLe;return r}function ZLe(e){let t=Fe.useRef(qN(e));return Fe.useEffect(()=>{t.current=qN(e)},[e]),t}let XLe="div",Eq=vS.RenderStrategy;function KLe(e,t){let{beforeEnter:r,afterEnter:n,beforeLeave:i,afterLeave:l,enter:a,enterFrom:s,enterTo:d,entered:v,leave:S,leaveFrom:A,leaveTo:P,...L}=e,F=Fe.useRef(null),K=uv(F,t),re=L.unmount?em.Unmount:em.Hidden,{show:G,appear:H,initial:B}=qLe(),[$,N]=Fe.useState(G?"visible":"hidden"),z=GLe(),{register:X,unregister:te}=z,pe=Fe.useRef(null);Fe.useEffect(()=>X(F),[X,F]),Fe.useEffect(()=>{if(re===em.Hidden&&F.current){if(G&&$!=="visible"){N("visible");return}return Cu($,{hidden:()=>te(F),visible:()=>X(F)})}},[$,F,X,te,G,re]);let ke=im({enter:sy(a),enterFrom:sy(s),enterTo:sy(d),entered:sy(v),leave:sy(S),leaveFrom:sy(A),leaveTo:sy(P)}),Pe=ZLe({beforeEnter:r,afterEnter:n,beforeLeave:i,afterLeave:l}),ge=l3();Fe.useEffect(()=>{if(ge&&$==="visible"&&F.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[F,$,ge]);let Ie=B&&!H,Ne=(()=>!ge||Ie||pe.current===G?"idle":G?"enter":"leave")(),lt=NLe(0),it=To(Ge=>Cu(Ge,{enter:()=>{lt.addFlag(Tf.Opening),Pe.current.beforeEnter()},leave:()=>{lt.addFlag(Tf.Closing),Pe.current.beforeLeave()},idle:()=>{}})),Rt=To(Ge=>Cu(Ge,{enter:()=>{lt.removeFlag(Tf.Opening),Pe.current.afterEnter()},leave:()=>{lt.removeFlag(Tf.Closing),Pe.current.afterLeave()},idle:()=>{}})),St=Sq(()=>{N("hidden"),te(F)},z);jLe({container:F,classes:ke,direction:Ne,onStart:im(Ge=>{St.onStart(F,Ge,it)}),onStop:im(Ge=>{St.onStop(F,Ge,Rt),Ge==="leave"&&!_C(St)&&(N("hidden"),te(F))})}),Fe.useEffect(()=>{Ie&&(re===em.Hidden?pe.current=null:pe.current=G)},[G,Ie,$]);let Zt=L,Kt={ref:K};return H&&G&&(Zt={...Zt,className:rI(L.className,...ke.current.enter,...ke.current.enterFrom)}),Ee.createElement(vC.Provider,{value:St},Ee.createElement(wq,{value:Cu($,{visible:Tf.Open,hidden:Tf.Closed})|lt.flags},Mg({ourProps:Kt,theirProps:Zt,defaultTag:XLe,features:Eq,visible:$==="visible",name:"Transition.Child"})))}function YLe(e,t){let{show:r,appear:n=!1,unmount:i,...l}=e,a=Fe.useRef(null),s=uv(a,t);l3();let d=f3();if(r===void 0&&d!==null&&(r=(d&Tf.Open)===Tf.Open),![!0,!1].includes(r))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[v,S]=Fe.useState(r?"visible":"hidden"),A=Sq(()=>{S("hidden")}),[P,L]=Fe.useState(!0),F=Fe.useRef([r]);Th(()=>{P!==!1&&F.current[F.current.length-1]!==r&&(F.current.push(r),L(!1))},[F,r]);let K=Fe.useMemo(()=>({show:r,appear:n,initial:P}),[r,n,P]);Fe.useEffect(()=>{if(r)S("visible");else if(!_C(A))S("hidden");else{let G=a.current;if(!G)return;let H=G.getBoundingClientRect();H.x===0&&H.y===0&&H.width===0&&H.height===0&&S("hidden")}},[r,A]);let re={unmount:i};return Ee.createElement(vC.Provider,{value:A},Ee.createElement(yC.Provider,{value:K},Mg({ourProps:{...re,as:Fe.Fragment,children:Ee.createElement(Cq,{ref:s,...re,...l})},theirProps:{},defaultTag:Fe.Fragment,features:Eq,visible:v==="visible",name:"Transition"})))}function JLe(e,t){let r=Fe.useContext(yC)!==null,n=f3()!==null;return Ee.createElement(Ee.Fragment,null,!r&&n?Ee.createElement(iI,{ref:t,...e}):Ee.createElement(Cq,{ref:t,...e}))}let iI=gm(YLe),Cq=gm(KLe),QLe=gm(JLe),e$e=Object.assign(iI,{Child:QLe,Root:iI});const GN=({buttonText:e,items:t})=>ae(Iw,{children:Ft("div",{className:"relative bg-tigGray-200  md:mr-2 ",children:[Ft(Iw.Button,{className:"p-4 h-full text-left bg-tigGray-200 my-2 md:my-0 text-[13px] font-light ",children:[ae("span",{className:"truncate",children:e}),ae("span",{className:"pl-2 fa fa-caret-down"})]}),ae(e$e,{as:Fe.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:ae(Iw.Options,{className:"z-50 absolute right-2 py-1.5 overflow-auto text-xs shadow-lg max-h-96 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-xs",style:{background:"#bbd4cb"},children:t.map((r,n)=>ae(Iw.Option,{className:({active:i})=>`${i?"text-amber-900 bg-white":"text-gray-900"}
                                  cursor-default select-none relative `,children:({selected:i,active:l})=>ae(po,{to:`${r.link}`,children:ae("span",{className:"font-light text-sm block px-6 truncate py-0.5",children:r.name})})},n))})})]})}),t$e=({user:e})=>{const t=[{name:"Catalog",link:"/"},{name:"My Settings",link:"/"},{name:"My Study Areas",link:"/"},{name:"My Snapshots",link:"/"},{name:"What I'm Watching",link:"/"},{name:"Recent Activity",link:"/"}],r=ae(GN,{buttonText:Ft("span",{children:["Welcome, - ",e.email]}),items:t}),i=ae(GN,{buttonText:"Admin",items:[{name:"Data Settings",link:"/settings"},{name:"Add Source",link:"/create/source"},{name:"Users",link:"/"},{name:"Agencies",link:"/"},{name:"All Comments",link:"/"},{name:"All Uploads",link:"/"},{name:"All Study Areas",link:"/"},{name:"Data Recovery",link:"/"},{name:"System Usage Report",link:"/"},{name:"System Change Report",link:"/"},{name:"User Activity Report",link:"/"},{name:"Update Help",link:"/"}]}),l=ae("a",{href:`/sources?contributor_id=${e.id}`,className:"p-4 h-full hover:bg-tigGray-50 hover:text-yellow-500 hover:cursor-pointer bg-tigGray-200 text-[13px] font-light md:mr-2",children:"Contributor"}),a=ae("a",{href:`/sources?librarian_id=${e.id}`,className:"p-4 h-full hover:bg-tigGray-50 hover:text-yellow-500 hover:cursor-pointer bg-tigGray-200 text-[13px] font-light md:mr-2",children:"Librarian"});return Ft("div",{className:"flex h-12 flex-col md:flex-row",children:[r,i,l,a,ae("a",{href:"/auth/logout",className:"p-4 h-full hover:bg-tigGray-50 hover:text-yellow-500 hover:cursor-pointer bg-tigGray-200 text-[13px] font-light md:mr-2",children:"Logout"})]})},r$e=Sc(({user:e})=>{const t=e.id?ae(t$e,{user:e}):Ft("div",{className:"flex h-12 flex-col md:flex-row",children:[ae("a",{className:"p-4 h-full bg-tigGray-200 my-2 md:my-0 md:mr-2 text-[13px] font-bold ",children:"Welcome!"}),ae("a",{href:"/auth/signup",className:"p-4 h-full hover:bg-tigGray-50 hover:text-yellow-500 hover:cursor-pointer bg-tigGray-200 mt-2 md:my-0 md:mr-2 text-[13px] font-light",children:"Sign up"}),ae("a",{href:"/auth/login",className:"p-4 h-full hover:bg-tigGray-50 hover:text-yellow-500 hover:cursor-pointer bg-tigGray-200 text-[13px] font-light md:mr-2",children:"Login"})]});return ae("div",{className:"z-50",children:ae(v7,{leftMenu:ae("a",{href:"/",className:" hover:bg-tigGray-50 h-12",children:ae("img",{alt:"NYMTC Logo",className:"bg-tigGray-200 hover:bg-tigGray-50",style:{height:50},src:"/images/nymtc_logo.svg"})}),rightMenu:t})})}),n$e=Sc(({children:e})=>ae("div",{className:"min-w-screen min-h-screen bg-white",children:Ft("div",{className:"xl:max-w-[1170px] lg:max-w-[970px] max-w-[750px] px-[15px] mx-auto min-h-screen flex flex-col z-10",children:[ae(r$e,{}),ae("div",{className:"flex-1",children:e})]})})),i$e=(e,t)=>{const r=e.auth?0:(e==null?void 0:e.authLevel)||-1,n=r>-1&&!Qt(e,["user","authed"],!1),i=Qt(e,["user","authLevel"],-1)<r;return n?t("/auth/login",{state:{from:e.path}}):i&&t("/"),!1},a$e=Jp.withAuth(({element:e,component:t,Layout:r=({children:i})=>ae(Pu,{children:i}),...n})=>{const i=e||t,l=Yc();return Ee.useEffect(()=>{i$e(n,l)},[]),ae(r,{...n,children:ae(i,{})})});function o$e(e,t){const r=e.filter(n=>n.mainNav);return e.map(n=>{let i=Ox(n);return i.element=ae(a$e,{...i,Layout:t,menus:r}),i})}const s$e=()=>ae("div",{className:"min-h-screen flex-1 flex flex-col text-gray-900 bg-gray-100",children:Ft("div",{className:"flex-1 flex items-center justify-center flex-col",children:[ae("div",{className:"text-6xl font-bold",children:"Tig Page"}),ae("div",{className:"text-xl",children:"Coming soon"}),ae("div",{className:"text-xl",children:"Check Back Later..."})]})}),l$e={name:"",path:"/tigpage",exact:!0,auth:!1,mainNav:!1,sideNav:{color:"dark",size:"none"},component:s$e},u$e=[l$e],c$e={title:"",Routes:u$e},f$e=e=>{const t=Fe.useMemo(()=>{const r=[...c$e.Routes,...Wze];return o$e(r,n$e)},[]);return Ft(Pu,{children:[ae(LF,{router:NF(t)}),ae(Jp.Messages,{})]})},h$e=Y3e({reducer:{data_manager:f5e,...Jp.Reducers,messages:Jp.messages}}),p$e=()=>{const e="nuetral",t="white",r="blue";return{graphColors:["#1e40af","#93c5fd","#1d4ed8","#bfdbfe"],graphCategorical:["#fde72f","#95d840","#55a488","#2f708e","#453781","#472354"],sidenav:(n={})=>{const{color:i="white",size:l="compact",subMenuStyle:a="inline",responsive:s="top"}=n;let d={top:"hidden md:block",side:"hidden md:block",none:""},v={white:{contentBg:`bg-${t}`,contentBgAccent:"bg-neutral-100",accentColor:`${r}-600`,accentBg:`hover:bg-${r}-400`,borderColor:`border-${e}-100`,textColor:`text-${e}-600`,textColorAccent:"text-slate-800",highlightColor:`text-${e}-800`},transparent:{contentBg:"bg-neutral-100",contentBgAccent:"bg-neutral-100",accentColor:`${r}-600`,accentBg:`hover:bg-${r}-400`,borderColor:`border-${e}-100`,textColor:`text-${e}-600`,textColorAccent:"text-slate-800",highlightColor:`text-${e}-800`},dark:{contentBg:"bg-neutral-800",contentBgAccent:"bg-neutral-900",accentColor:"white",accentBg:"",borderColor:"border-neutral-700",textColor:"text-slate-300",textColorAccent:"text-slate-100",highlightColor:`text-${t}`},bright:{contentBg:`bg-${r}-700`,accentColor:`${r}-400`,accentBg:`hover:bg-${r}-400`,borderColor:`border-${r}-600`,textColor:`text-${t}`,highlightColor:`text-${t}-500`}},S={none:{wrapper:"w-0 overflow-hidden",sideItem:"flex mx-2 pr-4 py-2 text-base ",topItem:"flex items-center text-sm px-4 border-r h-12",icon:"mr-3 text-lg"},compact:{fixed:"ml-0 md:ml-44",wrapper:"w-44 p-1 pt-4",sideItem:"flex mx-2 pr-4 py-2 text-base ",topItem:"flex items-center text-sm px-4 border-r h-12",icon:"mr-3 text-lg"},full:{fixed:"",wrapper:"w-full",sideItem:"flex px-4 py-2 text-base font-base border-b ",topItem:"flex pr-4 py-2 text-sm font-light",icon:"mr-4 text-2xl"},mini:{fixed:"ml-0 md:ml-20",wrapper:"w-20 overflow-x-hidden p-1 pt-4",sideItem:"flex pr-4 py-4 text-base font-base border-b",topItem:"flex px-4 items-center text-sm font-light ",icon:"w-20 mr-4 text-4xl",sideItemContent:"hidden"},micro:{fixed:"ml-0 md:ml-14",wrapper:"w-14 overflow-x-hidden",itemWrapper:"p-1",sideItem:"flex text-base font-base",topItem:"flex mx-6 pr-4 py-2 text-sm font-light",icon:"w-12 text-2xl hover:bg-neutral-900 px-2 py-3 my-2 rounded-lg mr-4 hover:text-blue-500",sideItemContent:"hidden"}},A={inline:{indicatorIcon:"fa fa-angle-right",indicatorIconOpen:"fa fa-angle-down",subMenuWrapper:"w-full",subMenuParentWrapper:"flex flex-col w-full"},flyout:{indicatorIcon:"fa fa-angle-down",indicatorIconOpen:"fa fa-angle-right",subMenuWrapper:`absolute ml-${S[l].width-8}`,subMenuParentWrapper:"flex flex-row",subMenuWrapperTop:"absolute top-full"}};return{fixed:`md:${S[l].fixed}`,logoWrapper:`${S[l].wrapper} ${v[i].contentBgAccent} ${v[i].textColorAccent}`,sidenavWrapper:`${d[s]} ${v[i].contentBg} ${S[l].wrapper} h-full z-20`,menuIconSide:` text-${v[i].accentColor} ${S[l].icon} group-hover:${v[i].highlightColor}`,itemsWrapper:`${v[i].borderColor} ${S[l].itemWrapper}  `,navitemSide:`
            group font-sans flex flex-col
            ${S[l].sideItem} ${v[i].textColor} ${v[i].borderColor}
            hover:${v[i].highlightColor}
            focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
            transition-all cursor-pointer
         `,navItemContent:`${S[l].sideItemContent}`,navitemSideActive:`
            group font-sans flex flex-col
            ${S[l].sideItem} text-blue-500 ${v[i].borderColor}
            hover:${v[i].highlightColor}
            focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
            transition-all cursor-pointer
          `,...A[a],vars:{colors:v,sizes:S,mobile:d}}},topnav:({color:n="white",size:i="compact"})=>{let l={white:{contentBg:"bg-white",accentColor:"[#679d89]",accentBg:`hover:bg-${r}-500`,borderColor:`border-${e}-100`,textColor:`text-${e}-500`,highlightColor:"text-[#679d89]"},bright:{contentBg:`bg-${r}-700`,accentColor:`${r}-400`,accentBg:`hover:bg-${r}-400`,borderColor:`border-${r}-600`,textColor:`text-${t}`,highlightColor:`text-${t}`}},a={compact:{menu:"hidden md:flex flex-1 justify-end",sideItem:"flex mx-6 pr-4 py-2 text-sm font-light hover:pl-4",topItem:`flex items-center text-sm px-4 border-r h-12 ${l[n].textColor} ${l[n].borderColor}
            ${l[n].accentBg} hover:${l[n].highlightColor}`,activeItem:`flex items-center text-sm px-4 border-r h-12 ${l[n].textColor} ${l[n].borderColor}
            ${l[n].accentBg} hover:${l[n].highlightColor}`,icon:"mr-3 text-lg",responsive:"md:hidden"},inline:{menu:"flex flex-1",sideItem:"flex mx-4 pr-4 py-4 text-base font-base border-b hover:pl-4",topItem:`flex px-4 py-2 mx-2 font-medium text-gray-400 border-b-2 ${l[n].textColor} ${l[n].borderColor}
          hover:border-gray-300 hover:text-gray-700 border-gray-100 `,activeItem:`flex px-4 py-2 mx-2 font-medium text-[#679d89] border-b-2 ${l[n].textColor} ${l[n].borderColor} border-[#679d89] `,icon:"mr-4 text-2xl",responsive:"hidden"}};return{topnavWrapper:`w-full ${l[n].contentBg} border-b border-gray-200`,topnavContent:"flex w-full h-full",topnavMenu:`${a[i].menu} h-full overflow-x-auto overflow-y-hidden scrollbar-sm`,menuIconTop:`text-${l[n].accentColor} ${a[i].icon} group-hover:${l[n].highlightColor}`,menuOpenIcon:"fa fa-bars",menuCloseIcon:'fa fa-xmark fa-fw"',navitemTop:`
            group font-sans
            ${a[i].topItem}
            focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
            transition cursor-pointer
        `,topmenuRightNavContainer:"hidden md:block h-full",navitemTopActive:` group font-sans
            ${a[i].activeItem}
            focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
            transition cursor-pointer
          `,mobileButton:`${a[i].responsive} ${l[n].contentBg} inline-flex items-center justify-center p-2  text-gray-400 hover:bg-gray-100 `,vars:{colors:l,sizes:a}}},select:(n={})=>{const{color:i="white"}=n;let l={white:"white",transparent:"gray-100 border border-gray-200 shadow-sm"};return{menuWrapper:`bg-${l[i]} my-1`,menuItemActive:`px-4 py-2 cursor-not-allowed bg-${r}-200 border-1 focus:border-${r}-300`,menuItem:`px-4 py-2 cursor-pointer hover:bg-blue-100 border-1 border-${l[i]} focus:border-blue-300`,select:`bg-${l[i]} w-full flex flex-row flex-wrap justify-between px-4 py-2 cursor-pointer focus:border-blue-300`,selectIcon:"fal fa-angle-down text-gray-400 pt-2"}},table:(n={color:"white",size:"compact"})=>{const{color:i="white",size:l="compact"}=n;let a={white:"bg-white hover:bg-gray-100",gray:"bg-gray-100 hover:bg-gray-200",transparent:"gray-100"},s={small:"px-4 py-1 text-xs",compact:"px-4 py-1 text-sm",full:"px-10 py-5"};return{tableHeader:`${s[l]} pb-1 h-8 border border-b-4 border-gray-200 bg-white text-left font-medium text-gray-700 uppercase first:rounded-tl-md last:rounded-tr-md capitalize`,tableInfoBar:"bg-white",tableRow:`${a[i]} transition ease-in-out duration-150 hover:bg-gray-300`,tableRowStriped:"bg-white odd:bg-tigGray-25 hover:bg-tigGray-100 bg-opacity-25 transition ease-in-out duration-150",tableCell:`${s[l]} break-words border border-gray-200 pl-1 align-top font-light text-sm`,inputSmall:"w-24",sortIconDown:"fas fa-sort-amount-down text-tigGray-300 opacity-75",sortIconUp:"fas fa-sort-amount-up text-tigGray-300 opacity-75",sortIconIdeal:"fa fa-sort-alt text-tigGray-300 opacity-25",vars:{color:a,size:s}}},tabpanel:(n={})=>{const{tabLocation:i="top"}=n;let l={top:{tabpanelWrapper:"flex-col",tabWrapper:"flex-row",tab:"border-b-2"},left:{tabpanelWrapper:"flex-row",tabWrapper:"flex-col",tab:"border-r-2"}};return{tabpanelWrapper:`flex ${l[i].tabpanelWrapper} w-full h-full`,tabWrapper:`flex ${l[i].tabWrapper}`,tab:"px-4 py-2 hover:text-gray-800 cursor-pointer   text-center text-gray-500",tabActive:`px-4 py-2 text-${r}-500 ${l[i].tab} border-blue-500 text-center`,icon:"",tabName:"",contentWrapper:"bg-white flex-1 h-full",vars:{tabLocation:l}}},button:(n={})=>{const{color:i="white",size:l="base",width:a="block"}=n;let s={white:`
                    border border-gray-300  text-gray-700 bg-white hover:text-gray-500
                    focus:outline-none focus:shadow-outline-blue focus:border-blue-300
                    active:text-gray-800 active:bg-gray-50 transition duration-150 ease-in-out
                    disabled:cursor-not-allowed
                `,cancel:`
                    border border-red-300  text-red-700 bg-white hover:text-red-500
                    focus:outline-none focus:shadow-outline-blue focus:border-blue-300
                    active:text-red-800 active:bg-gray-50 transition duration-150 ease-in-out
                    disabled:cursor-not-allowed
                `,transparent:`
                    border border-gray-300  text-gray-700 bg-white hover:text-gray-500
                    focus:outline-none focus:shadow-outline-blue focus:border-blue-300
                    active:text-gray-800 active:bg-gray-50 transition duration-150 ease-in-out
                    disabled:cursor-not-allowed
                `,primary:`
                    border border-transparent shadow 
                    text-sm leading-4 rounded-sm text-white bg-blue-600 hover:bg-blue-700 
                    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,danger:""},d={base:"px-4 py-4 leading-5 font-medium",sm:"text-sm px-2 py-2 leading-5 font-medium",lg:"text-lg px-6 py-6 leading-5 font-medium",xl:"text-2xl px-12 py-8 leading-5 font-medium"},v={block:"",full:"w-full"};return{button:`
                  ${s[i]} ${d[l]} ${v[a]}
                `,vars:{color:s,size:d,width:v}}},input:(n={})=>{const{color:i="white",size:l="small",width:a="block"}=n;let s={white:"bg-white",gray:"bg-gray-100"},d={base:"px-4 py-4 font-medium",small:"text-sm px-2 py-2 font-medium text-xs",large:"text-lg px-6 py-6 font-medium text-xl"},v={block:"",full:"w-full"};return{input:`
                 ${s[i]} ${d[l]} ${v[a]}
                `,vars:{color:s,size:d,width:v}}},modal:(n={})=>{const{size:i="base",overlay:l="default"}=n;let a={default:"fixed  inset-0 bg-gray-500 opacity-75",none:""},s={base:"sm:max-w-2xl",small:"w-64",large:"sm:max-w-5xl",xlarge:"sm:max-w-8xl"};return{modalContainer:`${l==="default"?"":"pointer-events-none"} fixed bottom-0 inset-x-0 px-4 pb-4 inset-0 flex items-center justify-center`,modalOverlay:a[l],modal:`${s[i]} w-full  pointer-events-auto bg-white rounded-lg overflow-hidden shadow-xl transform transition-all`,vars:{size:s,overlay:a}}},shadow:"shadow",ySpace:"py-4",text:"text-gray-800",textContrast:"text-white",border:"broder-gray-400",textInfo:"text-blue-400",bgInfo:"bg-blue-400",borderInfo:"border-blue-400",textSuccess:"text-blue-400",bgSuccess:"bg-blue-400",borderSuccess:"border-blue-400",textDanger:"text-red-400",bgDanger:"bg-red-400",borderDanger:"border-red-400",textWarning:"text-yellow-400",bgWarning:"bg-yellow-400",borderWarning:"border-yellow-400",textLight:"text-gray-400",placeholder:"placeholder-gray-400",topMenuBorder:"border-b border-gray-200",topMenuScroll:"",headerShadow:"",navText:"text-gray-100",navMenu:"h-full relative",navMenuOpen:"bg-darkblue-500 text-white shadow-lg w-56 rounded-t-lg",navMenuBg:"bg-darkblue-500 bb-rounded-10 shadow-lg text-white rounded-b-lg",navMenuItem:"hover:font-medium cursor-pointer px-2 py-1 text-lg font-semibold",bg:"bg-gray-50",menuBg:"bg-white z-50",menuBgHover:"",menuBgActive:"bg-blue-200",menuBgActiveHover:"hover:bg-blue-300",menuText:"text-gray-100",menuTextHover:"hover:text-gray-700",menuTextActive:"text-blue-500",menuTextActiveHover:"hover:text-blue-700",headerBg:"bg-gray-200",headerBgHover:"hover:bg-gray-400",inputBg:"bg-white disabled:bg-gray-200 cursor-pointer focus:outline-none",inputBorder:"rounded border-0 border-transparent hover:border-gray-300 focus:border-gray-600 disabled:border-gray-200",inputBgDisabled:"bg-gray-200 cursor-not-allowed focus:outline-none",inputBorderDisabled:"rounded border-2 border-gray-200 hover:border-gray-200",inputBgFocus:"bg-white cursor-pointer focus:outline-none",inputBorderFocus:"rounded border-2 border-transparent hover:border-gray-600 focus:border-gray-600 border-gray-600",textBase:"text-base",textSmall:"text-sm",textLarge:"text-lg",paddingBase:"py-1 px-2",paddingSmall:"py-0 px-1",paddingLarge:"py-2 px-4",contentBg:"bg-white",accent1:"bg-blue-100",accent2:"bg-gray-300",accent3:"bg-gray-400",accent4:"bg-gray-500",highlight1:"bg-blue-200",highlight2:"bg-blue-300",highlight3:"bg-blue-400",highlight4:"bg-blue-500",width:"",transition:"transition ease-in-out duration-150",tableRow:"bg-gray-100 hover:bg-gray-200 transition ease-in-out duration-150",tableRowStriped:"bg-gray-100 even:bg-gray-200 hover:bg-gray-300 transition ease-in-out duration-150",tableCell:"px-4 py-1 whitespace-no-wrap",tableHeader:"px-4 py-2 pb-1 border-b-2 border-gray-300 bg-gray-200 text-left font-medium text-gray-700 uppercase first:rounded-tl-md last:rounded-tr-md"}},d$e=p$e(),m$e="modulepreload",g$e=function(e){return"/"+e},HN={},y$e=function(t,r,n){if(!r||r.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(r.map(l=>{if(l=g$e(l),l in HN)return;HN[l]=!0;const a=l.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(!!n)for(let S=i.length-1;S>=0;S--){const A=i[S];if(A.href===l&&(!a||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${s}`))return;const v=document.createElement("link");if(v.rel=a?"stylesheet":m$e,a||(v.as="script",v.crossOrigin=""),v.href=l,document.head.appendChild(v),a)return new Promise((S,A)=>{v.addEventListener("load",S),v.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>t())},v$e=e=>{e&&e instanceof Function&&y$e(()=>import("./web-vitals.es5.min-94f16f1b.js"),[]).then(({getCLS:t,getFID:r,getFCP:n,getLCP:i,getTTFB:l})=>{t(e),r(e),n(e),i(e),l(e)})},_$e=Jp.enableAuth(f$e,{AUTH_HOST:v5e,PROJECT_NAME:y5e,CLIENT_HOST:_5e});XW.render(ae(Ee.StrictMode,{children:ae(bU,{store:h$e,children:ae(E3e,{falcor:qR(KV),children:ae(wj.Provider,{value:d$e,children:ae(_$e,{})})})})}),document.getElementById("root"));v$e()});export default b$e();
